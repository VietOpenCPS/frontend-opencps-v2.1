(function(t){function e(e){for(var n,r,c=e[0],s=e[1],l=e[2],p=0,u=[];p<c.length;p++)r=c[p],Object.prototype.hasOwnProperty.call(o,r)&&o[r]&&u.push(o[r][0]),o[r]=0;for(n in s)Object.prototype.hasOwnProperty.call(s,n)&&(t[n]=s[n]);d&&d(e);while(u.length)u.shift()();return i.push.apply(i,l||[]),a()}function a(){for(var t,e=0;e<i.length;e++){for(var a=i[e],n=!0,r=1;r<a.length;r++){var s=a[r];0!==o[s]&&(n=!1)}n&&(i.splice(e--,1),t=c(c.s=a[0]))}return t}var n={},o={app:0},i=[];function r(t){return c.p+"../../wars/opencps-store/src/main/webapp/js/cli/system_queue_application_form/app/js/"+({HoanThienBoSungHoSoDetail:"HoanThienBoSungHoSoDetail",Landing:"Landing",TiepNhanHoSoDetail:"TiepNhanHoSoDetail"}[t]||t)+".js"}function c(e){if(n[e])return n[e].exports;var a=n[e]={i:e,l:!1,exports:{}};return t[e].call(a.exports,a,a.exports,c),a.l=!0,a.exports}c.e=function(t){var e=[],a=o[t];if(0!==a)if(a)e.push(a[2]);else{var n=new Promise((function(e,n){a=o[t]=[e,n]}));e.push(a[2]=n);var i,s=document.createElement("script");s.charset="utf-8",s.timeout=120,c.nc&&s.setAttribute("nonce",c.nc),s.src=r(t);var l=new Error;i=function(e){s.onerror=s.onload=null,clearTimeout(p);var a=o[t];if(0!==a){if(a){var n=e&&("load"===e.type?"missing":e.type),i=e&&e.target&&e.target.src;l.message="Loading chunk "+t+" failed.\n("+n+": "+i+")",l.name="ChunkLoadError",l.type=n,l.request=i,a[1](l)}o[t]=void 0}};var p=setTimeout((function(){i({type:"timeout",target:s})}),12e4);s.onerror=s.onload=i,document.head.appendChild(s)}return Promise.all(e)},c.m=t,c.c=n,c.d=function(t,e,a){c.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:a})},c.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},c.t=function(t,e){if(1&e&&(t=c(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var a=Object.create(null);if(c.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var n in t)c.d(a,n,function(e){return t[e]}.bind(null,n));return a},c.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return c.d(e,"a",e),e},c.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},c.p="/",c.oe=function(t){throw console.error(t),t};var s=window["webpackJsonp"]=window["webpackJsonp"]||[],l=s.push.bind(s);s.push=e,s=s.slice();for(var p=0;p<s.length;p++)e(s[p]);var d=l;i.push([0,"chunk-vendors"]),a()})({0:function(t,e,a){t.exports=a("56d7")},1074:function(module,__webpack_exports__,__webpack_require__){"use strict";var vue__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("a026"),jquery__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("1157"),jquery__WEBPACK_IMPORTED_MODULE_1___default=__webpack_require__.n(jquery__WEBPACK_IMPORTED_MODULE_1__),toastr__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("854a"),toastr__WEBPACK_IMPORTED_MODULE_2___default=__webpack_require__.n(toastr__WEBPACK_IMPORTED_MODULE_2__),axios__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("bc3a"),axios__WEBPACK_IMPORTED_MODULE_3___default=__webpack_require__.n(axios__WEBPACK_IMPORTED_MODULE_3__),_store_support_json__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("bbd0"),_store_support_json__WEBPACK_IMPORTED_MODULE_4___namespace=__webpack_require__.t("bbd0",1);toastr__WEBPACK_IMPORTED_MODULE_2___default.a.options={positionClass:"toast-top-center"},vue__WEBPACK_IMPORTED_MODULE_0__["a"].use(toastr__WEBPACK_IMPORTED_MODULE_2___default.a),__webpack_exports__["a"]={props:[],components:{},data:function(){return{serviceInfoList:[],eformNoSearch:"",secretKey:"",dialogSecret:!1,validSecret:!1,isUpdate:!1,dataCheck:"",loadingForm:!1,isSigned:!!window.themeDisplay&&window.themeDisplay.isSignedIn(),dialogLogin:!1,userName:"",passWord:"",valid:!1,captcha:!1,j_captcha_response:"",loadingLogin:!1,dataMapping:"",mapping:!1,dialogLoadingCreate:!1,dialogSelectGovagency:!1,agencyItems:[{name:"Cục lãnh sự - 40 Trần Phú, Ba Đình, Hà Nội",value:"124302",code:"CLS",serverNo:"SERVER_CLS"},{name:"Sở ngoại vụ thành phố Hồ Chí Minh",value:"703021",code:"SNVHCM",serverNo:"SERVER_SNVHCM"}],agencySelected:""}},computed:{serviceinfoSelected:function(){return this.$store.getters.getServiceinfoSelected},fileTemplateSelected:function(){return this.$store.getters.getFileTemplateSelected},formScriptEform:function(){return this.$store.getters.getFormScriptEform}},created:function(){var t=this;t.$nextTick((function(){var e=t.$router.history.current,a=e.query;if(t.fileTemplateSelected)t.loadScriptTemplate(t.fileTemplateSelected);else if(a.hasOwnProperty("service")&&a.service&&a.hasOwnProperty("template")&&a.template){a.hasOwnProperty("vnconnect")&&"1"===String(a["vnconnect"])&&!window.themeDisplay.isSignedIn()&&t.checkVNConect();var n=window.location.href.split("?");if(n[1]){var o=decodeURIComponent(String(t.getSearchParams(n[1],"data")));if(o){var i=JSON.parse(atob(o));if(i&&i.hasOwnProperty("userId")&&"0"===String(i.userId)){t.mapping=!0,t.dataMapping=i,t.dialogLogin=!0;var r="",c="",s="";"1"===i.LoaiTaiKhoan?(r="Số CMND/ Căn cước ",s=i.SoCMND):"2"===i.LoaiTaiKhoan&&(r="Mã số thuế ",s=i.MaSoThue),r&&(i.SoCMND||i.MaSoThue)&&(c=r+s+" đã tạo tài khoản trên hệ thống. Vui lòng đăng nhập để đồng bộ với tài khoản Cổng Dịch vụ công Quốc gia."),c&&(toastr__WEBPACK_IMPORTED_MODULE_2___default.a.options={positionClass:"toast-top-center",closeButton:!0,timeOut:"30000"},toastr__WEBPACK_IMPORTED_MODULE_2___default.a.info(c))}}}t.loadingForm=!0;var l={index:a.service};t.$store.dispatch("getServiceDetail",l).then((function(e){t.$store.commit("setServiceinfoSelected",e),t.$store.commit("setFileTemplateSelected",e.fileTemplates);var n={serviceInfoId:a.service,fileTemplateNo:a.template};t.loadScriptTemplate(n)})).catch((function(e){t.loadingForm=!1}))}else t.goBack();try{t.agencyItems=agencyItems}catch(p){}a.hasOwnProperty("agency")&&a.agency?(t.agencySelected=a.agency,t.dialogSelectGovagency=!1):t.dialogSelectGovagency=!0}))},updated:function(){},watch:{$route:function(t,e){var a=this,n=(t.params,t.query);if(a.fileTemplateSelected)a.loadScriptTemplate(a.fileTemplateSelected);else if(n.hasOwnProperty("service")&&n.service&&n.hasOwnProperty("template")&&n.template){a.loadingForm=!0;var o={index:n.service};a.$store.dispatch("getServiceDetail",o).then((function(t){a.$store.commit("setServiceinfoSelected",t),a.$store.commit("setFileTemplateSelected",t.fileTemplates);var e={serviceInfoId:n.service,fileTemplateNo:n.template};a.loadScriptTemplate(e)})).catch((function(t){a.loadingForm=!1}))}else a.goBack()}},methods:{loadScriptTemplate:function loadScriptTemplate(dataInput){var vm=this;vm.loadingForm=!0,vm.$store.dispatch("loadFormScript",dataInput).then((function(resFormScript){var formScript,formData;(vm.loadingForm=!1,vm.$store.commit("setFormScriptEform",resFormScript),resFormScript)&&(formScript=resFormScript?eval("("+resFormScript+")"):{},formData={},formScript.data=formData,window.$("#formAlpacaEform").alpaca(formScript))})).catch((function(){vm.loadingForm=!1}))},searchEform:function(){var t=this;t.dialogSecret=!0},submitSearchEform:function submitSearchEform(){var vm=this;if(vm.$refs.formSecret.validate()&&vm.eformNoSearch.indexOf("-")>0){var filter={eFormId:String(vm.eformNoSearch).split("-")[2],secret:String(vm.eformNoSearch).split("-")[1]};vm.dataCheck=filter,vm.$store.dispatch("getEformData",filter).then((function(result){var formScript,formData;result&&"secretFail"!==result&&(toastr__WEBPACK_IMPORTED_MODULE_2___default.a.success("Lấy thông tin tờ khai thành công"),vm.$store.commit("setEformDetail",result),vm.dialogSecret=!1,window.$("#formAlpacaEform").empty(),formScript=vm.formScriptEform?eval("("+vm.formScriptEform+")"):{},formData=eval("("+result+")"),formScript.data=formData,window.$("#formAlpacaEform").alpaca(formScript),vm.isUpdate=!0)})).catch((function(t){}))}else toastr__WEBPACK_IMPORTED_MODULE_2___default.a.clear(),toastr__WEBPACK_IMPORTED_MODULE_2___default.a.error("Mã tờ khai không chính xác. Vui lòng kiểm tra lại")},postEform:function(){var t=this,e=t.$router.history.current,a=e.query,n=a.hasOwnProperty("template")&&a.template?a.template:"",o={headers:{groupId:window.themeDisplay?window.themeDisplay.getScopeGroupId():""}};try{var i=window.$("#formAlpacaEform").alpaca("get"),r=i.getValue(),c=window.$("#formAlpacaEform").alpaca("get").childrenByPropertyId;if(c)for(var s in c)if(c[s].isRequired()&&""===c[s].getValue()){if("select"!==c[s].options.type){var l="#"+c[s].options["id"];jquery__WEBPACK_IMPORTED_MODULE_1___default()(l).attr("style","border-color: red !important")}else{var p="#select2-"+c[s].options["id"]+"-container";jquery__WEBPACK_IMPORTED_MODULE_1___default()(jquery__WEBPACK_IMPORTED_MODULE_1___default()(p).parent()).attr("style","border-color: red !important")}return document.getElementById(c[s].options["id"]).scrollIntoView(),window.scrollBy(0,-100),toastr__WEBPACK_IMPORTED_MODULE_2___default.a.clear(),void toastr__WEBPACK_IMPORTED_MODULE_2___default.a.error(c[s].options.title?c[s].options.title+" là bắt buộc":c[s].options["name"]+" là bắt buộc")}var d=new URLSearchParams;d.append("eFormData",JSON.stringify(r)),d.append("govAgencyCode",t.agencySelected),d.append("serviceInfoId",t.serviceinfoSelected.serviceInfoId),d.append("fileTemplateNo",n||t.fileTemplateSelected.fileTemplateNo),d.append("email",""),axios__WEBPACK_IMPORTED_MODULE_3___default.a.post("/o/rest/v2/eforms",d,o).then((function(e){t.$store.commit("setEformDetail",e.data),t.$router.push({path:"/tao-to-khai-thanh-cong/0",query:{renew:Math.floor(100*Math.random())+1}})})).catch((function(t){}))}catch(u){}},putEform:function(){var t=this,e={headers:{groupId:window.themeDisplay?window.themeDisplay.getScopeGroupId():""}};try{var a=window.$("#formAlpacaEform").alpaca("get"),n=a.getValue(),o=window.$("#formAlpacaEform").alpaca("get").childrenByPropertyId;if(o)for(var i in o)if(o[i].isRequired()&&""===o[i].getValue())return toastr__WEBPACK_IMPORTED_MODULE_2___default.a.clear(),void toastr__WEBPACK_IMPORTED_MODULE_2___default.a.error(o[i].options.title?o[i].options.title+" là bắt buộc":o[i].options["name"]+" là bắt buộc");var r=new URLSearchParams;r.append("eFormData",JSON.stringify(n)),axios__WEBPACK_IMPORTED_MODULE_3___default.a.put("/o/rest/v2/eforms/"+t.dataCheck.eFormId+"/data/"+t.dataCheck.secret,r,e).then((function(e){var a={eFormId:t.dataCheck["eFormId"]};t.$store.dispatch("getEform",a).then((function(e){t.$store.commit("setEformDetail",e),t.$router.push({path:"/tao-to-khai-thanh-cong",query:{renew:Math.floor(100*Math.random())+1}})}))})).catch((function(t){}))}catch(c){}},deleteAlpacaForm:function(){},checkVNConect:function(){var t=this,e=(t.$router.history.current,t.$router.history.current.query),a="",n="";e.hasOwnProperty("service")&&e.service&&(a=e.service),e.hasOwnProperty("template")&&e.template&&(n=e.template);var o={state:"",redirectURL:a&&n?window.location.href.split("?")[0]+"?service="+a+"&template="+n:window.location.href.split("?")[0]};setTimeout((function(){t.isSigned||(t.dialogLoadingCreate=!0,t.$store.dispatch("getVNConect",o).then((function(e){e?window.location.href=e:alert("Chức năng đang cập nhật"),t.dialogLoadingCreate=!1})).catch((function(){t.dialogLoadingCreate=!1,t.isSigned||(t.dialogLogin=!0)})))}),300)},submitConfirmLogin:function(){var t=this,e=(t.$router.history.current,{npmreactlogin_login:t.userName,npmreactlogin_password:t.passWord,j_captcha_response:t.j_captcha_response});t.$refs.form.validate()&&t.userName&&t.passWord&&(t.loadingLogin=!0,t.$store.dispatch("goToDangNhap",e).then((function(e){t.loadingLogin=!1,t.mapping&&"success"===e&&t.doMappingDvcqg(),"success"===e&&(t.dialogLogin=!1),"captcha"===e&&(t.captcha=!0,t.makeImageCap())})).catch((function(){t.loadingLogin=!1,t.makeImageCap()})))},getSearchParams:function(t,e){var a="",n=t.split("&");return n.forEach((function(t){t=t.split("=");var n=t[0];n===e&&(a=t[1])})),a},makeImageCap:function(){var t=this;t.chapchablob="",t.$store.dispatch("makeImageCapLogin").then((function(e){t.chapchablob=e})).catch((function(e){t.chapchablob=""}))},doMappingDvcqg:function(){var t=this,e={dataMapping:t.dataMapping};t.$store.dispatch("mappingDvcqg",e).then((function(t){})).catch((function(){}))},selectAgency:function(t){var e=this;e.agencySelected=t.code,e.dialogSelectGovagency=!1},goBack:function(){var t=this,e=t.$router.history.current,a=e.query;a.hasOwnProperty("service")&&a.service&&a.hasOwnProperty("template")&&a.template?window.history.back():t.$router.push({path:"/",query:{renew:Math.floor(100*Math.random())+1}})}}}},"2c76":function(t,e,a){"use strict";a("d44f")},"56d7":function(t,e,a){"use strict";a.r(e);a("0f18");var n=a("a026"),o=a("bb71");a("74ef");n["a"].use(o["a"],{theme:{primary:"#001f4d",secondary:"#424242",accent:"#001f4d",error:"#FF5252",info:"#2196F3",success:"#4CAF50",warning:"#FFC107"},customProperties:!0,iconfont:"md"});var i=a("7496"),r=a("549c"),c=function(){var t=this,e=t._self._c;return e(i["a"],{staticStyle:{"max-width":"1300px",margin:"0 auto"},attrs:{id:"app_application_form"}},[t._e(),e(r["a"],[e("router-view")],1)],1)},s=[],l=a("49ec"),p=a.n(l),d={data:function(){return{active:null,activeAll:!1,activeTab:0,activeService:"",pathRouter:"/thu-tuc-hanh-chinh",currentAgency:"",currentDomain:"",currentLevel:"",currentMethod:"",countAllService:0,isDetail:!1,text:"",menuServiceInfos:[{id:1,name:"Thủ tục nhóm 1",code:"13213",count:2,children:[]},{id:2,name:"Thủ tục nhóm 2",code:"132113",count:2,children:[]},{id:3,name:"Thủ tục nhóm 3",code:"1321313",count:2,children:[]},{id:4,name:"Thủ tục nhóm 4",code:"132413",count:2,children:[]}],serviceInfoList:[]}},components:{GoTop:p.a},computed:{},created:function(){var t=this,e=window.innerWidth<1264;t.$store.commit("setIsMobile",e),t.$nextTick((function(){var e=t.$router.history.current;e.query}))},watch:{$route:function(t,e){t.params,t.query}},methods:{doLoadingThuTuc:function(){var t=this;t.serviceInfoList=[],t.loading=!0;var e=t.$router.history.current.query,a=null;a={page:e.page?e.page:1},t.$store.dispatch("getServiceLists",a).then((function(e){t.loading=!1,e.data?(t.serviceInfoList=e.data,t.totalThuTuc=e.total,t.menuServiceInfos[0]["children"]=[t.serviceInfoList[0],t.serviceInfoList[1]],t.menuServiceInfos[1]["children"]=[t.serviceInfoList[2],t.serviceInfoList[3]],t.menuServiceInfos[2]["children"]=[t.serviceInfoList[4],t.serviceInfoList[5]],t.menuServiceInfos[3]["children"]=[t.serviceInfoList[6],t.serviceInfoList[7]]):(t.totalThuTuc=0,t.serviceInfoList=[]),t.serviceItemTotal=e.total})).catch((function(e){t.loading=!1,t.serviceInfoList=[]}))},getEformServiceInfo:function(t,e){var a=this;a.activeService=e.serviceInfoId,a.$store.commit("setServiceinfoSelected",e),a.$store.dispatch("getFileTemplateEform",e).then((function(t){if(t.data){var n=Object.assign({},t.data[0],{serviceInfoId:e.serviceInfoId});a.$store.commit("setFileTemplateSelected",n),a.$store.dispatch("loadFormScript",n).then((function(t){a.$store.commit("setFormScriptEform",t),t&&setTimeout((function(){var t=$("#formAlpacaEform").offset().top+100,e=$("#eform-btn").offset().left;$(window).scroll((function(){$(window).scrollTop()>t?$("#eform-btn").css({position:"fixed",top:0,left:"".concat(e,"px")}):$("#eform-btn").css({position:"relative",top:0,right:"30px"})}))}),300),a.$store.dispatch("loadFormData",n).then((function(t){}))}))}}))},goBack:function(){window.history.back()}}},u=d,h=(a("2c76"),a("2877")),m=Object(h["a"])(u,c,s,!1,null,null,null),f=m.exports,g=a("8c4f"),v=a("a523"),_=a("0e8f"),y=a("a722"),k=a("490a"),w=function(){var t=this,e=t._self._c;return e(v["a"],{attrs:{fluid:""}},[e(y["a"],{attrs:{row:"",wrap:""}},[e(_["a"],{staticClass:"text-xs-center",attrs:{xs12:"","mt-5":""}},[e(k["a"],{attrs:{size:100,width:1,color:"primary",indeterminate:""}})],1)],1)],1)},b=[],S={},x=S,C=Object(h["a"])(x,w,b,!1,null,null,null),T=C.exports,D=a("0798"),I=a("c6a6"),N=a("8336"),E=a("b0af"),P=a("99d9"),L=a("2e4b"),F=a("169a"),M=a("cd55"),O=a("49e2"),B=a("4bd4"),A=a("132d"),R=a("8860"),q=a("ba95"),G=a("c954"),j=a("5d23"),U=a("e449"),V=a("8e36"),H=a("9910"),K=a("2677"),z=a("71d9"),W=a("2a7f"),Q=function(){var t=this,e=t._self._c;return e("div",{staticStyle:{border:"1px solid #dedede","border-top":"0"}},[e(F["a"],{attrs:{persistent:"",width:"450"},model:{value:t.dialogLoadingCreate,callback:function(e){t.dialogLoadingCreate=e},expression:"dialogLoadingCreate"}},[e(E["a"],{attrs:{color:"primary",dark:""}},[e(P["b"],[e(V["a"],{staticClass:"mb-0",attrs:{indeterminate:"",color:"white"}})],1)],1)],1),t.dialogLoadingCreate?t._e():e(y["a"],{attrs:{wrap:""}},[t.isMobile?e(_["a"],{attrs:{xs12:""}},[e("div",{staticClass:"row-header no__hidden_class"},[e(z["a"],{attrs:{flat:"",height:"36",dark:"",color:"primary"}},[e(W["a"],{staticClass:"white--text",staticStyle:{"font-size":"14px"}},[t._v("DANH SÁCH MẪU TỜ KHAI TRỰC TUYẾN")])],1)],1),e(E["a"],{attrs:{flat:""}},[e(P["b"],{staticClass:"grey lighten-3 px-0 py-0"},[e(M["a"],{staticClass:"expand__select__domain",attrs:{expand:""},model:{value:t.panelServiceList,callback:function(e){t.panelServiceList=e},expression:"panelServiceList"}},t._l(t.serviceInfoList,(function(a,n){return e(O["a"],{key:n,attrs:{value:!0}},[e(E["a"],t._l(a.templateList,(function(o,i){return e("div",{key:i,staticClass:"pl-2"},[e(y["a"],{attrs:{row:"",wrap:""}},[e(_["a"],{staticClass:"pt-1 primary--text text-bold",staticStyle:{cursor:"pointer"},attrs:{xs9:"",sm10:""},on:{click:function(e){return t.selectTemplate(n,o,a)}}},[e("span",[t._v(t._s(n+1)+".")]),t._v("  \n                      "),e("span",[t._v(t._s(o.templateName))])]),e(_["a"],{staticClass:"text-xs-center",attrs:{xs3:"",sm2:""}},[e(U["a"],{attrs:{left:"","offset-x":""}},[e(N["a"],{staticClass:"mx-0 my-0 mt-1 white--text",attrs:{slot:"activator",color:"primary",small:""},on:{click:function(e){return t.selectTemplate(n,o,a)}},slot:"activator"},[t._v("\n                          Chọn\n                        ")])],1)],1)],1)],1)})),0)],1)})),1)],1)],1)],1):t._e(),t.isMobile?t._e():e(_["a"],{attrs:{xs12:"",md8:""}},[e("div",{staticClass:"row-header no__hidden_class"},[e(z["a"],{attrs:{flat:"",height:"36",dark:"",color:"primary"}},[e(W["a"],{staticClass:"white--text",staticStyle:{"font-size":"14px"}},[t._v("DANH SÁCH MẪU TỜ KHAI TRỰC TUYẾN")])],1)],1),e(E["a"],{attrs:{flat:""}},[e(P["b"],{staticClass:"grey lighten-3 px-0 py-0"},[e(M["a"],{staticClass:"expand__select__domain",attrs:{expand:""},model:{value:t.panelServiceList,callback:function(e){t.panelServiceList=e},expression:"panelServiceList"}},t._l(t.serviceInfoList,(function(a,n){return e(O["a"],{key:n,attrs:{value:!0}},[e("div",{staticClass:"text-bold",staticStyle:{"margin-left":"14px",color:"#615d5d"},attrs:{slot:"header"},slot:"header"},[e(A["a"],{staticClass:"pr-2",attrs:{color:"#615d5d"}},[t._v("navigate_next")]),e("span",{staticStyle:{position:"absolute","margin-top":"1px"}},[t._v(t._s(a.serviceCode)+"  - "+t._s(a.serviceName)+" ")])],1),e(E["a"],t._l(a.templateList,(function(o,i){return e(P["b"],{key:i,staticClass:"card__text__gov"},[e(y["a"],{attrs:{row:"",wrap:""}},[e(_["a"],{staticClass:"pt-1 primary--text text-bold",staticStyle:{cursor:"pointer"},attrs:{xs12:"",sm10:""},on:{click:function(e){return t.selectTemplate(n,o,a)}}},[e("span",[t._v(t._s(i+1)+".")]),t._v("  \n                      "),e("span",[t._v(t._s(o.templateName))])]),e(_["a"],{staticClass:"text-xs-center",attrs:{xs12:"",sm2:""}},[e(U["a"],{attrs:{left:"","offset-x":""}},[e(N["a"],{staticClass:"mx-0 my-0 mt-1 white--text",attrs:{slot:"activator",color:"primary",small:""},on:{click:function(e){return t.selectTemplate(n,o,a)}},slot:"activator"},[t._v("\n                          Chọn\n                        ")])],1)],1)],1)],1)})),1)],1)})),1)],1)],1)],1),t.isMobile?t._e():e(_["a"],{staticClass:"pl-2",attrs:{xs12:"",md4:""}},[e("div",{staticClass:"dangkyxephang"},[e("div",{staticClass:"row-header no__hidden_class"},[e(z["a"],{attrs:{flat:"",height:"36",dark:"",color:"primary"}},[e(W["a"],{staticClass:"white--text",staticStyle:{"font-size":"14px"}},[t._v("ĐĂNG KÝ XẾP HÀNG NỘP HỒ SƠ")])],1)],1),e(E["a"],{attrs:{flat:""}},[e(P["b"],{staticClass:"px-2 py-3"},[e(B["a"],{ref:"formBooking",attrs:{"lazy-validation":""},model:{value:t.validBooking,callback:function(e){t.validBooking=e},expression:"validBooking"}},[e(_["a"],{attrs:{xs12:""}},[e(K["a"],{attrs:{box:"",clearable:"",rules:[function(t){return!!t||"Mã tờ khai là bắt buộc"}],required:""},on:{blur:t.getInfoEform},model:{value:t.eformNoBooking,callback:function(e){t.eformNoBooking=e},expression:"eformNoBooking"}},[e("template",{slot:"label"},[e("span",[t._v("Mã tờ khai")]),e("span",{staticClass:"red--text darken-3"},[t._v(" *")])])],2)],1),e(_["a"],{attrs:{xs12:""}},[e(K["a"],{attrs:{box:"",clearable:"",rules:[function(t){return!!t||"Mã bí mật là bắt buộc"}],required:""},on:{blur:t.getInfoEform},model:{value:t.secretBooking,callback:function(e){t.secretBooking=e},expression:"secretBooking"}},[e("template",{slot:"label"},[e("span",[t._v("Mã bí mật")]),e("span",{staticClass:"red--text darken-3"},[t._v(" *")])])],2)],1),e(_["a"],{attrs:{xs12:""}},[e(K["a"],{attrs:{box:"",clearable:"",rules:[function(t){return!!t||"Họ tên người nộp là bắt buộc"}],required:""},model:{value:t.applicantName,callback:function(e){t.applicantName=e},expression:"applicantName"}},[e("template",{slot:"label"},[e("span",[t._v("Họ tên người nộp")]),e("span",{staticClass:"red--text darken-3"},[t._v(" *")])])],2)],1),e(_["a"],{attrs:{xs12:""}},[e(K["a"],{attrs:{box:"",clearable:"",rules:[function(t){return!!t||"Số điện thoại là bắt buộc"},t.rules.telNo],required:""},model:{value:t.applicantTelNo,callback:function(e){t.applicantTelNo=e},expression:"applicantTelNo"}},[e("template",{slot:"label"},[e("span",[t._v("Số điện thoại")]),e("span",{staticClass:"red--text darken-3"},[t._v(" *")])])],2)],1),e(_["a"],{attrs:{xs12:""}},[e(I["a"],{attrs:{items:t.agencyItems,"item-text":"name","item-value":"value","hide-selected":!0,box:"",rules:[function(t){return!!t||"Nơi nộp hồ sơ là bắt buộc"}],required:"","return-object":""},on:{change:t.changeAgencyBooking},model:{value:t.agencyTiepNhan,callback:function(e){t.agencyTiepNhan=e},expression:"agencyTiepNhan"}},[e("template",{slot:"label"},[e("span",[t._v("Nơi nộp hồ sơ")]),e("span",{staticClass:"red--text darken-3"},[t._v(" *")])])],2)],1),e(_["a"],{attrs:{xs12:""}},[e(U["a"],{ref:"menuApplicantIdDate",attrs:{"close-on-content-click":!1,"nudge-right":40,lazy:"",transition:"scale-transition","offset-y":"","full-width":"","max-width":"290px","min-width":"290px"},model:{value:t.menuApplicantIdDate,callback:function(e){t.menuApplicantIdDate=e},expression:"menuApplicantIdDate"}},[e(K["a"],{attrs:{slot:"activator",rules:[function(t){return!!t||"Ngày đăng ký là bắt buộc"}],required:"",box:"","append-icon":"event",readonly:""},on:{blur:function(e){t.dateBooking=t.parseDate(t.applicantIdDateFormatted)}},slot:"activator",model:{value:t.applicantIdDateFormatted,callback:function(e){t.applicantIdDateFormatted=e},expression:"applicantIdDateFormatted"}},[e("template",{slot:"label"},[e("span",[t._v("Ngày đăng ký nộp hồ sơ")]),e("span",{staticClass:"red--text darken-3"},[t._v(" *")])])],2),e(L["a"],{ref:"picker",attrs:{min:t.getMindate(),"allowed-dates":t.allowedDates,locale:"vi","first-day-of-week":1,"no-title":""},on:{input:t.changeDateBooking},model:{value:t.dateBooking,callback:function(e){t.dateBooking=e},expression:"dateBooking"}})],1)],1),t.isSlot?t._e():e(_["a"],{attrs:{xs12:""}},[e(D["a"],{staticClass:"py-2",attrs:{value:!0,color:"error",icon:"warning",outline:""}},[t._v("\n                  Ngày "+t._s(t.applicantIdDateFormatted)+" đã hết lượt xếp hàng\n                ")])],1),e(_["a"],{attrs:{xs12:""}},[e("captcha",{ref:"captcha"})],1),e(_["a"],{attrs:{sm12:""}},[e("div",[e("span",{staticClass:"red--text"},[t._v("Chú ý:")])]),e("div",{staticClass:"pl-3",staticStyle:{"text-align":"justify"}},[t._v("\n                  - Hồ sơ của anh/chị sẽ bị từ chối tiếp nhận nếu người nộp không phải là người có tên trên giấy tờ hoặc không chứng minh được có quan hệ gia đình với người có tên trên giấy tờ. \n                  "),e("br"),t._v("- Ông/Bà cần mang theo giấy tờ có giá trị chứng minh quan hệ khi nộp hộ hồ sơ cho người thân trong gia đình (khai sinh, kết hôn, hộ khẩu, xác nhận cha mẹ con...) "),e("br")])]),e(_["a"],{staticClass:"text-xs-right",attrs:{sm12:""}},[e(N["a"],{staticClass:"mx-0",attrs:{color:"blue darken-3",loading:t.loading,disabled:t.loading||!t.isSlot,dark:""},nativeOn:{click:function(e){return t.submitQueue.apply(null,arguments)}}},[e(A["a"],[t._v("create")]),t._v("  Đăng ký\n                ")],1)],1)],1)],1)],1)],1),e("div",{staticClass:"timkiemtokhai",staticStyle:{"margin-top":"16px"}},[e("div",{staticClass:"row-header no__hidden_class"},[e(z["a"],{attrs:{flat:"",height:"36",dark:"",color:"primary"}},[e(W["a"],{staticClass:"white--text",staticStyle:{"font-size":"14px"}},[t._v("TÌM KIẾM TỜ KHAI")])],1)],1),e(E["a"],{attrs:{flat:""}},[e(P["b"],{staticClass:"px-2 py-3"},[e(B["a"],{ref:"formSearch",attrs:{"lazy-validation":""},model:{value:t.validSearch,callback:function(e){t.validSearch=e},expression:"validSearch"}},[e(_["a"],{attrs:{xs12:""}},[e(K["a"],{attrs:{box:"",clearable:"",rules:[function(t){return!!t||"Mã tờ khai là bắt buộc"}],required:""},on:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:(e.preventDefault(),t.submitSearchEform.apply(null,arguments))}},model:{value:t.eformNoSearch,callback:function(e){t.eformNoSearch=e},expression:"eformNoSearch"}},[e("template",{slot:"label"},[e("span",[t._v("Mã tờ khai")]),e("span",{staticClass:"red--text darken-3"},[t._v(" *")])])],2)],1),e(_["a"],{attrs:{xs12:""}},[e(K["a"],{attrs:{box:"",clearable:"",rules:[function(t){return!!t||"Mã bí mật là bắt buộc"}],required:""},on:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:(e.preventDefault(),t.submitSearchEform.apply(null,arguments))}},model:{value:t.secretSearch,callback:function(e){t.secretSearch=e},expression:"secretSearch"}},[e("template",{slot:"label"},[e("span",[t._v("Mã bí mật")]),e("span",{staticClass:"red--text darken-3"},[t._v(" *")])])],2)],1),e(_["a"],{attrs:{xs12:""}},[e("captcha",{ref:"captchaTraCuu"})],1),e(_["a"],{staticClass:"text-xs-right",attrs:{sm12:""}},[e(N["a"],{staticClass:"mx-0",attrs:{color:"blue darken-3",loading:t.loading,disabled:t.loading,dark:""},nativeOn:{click:function(e){return t.submitSearchEform.apply(null,arguments)}}},[e(A["a"],[t._v("search")]),t._v("  Tìm kiếm\n                ")],1)],1)],1)],1)],1)],1)])],1),e(F["a"],{attrs:{persistent:"","max-width":"400"},model:{value:t.dialogSecret,callback:function(e){t.dialogSecret=e},expression:"dialogSecret"}},[e(B["a"],{ref:"formSecret",attrs:{"lazy-validation":""},model:{value:t.validSecret,callback:function(e){t.validSecret=e},expression:"validSecret"}},[e(E["a"],[e(z["a"],{attrs:{flat:"",dark:"",color:"primary"}},[e(W["a"],[t._v("Mã bí mật tra cứu tờ khai")]),e(H["a"]),e(N["a"],{attrs:{icon:"",dark:""},nativeOn:{click:function(e){t.dialogSecret=!1}}},[e(A["a"],[t._v("close")])],1)],1),e(P["b"],[e(y["a"],{attrs:{row:"",wrap:""}},[e(_["a"],{attrs:{xs12:"",sm12:""}},[e(K["a"],{attrs:{box:"",label:"Mã bí mật",rules:[function(t){return!!t||"Mã bí mật là bắt buộc"}],required:"",autofocus:""},on:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:(e.preventDefault(),t.submitSearchEform.apply(null,arguments))}},model:{value:t.secretSearch,callback:function(e){t.secretSearch=e},expression:"secretSearch"}})],1)],1)],1),e(P["a"],{staticClass:"mx-2"},[e(H["a"]),e(N["a"],{staticClass:"white--text",attrs:{color:"primary"},nativeOn:{click:function(e){return t.submitSearchEform.apply(null,arguments)}}},[e(A["a"],[t._v("save")]),t._v("  \n            Đồng ý\n          ")],1),e(N["a"],{staticClass:"white--text",attrs:{color:"red"},nativeOn:{click:function(e){return function(){return t.dialogSecret=!1}.apply(null,arguments)}}},[e(A["a"],[t._v("clear")]),t._v("  \n            Thoát\n          ")],1)],1)],1)],1)],1),e(F["a"],{attrs:{persistent:"","max-width":"800"},model:{value:t.dialogSelectGovagency,callback:function(e){t.dialogSelectGovagency=e},expression:"dialogSelectGovagency"}},[e(z["a"],{attrs:{flat:"",dark:"",color:"primary"}},[e(W["a"],[t._v("Chọn nơi nộp tờ khai")]),e(H["a"]),e(N["a"],{attrs:{icon:"",dark:""},nativeOn:{click:function(e){t.dialogSelectGovagency=!1}}},[e(A["a"],[t._v("close")])],1)],1),e(P["b"],{staticClass:"px-0 py-0"},[e(y["a"],{attrs:{row:"",wrap:""}},[e(_["a"],{attrs:{xs12:"",sm12:""}},[e(R["a"],{staticClass:"px-3 py-3"},t._l(t.agencyItems,(function(a,n){return e(q["a"],{key:n,class:0==n?"mb-3":"",attrs:{avatar:""},on:{click:function(e){return t.selectAgency(a)}}},[e(G["a"],[e(A["a"],{class:0==n?"blue white--text":"amber white--text"},[t._v("account_balance")])],1),e(j["a"],{staticClass:"ml-2"},[e(j["b"],{staticStyle:{"font-size":"14px !important"}},[t._v(t._s(String(a.name).toUpperCase()))])],1)],1)})),1)],1)],1)],1)],1)],1)},J=[],Y=a("1157"),X=a.n(Y),Z=a("854a"),tt=a.n(Z),et=a("bc3a"),at=a.n(et),nt=function(){var t=this,e=t._self._c;return e(y["a"],{staticClass:"mx-0",attrs:{row:"",wrap:""}},[e(_["a"],{staticClass:"py-2",staticStyle:{display:"flex","align-items":"center",background:"#dedede","justify-content":"center"},attrs:{xs12:""}},[e("img",{staticStyle:{"border-radius":"5px"},attrs:{src:t.chapchablob,alt:"capcha"}}),e(N["a"],{staticClass:"right ml-3 mx-0 my-0",attrs:{title:"refresh",flat:"",icon:""},nativeOn:{click:function(e){return t.makeImageCap.apply(null,arguments)}}},[e(A["a"],{attrs:{color:"primary",size:"32"}},[t._v("refresh")])],1)],1),e(_["a"],{staticClass:"mt-2",attrs:{xs12:""}},[e(K["a"],{attrs:{box:"",placeholder:"Nhập captcha"},model:{value:t.j_captcha_response,callback:function(e){t.j_captcha_response=e},expression:"j_captcha_response"}})],1)],1)},ot=[],it={props:["index"],components:{},data:function(){return{j_captcha_response:"",options:{},arrCaptcha:[],captcha:"",currentlyDragging:null,loggedEvent:"",images:[{name:"Image 1",src:"http://placehold.it/100/000000/ffffff"},{name:"Image 2",src:"http://placehold.it/100/C93742/ffffff"},{name:"Image 3",src:"http://placehold.it/100/6894D1/ffffff"}]}},computed:{loading:function(){return this.$store.getters.loading},chapchablob:function(){return this.$store.getters.getChapchablob}},created:function(){var t=this;t.makeImageCap()},watch:{},methods:{makeImageCap:function(){var t=this;t.$store.dispatch("makeImageCap").then((function(e){t.$store.commit("setChapchablob",e)})).catch((function(e){t.$store.commit("setChapchablob","")}))},makeRandomString:function(){for(var t=this,e="",a="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=0;n<4;n++)e+=a.charAt(Math.floor(Math.random()*a.length));e&&(t.arrCaptcha=t.shuffleArrCaptcha(e.split(""))),t.captcha=e},shuffleArrCaptcha:function(t){var e=t.length,a=null,n=0;while(e>0)n=Math.floor(Math.random()*e),e--,a=t[e],t[e]=t[n],t[n]=a;return t},checkValidCaptcha:function(){for(var t=this,e="",a=X()("#captcha").children(),n=0;n<a.length;n++)e+=a[n].innerHTML;return t.captcha===e}},filters:{dateTimeView:function(t){if(t){var e=new Date(t);return"".concat(e.getDate().toString().padStart(2,"0"),"/").concat((e.getMonth()+1).toString().padStart(2,"0"),"/").concat(e.getFullYear())}return""}}},rt=it,ct=(a("c7fb"),Object(h["a"])(rt,nt,ot,!1,null,null,null)),st=ct.exports;a("bbd0");function lt(t,e){return mt(t)||ht(t,e)||dt(t,e)||pt()}function pt(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function dt(t,e){if(t){if("string"===typeof t)return ut(t,e);var a=Object.prototype.toString.call(t).slice(8,-1);return"Object"===a&&t.constructor&&(a=t.constructor.name),"Map"===a||"Set"===a?Array.from(t):"Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a)?ut(t,e):void 0}}function ut(t,e){(null==e||e>t.length)&&(e=t.length);for(var a=0,n=new Array(e);a<e;a++)n[a]=t[a];return n}function ht(t,e){var a=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=a){var n,o,i,r,c=[],s=!0,l=!1;try{if(i=(a=a.call(t)).next,0===e){if(Object(a)!==a)return;s=!1}else for(;!(s=(n=i.call(a)).done)&&(c.push(n.value),c.length!==e);s=!0);}catch(p){l=!0,o=p}finally{try{if(!s&&null!=a.return&&(r=a.return(),Object(r)!==r))return}finally{if(l)throw o}}return c}}function mt(t){if(Array.isArray(t))return t}tt.a.options={positionClass:"toast-top-center"},n["a"].use(tt.a);var ft={props:[],components:{captcha:st},data:function(){return{dialogSelectGovagency:!1,dialogLoadingCreate:!1,isSlot:!0,groupDvc:"",bookingGroups:"",currentGroup:"",serviceInfoList:[],eformNoSearch:"",eformNoBooking:"",applicantName:"",applicantTelNo:"",agencyTiepNhan:"",secretSearch:"",panelServiceList:[],serviceInfoListRender:[],formTemplateList:[],agencyItems:[{name:"Cục lãnh sự - 40 Trần Phú, Ba Đình, Hà Nội",value:"124302",code:"CLS",serverNo:"SERVER_CLS"},{name:"Sở ngoại vụ thành phố Hồ Chí Minh",value:"703021",code:"SNVHCM",serverNo:"SERVER_SNVHCM"}],dialogSecret:!1,loading:!1,validSearch:!1,validBooking:!1,menuApplicantIdDate:!1,dateBooking:null,applicantIdDateFormatted:null,secretBooking:"",countEmpty:0,captcha:"",detailEform:"",rules:{required:function(t){return!!t||"Trường dữ liệu bắt buộc"},email:function(t){var e=/^(([^<>()[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/;return e.test(t)||"Địa chỉ Email không hợp lệ"},telNo:function(t){var e=/^0([1-9]{1}\d{8})$/;return t?e.test(t)||"Số điện thoại gồm 10 ký tự 0-9, eg: 0989123456, ...":[]}}}},computed:{serviceinfoSelected:function(){return this.$store.getters.getServiceinfoSelected},formScriptEform:function(){return this.$store.getters.getFormScriptEform},formDataEform:function(){return this.$store.getters.getFormDataEform},fileTemplateSelected:function(){return this.$store.getters.getFileTemplateSelected},isMobile:function(){return this.$store.getters.getIsMobile}},created:function(){var t=this;t.$nextTick((function(){var e=t.$router.history.current;e.query;try{t.agencyItems=agencyItems}catch(a){}t.doLoadingThuTuc()}))},updated:function(){var t=this;t.$nextTick((function(){}))},watch:{$route:function(t,e){t.params,t.query},dateBooking:function(t){this.applicantIdDateFormatted=this.formatDate(this.dateBooking)}},methods:{doLoadingThuTuc:function(){var t=this;t.serviceInfoList=[],t.formTemplateList=[],t.loading=!0;var e=t.$router.history.current.query,a=function(){t.dialogLoadingCreate=!1;var a={page:e.page?e.page:1};t.$store.dispatch("getServiceLists",a).then((function(e){if(t.loading=!1,e.data)for(var a in t.serviceInfoList=e.data,t.serviceInfoList)t.getFileTemplate(a,t.serviceInfoList[a]);else t.serviceInfoList=[]})).catch((function(e){t.loading=!1,t.serviceInfoList=[]}))},n=window.location.href.split("?");if(n[1]&&-1!==n[1].indexOf("vnconnect=1")&&-1!==n[1].indexOf("MaTTHCDP=")){t.dialogLoadingCreate=!0;var o=t.getSearchParams(n[1],"MaTTHCDP"),i={page:1,keyword:o};t.$store.dispatch("getServiceLists",i).then((function(e){if(e.data){var n=e.data.filter((function(t){return t.serviceCodeDVCQG==o}));n.length>0?t.$store.dispatch("getFileTemplateEform",n[0]).then((function(t){if(t.data){var e=t.data[0]["fileTemplateNo"],o=window.themeDisplay.getSiteAdminURL().split("/~")[0].replace("group","web")+"/to-khai-truc-tuyen#/thong-tin-to-khai?service="+n[0].serviceInfoId+"&template="+e+"&vnconnect=1";window.location.href=o}else a()})):a()}else a()})).catch((function(t){a()}))}else a()},getFileTemplate:function(t,e){var a=this;a.$store.dispatch("getFileTemplateEform",e).then((function(e){if(e.data)for(var n in a.serviceInfoList[t].templateList=e.data,e.data)a.formTemplateList.push(e.data[n]);a.panelServiceList.push(!0)}))},selectTemplate:function(t,e,a){var n=this;n.trackingBTTT(a.serviceCode),n.$store.commit("setServiceinfoSelected",a);var o=Object.assign({},e,{serviceInfoId:a.serviceInfoId});n.$store.commit("setFileTemplateSelected",o),n.dialogSelectGovagency=!0},submitSearchEform:function(){var t=this;if(t.$refs.formSearch.validate()){var e={eFormNo:String(t.eformNoSearch).trim(),secret:t.secretSearch,j_captcha_response:t.$refs.captchaTraCuu.j_captcha_response};t.$store.dispatch("getEformSecretCaptcha",e).then((function(e){if(e&&203===e["code"])tt.a.clear(),tt.a.error("Mã captcha không chính xác"),t.$refs.captchaTraCuu.makeImageCap();else if(e&&e.hasOwnProperty("eFormId")){t.dialogSecret=!1;var a=t.formTemplateList.filter((function(t){return t.fileTemplateNo===e.fileTemplateNo}));a.length>0&&t.$store.commit("setFileTemplateSelected",a[0]),t.$store.commit("setEformDetail",e),t.$router.push({path:"/tao-to-khai-thanh-cong/1",query:{renew:Math.floor(100*Math.random())+1}})}else tt.a.clear(),tt.a.error("Mã tờ khai hoặc mã bí mật không chính xác. Vui lòng kiểm tra lại"),t.$refs.captchaTraCuu.makeImageCap()})).catch((function(e){tt.a.clear(),tt.a.error("Mã tờ khai hoặc mã bí mật không chính xác. Vui lòng kiểm tra lại"),t.$refs.captchaTraCuu.makeImageCap()}))}},submitQueue:function(){var t=this;t.currentGroup="";var e=String(t.eformNoBooking).split("-"),a={className:"",classPK:"",serviceCode:"",gateNumber:"",state:1,codeNumber:"",bookingName:"",serviceGroupCode:"",serverNo:"",dossierRelease:!1,telNo:t.applicantTelNo,groupId:t.agencyTiepNhan.value,bookingDate:t.applicantIdDateFormatted,j_captcha_response:t.$refs.captcha.j_captcha_response,serverCode:""};if(1===e.length?a["codeNumber"]=t.eformNoBooking:a["codeNumber"]=t.maBienNhan(t.eformNoBooking),1===e.length){var n={eFormNo:String(t.eformNoBooking).trim(),secret:t.secretBooking};t.$store.dispatch("getEformSecret",n).then((function(e){var n="",o=!1;if(e&&e.hasOwnProperty("eFormId")){t.detailEform=e;var i=t.formTemplateList.filter((function(t){return t.fileTemplateNo===e.fileTemplateNo}));i.length>0&&t.$store.commit("setFileTemplateSelected",i[0]),t.$store.commit("setEformDetail",e),t.currentGroup=t.bookingGroups.filter((function(t){return t["config"]&&t["config"].split(",").indexOf(e["serviceCode"])>=0}))[0];try{var r=JSON.parse(e["eFormData"]);r.hasOwnProperty("list_giay_to")&&(o=!0),n="undefined"!==r&&void 0!==r?r["bookingName"]:""}catch(l){}if(o)if(t.checkNguoiNop(e["eFormData"]))tt.a.clear(),tt.a.error("Họ tên người nộp không trùng với họ tên của đương sự (người được cấp trong giấy tờ hoặc người xin cấp hộ chiếu). Vui lòng kiểm tra lại.");else{a.className="EFORM",a.classPK=e.eFormId,a.serviceCode=e.serviceCode,a.bookingName=n,a.serviceGroupCode=t.currentGroup["groupCode"],a.serverCode=t.agencyTiepNhan.serverNo,a.govAgencyCode=t.agencyTiepNhan.code;var c={groupIdBooking:t.agencyTiepNhan.value,bookingDate:t.applicantIdDateFormatted,serverCode:t.agencyTiepNhan.serverNo};t.$store.dispatch("getCounterBookingProxy",c).then((function(e){e?(t.isSlot=!0,t.createBookingOnline(a)):t.isSlot=!1})).catch((function(e){t.isSlot=!1}))}else if(n.toLowerCase()!==String(t.applicantName).toLowerCase())tt.a.clear(),tt.a.error("Họ tên người nộp không trùng với họ tên của đương sự (người được cấp trong giấy tờ hoặc người xin cấp hộ chiếu). Vui lòng kiểm tra lại.");else{a.className="EFORM",a.classPK=e.eFormId,a.serviceCode=e.serviceCode,a.bookingName=n,a.serviceGroupCode=t.currentGroup["groupCode"],a.serverCode=t.agencyTiepNhan.serverNo,a.govAgencyCode=t.agencyTiepNhan.code;var s={groupIdBooking:t.agencyTiepNhan.value,bookingDate:t.applicantIdDateFormatted,serverCode:t.agencyTiepNhan.serverNo};t.$store.dispatch("getCounterBookingProxy",s).then((function(e){e?(t.isSlot=!0,t.createBookingOnline(a)):t.isSlot=!1})).catch((function(e){t.isSlot=!1}))}}else tt.a.clear(),tt.a.error("Mã tờ khai hoặc mã bí mật không chính xác. Vui lòng kiểm tra lại")})).catch((function(){}))}else tt.a.clear(),tt.a.error("Mã tờ khai không chính xác. Vui lòng kiểm tra lại.")},createBookingOnline:function(t){var e=this,a={headers:{groupId:window.themeDisplay?window.themeDisplay.getScopeGroupId():""}},n=new URLSearchParams;n.append("value",e.$refs.captcha.j_captcha_response),at.a.post("/o/rest/v2/bookings/validatecaptcha",n,a).then((function(a){a["data"]&&203===a["data"]["code"]?(tt.a.clear(),tt.a.error("Mã captcha không chính xác"),e.$refs.captcha.makeImageCap()):e.$store.dispatch("createBookingOnlineProxy",t).then((function(t){e.$refs.captcha.makeImageCap(),tt.a.success("Đăng ký xếp hàng thành công"),e.applicantName="",e.eformNoBooking="",e.secretBooking="",e.applicantTelNo="",e.agencyTiepNhan="",e.$refs.formBooking.resetValidation(),setTimeout((function(){e.$router.push({path:"/tao-to-khai-thanh-cong/1",query:{renew:Math.floor(100*Math.random())+1}})}),300)})).catch((function(t){e.$refs.captcha.makeImageCap()}))})).catch((function(t){tt.a.clear(),tt.a.error("Mã captcha không chính xác"),e.$refs.captcha.makeImageCap()}))},changeAgencyBooking:function(){var t=this;t.getBookingConfigs(),t.applicantIdDateFormatted&&t.getCounterBooking(),setTimeout((function(){t.$store.commit("setServerNo",t.agencyTiepNhan.serverNo)}),200)},changeDateBooking:function(){var t=this;t.menuApplicantIdDate=!1,t.agencyTiepNhan&&t.getCounterBooking()},getBooking:function(){var t=this;setTimeout((function(){var e={state:2,className:"EFORM",bookingFrom:t.applicantIdDateFormatted,bookingTo:t.applicantIdDateFormatted,serverNo:"GET_BOOKING_"+t.agencyTiepNhan};t.$store.dispatch("getBookingDangGoi",e).then((function(t){})).catch((function(t){}))}),300)},updateStateBooking:function(t){var e=this,a=t;e.$store.dispatch("updateBookingAll",a).then((function(t){})).catch((function(t){}))},getBookingConfigs:function(){var t=this;setTimeout((function(){var e={serverNo:"BOOKING_CONFIG_"+t.agencyTiepNhan.code};t.$store.dispatch("getServerConfig",e).then((function(e){try{var a=JSON.parse(e.configs);t.bookingGroups=a["bookings"],t.groupDvc=a["groupId"]}catch(n){}})).catch((function(t){}))}),300)},getCounterBooking:function(){var t=this;setTimeout((function(){var e={groupIdBooking:t.agencyTiepNhan.value,bookingDate:t.applicantIdDateFormatted,serverCode:t.agencyTiepNhan.serverNo};t.$store.dispatch("getCounterBookingProxy",e).then((function(e){t.isSlot=!!e})).catch((function(e){t.isSlot=!1}))}),300)},trackingBTTT:function(t){try{_govaq&&_govaq.push(["trackDVC",t,"1",""])}catch(e){}},allowedDates:function(t){return 0!==new Date(t).getDay()&&6!==new Date(t).getDay()},maBienNhan:function(t){for(var e=0,a=0,n=0;n<t.length;n++)if("-"===t.charAt(n)&&(e+=1),3===e){a=n;break}return t.substr(a+1)},getSearchParams:function(t,e){var a="",n=t.split("&");return n.forEach((function(t){t=t.split("=");var n=t[0];n===e&&(a=t[1])})),a},formatDate:function(t){if(!t)return null;var e=t.split("-"),a=lt(e,3),n=a[0],o=a[1],i=a[2];return"".concat(i,"/").concat(o,"/").concat(n)},parseDate:function(t){if(!t)return null;var e=t.split("/"),a=lt(e,3),n=a[0],o=a[1],i=a[2];return"".concat(i,"-").concat(o.padStart(2,"0"),"-").concat(n.padStart(2,"0"))},getCurrentDate:function(){var t=new Date;return"".concat(t.getDate().toString().padStart(2,"0"),"/").concat((t.getMonth()+1).toString().padStart(2,"0"),"/").concat(t.getFullYear())},getMindate:function(){var t=new Date;return"".concat(t.getFullYear(),"-").concat((t.getMonth()+1).toString().padStart(2,"0"),"-").concat(t.getDate().toString().padStart(2,"0"))},goBack:function(){window.history.back()},checkNguoiNop:function(t){var e=this,a=[],n="";try{var o=JSON.parse(t);a="undefined"!==o&&void 0!==o?o["list_giay_to"]:[],n="undefined"!==o&&void 0!==o?o["bookingName"]:""}catch(r){return!0}if(n.toLowerCase()!==String(e.applicantName).toLowerCase())return!0;for(var i=0;i<a.length;i++)if(String(a[i]["ten_nguoi_duoc_cap"]).toLowerCase()===String(e.applicantName).toLowerCase())return!1;return!0},getInfoEform:function(){var t=this;if(String(t.eformNoBooking).trim()&&String(t.secretBooking).trim()){var e={eFormNo:String(t.eformNoBooking).trim(),secret:t.secretBooking};t.$store.dispatch("getEformSecret",e).then((function(e){if(e&&e.hasOwnProperty("govAgencyCode")){try{t.agencyTiepNhan=t.agencyItems.filter((function(t){return t.code===e.govAgencyCode}))[0]}catch(a){}t.getBookingConfigs(),t.applicantIdDateFormatted&&t.getCounterBooking(),setTimeout((function(){t.$store.commit("setServerNo",t.agencyTiepNhan.serverNo)}),200)}}))}},selectAgency:function(t){var e=this;e.$router.push({path:"/thong-tin-to-khai",query:{agency:t.code,renew:Math.floor(100*Math.random())+1}}),e.dialogSelectGovagency=!1}}},gt=ft,vt=Object(h["a"])(gt,Q,J,!1,null,null,null),_t=vt.exports,yt=function(){var t=this,e=t._self._c;return e("div",{staticStyle:{border:"1px solid #dedede","border-top":"0"}},[e(F["a"],{attrs:{persistent:"",width:"450"},model:{value:t.dialogLoadingCreate,callback:function(e){t.dialogLoadingCreate=e},expression:"dialogLoadingCreate"}},[e(E["a"],{attrs:{color:"primary",dark:""}},[e(P["b"],[e(V["a"],{staticClass:"mb-0",attrs:{indeterminate:"",color:"white"}})],1)],1)],1),t.dialogLoadingCreate?t._e():e("div",[e("div",{staticClass:"row-header no__hidden_class"},[t._m(0),e("div",{staticClass:"layout row wrap header_tools row-blue"},[e("div",{staticClass:"flex pl-3 text-ellipsis text-bold",staticStyle:{position:"relative"}},[t._v("\n          "+t._s(t.serviceinfoSelected.serviceName)+"\n        ")])])]),e("div",[t.serviceinfoSelected?t._e():e("div",{staticClass:"pt-5 text-xs-center"},[e("h2",{staticClass:"mb-3",staticStyle:{opacity:"0.2","font-style":"italic"}},[t._v("Vui lòng chọn thủ tục để tạo tờ khai trực tuyến !")]),e("img",{staticStyle:{opacity:"0.1"},attrs:{src:"https://i1.wp.com/www.onsitebristol.co.uk/wp-content/uploads/2016/06/application-form-icon-school-admission-form-512.png?fit=300%2C300&ssl=1",alt:""}})]),e(E["a"],{attrs:{flat:"",color:"#fff"}},[e("div",{staticClass:"mb-5 pt-3",attrs:{id:"formAlpacaEform"}})])],1),e(_["a"],{staticClass:"text-xs-right my-3 mr-2",attrs:{xs12:""}},[t.isUpdate?e(N["a"],{attrs:{color:"primary"},on:{click:function(e){return e.stopPropagation(),t.putEform()}}},[e(A["a"],{attrs:{color:"white"}},[t._v("save")]),t._v(" \n        Cập nhật tờ khai\n      ")],1):e(N["a"],{attrs:{color:"primary"},on:{click:function(e){return e.stopPropagation(),t.postEform()}}},[e(A["a"],{attrs:{color:"white"}},[t._v("save")]),t._v(" \n        Tạo tờ khai\n      ")],1),e(N["a"],{staticClass:"ml-3 white--text",attrs:{color:"primary"},on:{click:t.goBack}},[e(A["a"],[t._v("reply")]),t._v("  \n        Quay lại\n      ")],1)],1)],1),e(F["a"],{attrs:{persistent:"","max-width":"400"},model:{value:t.dialogSecret,callback:function(e){t.dialogSecret=e},expression:"dialogSecret"}},[e(B["a"],{ref:"formSecret",attrs:{"lazy-validation":""},model:{value:t.validSecret,callback:function(e){t.validSecret=e},expression:"validSecret"}},[e(E["a"],[e(z["a"],{attrs:{flat:"",dark:"",color:"primary"}},[e(W["a"],[t._v("Mã tờ khai")]),e(H["a"]),e(N["a"],{attrs:{icon:"",dark:""},nativeOn:{click:function(e){t.dialogSecret=!1}}},[e(A["a"],[t._v("close")])],1)],1),e(P["b"],[e(y["a"],{attrs:{row:"",wrap:""}},[e(_["a"],{attrs:{xs12:"",sm12:""}},[e(K["a"],{attrs:{box:"",label:"Mã tờ khai",rules:[function(t){return!!t||"Mã tờ khai là bắt buộc"}],required:"",placeholder:"E-xxx-xxx, D-xxx-xxx"},on:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.submitSearchEform.apply(null,arguments)}},model:{value:t.eformNoSearch,callback:function(e){t.eformNoSearch=e},expression:"eformNoSearch"}})],1)],1)],1),e(P["a"],{staticClass:"mx-2"},[e(H["a"]),e(N["a"],{staticClass:"white--text",attrs:{color:"primary"},nativeOn:{click:function(e){return t.submitSearchEform.apply(null,arguments)}}},[t._v("Đồng ý")]),e(N["a"],{staticClass:"white--text",attrs:{color:"primary"},nativeOn:{click:function(e){return function(){return t.dialogSecret=!1}.apply(null,arguments)}}},[t._v("Thoát")])],1)],1)],1)],1),e(F["a"],{attrs:{"max-width":"550"},model:{value:t.dialogLogin,callback:function(e){t.dialogLogin=e},expression:"dialogLogin"}},[e(E["a"],{staticClass:"px-0"},[e(P["b"],{staticClass:"px-0 py-0"},[t.isSigned?t._e():e(_["a"],{attrs:{xs12:""}},[e("nav",{staticClass:"toolbar theme--dark primary py-2",attrs:{"data-booted":"true"}},[e("div",{staticClass:"toolbar__content",staticStyle:{"justify-content":"center"}},[e("div",{staticClass:"white--text text-bold",staticStyle:{"font-size":"1.25em"}},[t._v("ĐĂNG NHẬP ĐỒNG BỘ TÀI KHOẢN")])])]),e(_["a"],{staticClass:"px-2 pb-2",staticStyle:{border:"1px solid #dddddd"},attrs:{xs12:""}},[e(B["a"],{ref:"form",staticClass:"mt-3",attrs:{"lazy-validation":""},model:{value:t.valid,callback:function(e){t.valid=e},expression:"valid"}},[e(_["a"],{attrs:{xs12:""}},[e(K["a"],{attrs:{box:"",placeholder:"Email đăng nhập",rules:[function(t){return!!t||"Email đăng nhập là bắt buộc"}],required:"","prepend-inner-icon":"person_outline"},on:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.submitConfirmLogin.apply(null,arguments)}},model:{value:t.userName,callback:function(e){t.userName=e},expression:"userName"}})],1),e(_["a"],{attrs:{xs12:""}},[e(K["a"],{attrs:{box:"",placeholder:"Mật khẩu",type:"password",rules:[function(t){return!!t||"Mật khẩu là bắt buộc"}],required:"","prepend-inner-icon":"vpn_key"},on:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.submitConfirmLogin.apply(null,arguments)}},model:{value:t.passWord,callback:function(e){t.passWord=e},expression:"passWord"}})],1),t.captcha?e(_["a"],{staticClass:"py-2 text-xs-center",staticStyle:{"align-items":"center",background:"#dedede","justify-content":"center"},attrs:{xs12:""}},[e("img",{staticStyle:{"border-radius":"5px"},attrs:{src:t.chapchablob,alt:"capcha"}}),e(N["a"],{attrs:{flat:"",icon:""},nativeOn:{click:function(e){return t.makeImageCap.apply(null,arguments)}}},[e(A["a"],{attrs:{color:"white",size:"26"}},[t._v("refresh")])],1)],1):t._e(),t.captcha?e(_["a"],{staticClass:"mt-2 text-xs-center",attrs:{xs12:""}},[e(K["a"],{attrs:{box:"",placeholder:"Nhập captcha",rules:[function(t){return!!t||"Mã captcha là bắt buộc"}],required:""},model:{value:t.j_captcha_response,callback:function(e){t.j_captcha_response=e},expression:"j_captcha_response"}})],1):t._e(),e(_["a"],{staticClass:"text-xs-left text-xs-center",attrs:{xs12:""}},[e(N["a"],{staticClass:"ml-0 mr-1 my-0 white--text",attrs:{color:"primary",loading:t.loadingLogin,disabled:t.loadingLogin},on:{click:t.submitConfirmLogin}},[e(A["a"],[t._v("how_to_reg")]),t._v(" \n                  Đăng nhập\n                ")],1),e(N["a"],{attrs:{color:"primary"},on:{click:function(e){t.dialogLogin=!1}}},[e(A["a"],[t._v("reply")]),t._v(" \n                  Thoát\n                ")],1)],1)],1)],1)],1)],1)],1)],1),e(F["a"],{attrs:{persistent:"","max-width":"580"},model:{value:t.dialogSelectGovagency,callback:function(e){t.dialogSelectGovagency=e},expression:"dialogSelectGovagency"}},[e(z["a"],{attrs:{flat:"",dark:"",color:"primary"}},[e(W["a"],[t._v("Chọn nơi nộp tờ khai")]),e(H["a"])],1),e(P["b"],{staticClass:"px-0 py-0"},[e(y["a"],{attrs:{row:"",wrap:""}},[e(_["a"],{attrs:{xs12:"",sm12:""}},[e(R["a"],{staticClass:"px-3 py-3"},t._l(t.agencyItems,(function(a,n){return e(q["a"],{key:n,class:0==n?"mb-3":"",attrs:{avatar:""},on:{click:function(e){return t.selectAgency(a)}}},[e(G["a"],[e(A["a"],{class:0==n?"blue white--text":"amber white--text"},[t._v("account_balance")])],1),e(j["a"],{staticClass:"ml-2"},[e(j["b"],{staticStyle:{"font-size":"14px !important"}},[t._v(t._s(String(a.name).toUpperCase()))])],1)],1)})),1)],1)],1)],1)],1)],1)},kt=[function(){var t=this,e=t._self._c;return e("div",{staticClass:"background-triangle-big"},[e("span",[t._v("TỜ KHAI TRỰC TUYẾN")])])}],wt=a("1074"),bt=wt["a"],St=Object(h["a"])(bt,yt,kt,!1,null,null,null),xt=St.exports,Ct=function(){var t=this,e=t._self._c;return e(E["a"],{staticClass:"my-4",staticStyle:{height:"100vh"},attrs:{flat:"",color:"#ffffff"}},[t.timeBooking?e("div",{staticStyle:{position:"absolute",top:"0",right:"0","max-width":"500px"}},[e(D["a"],{staticClass:"my-0 px-2 py-2",attrs:{value:!0,color:"info",icon:"info",outline:""}},[t._v("\n      - Tờ khai đã đăng ký lịch hẹn online."),e("br"),t._v("\n      - Nơi tiếp nhận hồ sơ: "+t._s(t.agencyTiepNhan?t.agencyTiepNhan["name"]:"")+"."),e("br"),t._v("\n      - Thời gian tiếp nhận hồ sơ: "+t._s(t.timeBooking)+" ngày "+t._s(t.checkinDate)+"."),e("br"),t._v("\n      - Qua thời gian xếp hàng trên nếu chưa đến làm thủ tục đề nghị đăng ký xếp hàng lại.\n    ")])],1):t._e(),e(v["a"],{staticClass:"px-0 pt-0",attrs:{"align-center":"",row:"",wrap:""}},[e(_["a"],{staticStyle:{border:"1px solid #0072bc","border-radius":"3px"},attrs:{xs12:""}},[e(y["a"],{attrs:{row:"",wrap:""}},[e("h2",{staticClass:"flex pt-2 text-xs-center"},[e("span",{staticStyle:{color:"#065694"}},[t._v("THÔNG TIN TỜ KHAI ")])]),e(_["a"],{staticClass:"pb-3",attrs:{xs12:"",sm12:""}},[e("div",{staticClass:"px-3 mt-3",staticStyle:{"font-size":"16px"}},[e("p",{staticClass:"mb-2 text-bold"},[t._v("Tên tờ khai: "),e("span",{staticClass:"ml-2 primary--text"},[t._v(t._s(t.fileTemplateSelected.templateName))])]),e("p",{staticClass:"mb-2 text-bold"},[t._v("Mã tờ khai: "),e("span",{staticClass:"ml-2 primary--text"},[t._v(t._s(t.eformDetail.eFormNo))])]),e("p",{staticClass:"mb-2 text-bold"},[t._v("Mã bí mật tra cứu tờ khai: "),e("span",{staticClass:"ml-2 primary--text"},[t._v(t._s(t.eformDetail.secret))])]),t.agencyTiepNhan?e("p",{staticClass:"mb-2 text-bold"},[t._v("Nơi nộp tờ khai: "),e("span",{staticClass:"ml-2 primary--text"},[t._v(t._s(t.agencyTiepNhan?t.agencyTiepNhan["name"]:""))])]):t._e(),e("span",{staticClass:"mr-2"},[e(A["a"],{attrs:{color:"warning"}},[t._v("warning")])],1),e("span",{staticClass:"warning--text",staticStyle:{"font-size":"1.2em"}},[t._v("Vui lòng ghi lại Mã tờ khai, Mã bí mật để tra cứu, in lại tờ khai khi cần thiết!")]),e("div",{staticClass:"mt-3"},[e(N["a"],{staticClass:"white--text",attrs:{color:"success",loading:t.dialogPDFLoading,disabled:t.dialogPDFLoading},on:{click:t.previewEform}},[e(A["a"],[t._v("visibility")]),t._v("  \n                Xem trước\n              ")],1),e(N["a"],{staticClass:"ml-3 white--text",attrs:{color:"primary",loading:t.dialogPDFLoading,disabled:t.dialogPDFLoading},on:{click:t.downloadEform}},[e(A["a"],[t._v("cloud_download")]),t._v("  \n                Tải xuống\n              ")],1)],1),!t.agencyTiepNhan||t.agencyTiepNhan&&"CLS"===t.agencyTiepNhan["code"]?e("div",[e("p",{staticClass:"mt-4"},[t._v("\n                -  Để hoàn tất thủ tục, đề nghị mang Tờ khai này cùng các giấy tờ theo quy định đến Cục Lãnh sự \n                hoặc Sở Ngoại vụ Thành phố Hồ Chí Minh hoặc Ngoại vụ địa phương hoặc \n                Cơ quan đại diện để xin chứng nhận/ hợp pháp hóa lãnh sự.\n              ")]),e("p",[t._v("\n                -  Tờ khai này chỉ có giá trị hiệu lực trong vòng 10 ngày làm việc. Quá thời hạn trên nếu chưa nộp tờ khai đề nghị kê khai tờ khai mới.\n              ")]),e("p",[t._v("\n                -  Thủ tục cấp, gia hạn hộ chiếu ngoại giao, hộ chiếu công vụ, xin công hàm thị thực quầy số 3.\n              ")]),e("p",[t._v("\n                -  Thủ tục hợp pháp hóa lãnh sự, chứng nhận lãnh sự quầy số 7.\n              ")]),t.timeBooking?e("p",[t._v("\n                -  Bộ phận một cửa - Cục Lãnh sự xác nhận lịch hẹn nộp hồ sơ Quý khách vào "+t._s(" "+t.timeBooking+" ngày "+t.checkinDate+" ")+" vui lòng đến trước giờ hẹn 10' và sắp xếp hồ sơ đúng, đủ theo quy định. Quá thời gian hẹn trả trên, Quý khách vui lòng đăng ký xếp hàng lại.\n              ")]):t._e()]):e("div",[e("p",{staticClass:"mt-4"},[t._v("\n                -  Để hoàn tất thủ tục, đề nghị mang Tờ khai này cùng các giấy tờ theo quy định đến Cục Lãnh sự \n                hoặc Sở Ngoại vụ Thành phố Hồ Chí Minh hoặc Ngoại vụ địa phương hoặc \n                Cơ quan đại diện để xin chứng nhận/ hợp pháp hóa lãnh sự.\n              ")]),e("p",[t._v("\n                -  Tờ khai này chỉ có giá trị hiệu lực trong vòng 10 ngày làm việc. Quá thời hạn trên nếu chưa nộp tờ khai đề nghị kê khai tờ khai mới.\n              ")]),t.timeBooking?e("p",[t._v("\n                -  Bộ phận một cửa - Sở ngoại vụ Tp. Hồ Chí Minh xác nhận lịch hẹn nộp hồ sơ Quý khách vào "+t._s(" "+t.timeBooking+" ngày "+t.checkinDate+" ")+" vui lòng đến trước giờ hẹn 10' và sắp xếp hồ sơ đúng, đủ theo quy định. Quá thời gian hẹn trả trên, Quý khách vui lòng đăng ký xếp hàng lại.\n              ")]):t._e()])])]),e(_["a"],{staticClass:"text-xs-right mt-3 mb-2",attrs:{xs12:""}},[e(N["a"],{staticClass:"mx-3 white--text",attrs:{color:"primary"},on:{click:t.goBack}},[e(A["a"],[t._v("reply")]),t._v("  \n            Quay lại\n          ")],1)],1)],1)],1)],1),e(F["a"],{attrs:{fullscreen:"",transition:"fade-transition"},model:{value:t.dialogPDF,callback:function(e){t.dialogPDF=e},expression:"dialogPDF"}},[e(E["a"],[e(z["a"],{attrs:{flat:"",dark:"",color:"primary"}},[e(W["a"],[t._v("Tờ khai trực tuyến")]),e(H["a"]),e(N["a"],{attrs:{title:"Thoát",icon:"",dark:""},nativeOn:{click:function(e){t.dialogPDF=!1}}},[e(A["a"],[t._v("close")])],1)],1),e(P["b"],{staticClass:"px-0 py-0"},[t.dialogPDFLoading?e("div",{staticStyle:{"min-height":"700px","text-align":"center",margin:"auto",padding:"25%"}},[e(k["a"],{attrs:{size:100,width:1,color:"primary",indeterminate:""}})],1):t._e(),e("iframe",{directives:[{name:"show",rawName:"v-show",value:!t.dialogPDFLoading,expression:"!dialogPDFLoading"}],staticStyle:{overflow:"auto","min-height":"600px"},attrs:{id:"dialogPDFPreview",src:"",type:"application/pdf",width:"100%",height:"100%",frameborder:"0"}})]),e(P["a"],{staticClass:"mx-2"},[e(H["a"]),e(N["a"],{staticClass:"white--text mr-2",attrs:{color:"primary"},nativeOn:{click:function(e){return t.printEform.apply(null,arguments)}}},[e(A["a"],[t._v("print")]),t._v("  \n          In tờ khai\n        ")],1),e(N["a"],{staticClass:"white--text",attrs:{color:"red"},nativeOn:{click:function(e){return function(){return t.dialogPDF=!1}.apply(null,arguments)}}},[e(A["a"],[t._v("clear")]),t._v("  \n          Thoát\n        ")],1)],1)],1)],1)],1)},Tt=[];n["a"].use(tt.a);var Dt={props:["index"],components:{},data:function(){return{serviceInfoList:[],eformNoSearch:"",formScriptEform:"",dialogPDF:!1,dialogPDFLoading:!1,timeBooking:"",checkinDate:"",agencyItems:[{name:"Cục lãnh sự - 40 Trần Phú, Ba Đình, Hà Nội",value:"124302",code:"CLS",serverNo:"SERVER_CLS"},{name:"Sở ngoại vụ thành phố Hồ Chí Minh",value:"703021",code:"SNVHCM",serverNo:"SERVER_SNVHCM"}],agencyTiepNhan:""}},computed:{serviceinfoSelected:function(){return this.$store.getters.getServiceinfoSelected},fileTemplateSelected:function(){return this.$store.getters.getFileTemplateSelected},eformDetail:function(){return this.$store.getters.getEformDetail},serverCode:function(){return this.$store.getters.getServerNo}},created:function(){var t=this;t.$nextTick((function(){try{t.agencyItems=agencyItems}catch(a){}var e=t.$router.history.current;e.query;t.eformDetail.secret||t.eformDetail.eFormNo||t.goBack();try{t.agencyTiepNhan=t.agencyItems.filter((function(e){return e.code===t.eformDetail.govAgencyCode}))[0]}catch(a){}"1"===String(t.index)&&t.getDetailBooking()}))},updated:function(){var t=this;t.$nextTick((function(){}))},watch:{$route:function(t,e){t.params,t.query}},methods:{downloadEform:function(){var t=this;t.dialogPDFLoading=!0,t.$store.dispatch("downloadEform",t.eformDetail).then((function(e){t.dialogPDFLoading=!1})).catch((function(e){t.dialogPDFLoading=!1}))},previewEform:function(){var t=this;t.dialogPDFLoading=!0,t.$store.dispatch("previewEform",t.eformDetail).then((function(e){t.dialogPDFLoading=!1,t.dialogPDF=!0,document.getElementById("dialogPDFPreview").src=e})).catch((function(e){t.dialogPDFLoading=!1}))},printEform:function(){try{document.getElementById("dialogPDFPreview").contentWindow.print()}catch(t){}},getDetailBooking:function(){var t=this,e=this.$store.getters.getServerNo,a=e||"SERVER_CLS",n={codeNumber:t.eformDetail.eFormNo?t.eformDetail.eFormNo:"",serverCode:a};t.$store.dispatch("getDetailBookingProxy",n).then((function(e){t.timeBooking=e.bookingInTime?e.bookingInTime:"",t.checkinDate=t.parseDate(e.checkinDate)})).catch((function(t){}))},parseDate:function(t){if(!t)return"";var e="";return e=isNaN(Number(t))?new Date(t):new Date(Number(t)),e?"".concat(e.getDate().toString().padStart(2,"0"),"/").concat((e.getMonth()+1).toString().padStart(2,"0"),"/").concat(e.getFullYear()):""},goBack:function(){var t=this;t.$router.push({path:"/",query:{renew:Math.floor(100*Math.random())+1}})}}},It=Dt,Nt=Object(h["a"])(It,Ct,Tt,!1,null,null,null),Et=Nt.exports,Pt=function(){var t=this,e=t._self._c;return e("div",[t._v("\n  13123\n")])},Lt=[],Ft=a("71a3"),Mt=a("c671"),Ot=a("fe57"),Bt=a("aac8"),$t=a("9a96"),At=function(){var t=this,e=t._self._c;return e("div",{staticClass:"form-chitiet"},[e("div",[e(Ot["a"],{attrs:{"icons-and-text":""},model:{value:t.activeTab,callback:function(e){t.activeTab=e},expression:"activeTab"}},[e($t["a"],{attrs:{color:"primary"}}),e(Ft["a"],{key:1,attrs:{href:"#tabs-1"},on:{click:function(e){return t.getNextActions()}}},[e(N["a"],{staticClass:"px-0 py-0 mx-0 my-0",attrs:{flat:""}},[3===t.originality?e("span",[t._v("XỬ LÝ HỒ SƠ")]):e("span",[t._v("CHUẨN BỊ HỒ SƠ")])])],1),e(Bt["a"],{staticStyle:{overflow:"visible!important"},attrs:{"reverse-transition":"fade-transition",transition:"fade-transition"},model:{value:t.activeTab,callback:function(e){t.activeTab=e},expression:"activeTab"}},[e(Mt["a"],{key:1,attrs:{value:"tabs-1","reverse-transition":"fade-transition",transition:"fade-transition"}},[0!==t.checkInput&&t.filterNextActionEnable(t.btnDossierDynamics)?e("div",{staticStyle:{position:"relative"}},[e(M["a"],{staticClass:"expansion-pl",attrs:{value:[!0]}},[e(O["a"],{key:1,attrs:{"hide-actions":""}},[t._v("\n                123\n              ")])],1)],1):t._e(),t.btnStateVisible?e("div",{staticClass:"px-4 py-3",staticStyle:{"border-bottom":"1px solid #dddddd"}},[t._l(t.btnPlugins,(function(a,n){return e(N["a"],{key:n,staticClass:"ml-0 mr-2",attrs:{color:"primary",loading:t.loadingPlugin,disabled:t.loadingPlugin},nativeOn:{click:function(e){return t.processPullBtnplugin(a,n)}}},[t._v("\n              "+t._s(a.pluginName)+"\n              "),e("span",{attrs:{slot:"loader"},slot:"loader"},[t._v("Loading...")])])})),t.btnStepsDynamics.length>0&&t.thongTinChiTietHoSo["permission"].indexOf("write")>=0?e(U["a"],{staticStyle:{display:"inline-block",position:"relative !important"},attrs:{bottom:"","offset-y":""}},[e(N["a"],{staticClass:"deactive__btn",attrs:{slot:"activator",color:"primary",dark:""},slot:"activator"},[t._v("Khác   "),e(A["a"],{attrs:{size:"18"}},[t._v("arrow_drop_down")])],1),e(R["a"],t._l(t.btnStepsDynamics,(function(a,n){return e(q["a"],{key:n,on:{click:function(e){return t.btnActionEvent(a,n)}}},[e(j["b"],[t._v(t._s(a.title))])],1)})),1)],1):t._e()],2):t._e()])],1)],1)],1)])},Rt=[],qt=a("4ca6"),Gt=a("12b2"),jt=a("b56d"),Ut=a("3a2f"),Vt=function(){var t=this,e=t._self._c;return e("div",[e(E["a"],[t._l(t.dossierTemplateItems,(function(a,n){return t.partTypes.includes(a.partType)&&t.checkVisibleTemp(a,n)?e("div",{key:a.partNo,staticClass:"form_alpaca",staticStyle:{position:"relative"}},[e(M["a"],{staticClass:"expaned__list__data",attrs:{expand:"",value:[t.currentFormView==="formAlpaca"+a.partNo+t.id]}},[e(O["a"],{attrs:{"hide-actions":""}},[e("div",{staticStyle:{"background-color":"#fff"},attrs:{slot:"header"},on:{click:function(e){t.stateView=!1}},slot:"header"},[e("div",{staticStyle:{"align-items":"center",background:"#fff","padding-left":"25px"},style:{width:t.checkStyle(a)}},[e("div",{staticClass:"mr-2",staticStyle:{"min-width":"18px",display:"flex"},on:{click:function(e){t.onlyView&&a.hasForm?t.viewFile2(a):t.loadAlpcaForm(a)}}},[e("div",{staticClass:"header__tphs"},[e("span",{staticClass:"text-bold"},[t._v(t._s(n+1)+".")]),t._v("  ")]),e("div",{staticClass:"header__tphs"},[e(Ut["a"],{staticStyle:{"max-width":"100% !important"},attrs:{top:""}},[e("span",{attrs:{slot:"activator"},slot:"activator"},[t._v("\n                      "+t._s(a.partName)+"  \n                      "),a.required?e("span",{staticStyle:{color:"red"}},[t._v(" (*) ")]):t._e(),t._v("\n                        \n                    ")]),a.partTip["tip"]?e("span",[t._v(t._s(a.partTip["tip"]))]):t._e()]),a.hasForm&&a.daKhai&&(1===t.originality&&2!==a.partType||1!==t.originality)?e(Ut["a"],{attrs:{top:""}},[e("i",{staticClass:"fa fa-file-text-o",staticStyle:{color:"#0d71bb","font-size":"13px"},attrs:{slot:"activator","aria-hidden":"true"},slot:"activator"}),e("span",[t._v("Biểu mẫu trực tuyến (Đã khai)")])]):t._e(),a.hasForm&&!a.daKhai&&(1===t.originality&&2!==a.partType||1!==t.originality)?e(Ut["a"],{attrs:{top:""}},[e("i",{staticClass:"fa fa-file-o",staticStyle:{color:"#0d71bb","font-size":"13px"},attrs:{slot:"activator"},slot:"activator"}),e("span",[t._v("Biểu mẫu trực tuyến (Chưa khai)")])]):t._e(),t._v("\n                    \n                  "),!a.hasForm&&a.hasFileTemp?e(Ut["a"],{attrs:{top:""}},[e(A["a"],{staticStyle:{color:"#0d71bb"},attrs:{slot:"activator",size:"16",color:"primary"},on:{click:function(e){return e.stopPropagation(),t.downloadFileTemplate(a,n)}},slot:"activator"},[t._v("save_alt")]),e("span",[t._v("Biểu mẫu điền thủ công")])],1):t._e()],1)]),e("div",{staticStyle:{display:"flex"}},[1===t.checkInput&&2===a.fileCheck&&a.stateEditFileCheck?e(K["a"],{attrs:{placeholder:"Nhập lý do",rules:[function(t){return!!t||"Bạn phải nhập lý do trước khi gửi"}],required:""},on:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.changeFileComment(a,n)}},model:{value:a.fileComment,callback:function(e){t.$set(a,"fileComment",e)},expression:"item.fileComment"}}):t._e(),1===t.checkInput&&2===a.fileCheck&&a.stateEditFileCheck?e(Ut["a"],{attrs:{top:""}},[e(N["a"],{staticClass:"mx-0 my-0",attrs:{slot:"activator",icon:""},on:{click:function(e){return e.stopPropagation(),t.changeFileComment(a,n)}},slot:"activator"},[e(A["a"],{staticClass:"mx-0",attrs:{size:"16",color:"primary"}},[t._v("send")])],1),e("span",[t._v("Gửi")])],1):t._e()],1),a.fileComment&&!a.stateEditFileCheck?e("i",{staticStyle:{"font-size":"12px",color:"#0d71bb","margin-left":"10px"}},[t._v(t._s(a.fileComment))]):t._e(),a.fileComment&&!a.stateEditFileCheck&&1===t.checkInput?e(Ut["a"],{attrs:{top:""}},[e(A["a"],{staticStyle:{"font-size":"13px",color:"#0d71bb","margin-left":"10px",cursor:"pointer"},attrs:{slot:"activator"},on:{click:function(t){t.stopPropagation(),a.stateEditFileCheck=!a.stateEditFileCheck}},slot:"activator"},[t._v("edit")]),e("span",[t._v("Chỉnh sửa ý kiến")])],1):t._e(),t._l(t.dossierFilesItems,(function(n,o){return a.partNo!==n.dossierPartNo||n.eForm?t._e():e("div",{key:o},[e("div",{style:{width:"calc(100% - 370px)",display:"flex","align-items":"center",background:"#fff","padding-left":"15px","font-size":"12px","margin-bottom":t.onlyView?"5px":"0px"}},[e("span",{staticClass:"ml-3",staticStyle:{cursor:"pointer"},on:{click:function(e){return e.stopPropagation(),t.viewFile2(n)}}},[0!==n.fileSize?e(A["a"],[t._v("attach_file")]):t._e(),t._v("\n                    "+t._s(n.displayName)+" - \n                    "),e("i",[t._v(t._s(n.modifiedDate))])],1),t.onlyView||1===t.checkInput?t._e():e(N["a"],{staticClass:"mx-0 my-0",attrs:{icon:"",ripple:""},on:{click:function(e){return e.stopPropagation(),t.deleteSingleFile(n,o)}}},[e(A["a"],{staticStyle:{color:"red"}},[t._v("delete_outline")])],1)],1)])})),e("div",{staticClass:"mr-3 my-1 py-2",staticStyle:{display:"none",border:"1px solid #f3ae75"},attrs:{id:"fileApplicant-"+a.partNo}},t._l(t.dossierFilesApplicant,(function(n,o){return n.dossierTemplateNo===t.thongTinHoSo["dossierTemplateNo"]&&a.partNo===n.dossierPartNo?e("div",{key:o},[n.eForm?e("div",{style:{width:"calc(100% - 0px)",display:"flex","align-items":"center",background:"#fff","padding-left":"15px","font-size":"12px","margin-bottom":t.onlyView?"5px":"0px"}},[e(Ut["a"],{staticStyle:{"max-width":"100%"},attrs:{top:""}},[e("span",{staticClass:"ml-3",staticStyle:{cursor:"pointer"},attrs:{slot:"activator"},on:{click:function(e){return e.stopPropagation(),t.viewGiayToDaNop(n)}},slot:"activator"},[e("i",{staticClass:"ml-1 fa fa-file-o",staticStyle:{color:"#0d71bb","font-size":"13px"}}),t._v("  \n                        "+t._s(n.referenceUid)+"."+t._s(n.fileType)+" - \n                        "),e("i",[t._v(t._s(n.modifiedDate))])]),e("span",[t._v("Bản khai trực tuyến")])])],1):e("div",{style:{width:"calc(100% - 0px)",display:"flex","align-items":"center",background:"#fff","padding-left":"15px","font-size":"12px","margin-bottom":t.onlyView?"5px":"0px"}},[e(Ut["a"],{staticStyle:{"max-width":"100%"},attrs:{top:""}},[e("span",{staticClass:"ml-3",staticStyle:{cursor:"pointer"},attrs:{slot:"activator"},on:{click:function(e){return e.stopPropagation(),t.viewGiayToDaNop(n)}},slot:"activator"},[0!==n.fileSize?e(A["a"],{staticStyle:{color:"#0d71bb"}},[t._v("attach_file")]):t._e(),t._v("\n                        "+t._s(n.displayName)+" - \n                        "),e("i",[t._v(t._s(n.modifiedDate))])],1),e("span",[t._v("Đính kèm")])])],1)]):t._e()})),0)],2)]),a.hasForm&&!t.onlyView?e(E["a"],[e(P["b"],{staticStyle:{"background-color":"rgba(244, 247, 213, 0.19)"}},[e(y["a"],{attrs:{wrap:""}},[t.stateView?t._e():e(_["a"],{staticClass:"text-xs-right",attrs:{xs12:""}},[e("div",{style:t.pstFixed>t.pstEl&&t.pstFixed<t.endEl+t.pstEl?"position:fixed;top:5px;z-index:101":"",attrs:{id:"wrapForm"+a.partNo+t.id}},[a.hasForm&&!t.onlyView&&1!==t.checkInput?e(N["a"],{attrs:{color:"primary"},on:{click:function(e){return t.saveAlpacaForm(a,n)}}},[t._v("Lưu lại")]):t._e(),a.daKhai&&a.hasForm&&!t.onlyView&&1!==t.checkInput?e(N["a"],{attrs:{color:"primary"},on:{click:function(e){return t.deleteSingleFileEform(a,n)}}},[t._v("Xóa")]):t._e(),a.daKhai&&a.hasForm?e(N["a"],{attrs:{color:"primary"},on:{click:function(e){return t.previewFileEfom(a,n)}}},[t._v("In")]):t._e()],1),!t.onlyView||a.daKhai?e("div",{class:{no_acction__event:t.onlyView},attrs:{id:"formAlpaca"+a.partNo+t.id}}):t._e()])],1)],1)],1):t._e()],1)],1),e("div",{staticClass:"absolute__btn group__thanh_phan mr-1"},[t.loading?e("content-placeholders",{staticClass:"mt-1"},[e("content-placeholders-text",{attrs:{lines:1}})],1):e(y["a"],{attrs:{row:"",wrap:""}},[1===t.originality||1!==a.partType||t.thongTinHoSo.online||1===t.checkInput?t._e():e(_["a"],{staticClass:"layout wrap",staticStyle:{width:"110px"}},[e(jt["a"],{attrs:{items:t.fileMarkItems,disabled:t.onlyView},on:{change:function(e){return t.changeFileMark(e,n)}},model:{value:t.dossierTemplateItems[n].fileMark,callback:function(e){t.$set(t.dossierTemplateItems[n],"fileMark",e)},expression:"dossierTemplateItems[index].fileMark"}})],1),1===t.checkInput?e(_["a"],{staticClass:"layout wrap",staticStyle:{width:"120px"}},[e(jt["a"],{attrs:{items:t.fileCheckItems,"item-text":"text","item-value":"value"},on:{change:function(e){return t.changeFileCheck(e,n)}},model:{value:t.dossierTemplateItems[n].fileCheck,callback:function(e){t.$set(t.dossierTemplateItems[n],"fileCheck",e)},expression:"dossierTemplateItems[index].fileCheck"}})],1):a.fileCheck>0?e(_["a"],{staticClass:"layout wrap",style:{width:"20px","align-items":"center","margin-left":"10px","margin-top":t.thongTinHoSo.online?"10px":"0px"}},[1===a.fileCheck?e(Ut["a"],{attrs:{top:""}},[e(A["a"],{staticClass:"mx-0",attrs:{slot:"activator",size:"16",color:"primary"},slot:"activator"},[t._v("done")]),e("span",[t._v("Đạt")])],1):2===a.fileCheck?e(Ut["a"],{attrs:{top:""}},[e(A["a"],{staticClass:"mx-0",attrs:{slot:"activator",size:"16",color:"primary"},slot:"activator"},[t._v("close")]),e("span",[t._v("Không đạt")])],1):t._e()],1):t._e(),1!==t.checkInput?e(_["a"],{class:{"text-xs-right":t.onlyView},style:{width:t.onlyView?"auto":"90px"}},[e("input",{staticStyle:{display:"none"},attrs:{type:"file",id:"file"+a.partNo},on:{change:function(e){return t.onUploadSingleFile(e,a,n)}}}),3!==a.partType||3!==t.originality||t.onlyView?t._e():e(Ut["a"],{attrs:{top:""}},[e(N["a"],{staticClass:"mx-0 my-0",attrs:{slot:"activator",icon:""},on:{click:function(e){return t.addFileOther(a)}},slot:"activator"},[e(A["a"],{staticClass:"mx-0",attrs:{size:"16",color:"primary"}},[t._v("add")])],1),e("span",[t._v("Thêm giấy tờ khác")])],1),t.progressUploadPart===a.partNo?e(k["a"],{attrs:{width:2,size:25,color:"green",indeterminate:""}}):t.progressUploadPart===a.partNo||t.onlyView?t._e():e(Ut["a"],{attrs:{left:""}},[e(N["a"],{staticClass:"mx-0 my-0",attrs:{slot:"activator",icon:""},on:{click:function(e){return t.pickFile(a)}},slot:"activator"},[e(qt["a"],[e(A["a"],{attrs:{size:"16",color:"primary"}},[t._v("cloud_upload")])],1)],1),a.partTip["extensions"]||a.partTip["maxSize"]?e("span",[t._v("Chấp nhận tải lên các định dạng: "+t._s(a.partTip["extensions"])+". Tối đa "+t._s(a.partTip["maxSize"])+" MB ")]):e("span",[t._v("Tải file lên")])],1),t.partNoApplicantHasFile(a.partNo)&&!t.onlyView?e(Ut["a"],{attrs:{top:""}},[e(N["a"],{staticClass:"mx-0 my-0",attrs:{slot:"activator",icon:""},on:{click:function(e){return t.showFilesApplicant(a.partNo)}},slot:"activator"},[e(qt["a"],[e(A["a"],{attrs:{size:"16",color:"orange darken-3"}},[t._v("warning")])],1)],1),e("span",[t._v("Giấy tờ đã nộp")])],1):t._e()],1):t._e()],1)],1)],1):t._e()})),t.partTypes.includes(2)?t._e():e("div",[e(y["a"],{staticClass:"mx-4",attrs:{wrap:""}},[!t.onlyView||t.onlyView&&t.applicantNoteDossier?e(_["a"],{staticClass:"my-0 py-2 text-bold",staticStyle:{width:"60px"}},[t._v("Ghi chú:")]):t._e(),e(_["a"],{staticStyle:{width:"calc(100% - 80px)"}},[t.onlyView?t._e():e("div",{staticClass:"pl-2"},[e(K["a"],{staticClass:"py-0",attrs:{"multi-line":"",rows:"3"},on:{input:t.changeApplicantNote},model:{value:t.applicantNoteDossier,callback:function(e){t.applicantNoteDossier=e},expression:"applicantNoteDossier"}})],1),t.onlyView&&t.applicantNoteDossier?e("p",{staticClass:"my-0 py-2"},[t._v("\n            "+t._s(t.applicantNoteDossier)+" \n          ")]):t._e()])],1)],1),e(F["a"],{attrs:{"max-width":"400",transition:"fade-transition",persistent:""},model:{value:t.dialogAddOtherTemp,callback:function(e){t.dialogAddOtherTemp=e},expression:"dialogAddOtherTemp"}},[e(E["a"],[e(B["a"],{ref:"form",attrs:{"lazy-validation":""},model:{value:t.valid,callback:function(e){t.valid=e},expression:"valid"}},[e(Gt["a"],{staticClass:"headline"},[t._v("Tên giấy tờ")]),e(N["a"],{staticClass:"mx-0 my-0 absolute__btn_panel mr-2",attrs:{icon:"",dark:""},nativeOn:{click:function(e){return t.cancelDialog.apply(null,arguments)}}},[e(A["a"],[t._v("clear")])],1),t.loadingAddOther?e(V["a"],{staticClass:"my-0",attrs:{indeterminate:!0}}):t._e(),e(P["b"],{staticClass:"pb-0 pt-4"},[e(y["a"],{attrs:{wrap:""}},[e(_["a"],{staticClass:"px-2 pb-3 fix__label",attrs:{xs12:""}},[e(K["a"],{attrs:{label:"Tên giấy tờ:",rules:[function(t){return!!t||"Bạn phải điền tên giấy tờ."}],required:""},model:{value:t.otherDossierTemplate,callback:function(e){t.otherDossierTemplate=e},expression:"otherDossierTemplate"}})],1)],1)],1),e(P["a"],[e(H["a"]),e(N["a"],{attrs:{color:"red darken-3",flat:"flat"},nativeOn:{click:function(e){return t.cancelDialog.apply(null,arguments)}}},[t._v("\n              Quay lại\n            ")]),e(N["a"],{attrs:{color:"primary",flat:"flat",loading:t.loadingAddOther},nativeOn:{click:function(e){return t.addOtherTemplate.apply(null,arguments)}}},[t._v("\n              Đồng ý\n              "),e("span",{attrs:{slot:"loader"},slot:"loader"},[t._v("Loading...")])])],1)],1)],1)],1)],2),e(F["a"],{staticStyle:{overflow:"hidden"},attrs:{"max-width":"900",transition:"fade-transition"},model:{value:t.dialogPDF,callback:function(e){t.dialogPDF=e},expression:"dialogPDF"}},[e(E["a"],[e(Gt["a"],{staticClass:"headline"},[t.pdfEform?e("span",[t._v("Bản khai trực tuyến")]):e("span",[t._v("File đính kèm")])]),e(N["a"],{staticClass:"mx-0 my-0 absolute__btn_panel mr-2",attrs:{icon:"",dark:""},nativeOn:{click:function(e){t.dialogPDF=!1}}},[e(A["a"],[t._v("clear")])],1),t.dialogPDFLoading?e("div",{staticStyle:{"min-height":"600px","text-align":"center",margin:"auto",padding:"25%"}},[e(k["a"],{attrs:{size:100,width:1,color:"primary",indeterminate:""}})],1):t._e(),e("iframe",{directives:[{name:"show",rawName:"v-show",value:!t.dialogPDFLoading,expression:"!dialogPDFLoading"}],staticStyle:{overflow:"auto","min-height":"600px"},attrs:{id:"dialogPDFPreview"+t.id,src:"",type:"application/pdf",width:"100%",height:"100%",frameborder:"0"}})],1)],1)],1)},Ht=[],Kt={data:function(){return{}}},zt=Kt,Wt=Object(h["a"])(zt,Vt,Ht,!1,null,null,null),Qt=Wt.exports,Jt={props:["index","id"],components:{"thanh-phan-ho-so":Qt},data:function(){return{}}},Yt=Jt,Xt=Object(h["a"])(Yt,At,Rt,!1,null,null,null),Zt=Xt.exports,te={props:["id","formCode"],components:{"xem-chi-tiet-ho-so-detail-can-bo":Zt},data:function(){return{initData:null,step:""}}},ee=te,ae=Object(h["a"])(ee,Pt,Lt,!1,null,null,null),ne=ae.exports,oe=[{path:"/",name:"Landing",component:_t,props:!0},{path:"/thong-tin-to-khai",name:"ChiTietToKhai",component:xt,props:!0},{path:"/tao-to-khai-thanh-cong/:index",name:"TaoFormThanhCong",component:Et,props:!0},{path:"/danh-sach-ho-so/:index",name:"Landing",component:function(){return a.e("Landing").then(a.bind(null,"306c"))},props:!0,meta:{requiresAuth:!1}},{path:"/danh-sach-ho-so/:index/tiep-nhan-ho-so/:id/:formCode",name:"TiepNhanHoSoDetail",component:function(){return a.e("TiepNhanHoSoDetail").then(a.bind(null,"d129"))},props:!0,meta:{requiresAuth:!1}},{path:"/danh-sach-ho-so/:index/bo-sung-ho-so/:id",name:"HoanThienBoSungHoSoDetail",component:function(){return a.e("HoanThienBoSungHoSoDetail").then(a.bind(null,"a35c"))},props:!0,meta:{requiresAuth:!1}},{path:"/danh-sach-ho-so/:index/ho-so/:id/:formCode",name:"DetailForward",component:ne,props:!0},{path:"*",name:"NotFound",component:T}];n["a"].use(g["a"]);var ie=new g["a"]({routes:oe}),re=ie,ce=a("2f62"),se=a("21a6"),le=a.n(se);function pe(t){return pe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},pe(t)}tt.a.options={positionClass:"toast-top-center",timeOut:"5000"},n["a"].use(tt.a),n["a"].use(ce["a"]);var de=new ce["a"].Store({state:{initData:{},endPoint:"/o/rest/v2",serviceinfoSelected:"",fileTemplateSelected:"",formScriptEform:"",formDataEform:"",eformDetail:"",loading:!1,index:0,agencyList:[],domainList:[],levelList:[],isMobile:!1,serverNo:"",chapchablob:""},actions:{loadInitResource:function(t){t.commit;var e=t.state;return new Promise((function(t,a){null!==window.themeDisplay&&void 0!==window.themeDisplay?(e.initData["groupId"]=window.themeDisplay.getScopeGroupId(),e.initData["user"]={userName:window.themeDisplay.getUserName(),userEmail:"",userId:window.themeDisplay.getUserId()}):(e.initData["groupId"]=0,e.initData["user"]={userName:"",userEmail:"",userId:20103}),t(e.initData)}))},getServiceLists:function(t,e){t.commit;var a=t.state;return new Promise((function(t,n){de.dispatch("loadInitResource").then((function(o){var i={start:15*e.page-15,end:15*e.page};e.hasOwnProperty("keyword")&&(i=Object.assign(i,{keyword:e.keyword}));var r={headers:{groupId:a.initData.groupId},params:i};at.a.get(a.endPoint+"/serviceinfos",r).then((function(e){var a=e.data;t(a)})).catch((function(t){n(t)}))}))}))},getServiceDetail:function(t,e){t.commit;var a=t.state;return new Promise((function(t,n){de.dispatch("loadInitResource").then((function(o){var i={headers:{groupId:a.initData.groupId}};at.a.get(a.endPoint+"/serviceinfos/"+e.index,i).then((function(e){var a=e.data;t(a)})).catch((function(t){n(t)}))}))}))},getFileTemplateEform:function(t,e){t.commit;var a=t.state;return new Promise((function(t,n){de.dispatch("loadInitResource").then((function(o){var i={headers:{groupId:a.initData.groupId},params:{eForm:!0}};at.a.get(a.endPoint+"/serviceinfos/"+e.serviceInfoId+"/filetemplates",i).then((function(e){var a=e.data;t(a)})).catch((function(t){n(t)}))}))}))},loadFormScript:function(t,e){var a=t.state;t.commit;return new Promise((function(t,n){de.dispatch("loadInitResource").then((function(o){$.ajax({url:"/o/rest/v2/serviceinfos/"+e.serviceInfoId+"/filetemplates/"+e.fileTemplateNo+"/formscript",type:"GET",headers:{groupId:a.initData.groupId,Token:window.Liferay?window.Liferay.authToken:""},dataType:"text",success:function(e){var a=e;t(a)},error:function(e){t(e),n(e)}})}))}))},loadFormData:function(t,e){var a=t.state;t.commit;return new Promise((function(t,n){de.dispatch("loadInitResource").then((function(o){$.ajax({url:"/o/rest/v2/serviceinfos/"+e.serviceInfoId+"/filetemplates/"+e.fileTemplateNo+"/formreport",type:"GET",headers:{groupId:a.initData.groupId,Token:window.Liferay?window.Liferay.authToken:""},dataType:"text",success:function(e){var a=e;t(a)},error:function(e){t(e),n(e)}})}))}))},downloadEform:function(t,e){t.state,t.commit;return new Promise((function(t,a){de.dispatch("loadInitResource").then((function(n){var o={headers:{groupId:window.themeDisplay.getScopeGroupId()},responseType:"blob"};at.a.get("/o/rest/v2/eforms/"+e.eFormId+"/report/"+e.secret,o).then((function(a){var n=a.data;le()(n,"ToKhaiTrucTuyen-"+e.eFormNo+".pdf"),t("")})).catch((function(t){a(t)}))}))}))},previewEform:function(t,e){t.state,t.commit;return new Promise((function(t,a){de.dispatch("loadInitResource").then((function(n){var o={headers:{groupId:window.themeDisplay.getScopeGroupId()},responseType:"blob"};at.a.get("/o/rest/v2/eforms/"+e.eFormId+"/report/"+e.secret,o).then((function(e){var a=window.URL.createObjectURL(e.data);t(a)})).catch((function(t){a(t)}))}))}))},getEform:function(t,e){t.commit;var a=t.state;return new Promise((function(t,n){de.dispatch("loadInitResource").then((function(o){var i={headers:{groupId:window.themeDisplay?window.themeDisplay.getScopeGroupId():""},params:{}};at.a.get(a.endPoint+"/eforms/"+e.eFormId,i).then((function(e){var a=e.data;t(a||"")})).catch((function(t){n(t)}))}))}))},getEformSecret:function(t,e){t.commit;var a=t.state;return new Promise((function(t,n){de.dispatch("loadInitResource").then((function(o){var i={headers:{groupId:window.themeDisplay?window.themeDisplay.getScopeGroupId():""},params:{}};at.a.get(a.endPoint+"/eforms/"+e.eFormNo+"/password/"+e.secret,i).then((function(e){var a=e.data;t(a||"")})).catch((function(t){n(t)}))}))}))},getEformSecretCaptcha:function(t,e){t.commit;var a=t.state;return new Promise((function(t,n){de.dispatch("loadInitResource").then((function(o){var i={headers:{groupId:window.themeDisplay?window.themeDisplay.getScopeGroupId():""},params:{eFormNo:e.eFormNo,secret:e.secret,j_captcha_response:e.j_captcha_response}};at.a.get(a.endPoint+"/eforms/searchDeclaration",i).then((function(e){var a=e.data;t(a||"")})).catch((function(t){n(t)}))}))}))},getDetailBooking:function(t,e){t.state,t.commit;return new Promise((function(t,a){de.dispatch("loadInitResource").then((function(n){var o={headers:{groupId:window.themeDisplay.getScopeGroupId()},params:{codeNumber:e.codeNumber}};at.a.get("/o/rest/v2/bookings/eformDetail",o).then((function(e){e.data?t(e.data):t(e)})).catch((function(t){a(t)}))}))}))},getDetailBookingProxy:function(t,e){t.state,t.commit;return new Promise((function(t,a){de.dispatch("loadInitResource").then((function(n){var o={headers:{groupId:window.themeDisplay.getScopeGroupId(),Token:window.Liferay?window.Liferay.authToken:""}},i={codeNumber:e["codeNumber"]},r=new URLSearchParams;r.append("method","GET"),r.append("serverCode",e.serverCode),r.append("url","/bookings/eformDetail"),r.append("data",JSON.stringify(i)),at.a.post("/o/rest/v2/proxy",r,o).then((function(e){e.data?t(e.data):t(e)})).catch((function(t){a(t)}))}))}))},getEformData:function(t,e){t.state,t.commit;return new Promise((function(t,a){de.dispatch("loadInitResource").then((function(a){var n={headers:{groupId:window.themeDisplay.getScopeGroupId()}};at.a.get("/o/rest/v2/eforms/"+e.eFormId+"/data/"+e.secret,n).then((function(e){if(void 0!==e["status"]&&203===e["status"])tt.a.clear(),tt.a.error("Mã tờ khai không chính xác. Vui lòng kiểm tra lại."),t("secretFail");else{var a=e.data;"object"===pe(a)?t(JSON.stringify(a)):t(a)}})).catch((function(t){tt.a.error("Mã tờ khai không chính xác. Vui lòng kiểm tra lại.")}))}))}))},createBookingOnline:function(t,e){t.commit,t.state;return new Promise((function(t,a){de.dispatch("loadInitResource").then((function(n){var o={headers:{groupId:e.groupId?e.groupId:"",Token:window.Liferay?window.Liferay.authToken:""}},i=new URLSearchParams;i.append("className",e.className),i.append("classPK",e.classPK),i.append("codeNumber",e.codeNumber),i.append("govAgencyCode",e.govAgencyCode),i.append("serviceCode",e.serviceCode),i.append("state",e.state),i.append("gateNumber",""),i.append("bookingName",e.bookingName),i.append("serviceGroupCode",e.serviceGroupCode),i.append("online",!0),i.append("bookingDate",e.bookingDate),i.append("telNo",e.telNo),i.append("j_captcha_response",e.j_captcha_response),at.a.post("/o/rest/v2/bookings",i,o).then((function(e){void 0!==e["status"]&&203===e["status"]?(tt.a.clear(),tt.a.error("Mã captcha không chính xác"),a(e)):t(e.data)})).catch((function(t){tt.a.clear(),tt.a.error("Đăng ký xếp hàng thất bại. Vui lòng thử lại."),a(t)}))}))}))},createBookingOnlineProxy:function(t,e){t.commit,t.state;return new Promise((function(t,a){var n={headers:{groupId:window.themeDisplay.getScopeGroupId(),Token:window.Liferay?window.Liferay.authToken:""}},o={className:e["className"],classPK:e["classPK"],govAgencyCode:e["govAgencyCode"],codeNumber:e["codeNumber"],serviceCode:e["serviceCode"],state:e["state"],gateNumber:"",bookingName:e["bookingName"],serviceGroupCode:e["serviceGroupCode"],online:!0,bookingDate:e["bookingDate"],telNo:e["telNo"],bypassCaptcha:!0},i=new URLSearchParams;i.append("method","POST"),i.append("serverCode",e.serverCode),i.append("url","/bookings"),i.append("data",JSON.stringify(o)),i.append("bypassCaptcha",!0),at.a.post("/o/rest/v2/proxy",i,n).then((function(e){e["data"]&&203===e["data"]["code"]?(tt.a.clear(),tt.a.error("Mã captcha không chính xác"),a(e)):t(e.data)})).catch((function(t){tt.a.clear(),tt.a.error("Đăng ký xếp hàng thất bại. Vui lòng thử lại."),a(t)}))}))},updateBooking:function(t,e){t.commit,t.state;return new Promise((function(t,a){de.dispatch("loadInitResource").then((function(n){var o={headers:{groupId:window.themeDisplay?window.themeDisplay.getScopeGroupId():""}},i=new URLSearchParams;i.append("speaking",e.speaking),at.a.put("/o/rest/v2/bookings/"+e.bookingId,i,o).then((function(e){t(e)})).catch((function(t){a(t)}))}))}))},updateBookingAll:function(t,e){t.commit,t.state;return new Promise((function(t,a){de.dispatch("loadInitResource").then((function(n){var o={headers:{groupId:window.themeDisplay?window.themeDisplay.getScopeGroupId():"",Token:window.Liferay?window.Liferay.authToken:""}},i=new URLSearchParams;i.append("state",e.state),i.append("gateNumber",e.gateNumber),i.append("speaking",e.speaking),at.a.put("/o/rest/v2/bookings/"+e.bookingId,i,o).then((function(e){t(e)})).catch((function(t){a(t)}))}))}))},getBookingDangGoi:function(t,e){t.commit,t.state;return new Promise((function(t,a){de.dispatch("loadInitResource").then((function(n){var o={headers:{groupId:window.themeDisplay?window.themeDisplay.getScopeGroupId():"",Token:window.Liferay?window.Liferay.authToken:""},params:{state:e.state?e.state:""}};e["bookingFrom"]&&(o["params"].bookingFrom=e["bookingFrom"]),e["bookingTo"]&&(o["params"].bookingTo=e["bookingTo"]),at.a.get("/o/rest/v2/serverconfigs/"+e.serverNo+"/protocols/API_CONNECT",o).then((function(e){var a=e.data;if(a.data){var n=a.data;t(n)}else t([])})).catch((function(t){a([])}))}))}))},getCounterBooking:function(t,e){t.commit,t.state;return new Promise((function(t,a){de.dispatch("loadInitResource").then((function(n){var o={headers:{groupId:window.themeDisplay?window.themeDisplay.getScopeGroupId():"",Token:window.Liferay?window.Liferay.authToken:""},params:{groupIdBooking:e.groupIdBooking?e.groupIdBooking:"",bookingDate:e.bookingDate?e.bookingDate:"",online:!0}};at.a.get("/o/rest/v2/bookings/counter",o).then((function(e){var a=e.data;a&&a.booking?t(!0):t(!1)})).catch((function(t){a(!1)}))}))}))},getCounterBookingProxy:function(t,e){t.commit,t.state;return new Promise((function(t,a){var n={headers:{groupId:window.themeDisplay.getScopeGroupId(),Token:window.Liferay?window.Liferay.authToken:""}},o={groupIdBooking:e.groupIdBooking?e.groupIdBooking:"",bookingDate:e.bookingDate?e.bookingDate:"",online:!0},i=new URLSearchParams;i.append("method","GET"),i.append("url","/bookings/counter"),i.append("serverCode",e.serverCode),i.append("data",JSON.stringify(o)),at.a.post("/o/rest/v2/proxy",i,n).then((function(e){var a=e.data;a&&a.booking?t(!0):t(!1)})).catch((function(t){a(!1)}))}))},getServerConfig:function(t,e){t.commit,t.state;return new Promise((function(t,a){de.dispatch("loadInitResource").then((function(n){var o={headers:{groupId:window.themeDisplay?window.themeDisplay.getScopeGroupId():"",Token:window.Liferay?window.Liferay.authToken:""}},i="/o/rest/v2/serverconfigs/"+e.serverNo;at.a.get(i,o).then((function(e){var a=e.data;t(a)})).catch((function(t){a(t)}))}))}))},makeImageCap:function(t){t.commit,t.state;return new Promise((function(t,e){var a={headers:{groupId:window.themeDisplay?window.themeDisplay.getScopeGroupId():"",Accept:"application/json"},responseType:"blob"},n="/o/rest/v2/applicants/jcaptcha";at.a.get(n,a).then((function(e){var a=window.URL.createObjectURL(e.data);t(a)})).catch((function(t){e(t)}))}))},makeImageCapLogin:function(t){t.commit,t.state;return new Promise((function(t,e){var a={headers:{groupId:window.themeDisplay?window.themeDisplay.getScopeGroupId():"",Accept:"application/json"},responseType:"blob"},n="/o/v1/opencps/users/login/jcaptcha";at.a.get(n,a).then((function(e){var a=window.URL.createObjectURL(e.data);t(a)})).catch((function(t){e(t)}))}))},goToDangNhap:function(t,e){t.commit,t.state;return new Promise((function(t,a){de.dispatch("loadInitResource").then((function(n){var o={headers:{Authorization:"BASIC "+window.btoa(e["npmreactlogin_login"]+":"+e["npmreactlogin_password"])}},i=new URLSearchParams;e.j_captcha_response&&i.append("j_captcha_response",e.j_captcha_response),at.a.post("/o/v1/opencps/login",i,o).then((function(e){""!==e.data&&"ok"!==e.data&&"captcha"!==e.data&&"lockout"!==e.data?"pending"===e.data?window.location.href=window.themeDisplay.getURLHome()+"/register#/xac-thuc-tai-khoan?active_user_id="+window.themeDisplay.getUserId()+"&redirectURL="+window.themeDisplay.getURLHome():window.location.href=e.data:"ok"===e.data?t("success"):"captcha"===e.data?(void 0!==e["status"]&&203===e["status"]&&tt.a.error("Mã captcha không chính xác"),t("captcha")):"lockout"===e.data?(t("lockout"),tt.a.error("Bạn đã đăng nhập sai quá 5 lần. Tài khoản bị tạm khóa trong 10 phút.")):(tt.a.error("Tên đăng nhập hoặc mật khẩu không chính xác.",{autoClose:2e3}),t("error"))})).catch((function(t){tt.a.error("Tên đăng nhập hoặc mật khẩu không chính xác.",{autoClose:2e3}),a(t)}))}))}))},getVNConect:function(t,e){t.commit;var a=t.state;return new Promise((function(t,n){de.dispatch("loadInitResource").then((function(o){var i={headers:{groupId:window.themeDisplay?window.themeDisplay.getScopeGroupId():""},params:{state:e.state,redirectURL:e.redirectURL}};at.a.get(a.endPoint+"/dvcqgsso/authurl",i).then((function(e){var a=e.data;t(a)})).catch((function(t){n(t)}))}))}))},mappingDvcqg:function(t,e){t.commit,t.state;return new Promise((function(t,a){de.dispatch("loadInitResource").then((function(n){var o={headers:{groupId:window.themeDisplay?window.themeDisplay.getScopeGroupId():""},params:{}},i=e.dataMapping;at.a.post("/o/rest/v2/dvcqgsso/auth",i,o).then((function(e){t(e)})).catch((function(t){a(t)}))}))}))}},mutations:{setLoading:function(t,e){t.loading=e},setChapchablob:function(t,e){t.chapchablob=e},setInitData:function(t,e){t.initData=e},setServiceinfoSelected:function(t,e){t.serviceinfoSelected=e},setFormScriptEform:function(t,e){t.formScriptEform=e},setFormDataEform:function(t,e){t.formDataEform=e},setFileTemplateSelected:function(t,e){t.fileTemplateSelected=e},setEformDetail:function(t,e){t.eformDetail=e},setServerNo:function(t,e){t.serverNo=e},setIsMobile:function(t,e){t.isMobile=e}},getters:{loading:function(t){return t.loading},getChapchablob:function(t){return t.chapchablob},index:function(t){return t.index},getServiceinfoSelected:function(t){return t.serviceinfoSelected},getFormScriptEform:function(t){return t.formScriptEform},getFormDataEform:function(t){return t.formDataEform},getFileTemplateSelected:function(t,e){return t.fileTemplateSelected},getEformDetail:function(t,e){return t.eformDetail},getServerNo:function(t,e){return t.serverNo},getIsMobile:function(t){return t.isMobile}}}),ue=a("967d");a("9029");n["a"].use(ue["default"]);var he=void 0!==window.themeDisplay?window.themeDisplay.getScopeGroupId():0;at.a.defaults.withCredentials=!0,at.a.defaults.headers.common["Token"]=void 0!==window.Liferay?window.Liferay.authToken:"",at.a.defaults.headers.common["groupId"]=he,n["a"].config.productionTip=!0,n["a"].mixin({methods:{getScopeGroupId:function(){return null!==window.themeDisplay&&void 0!==window.themeDisplay?window.themeDisplay.getScopeGroupId():0},getAuthToken:function(){return null!==window.themeDisplay&&void 0!==window.themeDisplay?window.Liferay.authToken:""},getUserId:function(){return null!==window.themeDisplay&&void 0!==window.themeDisplay?window.themeDisplay.getUserId():0}}}),new n["a"]({router:re,store:de,created:function(){var t=this;t.$nextTick((function(){}))},render:function(t){return t(f)}}).$mount("#app_application_form")},"74ef":function(t,e,a){},"8d8c":function(t,e,a){},bbd0:function(t){t.exports=JSON.parse("{}")},c7fb:function(t,e,a){"use strict";a("8d8c")},d44f:function(t,e,a){}});