(function(t){function e(e){for(var n,o,s=e[0],c=e[1],l=e[2],u=0,p=[];u<s.length;u++)o=s[u],Object.prototype.hasOwnProperty.call(i,o)&&i[o]&&p.push(i[o][0]),i[o]=0;for(n in c)Object.prototype.hasOwnProperty.call(c,n)&&(t[n]=c[n]);d&&d(e);while(p.length)p.shift()();return r.push.apply(r,l||[]),a()}function a(){for(var t,e=0;e<r.length;e++){for(var a=r[e],n=!0,s=1;s<a.length;s++){var c=a[s];0!==i[c]&&(n=!1)}n&&(r.splice(e--,1),t=o(o.s=a[0]))}return t}var n={},i={app:0},r=[];function o(e){if(n[e])return n[e].exports;var a=n[e]={i:e,l:!1,exports:{}};return t[e].call(a.exports,a,a.exports,o),a.l=!0,a.exports}o.m=t,o.c=n,o.d=function(t,e,a){o.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:a})},o.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},o.t=function(t,e){if(1&e&&(t=o(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var a=Object.create(null);if(o.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var n in t)o.d(a,n,function(e){return t[e]}.bind(null,n));return a},o.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return o.d(e,"a",e),e},o.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},o.p="/";var s=window["webpackJsonp"]=window["webpackJsonp"]||[],c=s.push.bind(s);s.push=e,s=s.slice();for(var l=0;l<s.length;l++)e(s[l]);var d=c;r.push([0,"chunk-vendors"]),a()})({0:function(t,e,a){t.exports=a("56d7")},"111b":function(module,__webpack_exports__,__webpack_require__){"use strict";var toastr__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("854a"),toastr__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(toastr__WEBPACK_IMPORTED_MODULE_0__),axios__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("bc3a"),axios__WEBPACK_IMPORTED_MODULE_1___default=__webpack_require__.n(axios__WEBPACK_IMPORTED_MODULE_1__);function _slicedToArray(t,e){return _arrayWithHoles(t)||_iterableToArrayLimit(t,e)||_unsupportedIterableToArray(t,e)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _unsupportedIterableToArray(t,e){if(t){if("string"===typeof t)return _arrayLikeToArray(t,e);var a=Object.prototype.toString.call(t).slice(8,-1);return"Object"===a&&t.constructor&&(a=t.constructor.name),"Map"===a||"Set"===a?Array.from(t):"Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a)?_arrayLikeToArray(t,e):void 0}}function _arrayLikeToArray(t,e){(null==e||e>t.length)&&(e=t.length);for(var a=0,n=new Array(e);a<e;a++)n[a]=t[a];return n}function _iterableToArrayLimit(t,e){var a=null==t?null:"undefined"!==typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=a){var n,i,r=[],o=!0,s=!1;try{for(a=a.call(t);!(o=(n=a.next()).done);o=!0)if(r.push(n.value),e&&r.length===e)break}catch(c){s=!0,i=c}finally{try{o||null==a["return"]||a["return"]()}finally{if(s)throw i}}return r}}function _arrayWithHoles(t){if(Array.isArray(t))return t}__webpack_exports__["a"]={components:{},props:["id"],data:function(){return{reRender:!0,validFormAddServiceConfig:!1,isDvc:!1,boNganh:!1,administration:"",govAgencyList:[],govAgencyFilter:"",domainList:[],domainFilter:"",serviceInfoList:[],serviceFilter:"",levelList:[{levelName:"Mức độ 2",level:2},{levelName:"Mức độ 3",level:3},{levelName:"Mức độ 4",level:4}],levelFilter:"",serviceInstruction:"",cmOptions:{tabSize:4,mode:"text/html",theme:"base16-light",lineNumbers:!0,line:!0},serviceUrl:"",forCitizen:!1,forBusiness:!1,postalService:!1,registration:!1,rules:{required:function(t){return!!t||"Bắt buộc phải nhập."},number:function(t){var e=/^\d+$/;return e.test(t)||"Bắt buộc phải nhập kiểu số."},email:function(t){var e=/^(([^<>()[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/;return e.test(t)||"Sai định dạng thư điện tử."},passWord:function(t){var e=/^((?=.*\d)(?=.*[a-z])(?=.*[A-Z])(?=.*[@$!%*#?&])([0-9a-zA-Z@$!%*#?&]{8,}))$/;return e.test(t)||"Ít nhất 8 ký tự và có chữ hoa, chữ thường, ký tự đặc biệt @$!%*#?&"},telNo:function(t){var e=/^0([1-9]{1}\d{8})$/;return t?e.test(t)||"Số điện thoại gồm 10 ký tự 0-9, eg: 0989123456, ...":[]},syntaxError:function(t){return!t||(t=String(t).trim(),t.indexOf("</")<0||"Không được có ký tự </")},varchar50:function(t){return!t||(t=String(t).trim(),t.length<=50||"Không được nhập quá 50 ký tự")},varchar75:function(t){return!t||(t=String(t).trim(),t.length<=75||"Không được nhập quá 75 ký tự")},varchar255:function(t){return!t||(t=String(t).trim(),t.length<=255||"Không được nhập quá 255 ký tự")},varchar500:function(t){return!t||(t=String(t).trim(),t.length<=500||"Không được nhập quá 500 ký tự")},varchar2000:function(t){return!t||(t=String(t).trim(),t.length<=5e3||"Không được nhập quá 5000 ký tự")},varchar5000:function(t){return!t||(t=String(t).trim(),t.length<=5e3||"Không được nhập quá 5000 ký tự")}}}},computed:{},created:function(){var t=this;try{t.boNganh=boNganh}catch(e){}try{t.isDvc=isDvc}catch(e){}t.$nextTick((function(){if(t.getAgency(),"0"!=t.id)t.getServiceConfigDetail();else{var e=t.$router.history.current.query;t.domainFilter=e.hasOwnProperty("domainCode")&&e.domainCode?e.domainCode:"",t.serviceFilter=e.hasOwnProperty("serviceCode")&&e.serviceCode?e.serviceCode:"",t.govAgencyFilter=e.hasOwnProperty("govAgencyCode")&&e.govAgencyCode?e.govAgencyCode:"",t.administration=e.hasOwnProperty("administration")&&e.administration?e.administration:"",t.levelFilter=e.hasOwnProperty("level")&&e.level?Number(e.level):"",t.isDvc&&!t.boNganh?t.govAgencyFilter&&(t.administration&&"XA_PHUONG"===t.administration?(t.getDomains("CAP_XA"),t.getServiceInfo("CAP_XA",t.domainFilter)):(t.getDomains(t.govAgencyFilter),t.getServiceInfo(t.govAgencyFilter,t.domainFilter))):(t.getDomains(t.govAgencyFilter),t.getServiceInfo(t.govAgencyFilter,t.domainFilter)),t.reRender=!1,setTimeout((function(){t.reRender=!0}),1e3)}}))},watch:{domainFilter:function(t){var e=this;t&&e.getServiceInfo(e.govAgencyFilter,t)}},methods:{getAgency:function(){var t=this,e={};t.govAgencyList=[],t.$store.dispatch("getAgencyLists",e).then((function(e){var a=function(t){function e(t,e){return t.itemName<e.itemName?-1:t.itemName>e.itemName?1:0}return t.sort(e)};t.govAgencyList=a(e)})).catch((function(){t.govAgencyList=[]}))},getDomains:function(t){var e=this,a={agencyCode:t||""};e.domainList=[],e.$store.dispatch("getDomain",a).then((function(t){e.domainList=t})).catch((function(){e.domainList=[]}))},getServiceInfo:function(t,e){var a=this,n={domain:e||"",administration:t||""};a.serviceInfoList=[],a.$store.dispatch("getServiceInfo",n).then((function(t){a.serviceInfoList=t})).catch((function(){a.serviceInfoList=[]}))},getServiceConfigDetail:function(){var t=this,e={serviceConfigId:t.id};t.$store.dispatch("getServiceConfigDetail",e).then((function(e){e&&(t.domainFilter=e.domainCode,t.serviceFilter=e.serviceInfoId,t.govAgencyFilter=e.govAgencyCode,t.serviceInstruction=e.serviceInstruction,t.levelFilter=e.serviceLevel,t.serviceUrl=e.serviceUrl,t.forCitizen=e.forCitizen,t.forBusiness=e.forBusiness,t.postalService=e.postalService,t.registration=e.registration,t.getDomains(),t.getServiceInfo(),t.reRender=!1,setTimeout((function(){t.reRender=!0}),1e3))})).catch((function(){}))},updateServiceConfig:function(t){var e=this,a={serviceConfigId:e.id,serviceInfoId:e.serviceFilter,govAgencyCode:e.govAgencyFilter,serviceInstruction:e.serviceInstruction,serviceLevel:e.levelFilter,serviceUrl:e.serviceUrl,forCitizen:e.forCitizen,forBusiness:e.forBusiness,postalService:e.postalService,registration:e.registration,receptionReport:"",type:t};e.$store.dispatch("createServiceConfig",a).then((function(a){"add"===t?toastr__WEBPACK_IMPORTED_MODULE_0___default.a.success("Thêm dịch vụ công thành công"):toastr__WEBPACK_IMPORTED_MODULE_0___default.a.success("Cập nhật thành công"),e.$router.push({path:"/table/opencps_serviceconfig",query:{renew:Math.floor(100*Math.random())+1}})})).catch((function(t){toastr__WEBPACK_IMPORTED_MODULE_0___default.a.error("Yêu cầu thực hiện thất bại")}))},processRules:function processRules(rulesStr,itemData){var maxLength,syntaxErrorInput=!1,vm=this;!itemData.hasOwnProperty("type")||"text-fields"!==itemData.type&&"textarea"!==itemData.type||(maxLength=500,"textarea"===itemData.type&&(maxLength=2e3),itemData.hasOwnProperty("model")&&(itemData.model.endsWith("Code")||itemData.model.endsWith("No")||itemData.model.endsWith("Id")||"menuGroup"==itemData.model)&&(maxLength=75),"order"==itemData.model&&(maxLength=10),syntaxErrorInput=!0);var rulesInput=[];if(rulesStr){var hasRuleVarChar=rulesStr.indexOf("varchar")>=0;rulesInput=eval("( "+rulesStr+" )"),2e3!=maxLength||hasRuleVarChar||rulesInput.push(vm.rules.varchar2000),500!=maxLength||hasRuleVarChar||rulesInput.push(vm.rules.varchar500),75!=maxLength||hasRuleVarChar||rulesInput.push(vm.rules.varchar75),10!=maxLength||hasRuleVarChar||rulesInput.push(vm.rules.varchar10)}else 2e3==maxLength&&rulesInput.push(vm.rules.varchar2000),500==maxLength&&rulesInput.push(vm.rules.varchar500),75==maxLength&&rulesInput.push(vm.rules.varchar75),10==maxLength&&rulesInput.push(vm.rules.varchar10);return syntaxErrorInput&&rulesInput.push(vm.rules.syntaxError),rulesInput},getMaxLength:function(t){var e;return!t.hasOwnProperty("type")||"text-fields"!==t.type&&"textarea"!==t.type||(e=500,"textarea"===t.type&&(e=2e3),t.hasOwnProperty("model")&&(t.model.endsWith("Code")||t.model.endsWith("No")||t.model.endsWith("Id")||"menuGroup"==t.model)&&(e=75),"order"==t.model&&(e=10)),e},parsedate:function(t){var e=t.split("-"),a=_slicedToArray(e,3),n=a[0],i=a[1],r=a[2];return"".concat(r,"-").concat(i,"-").concat(n)},currentDate:function(){var t=new Date;return"".concat(t.getFullYear(),"-").concat((t.getMonth()+1).toString().padStart(2,"0"),"-").concat(t.getDate().toString().padStart(2,"0"))},changeDate:function(t){var e=this;e.menuDate1=e.menuDate2=!1,"1"===t?e.fromReceiveDateFormatted=e.formatDate(e.fromReceiveDate):"2"===t&&(e.toReceiveDateFormatted=e.formatDate(e.toReceiveDate))},getMinMax:function(t){if(!t)return null;var e=t.split("/"),a=_slicedToArray(e,3),n=a[0],i=a[1],r=a[2];return"".concat(r,"-").concat(i,"-").concat(n)},parseDate:function(t){if(!t)return"";if(String(t).indexOf("/")>0){var e=t.split("/"),a=_slicedToArray(e,3),n=a[0],i=a[1],r=a[2];return"".concat(r,"-").concat(i.padStart(2,"0"),"-").concat(n.padStart(2,"0"))}if(String(t).indexOf("-")>0){var o=t.split("-"),s=_slicedToArray(o,3),c=s[0],l=s[1],d=s[2];return"".concat(d,"-").concat(l.padStart(2,"0"),"-").concat(c.padStart(2,"0"))}var u=new Date(Number(t));return"".concat(u.getFullYear(),"-").concat((u.getMonth()+1).toString().padStart(2,"0"),"-").concat(u.getDate().toString().padStart(2,"0"))},formatDate:function(t){if(!t)return"";var e=t.split("-"),a=_slicedToArray(e,3),n=a[0],i=a[1],r=a[2];return"".concat(r,"/").concat(i,"/").concat(n)},currentDateFormat:function(t){var e=t?new Date(t):new Date;return"".concat(e.getDate().toString().padStart(2,"0"),"/").concat((e.getMonth()+1).toString().padStart(2,"0"),"/").concat(e.getFullYear()," ").concat(e.getHours().toString().padStart(2,"0"),":").concat(e.getMinutes().toString().padStart(2,"0"))},backToList:function(){window.history.back()}}}},"146f":function(module,__webpack_exports__,__webpack_require__){"use strict";var vue__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("a026"),_DatetimePicker_vue__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("fa98"),_AttachedFileTemplate_vue__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("2be2"),_AttachedFileAvatar_vue__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("505b"),_AttachedFileForm_vue__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("1648"),_AttachedFileJasper_vue__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("f0b1"),axios__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("bc3a"),axios__WEBPACK_IMPORTED_MODULE_6___default=__webpack_require__.n(axios__WEBPACK_IMPORTED_MODULE_6__),toastr__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__("854a"),toastr__WEBPACK_IMPORTED_MODULE_7___default=__webpack_require__.n(toastr__WEBPACK_IMPORTED_MODULE_7__);vue__WEBPACK_IMPORTED_MODULE_0__["default"].use(toastr__WEBPACK_IMPORTED_MODULE_7___default.a),__webpack_exports__["a"]={props:["tableConfig","detailData","id","tableName"],components:{DatetimePicker:_DatetimePicker_vue__WEBPACK_IMPORTED_MODULE_1__["a"],AttachedFileTemplate:_AttachedFileTemplate_vue__WEBPACK_IMPORTED_MODULE_2__["a"],AttachedFileAvatar:_AttachedFileAvatar_vue__WEBPACK_IMPORTED_MODULE_3__["a"],AttachedFileForm:_AttachedFileForm_vue__WEBPACK_IMPORTED_MODULE_4__["a"],AttachedFileJasper:_AttachedFileJasper_vue__WEBPACK_IMPORTED_MODULE_5__["a"],trumbowyg:window.VueTrumbowyg.default},data:function(){return{serviceCodeDVCQG:"",alertFail:!1,alertSuccess:!1,dialogChangeMail:!1,config:{},oldEmail:"",newEmail:"",deactiveAccountFlag:0,deactiveAccountFlagBoolean:!1,snackbarsuccess:!1,snackbarerror:!1,pickItem:{},layoutNameDynamic:"",mappingUserIdCurrent:"",screenLogin:"",emailLogin:"",password:"",rightAttached:!1,rightAccount:!1,pullOk:!0,pullCounter:0,valid:!0,valid2:!0,loading:!1,data:{},dataSocket:{},detailForm:[],cmOptions:{tabSize:4,mode:"text/javascript",theme:"base16-light",lineNumbers:!0,line:!0},e1:!0,rules:{required:function(t){return!!t||"Bắt buộc phải nhập."},number:function(t){var e=/^\d+$/;return e.test(t)||"Bắt buộc phải nhập kiểu số."},email:function(t){var e=/^(([^<>()[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/;return e.test(t)||"Sai định dạng thư điện tử."},passWord:function(t){var e=/^((?=.*\d)(?=.*[a-z])(?=.*[A-Z])(?=.*[@$!%*#?&])([0-9a-zA-Z@$!%*#?&]{8,}))$/;return e.test(t)||"Ít nhất 8 ký tự và có chữ hoa, chữ thường, ký tự đặc biệt @$!%*#?&"},telNo:function(t){var e=/^0([1-9]{1}\d{8})$/;return t?e.test(t)||"Số điện thoại gồm 10 ký tự 0-9, eg: 0989123456, ...":[]},syntaxError:function(t){return!t||(t=String(t).trim(),!(t.indexOf("</")>=0||t.indexOf("<img")>=0||t.indexOf("<script")>=0)||"Dữ liệu nhập không hợp lệ")},varchar10:function(t){return!t||(t=String(t).trim(),t.length<=10||"Không được nhập quá 10 ký tự")},varchar50:function(t){return!t||(t=String(t).trim(),t.length<=50||"Không được nhập quá 50 ký tự")},varchar75:function(t){return!t||(t=String(t).trim(),t.length<=75||"Không được nhập quá 75 ký tự")},varchar255:function(t){return!t||(t=String(t).trim(),t.length<=255||"Không được nhập quá 255 ký tự")},varchar500:function(t){return!t||(t=String(t).trim(),t.length<=500||"Không được nhập quá 500 ký tự")},varchar2000:function(t){return!t||(t=String(t).trim(),t.length<=5e3||"Không được nhập quá 5000 ký tự")},varchar5000:function(t){return!t||(t=String(t).trim(),t.length<=5e3||"Không được nhập quá 5000 ký tự")}},loadingPdf:!1,viewFormInput:!0,dialogEform:!1,allowUpdateServiceCode:!0}},computed:{isConnected:{get:function(){return this.$store.getters.getisConnected},set:function(t){this.$store.commit("setisConnected",t)}},oldEmail:function(){return this.data.email?this.data.email:this.data.contactEmail}},watch:{$route:function(t,e){var a=this,n=t.query;n.hasOwnProperty("serviceCodeDvcqg")&&(a.serviceCodeDVCQG=n.serviceCodeDvcqg)}},created:function created(){var vm=this;vm.$nextTick((function(){var currentQuery=vm.$router.history.current.query;if(currentQuery.hasOwnProperty("serviceCodeDvcqg")&&(vm.serviceCodeDVCQG=currentQuery.serviceCodeDvcqg),null!==vm.tableConfig&&void 0!==vm.tableConfig){if(""!==vm.tableConfig["detailColumns"])vm.detailForm=eval("( "+vm.tableConfig["detailColumns"]+" )");else{var videoElement=document.getElementById("editor-video-preloader");null!==videoElement&&void 0!==videoElement&&videoElement.play()}if(null!==vm.detailData&&void 0!==vm.detailData&&Array.isArray(vm.detailData)&&vm.detailData.length>0)if(vm.$router.history.current.query.idCopy){for(var data={},i=0;i<vm.detailForm.length;i++)data[vm.detailForm[i]["model"]]=vm.detailData[0][vm.detailForm[i]["model"]];for(var key in data)data[key]||delete data[key],key===vm.tableName.split("_")[vm.tableName.split("_").length]+"Id"&&delete data[key];vm.data=data,vm.processDataSourceVerify()}else vm.data=vm.detailData[0],vm.processDataSourceVerify();else vm.data={};vm.processDataSource()}else{var dataPost=new URLSearchParams,textPost={type:"admin",cmd:"get",config:"true",code:vm.$router.history.current.params.tableName,respone:"tableConfig"};dataPost.append("text",JSON.stringify(textPost)),axios__WEBPACK_IMPORTED_MODULE_6___default.a.post("/o/rest/v2/socket/web",dataPost,{}).then((function(response){var dataObj=response.data;vm.dataSocket[dataObj.respone]=dataObj[dataObj.respone],"tableConfig"===dataObj.respone&&null!==vm.dataSocket["tableConfig"]&&void 0!==vm.dataSocket["tableConfig"]&&(vm.detailForm=eval("( "+vm.dataSocket["tableConfig"]["detailColumns"]+" )"),vm.processDataSource()),textPost={type:"admin",cmd:"get",code:vm.$router.history.current.params.tableName,respone:"detail",responeType:"detail",filter:[{key:"id",value_filter:vm.id,compare:"=",type:"number"}]},dataPost=new URLSearchParams,dataPost.append("text",JSON.stringify(textPost)),axios__WEBPACK_IMPORTED_MODULE_6___default.a.post("/o/rest/v2/socket/web",dataPost,{}).then((function(t){var e=t.data;vm.dataSocket[e.respone]=e[e.respone],"detail"===e.respone?null!==vm.dataSocket["detail"]&&void 0!==vm.dataSocket["detail"]&&Array.isArray(vm.dataSocket["detail"])?(0===vm.dataSocket["detail"].length?vm.data={}:vm.data=vm.dataSocket[e.respone][0],vm.processDataSourceVerify()):vm.data={}:"loginUser"===e.respone&&vm.$store.commit("setloginUser",e["loginUser"])})).catch((function(t){}))})).catch((function(t){}))}try{rulesConfig&&(vm.rules=Object.assign({},vm.rules,rulesConfig))}catch(error){}}))},methods:{clearLoading:function(){this.loading=!1},backToList:function(){var t=this,e=t.$router.history.current,a=e.query,n=e.path,i="?";for(var r in a["state_change"]="0",a["renew"]="",a)""!==a[r]&&"undefined"!==a[r]&&void 0!==a[r]&&(i+=r+"="+a[r]+"&");i+="renew="+Math.floor(100*Math.random())+1,t.$router.push({path:n.substring(0,n.indexOf("/editor/"))+i})},saveToData:function saveToData(cmdText){var vm=this,activeServiceInfo=!0,maxLevel="";vm.isConnected&&(vm.isConnected=!1);try{"opencps_serviceinfo"==vm.tableName&&(activeServiceInfo=vm.data["public_"],maxLevel=vm.data["maxLevel"])}catch(error){}if(vm.$refs.form.validate()){vm.loading=!0;var current=vm.$router.history.current,newQuery=current.query;try{"opencps_serviceinfo"==vm.tableName&&0==vm.id&&(vm.data["serviceCodeDVCQG"]=vm.serviceCodeDVCQG)}catch(error){}var dataPOST=Object.assign({},vm.data);delete dataPOST["expandoBridge"],delete dataPOST["modelAttributes"],delete dataPOST["stagedModelType"],newQuery.hasOwnProperty("col")&&newQuery.hasOwnProperty("pk")&&(dataPOST[newQuery["col"]]=newQuery["pk"]);var dataPost=new URLSearchParams,textPost={type:"admin",cmd:cmdText,respone:"detail",id:vm.id,code:vm.$router.history.current.params.tableName,data:dataPOST};dataPost.append("text",JSON.stringify(textPost)),axios__WEBPACK_IMPORTED_MODULE_6___default.a.post("/o/rest/v2/socket/web",dataPost,{}).then((function(response){toastr__WEBPACK_IMPORTED_MODULE_7___default.a.success("Thao tác thực hiện thành công");var dataObj=response.data;if(vm.dataSocket[dataObj.respone]=dataObj[dataObj.respone],vm.dataSocket[dataObj.respone]=dataObj[dataObj.respone],"detail"===dataObj.respone?null!==vm.dataSocket["detail"]&&void 0!==vm.dataSocket["detail"]&&Array.isArray(vm.dataSocket["detail"])?(0===vm.dataSocket["detail"].length?vm.data={}:vm.data=vm.dataSocket[dataObj.respone][0],vm.processDataSourceVerify()):vm.data={}:"loginUser"===dataObj.respone&&vm.$store.commit("setloginUser",dataObj["loginUser"]),"tableConfig"===dataObj.respone&&null!==vm.dataSocket["tableConfig"]&&void 0!==vm.dataSocket["tableConfig"]&&(vm.detailForm=eval("( "+vm.dataSocket["tableConfig"]["detailColumns"]+" )"),vm.processDataSource()),vm.loading=!1,"200"===dataObj["status"]&&"get"!==dataObj["cmd"]&&"cmd_ide"!==dataObj["cmd"]){var _current=vm.$router.history.current,_newQuery=_current.query,currentPath=_current.path,queryString="?";for(var key in _newQuery["state_change"]="0",_newQuery["renew"]="",_newQuery)""!==_newQuery[key]&&"undefined"!==_newQuery[key]&&void 0!==_newQuery[key]&&(queryString+=key+"="+_newQuery[key]+"&");queryString+="renew="+Math.floor(100*Math.random())+1,vm.$router.push({path:currentPath.substring(0,currentPath.indexOf("/editor/"))+queryString})}else"200"===dataObj["status"]&&"cmd_ide"===dataObj["cmd"]&&(vm.snackbarsuccess=!0,vm.data={});if("api"===dataObj["type"]&&"200"===dataObj["status"]&&(vm.pullCounter=vm.pullCounter-1,0===vm.pullCounter&&(vm.pullOk=!0)),"opencps_serviceinfo"==vm.tableName&&0!=vm.id){var postData={serviceInfoId:vm.id,serviceCodeDVCQG:vm.serviceCodeDVCQG,public:activeServiceInfo,maxLevel:maxLevel};vm.$store.dispatch("updateServiceInfo",postData).then((function(t){}))}})).catch((function(t){}))}},processRules:function processRules(rulesStr,itemData){var maxLength,syntaxErrorInput=!1,vm=this;!itemData.hasOwnProperty("type")||"text-fields"!==itemData.type&&"textarea"!==itemData.type||(maxLength=500,"textarea"===itemData.type&&(maxLength=2e3),itemData.hasOwnProperty("model")&&(itemData.model.endsWith("Code")||itemData.model.endsWith("No")||itemData.model.endsWith("Id")||"menuGroup"==itemData.model)&&(maxLength=75),"order"==itemData.model&&(maxLength=10),syntaxErrorInput=!0);var rulesInput=[];if(rulesStr){var hasRuleVarChar=rulesStr.indexOf("varchar")>=0;rulesInput=eval("( "+rulesStr+" )"),2e3!=maxLength||hasRuleVarChar||rulesInput.push(vm.rules.varchar2000),500!=maxLength||hasRuleVarChar||rulesInput.push(vm.rules.varchar500),75!=maxLength||hasRuleVarChar||rulesInput.push(vm.rules.varchar75),10!=maxLength||hasRuleVarChar||rulesInput.push(vm.rules.varchar10)}else 2e3==maxLength&&rulesInput.push(vm.rules.varchar2000),500==maxLength&&rulesInput.push(vm.rules.varchar500),75==maxLength&&rulesInput.push(vm.rules.varchar75),10==maxLength&&rulesInput.push(vm.rules.varchar10);return syntaxErrorInput&&rulesInput.push(vm.rules.syntaxError),rulesInput},getMaxLength:function(t){var e;return!t.hasOwnProperty("type")||"text-fields"!==t.type&&"textarea"!==t.type||(e=500,"textarea"===t.type&&(e=2e3),t.hasOwnProperty("model")&&(t.model.endsWith("Code")||t.model.endsWith("No")||t.model.endsWith("Id")||"menuGroup"==t.model)&&(e=75),"order"==t.model&&(e=10)),t.hasOwnProperty("maxLength")&&t.maxLength&&(e=t.maxLength),e},formatDataInput:function(t){var e=this;e.data[t["model"]]=e.data[t["model"]]?String(e.data[t["model"]]).trim():""},getCurrentDate:function(){var t=new Date;return"".concat(t.getFullYear(),"-").concat((t.getMonth()+1).toString().padStart(2,"0"),"-").concat(t.getDate().toString().padStart(2,"0"))},validateMaxlength:function(t){var e=this;t.hasOwnProperty("maxLength")&&t.maxLength&&(e.data[t["model"]]=e.data[t["model"]]?String(e.data[t["model"]]).trim():"",e.data[t["model"]]=e.data[t["model"]]?e.data[t["model"]].substring(0,t.maxLength):"")},processChangeDataSource:function(t,e){var a=this;if(e.hasOwnProperty("concatina")&&(a.pullOk=!1,a.pullCounter=a.pullCounter+1,"loginUser"!==e.concatina["datasource_key"])){var n=new URLSearchParams,i={type:"api",cmd:"get",respone:e.concatina["datasource_key"],api:e.concatina["datasource_api"]+"?"+e.concatina["query"]+"="+t,headers:{Token:a.getAuthToken(),groupId:a.getScopeGroupId(),USER_ID:a.getUserId()}};n.append("text",JSON.stringify(i)),axios__WEBPACK_IMPORTED_MODULE_6___default.a.post("/o/rest/v2/socket/web",n,{}).then((function(t){var e=t.data;if(a.dataSocket[e.respone]=e[e.respone],"200"===e["status"]&&"get"!==e["cmd"]&&"cmd_ide"!==e["cmd"]){var n=a.$router.history.current,i=n.query,r=n.path,o="?";for(var s in i["state_change"]="0",i["renew"]="",i)""!==i[s]&&"undefined"!==i[s]&&void 0!==i[s]&&(o+=s+"="+i[s]+"&");o+="renew="+Math.floor(100*Math.random())+1,a.$router.push({path:r.substring(0,r.indexOf("/editor/"))+o})}else"200"===e["status"]&&"cmd_ide"===e["cmd"]&&(a.snackbarsuccess=!0,a.data={});"api"===e["type"]&&"200"===e["status"]&&(a.pullCounter=a.pullCounter-1,0===a.pullCounter&&(a.pullOk=!0))})).catch((function(t){}))}},processDataSourceVerify:function(){var t=this;for(var e in t.detailForm)t.detailForm[e].hasOwnProperty("datasource_api")&&t.detailForm[e].hasOwnProperty("datasource_key")&&t.data.hasOwnProperty(t.detailForm[e]["model"])&&String(t.data[t.detailForm[e]["model"]]).startsWith("[")&&(t.data[t.detailForm[e]["model"]]=JSON.parse(t.data[t.detailForm[e]["model"]]))},processDataSource:function(){var t=this,e=t.$router.history.current,a=e.query;for(var n in t.detailForm){if(t.detailForm[n].hasOwnProperty("datasource_api")&&t.detailForm[n].hasOwnProperty("datasource_key")){t.pullOk=!1,t.pullCounter=t.pullCounter+1;var i=t.detailForm[n]["datasource_api"];if(t.detailForm[n]["dependency"]&&t.detailForm[n].hasOwnProperty("pk")&&(i=i+"?pk="+t.id+"&col="+t.detailForm[n]["pk"]),"loginUser"!==t.detailForm[n]["datasource_key"]){var r=new URLSearchParams,o={type:"api",cmd:"get",respone:t.detailForm[n]["datasource_key"],api:i,headers:{Token:t.getAuthToken(),groupId:t.getScopeGroupId(),USER_ID:t.getUserId()}};r.append("text",JSON.stringify(o)),axios__WEBPACK_IMPORTED_MODULE_6___default.a.post("/o/rest/v2/socket/web",r,{}).then((function(e){var a=e.data;if(t.dataSocket[a.respone]=a[a.respone],"200"===a["status"]&&"get"!==a["cmd"]&&"cmd_ide"!==a["cmd"]){var n=t.$router.history.current,i=n.query,r=n.path,o="?";for(var s in i["state_change"]="0",i["renew"]="",i)""!==i[s]&&"undefined"!==i[s]&&void 0!==i[s]&&(o+=s+"="+i[s]+"&");o+="renew="+Math.floor(100*Math.random())+1,t.$router.push({path:r.substring(0,r.indexOf("/editor/"))+o})}else"200"===a["status"]&&"cmd_ide"===a["cmd"]&&(t.snackbarsuccess=!0,t.data={});"api"===a["type"]&&"200"===a["status"]&&(t.pullCounter=t.pullCounter-1,0===t.pullCounter&&(t.pullOk=!0))})).catch((function(t){}))}}"opencps_dictitem"===t.tableName&&"dictCollectionId"===t.detailForm[n]["model"]&&a.hasOwnProperty("dictCollectionId")&&a["dictCollectionId"]&&(t.data[t.detailForm[n]["model"]]=Number(a.dictCollectionId))}},doDeactiveAccount:function(){var t=this,e={id:t.detailData[0]["mappingUserId"],data:{locked:t.password}};t.$store.dispatch("deactiveAccount",e).then((function(e){t.snackbarsuccess=!0}))},doChangePassWord:function(){var t=this;if(t.$refs.form_2.validate()){var e=confirm("Bạn có muốn đổi mật khẩu?");if(e){var a={id:t.detailData[0]["mappingUserId"]?t.detailData[0]["mappingUserId"]:t.mappingUserIdCurrent,data:{password:t.password}};t.$store.dispatch("changePassUserAccount",a).then((function(e){t.snackbarsuccess=!0}))}}},doChangeStatusAccount:function(t){var e=this,a="Bạn có muốn khoá tài khoản này?";t&&(a="Bạn có muốn mở khoá tài khoản này?");var n=confirm(a);if(n){var i={id:e.detailData[0]["mappingUserId"]?e.detailData[0]["mappingUserId"]:e.mappingUserIdCurrent,data:{locked:!t}};e.$store.dispatch("doChangeStatusAccount",i).then((function(t){e.snackbarsuccess=!0}))}else setTimeout((function(){e.deactiveAccountFlagBoolean=!t}),10)},showAccount:function(t){var e=this;if(0===e.detailData[0]["mappingUserId"]||"org.opencps.usermgt.model.Applicant"===e.detailData[0]["modelClassName"]&&0!==e.detailData[0]["mappingUserId"]&&e.detailData[0]["activationCode"]){var a="org.opencps.usermgt.model.Applicant"===e.detailData[0]["modelClassName"]?e.detailData[0]["contactEmail"]:e.detailData[0]["email"],n="org.opencps.usermgt.model.Applicant"===e.detailData[0]["modelClassName"]?"applicant":"employee",i={type:"org.opencps.usermgt.model.Applicant"===e.detailData[0]["modelClassName"]?"applicant":"employee",id:e.id};e.$store.dispatch("getUserDetail",i).then((function(r){if(!r["mappingUser"]||"org.opencps.usermgt.model.Applicant"===e.detailData[0]["modelClassName"]&&r["mappingUser"]&&e.detailData[0]["activationCode"])if(""===t["email"])alert("Cấp địa chỉ email trước khi tạo tài khoản.");else{var o="applicant"===n?"Bạn có muốn cấp tài khoản sử dụng cho công dân, doanh nghiệp này?":"Bạn có muốn cấp tài khoản sử dụng cho nhân sự này?",s=confirm(o);if(s){var c={type:n,id:e.id,data:{email:a,screenName:"",exist:!1}};e.$store.dispatch("createUserAccount",c).then((function(n){e.$store.dispatch("getUserDetail",i).then((function(t){e.mappingUserIdCurrent=t["mappingUser"]["userId"],e.screenLogin=t["mappingUser"]["screenName"],e.emailLogin=a})),e.deactiveAccountFlag=n["deactiveAccountFlag"],0===e.deactiveAccountFlag?e.deactiveAccountFlagBoolean=!0:e.deactiveAccountFlagBoolean=!1,e.layoutNameDynamic=t["label"],e.rightAccount=!e.rightAccount}))}}else e.screenLogin=r["mappingUser"]["screenName"],e.emailLogin=a,e.deactiveAccountFlagBoolean=!1,e.layoutNameDynamic=t["label"],e.rightAccount=!e.rightAccount}))}else e.$store.dispatch("getUserAccount",e.detailData[0]["mappingUserId"]).then((function(a){e.screenLogin=a["screenName"],e.emailLogin=a["email"],e.deactiveAccountFlag=a["deactiveAccountFlag"],0===e.deactiveAccountFlag?e.deactiveAccountFlagBoolean=!0:e.deactiveAccountFlagBoolean=!1,e.layoutNameDynamic=t["label"],e.rightAccount=!e.rightAccount}))},showAttached:function(t){var e=this;e.layoutNameDynamic=t["label"],e.pickItem=t,"opencps_deliverabletype"===e.tableName&&(e.pickItem["fileTemplateId"]=e.data["fileTemplateId"],e.pickItem["deliverableTypeId"]=e.data["deliverableTypeId"]),e.rightAttached=!e.rightAttached},unlock:function(){var t=this,e={};"org.opencps.usermgt.model.Employee"===t.data.modelClassName&&(e={email:t.data.email,mappingUserId:t.data.mappingUserId}),"org.opencps.usermgt.model.Applicant"===t.data.modelClassName&&(e={email:t.data.contactEmail,mappingUserId:t.data.mappingUserId});var a=new URLSearchParams;a.append("email",JSON.stringify(e.email)),a.append("mappingUserId",JSON.stringify(e.mappingUserId)),axios__WEBPACK_IMPORTED_MODULE_6___default.a.post("/o/rest/v2/users/lockin",a).then((function(e){t.snackbarsuccess=!0})).catch((function(){}))},activeAcount:function(){var t=this;axios__WEBPACK_IMPORTED_MODULE_6___default.a.post("/o/rest/v2/applicants/"+t.data.applicantId+"/active").then((function(e){t.snackbarsuccess=!0})).catch((function(){t.snackbarerror=!0}))},showChangeEmail:function(){var t=this;t.dialogChangeMail=!0,"org.opencps.usermgt.model.Employee"===t.data.modelClassName&&(t.oldEmail=t.data.email),"org.opencps.usermgt.model.Applicant"===t.data.modelClassName&&(t.oldEmail=t.data.contactEmail),t.newEmail="",t.$refs.formChangeMail.resetValidation()},changeEmail:function(){var t=this;if(t.$refs.formChangeMail.validate()){var e={};"org.opencps.usermgt.model.Employee"===t.data.modelClassName&&(e={oldEmail:t.data.email,newEmail:t.newEmail}),"org.opencps.usermgt.model.Applicant"===t.data.modelClassName&&(e={oldEmail:t.data.contactEmail,newEmail:t.newEmail});var a=new URLSearchParams;a.append("oldEmail",e.oldEmail),a.append("newEmail",e.newEmail),axios__WEBPACK_IMPORTED_MODULE_6___default.a.post("/o/rest/v2/applicants/updatemail",a).then((function(e){t.dialogChangeMail=!1,e.data.user&&e.data.user.hasOwnProperty("emailAddess")&&e.data.user.emailAddess?t.snackbarsuccess=!0:t.snackbarerror=!0})).catch((function(){t.snackbarerror=!0}))}},isJsonString:function(t){try{JSON.parse(t)}catch(e){return!1}return!0},viewForm:function viewForm(){var vm=this,formScript,formData;try{formScript=eval("("+vm.data.formScript+")")}catch(error){return void(""===vm.data.formScript?toastr__WEBPACK_IMPORTED_MODULE_7___default.a.error("Chưa có cấu hình mã tạo form"):toastr__WEBPACK_IMPORTED_MODULE_7___default.a.error("Lỗi cấu hình mã tạo form"))}formData={};try{formScript.data=eval("("+vm.data.sampleData+")"),vm.viewFormInput=!0,vm.dialogEform=!0,setTimeout((function(){window.$("#formInput").empty(),window.$("#formInput").alpaca(formScript)}),200)}catch(error){if(""!==vm.data.sampleData)return void toastr__WEBPACK_IMPORTED_MODULE_7___default.a.error("Lỗi cấu hình dữ liệu mẫu");toastr__WEBPACK_IMPORTED_MODULE_7___default.a.error("Chưa có cấu hình dữ liệu mẫu"),formScript.data={},vm.viewFormInput=!0,vm.dialogEform=!0,setTimeout((function(){window.$("#formInput").empty(),window.$("#formInput").alpaca(formScript)}),200)}},viewPdf:function viewPdf(t){var vm=this;if("opencps_dossierpart"===vm.tableName&&""===vm.data.formReport||"opencps_documenttype"===vm.tableName&&""===vm.data.documentScript)toastr__WEBPACK_IMPORTED_MODULE_7___default.a.error("Chưa có cấu hình mã thiết kế xml jasper");else{var formData={};try{if(t){var control=window.$("#formInput").alpaca("get");formData=control.getValue()}else formData=vm.data.sampleData?eval("("+vm.data.sampleData+")"):{}}catch(error){}vm.loadingPdf=!0;var options={headers:{groupId:window.themeDisplay?window.themeDisplay.getScopeGroupId():"","Content-Type":"application/x-www-form-urlencoded"},responseType:"blob"},formReport;formData||(formData={}),"opencps_dossierpart"===vm.tableName&&(formReport=vm.data.formReport),"opencps_documenttype"===vm.tableName&&(formReport=vm.data.documentScript);var dataCreate=new URLSearchParams;dataCreate.append("scriptStr",formReport),dataCreate.append("jsonDataStr",JSON.stringify(formData)),axios__WEBPACK_IMPORTED_MODULE_6___default.a.post("/o/rest/v2/jaspers/preview",dataCreate,options).then((function(t){vm.loadingPdf=!1,vm.dialogEform=!0,vm.viewFormInput=!1;var e=t.data,a=window.URL.createObjectURL(e);setTimeout((function(){document.getElementById("pdfPreview").src=a}),200)})).catch((function(t){vm.loadingPdf=!1}))}}}}},1648:function(t,e,a){"use strict";var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-layout",{staticClass:"text-center",staticStyle:{position:"relative"},attrs:{wrap:""}},[a("v-flex",{staticClass:"control-section uploader file-preview py-0",staticStyle:{position:"relative"},attrs:{xs12:""}},[a("div",{staticClass:"control_wrapper"},[a("div",{attrs:{id:"dropAreaForm"}},[a("span",{staticClass:"droparea",staticStyle:{display:"none"},attrs:{id:"drop"}},[t._v(" Kéo thả tệp tin hoặc "),a("a",{staticStyle:{right:"20px",color:"#0064c7",position:"absolute","text-decoration":"none","font-weight":"700"},attrs:{href:"javascript:;",id:"browseForm"}},[t._v("Chọn từ máy tính   📤")])]),a("ejs-uploader",{ref:"uploadObj",attrs:{name:"UploadFiles",allowedExtensions:t.extensions,asyncSettings:t.path,dropAreaForm:t.dropAreaForm,success:t.onSuccess,removing:t.onFileRemove,uploading:t.addHeaders}})],1),t.fileTotal>0?a("div",{staticClass:"e-upload-done-list"},[a("ul",{staticClass:"e-upload-files"},[a("li",{staticClass:"e-upload-file-list"},[a("div",{staticClass:"container py-2",staticStyle:{position:"relative"}},[a("span",{staticClass:"wrapper layout row wrap",staticStyle:{"line-height":"10px"}},[a("span",{class:["icon sf-icon-txt"]}),a("div",{staticClass:"name file-name",staticStyle:{"line-height":"42px","padding-left":"10px"}},[t._v("\n                File cấu hình FORM\n              ")]),a("v-btn",{staticStyle:{position:"absolute",right:"5px",top:"8px"},attrs:{flat:"",icon:"",color:"primary",href:t.avatarData,target:"_blank",loading:t.loading,disabled:t.loading}},[a("v-icon",{attrs:{size:"14"}},[t._v("link")])],1)],1)])])])]):t._e()])])],1)},i=[],r=a("a026"),o=a("e0e8");a("7de8");r["default"].use(o["a"]);var s={data:function(){return{fileTotal:0,noAvatar:!0,avatarData:"",loadingRemove:!1,loading:!1,fileTemplateData:[],fileTemplateTotal:0,path:{saveUrl:"",removeUrl:""},extensions:".txt",dropAreaForm:"dropAreaForm",rawData:[],className:""}},props:["pickItem","pk","code"],created:function(){var t=this;t.$nextTick((function(){this.loadImageComponent()}))},mounted:function(){this.path={saveUrl:this.pickItem["upload_api"]+"FORM/"+this.pk,removeUrl:this.pickItem["remove_api"]+"FORM/"+this.pk},this.className=this.pickItem["class_name"],document.getElementById("browseForm").onclick=function(){return document.getElementsByClassName("e-file-select-wrap")[0].querySelector("button").click(),!1}},methods:{addHeaders:function(t){var e=this;t.currentRequest.setRequestHeader("Token",e.getAuthToken()),t.currentRequest.setRequestHeader("groupId",e.getScopeGroupId())},loadImageComponent:function(){var t=this;t.fileTotal=0;var e={pk:t.pk,className:t.className};t.noAvatar=!0,t.avatarData="",t.$store.dispatch("getImageComponent",e).then((function(e){if(""!==e&&null!==e){t.noAvatar=!1;var a="";null!==window.themeDisplay&&void 0!==window.themeDisplay&&(a=themeDisplay.getPortalURL()),t.avatarData=a+e,t.fileTotal=1}}))},onSuccess:function(){var t=this;setTimeout((function(){document.getElementById("dropAreaForm").querySelectorAll(".e-upload-success").forEach((function(t){return t.parentNode.removeChild(t)})),t.loadImageComponent()}),2e3)},onFileRemove:function(t){t.postRawFile=!1}}},c=s,l=a("2877"),d=Object(l["a"])(c,n,i,!1,null,null,null);e["a"]=d.exports},"2be2":function(t,e,a){"use strict";var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-layout",{attrs:{wrap:""}},[a("v-flex",{staticClass:"control-section uploader customdroparea",staticStyle:{position:"relative"},attrs:{xs12:""}},[a("div",{staticClass:"control_wrapper"},[a("div",{staticClass:"sample_wrapper"},[a("div",{attrs:{id:"dropArea"}},[a("span",{staticClass:"droparea",attrs:{id:"drop"}},[a("a",{attrs:{href:"javascript:;",id:"browse"}},[t._v("Chọn từ máy tính   📤")])]),a("ejs-uploader",{ref:"uploadObj",attrs:{id:"templateupload",name:"UploadFiles",allowedExtensions:t.extensions,asyncSettings:t.path,dropArea:t.dropArea,success:t.onSuccess,removing:t.onFileRemove,uploading:t.addHeaders,selected:t.onFileSelect}}),t.fileTemplateTotal>0&&"opencps_serviceinfo"===t.code?a("div",{staticClass:"e-upload-done-list"},[a("ul",{staticClass:"e-upload-files"},t._l(t.fileTemplateData,(function(e,n){return a("li",{key:n,staticClass:"e-upload-file-list"},[a("div",{staticClass:"container",staticStyle:{position:"relative"}},[a("span",{staticClass:"wrapper",staticStyle:{"line-height":"10px"}},[a("span",{class:["icon sf-icon-"+e["extension"]]}),a("div",{staticClass:"name file-name"},[a("span",[t._v(t._s(e["templateName"]))]),a("p",{staticStyle:{"margin-top":"5px","font-size":"10px","margin-bottom":"0"}},[t._v("\n                            ( "+t._s((e["size"]/1048576).toFixed(2))+" MB )\n                          ")])]),a("v-btn",{staticStyle:{position:"absolute",right:"5px",top:"32px"},attrs:{flat:"",icon:"",color:"primary",loading:t.loading,disabled:t.loading},nativeOn:{click:function(a){return t.processDownloadFileAttach(e)}}},[a("v-icon",{attrs:{size:"14"}},[t._v("link")])],1),a("v-btn",{staticStyle:{position:"absolute",right:"5px",top:"52px"},attrs:{flat:"",icon:"",color:"primary"},nativeOn:{click:function(a){return t.processUpdateFileAttach(e,n)}}},[a("v-icon",{attrs:{size:"14"}},[t._v("create")])],1),a("v-btn",{staticStyle:{position:"absolute",right:"5px"},attrs:{flat:"",icon:"",color:"red darken-3",loading:t.loadingRemove,disabled:t.loadingRemove},nativeOn:{click:function(a){return t.processDeleteFileAttach(e)}}},[a("v-icon",{attrs:{size:"14"}},[t._v("delete")])],1),a("v-layout",{attrs:{row:"",wrap:""}},[a("v-form",{ref:"form",refInFor:!0,attrs:{"lazy-validation":""},model:{value:t.valid,callback:function(e){t.valid=e},expression:"valid"}},[a("v-layout",{staticClass:"mt-3",attrs:{wrap:""}},[a("v-flex",{attrs:{xs12:"",md4:""}},[a("input",{ref:"refFileUpdate",refInFor:!0,staticStyle:{display:"none"},attrs:{type:"file",id:"inputFileUpdate"},on:{change:t.onFileUpdatePicked}}),a("v-text-field",{attrs:{label:"Số biểu mẫu"},on:{change:function(a){return t.processUpdateDataFileAttach(a,e,n)}},model:{value:e["fileTemplateNo"],callback:function(a){t.$set(e,"fileTemplateNo",a)},expression:"item['fileTemplateNo']"}})],1),a("v-flex",{attrs:{xs12:"",md8:""}},[a("v-text-field",{attrs:{label:"Tên biểu mẫu"},on:{change:function(a){return t.processUpdateDataFileAttach(a,e,n)}},model:{value:e["templateName"],callback:function(a){t.$set(e,"templateName",a)},expression:"item['templateName']"}})],1),a("v-flex",{attrs:{xs12:"",md4:""}},[a("v-text-field",{attrs:{label:"Mã pattern"},on:{change:function(a){return t.changeDataEform(e)}},model:{value:e["EFormNoPattern"],callback:function(a){t.$set(e,"EFormNoPattern",a)},expression:"item['EFormNoPattern']"}})],1),a("v-flex",{staticClass:"py-0",attrs:{xs12:"",md8:""}},[a("v-checkbox",{staticClass:"d-inline-block mt-3",attrs:{label:"Form trực tuyến",color:"primary","hide-details":""},on:{change:function(a){return t.changeDataEform(e)}},model:{value:e["EForm"],callback:function(a){t.$set(e,"EForm",a)},expression:"item['EForm']"}})],1)],1)],1)],1)],1)]),a("div",{staticClass:"px-4 mt-2"},[a("input",{staticStyle:{display:"none"},attrs:{type:"file",id:"fileFormScript",accept:"application/json"},on:{change:function(a){return t.onUploadFileScript(e)}}}),a("span",[a("v-icon",{attrs:{size:"14",color:"#0064c7"}},[t._v("insert_link")])],1),a("span",{staticClass:"ml-2"},[t._v("File formScript - \n                        "),a("span",{staticStyle:{"font-style":"italic",color:"green"}},[t._v(t._s(Number(e["formScriptFileId"])?e["fileTemplateNo"]+".json":"(chưa có)"))])]),a("v-tooltip",{staticClass:"ml-2",attrs:{left:""}},[a("v-btn",{staticClass:"mx-0 my-0",attrs:{slot:"activator",icon:""},on:{click:function(e){return t.pickFileScript()}},slot:"activator"},[a("v-badge",[a("v-icon",{attrs:{size:"24",color:"#004b94"}},[t._v("cloud_upload")])],1)],1),a("span",[t._v("Tải lên formScript")])],1)],1),a("div",{staticClass:"px-4",staticStyle:{"border-bottom":"1px dashed #c3c3cd"}},[a("input",{staticStyle:{display:"none"},attrs:{type:"file",id:"fileFormReport",accept:"text/xml"},on:{change:function(a){return t.onUploadFileReport(e)}}}),a("v-icon",{attrs:{size:"14",color:"#0064c7"}},[t._v("insert_link")]),a("span",{staticClass:"ml-2"},[t._v("File formReport - \n                        "),a("span",{staticStyle:{"font-style":"italic",color:"green"}},[t._v(t._s(Number(e["formReportFileId"])?e["fileTemplateNo"]+".xml":"(chưa có)"))])]),a("v-tooltip",{staticClass:"ml-2",attrs:{left:""}},[a("v-btn",{staticClass:"mx-0 my-0",attrs:{slot:"activator",icon:""},on:{click:function(e){return t.pickFileReport()}},slot:"activator"},[a("v-badge",[a("v-icon",{attrs:{size:"24",color:"#004b94"}},[t._v("cloud_upload")])],1)],1),a("span",[t._v("Tải lên formReport")])],1)],1)])})),0)]):t._e(),t.fileTemplateTotal>0&&"opencps_serviceinfo"!==t.code?a("div",{staticClass:"e-upload-done-list"},[a("ul",{staticClass:"e-upload-files"},t._l(t.fileTemplateData,(function(e,n){return a("li",{key:n,staticClass:"e-upload-file-list"},[a("div",{staticClass:"container",staticStyle:{position:"relative","min-height":"75px"}},[a("span",{staticClass:"wrapper",staticStyle:{"line-height":"10px"}},[a("span",{class:["icon sf-icon-"+e["extension"]]}),a("div",{staticClass:"name file-name"},[a("span",[t._v(t._s(e["fileName"]))]),a("p",{staticStyle:{"margin-top":"5px","font-size":"10px","margin-bottom":"0"}},[t._v("\n                          ( "+t._s((e["size"]/1048576).toFixed(2))+" MB )\n                        ")])]),a("v-btn",{staticStyle:{position:"absolute",right:"5px",top:"32px"},attrs:{flat:"",icon:"",color:"primary",loading:t.loading,disabled:t.loading},nativeOn:{click:function(a){return t.processDownloadFileAttach(e)}}},[a("v-icon",{attrs:{size:"14"}},[t._v("link")])],1),"opencps_deliverabletype"!==t.code?a("v-btn",{staticStyle:{position:"absolute",right:"5px",top:"32px"},attrs:{flat:"",icon:"",color:"primary"},nativeOn:{click:function(a){return t.processUpdateFileAttach(e,n)}}},[a("v-icon",{attrs:{size:"14"}},[t._v("create")])],1):t._e(),"opencps_deliverabletype"!==t.code?a("v-btn",{staticStyle:{position:"absolute",right:"5px"},attrs:{flat:"",icon:"",color:"red darken-3",loading:t.loadingRemove,disabled:t.loadingRemove},nativeOn:{click:function(a){return t.processDeleteFileAttach(e)}}},[a("v-icon",{attrs:{size:"14"}},[t._v("delete")])],1):t._e()],1)])])})),0)]):t._e()],1)])])])],1)},i=[],r=a("a026"),o=a("e0e8"),s=a("7de8"),c=a("bc3a"),l=a.n(c),d=a("854a"),u=a.n(d);r["default"].use(u.a),r["default"].use(o["a"]);var p={data:function(){return{loadingRemove:!1,loading:!1,valid:!1,fileTemplateData:[],fileTemplateTotal:0,path:{saveUrl:"",removeUrl:""},extensions:".pdf, .txt, .rtf, .doc, .docx, .xls, .xlsx, .jpg, .png",dropArea:"dropArea",rawData:[],className:"",fileUpdate:null,indexFile:null}},props:["pickItem","pk","code"],created:function(){var t=this;t.$nextTick((function(){t.loadFileTemplate()}))},mounted:function(){var t=this;"opencps_deliverabletype"===this.code?(1===this.pickItem.fileTemplateId||this.pickItem.fileTemplateId,this.path={saveUrl:"",removeUrl:""}):this.path={saveUrl:this.pickItem["upload_api"]+"/"+this.pk,removeUrl:this.pickItem["remove_api"]+"/"+this.pk},this.className=this.pickItem["class_name"],document.getElementById("browse").onclick=function(){return document.getElementsByClassName("e-file-select-wrap")[0].querySelector("button").click(),!1},document.getElementById("dropArea").onclick=function(e){if(e.target.classList.contains("e-file-delete-btn"))for(var a=0;a<t.$refs.uploadObj.getFilesData().length;a++)e.target.closest("li").getAttribute("data-file-name")===t.$refs.uploadObj.getFilesData()[a].name&&t.$refs.uploadObj.remove(t.$refs.uploadObj.getFilesData()[a]);else e.target.classList.contains("e-file-remove-btn")&&Object(s["s"])(e.target.closest("li"))}},methods:{addHeaders:function(t){var e=this;t.currentRequest.setRequestHeader("Token",e.getAuthToken()),t.currentRequest.setRequestHeader("groupId",e.getScopeGroupId())},loadFileTemplate:function(){var t=this;if("opencps_serviceinfo"===t.code)t.$store.dispatch("getServiceFileTemplate",t.pk).then((function(e){for(var a in t.fileTemplateData=e.data,t.fileTemplateTotal=e.total,t.fileTemplateData)t.rawData.push({fileTemplateNo:t.fileTemplateData[a]["fileTemplateNo"],serviceInfoId:t.fileTemplateData[a]["serviceInfoId"]});var n=document.getElementById("rightAttachedCounter");null!==n&&void 0!==n&&t.fileTemplateTotal>0&&(n.innerHTML="Tổng số: "+t.fileTemplateTotal+" ")})).catch((function(t){}));else if("opencps_deliverabletype"===t.code)t.fileTemplateData=[],t.$store.dispatch("getFileattachsVersions",t.pickItem.fileTemplateId).then((function(e){t.fileTemplateTotal=e.total;for(var a=0;a<e.data.length;a++)t.fileTemplateData.push(JSON.parse(e.data[a]))})).catch((function(t){}));else{var e={className:t.className,pk:t.pk};t.$store.dispatch("getAttachFileData",e).then((function(e){t.fileTemplateData=e.data,t.fileTemplateTotal=e.total;var a=document.getElementById("rightAttachedCounter");null!==a&&void 0!==a&&t.fileTemplateTotal>0&&(a.innerHTML="Tổng số: "+t.fileTemplateTotal+" ")})).catch((function(t){}))}},onSuccess:function(){var t=this;setTimeout((function(){document.getElementById("dropArea").querySelectorAll(".e-upload-success").forEach((function(t){return t.parentNode.removeChild(t)})),document.getElementById("dropArea").querySelectorAll(".e-upload .e-upload-files").forEach((function(t){return t.parentNode.removeChild(t)})),t.loadFileTemplate()}),2e3)},onFileRemove:function(t){t.postRawFile=!1},processDeleteFileAttach:function(t){var e=this;confirm("Bạn có chắc muốn xoá bản ghi này?")&&(e.loadingRemove=!0,e.$store.dispatch("removeServiceFileTemplate",t).then((function(){e.loadingRemove=!1,e.loadFileTemplate()})).catch((function(t){e.loadingRemove=!1,alert("Xoá file xảy ra lỗi."+t)})))},processDownloadFileAttach:function(t){var e=this;e.loading=!0,"opencps_deliverabletype"===e.code?e.$store.dispatch("detailFileAttachsVersions",t).then((function(){e.loading=!1})).catch((function(t){e.loading=!1,alert("Tải file xảy ra lỗi."+t)})):e.$store.dispatch("downloadServiceFileTemplate",t).then((function(){e.loading=!1})).catch((function(t){e.loading=!1,alert("Tải file xảy ra lỗi."+t)}))},processUpdateFileAttach:function(t,e){var a=this;a.fileUpdate=t,a.indexFile=e,document.getElementById("inputFileUpdate").click()},onFileUpdatePicked:function(){var t=this,e=event.target.files;if(e.length){var a=e[0],n={fileEntryId:t.fileUpdate.fileEntryId,file:a,fileName:e[0].name,fileType:e[0].type,fileSize:e[0].size};t.$store.dispatch("putFileAttach",n).then((function(){t.loading=!0;var a={item:t.rawData[t.indexFile],fileTemplateNo:t.fileUpdate["fileTemplateNo"],templateName:e[0].name};t.$store.dispatch("updateServiceFileTemplate",a).then((function(){t.loadFileTemplate(),t.loading=!1})).catch((function(e){t.loading=!1,alert("Tải file xảy ra lỗi."+e)}))})).catch((function(t){alert("Tải file xảy ra lỗi."+t),alert("Tải file xảy ra lỗi."+t)}))}},processUpdateDataFileAttach:function(t,e,a){var n=this;n.loading=!0;var i={item:n.rawData[a],fileTemplateNo:e["fileTemplateNo"],templateName:e["templateName"]};n.$store.dispatch("updateServiceFileTemplate",i).then((function(){n.loading=!1})).catch((function(t){n.loading=!1,alert("Tải file xảy ra lỗi."+t)}))},onFileSelect:function(t){var e=this,a={headers:{Accept:"application/json","Content-Type":"multipart/form-data"}},n=new FormData;if(n.append("UploadFiles",t.filesData[0].rawFile),l.a.post(e.path.saveUrl,n,a).then((function(t){u.a.success("Thực hiện thành công"),e.onSuccess()})).catch((function(t){u.a.error("Thực hiện thất bại")})),"opencps_deliverabletype"===e.code)if(1!==e.pickItem.fileTemplateId&&0!==e.pickItem.fileTemplateId){var i=t.filesData[0].rawFile,r={fileEntryId:e.pickItem.fileTemplateId,file:i,fileName:i.name,fileType:i.type,fileSize:i.size};e.$store.dispatch("putFileAttach",r).then((function(){e.loadFileTemplate()})).catch((function(t){alert("Tải file xảy ra lỗi."+t),alert("Tải file xảy ra lỗi."+t)}))}else{var o=t.filesData[0].rawFile,s={deliverableTypeId:e.pickItem.deliverableTypeId,file:o};e.$store.dispatch("postDeliverabletypes",s).then((function(t){e.pickItem["fileTemplateId"]=t.fileTemplateId,e.loadFileTemplate()})).catch((function(t){alert("Tải file xảy ra lỗi."+t),alert("Tải file xảy ra lỗi."+t)}))}},pickFileScript:function(){document.getElementById("fileFormScript").value="",document.getElementById("fileFormScript").click()},pickFileReport:function(){document.getElementById("fileFormReport").value="",document.getElementById("fileFormReport").click()},onUploadFileScript:function(t){var e=this,a=$('input[id="fileFormScript"]')[0].files;if(a){var n=a[0],i=n["name"];n["name"]&&(i=n["name"].replace(/\%/g,""),i=i.replace(/\//g,""),i=i.replace(/\\/g,""));var r=new FormData;n.size&&(r.append("fileScript",n,i),r.append("eFormNoPattern",t.EFormNoPattern),r.append("templateName",""),r.append("fileEntryId",""),r.append("formScriptFileId",""),r.append("eFormNamePattern",""),l.a.put("/o/rest/v2/serviceinfos/"+t.serviceInfoId+"/filetemplates/"+t.fileTemplateNo,r,{headers:{groupId:window.themeDisplay?window.themeDisplay.getScopeGroupId():"","Content-Type":"multipart/form-data"}}).then((function(t){u.a.success("Cập nhật thành công"),e.loadFileTemplate()})).catch((function(t){u.a.clear(),u.a.error("Yêu cầu của bạn thực hiện thất bại.")})))}},onUploadFileReport:function(t){var e=this,a=$('input[id="fileFormReport"]')[0].files;if(a){var n=a[0],i=n["name"];n["name"]&&(i=n["name"].replace(/\%/g,""),i=i.replace(/\//g,""),i=i.replace(/\\/g,""));var r=new FormData;n.size&&(r.append("fileReport",n,i),r.append("eFormNoPattern",t.EFormNoPattern),r.append("templateName",""),r.append("fileEntryId",""),r.append("formScriptFileId",""),r.append("eFormNamePattern",""),l.a.put("/o/rest/v2/serviceinfos/"+t.serviceInfoId+"/filetemplates/"+t.fileTemplateNo,r,{headers:{groupId:window.themeDisplay?window.themeDisplay.getScopeGroupId():"","Content-Type":"multipart/form-data"}}).then((function(t){u.a.success("Cập nhật thành công"),e.loadFileTemplate()})).catch((function(t){u.a.clear(),u.a.error("Yêu cầu của bạn thực hiện thất bại.")})))}},changeDataEform:function(t){setTimeout((function(){var e=new FormData;e.append("eForm",t["EForm"]),e.append("eFormNoPattern",t["EFormNoPattern"]),l.a.put("/o/rest/v2/serviceinfos/"+t.serviceInfoId+"/filetemplates/"+t.fileTemplateNo,e,{headers:{groupId:window.themeDisplay?window.themeDisplay.getScopeGroupId():"","Content-Type":"multipart/form-data"}}).then((function(t){u.a.success("Cập nhật thành công")})).catch((function(t){u.a.clear(),u.a.error("Yêu cầu của bạn thực hiện thất bại.")}))}),100)}}},v=p,m=a("2877"),h=Object(m["a"])(v,n,i,!1,null,null,null);e["a"]=h.exports},"3f3e":function(t,e,a){"use strict";var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",{staticStyle:{"text-align":"left",position:"absolute","line-height":"46px"}},[t._v("Tổng số "),a("span",{staticClass:"text-bold primary--text"},[t._v(t._s(t.total))]),t._v(" bản ghi. ")]),t.total>0?a("div",{staticClass:"vue-tiny-pagination pagination layout",staticStyle:{"justify-content":"flex-end","-webkit-justify-content":"flex-end"}},[a("div",{staticClass:"px-3 xs2 flex"},[a("v-autocomplete",{attrs:{items:t.totalPagesData,"item-text":"text","item-value":"value",autocomplete:""},on:{input:t.goToPage},model:{value:t.currentPage,callback:function(e){t.currentPage=e},expression:"currentPage"}})],1),a("ul",{staticClass:"tiny-pagination",class:t.customClass},[a("li",{staticClass:"page-item",class:t.classFirstPage},[a("button",{staticClass:"pagination__navigation",class:t.classFirstPage,on:{click:function(e){return e.preventDefault(),t.lastPageLast.apply(null,arguments)}}},[a("i",{staticClass:"material-icons icon",attrs:{"aria-hidden":"true"}},[t._v("first_page")])])]),a("li",{staticClass:"page-item",class:t.classFirstPage},[a("button",{staticClass:"pagination__navigation",class:t.classFirstPage,staticStyle:{"border-left":"0"},on:{click:function(e){return e.preventDefault(),t.lastPage.apply(null,arguments)}}},[a("i",{staticClass:"material-icons icon",attrs:{"aria-hidden":"true"}},[t._v("chevron_left")])])]),a("li",{staticClass:"page-item",class:t.classLastPage,staticStyle:{"margin-right":"0"}},[a("button",{staticClass:"pagination__navigation",class:t.classLastPage,staticStyle:{"border-left":"0"},on:{click:function(e){return e.preventDefault(),t.nextPage.apply(null,arguments)}}},[a("i",{staticClass:"material-icons icon",attrs:{"aria-hidden":"true"}},[t._v("chevron_right")])])]),a("li",{staticClass:"page-item",class:t.classLastPage},[a("button",{staticClass:"pagination__navigation",class:t.classLastPage,on:{click:function(e){return e.preventDefault(),t.nextPageLast.apply(null,arguments)}}},[a("i",{staticClass:"material-icons icon",attrs:{"aria-hidden":"true"}},[t._v("last_page")])])])])]):t._e()])},i=[],r="TinyPagination",o={name:r,props:{total:{type:Number,required:!0},page:{type:Number,default:1},lang:{type:String,default:"en"},customClass:{type:String},limits:{type:Array,default:function(){return[10,15,20,50,100]}},showLimit:{type:Boolean,default:!0}},data:function(){return{version:"0.2.1",currentPage:1,currentLimit:10,translations:{en:{prev:"Previous",title:"Page",next:"Next"}},availableLanguages:["en"]}},created:function(){this.currentPage=this.page},watch:{page:function(t){this.currentPage=parseInt(t)}},computed:{translation:function(){return this.availableLanguages.includes(this.lang)?this.translations[this.lang]:this.translations["en"]},totalPages:function(){return Math.ceil(this.total/this.currentLimit)},totalPagesData:function(){for(var t=[],e={},a=1;a<=this.totalPages;++a)e={value:a,text:"Trang "+a},t.push(e);return t},titlePage:function(){return"".concat(this.currentPage)},classFirstPage:function(){return{"c-not-allowed pagination__navigation--disabled":1===this.currentPage}},classLastPage:function(){return{"c-not-allowed pagination__navigation--disabled":this.currentPage===this.totalPages}}},methods:{nextPage:function(){this.currentPage!==this.totalPages&&(this.currentPage+=1,this.$emit("tiny:change-page",{page:this.currentPage}))},lastPage:function(){this.currentPage>1&&(this.currentPage-=1,this.$emit("tiny:change-page",{page:this.currentPage}))},nextPageLast:function(){this.currentPage=this.totalPages,this.$emit("tiny:change-page",{page:this.totalPages})},lastPageLast:function(){this.currentPage=1,this.$emit("tiny:change-page",{page:1})},goToPage:function(){this.$emit("tiny:change-page",{page:this.currentPage})},onLimitChange:function(){this.currentPage=1}}},s=o,c=a("2877"),l=Object(c["a"])(s,n,i,!1,null,null,null);e["a"]=l.exports},"505b":function(t,e,a){"use strict";var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-layout",{attrs:{row:"",wrap:""}},[a("v-flex",{staticClass:"control-section uploader file-preview py-0",staticStyle:{position:"relative"},attrs:{xs12:""}},[a("div",{staticClass:"control_wrapper"},[a("div",{staticStyle:{height:"250px",overflow:"auto",position:"relative",border:"1px dashed #949494","text-align":"center",padding:"15px","background-size":"cover"},style:"background-image: url("+t.avatarData+");",attrs:{id:"dropArea"}},[a("span",{staticStyle:{position:"absolute",left:"0",top:"0",height:"100%",width:"100%"},attrs:{id:"dropPreview"}},[a("a",{attrs:{href:"javascript:;",id:"browseAvata"}},[a("i",{staticClass:"v-icon material-icons",staticStyle:{"font-size":"54px",opacity:".2",position:"absolute",top:"0",right:"0"},attrs:{"aria-hidden":"true"}},[t._v("camera_alt")])])]),a("ejs-uploader",{ref:"uploadObj",attrs:{id:"imagePreview",name:"UploadFiles",allowedExtensions:t.extensions,asyncSettings:t.path,dropArea:t.dropArea,success:t.onSuccess,removing:t.onFileRemove,uploading:t.addHeaders}}),t.noAvatar?a("svg",{staticStyle:{width:"125px",margin:"0 auto","margin-top":"45px","enable-background":"new 0 0 563.43 563.43"},attrs:{version:"1.1",id:"Capa_1",xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",x:"0px",y:"0px",viewBox:"0 0 563.43 563.43","xml:space":"preserve"}},[a("path",{attrs:{d:"M280.79,314.559c83.266,0,150.803-67.538,150.803-150.803S364.055,13.415,280.79,13.415S129.987,80.953,129.987,163.756\n            S197.524,314.559,280.79,314.559z M280.79,52.735c61.061,0,111.021,49.959,111.021,111.021S341.851,274.776,280.79,274.776\n            s-111.021-49.959-111.021-111.021S219.728,52.735,280.79,52.735z"}}),a("path",{attrs:{d:"M19.891,550.015h523.648c11.102,0,19.891-8.789,19.891-19.891c0-104.082-84.653-189.198-189.198-189.198H189.198\n            C85.116,340.926,0,425.579,0,530.124C0,541.226,8.789,550.015,19.891,550.015z M189.198,380.708h185.034\n            c75.864,0,138.313,56.436,148.028,129.524H41.17C50.884,437.607,113.334,380.708,189.198,380.708z"}}),a("g"),a("g"),a("g"),a("g"),a("g"),a("g"),a("g"),a("g"),a("g"),a("g"),a("g"),a("g"),a("g"),a("g"),a("g")]):t._e()],1)])])],1)},i=[],r=a("a026"),o=a("e0e8");a("7de8");r["default"].use(o["a"]);var s={data:function(){return{noAvatar:!0,avatarData:"",loadingRemove:!1,loading:!1,fileTemplateData:[],fileTemplateTotal:0,path:{saveUrl:"",removeUrl:""},extensions:".jpg, .png",dropArea:"dropArea",rawData:[],className:""}},props:["pickItem","pk","code"],created:function(){var t=this;t.$nextTick((function(){this.pk&&(this.className=this.pickItem["class_name"],this.loadImageComponent())}))},mounted:function(){this.path={saveUrl:this.pickItem["upload_api"]+"/"+this.pk,removeUrl:this.pickItem["remove_api"]+"/"+this.pk},this.className=this.pickItem["class_name"],document.getElementById("browseAvata").onclick=function(){return document.getElementsByClassName("e-file-select-wrap")[0].querySelector("button").click(),!1}},watch:{pk:function(t){this.path={saveUrl:this.pickItem["upload_api"]+"/"+this.pk,removeUrl:this.pickItem["remove_api"]+"/"+this.pk},this.className=this.pickItem["class_name"],this.loadImageComponent()}},methods:{addHeaders:function(t){var e=this;t.currentRequest.setRequestHeader("Token",e.getAuthToken()),t.currentRequest.setRequestHeader("groupId",e.getScopeGroupId())},loadImageComponent:function(){var t=this,e={pk:t.pk,className:t.className};t.noAvatar=!0,t.avatarData="",t.$store.dispatch("getImageComponent",e).then((function(e){if(""!==e&&null!==e){t.noAvatar=!1;var a="";null!==window.themeDisplay&&void 0!==window.themeDisplay&&(a=themeDisplay.getPortalURL()),t.avatarData=a+e}}))},onSuccess:function(){var t=this;setTimeout((function(){document.getElementById("dropArea").querySelectorAll(".e-upload-success").forEach((function(t){return t.parentNode.removeChild(t)})),t.loadImageComponent()}),2e3)},onFileRemove:function(t){t.postRawFile=!1}}},c=s,l=a("2877"),d=Object(l["a"])(c,n,i,!1,null,null,null);e["a"]=d.exports},"56d7":function(t,e,a){"use strict";a.r(e);var n=a("a026"),i=a("ce5b"),r=a.n(i);n["default"].use(r.a,{theme:{primary:"#212121",secondary:"#424242",accent:"#459fed",error:"#ff8e8e",info:"#2196F3",success:"#4CAF50",warning:"#FFC107"}});a("ca9a"),a("a51b"),a("c35c"),a("861c"),a("d304");var o=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-app",{class:{"theme--dark":!0,close__drawer_bbat:!t.drawer},attrs:{id:"app"}},[a("v-content",[a("router-view")],1)],1)},s=[],c=a("49ec"),l=a.n(c),d={data:function(){return{}},components:{GoTop:l.a},computed:{user:function(){return this.$store.getters.user},drawer:function(){return this.$store.getters.drawer}}},u=d,p=a("2877"),v=Object(p["a"])(u,o,s,!1,null,null,null),m=v.exports,h=a("8c4f"),g=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-app",[a("v-navigation-drawer",{staticStyle:{"background-image":'url("/o/vue-admin/images/bg_menu.jpg")'},attrs:{clipped:t.$vuetify.breakpoint.lgAndUp,fixed:"",app:"",width:"260",dark:""},model:{value:t.drawer,callback:function(e){t.drawer=e},expression:"drawer"}},[a("div",{staticClass:"sidebar-background"}),a("v-list",{attrs:{dense:""}},[t._l(t.items,(function(e){return[e.heading?a("v-layout",{key:e.heading,attrs:{row:"","align-center":""}},[a("v-flex",{attrs:{xs6:""}},[e.heading?a("v-subheader",[t._v("\n                "+t._s(e.heading)+"\n              ")]):t._e()],1),a("v-flex",{staticClass:"text-xs-center",attrs:{xs6:""}},[a("a",{staticClass:"body-2 black--text",attrs:{href:"#!"}},[t._v("EDIT")])])],1):e.hasOwnProperty("children")?a("v-list-group",{key:e.text,attrs:{"append-icon":e.model?e.icon:e["icon-alt"],"prepend-icon":"folder_open",dark:""},model:{value:e.model,callback:function(a){t.$set(e,"model",a)},expression:"item.model"}},[a("v-list-tile",{attrs:{slot:"activator"},slot:"activator"},[a("v-list-tile-content",[a("v-list-tile-title",[t._v("\n                  "+t._s(e.text)+"\n                ")])],1)],1),t._l(e.children,(function(n,i){return e.hasOwnProperty("children")?a("v-list-tile",{key:i,class:{list__active:t.tableName===n.code},attrs:{to:n.link.indexOf("?")>0?n.link+"&state_change="+Math.floor(100*Math.random())+1:n.link+"?state_change="+Math.floor(100*Math.random())+1}},[n.icon?a("v-list-tile-action",[a("v-icon",[t._v(t._s(n.icon))])],1):t._e(),a("v-list-tile-content",[a("v-list-tile-title",[t._v("\n                  "+t._s(n.text)+"\n                ")])],1)],1):t._e()}))],2):a("v-list-tile",{key:e.text},[a("v-list-tile-action",[a("v-icon",[t._v(t._s(e.icon))])],1),a("v-list-tile-content",[a("v-list-tile-title",[t._v("\n                "+t._s(e.text)+"\n              ")])],1)],1)]}))],2)],1),a("v-container",{staticClass:"px-0",attrs:{fluid:""}},[a("router-view")],1),a("v-snackbar",{attrs:{bottom:!1,left:!1,"multi-line":!1,right:!0,timeout:2e3,top:!0,vertical:!1,color:"red darken-3"},model:{value:t.snackbarerror,callback:function(e){t.snackbarerror=e},expression:"snackbarerror"}},[t._v("\n    Yêu cầu thực hiện thất bại\n    "),a("v-btn",{attrs:{icon:""},on:{click:function(e){return t.closeError()}}},[a("v-icon",[t._v("clear")])],1)],1),a("v-snackbar",{attrs:{bottom:!0,left:!1,"multi-line":!0,right:!1,timeout:0,top:!0,vertical:!1,color:"red darken-3"},model:{value:t.snackbarsocket,callback:function(e){t.snackbarsocket=e},expression:"snackbarsocket"}},[a("v-progress-circular",{attrs:{size:20,width:1,color:"white",indeterminate:""}}),t._v("\n     \n    Mất kết nối, tự động kết nối lại trong giây lát ... \n    "),a("v-btn",{attrs:{icon:""},on:{click:function(e){return t.reloadPage()}}},[a("v-icon",[t._v("replay")])],1)],1)],1)},f=[],b={data:function(){return{dialog:!1,drawer:null,dataSocket:{},scopeAdmin:!1,hasTrackingApi:!1}},props:{tableName:String},created:function(){var t=this;t.$nextTick((function(){try{var e=t.getUser("Administrator");scopeAdminConfig&&!e&&(t.scopeAdmin=!0)}catch(a){}try{t.hasTrackingApi=hasTrackingApi}catch(a){}}))},computed:{items:function(){return this.$store.getters.getlistTableMenu},loginUser:function(){return this.$store.getters.getloginUser},userRoles:function(){return this.$store.getters.getUserRoles},snackbarerror:{get:function(){return this.$store.getters.getsnackbarerror},set:function(t){this.$store.commit("setsnackbarerror",t)}},snackbarsocket:{get:function(){return this.$store.getters.getsnackbarsocket},set:function(t){this.$store.commit("setsnackbarsocket",t)}}},watch:{userRoles:function(){var t=this;try{var e=t.getUser("Administrator");scopeAdminConfig&&!e?t.scopeAdmin=!0:t.scopeAdmin=!1}catch(a){t.scopeAdmin=!1}}},methods:{getUser:function(t){var e=this,a=e.userRoles;if(!a)return!1;var n=a.findIndex((function(e){return e.role===t}));return n>=0},redirectFilter:function(t){this.$router.push(t+"?state_change="+Math.floor(100*Math.random())+1)},closeError:function(){this.$store.commit("setsnackbarerror",!1)},reloadPage:function(){window.location.reload(!0)},redirectControlPanel:function(){var t="";null!==window.themeDisplay&&void 0!==window.themeDisplay&&(t=window.themeDisplay.getLayoutRelativeControlPanelURL()),window.location.href=t+"?p_p_id=com_liferay_layout_admin_web_portlet_GroupPagesPortlet"},getItemSearch:function(){var t=this;return 2===t.items.length?t.items[1].children:t.items.length>2?t.items[2].children:[]},doLogOut:function(){window.location.href="/c/portal/logout"},theoDoiLog:function(){this.$router.push({name:"TheoDoiLogTruyCap"})},thongKeTruyCap:function(){this.$router.push({name:"ThongKeTruyCap"})}}},x=b,y=Object(p["a"])(x,g,f,!1,null,null,null),C=y.exports,_=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-container",{attrs:{fluid:""}},[t._v("\n    Not found\n")])},S=[],k={},D=k,w=Object(p["a"])(D,_,S,!1,null,"6c946066",null),T=w.exports,I=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("v-dialog",{attrs:{persistent:"",width:"300"},model:{value:t.dialogLoadingSync,callback:function(e){t.dialogLoadingSync=e},expression:"dialogLoadingSync"}},[a("v-card",{attrs:{color:"primary",dark:""}},[a("v-card-text",[a("div",{staticStyle:{"text-align":"center"}},[t._v(t._s(t.titleAction))]),a("v-progress-linear",{staticClass:"mb-0",attrs:{indeterminate:"",color:"white"}})],1)],1)],1),a("vue-confirm-dialog"),a("bbat-table",{attrs:{"table-name":t.tableName},on:{cloneProcess:t.cloneProcessEmitted,cloneTemplate:t.cloneTemplateEmitted}}),a("v-dialog",{attrs:{scrollable:"",persistent:"","max-width":"700px"},model:{value:t.dialog_cloneServiceProcess,callback:function(e){t.dialog_cloneServiceProcess=e},expression:"dialog_cloneServiceProcess"}},[a("v-card",[a("v-card-title",{staticClass:"headline pb-2"},[a("span",[t._v("Sao chép quy trình: "+t._s(t.oldProcessName))])]),a("v-card-text",{staticClass:"pt-3"},[a("v-form",{ref:"formCloneServiceProcess",attrs:{"lazy-validation":""},model:{value:t.validForm,callback:function(e){t.validForm=e},expression:"validForm"}},[a("v-layout",{staticClass:"py-1 align-center row-list-style",attrs:{wrap:""}},[a("v-flex",{attrs:{xs12:""}},[a("v-text-field",{attrs:{label:"Số hiệu quy trình tạo mới",box:"",rules:[function(t){return!!t||"Trường dữ liệu bắt buộc"}],required:!0},model:{value:t.processNo,callback:function(e){t.processNo=e},expression:"processNo"}})],1)],1)],1)],1),a("v-card-actions",{staticClass:"px-3"},[a("v-spacer"),a("v-btn",{staticClass:"mr-0",attrs:{color:"red darken-3",dark:""},on:{click:function(e){t.dialog_cloneServiceProcess=!1}}},[a("v-icon",{staticClass:"white--text"},[t._v("clear")]),t._v(" \n          Hủy\n        ")],1),a("v-btn",{attrs:{color:"blue darken-3",dark:"",loading:t.loading,disabled:t.loading},on:{click:t.cloneQuyTrinh}},[a("v-icon",[t._v("save")]),t._v(" \n          Sao chép\n        ")],1)],1)],1)],1)],1)},P=[],A=a("854a"),N=a.n(A),L=a("bc3a"),O=a.n(L),R=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("v-card",{staticClass:"px-0 mx-0 mb-5"},[a("v-toolbar",{attrs:{color:"blue darken-3 tool-bar-01",dark:"",height:"42"}},[a("v-btn",{attrs:{dark:"",icon:""},nativeOn:{click:function(e){return t.addFilterRow.apply(null,arguments)}}},[t.showFilter?a("v-icon",[t._v("highlight_off")]):a("v-icon",[t._v("search")])],1),a("v-toolbar-title",{staticClass:"ml-0"},[t._v("\n        "+t._s(t.nameScreen)+"\n      ")]),a("v-spacer"),"opencps_applicant"===t.tableName?a("v-btn",{style:{background:"citizen"===t.applicantType?"#f1eeee6e":"none"},attrs:{dark:"",flat:""},on:{click:function(e){return t.filterApplicantType("citizen")}}},[t._v("\n        Tài khoản cá nhân\n      ")]):t._e(),"opencps_applicant"===t.tableName?a("v-btn",{style:{background:"business"===t.applicantType?"#f1eeee6e":"none"},attrs:{dark:"",flat:""},on:{click:function(e){return t.filterApplicantType("business")}}},[t._v("\n        Tài khoản tổ chức\n      ")]):t._e(),t.exportExcel?a("v-btn",{attrs:{dark:"",flat:"",loading:t.exportLoading,disabled:t.exportLoading},on:{click:function(e){return t.exportTableData()}}},[a("v-icon",{attrs:{right:"",dark:""}},[t._v("cloud_download")]),t._v("   Xuất file Excel \n      ")],1):t._e(),t.showWorkingunits?a("v-btn",{attrs:{dark:"",flat:""},on:{click:function(e){return t.getWorkingunits()}}},[t._v("\n        Cấu trúc phòng ban\n      ")]):t._e(),t.downloadFileTemplate?a("v-btn",{attrs:{dark:"",flat:""},on:{click:function(e){return t.downloadFile(t.downloadFileTemplate)}}},[t._v("\n        Tải tệp mẫu\n      ")]):t._e(),"opencps_userlogin"!==t.tableName?a("v-btn",{attrs:{dark:"",icon:""},nativeOn:{click:function(e){return t.toEditor(0)}}},[a("v-icon",[t._v("add_circle")])],1):t._e(),a("v-btn",{attrs:{dark:"",icon:""},nativeOn:{click:function(e){return t.backToList.apply(null,arguments)}}},[a("v-icon",[t._v("reply")])],1)],1),a("div",{staticStyle:{"border-left":"1px solid gainsboro"}},[a("div",{directives:[{name:"show",rawName:"v-show",value:t.showFilter,expression:"showFilter"}],staticClass:"table_filter",attrs:{id:"table_filter_"+t.tableName}}),a("div",{directives:[{name:"show",rawName:"v-show",value:!t.problem,expression:"!problem"}],attrs:{id:"table_database_"+t.tableName}})]),t.pageTotalCounter>0?a("v-layout",{staticStyle:{width:"100%",background:"white","z-index":"2","border-top":"1px solid #dcdcdc"},attrs:{row:"",wrap:""}},[t.showLoadingTable?a("v-progress-linear",{staticClass:"my-0",attrs:{indeterminate:!0,color:"blue darken-3"}}):t._e(),a("v-flex",{staticStyle:{"padding-right":"15px"},attrs:{xs12:""}},[a("tiny-pagination",{attrs:{total:t.pageTotalCounter,page:t.page,"custom-class":"custom-tiny-class"},on:{"tiny:change-page":t.paggingData}})],1)],1):t._e()],1),a("v-card",{directives:[{name:"show",rawName:"v-show",value:t.problem,expression:"problem"}],staticClass:"px-2 mx-1 mb-5",staticStyle:{overflow:"hidden"}},[a("div",{staticClass:"video-preloader",attrs:{id:"video-preloader"}},[a("video",{attrs:{loop:"",id:"editor-video-preloader",width:"100%",height:"350",muted:"true",src:"https://editorassets.parastorage.com/video-preloader/editor-video-preloader-2-@2x.mp4"},domProps:{muted:!0}})])]),a("v-menu",{attrs:{"position-x":t.x,"position-y":t.y,absolute:"","offset-y":"","content-class":"box_shadow_custom"},model:{value:t.showMenu,callback:function(e){t.showMenu=e},expression:"showMenu"}},[a("v-list",["opencps_services_filetemplates"!==t.tableName&&"opencps_userlogin"!==t.tableName?a("v-list-tile",{nativeOn:{click:function(e){return t.toEditor(-1)}}},[a("v-list-tile-action",[a("v-icon",[t._v("edit")])],1),a("v-list-tile-title",[t._v("Sửa")])],1):t._e(),"opencps_serviceprocess"===t.tableName?a("v-list-tile",{nativeOn:{click:function(e){return t.cloneServiceProcess.apply(null,arguments)}}},[a("v-list-tile-action",[a("v-icon",[t._v("copyright")])],1),a("v-list-tile-title",[t._v("Sao chép quy trình")])],1):t._e(),"opencps_dossiertemplate"===t.tableName?a("v-list-tile",{nativeOn:{click:function(e){return t.cloneMauHoSo.apply(null,arguments)}}},[a("v-list-tile-action",[a("v-icon",[t._v("copyright")])],1),a("v-list-tile-title",[t._v("Đồng bộ mẫu hồ sơ sang cổng DVC")])],1):t._e(),t.showCopy?a("v-list-tile",{nativeOn:{click:function(e){return t.copyRecord(-1)}}},[a("v-list-tile-action",[a("v-icon",{attrs:{color:"red darken-3"}},[t._v("content_copy")])],1),a("v-list-tile-title",[t._v("Copy")])],1):t._e(),"opencps_services_filetemplates"===t.tableName?a("v-list-tile",{nativeOn:{click:function(e){return t.toEditor(-1)}}},[a("v-list-tile-action",[a("v-icon",{attrs:{color:"red darken-3"}},[t._v("visibility")])],1),a("v-list-tile-title",[t._v("Xem")])],1):t._e(),"opencps_services_filetemplates"!==t.tableName&&"opencps_userlogin"!==t.tableName?a("v-list-tile",{nativeOn:{click:function(e){return t.deleteRecord()}}},[a("v-list-tile-action",[a("v-icon",{attrs:{color:"red darken-3"}},[t._v("clear")])],1),a("v-list-tile-title",[t._v("Xoá")])],1):t._e()],1)],1),a("v-dialog",{attrs:{"max-width":"800px",persistent:""},model:{value:t.dialog,callback:function(e){t.dialog=e},expression:"dialog"}},[a("v-card",[a("div",{staticStyle:{width:"100%",height:"45px","background-color":"#115ebe",display:"flex","justify-content":"space-between","align-items":"center"}},[a("span",{staticClass:"mx-2",staticStyle:{"font-size":"20px","font-weight":"bold",color:"#fff"}},[t._v("Cấu trúc phòng ban")]),a("v-btn",{attrs:{color:"#115ebe",fab:"",small:"",dark:""},on:{click:function(e){t.dialog=!1}}},[a("v-icon",[t._v("cancel")])],1)],1),a("v-card-text",{staticClass:"form_vuejs",staticStyle:{"min-height":"150px"}},[a("v-list",t._l(t.itemTree,(function(e){return a("v-list-group",{key:e.workingUnitId,attrs:{value:!0,"prepend-icon":"account_balance","no-action":""}},[a("template",{slot:"activator"},[a("v-list-tile",[a("v-list-tile-content",[a("v-list-tile-title",[t._v(t._s(e.name))])],1)],1)],1),t._l(e.children,(function(e){return a("v-list-tile",{key:e.workingUnitId,staticStyle:{"padding-left":"42px !important"}},[a("v-list-tile-content",[a("v-list-tile-title",[a("v-icon",[t._v("label_important")]),t._v("  "+t._s(e.name)+"\n                    ")],1)],1)],1)}))],2)})),1)],1)],1)],1)],1)},M=[],F=a("ff94"),E=F["a"],$=Object(p["a"])(E,R,M,!1,null,null,null),q=$.exports,V=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("v-card",{staticClass:"px-0 mx-0",staticStyle:{overflow:"hidden"}},[a("v-toolbar",{attrs:{color:"blue darken-3 tool-bar-01 pl-2",dark:"",height:"42"}},[a("v-toolbar-title",{staticClass:"ml-0"},[t._v("\n        "+t._s(t.nameScreen)+"\n      ")]),a("v-spacer"),a("v-btn",{attrs:{dark:"",flat:""},nativeOn:{click:function(e){return t.deleteRecord.apply(null,arguments)}}},[a("v-icon",[t._v("delete")]),t._v("  \n        Xoá bản ghi\n      ")],1),a("v-btn",{attrs:{dark:"",icon:""},nativeOn:{click:function(e){return t.backToList.apply(null,arguments)}}},[a("v-icon",[t._v("reply")])],1)],1),t.showDetailForm?a("div",{staticClass:"grid-list mt-2 mx-2"},[a("bbat-table-editor-component",{ref:"bbatForm",attrs:{"table-config":t.dataSocket.tableConfig,"detail-data":t.dataSocket.detail,id:t.id,"table-name":t.tableName}})],1):t._e(),t.noDetail?a("v-alert",{attrs:{value:!0,color:"warning",icon:"priority_high",outline:""}},[t._v("\n    Không tìm thấy dữ liệu\n  ")]):t._e()],1)],1)},U=[],G=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("v-form",{ref:"form",attrs:{"lazy-validation":""},model:{value:t.valid,callback:function(e){t.valid=e},expression:"valid"}},[null!==t.detailForm&&t.detailForm.length>0?a("v-layout",{staticStyle:{"margin-bottom":"100px"},attrs:{row:"",wrap:""}},["opencps_serviceinfo"===t.tableName?a("v-text-field",{staticClass:"xs12 pt-1 mr-2 pl-1",attrs:{maxlength:75,counter:75,box:"",clearable:""},model:{value:t.serviceCodeDVCQG,callback:function(e){t.serviceCodeDVCQG=e},expression:"serviceCodeDVCQG"}},[a("template",{slot:"label"},[t._v("Mã thủ tục DVCQG")])],2):t._e(),t._l(t.detailForm,(function(e,n){return a("v-flex",{key:n,class:e["class"]},["ricktext"===e.type?a("v-subheader",{staticClass:"px-0"},[t._v(t._s(e["label"]))]):t._e(),"ricktext"===e.type?a("trumbowyg",{attrs:{config:t.config},on:{"tbw-blur":function(a){return t.formatDataInput(e)},"tbw-change":function(a){return t.validateMaxlength(e)}},model:{value:t.data[e.model],callback:function(a){t.$set(t.data,e.model,a)},expression:"data[item.model]"}}):t._e(),"ricktext"===e.type&&e.hasOwnProperty("maxLength")&&e.maxLength?a("div",{staticClass:"px-0 mt-2",staticStyle:{"text-align":"right"}},[a("span",[t._v(t._s(String(t.data[e.model]).length)+"/"+t._s(e.maxLength))])]):t._e(),"date"===e.type?a("datetime-picker",{class:e["class_component"],attrs:{min:e.minDate?t.getCurrentDate():null,max:e.maxDate?t.getCurrentDate():null,item:e,"data-value":t.data[e.model]},model:{value:t.data[e.model],callback:function(a){t.$set(t.data,e.model,a)},expression:"data[item.model]"}}):t._e(),"button"===e.type&&e["link"]&&(e.dependency&&"0"!==String(t.id)||!e.dependency)?a("v-btn",{class:e["class_component"],attrs:{color:"blue darken-3",dark:"",to:e.url+"?pk="+t.data[e.pk]+"&col="+(e.hasOwnProperty("pk_foreign")?e.pk_foreign:e.pk)+"&pk_type="+(e.hasOwnProperty("pk_type")?e.pk_type:"number")}},["link"===e["btn_type"]?a("v-icon",{staticClass:"mr-1",attrs:{size:"14"}},[t._v("how_to_vote")]):t._e(),"popup"===e["btn_type"]?a("v-icon",{staticClass:"mr-1",attrs:{size:"14"}},[t._v("flip_to_back")]):t._e(),t._v("\r\n          "+t._s(e.label)+"\r\n        ")],1):t._e(),"button"===e.type&&e["account"]&&(e.dependency&&"0"!==String(t.id)||!e.dependency)?a("v-btn",{class:e["class_component"],attrs:{color:"blue darken-3",dark:""},nativeOn:{click:function(a){return t.showAccount(e)}}},["link"===e["btn_type"]?a("v-icon",{staticClass:"mr-1",attrs:{size:"14"}},[t._v("how_to_vote")]):t._e(),"popup"===e["btn_type"]?a("v-icon",{staticClass:"mr-1",attrs:{size:"14"}},[t._v("flip_to_back")]):t._e(),t._v("\r\n          "+t._s(e.label)+"\r\n        ")],1):t._e(),"button"===e.type&&e["attached"]&&(e.dependency&&"0"!==String(t.id)||!e.dependency)?a("v-btn",{class:e["class_component"],attrs:{color:"blue darken-3",dark:""},nativeOn:{click:function(a){return t.showAttached(e)}}},["link"===e["btn_type"]?a("v-icon",{staticClass:"mr-1",attrs:{size:"14"}},[t._v("how_to_vote")]):t._e(),"popup"===e["btn_type"]?a("v-icon",{staticClass:"mr-1",attrs:{size:"14"}},[t._v("flip_to_back")]):t._e(),t._v("\r\n          "+t._s(e.label)+"\r\n        ")],1):t._e(),"button"===e.type&&e["fileform"]&&(e.dependency&&"0"!==String(t.id)||!e.dependency)?a("v-btn",{class:e["class_component"],attrs:{color:"blue darken-3",dark:""},nativeOn:{click:function(a){return t.showAttached(e)}}},["link"===e["btn_type"]?a("v-icon",{staticClass:"mr-1",attrs:{size:"14"}},[t._v("how_to_vote")]):t._e(),"popup"===e["btn_type"]?a("v-icon",{staticClass:"mr-1",attrs:{size:"14"}},[t._v("flip_to_back")]):t._e(),t._v("\r\n          "+t._s(e.label)+"\r\n        ")],1):t._e(),"button"===e.type&&e["unlock"]?a("v-btn",{class:e["class_component"],attrs:{color:"blue darken-3",dark:""},nativeOn:{click:function(e){return t.unlock()}}},["unlock"===e["btn_type"]?a("v-icon",{staticClass:"mr-1",attrs:{size:"14"}},[t._v("lock_open")]):t._e(),t._v("\r\n          "+t._s(e.label)+"\r\n        ")],1):t._e(),"button"===e.type&&e["changeEmail"]?a("v-btn",{class:e["class_component"],attrs:{color:"blue darken-3",dark:""},nativeOn:{click:function(e){return t.showChangeEmail.apply(null,arguments)}}},["changeEmail"===e["btn_type"]?a("v-icon",{staticClass:"mr-1",attrs:{size:"14"}},[t._v("swap_horiz")]):t._e(),t._v("\r\n          "+t._s(e.label)+"\r\n        ")],1):t._e(),"button"===e.type&&e["active_acount"]&&"verified"===t.data["activationCode"]?a("v-btn",{class:e["class_component"],attrs:{color:"blue darken-3",dark:""},nativeOn:{click:function(e){return t.activeAcount()}}},[a("v-icon",{staticClass:"mr-1",attrs:{size:"14"}},[t._v("lock_open")]),t._v("\r\n          "+t._s(e.label)+"\r\n        ")],1):t._e(),"image"===e.type?a("div",{staticStyle:{width:"100%",height:"150px"}},[a("span",[t._v(t._s("citizen"===t.data["applicantIdType"]?"Ảnh CMND":"Ảnh giấy phép kinh doanh"))]),t.isJsonString(t.data["profile"])?a("img",{staticStyle:{width:"100%",height:"140px"},attrs:{src:JSON.parse(t.data["profile"]).indentifyNoFileUrl}}):a("img",{staticStyle:{width:"100%",height:"140px"}})]):t._e(),"selects"===e.type&&!t.pullOk&&e.hasOwnProperty("datasource_key")?a("content-placeholders",[a("content-placeholders-text",{attrs:{lines:1}})],1):t._e(),"selects"===e.type&&t.pullOk&&e.hasOwnProperty("datasource_key")?a("v-autocomplete",{class:e["class_component"],attrs:{items:t.dataSocket[e["datasource_key"]],"item-text":e.itemText,"item-value":e.itemValue,box:"",rules:t.processRules(e.rules,e),"no-data-text":"Không tìm thấy dữ liệu "+e["label"],chips:e["chips"],multiple:e["multiple"],clearable:"",disabled:e["disabled"],"value-comparator":function(t,e){return t==e}},on:{change:function(a){return t.processChangeDataSource(a,e)}},model:{value:t.data[e.model],callback:function(a){t.$set(t.data,e.model,a)},expression:"data[item.model]"}},[a("template",{slot:"label"},[t._v(t._s(e["label"])+" "),e.required?a("span",{staticClass:"red--text darken-3"},[t._v("*")]):t._e()])],2):t._e(),"selects"!==e.type||e.hasOwnProperty("datasource_key")?t._e():a("v-autocomplete",{class:e["class_component"],attrs:{items:e.datasource,"item-text":e.itemText,"item-value":e.itemValue,box:"",rules:t.processRules(e.rules,e),"no-data-text":"Không tìm thấy dữ liệu "+e["label"],chips:e["chips"],multiple:e["multiple"],clearable:"",disabled:e["disabled"],"value-comparator":function(t,e){return t==e}},on:{change:function(a){return t.processChangeDataSource(a,e)}},model:{value:t.data[e.model],callback:function(a){t.$set(t.data,e.model,a)},expression:"data[item.model]"}},[a("template",{slot:"label"},[t._v(t._s(e["label"])+" "),e.required?a("span",{staticClass:"red--text darken-3"},[t._v("*")]):t._e()])],2),"text-fields"===e.type?a("v-text-field",{class:e["class_component"],attrs:{rules:t.processRules(e.rules,e),placeholder:e["placeholder"],disabled:e["disabled"]||0!=t.id&&"opencps_serviceinfo"===t.tableName&&"serviceCode"===e.model,maxlength:t.getMaxLength(e),counter:t.getMaxLength(e),box:"",clearable:""},on:{blur:function(a){return t.formatDataInput(e)}},model:{value:t.data[e.model],callback:function(a){t.$set(t.data,e.model,a)},expression:"data[item.model]"}},[a("template",{slot:"label"},[t._v(t._s(e["label"])+" "),e.required?a("span",{staticClass:"red--text darken-3"},[t._v("*")]):t._e()])],2):t._e(),"textarea"===e.type?a("v-textarea",{class:e["class_component"],attrs:{rules:t.processRules(e.rules,e),placeholder:e["placeholder"],disabled:e["disabled"],maxlength:t.getMaxLength(e),counter:t.getMaxLength(e),box:"",clearable:""},on:{blur:function(a){return t.formatDataInput(e)}},model:{value:t.data[e.model],callback:function(a){t.$set(t.data,e.model,a)},expression:"data[item.model]"}},[a("template",{slot:"label"},[t._v(t._s(e["label"])+" "),e.required?a("span",{staticClass:"red--text darken-3"},[t._v("*")]):t._e()])],2):t._e(),"codemirror"===e.type?a("v-subheader",{staticClass:"px-0"},[t._v(t._s(e["label"]))]):t._e(),"codemirror"===e.type?a("codemirror",{attrs:{options:t.cmOptions},on:{blur:function(a){return t.formatDataInput(e)},input:function(a){return t.validateMaxlength(e)}},model:{value:t.data[e.model],callback:function(a){t.$set(t.data,e.model,a)},expression:"data[item.model]"}}):t._e(),"codemirror"===e.type&&e.hasOwnProperty("maxLength")&&e.maxLength?a("div",{staticClass:"px-0 mt-2",staticStyle:{"text-align":"right"}},[a("span",[t._v(t._s(String(t.data[e.model]).length)+"/"+t._s(e.maxLength))])]):t._e(),"codemirror"===e.type?a("v-subheader",{staticClass:"px-0"},[t._v(t._s(e["label"]))]):t._e(),"v-switch"===e.type?a("v-switch",{class:e["class_component"],attrs:{label:e["label"]},model:{value:t.data[e.model],callback:function(a){t.$set(t.data,e.model,a)},expression:"data[item.model]"}}):t._e(),t._l(e["alongside"],(function(n,i){return e.hasOwnProperty("alongside")?a("div",{key:i},["ricktext"===n.type?a("v-subheader",{staticClass:"px-0"},[t._v(t._s(n["label"]))]):t._e(),"ricktext"===n.type?a("trumbowyg",{attrs:{config:t.config},on:{"tbw-blur":function(e){return t.formatDataInput(n)},"tbw-change":function(e){return t.validateMaxlength(n)}},model:{value:t.data[n.model],callback:function(e){t.$set(t.data,n.model,e)},expression:"data[itemChild.model]"}}):t._e(),"ricktext"===n.type&&n.hasOwnProperty("maxLength")&&n.maxLength?a("div",{staticClass:"px-0 mt-2",staticStyle:{"text-align":"right"}},[a("span",[t._v(t._s(String(t.data[n.model]).length)+"/"+t._s(n.maxLength))])]):t._e(),"date"===n.type?a("datetime-picker",{class:n["class_component"],attrs:{item:n,"data-value":t.data[n.model]},model:{value:t.data[n.model],callback:function(e){t.$set(t.data,n.model,e)},expression:"data[itemChild.model]"}}):t._e(),"button"===n.type&&n["link"]&&(n.dependency&&"0"!==String(t.id)||!n.dependency)?a("v-btn",{class:n["class_component"],attrs:{color:"blue darken-3",dark:"",to:n.url+"?pk="+t.data[n.pk]+"&col="+n.pk}},["link"===n["btn_type"]?a("v-icon",{staticClass:"mr-1",attrs:{size:"14"}},[t._v("how_to_vote")]):t._e(),"popup"===n["btn_type"]?a("v-icon",{staticClass:"mr-1",attrs:{size:"14"}},[t._v("flip_to_back")]):t._e(),t._v("\r\n            "+t._s(n.label)+"\r\n          ")],1):t._e(),"button"===n.type&&n["account"]&&(n.dependency&&"0"!==String(t.id)||!n.dependency)?a("v-btn",{class:n["class_component"],attrs:{color:"blue darken-3",dark:""},nativeOn:{click:function(e){return t.showAccount(n)}}},["link"===n["btn_type"]?a("v-icon",{staticClass:"mr-1",attrs:{size:"14"}},[t._v("how_to_vote")]):t._e(),"popup"===n["btn_type"]?a("v-icon",{staticClass:"mr-1",attrs:{size:"14"}},[t._v("flip_to_back")]):t._e(),t._v("\r\n            "+t._s(n.label)+"\r\n          ")],1):t._e(),"button"===n.type&&n["attached"]&&(n.dependency&&"0"!==String(t.id)||!n.dependency)?a("v-btn",{class:n["class_component"],attrs:{color:"blue darken-3",dark:""},nativeOn:{click:function(e){return t.showAttached(n)}}},["link"===n["btn_type"]?a("v-icon",{staticClass:"mr-1",attrs:{size:"14"}},[t._v("how_to_vote")]):t._e(),"popup"===n["btn_type"]?a("v-icon",{staticClass:"mr-1",attrs:{size:"14"}},[t._v("flip_to_back")]):t._e(),t._v("\r\n            "+t._s(n.label)+"\r\n          ")],1):t._e(),"button"===n.type&&n["unlock"]?a("v-btn",{class:n["class_component"],attrs:{color:"blue darken-3",dark:""},nativeOn:{click:function(e){return t.unlock()}}},["unlock"===n["btn_type"]?a("v-icon",{staticClass:"mr-1",attrs:{size:"14"}},[t._v("lock_open")]):t._e(),t._v("\r\n            "+t._s(n.label)+"\r\n          ")],1):t._e(),"selects"===n.type&&!t.pullOk&&n.hasOwnProperty("datasource_key")?a("content-placeholders",[a("content-placeholders-text",{attrs:{lines:1}})],1):t._e(),"selects"===n.type&&t.pullOk&&n.hasOwnProperty("datasource_key")?a("v-autocomplete",{class:n["class_component"],attrs:{items:t.dataSocket[n["datasource_key"]],"item-text":n.itemText,"item-value":n.itemValue,box:"",rules:t.processRules(n.rules,n),"no-data-text":"Không tìm thấy dữ liệu "+n["label"],chips:e["chips"],multiple:e["multiple"],clearable:"",disabled:e["disabled"],"value-comparator":function(t,e){return t==e}},on:{change:function(e){return t.processChangeDataSource(e,n)}},model:{value:t.data[n.model],callback:function(e){t.$set(t.data,n.model,e)},expression:"data[itemChild.model]"}},[a("template",{slot:"label"},[t._v(t._s(n["label"])+" "),n.required?a("span",{staticClass:"red--text darken-3"},[t._v("*")]):t._e()])],2):t._e(),"selects"!==n.type||n.hasOwnProperty("datasource_key")?t._e():a("v-autocomplete",{class:n["class_component"],attrs:{items:n.datasource,"item-text":n.itemText,"item-value":n.itemValue,box:"",rules:t.processRules(n.rules,n),"no-data-text":"Không tìm thấy dữ liệu "+n["label"],chips:e["chips"],multiple:e["multiple"],clearable:"",disabled:e["disabled"],"value-comparator":function(t,e){return t==e}},on:{change:function(e){return t.processChangeDataSource(e,n)}},model:{value:t.data[n.model],callback:function(e){t.$set(t.data,n.model,e)},expression:"data[itemChild.model]"}},[a("template",{slot:"label"},[t._v(t._s(n["label"])+" "),n.required?a("span",{staticClass:"red--text darken-3"},[t._v("*")]):t._e()])],2),"text-fields"===n.type?a("v-text-field",{class:n["class_component"],attrs:{rules:t.processRules(n.rules,n),placeholder:n["placeholder"],box:"",clearable:""},model:{value:t.data[n.model],callback:function(e){t.$set(t.data,n.model,e)},expression:"data[itemChild.model]"}},[a("template",{slot:"label"},[t._v(t._s(n["label"])+" "),n.required?a("span",{staticClass:"red--text darken-3"},[t._v("*")]):t._e()])],2):t._e(),"textarea"===n.type?a("v-textarea",{class:n["class_component"],attrs:{rules:t.processRules(n.rules,n),placeholder:n["placeholder"],box:"",clearable:""},model:{value:t.data[n.model],callback:function(e){t.$set(t.data,n.model,e)},expression:"data[itemChild.model]"}},[a("template",{slot:"label"},[t._v(t._s(n["label"])+" "),n.required?a("span",{staticClass:"red--text darken-3"},[t._v("*")]):t._e()])],2):t._e(),"codemirror"===n.type?a("v-subheader",{staticClass:"px-0"},[t._v(t._s(n["label"]))]):t._e(),"codemirror"===n.type?a("codemirror",{attrs:{options:t.cmOptions},on:{blur:function(e){return t.formatDataInput(n)},input:function(e){return t.validateMaxlength(n)}},model:{value:t.data[n.model],callback:function(e){t.$set(t.data,n.model,e)},expression:"data[itemChild.model]"}}):t._e(),"codemirror"===n.type&&n.hasOwnProperty("maxLength")&&n.maxLength?a("div",{staticClass:"px-0 mt-2",staticStyle:{"text-align":"right"}},[a("span",[t._v(t._s(String(t.data[n.model]).length)+"/"+t._s(n.maxLength))])]):t._e(),"v-switch"===n.type?a("v-switch",{class:n["class_component"],attrs:{label:n["label"]},model:{value:t.data[n.model],callback:function(e){t.$set(t.data,n.model,e)},expression:"data[itemChild.model]"}}):t._e()],1):t._e()}))],2)})),a("v-flex",{staticClass:"text-right pt-0 ml-1 px-2",staticStyle:{position:"fixed",bottom:"0",background:"white","z-index":"4","border-top":"1px solid #dcdcdc",height:"70px",width:"100%","margin-left":"-268px !important"},attrs:{xs12:""}},[t.loading?a("v-progress-linear",{staticClass:"my-0",attrs:{indeterminate:!0,color:"blue darken-3"}}):t._e(),a("v-btn",{staticClass:"mr-2",attrs:{color:"red darken-3",dark:""},nativeOn:{click:function(e){return t.backToList.apply(null,arguments)}}},[a("v-icon",[t._v("reply")]),t._v("  \r\n          Quay lại\r\n        ")],1),!t.tableConfig.hasOwnProperty("flagHtml")||t.tableConfig.hasOwnProperty("flagHtml")&&t.tableConfig["flagHtml"]?a("v-btn",{staticClass:"mr-0",attrs:{color:"blue darken-3",dark:"",loading:t.loading,disabled:t.loading},nativeOn:{click:function(e){return t.saveToData("cmd")}}},[a("v-icon",[t._v("save")]),t._v("  \r\n        Ghi lại\r\n        ")],1):t._e(),"opencps_dossierpart"===t.tableName&&t.data["EForm"]?a("v-btn",{staticClass:"mr-0",attrs:{color:"blue darken-3",dark:""},nativeOn:{click:function(e){return t.viewForm.apply(null,arguments)}}},[t._v("Xem trước form nhập")]):t._e(),"opencps_dossierpart"===t.tableName&&t.data["EForm"]||"opencps_documenttype"===t.tableName?a("v-btn",{staticClass:"mr-0",attrs:{color:"blue darken-3",dark:"",loading:t.loadingPdf,disabled:t.loadingPdf},nativeOn:{click:function(e){return t.viewPdf(!1)}}},[t._v("Xem trước bản in")]):t._e()],1)],2):a("v-layout",{attrs:{row:"",wrap:""}},[a("v-flex",{attrs:{xs12:""}},[a("div",{staticClass:"video-preloader",attrs:{id:"video-preloader"}},[a("video",{attrs:{loop:"",id:"editor-video-preloader",width:"100%",height:"350",muted:"true",src:"https://editorassets.parastorage.com/video-preloader/editor-video-preloader-2-@2x.mp4"},domProps:{muted:!0}})])])],1),a("v-navigation-drawer",{staticStyle:{background:"#fff"},attrs:{right:"",app:"",fixed:"",temporary:"",width:600},model:{value:t.rightAttached,callback:function(e){t.rightAttached=e},expression:"rightAttached"}},[a("v-card",[a("div",{staticClass:"pb-0",attrs:{"primary-title":""}},[a("v-layout",{attrs:{wrap:""}},[a("v-flex",{staticClass:"text-center title pt-3",attrs:{xs12:""}},[a("span",{attrs:{id:"rightAttachedCounter"}}),t._v(" "+t._s(t.layoutNameDynamic)+"\r\n            ")])],1),a("v-btn",{staticClass:"my-0",staticStyle:{position:"absolute",right:"25px"},attrs:{flat:"",icon:"",color:"primary"},nativeOn:{click:function(e){t.rightAttached=!1}}},[a("v-icon",{attrs:{size:"18"}},[t._v("clear")])],1)],1)]),a("v-card",[t.pickItem["attached"]?a("div",{staticClass:"pb-0 pt-2",attrs:{"primary-title":""}},[t.rightAttached?a("attached-file-template",{attrs:{pk:t.id,"pick-item":t.pickItem,code:t.tableName}}):t._e()],1):t._e(),t.pickItem["fileform"]?a("v-card-title",{staticClass:"pb-0 pt-2",attrs:{"primary-title":""}},[a("v-layout",{staticClass:"my-3",attrs:{row:"",wrap:""}},[a("v-flex",{staticClass:"text-center title",attrs:{xs12:""}},[t._v("\r\n              Tải file cấu hình mẫu FORM\r\n            ")]),t.rightAttached?a("attached-file-form",{attrs:{pk:t.id,"pick-item":t.pickItem,code:t.tableName}}):t._e(),a("v-flex",{staticClass:"text-center title mt-3",attrs:{xs12:""}},[t._v("\r\n              Tải file cấu hình mẫu Jasper\r\n            ")]),t.rightAttached?a("attached-file-jasper",{attrs:{pk:t.id,"pick-item":t.pickItem,code:t.tableName}}):t._e()],1)],1):t._e()],1)],1),a("v-navigation-drawer",{staticStyle:{background:"#fff"},attrs:{right:"",app:"",fixed:"",temporary:""},model:{value:t.rightAccount,callback:function(e){t.rightAccount=e},expression:"rightAccount"}},[a("v-card",[a("v-card-title",{staticClass:"pb-0",attrs:{"primary-title":""}},[a("v-layout",{attrs:{row:"",wrap:""}},[a("v-flex",{staticClass:"text-center title",attrs:{xs12:""}},[t._v("\r\n              "+t._s(t.layoutNameDynamic)+"\r\n            ")])],1),a("v-btn",{staticClass:"my-0",staticStyle:{position:"absolute",right:"25px"},attrs:{flat:"",icon:"",color:"primary"},nativeOn:{click:function(e){t.rightAccount=!1}}},[a("v-icon",{attrs:{size:"18"}},[t._v("clear")])],1)],1)],1),a("v-card",[a("v-card-title",{staticClass:"pb-0 pt-2",attrs:{"primary-title":""}},[a("v-layout",{attrs:{row:"",wrap:""}},[a("v-flex",{attrs:{xs12:""}},[a("v-text-field",{attrs:{label:"Tên đăng nhập",box:"",readonly:""},model:{value:t.screenLogin,callback:function(e){t.screenLogin=e},expression:"screenLogin"}})],1),a("v-flex",{attrs:{xs12:""}},[a("v-text-field",{attrs:{label:"Tài khoản đăng nhập",box:"",readonly:""},model:{value:t.emailLogin,callback:function(e){t.emailLogin=e},expression:"emailLogin"}})],1)],1)],1)],1),a("v-divider"),a("v-card",[a("v-card-title",{staticClass:"pb-0 pt-2",attrs:{"primary-title":""}},[a("v-layout",{attrs:{row:"",wrap:""}},[a("v-flex",{staticClass:"text-center title",attrs:{xs12:""}},[t._v("\r\n              Đổi mật khẩu\r\n            ")])],1)],1)],1),a("v-card",[a("v-card-title",{staticClass:"pt-2",attrs:{"primary-title":""}},[a("v-layout",{attrs:{row:"",wrap:""}},[a("v-flex",{staticClass:"px-0",attrs:{xs12:""}},[a("v-form",{ref:"form_2",attrs:{"lazy-validation":""},model:{value:t.valid2,callback:function(e){t.valid2=e},expression:"valid2"}},[a("v-flex",{attrs:{xs12:""}},[a("v-text-field",{attrs:{box:"","append-icon":t.e1?"visibility":"visibility_off","append-icon-cb":function(){return t.e1=!t.e1},rules:[t.rules.required,t.rules.passWord],type:t.e1?"password":"text",name:"input-10-2",min:"8"},model:{value:t.password,callback:function(e){t.password=e},expression:"password"}},[a("template",{slot:"label"},[t._v("Mật khẩu mới "),a("span",{staticClass:"red--text darken-3"},[t._v("*")])])],2)],1),a("v-flex",{attrs:{xs12:""}},[a("v-btn",{attrs:{block:"",color:"blue darken-3",dark:""},nativeOn:{click:function(e){return t.doChangePassWord()}}},[t._v("Xác nhận")])],1)],1)],1),a("v-flex",{attrs:{xs12:""}},[a("v-switch",{attrs:{label:"Kích hoạt tài khoản"},on:{change:function(e){return t.doChangeStatusAccount(e)}},model:{value:t.deactiveAccountFlagBoolean,callback:function(e){t.deactiveAccountFlagBoolean=e},expression:"deactiveAccountFlagBoolean"}})],1)],1)],1)],1)],1),a("v-snackbar",{attrs:{bottom:!1,left:!1,"multi-line":!1,right:!0,timeout:2e3,top:!0,vertical:!1,color:"success"},model:{value:t.snackbarsuccess,callback:function(e){t.snackbarsuccess=e},expression:"snackbarsuccess"}},[t._v("\r\n      Yêu cầu thực hiện thành công\r\n      "),a("v-btn",{attrs:{icon:""},on:{click:function(e){t.snackbarsuccess=!1}}},[a("v-icon",[t._v("clear")])],1)],1),a("v-snackbar",{attrs:{bottom:!1,left:!1,"multi-line":!1,right:!0,timeout:2e3,top:!0,vertical:!1,color:"#EF5350"},model:{value:t.snackbarerror,callback:function(e){t.snackbarerror=e},expression:"snackbarerror"}},[t._v("\r\n      Yêu cầu thực hiện thất bại\r\n      "),a("v-btn",{attrs:{icon:""},on:{click:function(e){t.snackbarerror=!1}}},[a("v-icon",[t._v("clear")])],1)],1)],1),a("v-alert",{staticStyle:{position:"fixed!important",right:"0!important",top:"46px","z-index":"9999999999"},attrs:{"max-width":"300",color:"cyan",border:"left",elevation:"2","colored-border":"",icon:"mdi-lock-open-variant"},model:{value:t.alertSuccess,callback:function(e){t.alertSuccess=e},expression:"alertSuccess"}},[t._v("\r\n      Thao tác thành công.\r\n    ")]),a("v-alert",{staticStyle:{position:"fixed!important",right:"0!important",top:"46px","z-index":"9999999999"},attrs:{"max-width":"300",color:"#D32F2F",border:"left",elevation:"2","colored-border":"",icon:"mdi-lock-outline"},model:{value:t.alertFail,callback:function(e){t.alertFail=e},expression:"alertFail"}},[t._v("\r\n      Thao tác thất bại.\r\n    ")]),a("v-dialog",{attrs:{persistent:"","max-width":"400"},model:{value:t.dialogChangeMail,callback:function(e){t.dialogChangeMail=e},expression:"dialogChangeMail"}},[a("v-card",[a("v-toolbar",{attrs:{flat:"",dark:"",color:"blue"}},[a("v-toolbar-title",{staticClass:"px-3"},[t._v("Cập nhật email tài khoản")]),a("v-spacer"),a("v-btn",{attrs:{icon:"",dark:""},nativeOn:{click:function(e){t.dialogChangeMail=!1}}},[a("v-icon",[t._v("close")])],1)],1),a("v-card-text",{staticClass:"px-2"},[a("v-form",{ref:"formChangeMail",attrs:{"lazy-validation":""}},[a("v-container",[a("v-row",[a("v-col",{attrs:{cols:"12"}},[a("v-text-field",{attrs:{label:"Email hiện tại",disabled:""},model:{value:t.oldEmail,callback:function(e){t.oldEmail=e},expression:"oldEmail"}})],1),a("v-col",{attrs:{cols:"12"}},[a("v-text-field",{attrs:{label:"Email mới",rules:[t.rules.required,t.rules.email]},model:{value:t.newEmail,callback:function(e){t.newEmail=e},expression:"newEmail"}})],1)],1)],1),a("v-form")],1)],1),a("v-card-actions",{staticClass:"px-3"},[a("v-spacer"),a("v-btn",{attrs:{color:"red darken-3",dark:""},on:{click:function(e){t.dialogChangeMail=!1}}},[a("v-icon",[t._v("clear")]),t._v(" \r\n            Thoát\r\n          ")],1),a("v-btn",{attrs:{color:"blue darken-3",dark:""},on:{click:function(e){return t.changeEmail()}}},[a("v-icon",[t._v("save")]),t._v(" \r\n            Cập nhật\r\n          ")],1)],1)],1)],1),a("v-dialog",{attrs:{fullscreen:"","hide-overlay":"",transition:"dialog-bottom-transition"},model:{value:t.dialogEform,callback:function(e){t.dialogEform=e},expression:"dialogEform"}},[a("div",{},[a("v-toolbar",{staticClass:"toolbar-script",attrs:{flat:"",height:"36",dark:"",color:"#1867c0"}},[a("v-toolbar-title",{staticClass:"white--text"},[t.viewFormInput?a("span",[t._v("Form nhập")]):a("span",[t._v("Bản in")])]),a("v-spacer"),"opencps_dossierpart"!==t.tableName||t.viewFormInput?a("v-btn",{staticClass:"mr-2",attrs:{round:"",dark:"",small:"",color:"green",loading:t.loadingPdf,disabled:t.loadingPdf},on:{click:function(e){return t.viewPdf(!0)}}},[a("v-icon",{staticClass:"white--text",attrs:{size:"16"}},[t._v("fa fa-file-pdf-o")]),t._v("   Bản in\r\n          "),a("span",{attrs:{slot:"loader"},slot:"loader"},[t._v("Loading...")])],1):a("v-btn",{attrs:{round:"",dark:"",small:"",color:"blue"},on:{click:t.viewForm}},[a("v-icon",{staticClass:"white--text",attrs:{size:"18"}},[t._v("description")]),t._v("   Form nhập\r\n        ")],1),a("v-btn",{attrs:{flat:"",small:"",color:"blue",icon:""},on:{click:function(e){t.dialogEform=!1}}},[a("v-icon",{staticClass:"white--text",attrs:{size:"28"}},[t._v("clear")])],1)],1),!0===t.viewFormInput?a("div",{staticStyle:{background:"#fafafa",color:"black",padding:"15px"},attrs:{id:"formInput"}}):a("iframe",{staticStyle:{overflow:"auto",height:"100vh"},attrs:{id:"pdfPreview",src:"",type:"application/pdf",width:"100%",height:"100%",frameborder:"0"}})],1)])],1)},H=[],Q=a("146f"),j=Q["a"],B=Object(p["a"])(j,G,H,!1,null,null,null),K=B.exports,z={props:["tableName","id"],components:{BbatTableEditorComponent:K},data:function(){return{breadCrumbsitems:[{text:"Bảng dữ liệu",disabled:!1},{text:"",disabled:!1}],nameScreen:"",showDetailForm:!1,noDetail:!1,idCopy:"",dataSocket:{}}},computed:{isConnected:{get:function(){return this.$store.getters.getisConnected},set:function(t){this.$store.commit("setisConnected",t)}}},watch:{$route:function(t,e){var a=this;if(a.isConnected){a.isConnected=!1;var n=new URLSearchParams,i={type:"admin",cmd:"get",config:"true",code:a.$router.history.current.params.tableName,respone:"tableConfig"};n.append("text",JSON.stringify(i)),O.a.post("/o/rest/v2/socket/web",n,{}).then((function(t){var e=t.data;a.dataSocket[e.respone]=e[e.respone],i={type:"admin",cmd:"get",code:a.$router.history.current.params.tableName,respone:"detail",responeType:"detail",filter:[{key:"id",value_filter:a.id,compare:"=",type:"number"}]},n=new URLSearchParams,n.append("text",JSON.stringify(i)),O.a.post("/o/rest/v2/socket/web",n,{}).then((function(t){var e=t.data;a.dataSocket[e.respone]=e[e.respone],null===a.dataSocket["tableConfig"]||void 0===a.dataSocket["tableConfig"]||null===a.dataSocket["detail"]||void 0===a.dataSocket["detail"]||"detail"!==e.respone&&"tableConfig"!==e.respone||(a.dataSocket["detail"]!==[]?(a.nameScreen=a.dataSocket["detail"][0][e.title],a.showDetailForm=!0,a.noDetail=!1):a.noDetail=!0),"listTableMenu"===e.respone?a.$store.commit("setlistTableMenu",a.dataSocket[e.respone]):"loginUser"===e.respone&&a.$store.commit("setloginUser",e["loginUser"]),"0"===String(a.id)&&(a.nameScreen="Thêm mới dữ liệu",a.showDetailForm=!0,a.noDetail=!1)})).catch((function(t){}))})).catch((function(t){}))}}},created:function(){var t=this;t.$nextTick((function(){t.noDetail=!1,t.$router.history.current.query.hasOwnProperty("idCopy")?t.idCopy=t.$router.history.current.query.idCopy:t.idCopy="",setTimeout((function(){var e=new URLSearchParams,a={type:"admin",cmd:"get",config:"true",code:t.$router.history.current.params.tableName,respone:"tableConfig"};e.append("text",JSON.stringify(a)),O.a.post("/o/rest/v2/socket/web",e,{}).then((function(n){var i=n.data;t.dataSocket[i.respone]=i[i.respone],a={type:"admin",cmd:"get",code:t.$router.history.current.params.tableName,respone:"detail",responeType:"detail",filter:[{key:"id",value_filter:t.idCopy?t.idCopy:t.id,compare:"=",type:"number"}]},e=new URLSearchParams,e.append("text",JSON.stringify(a)),O.a.post("/o/rest/v2/socket/web",e,{}).then((function(e){var a=e.data;t.dataSocket[a.respone]=a[a.respone],null===t.dataSocket["tableConfig"]||void 0===t.dataSocket["tableConfig"]||null===t.dataSocket["detail"]||void 0===t.dataSocket["detail"]||"detail"!==a.respone&&"tableConfig"!==a.respone||(Array.isArray(t.dataSocket["detail"])&&t.dataSocket["detail"].length>0?(t.nameScreen=t.dataSocket["detail"][0][a.title],t.showDetailForm=!0,t.noDetail=!1):t.noDetail=!0),"listTableMenu"===a.respone?t.$store.commit("setlistTableMenu",t.dataSocket[a.respone]):"loginUser"===a.respone&&t.$store.commit("setloginUser",a["loginUser"]),"0"===String(t.id)&&(t.nameScreen="Thêm mới dữ liệu",t.showDetailForm=!0,t.noDetail=!1)})).catch((function(t){}))})).catch((function(t){}))}),10)}))},methods:{backToList:function(){var t=this,e=t.$router.history.current,a=e.query,n=e.path,i="?";for(var r in a["state_change"]="0",a["renew"]="",a)""!==a[r]&&"undefined"!==a[r]&&void 0!==a[r]&&(i+=r+"="+a[r]+"&");i+="renew="+Math.floor(100*Math.random())+1,t.$router.push({path:n.substring(0,n.indexOf("/editor/"))+i})},deleteRecord:function(){var t=this,e=confirm("Bạn có muốn xoá bản ghi này?");if(e){var a=new URLSearchParams,n={type:"admin",cmd:"delete",respone:"detail",id:t.id,code:t.$router.history.current.params.tableName};a=new URLSearchParams,a.append("text",JSON.stringify(n)),O.a.post("/o/rest/v2/socket/web",a,{}).then((function(e){var a=e.data;if(t.dataSocket[a.respone]=a[a.respone],"get"!==a["cmd"]){var n=t.$router.history.current,i=n.query,r="?";for(var o in i["state_change"]="0",i["renew"]="",i)""!==i[o]&&"undefined"!==i[o]&&void 0!==i[o]&&(r+=o+"="+i[o]+"&");r+="renew="+Math.floor(100*Math.random())+1,t.$router.push({path:n.path.substring(0,n.path.indexOf("/editor/"))+r})}})).catch((function(t){}))}}}},X=z,W=Object(p["a"])(X,V,U,!1,null,null,null),Y=W.exports,J=a("d30b"),Z=a.n(J);n["default"].use(Z.a),n["default"].component("vue-confirm-dialog",Z.a.default),N.a.options={positionClass:"toast-top-center"};var tt={props:["tableName"],components:{BbatTable:q},data:function(){return{loading:!1,titleAction:"ĐANG ĐỒNG BỘ",dialog_cloneServiceProcess:!1,quyTrinhSaoChep:"",validForm:!1,processName:"",processNo:"",oldProcessName:"",dialogLoadingSync:!1}},methods:{cloneProcessEmitted:function(t,e,a){this.quyTrinhSaoChep=e,this.oldProcessName=a,this.dialog_cloneServiceProcess=!0},cloneTemplateEmitted:function(t,e,a){this.cloneMauHoSo(t,e,a)},cloneServiceProcess:function(){var t=this;if(t.$refs.formCloneServiceProcess.validate()){t.loading=!0;var e=new URLSearchParams;e.append("processNo",t.processNo),e.append("processName",t.processName),O.a.post("/o/rest/v2/serviceprocesses/"+t.serviceProcessId+"/clone",e,{}).then((function(e){t.loading=!1,t.dialog_cloneServiceProcess=!1,t.$refs.formCloneServiceProcess.reset()})).catch((function(e){t.loading=!1}))}},cloneQuyTrinh:function(){var t=this;t.$refs.formCloneServiceProcess.validate()&&(t.dialog_cloneServiceProcess=!1,t.$confirm({title:"SAO CHÉP QUY TRÌNH THỦ TỤC",message:"Bạn có chắc chắn thực hiện sao chép quy trình này",button:{yes:"Có",no:"Không"},callback:function(e){if(1==e){t.loading=!0,t.dialogLoadingSync=!0;var a={headers:{groupId:window.themeDisplay.getScopeGroupId(),Accept:"application/json","Content-Type":"application/x-www-form-urlencoded",Token:void 0!==window.Liferay?window.Liferay.authToken:""}},n=new URLSearchParams;n.append("type","processes"),n.append("processNo",t.quyTrinhSaoChep),n.append("toProcessNo",t.processNo),n.append("fromServerNo",""),n.append("toServerNo",""),t.titleAction="ĐANG SAO CHÉP",O.a.post("/o/rest/v2/backupDatas/exportProcess",n,a).then((function(e){t.loading=!1,t.dialogLoadingSync=!1,N.a.success("Quy trình đã được sao chép thành công")})).catch((function(){t.loading=!1,t.dialogLoadingSync=!1,N.a.error("Sao chép thất bại")}))}}}))},cloneMauHoSo:function(t,e,a){var n=this;n.$confirm({title:"ĐỒNG BỘ MẪU HỒ SƠ",message:"Bạn có chắc chắn đồng bộ mẫu hồ sơ này sang Cổng dịch vụ công",button:{yes:"Có",no:"Không"},callback:function(t){if(1==t){n.loading=!0,n.dialogLoadingSync=!0;var a={headers:{groupId:window.themeDisplay.getScopeGroupId(),Accept:"application/json","Content-Type":"application/x-www-form-urlencoded",Token:void 0!==window.Liferay?window.Liferay.authToken:""}},i=new URLSearchParams;i.append("type","templates"),i.append("templateNo",e),i.append("toTemplateNo",e),i.append("fromServerNo",""),i.append("toServerNo","SERVER_DVC"),n.titleAction="ĐANG ĐỒNG BỘ",O.a.post("/o/rest/v2/backupDatas/exportProcess",i,a).then((function(t){n.loading=!1,n.dialogLoadingSync=!1,N.a.success("Mẫu hồ sơ đã được đồng bộ sang cổng Dịch vụ công")})).catch((function(){n.loading=!1,n.dialogLoadingSync=!1,N.a.error("Đồng bộ thất bại")}))}}})}}},et=tt,at=Object(p["a"])(et,I,P,!1,null,null,null),nt=at.exports,it=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("bbat-table-editor",{attrs:{"table-name":t.tableName,id:t.id}})],1)},rt=[],ot={props:["tableName","id"],components:{BbatTableEditor:Y},data:function(){return{}}},st=ot,ct=Object(p["a"])(st,it,rt,!1,null,null,null),lt=ct.exports,dt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticStyle:{margin:"0 auto"}},[a("v-card",{staticClass:"mb-3 mt-0"},[a("v-toolbar",{attrs:{color:"blue darken-3",dark:"",height:"40"}},[a("v-toolbar-title",{staticClass:"ml-0"},[t._v("\n        Dịch vụ công\n      ")]),a("v-spacer"),a("v-btn",{attrs:{dark:"",flat:"",loading:t.exportLoading,disabled:t.exportLoading},on:{click:function(e){return t.exportTableData()}}},[a("v-icon",{attrs:{right:"",dark:""}},[t._v("cloud_download")]),t._v("   Xuất file Excel \n      ")],1)],1)],1),a("v-card",{staticClass:"py-0 px-2"},[a("div",[a("v-form",{ref:"form",attrs:{"lazy-validation":""},model:{value:t.validFormSearch,callback:function(e){t.validFormSearch=e},expression:"validFormSearch"}},[a("div",[a("div",{staticClass:"adv_search my-2 px-2",style:t.boNganh?"background: #eeeeee;width: 100%":"background: #eeeeee"},[a("div",{class:t.isDvc?"searchAdvanced-content pb-2":"searchAdvanced-content py-2"},[a("v-layout",{attrs:{wrap:""}},[t.isDvc&&!t.boNganh?a("v-flex",{staticClass:"px-2",attrs:{xs12:""}},[a("v-layout",{attrs:{wrap:"","align-center":""}},[a("v-flex",{staticClass:"text-bold",staticStyle:{"font-weight":"450",width:"200px"}},[t._v("Cấp đơn vị thực hiện:")]),a("v-flex",{staticStyle:{width:"calc(100% - 200px)"}},[a("v-radio-group",{staticClass:"mt-2",attrs:{row:""},model:{value:t.capCoQuanThucHien,callback:function(e){t.capCoQuanThucHien=e},expression:"capCoQuanThucHien"}},t._l(t.administrationList,(function(e,n){return a("v-radio",{key:n,attrs:{value:e.groupCode}},["XA_PHUONG"===e.groupCode?a("div",{attrs:{slot:"label"},slot:"label"},[a("v-menu",{staticClass:"d-inline-block",attrs:{right:"","offset-x":""}},[a("span",{attrs:{slot:"activator",small:"",color:"primary"},slot:"activator"},[t._v("\n                                "+t._s(e.groupName)+" "),t.quanhuyenSelected?a("span",[t._v("/ Cấp xã "+t._s(t.quanhuyenSelected.itemName))]):t._e(),t._v(" "),a("v-icon",{staticClass:"text-bold",attrs:{size:"18"}},[t._v("arrow_drop_down")])],1),a("v-list",t._l(t.listDoiTuong,(function(e,n){return a("v-list-tile",{key:n,on:{click:function(a){return t.getAgencys(t.capCoQuanThucHien,e)}}},[a("v-list-tile-title",[t.quanhuyenSelected.itemCode===e.itemCode?a("v-icon",{staticClass:"blue--text",attrs:{size:"18"}},[t._v("check")]):t._e(),t._v("  Cấp xã "+t._s(e.itemName))],1)],1)})),1)],1)],1):a("span",{attrs:{slot:"label"},slot:"label"},[t._v("\n                            "+t._s(e.groupName)+"\n                          ")])])})),1)],1)],1)],1):t._e(),t.isDvc?a("v-flex",{class:t.isDvc?"mb-2 px-2":"my-2 px-2",attrs:{xs12:""}},[a("div",[a("div",{staticClass:"d-inline-block text-bold",staticStyle:{"font-weight":"450",width:"200px"}},[t._v("Đơn vị thực hiện"),a("span",{staticStyle:{color:"red"}},[t._v(" (*)")]),t._v(":")]),a("v-autocomplete",{staticClass:"select-search d-inline-block",staticStyle:{width:"calc(100% - 200px)"},attrs:{placeholder:"Chọn đơn vị thực hiện",items:t.govAgencyList,"item-text":"itemName","item-value":"itemCode","hide-details":"","hide-no-data":"",solo:"",flat:"",height:"32","min-height":"32",clearable:"",required:"",rules:[function(t){return!!t||"Chọn đơn vị thực hiện"}]},model:{value:t.govAgencyFilter,callback:function(e){t.govAgencyFilter=e},expression:"govAgencyFilter"}})],1)]):t._e(),a("v-flex",{class:t.isDvc?"mb-2 px-2":"my-2 px-2",attrs:{xs12:""}},[a("div",[a("div",{staticClass:"d-inline-block text-bold",staticStyle:{"font-weight":"450",width:"200px"}},[t._v("Lĩnh vực"),a("span",{staticStyle:{color:"red"}},[t._v(" (*)")])]),a("v-autocomplete",{staticClass:"select-search d-inline-block",staticStyle:{width:"calc(100% - 200px)"},attrs:{placeholder:"Chọn lĩnh vực",items:t.domainList,"item-text":"domainName","item-value":"domainCode","hide-details":"","hide-no-data":"",solo:"",flat:"",height:"32","min-height":"32",clearable:""},scopedSlots:t._u([{key:"item",fn:function(e){return[a("v-flex",{staticClass:"v-list__tile__title",attrs:{xs12:""}},[t._v(t._s(e.item.domainCode)+" - "+t._s(e.item.domainName))])]}}]),model:{value:t.domainFilter,callback:function(e){t.domainFilter=e},expression:"domainFilter"}})],1)]),a("v-flex",{staticClass:"mb-2 px-2",attrs:{xs12:""}},[a("div",[a("div",{staticClass:"d-inline-block text-bold",staticStyle:{"font-weight":"450",width:"200px"}},[t._v("Thủ tục:")]),a("v-autocomplete",{staticClass:"select-search d-inline-block",staticStyle:{width:"calc(100% - 200px)"},attrs:{placeholder:"Chọn thủ tục",items:t.serviceInfoList,"item-text":"serviceName","item-value":"serviceCode","hide-details":"","hide-no-data":"",solo:"",flat:"",height:"32","min-height":"32",clearable:""},scopedSlots:t._u([{key:"item",fn:function(e){return[a("v-flex",{staticClass:"v-list__tile__title",attrs:{xs12:""}},[t._v(t._s(e.item.serviceCode)+" - "+t._s(e.item.serviceName))])]}}]),model:{value:t.serviceFilter,callback:function(e){t.serviceFilter=e},expression:"serviceFilter"}})],1)]),a("v-flex",{staticClass:"mb-2 px-2",attrs:{xs12:""}},[a("div",[a("div",{staticClass:"d-inline-block text-bold",staticStyle:{"font-weight":"450",width:"200px"}},[t._v("Từ khóa:")]),a("v-text-field",{staticClass:"search-input-appbar input-search d-inline-block",staticStyle:{width:"calc(100% - 200px)"},attrs:{placeholder:"Nhập từ khóa","single-lines":"","hide-details":"",solo:"",flat:"",height:"32","min-height":"32",clearable:""},on:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.getServiceConfigList("reset")}},model:{value:t.keyword,callback:function(e){t.keyword=e},expression:"keyword"}})],1)]),a("v-flex",{staticClass:"mb-2 px-2",attrs:{xs12:"",sm6:""}},[a("div",[a("div",{staticClass:"d-inline-block text-bold",staticStyle:{"font-weight":"450",width:"200px"}},[t._v("Mức độ:")]),a("v-autocomplete",{staticClass:"select-search d-inline-block",staticStyle:{width:"calc(100% - 200px)"},attrs:{placeholder:"Chọn mức độ",items:t.levelList,"item-text":"levelName","item-value":"level","hide-details":"","hide-no-data":"",solo:"",flat:"",height:"32","min-height":"32",clearable:""},model:{value:t.levelFilter,callback:function(e){t.levelFilter=e},expression:"levelFilter"}})],1)])],1),a("v-flex",{staticClass:"xs12 mx-2"},[a("v-btn",{staticClass:"mx-0 mb-0",style:t.loadingTable?"pointer-events: none":"",attrs:{loading:t.loadingTable,color:"blue darken-3",dark:""},nativeOn:{click:function(e){return t.getServiceConfigList("reset")}}},[a("v-icon",{attrs:{size:"18"}},[t._v("search")]),t._v("   Tìm kiếm\n                ")],1),a("v-btn",{staticClass:"mx-0 my-0",attrs:{color:"blue darken-3 right",dark:""},on:{click:t.openCreateServiceConfig}},[a("v-icon",[t._v("add_circle_outline")]),t._v(" \n                  Thêm mới dịch vụ công\n                ")],1)],1)],1)])])]),a("v-data-table",{staticClass:"table-landing table-bordered mt-3",staticStyle:{border:"1px solid rgb(222, 222, 222)"},attrs:{headers:t.serviceConfigListHeader,items:t.serviceConfigList,"hide-actions":"","no-data-text":"Không có dữ liệu"},scopedSlots:t._u([{key:"headers",fn:function(e){return[a("tr",{staticStyle:{height:"42px"}},t._l(e.headers,(function(e){return a("th",{key:e.text,class:e["class"]?e["class"]:"",staticStyle:{"border-right":"1px solid #dedede"},attrs:{width:e["width"]?e["width"]+"px":""}},[a("v-tooltip",{attrs:{bottom:""}},[a("span",{attrs:{slot:"activator"},slot:"activator"},[t._v(t._s(e.text))]),a("span",[t._v(t._s(e.text))])])],1)})),0)]}},{key:"items",fn:function(e){return[a("tr",{class:{active:e.index%2==1},staticStyle:{cursor:"pointer"}},[a("td",{staticClass:"text-xs-center px-2 py-2",staticStyle:{width:"50px",height:"36px","border-right":"1px solid #dedede"},on:{click:function(a){return t.editServiceConfig(e.item)}}},[t.loadingTable?a("content-placeholders",[a("content-placeholders-text",{attrs:{lines:1}})],1):a("div",[a("span",[t._v(t._s(t.serviceconfigPage*t.numberPerPage-t.numberPerPage+e.index+1))])])],1),a("td",{staticClass:"text-xs-left px-2 py-2",staticStyle:{height:"36px","border-right":"1px solid #dedede"},on:{click:function(a){return t.editServiceConfig(e.item)}}},[t.loadingTable?a("content-placeholders",[a("content-placeholders-text",{attrs:{lines:1}})],1):a("div",[a("span",[t._v(t._s(e.item.serviceName))])])],1),a("td",{staticClass:"text-xs-left px-2 py-2",staticStyle:{height:"36px","border-right":"1px solid #dedede"},on:{click:function(a){return t.editServiceConfig(e.item)}}},[t.loadingTable?a("content-placeholders",[a("content-placeholders-text",{attrs:{lines:1}})],1):a("div",[a("span",[t._v(t._s(e.item.govAgencyName))])])],1),a("td",{staticClass:"text-xs-center px-2 py-2",staticStyle:{height:"36px","border-right":"1px solid #dedede"},on:{click:function(a){return t.editServiceConfig(e.item)}}},[t.loadingTable?a("content-placeholders",[a("content-placeholders-text",{attrs:{lines:1}})],1):a("div",[a("span",[t._v(t._s(e.item.serviceLevel))])])],1),a("td",{staticClass:"text-xs-center px-2 py-2",staticStyle:{width:"290px",height:"36px","border-right":"1px solid #dedede"}},[t.loadingTable?a("content-placeholders",[a("content-placeholders-text",{attrs:{lines:1}})],1):a("div",[a("v-tooltip",{staticClass:"mx-2",attrs:{top:""}},[a("v-btn",{staticClass:"mx-0 my-0",attrs:{slot:"activator",color:"blue",flat:"",icon:""},on:{click:function(a){return t.editServiceConfig(e.item)}},slot:"activator"},[a("v-icon",[t._v("edit")])],1),a("span",[t._v("Sửa dịch vụ công")])],1),a("v-tooltip",{staticClass:"mx-2",attrs:{top:""}},[a("v-btn",{staticClass:"mx-0 my-0",attrs:{slot:"activator",color:"red",flat:"",icon:""},on:{click:function(a){return t.deleteServiceConfig(e.item)}},slot:"activator"},[a("v-icon",[t._v("delete")])],1),a("span",[t._v("Xóa dịch vụ công")])],1),a("v-btn",{attrs:{color:"green darken-3",dark:"",small:""},on:{click:function(a){return t.updateServiceProcessOption(e.item)}}},[a("v-icon",{staticStyle:{color:"white !important"},attrs:{size:18}},[t._v("settings")]),t._v("   Xác lập quy trình\n                          ")],1)],1)],1)])]}}])}),a("div",{staticClass:"my-2"},[a("div",{staticClass:"text-xs-right layout wrap",staticStyle:{position:"relative"}},[a("div",{staticClass:"flex pagging-table"},[a("tiny-pagination",{attrs:{total:t.totalServiceConfig,page:t.serviceconfigPage,numberPerPage:t.numberPerPage,nameRecord:"dịch vụ công","custom-class":"custom-tiny-class"},on:{"tiny:change-page":t.changePage}})],1)])])],1)])],1)},ut=[],pt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[t.isMobile?t._e():a("div",{staticStyle:{"text-align":"left",position:"absolute","line-height":"46px"}},[t._v("Tổng số "),a("span",{staticClass:"text-bold primary--text"},[t._v(t._s(t.total))]),t._v(". ")]),t.total>0?a("div",{staticClass:"vue-tiny-pagination pagination layout",style:t.isMobile?"":"justify-content: flex-end; -webkit-justify-content: flex-end;"},[a("div",{class:t.isMobile?"pr-3 xs4 flex":"px-3 xs4 flex"},[a("v-select",{attrs:{items:t.totalPagesData,"item-text":"text","item-value":"value",autocomplete:""},on:{input:t.goToPage},model:{value:t.currentPage,callback:function(e){t.currentPage=e},expression:"currentPage"}})],1),a("ul",{staticClass:"tiny-pagination",class:t.customClass},[a("li",{staticClass:"page-item",class:t.classFirstPage},[a("button",{staticClass:"pagination__navigation",class:t.classFirstPage,on:{click:function(e){return e.preventDefault(),t.lastPageLast.apply(null,arguments)}}},[a("i",{staticClass:"material-icons icon",attrs:{"aria-hidden":"true"}},[t._v("first_page")])])]),a("li",{staticClass:"page-item",class:t.classFirstPage},[a("button",{staticClass:"pagination__navigation",class:t.classFirstPage,staticStyle:{"border-left":"0"},on:{click:function(e){return e.preventDefault(),t.lastPage.apply(null,arguments)}}},[a("i",{staticClass:"material-icons icon",attrs:{"aria-hidden":"true"}},[t._v("chevron_left")])])]),a("li",{staticClass:"page-item",staticStyle:{"margin-right":"0"}},[a("button",{staticClass:"pagination__navigation pagination__navigation--disabled text-bold primary--text",staticStyle:{"border-right":"0","border-left":"0",height:"30px",width:"30px"}},[t._v("\n          "+t._s(t.titlePage)+"\n        ")])]),a("li",{staticClass:"page-item",class:t.classLastPage,staticStyle:{"margin-right":"0"}},[a("button",{staticClass:"pagination__navigation",class:t.classLastPage,staticStyle:{"border-left":"0"},on:{click:function(e){return e.preventDefault(),t.nextPage.apply(null,arguments)}}},[a("i",{staticClass:"material-icons icon",attrs:{"aria-hidden":"true"}},[t._v("chevron_right")])])]),a("li",{staticClass:"page-item",class:t.classLastPage},[a("button",{staticClass:"pagination__navigation",class:t.classLastPage,on:{click:function(e){return e.preventDefault(),t.nextPageLast.apply(null,arguments)}}},[a("i",{staticClass:"material-icons icon",attrs:{"aria-hidden":"true"}},[t._v("last_page")])])])])]):t._e()])},vt=[],mt="TinyPagination",ht={name:mt,props:{total:{type:Number,required:!0},page:{type:Number,default:1},lang:{type:String,default:"en"},customClass:{type:String},limits:{type:Array,default:function(){return[10,15,20,50,100]}},showLimit:{type:Boolean,default:!0},numberPerPage:{type:Number,default:15}},data:function(){return{version:"0.2.1",currentPage:1,translations:{en:{prev:"Previous",title:"Page",next:"Next"}},availableLanguages:["en"]}},created:function(){this.currentPage=this.page},watch:{page:function(t){this.currentPage=parseInt(t)}},computed:{translation:function(){return this.availableLanguages.includes(this.lang)?this.translations[this.lang]:this.translations["en"]},totalPages:function(){return Math.ceil(this.total/this.numberPerPage)},totalPagesData:function(){for(var t=[],e={},a=1;a<=this.totalPages;++a)e={value:a,text:"Trang "+a},t.push(e);return t},titlePage:function(){return"".concat(this.currentPage)},classFirstPage:function(){return{"c-not-allowed pagination__navigation--disabled":1===this.currentPage}},classLastPage:function(){return{"c-not-allowed pagination__navigation--disabled":this.currentPage===this.totalPages}},isMobile:function(){return this.$store.getters.getIsMobile}},methods:{nextPage:function(){this.currentPage!==this.totalPages&&(this.currentPage+=1,this.$emit("tiny:change-page",{page:this.currentPage}))},lastPage:function(){this.currentPage>1&&(this.currentPage-=1,this.$emit("tiny:change-page",{page:this.currentPage}))},nextPageLast:function(){this.currentPage=this.totalPages,this.$emit("tiny:change-page",{page:this.totalPages})},lastPageLast:function(){this.currentPage=1,this.$emit("tiny:change-page",{page:1})},goToPage:function(){this.$emit("tiny:change-page",{page:this.currentPage})},onLimitChange:function(){this.currentPage=1}}},gt=ht,ft=Object(p["a"])(gt,pt,vt,!1,null,null,null),bt=ft.exports;function xt(t,e){return kt(t)||St(t,e)||Ct(t,e)||yt()}function yt(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function Ct(t,e){if(t){if("string"===typeof t)return _t(t,e);var a=Object.prototype.toString.call(t).slice(8,-1);return"Object"===a&&t.constructor&&(a=t.constructor.name),"Map"===a||"Set"===a?Array.from(t):"Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a)?_t(t,e):void 0}}function _t(t,e){(null==e||e>t.length)&&(e=t.length);for(var a=0,n=new Array(e);a<e;a++)n[a]=t[a];return n}function St(t,e){var a=null==t?null:"undefined"!==typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=a){var n,i,r=[],o=!0,s=!1;try{for(a=a.call(t);!(o=(n=a.next()).done);o=!0)if(r.push(n.value),e&&r.length===e)break}catch(c){s=!0,i=c}finally{try{o||null==a["return"]||a["return"]()}finally{if(s)throw i}}return r}}function kt(t){if(Array.isArray(t))return t}var Dt={components:{"tiny-pagination":bt},data:function(){return{exportLoading:!1,validFormSearch:!1,isDvc:!1,quanhuyenSelected:"",boNganh:!1,administrationList:[],capCoQuanThucHien:"",govAgencyList:[],govAgencyFilter:"",domainList:[],domainFilter:"",serviceInfoList:[],serviceFilter:"",levelList:[{levelName:"Mức độ 2",level:2},{levelName:"Mức độ 3",level:3},{levelName:"Mức độ 4",level:4}],levelFilter:"",keyword:"",dialogAddApi:!1,dialogAddRole:!1,apiSelected:"",apiCode:"",apiName:"",listRoleApi:[],roleList:[],apiRole:"",apiDescription:"",className:"",listStatus:[{name:"Sử dụng",value:1},{name:"Không sử dụng",value:0}],apiStatus:"",updateApi:"add",fromDate:"",toDate:"",loading:!1,loadingTable:!1,loadingGetRole:!1,ladingAddRole:!1,menuDate1:!1,menuDate2:!1,fromReceiveDate:"",fromReceiveDateFormatted:"",toReceiveDate:"",toReceiveDateFormatted:"",apiItems:[],api:"",dossierNo:"",serviceConfigList:"",serviceconfigPage:1,numberPerPage:10,totalServiceConfig:0,options:{mode:"code"},dataRequest:{},dataResponse:{},dialog_dataInfo:!1,rules:{required:function(t){return!!t||"Thông tin bắt buộc"}},serviceConfigListHeader:[{text:"STT",align:"center",sortable:!1,width:50},{text:"Tên thủ tục",align:"center",sortable:!1},{text:"Đơn vị xử lý",align:"center",sortable:!1},{text:"Mức độ",align:"center",sortable:!1},{text:"Thao tác",align:"center",sortable:!1}],headerListRole:[{text:"STT",align:"center",sortable:!1,width:50},{text:"Mã phân quyền",align:"center",sortable:!1},{text:"Tên",align:"center",sortable:!1},{text:"Thao tác",align:"center",sortable:!1}]}},computed:{},created:function(){var t=this;try{t.boNganh=boNganh}catch(e){}try{t.isDvc=isDvc}catch(e){}t.$nextTick((function(){t.getServiceConfigList(),!t.boNganh&&t.isDvc?t.getServiceAdminisTration():t.getDomains()}))},watch:{capCoQuanThucHien:function(t){var e=this;e.govAgencyList=[],e.govAgencyFilter="",e.domainFilter="",e.serviceFilter="",e.quanhuyenSelected="",t&&("XA_PHUONG"!==t&&e.getAgencys(t),"QUAN_HUYEN"===t||"XA_PHUONG"===t?(e.getDomains("QUAN_HUYEN"===t?"CAP_HUYEN":"CAP_XA"),e.getServiceInfo("QUAN_HUYEN"===t?"CAP_HUYEN":"CAP_XA",e.domainFilter)):(e.domainList=[],e.serviceInfoList=[]))},govAgencyFilter:function(t){var e=this;e.domainFilter="",e.serviceFilter="",t&&"SBN"===e.capCoQuanThucHien&&(e.getDomains(t),e.getServiceInfo(t,e.domainFilter))},domainFilter:function(t){var e=this;t&&("QUAN_HUYEN"===e.capCoQuanThucHien||"XA_PHUONG"===e.capCoQuanThucHien?e.getServiceInfo("QUAN_HUYEN"===e.capCoQuanThucHien?"CAP_HUYEN":"CAP_XA",t):e.getServiceInfo(e.govAgencyFilter,t))}},methods:{exportTableData:function(){var t=this,e={headers:{groupId:window.themeDisplay.getScopeGroupId(),Token:void 0!==window.Liferay?window.Liferay.authToken:"","Content-Type":"application/x-www-form-urlencoded",Accept:"application/json"},responseType:"blob"};t.exportLoading=!0,O.a.get("/o/rest/v2/serviceconfigs?exportExcel=true&columnName=domainCode,domainName,serviceCode,serviceName,govAgencyCode,govAgencyName,serviceLevel&tableName=ServiceConfig",e).then((function(e){t.exportLoading=!1;var a=e.headers["content-disposition"],n=a.split("filename=")[1]||dataReq.fileName;n=n.split('"').join("");var i=document.createElement("a");document.body.appendChild(i),i.style="display: none";var r=window.URL.createObjectURL(e.data);i.href=r,i.download=n,i.click(),window.URL.revokeObjectURL(r)})).catch((function(e){t.exportLoading=!1}))},getServiceAdminisTration:function(){var t=this,e=t.$router.history.current,a=(e.query,function(t){function e(t,e){return t.dictGroupId<e.dictGroupId?-1:t.dictGroupId>e.dictGroupId?1:0}return t.sort(e)});t.$store.dispatch("getServiceAdminisTration",{}).then((function(e){t.administrationList=a(e),t.capCoQuanThucHien="SBN",t.getAgencys("SBN"),t.getAgencys("QUAN_HUYEN")})).catch((function(){}))},getAgencys:function(t,e){var a=this,n=a.$router.history.current,i=(n.query,{administration:t||"",parent:e?e.itemCode:""});e?(a.quanhuyenSelected=e,a.$store.dispatch("getAgencysFromParent",i).then((function(t){a.govAgencyList=t})).catch((function(){a.govAgencyList=[]}))):a.$store.dispatch("getAgencys",i).then((function(e){a.govAgencyList=e,"QUAN_HUYEN"===t&&(a.listDoiTuong=a.govAgencyList)})).catch((function(){a.govAgencyList=[]}))},getAgencysBoNganh:function(){var t=this,e={};t.govAgencyList=[],t.$store.dispatch("getAgencysFromDict",e).then((function(e){t.govAgencyList=e})).catch((function(){t.govAgencyList=[]}))},getDomains:function(t){var e=this,a={agencyCode:t||""};e.domainList=[],e.$store.dispatch("getDomain",a).then((function(t){e.domainList=t})).catch((function(){e.domainList=[]}))},getServiceInfo:function(t,e){var a=this,n={domain:e||"",administration:t||""};a.serviceInfoList=[],a.$store.dispatch("getServiceInfo",n).then((function(t){a.serviceInfoList=t})).catch((function(){a.serviceInfoList=[]}))},openCreateServiceConfig:function(){var t=this,e=t.$router.history.current;e.query;t.govAgencyFilter?t.isDvc&&!t.boNganh?t.$router.push({path:"/table/opencps_serviceconfig/editor/0?administration="+t.capCoQuanThucHien+"&govAgencyCode="+t.govAgencyFilter+"&domainCode="+t.domainFilter+"&serviceCode="+t.serviceFilter+"&level="+t.levelFilter}):t.$router.push({path:"/table/opencps_serviceconfig/editor/0?govAgencyCode="+t.govAgencyFilter+"&domainCode="+t.domainFilter+"&serviceCode="+t.serviceFilter+"&level="+t.levelFilter}):t.isDvc?N.a.error("Vui lòng chọn đơn vị thực hiện để thêm mới"):t.$router.push({path:"/table/opencps_serviceconfig/editor/0?govAgencyCode="+t.govAgencyFilter+"&domainCode="+t.domainFilter+"&serviceCode="+t.serviceFilter+"&level="+t.levelFilter})},getServiceConfigList:function(t){var e=this;t&&(e.serviceconfigPage=1),e.loadingTable=!0;var a={headers:{groupId:window.themeDisplay.getScopeGroupId()},params:{start:e.serviceconfigPage*e.numberPerPage-e.numberPerPage,end:e.serviceconfigPage*e.numberPerPage,agency:e.govAgencyFilter,domain:e.domainFilter,service:e.serviceFilter,level:e.levelFilter,keyword:e.keyword}};O.a.get("/o/rest/v2/serviceconfigs",a).then((function(t){var a=t.data;e.loadingTable=!1,a["data"]?(e.serviceConfigList=Array.isArray(a["data"])?a["data"]:[a["data"]],e.totalServiceConfig=a["total"]):(e.serviceConfigList=[],e.totalServiceConfig=0)})).catch((function(t){e.loadingTable=!1,e.serviceConfigList=[],e.totalServiceConfig=0}))},changePage:function(t){var e=this;e.serviceconfigPage=t.page,e.getServiceConfigList()},editServiceConfig:function(t){var e=this,a=e.$router.history.current,n=a.query;e.$router.push({path:"/table/opencps_serviceconfig/editor/"+t.serviceConfigId,query:n})},deleteServiceConfig:function(t){var e=this,a={headers:{groupId:window.themeDisplay.getScopeGroupId()}},n=confirm("Bạn có chắc chắn xóa dịch vụ công này");n&&O.a.delete("/o/rest/v2/serviceconfigs/"+t["serviceConfigId"],a).then((function(){N.a.success("Xóa dịch vụ công thành công"),e.getServiceConfigList()})).catch((function(t){N.a.error("Xóa dịch vụ công không thành công")}))},updateServiceProcessOption:function(t){var e=this,a=e.$router.history.current;a.query;e.$router.push({path:"/table/opencps_processoption?serviceConfigId="+t.serviceConfigId+"&serviceConfigName="+t.serviceName})},parsedate:function(t){var e=t.split("-"),a=xt(e,3),n=a[0],i=a[1],r=a[2];return"".concat(r,"-").concat(i,"-").concat(n)},currentDate:function(){var t=new Date;return"".concat(t.getFullYear(),"-").concat((t.getMonth()+1).toString().padStart(2,"0"),"-").concat(t.getDate().toString().padStart(2,"0"))},changeDate:function(t){var e=this;e.menuDate1=e.menuDate2=!1,"1"===t?e.fromReceiveDateFormatted=e.formatDate(e.fromReceiveDate):"2"===t&&(e.toReceiveDateFormatted=e.formatDate(e.toReceiveDate))},getMinMax:function(t){if(!t)return null;var e=t.split("/"),a=xt(e,3),n=a[0],i=a[1],r=a[2];return"".concat(r,"-").concat(i,"-").concat(n)},parseDate:function(t){if(!t)return"";if(String(t).indexOf("/")>0){var e=t.split("/"),a=xt(e,3),n=a[0],i=a[1],r=a[2];return"".concat(r,"-").concat(i.padStart(2,"0"),"-").concat(n.padStart(2,"0"))}if(String(t).indexOf("-")>0){var o=t.split("-"),s=xt(o,3),c=s[0],l=s[1],d=s[2];return"".concat(d,"-").concat(l.padStart(2,"0"),"-").concat(c.padStart(2,"0"))}var u=new Date(Number(t));return"".concat(u.getFullYear(),"-").concat((u.getMonth()+1).toString().padStart(2,"0"),"-").concat(u.getDate().toString().padStart(2,"0"))},formatDate:function(t){if(!t)return"";var e=t.split("-"),a=xt(e,3),n=a[0],i=a[1],r=a[2];return"".concat(r,"/").concat(i,"/").concat(n)},currentDateFormat:function(t){var e=t?new Date(t):new Date;return"".concat(e.getDate().toString().padStart(2,"0"),"/").concat((e.getMonth()+1).toString().padStart(2,"0"),"/").concat(e.getFullYear()," ").concat(e.getHours().toString().padStart(2,"0"),":").concat(e.getMinutes().toString().padStart(2,"0"))},backToList:function(){window.history.back()}}},wt=Dt,Tt=Object(p["a"])(wt,dt,ut,!1,null,null,null),It=Tt.exports,Pt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticStyle:{margin:"0 auto"}},[a("v-card",{staticClass:"mb-3 mt-0"},[a("v-toolbar",{attrs:{color:"blue darken-3",dark:"",height:"40"}},[a("v-toolbar-title",{staticClass:"ml-0"},[t._v("\n        Dịch vụ công\n      ")]),a("v-spacer"),a("v-btn",{attrs:{dark:"",flat:"",loading:t.exportLoading,disabled:t.exportLoading},on:{click:function(e){return t.exportTableData()}}},[a("v-icon",{attrs:{right:"",dark:""}},[t._v("cloud_download")]),t._v("   Xuất file Excel \n      ")],1)],1)],1),a("v-card",{staticClass:"py-0 px-2"},[a("div",[a("v-form",{ref:"form",attrs:{"lazy-validation":""},model:{value:t.validFormSearch,callback:function(e){t.validFormSearch=e},expression:"validFormSearch"}},[a("div",[a("div",{staticClass:"adv_search my-2 px-2",style:t.boNganh?"background: #eeeeee;width: 100%":"background: #eeeeee"},[a("div",{class:t.isDvc?"searchAdvanced-content pb-2":"searchAdvanced-content py-2"},[a("v-layout",{attrs:{wrap:""}},[t.isDvc&&!t.boNganh?a("v-flex",{staticClass:"px-2",attrs:{xs12:""}},[a("v-layout",{attrs:{wrap:"","align-center":""}},[a("v-flex",{staticClass:"text-bold",staticStyle:{"font-weight":"450",width:"200px"}},[t._v("Cấp đơn vị thực hiện:")]),a("v-flex",{staticStyle:{width:"calc(100% - 200px)"}},[a("v-radio-group",{staticClass:"mt-2",attrs:{row:""},model:{value:t.capCoQuanThucHien,callback:function(e){t.capCoQuanThucHien=e},expression:"capCoQuanThucHien"}},t._l(t.administrationList,(function(e,n){return a("v-radio",{key:n,attrs:{value:e.groupCode}},["XA_PHUONG"===e.groupCode?a("div",{attrs:{slot:"label"},slot:"label"},[a("v-menu",{staticClass:"d-inline-block",attrs:{right:"","offset-x":""}},[a("span",{attrs:{slot:"activator",small:"",color:"primary"},slot:"activator"},[t._v("\n                                "+t._s(e.groupName)+" "),t.quanhuyenSelected?a("span",[t._v("/ Cấp xã "+t._s(t.quanhuyenSelected.itemName))]):t._e(),t._v(" "),a("v-icon",{staticClass:"text-bold",attrs:{size:"18"}},[t._v("arrow_drop_down")])],1),a("v-list",t._l(t.listDoiTuong,(function(e,n){return a("v-list-tile",{key:n,on:{click:function(a){return t.getAgencys(t.capCoQuanThucHien,e)}}},[a("v-list-tile-title",[t.quanhuyenSelected.itemCode===e.itemCode?a("v-icon",{staticClass:"blue--text",attrs:{size:"18"}},[t._v("check")]):t._e(),t._v("  Cấp xã "+t._s(e.itemName))],1)],1)})),1)],1)],1):a("span",{attrs:{slot:"label"},slot:"label"},[t._v("\n                            "+t._s(e.groupName)+"\n                          ")])])})),1)],1)],1)],1):t._e(),t.isDvc?a("v-flex",{class:t.isDvc?"mb-2 px-2":"my-2 px-2",attrs:{xs12:""}},[a("div",[a("div",{staticClass:"d-inline-block text-bold",staticStyle:{"font-weight":"450",width:"200px"}},[t._v("Đơn vị thực hiện"),a("span",{staticStyle:{color:"red"}},[t._v(" (*)")]),t._v(":")]),a("v-autocomplete",{staticClass:"select-search d-inline-block",staticStyle:{width:"calc(100% - 200px)"},attrs:{placeholder:"Chọn đơn vị thực hiện",items:t.govAgencyList,"item-text":"itemName","item-value":"itemCode","hide-details":"","hide-no-data":"",solo:"",flat:"",height:"32","min-height":"32",clearable:"",required:"",rules:[function(t){return!!t||"Chọn đơn vị thực hiện"}]},model:{value:t.govAgencyFilter,callback:function(e){t.govAgencyFilter=e},expression:"govAgencyFilter"}})],1)]):t._e(),a("v-flex",{class:t.isDvc?"mb-2 px-2":"my-2 px-2",attrs:{xs12:""}},[a("div",[a("div",{staticClass:"d-inline-block text-bold",staticStyle:{"font-weight":"450",width:"200px"}},[t._v("Lĩnh vực"),a("span",{staticStyle:{color:"red"}},[t._v(" (*)")])]),a("v-autocomplete",{staticClass:"select-search d-inline-block",staticStyle:{width:"calc(100% - 200px)"},attrs:{placeholder:"Chọn lĩnh vực",items:t.domainList,"item-text":"domainName","item-value":"domainCode","hide-details":"","hide-no-data":"",solo:"",flat:"",height:"32","min-height":"32",clearable:""},scopedSlots:t._u([{key:"item",fn:function(e){return[a("v-flex",{staticClass:"v-list__tile__title",attrs:{xs12:""}},[t._v(t._s(e.item.domainCode)+" - "+t._s(e.item.domainName))])]}}]),model:{value:t.domainFilter,callback:function(e){t.domainFilter=e},expression:"domainFilter"}})],1)]),a("v-flex",{staticClass:"mb-2 px-2",attrs:{xs12:""}},[a("div",[a("div",{staticClass:"d-inline-block text-bold",staticStyle:{"font-weight":"450",width:"200px"}},[t._v("Thủ tục:")]),a("v-autocomplete",{staticClass:"select-search d-inline-block",staticStyle:{width:"calc(100% - 200px)"},attrs:{placeholder:"Chọn thủ tục",items:t.serviceInfoList,"item-text":"serviceName","item-value":"serviceCode","hide-details":"","hide-no-data":"",solo:"",flat:"",height:"32","min-height":"32",clearable:""},scopedSlots:t._u([{key:"item",fn:function(e){return[a("v-flex",{staticClass:"v-list__tile__title",attrs:{xs12:""}},[t._v(t._s(e.item.serviceCode)+" - "+t._s(e.item.serviceName))])]}}]),model:{value:t.serviceFilter,callback:function(e){t.serviceFilter=e},expression:"serviceFilter"}})],1)]),a("v-flex",{staticClass:"mb-2 px-2",attrs:{xs12:""}},[a("div",[a("div",{staticClass:"d-inline-block text-bold",staticStyle:{"font-weight":"450",width:"200px"}},[t._v("Từ khóa:")]),a("v-text-field",{staticClass:"search-input-appbar input-search d-inline-block",staticStyle:{width:"calc(100% - 200px)"},attrs:{placeholder:"Nhập từ khóa","single-lines":"","hide-details":"",solo:"",flat:"",height:"32","min-height":"32",clearable:""},on:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.getServiceConfigList("reset")}},model:{value:t.keyword,callback:function(e){t.keyword=e},expression:"keyword"}})],1)]),a("v-flex",{staticClass:"mb-2 px-2",attrs:{xs12:"",sm6:""}},[a("div",[a("div",{staticClass:"d-inline-block text-bold",staticStyle:{"font-weight":"450",width:"200px"}},[t._v("Mức độ:")]),a("v-autocomplete",{staticClass:"select-search d-inline-block",staticStyle:{width:"calc(100% - 200px)"},attrs:{placeholder:"Chọn mức độ",items:t.levelList,"item-text":"levelName","item-value":"level","hide-details":"","hide-no-data":"",solo:"",flat:"",height:"32","min-height":"32",clearable:""},model:{value:t.levelFilter,callback:function(e){t.levelFilter=e},expression:"levelFilter"}})],1)])],1),a("v-flex",{staticClass:"xs12 mx-2"},[a("v-btn",{staticClass:"mx-0 mb-0",style:t.loadingTable?"pointer-events: none":"",attrs:{loading:t.loadingTable,color:"blue darken-3",dark:""},nativeOn:{click:function(e){return t.getServiceConfigList("reset")}}},[a("v-icon",{attrs:{size:"18"}},[t._v("search")]),t._v("   Tìm kiếm\n                ")],1),a("v-btn",{staticClass:"mx-0 my-0",attrs:{color:"blue darken-3 right",dark:""},on:{click:t.openCreateServiceConfig}},[a("v-icon",[t._v("add_circle_outline")]),t._v(" \n                  Thêm mới dịch vụ công\n                ")],1)],1)],1)])])]),a("v-data-table",{staticClass:"table-landing table-bordered mt-3",staticStyle:{border:"1px solid rgb(222, 222, 222)"},attrs:{headers:t.serviceConfigListHeader,items:t.serviceConfigList,"hide-actions":"","no-data-text":"Không có dữ liệu"},scopedSlots:t._u([{key:"headers",fn:function(e){return[a("tr",{staticStyle:{height:"42px"}},t._l(e.headers,(function(e){return a("th",{key:e.text,class:e["class"]?e["class"]:"",staticStyle:{"border-right":"1px solid #dedede"},attrs:{width:e["width"]?e["width"]+"px":""}},[a("v-tooltip",{attrs:{bottom:""}},[a("span",{attrs:{slot:"activator"},slot:"activator"},[t._v(t._s(e.text))]),a("span",[t._v(t._s(e.text))])])],1)})),0)]}},{key:"items",fn:function(e){return[a("tr",{class:{active:e.index%2==1},staticStyle:{cursor:"pointer"}},[a("td",{staticClass:"text-xs-center px-2 py-2",staticStyle:{width:"50px",height:"36px","border-right":"1px solid #dedede"},on:{click:function(a){return t.editServiceConfig(e.item)}}},[t.loadingTable?a("content-placeholders",[a("content-placeholders-text",{attrs:{lines:1}})],1):a("div",[a("span",[t._v(t._s(t.serviceconfigPage*t.numberPerPage-t.numberPerPage+e.index+1))])])],1),a("td",{staticClass:"text-xs-left px-2 py-2",staticStyle:{height:"36px","border-right":"1px solid #dedede"},on:{click:function(a){return t.editServiceConfig(e.item)}}},[t.loadingTable?a("content-placeholders",[a("content-placeholders-text",{attrs:{lines:1}})],1):a("div",[a("span",[t._v(t._s(e.item.serviceName))])])],1),a("td",{staticClass:"text-xs-left px-2 py-2",staticStyle:{height:"36px","border-right":"1px solid #dedede"},on:{click:function(a){return t.editServiceConfig(e.item)}}},[t.loadingTable?a("content-placeholders",[a("content-placeholders-text",{attrs:{lines:1}})],1):a("div",[a("span",[t._v(t._s(e.item.govAgencyName))])])],1),a("td",{staticClass:"text-xs-center px-2 py-2",staticStyle:{height:"36px","border-right":"1px solid #dedede"},on:{click:function(a){return t.editServiceConfig(e.item)}}},[t.loadingTable?a("content-placeholders",[a("content-placeholders-text",{attrs:{lines:1}})],1):a("div",[a("span",[t._v(t._s(e.item.serviceLevel))])])],1),a("td",{staticClass:"text-xs-center px-2 py-2",staticStyle:{width:"290px",height:"36px","border-right":"1px solid #dedede"}},[t.loadingTable?a("content-placeholders",[a("content-placeholders-text",{attrs:{lines:1}})],1):a("div",[a("v-tooltip",{staticClass:"mx-2",attrs:{top:""}},[a("v-btn",{staticClass:"mx-0 my-0",attrs:{slot:"activator",color:"blue",flat:"",icon:""},on:{click:function(a){return t.editServiceConfig(e.item)}},slot:"activator"},[a("v-icon",[t._v("edit")])],1),a("span",[t._v("Sửa dịch vụ công")])],1),a("v-tooltip",{staticClass:"mx-2",attrs:{top:""}},[a("v-btn",{staticClass:"mx-0 my-0",attrs:{slot:"activator",color:"red",flat:"",icon:""},on:{click:function(a){return t.deleteServiceConfig(e.item)}},slot:"activator"},[a("v-icon",[t._v("delete")])],1),a("span",[t._v("Xóa dịch vụ công")])],1),a("v-btn",{attrs:{color:"green darken-3",dark:"",small:""},on:{click:function(a){return t.updateServiceProcessOption(e.item)}}},[a("v-icon",{staticStyle:{color:"white !important"},attrs:{size:18}},[t._v("settings")]),t._v("   Xác lập quy trình\n                          ")],1)],1)],1)])]}}])}),a("div",{staticClass:"my-2"},[a("div",{staticClass:"text-xs-right layout wrap",staticStyle:{position:"relative"}},[a("div",{staticClass:"flex pagging-table"},[a("tiny-pagination",{attrs:{total:t.totalServiceConfig,page:t.serviceconfigPage,numberPerPage:t.numberPerPage,nameRecord:"dịch vụ công","custom-class":"custom-tiny-class"},on:{"tiny:change-page":t.changePage}})],1)])])],1)])],1)},At=[];function Nt(t,e){return Ft(t)||Mt(t,e)||Ot(t,e)||Lt()}function Lt(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function Ot(t,e){if(t){if("string"===typeof t)return Rt(t,e);var a=Object.prototype.toString.call(t).slice(8,-1);return"Object"===a&&t.constructor&&(a=t.constructor.name),"Map"===a||"Set"===a?Array.from(t):"Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a)?Rt(t,e):void 0}}function Rt(t,e){(null==e||e>t.length)&&(e=t.length);for(var a=0,n=new Array(e);a<e;a++)n[a]=t[a];return n}function Mt(t,e){var a=null==t?null:"undefined"!==typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=a){var n,i,r=[],o=!0,s=!1;try{for(a=a.call(t);!(o=(n=a.next()).done);o=!0)if(r.push(n.value),e&&r.length===e)break}catch(c){s=!0,i=c}finally{try{o||null==a["return"]||a["return"]()}finally{if(s)throw i}}return r}}function Ft(t){if(Array.isArray(t))return t}var Et={components:{"tiny-pagination":bt},data:function(){return{exportLoading:!1,validFormSearch:!1,isDvc:!1,quanhuyenSelected:"",boNganh:!1,administrationList:[],capCoQuanThucHien:"",govAgencyList:[],govAgencyFilter:"",domainList:[],domainFilter:"",serviceInfoList:[],serviceFilter:"",levelList:[{levelName:"Mức độ 2",level:2},{levelName:"Mức độ 3",level:3},{levelName:"Mức độ 4",level:4}],levelFilter:"",keyword:"",dialogAddApi:!1,dialogAddRole:!1,apiSelected:"",apiCode:"",apiName:"",listRoleApi:[],roleList:[],apiRole:"",apiDescription:"",className:"",listStatus:[{name:"Sử dụng",value:1},{name:"Không sử dụng",value:0}],apiStatus:"",updateApi:"add",fromDate:"",toDate:"",loading:!1,loadingTable:!1,loadingGetRole:!1,ladingAddRole:!1,menuDate1:!1,menuDate2:!1,fromReceiveDate:"",fromReceiveDateFormatted:"",toReceiveDate:"",toReceiveDateFormatted:"",apiItems:[],api:"",dossierNo:"",serviceConfigList:"",serviceconfigPage:1,numberPerPage:10,totalServiceConfig:0,options:{mode:"code"},dataRequest:{},dataResponse:{},dialog_dataInfo:!1,rules:{required:function(t){return!!t||"Thông tin bắt buộc"}},serviceConfigListHeader:[{text:"STT",align:"center",sortable:!1,width:50},{text:"Tên thủ tục",align:"center",sortable:!1},{text:"Đơn vị xử lý",align:"center",sortable:!1},{text:"Mức độ",align:"center",sortable:!1},{text:"Thao tác",align:"center",sortable:!1}],headerListRole:[{text:"STT",align:"center",sortable:!1,width:50},{text:"Mã phân quyền",align:"center",sortable:!1},{text:"Tên",align:"center",sortable:!1},{text:"Thao tác",align:"center",sortable:!1}]}},computed:{},created:function(){var t=this;try{t.boNganh=boNganh}catch(e){}try{t.isDvc=isDvc}catch(e){}t.$nextTick((function(){t.getServiceConfigList(),!t.boNganh&&t.isDvc?t.getServiceAdminisTration():t.getDomains()}))},watch:{capCoQuanThucHien:function(t){var e=this;e.govAgencyList=[],e.govAgencyFilter="",e.domainFilter="",e.serviceFilter="",e.quanhuyenSelected="",t&&("XA_PHUONG"!==t&&e.getAgencys(t),"QUAN_HUYEN"===t||"XA_PHUONG"===t?(e.getDomains("QUAN_HUYEN"===t?"CAP_HUYEN":"CAP_XA"),e.getServiceInfo("QUAN_HUYEN"===t?"CAP_HUYEN":"CAP_XA",e.domainFilter)):(e.domainList=[],e.serviceInfoList=[]))},govAgencyFilter:function(t){var e=this;e.domainFilter="",e.serviceFilter="",t&&"SBN"===e.capCoQuanThucHien&&(e.getDomains(t),e.getServiceInfo(t,e.domainFilter))},domainFilter:function(t){var e=this;t&&("QUAN_HUYEN"===e.capCoQuanThucHien||"XA_PHUONG"===e.capCoQuanThucHien?e.getServiceInfo("QUAN_HUYEN"===e.capCoQuanThucHien?"CAP_HUYEN":"CAP_XA",t):e.getServiceInfo(e.govAgencyFilter,t))}},methods:{exportTableData:function(){var t=this,e={headers:{groupId:window.themeDisplay.getScopeGroupId(),Token:void 0!==window.Liferay?window.Liferay.authToken:"","Content-Type":"application/x-www-form-urlencoded",Accept:"application/json"},responseType:"blob"};t.exportLoading=!0,O.a.get("/o/rest/v2/serviceconfigs?exportExcel=true&columnName=domainCode,domainName,serviceCode,serviceName,govAgencyCode,govAgencyName,serviceLevel&tableName=ServiceConfig",e).then((function(e){t.exportLoading=!1;var a=e.headers["content-disposition"],n=a.split("filename=")[1]||dataReq.fileName;n=n.split('"').join("");var i=document.createElement("a");document.body.appendChild(i),i.style="display: none";var r=window.URL.createObjectURL(e.data);i.href=r,i.download=n,i.click(),window.URL.revokeObjectURL(r)})).catch((function(e){t.exportLoading=!1}))},getServiceAdminisTration:function(){var t=this,e=t.$router.history.current,a=(e.query,function(t){function e(t,e){return t.dictGroupId<e.dictGroupId?-1:t.dictGroupId>e.dictGroupId?1:0}return t.sort(e)});t.$store.dispatch("getServiceAdminisTration",{}).then((function(e){t.administrationList=a(e),t.capCoQuanThucHien="SBN",t.getAgencys("SBN"),t.getAgencys("QUAN_HUYEN")})).catch((function(){}))},getAgencys:function(t,e){var a=this,n=a.$router.history.current,i=(n.query,{administration:t||"",parent:e?e.itemCode:""});e?(a.quanhuyenSelected=e,a.$store.dispatch("getAgencysFromParent",i).then((function(t){a.govAgencyList=t})).catch((function(){a.govAgencyList=[]}))):a.$store.dispatch("getAgencys",i).then((function(e){a.govAgencyList=e,"QUAN_HUYEN"===t&&(a.listDoiTuong=a.govAgencyList)})).catch((function(){a.govAgencyList=[]}))},getAgencysBoNganh:function(){var t=this,e={};t.govAgencyList=[],t.$store.dispatch("getAgencysFromDict",e).then((function(e){t.govAgencyList=e})).catch((function(){t.govAgencyList=[]}))},getDomains:function(t){var e=this,a={agencyCode:t||""};e.domainList=[],e.$store.dispatch("getDomainDvc",a).then((function(t){e.domainList=t})).catch((function(){e.domainList=[]}))},getServiceInfo:function(t,e){var a=this,n={domain:e||"",administration:t||""};a.serviceInfoList=[],a.$store.dispatch("getServiceInfoDvc",n).then((function(t){a.serviceInfoList=t})).catch((function(){a.serviceInfoList=[]}))},openCreateServiceConfig:function(){var t=this,e=t.$router.history.current;e.query;t.govAgencyFilter?t.isDvc&&!t.boNganh?t.$router.push({path:"/table/opencps_serviceconfig_dvc/editor/0?administration="+t.capCoQuanThucHien+"&govAgencyCode="+t.govAgencyFilter+"&domainCode="+t.domainFilter+"&serviceCode="+t.serviceFilter+"&level="+t.levelFilter}):t.$router.push({path:"/table/opencps_serviceconfig_dvc/editor/0?govAgencyCode="+t.govAgencyFilter+"&domainCode="+t.domainFilter+"&serviceCode="+t.serviceFilter+"&level="+t.levelFilter}):t.isDvc?N.a.error("Vui lòng chọn đơn vị thực hiện để thêm mới"):t.$router.push({path:"/table/opencps_serviceconfig_dvc/editor/0?govAgencyCode="+t.govAgencyFilter+"&domainCode="+t.domainFilter+"&serviceCode="+t.serviceFilter+"&level="+t.levelFilter})},getServiceConfigList:function(t){var e=this;t&&(e.serviceconfigPage=1),e.loadingTable=!0;var a={headers:{groupId:window.themeDisplay.getScopeGroupId()}},n={start:e.serviceconfigPage*e.numberPerPage-e.numberPerPage,end:e.serviceconfigPage*e.numberPerPage,agency:e.govAgencyFilter,domain:e.domainFilter,service:e.serviceFilter,level:e.levelFilter,keyword:e.keyword},i=new URLSearchParams;i.append("method","GET"),i.append("url","/serviceconfigs"),i.append("data",JSON.stringify(n)),O.a.post("/o/rest/v2/proxy",i,a).then((function(t){var a=t.data;e.loadingTable=!1,a["data"]?(e.serviceConfigList=Array.isArray(a["data"])?a["data"]:[a["data"]],e.totalServiceConfig=a["total"]):(e.serviceConfigList=[],e.totalServiceConfig=0)})).catch((function(t){e.loadingTable=!1,e.serviceConfigList=[],e.totalServiceConfig=0}))},changePage:function(t){var e=this;e.serviceconfigPage=t.page,e.getServiceConfigList()},editServiceConfig:function(t){var e=this,a=e.$router.history.current,n=a.query;e.$router.push({path:"/table/opencps_serviceconfig_dvc/editor/"+t.serviceConfigId,query:n})},deleteServiceConfig:function(t){var e=this,a=confirm("Bạn có chắc chắn xóa dịch vụ công này");if(a){var n={headers:{groupId:window.themeDisplay.getScopeGroupId()}},i={},r=new URLSearchParams;r.append("method","DELETE"),r.append("url","/serviceconfigs/"+t["serviceConfigId"]),r.append("data",JSON.stringify(i)),O.a.post("/o/rest/v2/proxy",r,n).then((function(t){N.a.success("Xóa dịch vụ công thành công"),e.getServiceConfigList()})).catch((function(t){N.a.error("Xóa dịch vụ công không thành công")}))}},updateServiceProcessOption:function(t){var e=this,a=e.$router.history.current;a.query;e.$router.push({path:"/table/opencps_processoption_dvc?serviceConfigId="+t.serviceConfigId+"&serviceConfigName="+t.serviceName})},parsedate:function(t){var e=t.split("-"),a=Nt(e,3),n=a[0],i=a[1],r=a[2];return"".concat(r,"-").concat(i,"-").concat(n)},currentDate:function(){var t=new Date;return"".concat(t.getFullYear(),"-").concat((t.getMonth()+1).toString().padStart(2,"0"),"-").concat(t.getDate().toString().padStart(2,"0"))},changeDate:function(t){var e=this;e.menuDate1=e.menuDate2=!1,"1"===t?e.fromReceiveDateFormatted=e.formatDate(e.fromReceiveDate):"2"===t&&(e.toReceiveDateFormatted=e.formatDate(e.toReceiveDate))},getMinMax:function(t){if(!t)return null;var e=t.split("/"),a=Nt(e,3),n=a[0],i=a[1],r=a[2];return"".concat(r,"-").concat(i,"-").concat(n)},parseDate:function(t){if(!t)return"";if(String(t).indexOf("/")>0){var e=t.split("/"),a=Nt(e,3),n=a[0],i=a[1],r=a[2];return"".concat(r,"-").concat(i.padStart(2,"0"),"-").concat(n.padStart(2,"0"))}if(String(t).indexOf("-")>0){var o=t.split("-"),s=Nt(o,3),c=s[0],l=s[1],d=s[2];return"".concat(d,"-").concat(l.padStart(2,"0"),"-").concat(c.padStart(2,"0"))}var u=new Date(Number(t));return"".concat(u.getFullYear(),"-").concat((u.getMonth()+1).toString().padStart(2,"0"),"-").concat(u.getDate().toString().padStart(2,"0"))},formatDate:function(t){if(!t)return"";var e=t.split("-"),a=Nt(e,3),n=a[0],i=a[1],r=a[2];return"".concat(r,"/").concat(i,"/").concat(n)},currentDateFormat:function(t){var e=t?new Date(t):new Date;return"".concat(e.getDate().toString().padStart(2,"0"),"/").concat((e.getMonth()+1).toString().padStart(2,"0"),"/").concat(e.getFullYear()," ").concat(e.getHours().toString().padStart(2,"0"),":").concat(e.getMinutes().toString().padStart(2,"0"))},backToList:function(){window.history.back()}}},$t=Et,qt=Object(p["a"])($t,Pt,At,!1,null,null,null),Vt=qt.exports,Ut=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticStyle:{margin:"0 auto"}},[a("v-card",{staticClass:"mb-3 mt-0"},[a("v-toolbar",{attrs:{color:"blue darken-3",dark:"",height:"40"}},[a("v-toolbar-title",{staticClass:"ml-0"},["0"!=t.id?a("span",[t._v("Cập nhật dịch vụ công")]):a("span",[t._v("Thêm mới dịch vụ công")])]),a("v-spacer"),a("v-btn",{attrs:{dark:"",icon:""},nativeOn:{click:function(e){return t.backToList.apply(null,arguments)}}},[a("v-icon",[t._v("reply")])],1)],1)],1),a("v-card",{staticClass:"py-0 px-2"},[a("div",[a("v-form",{ref:"formAddServiceConfig",staticClass:"px-0 mb-5",attrs:{"lazy-validation":""},model:{value:t.validFormAddServiceConfig,callback:function(e){t.validFormAddServiceConfig=e},expression:"validFormAddServiceConfig"}},[a("v-layout",{attrs:{wrap:""}},[a("v-flex",{staticClass:"pr-2 mb-2",attrs:{xs12:"",sm6:""}},[a("v-autocomplete",{attrs:{box:"",items:t.govAgencyList,"item-text":"itemName","item-value":"itemCode",rules:[t.rules.required],required:"","hide-selected":!0,clearable:""},scopedSlots:t._u([{key:"item",fn:function(e){return[e.item.parentItem?a("v-flex",{staticClass:"v-list__tile__title",attrs:{xs12:""}},[t._v("\n                  "+t._s(e.item.itemName)+" - "+t._s(e.item.parentItem.itemName.replace("UBND",""))+"\n                ")]):a("v-flex",{staticClass:"v-list__tile__title",attrs:{xs12:""}},[t._v(t._s(e.item.itemName))])]}}]),model:{value:t.govAgencyFilter,callback:function(e){t.govAgencyFilter=e},expression:"govAgencyFilter"}},[a("template",{slot:"label"},[t._v("Đơn vị thực hiện "),a("span",{staticClass:"red--text darken-3"},[t._v("*")])])],2)],1),a("v-flex",{staticClass:"pl-2 mb-2",attrs:{xs12:"",sm6:""}},[a("v-autocomplete",{attrs:{box:"",items:t.levelList,"item-text":"levelName","item-value":"level",rules:[t.rules.required],required:"","hide-selected":!0,clearable:""},scopedSlots:t._u([{key:"item",fn:function(e){return[a("v-flex",{attrs:{xs12:""}},[t._v(t._s(e.item.levelName))])]}}]),model:{value:t.levelFilter,callback:function(e){t.levelFilter=e},expression:"levelFilter"}},[a("template",{slot:"label"},[t._v("Mức độ "),a("span",{staticClass:"red--text darken-3"},[t._v("*")])])],2)],1),a("v-flex",{staticClass:"mb-2",attrs:{xs12:"",sm12:""}},[a("v-autocomplete",{attrs:{box:"",items:t.domainList,"item-text":"domainName","item-value":"domainCode",clearable:""},scopedSlots:t._u([{key:"item",fn:function(e){return[a("v-flex",{staticClass:"v-list__tile__title",attrs:{xs12:""}},[t._v(t._s(e.item.domainCode)+" - "+t._s(e.item.domainName))])]}}]),model:{value:t.domainFilter,callback:function(e){t.domainFilter=e},expression:"domainFilter"}},[a("template",{slot:"label"},[t._v("Lĩnh vực hành chính")])],2)],1),a("v-flex",{staticClass:"mb-2",attrs:{xs12:"",sm12:""}},[a("v-autocomplete",{attrs:{box:"",items:t.serviceInfoList,"item-text":"serviceName","item-value":"serviceInfoId",rules:[t.rules.required],required:"",clearable:""},scopedSlots:t._u([{key:"item",fn:function(e){return[a("v-flex",{staticClass:"v-list__tile__title",attrs:{xs12:""}},[t._v(t._s(e.item.serviceCode)+" - "+t._s(e.item.serviceName))])]}}]),model:{value:t.serviceFilter,callback:function(e){t.serviceFilter=e},expression:"serviceFilter"}},[a("template",{slot:"label"},[t._v("Thủ tục hành chính "),a("span",{staticClass:"red--text darken-3"},[t._v("*")])])],2)],1),a("v-flex",{attrs:{xs12:""}},[a("v-subheader",{staticClass:"px-0"},[t._v("Hướng dẫn làm thủ tục hành chính tại cơ quan")]),t.reRender?a("codemirror",{attrs:{options:t.cmOptions},model:{value:t.serviceInstruction,callback:function(e){t.serviceInstruction=e},expression:"serviceInstruction"}}):t._e()],1),a("v-flex",{staticClass:"mt-3",attrs:{xs12:""}},[a("v-textarea",{attrs:{placeholder:"Đường dẫn dạng : https://www.abc.com",box:"",clearable:"",rules:[t.rules.syntaxError,t.rules.varchar2000],maxlength:2e3,counter:2e3},model:{value:t.serviceUrl,callback:function(e){t.serviceUrl=e},expression:"serviceUrl"}},[a("template",{slot:"label"},[t._v("Địa chỉ nộp hồ sơ trực tuyến")])],2)],1),a("v-flex",{attrs:{xs12:"",sm6:""}},[a("v-switch",{attrs:{label:"Dịch vụ công dành cho công dân"},model:{value:t.forCitizen,callback:function(e){t.forCitizen=e},expression:"forCitizen"}})],1),a("v-flex",{attrs:{xs12:"",sm6:""}},[a("v-switch",{attrs:{label:"Dịch vụ công dành cho doanh nghiệp"},model:{value:t.forBusiness,callback:function(e){t.forBusiness=e},expression:"forBusiness"}})],1),a("v-flex",{attrs:{xs12:"",sm6:""}},[a("v-switch",{attrs:{label:"Áp dụng phương thức nộp bưu điện"},model:{value:t.postalService,callback:function(e){t.postalService=e},expression:"postalService"}})],1),a("v-flex",{attrs:{xs12:"",sm6:""}},[a("v-switch",{attrs:{label:"Yêu cầu đăng ký hồ sơ thương nhân"},model:{value:t.registration,callback:function(e){t.registration=e},expression:"registration"}})],1)],1),a("v-flex",{staticClass:"text-right pr-3",staticStyle:{position:"fixed",bottom:"0",background:"white","z-index":"4","border-top":"1px solid #dcdcdc",width:"100%","margin-left":"-268px !important",height:"70px"},attrs:{xs12:""}},[a("v-btn",{staticClass:"mr-2",attrs:{color:"red darken-3",dark:""},nativeOn:{click:function(e){return t.backToList.apply(null,arguments)}}},[a("v-icon",[t._v("reply")]),t._v(" \n            Quay lại\n          ")],1),0===t.id||"0"===t.id?a("v-btn",{attrs:{color:"blue darken-3",dark:"",loading:t.loading,disabled:t.loading},on:{click:function(e){return t.updateServiceConfig("add")}}},[a("v-icon",[t._v("add_circle_outline")]),t._v(" \n            Thêm mới\n          ")],1):a("v-btn",{attrs:{color:"blue darken-3",dark:"",loading:t.loading,disabled:t.loading},on:{click:function(e){return t.updateServiceConfig("update")}}},[a("v-icon",[t._v("save")]),t._v(" \n            Cập nhật\n          ")],1)],1)],1)],1)])],1)},Gt=[],Ht=a("111b"),Qt=Ht["a"],jt=Object(p["a"])(Qt,Ut,Gt,!1,null,null,null),Bt=jt.exports,Kt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticStyle:{margin:"0 auto"}},[a("v-card",{staticClass:"mb-3 mt-0"},[a("v-toolbar",{attrs:{color:"blue darken-3",dark:"",height:"40"}},[a("v-toolbar-title",{staticClass:"ml-0"},["0"!=t.id?a("span",[t._v("Cập nhật dịch vụ công")]):a("span",[t._v("Thêm mới dịch vụ công")])]),a("v-spacer"),a("v-btn",{attrs:{dark:"",icon:""},nativeOn:{click:function(e){return t.backToList.apply(null,arguments)}}},[a("v-icon",[t._v("reply")])],1)],1)],1),a("v-card",{staticClass:"py-0 px-2"},[a("div",[a("v-form",{ref:"formAddServiceConfig",staticClass:"px-0 mb-5",attrs:{"lazy-validation":""},model:{value:t.validFormAddServiceConfig,callback:function(e){t.validFormAddServiceConfig=e},expression:"validFormAddServiceConfig"}},[a("v-layout",{attrs:{wrap:""}},[a("v-flex",{staticClass:"pr-2 mb-2",attrs:{xs12:"",sm6:""}},[a("v-autocomplete",{attrs:{box:"",items:t.govAgencyList,"item-text":"itemName","item-value":"itemCode",rules:[t.rules.required],required:"","hide-selected":!0,clearable:""},scopedSlots:t._u([{key:"item",fn:function(e){return[e.item.parentItem?a("v-flex",{staticClass:"v-list__tile__title",attrs:{xs12:""}},[t._v("\n                  "+t._s(e.item.itemName)+" - "+t._s(e.item.parentItem.itemName.replace("UBND",""))+"\n                ")]):a("v-flex",{staticClass:"v-list__tile__title",attrs:{xs12:""}},[t._v(t._s(e.item.itemName))])]}}]),model:{value:t.govAgencyFilter,callback:function(e){t.govAgencyFilter=e},expression:"govAgencyFilter"}},[a("template",{slot:"label"},[t._v("Đơn vị thực hiện "),a("span",{staticClass:"red--text darken-3"},[t._v("*")])])],2)],1),a("v-flex",{staticClass:"pl-2 mb-2",attrs:{xs12:"",sm6:""}},[a("v-autocomplete",{attrs:{box:"",items:t.levelList,"item-text":"levelName","item-value":"level",rules:[t.rules.required],required:"","hide-selected":!0,clearable:""},scopedSlots:t._u([{key:"item",fn:function(e){return[a("v-flex",{attrs:{xs12:""}},[t._v(t._s(e.item.levelName))])]}}]),model:{value:t.levelFilter,callback:function(e){t.levelFilter=e},expression:"levelFilter"}},[a("template",{slot:"label"},[t._v("Mức độ "),a("span",{staticClass:"red--text darken-3"},[t._v("*")])])],2)],1),a("v-flex",{staticClass:"mb-2",attrs:{xs12:"",sm12:""}},[a("v-autocomplete",{attrs:{box:"",items:t.domainList,"item-text":"domainName","item-value":"domainCode",clearable:""},scopedSlots:t._u([{key:"item",fn:function(e){return[a("v-flex",{staticClass:"v-list__tile__title",attrs:{xs12:""}},[t._v(t._s(e.item.domainCode)+" - "+t._s(e.item.domainName))])]}}]),model:{value:t.domainFilter,callback:function(e){t.domainFilter=e},expression:"domainFilter"}},[a("template",{slot:"label"},[t._v("Lĩnh vực hành chính")])],2)],1),a("v-flex",{staticClass:"mb-2",attrs:{xs12:"",sm12:""}},[a("v-autocomplete",{attrs:{box:"",items:t.serviceInfoList,"item-text":"serviceName","item-value":"serviceInfoId",rules:[t.rules.required],required:"",clearable:""},scopedSlots:t._u([{key:"item",fn:function(e){return[a("v-flex",{staticClass:"v-list__tile__title",attrs:{xs12:""}},[t._v(t._s(e.item.serviceCode)+" - "+t._s(e.item.serviceName))])]}}]),model:{value:t.serviceFilter,callback:function(e){t.serviceFilter=e},expression:"serviceFilter"}},[a("template",{slot:"label"},[t._v("Thủ tục hành chính "),a("span",{staticClass:"red--text darken-3"},[t._v("*")])])],2)],1),a("v-flex",{attrs:{xs12:""}},[a("v-subheader",{staticClass:"px-0"},[t._v("Hướng dẫn làm thủ tục hành chính tại cơ quan")]),t.reRender?a("codemirror",{attrs:{options:t.cmOptions},model:{value:t.serviceInstruction,callback:function(e){t.serviceInstruction=e},expression:"serviceInstruction"}}):t._e()],1),a("v-flex",{staticClass:"mt-3",attrs:{xs12:""}},[a("v-textarea",{attrs:{placeholder:"Đường dẫn dạng : https://www.abc.com",box:"",clearable:"",rules:[t.rules.syntaxError,t.rules.varchar2000],maxlength:2e3,counter:2e3},model:{value:t.serviceUrl,callback:function(e){t.serviceUrl=e},expression:"serviceUrl"}},[a("template",{slot:"label"},[t._v("Địa chỉ nộp hồ sơ trực tuyến")])],2)],1),a("v-flex",{attrs:{xs12:"",sm6:""}},[a("v-switch",{attrs:{label:"Dịch vụ công dành cho công dân"},model:{value:t.forCitizen,callback:function(e){t.forCitizen=e},expression:"forCitizen"}})],1),a("v-flex",{attrs:{xs12:"",sm6:""}},[a("v-switch",{attrs:{label:"Dịch vụ công dành cho doanh nghiệp"},model:{value:t.forBusiness,callback:function(e){t.forBusiness=e},expression:"forBusiness"}})],1),a("v-flex",{attrs:{xs12:"",sm6:""}},[a("v-switch",{attrs:{label:"Áp dụng phương thức nộp bưu điện"},model:{value:t.postalService,callback:function(e){t.postalService=e},expression:"postalService"}})],1),a("v-flex",{attrs:{xs12:"",sm6:""}},[a("v-switch",{attrs:{label:"Yêu cầu đăng ký hồ sơ thương nhân"},model:{value:t.registration,callback:function(e){t.registration=e},expression:"registration"}})],1)],1),a("v-flex",{staticClass:"text-right pr-3",staticStyle:{position:"fixed",bottom:"0",background:"white","z-index":"4","border-top":"1px solid #dcdcdc",width:"100%","margin-left":"-268px !important",height:"70px"},attrs:{xs12:""}},[a("v-btn",{staticClass:"mr-2",attrs:{color:"red darken-3",dark:""},nativeOn:{click:function(e){return t.backToList.apply(null,arguments)}}},[a("v-icon",[t._v("reply")]),t._v(" \n            Quay lại\n          ")],1),0===t.id||"0"===t.id?a("v-btn",{attrs:{color:"blue darken-3",dark:"",loading:t.loading,disabled:t.loading},on:{click:function(e){return t.updateServiceConfig("add")}}},[a("v-icon",[t._v("add_circle_outline")]),t._v(" \n            Thêm mới\n          ")],1):a("v-btn",{attrs:{color:"blue darken-3",dark:"",loading:t.loading,disabled:t.loading},on:{click:function(e){return t.updateServiceConfig("update")}}},[a("v-icon",[t._v("save")]),t._v(" \n            Cập nhật\n          ")],1)],1)],1)],1)])],1)},zt=[],Xt=a("eab3"),Wt=Xt["a"],Yt=Object(p["a"])(Wt,Kt,zt,!1,null,null,null),Jt=Yt.exports,Zt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticStyle:{margin:"0 auto"}},[a("v-card",{staticClass:"mb-3 mt-2"},[a("v-toolbar",{attrs:{color:"blue darken-3",dark:"",height:"40"}},[a("v-toolbar-title",{staticClass:"ml-0"},[a("span",{staticClass:"mr-2",on:{click:t.openServiceConfig}},[a("a",{staticStyle:{color:"white","text-decoration":"none","font-size":"16px"},attrs:{href:"javascript:;"}},[t._v("Dịch vụ công")])]),a("span",[a("v-icon",[t._v("chevron_right")])],1),a("span",{staticClass:"ml-2",on:{click:t.openServiceConfigProcess}},[a("a",{staticStyle:{color:"white","text-decoration":"none","font-size":"16px"},attrs:{href:"javascript:;"}},[t._v("Quy trình thực hiện")])])]),a("v-spacer"),a("v-btn",{attrs:{dark:"",icon:""},nativeOn:{click:function(e){return t.backToList.apply(null,arguments)}}},[a("v-icon",[t._v("reply")])],1)],1)],1),a("v-card",{staticClass:"py-0 px-2"},[a("div",[a("v-flex",{attrs:{xs12:""}},[a("span",{staticClass:"text-bold",staticStyle:{color:"#073b76"}},[t._v("Tên dịch vụ công:")]),a("span",[t._v(" "+t._s(t.serviceConfigName))])]),a("v-flex",{staticClass:"mt-2",staticStyle:{height:"32px"},attrs:{xs12:""}},[a("span",{staticClass:"text-bold",staticStyle:{color:"#073b76"}},[t._v("\n          Danh sách quy trình thực hiện:\n        ")]),a("v-btn",{staticClass:"mx-0 my-0 right",attrs:{color:"blue darken-3",dark:""},on:{click:t.openserviceProcessOptionList}},[a("v-icon",[t._v("add_circle_outline")]),t._v(" \n          Thêm quy trình thực hiện\n        ")],1)],1),a("v-data-table",{staticClass:"table-landing table-bordered mt-3",staticStyle:{border:"1px solid rgb(222, 222, 222)"},attrs:{headers:t.serviceProcessOptionHeader,items:t.serviceProcessOptionList,"hide-actions":"","no-data-text":"Không có dữ liệu"},scopedSlots:t._u([{key:"headers",fn:function(e){return[a("tr",{staticStyle:{height:"42px"}},t._l(e.headers,(function(e){return a("th",{key:e.text,class:e["class"]?e["class"]:"",staticStyle:{"border-right":"1px solid #dedede"},attrs:{width:e["width"]?e["width"]+"px":""}},[a("v-tooltip",{attrs:{bottom:""}},[a("span",{attrs:{slot:"activator"},slot:"activator"},[t._v(t._s(e.text))]),a("span",[t._v(t._s(e.text))])])],1)})),0)]}},{key:"items",fn:function(e){return[a("tr",{class:{active:e.index%2==1},staticStyle:{cursor:"pointer"}},[a("td",{staticClass:"text-xs-center px-2 py-2",staticStyle:{width:"50px",height:"36px","border-right":"1px solid #dedede"},on:{click:function(a){return t.editServiceProcessOption(e.item)}}},[t.loadingTable?a("content-placeholders",[a("content-placeholders-text",{attrs:{lines:1}})],1):a("div",[a("span",[t._v(t._s(t.serviceProcessOptionPage*t.numberPerPage-t.numberPerPage+e.index+1))])])],1),a("td",{staticClass:"text-xs-left px-2 py-2",staticStyle:{height:"36px","border-right":"1px solid #dedede"},on:{click:function(a){return t.editServiceProcessOption(e.item)}}},[t.loadingTable?a("content-placeholders",[a("content-placeholders-text",{attrs:{lines:1}})],1):a("div",[a("span",[t._v(t._s(e.item.optionName))])])],1),a("td",{staticClass:"text-xs-left px-2 py-2",staticStyle:{height:"36px","border-right":"1px solid #dedede"},on:{click:function(a){return t.editServiceProcessOption(e.item)}}},[t.loadingTable?a("content-placeholders",[a("content-placeholders-text",{attrs:{lines:1}})],1):a("div",[a("span",[t._v(t._s(e.item.templateName))])])],1),a("td",{staticClass:"text-xs-left px-2 py-2",staticStyle:{height:"36px","border-right":"1px solid #dedede"},on:{click:function(a){return t.editServiceProcessOption(e.item)}}},[t.loadingTable?a("content-placeholders",[a("content-placeholders-text",{attrs:{lines:1}})],1):a("div",[a("span",[t._v(t._s(e.item.processName))])])],1),a("td",{staticClass:"text-xs-center px-2 py-2",staticStyle:{width:"125px",height:"36px","border-right":"1px solid #dedede"}},[t.loadingTable?a("content-placeholders",[a("content-placeholders-text",{attrs:{lines:1}})],1):a("div",[a("v-tooltip",{staticClass:"mx-2",attrs:{top:""}},[a("v-btn",{staticClass:"mx-0 my-0",attrs:{slot:"activator",color:"green",flat:"",icon:""},on:{click:function(a){return t.editServiceProcessOption(e.item)}},slot:"activator"},[a("v-icon",[t._v("edit")])],1),a("span",[t._v("Sửa quy trình")])],1),a("v-tooltip",{staticClass:"mx-2",attrs:{top:""}},[a("v-btn",{staticClass:"mx-0 my-0",attrs:{slot:"activator",color:"red",flat:"",icon:""},on:{click:function(a){return t.deleteServiceProcessOption(e.item)}},slot:"activator"},[a("v-icon",[t._v("delete")])],1),a("span",[t._v("Xóa")])],1)],1)],1)])]}}])}),a("div",{staticClass:"my-2"},[a("div",{staticClass:"text-xs-right layout wrap",staticStyle:{position:"relative"}},[a("div",{staticClass:"flex pagging-table"},[a("tiny-pagination",{attrs:{total:t.totalServiceProcessOption,page:t.serviceProcessOptionPage,numberPerPage:t.numberPerPage,nameRecord:"dịch vụ công","custom-class":"custom-tiny-class"},on:{"tiny:change-page":t.changePage}})],1)])])],1)])],1)},te=[];function ee(t,e){return oe(t)||re(t,e)||ne(t,e)||ae()}function ae(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function ne(t,e){if(t){if("string"===typeof t)return ie(t,e);var a=Object.prototype.toString.call(t).slice(8,-1);return"Object"===a&&t.constructor&&(a=t.constructor.name),"Map"===a||"Set"===a?Array.from(t):"Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a)?ie(t,e):void 0}}function ie(t,e){(null==e||e>t.length)&&(e=t.length);for(var a=0,n=new Array(e);a<e;a++)n[a]=t[a];return n}function re(t,e){var a=null==t?null:"undefined"!==typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=a){var n,i,r=[],o=!0,s=!1;try{for(a=a.call(t);!(o=(n=a.next()).done);o=!0)if(r.push(n.value),e&&r.length===e)break}catch(c){s=!0,i=c}finally{try{o||null==a["return"]||a["return"]()}finally{if(s)throw i}}return r}}function oe(t){if(Array.isArray(t))return t}var se={components:{"tiny-pagination":bt},data:function(){return{validFormSearch:!1,isDvc:!1,boNganh:!1,administrationList:[],capCoQuanThucHien:"",govAgencyList:[],govAgencyFilter:"",domainList:[],domainFilter:"",serviceInfoList:[],serviceFilter:"",levelList:[{levelName:"Mức độ 2",level:2},{levelName:"Mức độ 3",level:3},{levelName:"Mức độ 4",level:4}],levelFilter:"",keyword:"",dialogAddApi:!1,dialogAddRole:!1,apiSelected:"",apiCode:"",apiName:"",listRoleApi:[],roleList:[],apiRole:"",apiDescription:"",className:"",listStatus:[{name:"Sử dụng",value:1},{name:"Không sử dụng",value:0}],apiStatus:"",updateApi:"add",fromDate:"",toDate:"",loading:!1,loadingTable:!1,loadingGetRole:!1,ladingAddRole:!1,menuDate1:!1,menuDate2:!1,fromReceiveDate:"",fromReceiveDateFormatted:"",toReceiveDate:"",toReceiveDateFormatted:"",apiItems:[],api:"",dossierNo:"",serviceProcessOptionList:"",serviceProcessOptionPage:1,numberPerPage:10,totalServiceProcessOption:0,options:{mode:"code"},dataRequest:{},dataResponse:{},dialog_dataInfo:!1,serviceConfigId:"",serviceConfigName:"",rules:{required:function(t){return!!t||"Thông tin bắt buộc"}},serviceProcessOptionHeader:[{text:"STT",align:"center",sortable:!1,width:50},{text:"Tên quy trình xác lập dịch vụ",align:"center",sortable:!1},{text:"Tên mẫu hồ sơ",align:"center",sortable:!1},{text:"Tên quy trình xử lý thủ tục",align:"center",sortable:!1},{text:"Thao tác",align:"center",sortable:!1}]}},computed:{},created:function(){var t=this;t.$nextTick((function(){var e=t.$router.history.current.query;t.serviceConfigId=e.hasOwnProperty("serviceConfigId")&&e.serviceConfigId?e.serviceConfigId:"",t.serviceConfigName=e.hasOwnProperty("serviceConfigName")&&e.serviceConfigName?e.serviceConfigName:"",t.serviceConfigId&&t.getserviceProcessOptionList()}))},watch:{},methods:{openServiceConfig:function(){var t=this;t.$router.push({path:"/table/opencps_serviceconfig"})},openServiceConfigProcess:function(){var t=this;t.$router.push({path:"/table/opencps_processoption?serviceConfigId="+t.serviceConfigId+"&serviceConfigName="+t.serviceConfigName})},openserviceProcessOptionList:function(){var t=this,e=t.$router.history.current;e.query;t.$router.push({path:"/table/opencps_processoption/editor/0?serviceConfigId="+t.serviceConfigId+"&serviceConfigName="+t.serviceConfigName+"&col=serviceConfigId&pk="+t.serviceConfigId})},getserviceProcessOptionList:function(t){var e=this;t&&(e.serviceProcessOptionPage=1),e.loadingTable=!0;var a={headers:{groupId:window.themeDisplay.getScopeGroupId()},params:{start:e.serviceProcessOptionPage*e.numberPerPage-e.numberPerPage,end:e.serviceProcessOptionPage*e.numberPerPage}};O.a.get("/o/rest/v2/serviceconfigs/"+e.serviceConfigId+"/processes",a).then((function(t){var a=t.data;e.loadingTable=!1,a["data"]?(e.serviceProcessOptionList=Array.isArray(a["data"])?a["data"]:[a["data"]],e.totalServiceProcessOption=a["total"]):(e.serviceProcessOptionList=[],e.totalServiceProcessOption=0)})).catch((function(t){e.loadingTable=!1,e.serviceProcessOptionList=[],e.totalServiceProcessOption=0}))},changePage:function(t){var e=this;e.serviceProcessOptionPage=t.page,e.getserviceProcessOptionList()},editServiceProcessOption:function(t){var e=this,a=e.$router.history.current;a.query;e.$router.push({path:"/table/opencps_processoption/editor/"+t.processOptionId+"?serviceConfigId="+e.serviceConfigId+"&serviceConfigName="+e.serviceConfigName})},deleteServiceProcessOption:function(t){var e=this,a={headers:{groupId:window.themeDisplay.getScopeGroupId()}},n=confirm("Bạn có chắc chắn xóa quy trình thực hiện này");n&&O.a.delete("/o/rest/v2/serviceconfigs/"+e.serviceConfigId+"/processes/"+t.processOptionId,a).then((function(){N.a.success("Xóa quy trình thực hiện thành công"),e.getserviceProcessOptionList()})).catch((function(t){N.a.error("Xóa quy trình thực hiện không thành công")}))},parsedate:function(t){var e=t.split("-"),a=ee(e,3),n=a[0],i=a[1],r=a[2];return"".concat(r,"-").concat(i,"-").concat(n)},currentDate:function(){var t=new Date;return"".concat(t.getFullYear(),"-").concat((t.getMonth()+1).toString().padStart(2,"0"),"-").concat(t.getDate().toString().padStart(2,"0"))},changeDate:function(t){var e=this;e.menuDate1=e.menuDate2=!1,"1"===t?e.fromReceiveDateFormatted=e.formatDate(e.fromReceiveDate):"2"===t&&(e.toReceiveDateFormatted=e.formatDate(e.toReceiveDate))},getMinMax:function(t){if(!t)return null;var e=t.split("/"),a=ee(e,3),n=a[0],i=a[1],r=a[2];return"".concat(r,"-").concat(i,"-").concat(n)},parseDate:function(t){if(!t)return"";if(String(t).indexOf("/")>0){var e=t.split("/"),a=ee(e,3),n=a[0],i=a[1],r=a[2];return"".concat(r,"-").concat(i.padStart(2,"0"),"-").concat(n.padStart(2,"0"))}if(String(t).indexOf("-")>0){var o=t.split("-"),s=ee(o,3),c=s[0],l=s[1],d=s[2];return"".concat(d,"-").concat(l.padStart(2,"0"),"-").concat(c.padStart(2,"0"))}var u=new Date(Number(t));return"".concat(u.getFullYear(),"-").concat((u.getMonth()+1).toString().padStart(2,"0"),"-").concat(u.getDate().toString().padStart(2,"0"))},formatDate:function(t){if(!t)return"";var e=t.split("-"),a=ee(e,3),n=a[0],i=a[1],r=a[2];return"".concat(r,"/").concat(i,"/").concat(n)},currentDateFormat:function(t){var e=t?new Date(t):new Date;return"".concat(e.getDate().toString().padStart(2,"0"),"/").concat((e.getMonth()+1).toString().padStart(2,"0"),"/").concat(e.getFullYear()," ").concat(e.getHours().toString().padStart(2,"0"),":").concat(e.getMinutes().toString().padStart(2,"0"))},backToList:function(){window.history.back()}}},ce=se,le=Object(p["a"])(ce,Zt,te,!1,null,null,null),de=le.exports,ue=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticStyle:{margin:"0 auto"}},[a("v-card",{staticClass:"mb-3 mt-2"},[a("v-toolbar",{attrs:{color:"blue darken-3",dark:"",height:"40"}},[a("v-toolbar-title",{staticClass:"ml-0"},[a("span",{staticClass:"mr-2",on:{click:t.openServiceConfig}},[a("a",{staticStyle:{color:"white","text-decoration":"none","font-size":"16px"},attrs:{href:"javascript:;"}},[t._v("Dịch vụ công")])]),a("span",[a("v-icon",[t._v("chevron_right")])],1),a("span",{staticClass:"ml-2",on:{click:t.openServiceConfigProcess}},[a("a",{staticStyle:{color:"white","text-decoration":"none","font-size":"16px"},attrs:{href:"javascript:;"}},[t._v("Quy trình thực hiện")])])]),a("v-spacer"),a("v-btn",{attrs:{dark:"",icon:""},nativeOn:{click:function(e){return t.backToList.apply(null,arguments)}}},[a("v-icon",[t._v("reply")])],1)],1)],1),a("v-card",{staticClass:"py-0 px-2"},[a("div",[a("v-flex",{attrs:{xs12:""}},[a("span",{staticClass:"text-bold",staticStyle:{color:"#073b76"}},[t._v("Tên dịch vụ công:")]),a("span",[t._v(" "+t._s(t.serviceConfigName))])]),a("v-flex",{staticClass:"mt-2",staticStyle:{height:"32px"},attrs:{xs12:""}},[a("span",{staticClass:"text-bold",staticStyle:{color:"#073b76"}},[t._v("\n          Danh sách quy trình thực hiện:\n        ")]),a("v-btn",{staticClass:"mx-0 my-0 right",attrs:{color:"blue darken-3",dark:""},on:{click:t.openserviceProcessOptionList}},[a("v-icon",[t._v("add_circle_outline")]),t._v(" \n          Thêm quy trình thực hiện\n        ")],1)],1),a("v-data-table",{staticClass:"table-landing table-bordered mt-3",staticStyle:{border:"1px solid rgb(222, 222, 222)"},attrs:{headers:t.serviceProcessOptionHeader,items:t.serviceProcessOptionList,"hide-actions":"","no-data-text":"Không có dữ liệu"},scopedSlots:t._u([{key:"headers",fn:function(e){return[a("tr",{staticStyle:{height:"42px"}},t._l(e.headers,(function(e){return a("th",{key:e.text,class:e["class"]?e["class"]:"",staticStyle:{"border-right":"1px solid #dedede"},attrs:{width:e["width"]?e["width"]+"px":""}},[a("v-tooltip",{attrs:{bottom:""}},[a("span",{attrs:{slot:"activator"},slot:"activator"},[t._v(t._s(e.text))]),a("span",[t._v(t._s(e.text))])])],1)})),0)]}},{key:"items",fn:function(e){return[a("tr",{class:{active:e.index%2==1},staticStyle:{cursor:"pointer"}},[a("td",{staticClass:"text-xs-center px-2 py-2",staticStyle:{width:"50px",height:"36px","border-right":"1px solid #dedede"},on:{click:function(a){return t.editServiceProcessOption(e.item)}}},[t.loadingTable?a("content-placeholders",[a("content-placeholders-text",{attrs:{lines:1}})],1):a("div",[a("span",[t._v(t._s(t.serviceProcessOptionPage*t.numberPerPage-t.numberPerPage+e.index+1))])])],1),a("td",{staticClass:"text-xs-left px-2 py-2",staticStyle:{height:"36px","border-right":"1px solid #dedede"},on:{click:function(a){return t.editServiceProcessOption(e.item)}}},[t.loadingTable?a("content-placeholders",[a("content-placeholders-text",{attrs:{lines:1}})],1):a("div",[a("span",[t._v(t._s(e.item.optionName))])])],1),a("td",{staticClass:"text-xs-left px-2 py-2",staticStyle:{height:"36px","border-right":"1px solid #dedede"},on:{click:function(a){return t.editServiceProcessOption(e.item)}}},[t.loadingTable?a("content-placeholders",[a("content-placeholders-text",{attrs:{lines:1}})],1):a("div",[a("span",[t._v(t._s(e.item.templateName))])])],1),a("td",{staticClass:"text-xs-left px-2 py-2",staticStyle:{height:"36px","border-right":"1px solid #dedede"},on:{click:function(a){return t.editServiceProcessOption(e.item)}}},[t.loadingTable?a("content-placeholders",[a("content-placeholders-text",{attrs:{lines:1}})],1):a("div",[a("span",[t._v(t._s(e.item.processName))])])],1),a("td",{staticClass:"text-xs-center px-2 py-2",staticStyle:{width:"125px",height:"36px","border-right":"1px solid #dedede"}},[t.loadingTable?a("content-placeholders",[a("content-placeholders-text",{attrs:{lines:1}})],1):a("div",[a("v-tooltip",{staticClass:"mx-2",attrs:{top:""}},[a("v-btn",{staticClass:"mx-0 my-0",attrs:{slot:"activator",color:"green",flat:"",icon:""},on:{click:function(a){return t.editServiceProcessOption(e.item)}},slot:"activator"},[a("v-icon",[t._v("edit")])],1),a("span",[t._v("Sửa quy trình")])],1),a("v-tooltip",{staticClass:"mx-2",attrs:{top:""}},[a("v-btn",{staticClass:"mx-0 my-0",attrs:{slot:"activator",color:"red",flat:"",icon:""},on:{click:function(a){return t.deleteServiceProcessOption(e.item)}},slot:"activator"},[a("v-icon",[t._v("delete")])],1),a("span",[t._v("Xóa")])],1)],1)],1)])]}}])}),a("div",{staticClass:"my-2"},[a("div",{staticClass:"text-xs-right layout wrap",staticStyle:{position:"relative"}},[a("div",{staticClass:"flex pagging-table"},[a("tiny-pagination",{attrs:{total:t.totalServiceProcessOption,page:t.serviceProcessOptionPage,numberPerPage:t.numberPerPage,nameRecord:"dịch vụ công","custom-class":"custom-tiny-class"},on:{"tiny:change-page":t.changePage}})],1)])])],1)])],1)},pe=[];function ve(t,e){return be(t)||fe(t,e)||he(t,e)||me()}function me(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function he(t,e){if(t){if("string"===typeof t)return ge(t,e);var a=Object.prototype.toString.call(t).slice(8,-1);return"Object"===a&&t.constructor&&(a=t.constructor.name),"Map"===a||"Set"===a?Array.from(t):"Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a)?ge(t,e):void 0}}function ge(t,e){(null==e||e>t.length)&&(e=t.length);for(var a=0,n=new Array(e);a<e;a++)n[a]=t[a];return n}function fe(t,e){var a=null==t?null:"undefined"!==typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=a){var n,i,r=[],o=!0,s=!1;try{for(a=a.call(t);!(o=(n=a.next()).done);o=!0)if(r.push(n.value),e&&r.length===e)break}catch(c){s=!0,i=c}finally{try{o||null==a["return"]||a["return"]()}finally{if(s)throw i}}return r}}function be(t){if(Array.isArray(t))return t}var xe={components:{"tiny-pagination":bt},data:function(){return{validFormSearch:!1,isDvc:!1,boNganh:!1,administrationList:[],capCoQuanThucHien:"",govAgencyList:[],govAgencyFilter:"",domainList:[],domainFilter:"",serviceInfoList:[],serviceFilter:"",levelList:[{levelName:"Mức độ 2",level:2},{levelName:"Mức độ 3",level:3},{levelName:"Mức độ 4",level:4}],levelFilter:"",keyword:"",dialogAddApi:!1,dialogAddRole:!1,apiSelected:"",apiCode:"",apiName:"",listRoleApi:[],roleList:[],apiRole:"",apiDescription:"",className:"",listStatus:[{name:"Sử dụng",value:1},{name:"Không sử dụng",value:0}],apiStatus:"",updateApi:"add",fromDate:"",toDate:"",loading:!1,loadingTable:!1,loadingGetRole:!1,ladingAddRole:!1,menuDate1:!1,menuDate2:!1,fromReceiveDate:"",fromReceiveDateFormatted:"",toReceiveDate:"",toReceiveDateFormatted:"",apiItems:[],api:"",dossierNo:"",serviceProcessOptionList:"",serviceProcessOptionPage:1,numberPerPage:10,totalServiceProcessOption:0,options:{mode:"code"},dataRequest:{},dataResponse:{},dialog_dataInfo:!1,serviceConfigId:"",serviceConfigName:"",rules:{required:function(t){return!!t||"Thông tin bắt buộc"}},serviceProcessOptionHeader:[{text:"STT",align:"center",sortable:!1,width:50},{text:"Tên quy trình xác lập dịch vụ",align:"center",sortable:!1},{text:"Tên mẫu hồ sơ",align:"center",sortable:!1},{text:"Tên quy trình xử lý thủ tục",align:"center",sortable:!1},{text:"Thao tác",align:"center",sortable:!1}]}},computed:{},created:function(){var t=this;t.$nextTick((function(){var e=t.$router.history.current.query;t.serviceConfigId=e.hasOwnProperty("serviceConfigId")&&e.serviceConfigId?e.serviceConfigId:"",t.serviceConfigName=e.hasOwnProperty("serviceConfigName")&&e.serviceConfigName?e.serviceConfigName:"",t.serviceConfigId&&t.getserviceProcessOptionList()}))},watch:{},methods:{openServiceConfig:function(){var t=this;t.$router.push({path:"/table/opencps_serviceconfig_dvc"})},openServiceConfigProcess:function(){var t=this;t.$router.push({path:"/table/opencps_processoption_dvc?serviceConfigId="+t.serviceConfigId+"&serviceConfigName="+t.serviceConfigName})},openserviceProcessOptionList:function(){var t=this,e=t.$router.history.current;e.query;t.$router.push({path:"/table/opencps_processoption_dvc/editor/0?serviceConfigId="+t.serviceConfigId+"&serviceConfigName="+t.serviceConfigName+"&col=serviceConfigId&pk="+t.serviceConfigId})},getserviceProcessOptionList:function(t){var e=this;t&&(e.serviceProcessOptionPage=1),e.loadingTable=!0;var a={headers:{groupId:window.themeDisplay.getScopeGroupId()}},n={start:e.serviceProcessOptionPage*e.numberPerPage-e.numberPerPage,end:e.serviceProcessOptionPage*e.numberPerPage},i=new URLSearchParams;i.append("method","GET"),i.append("url","/serviceconfigs/"+e.serviceConfigId+"/processes"),i.append("data",JSON.stringify(n)),O.a.post("/o/rest/v2/proxy",i,a).then((function(t){var a=t.data;e.loadingTable=!1,a["data"]?(e.serviceProcessOptionList=Array.isArray(a["data"])?a["data"]:[a["data"]],e.totalServiceProcessOption=a["total"]):(e.serviceProcessOptionList=[],e.totalServiceProcessOption=0)})).catch((function(t){e.loadingTable=!1,e.serviceProcessOptionList=[],e.totalServiceProcessOption=0}))},changePage:function(t){var e=this;e.serviceProcessOptionPage=t.page,e.getserviceProcessOptionList()},editServiceProcessOption:function(t){var e=this,a=e.$router.history.current;a.query;e.$router.push({path:"/table/opencps_processoption_dvc/editor/"+t.processOptionId+"?serviceConfigId="+e.serviceConfigId+"&serviceConfigName="+e.serviceConfigName})},deleteServiceProcessOption:function(t){var e=this,a=confirm("Bạn có chắc chắn xóa quy trình thực hiện này");if(a){var n={headers:{groupId:window.themeDisplay.getScopeGroupId()}},i={},r=new URLSearchParams;r.append("method","DELETE"),r.append("url","/serviceconfigs/"+e.serviceConfigId+"/processes/"+t.processOptionId),r.append("data",JSON.stringify(i)),O.a.post("/o/rest/v2/proxy",r,n).then((function(t){N.a.success("Xóa quy trình thực hiện thành công"),e.getserviceProcessOptionList()})).catch((function(t){N.a.error("Xóa quy trình thực hiện không thành công")}))}},parsedate:function(t){var e=t.split("-"),a=ve(e,3),n=a[0],i=a[1],r=a[2];return"".concat(r,"-").concat(i,"-").concat(n)},currentDate:function(){var t=new Date;return"".concat(t.getFullYear(),"-").concat((t.getMonth()+1).toString().padStart(2,"0"),"-").concat(t.getDate().toString().padStart(2,"0"))},changeDate:function(t){var e=this;e.menuDate1=e.menuDate2=!1,"1"===t?e.fromReceiveDateFormatted=e.formatDate(e.fromReceiveDate):"2"===t&&(e.toReceiveDateFormatted=e.formatDate(e.toReceiveDate))},getMinMax:function(t){if(!t)return null;var e=t.split("/"),a=ve(e,3),n=a[0],i=a[1],r=a[2];return"".concat(r,"-").concat(i,"-").concat(n)},parseDate:function(t){if(!t)return"";if(String(t).indexOf("/")>0){var e=t.split("/"),a=ve(e,3),n=a[0],i=a[1],r=a[2];return"".concat(r,"-").concat(i.padStart(2,"0"),"-").concat(n.padStart(2,"0"))}if(String(t).indexOf("-")>0){var o=t.split("-"),s=ve(o,3),c=s[0],l=s[1],d=s[2];return"".concat(d,"-").concat(l.padStart(2,"0"),"-").concat(c.padStart(2,"0"))}var u=new Date(Number(t));return"".concat(u.getFullYear(),"-").concat((u.getMonth()+1).toString().padStart(2,"0"),"-").concat(u.getDate().toString().padStart(2,"0"))},formatDate:function(t){if(!t)return"";var e=t.split("-"),a=ve(e,3),n=a[0],i=a[1],r=a[2];return"".concat(r,"/").concat(i,"/").concat(n)},currentDateFormat:function(t){var e=t?new Date(t):new Date;return"".concat(e.getDate().toString().padStart(2,"0"),"/").concat((e.getMonth()+1).toString().padStart(2,"0"),"/").concat(e.getFullYear()," ").concat(e.getHours().toString().padStart(2,"0"),":").concat(e.getMinutes().toString().padStart(2,"0"))},backToList:function(){window.history.back()}}},ye=xe,Ce=Object(p["a"])(ye,ue,pe,!1,null,null,null),_e=Ce.exports,Se=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticStyle:{margin:"0 auto"}},[a("v-card",{staticClass:"mb-3 mt-0"},[a("v-toolbar",{attrs:{color:"blue darken-3",dark:"",height:"40"}},[a("v-toolbar-title",{staticClass:"ml-0"},[a("span",{staticClass:"mr-2",on:{click:t.openServiceConfig}},[a("a",{staticStyle:{color:"white","text-decoration":"none","font-size":"16px"},attrs:{href:"javascript:;"}},[t._v("Dịch vụ công")])]),a("span",[a("v-icon",[t._v("chevron_right")])],1),a("span",{staticClass:"ml-2",on:{click:t.openServiceConfigProcess}},[a("a",{staticStyle:{color:"white","text-decoration":"none","font-size":"16px"},attrs:{href:"javascript:;"}},[t._v("Quy trình thực hiện")])])]),a("v-spacer"),a("v-btn",{attrs:{dark:"",icon:""},nativeOn:{click:function(e){return t.backToList.apply(null,arguments)}}},[a("v-icon",[t._v("reply")])],1)],1)],1),a("v-card",{staticClass:"py-0 px-2"},[a("v-flex",{staticClass:"mb-3",attrs:{xs12:""}},[a("span",{staticClass:"text-bold",staticStyle:{color:"#073b76"}},[t._v("Tên dịch vụ công:")]),a("span",[t._v(" "+t._s(t.serviceConfigName))])]),a("div",[a("v-form",{ref:"formAddServiceProcessOption",staticClass:"px-0 mb-5",attrs:{"lazy-validation":""},model:{value:t.validformAddServiceProcessOption,callback:function(e){t.validformAddServiceProcessOption=e},expression:"validformAddServiceProcessOption"}},[a("v-layout",{attrs:{wrap:""}},[a("v-flex",{staticClass:"mb-2 pr-2",attrs:{xs12:"",sm12:"",md2:""}},[a("v-text-field",{attrs:{rules:[t.rules.syntaxError,t.rules.varchar500],placeholder:"Nhập số thứ tự",maxlength:"500",counter:"500",box:"",clearable:""},model:{value:t.seqOrder,callback:function(e){t.seqOrder=e},expression:"seqOrder"}},[a("template",{slot:"label"},[t._v("Số thứ tự")])],2)],1),a("v-flex",{staticClass:"mb-2 pl-2",attrs:{xs12:"",sm12:"",md10:""}},[a("v-text-field",{attrs:{rules:[t.rules.required,t.rules.syntaxError,t.rules.varchar2000],placeholder:"",maxlength:"2000",counter:"2000",box:"",clearable:"",required:""},model:{value:t.optionName,callback:function(e){t.optionName=e},expression:"optionName"}},[a("template",{slot:"label"},[t._v("Tên quy trình xác lập dịch vụ "),a("span",{staticClass:"red--text darken-3"},[t._v("*")])])],2)],1),a("v-flex",{staticClass:"mb-2",attrs:{xs12:"",sm12:""}},[a("v-autocomplete",{attrs:{box:"",items:t.dossierTemplateList,"item-text":"templateName","item-value":"dossierTemplateId",clearable:"",rules:[t.rules.required],required:""},scopedSlots:t._u([{key:"item",fn:function(e){return[a("v-flex",{staticClass:"v-list__tile__title",attrs:{xs12:""}},[t._v(t._s(e.item.templateNo)+" - "+t._s(e.item.templateName))])]}}]),model:{value:t.dossierTemplateFilter,callback:function(e){t.dossierTemplateFilter=e},expression:"dossierTemplateFilter"}},[a("template",{slot:"label"},[t._v("Mẫu hồ sơ "),a("span",{staticClass:"red--text darken-3"},[t._v("*")])])],2)],1),a("v-flex",{staticClass:"mb-2",attrs:{xs12:"",sm12:""}},[a("v-autocomplete",{attrs:{box:"",items:t.serviceProcessList,"item-text":"processName","item-value":"serviceProcessId",clearable:"",rules:[t.rules.required],required:""},scopedSlots:t._u([{key:"item",fn:function(e){return[a("v-flex",{staticClass:"v-list__tile__title",attrs:{xs12:""}},[t._v(t._s(e.item.processNo)+" - "+t._s(e.item.processName))])]}}]),model:{value:t.serviceProcessFilter,callback:function(e){t.serviceProcessFilter=e},expression:"serviceProcessFilter"}},[a("template",{slot:"label"},[t._v("Quy trình xử lý thủ tục "),a("span",{staticClass:"red--text darken-3"},[t._v("*")])])],2)],1),a("v-flex",{staticClass:"mb-2",attrs:{xs12:"",sm12:""}},[a("v-text-field",{attrs:{rules:[t.rules.syntaxError,t.rules.varchar500],placeholder:"",maxlength:"500",counter:"500",box:"",clearable:""},model:{value:t.autoSelect,callback:function(e){t.autoSelect=e},expression:"autoSelect"}},[a("template",{slot:"label"},[t._v("Chuỗi pattern xác định việc lựa chọn tự động theo đối tượng xử lý hồ sơ")])],2)],1),a("v-flex",{attrs:{xs12:""}},[a("v-subheader",{staticClass:"px-0"},[t._v("Hướng dẫn chi tiết để chuẩn bị hồ sơ")]),t.reRender?a("codemirror",{attrs:{options:t.cmOptions},model:{value:t.instructionNote,callback:function(e){t.instructionNote=e},expression:"instructionNote"}}):t._e()],1),a("v-flex",{staticClass:"mb-2",attrs:{xs12:""}},[a("v-subheader",{staticClass:"px-0"},[t._v("Hướng dẫn sau khi nộp hồ sơ")]),t.reRender?a("codemirror",{attrs:{options:t.cmOptions},model:{value:t.submissionNote,callback:function(e){t.submissionNote=e},expression:"submissionNote"}}):t._e()],1),a("v-flex",{staticClass:"mb-2 pr-2",attrs:{xs12:"",sm6:""}},[a("v-autocomplete",{attrs:{box:"",items:t.registerBookList,"item-text":"itemName","item-value":"itemCode",clearable:""},scopedSlots:t._u([{key:"item",fn:function(e){return[a("v-flex",{staticClass:"v-list__tile__title",attrs:{xs12:""}},[t._v(t._s(e.item.itemCode)+" - "+t._s(e.item.itemName))])]}}]),model:{value:t.registerBookCode,callback:function(e){t.registerBookCode=e},expression:"registerBookCode"}},[a("template",{slot:"label"},[t._v("Chọn sổ theo dõi")])],2)],1),a("v-flex",{staticClass:"mb-2 pl-2",attrs:{xs12:"",sm6:""}},[a("v-text-field",{attrs:{rules:[t.rules.syntaxError,t.rules.varchar500],placeholder:"",maxlength:"500",counter:"500",box:"",clearable:""},model:{value:t.sampleCount,callback:function(e){t.sampleCount=e},expression:"sampleCount"}},[a("template",{slot:"label"},[t._v("Số bộ hồ sơ")])],2)],1)],1),a("v-flex",{staticClass:"text-right pr-3",staticStyle:{position:"fixed",bottom:"0",background:"white","z-index":"4","border-top":"1px solid #dcdcdc",width:"100%","margin-left":"-268px !important",height:"70px"},attrs:{xs12:""}},[a("v-btn",{staticClass:"mr-2",attrs:{color:"red darken-3",dark:""},nativeOn:{click:function(e){return t.backToList.apply(null,arguments)}}},[a("v-icon",[t._v("reply")]),t._v(" \n            Quay lại\n          ")],1),0===t.id||"0"===t.id?a("v-btn",{attrs:{color:"blue darken-3",dark:"",loading:t.loading,disabled:t.loading},on:{click:function(e){return t.updateServiceProcessOption("add")}}},[a("v-icon",[t._v("add_circle_outline")]),t._v(" \n            Thêm mới\n          ")],1):a("v-btn",{attrs:{color:"blue darken-3",dark:"",loading:t.loading,disabled:t.loading},on:{click:function(e){return t.updateServiceProcessOption("update")}}},[a("v-icon",[t._v("save")]),t._v(" \n            Cập nhật\n          ")],1)],1)],1)],1)],1)],1)},ke=[];function De(t,e){return Ae(t)||Pe(t,e)||Te(t,e)||we()}function we(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function Te(t,e){if(t){if("string"===typeof t)return Ie(t,e);var a=Object.prototype.toString.call(t).slice(8,-1);return"Object"===a&&t.constructor&&(a=t.constructor.name),"Map"===a||"Set"===a?Array.from(t):"Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a)?Ie(t,e):void 0}}function Ie(t,e){(null==e||e>t.length)&&(e=t.length);for(var a=0,n=new Array(e);a<e;a++)n[a]=t[a];return n}function Pe(t,e){var a=null==t?null:"undefined"!==typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=a){var n,i,r=[],o=!0,s=!1;try{for(a=a.call(t);!(o=(n=a.next()).done);o=!0)if(r.push(n.value),e&&r.length===e)break}catch(c){s=!0,i=c}finally{try{o||null==a["return"]||a["return"]()}finally{if(s)throw i}}return r}}function Ae(t){if(Array.isArray(t))return t}var Ne={components:{},props:["id"],data:function(){return{reRender:!0,validformAddServiceProcessOption:!1,serviceConfigId:"",serviceConfigName:"",isDvc:!1,boNganh:!1,seqOrder:"",optionName:"",dossierTemplateList:[],dossierTemplateFilter:"",serviceProcessList:[],serviceProcessFilter:"",autoSelect:"",instructionNote:"",submissionNote:"",registerBookList:[],registerBookCode:"",sampleCount:"",cmOptions:{tabSize:4,mode:"text/html",theme:"base16-light",lineNumbers:!0,line:!0},rules:{required:function(t){return!!t||"Bắt buộc phải nhập."},number:function(t){var e=/^\d+$/;return e.test(t)||"Bắt buộc phải nhập kiểu số."},email:function(t){var e=/^(([^<>()[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/;return e.test(t)||"Sai định dạng thư điện tử."},passWord:function(t){var e=/^((?=.*\d)(?=.*[a-z])(?=.*[A-Z])(?=.*[@$!%*#?&])([0-9a-zA-Z@$!%*#?&]{8,}))$/;return e.test(t)||"Ít nhất 8 ký tự và có chữ hoa, chữ thường, ký tự đặc biệt @$!%*#?&"},telNo:function(t){var e=/^0([1-9]{1}\d{8})$/;return t?e.test(t)||"Số điện thoại gồm 10 ký tự 0-9, eg: 0989123456, ...":[]},syntaxError:function(t){return!t||(t=String(t).trim(),t.indexOf("</")<0||"Không được có ký tự </")},varchar50:function(t){return!t||(t=String(t).trim(),t.length<=50||"Không được nhập quá 50 ký tự")},varchar75:function(t){return!t||(t=String(t).trim(),t.length<=75||"Không được nhập quá 75 ký tự")},varchar255:function(t){return!t||(t=String(t).trim(),t.length<=255||"Không được nhập quá 255 ký tự")},varchar500:function(t){return!t||(t=String(t).trim(),t.length<=500||"Không được nhập quá 500 ký tự")},varchar2000:function(t){return!t||(t=String(t).trim(),t.length<=5e3||"Không được nhập quá 5000 ký tự")},varchar5000:function(t){return!t||(t=String(t).trim(),t.length<=5e3||"Không được nhập quá 5000 ký tự")}}}},computed:{},created:function(){var t=this;try{t.boNganh=boNganh}catch(e){}try{t.isDvc=isDvc}catch(e){}t.$nextTick((function(){var e=t.$router.history.current.query;t.serviceConfigId=e.hasOwnProperty("serviceConfigId")&&e.serviceConfigId?e.serviceConfigId:"",t.serviceConfigName=e.hasOwnProperty("serviceConfigName")&&e.serviceConfigName?e.serviceConfigName:"",t.getDossierTemplate(),t.getServiceProcesses(),t.getRegisterBooks(),"0"!=t.id&&t.serviceConfigId?t.getServiceProcessOptionDetail():(t.optionName=t.serviceConfigName,t.reRender=!1,setTimeout((function(){t.reRender=!0}),1e3))}))},watch:{},methods:{openServiceConfig:function(){var t=this;t.$router.push({path:"/table/opencps_serviceconfig"})},openServiceConfigProcess:function(){var t=this;t.$router.push({path:"/table/opencps_processoption?serviceConfigId="+t.serviceConfigId+"&serviceConfigName="+t.serviceConfigName})},getDossierTemplate:function(){var t=this,e={};t.dossierTemplateList=[],t.$store.dispatch("getDossierTemplate",e).then((function(e){t.dossierTemplateList=e})).catch((function(){t.dossierTemplateList=[]}))},getServiceProcesses:function(){var t=this,e={};t.serviceProcessList=[],t.$store.dispatch("getServiceProcesses",e).then((function(e){t.serviceProcessList=e})).catch((function(){t.serviceProcessList=[]}))},getRegisterBooks:function(){var t=this,e={};t.registerBookList=[],t.$store.dispatch("getRegisterBookList",e).then((function(e){t.registerBookList=e})).catch((function(){t.registerBookList=[]}))},getServiceProcessOptionDetail:function(){var t=this,e={headers:{groupId:window.themeDisplay.getScopeGroupId()},params:{}},a=[],n="";O.a.get("/o/rest/v2/serviceconfigs/"+t.serviceConfigId+"/processes",e).then((function(e){e&&e.data.hasOwnProperty("data")&&(a=e["data"]["data"],n=a.filter((function(e){return e.processOptionId=t.id}))[0],t.seqOrder=n.seqOrder,t.optionName=n.optionName,t.dossierTemplateFilter=n.dossierTemplateId,t.serviceProcessFilter=n.serviceProcessId,t.autoSelect=n.autoSelect,t.instructionNote=n.instructionNote,t.submissionNote=n.submissionNote,t.sampleCount=n.sampleCount,t.registerBookCode=n.hasOwnProperty("registerBookCode")?n["registerBookCode"]:"",t.reRender=!1,setTimeout((function(){t.reRender=!0}),1e3))}))},updateServiceProcessOption:function(t){var e=this,a={serviceConfigId:e.serviceConfigId,processOptionId:e.id,seqOrder:e.seqOrder,optionName:e.optionName,dossierTemplateId:e.dossierTemplateFilter,serviceProcessId:e.serviceProcessFilter,autoSelect:e.autoSelect,instructionNote:e.instructionNote,submissionNote:e.submissionNote,sampleCount:e.sampleCount,registerBookCode:e.registerBookCode,type:t};e.$store.dispatch("createServiceProcessOption",a).then((function(a){"add"===t?N.a.success("Thêm quy trình thực hiện thành công"):N.a.success("Cập nhật thành công"),e.$router.push({path:"/table/opencps_processoption?serviceConfigId="+e.serviceConfigId+"&serviceConfigName="+e.serviceConfigName})})).catch((function(t){N.a.error("Yêu cầu thực hiện thất bại")}))},getMaxLength:function(t){var e;return!t.hasOwnProperty("type")||"text-fields"!==t.type&&"textarea"!==t.type||(e=500,"textarea"===t.type&&(e=2e3),t.hasOwnProperty("model")&&(t.model.endsWith("Code")||t.model.endsWith("No")||t.model.endsWith("Id")||"menuGroup"==t.model)&&(e=75),"order"==t.model&&(e=10)),e},parsedate:function(t){var e=t.split("-"),a=De(e,3),n=a[0],i=a[1],r=a[2];return"".concat(r,"-").concat(i,"-").concat(n)},currentDate:function(){var t=new Date;return"".concat(t.getFullYear(),"-").concat((t.getMonth()+1).toString().padStart(2,"0"),"-").concat(t.getDate().toString().padStart(2,"0"))},changeDate:function(t){var e=this;e.menuDate1=e.menuDate2=!1,"1"===t?e.fromReceiveDateFormatted=e.formatDate(e.fromReceiveDate):"2"===t&&(e.toReceiveDateFormatted=e.formatDate(e.toReceiveDate))},getMinMax:function(t){if(!t)return null;var e=t.split("/"),a=De(e,3),n=a[0],i=a[1],r=a[2];return"".concat(r,"-").concat(i,"-").concat(n)},parseDate:function(t){if(!t)return"";if(String(t).indexOf("/")>0){var e=t.split("/"),a=De(e,3),n=a[0],i=a[1],r=a[2];return"".concat(r,"-").concat(i.padStart(2,"0"),"-").concat(n.padStart(2,"0"))}if(String(t).indexOf("-")>0){var o=t.split("-"),s=De(o,3),c=s[0],l=s[1],d=s[2];return"".concat(d,"-").concat(l.padStart(2,"0"),"-").concat(c.padStart(2,"0"))}var u=new Date(Number(t));return"".concat(u.getFullYear(),"-").concat((u.getMonth()+1).toString().padStart(2,"0"),"-").concat(u.getDate().toString().padStart(2,"0"))},formatDate:function(t){if(!t)return"";var e=t.split("-"),a=De(e,3),n=a[0],i=a[1],r=a[2];return"".concat(r,"/").concat(i,"/").concat(n)},currentDateFormat:function(t){var e=t?new Date(t):new Date;return"".concat(e.getDate().toString().padStart(2,"0"),"/").concat((e.getMonth()+1).toString().padStart(2,"0"),"/").concat(e.getFullYear()," ").concat(e.getHours().toString().padStart(2,"0"),":").concat(e.getMinutes().toString().padStart(2,"0"))},backToList:function(){window.history.back()}}},Le=Ne,Oe=Object(p["a"])(Le,Se,ke,!1,null,null,null),Re=Oe.exports,Me=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticStyle:{margin:"0 auto"}},[a("v-card",{staticClass:"mb-3 mt-0"},[a("v-toolbar",{attrs:{color:"blue darken-3",dark:"",height:"40"}},[a("v-toolbar-title",{staticClass:"ml-0"},[a("span",{staticClass:"mr-2",on:{click:t.openServiceConfig}},[a("a",{staticStyle:{color:"white","text-decoration":"none","font-size":"16px"},attrs:{href:"javascript:;"}},[t._v("Dịch vụ công")])]),a("span",[a("v-icon",[t._v("chevron_right")])],1),a("span",{staticClass:"ml-2",on:{click:t.openServiceConfigProcess}},[a("a",{staticStyle:{color:"white","text-decoration":"none","font-size":"16px"},attrs:{href:"javascript:;"}},[t._v("Quy trình thực hiện")])])]),a("v-spacer"),a("v-btn",{attrs:{dark:"",icon:""},nativeOn:{click:function(e){return t.backToList.apply(null,arguments)}}},[a("v-icon",[t._v("reply")])],1)],1)],1),a("v-card",{staticClass:"py-0 px-2"},[a("v-flex",{staticClass:"mb-3",attrs:{xs12:""}},[a("span",{staticClass:"text-bold",staticStyle:{color:"#073b76"}},[t._v("Tên dịch vụ công:")]),a("span",[t._v(" "+t._s(t.serviceConfigName))])]),a("div",[a("v-form",{ref:"formAddServiceProcessOption",staticClass:"px-0 mb-5",attrs:{"lazy-validation":""},model:{value:t.validformAddServiceProcessOption,callback:function(e){t.validformAddServiceProcessOption=e},expression:"validformAddServiceProcessOption"}},[a("v-layout",{attrs:{wrap:""}},[a("v-flex",{staticClass:"mb-2 pr-2",attrs:{xs12:"",sm12:"",md2:""}},[a("v-text-field",{attrs:{rules:[t.rules.syntaxError,t.rules.varchar500],placeholder:"Nhập số thứ tự",maxlength:"500",counter:"500",box:"",clearable:""},model:{value:t.seqOrder,callback:function(e){t.seqOrder=e},expression:"seqOrder"}},[a("template",{slot:"label"},[t._v("Số thứ tự")])],2)],1),a("v-flex",{staticClass:"mb-2 pl-2",attrs:{xs12:"",sm12:"",md10:""}},[a("v-text-field",{attrs:{rules:[t.rules.required,t.rules.syntaxError,t.rules.varchar2000],placeholder:"",maxlength:"2000",counter:"2000",box:"",clearable:"",required:""},model:{value:t.optionName,callback:function(e){t.optionName=e},expression:"optionName"}},[a("template",{slot:"label"},[t._v("Tên quy trình xác lập dịch vụ "),a("span",{staticClass:"red--text darken-3"},[t._v("*")])])],2)],1),a("v-flex",{staticClass:"mb-2",attrs:{xs12:"",sm12:""}},[a("v-autocomplete",{attrs:{box:"",items:t.dossierTemplateList,"item-text":"templateName","item-value":"dossierTemplateId",clearable:"",rules:[t.rules.required],required:""},scopedSlots:t._u([{key:"item",fn:function(e){return[a("v-flex",{staticClass:"v-list__tile__title",attrs:{xs12:""}},[t._v(t._s(e.item.templateNo)+" - "+t._s(e.item.templateName))])]}}]),model:{value:t.dossierTemplateFilter,callback:function(e){t.dossierTemplateFilter=e},expression:"dossierTemplateFilter"}},[a("template",{slot:"label"},[t._v("Mẫu hồ sơ "),a("span",{staticClass:"red--text darken-3"},[t._v("*")])])],2)],1),a("v-flex",{staticClass:"mb-2",attrs:{xs12:"",sm12:""}},[a("v-autocomplete",{attrs:{box:"",items:t.serviceProcessList,"item-text":"processName","item-value":"serviceProcessId",clearable:"",rules:[t.rules.required],required:""},scopedSlots:t._u([{key:"item",fn:function(e){return[a("v-flex",{staticClass:"v-list__tile__title",attrs:{xs12:""}},[t._v(t._s(e.item.processNo)+" - "+t._s(e.item.processName))])]}}]),model:{value:t.serviceProcessFilter,callback:function(e){t.serviceProcessFilter=e},expression:"serviceProcessFilter"}},[a("template",{slot:"label"},[t._v("Quy trình xử lý thủ tục "),a("span",{staticClass:"red--text darken-3"},[t._v("*")])])],2)],1),a("v-flex",{staticClass:"mb-2",attrs:{xs12:"",sm12:""}},[a("v-text-field",{attrs:{rules:[t.rules.syntaxError,t.rules.varchar500],placeholder:"",maxlength:"500",counter:"500",box:"",clearable:""},model:{value:t.autoSelect,callback:function(e){t.autoSelect=e},expression:"autoSelect"}},[a("template",{slot:"label"},[t._v("Chuỗi pattern xác định việc lựa chọn tự động theo đối tượng xử lý hồ sơ")])],2)],1),a("v-flex",{attrs:{xs12:""}},[a("v-subheader",{staticClass:"px-0"},[t._v("Hướng dẫn chi tiết để chuẩn bị hồ sơ")]),t.reRender?a("codemirror",{attrs:{options:t.cmOptions},model:{value:t.instructionNote,callback:function(e){t.instructionNote=e},expression:"instructionNote"}}):t._e()],1),a("v-flex",{staticClass:"mb-2",attrs:{xs12:""}},[a("v-subheader",{staticClass:"px-0"},[t._v("Hướng dẫn sau khi nộp hồ sơ")]),t.reRender?a("codemirror",{attrs:{options:t.cmOptions},model:{value:t.submissionNote,callback:function(e){t.submissionNote=e},expression:"submissionNote"}}):t._e()],1),a("v-flex",{staticClass:"mb-2 pl-2",attrs:{xs12:"",sm6:""}},[a("v-text-field",{attrs:{rules:[t.rules.syntaxError,t.rules.varchar500],placeholder:"",maxlength:"500",counter:"500",box:"",clearable:""},model:{value:t.sampleCount,callback:function(e){t.sampleCount=e},expression:"sampleCount"}},[a("template",{slot:"label"},[t._v("Số bộ hồ sơ")])],2)],1)],1),a("v-flex",{staticClass:"text-right pr-3",staticStyle:{position:"fixed",bottom:"0",background:"white","z-index":"4","border-top":"1px solid #dcdcdc",width:"100%","margin-left":"-268px !important",height:"70px"},attrs:{xs12:""}},[a("v-btn",{staticClass:"mr-2",attrs:{color:"red darken-3",dark:""},nativeOn:{click:function(e){return t.backToList.apply(null,arguments)}}},[a("v-icon",[t._v("reply")]),t._v(" \n            Quay lại\n          ")],1),0===t.id||"0"===t.id?a("v-btn",{attrs:{color:"blue darken-3",dark:"",loading:t.loading,disabled:t.loading},on:{click:function(e){return t.updateServiceProcessOption("add")}}},[a("v-icon",[t._v("add_circle_outline")]),t._v(" \n            Thêm mới\n          ")],1):a("v-btn",{attrs:{color:"blue darken-3",dark:"",loading:t.loading,disabled:t.loading},on:{click:function(e){return t.updateServiceProcessOption("update")}}},[a("v-icon",[t._v("save")]),t._v(" \n            Cập nhật\n          ")],1)],1)],1)],1)],1)],1)},Fe=[];function Ee(t,e){return Ge(t)||Ue(t,e)||qe(t,e)||$e()}function $e(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function qe(t,e){if(t){if("string"===typeof t)return Ve(t,e);var a=Object.prototype.toString.call(t).slice(8,-1);return"Object"===a&&t.constructor&&(a=t.constructor.name),"Map"===a||"Set"===a?Array.from(t):"Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a)?Ve(t,e):void 0}}function Ve(t,e){(null==e||e>t.length)&&(e=t.length);for(var a=0,n=new Array(e);a<e;a++)n[a]=t[a];return n}function Ue(t,e){var a=null==t?null:"undefined"!==typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=a){var n,i,r=[],o=!0,s=!1;try{for(a=a.call(t);!(o=(n=a.next()).done);o=!0)if(r.push(n.value),e&&r.length===e)break}catch(c){s=!0,i=c}finally{try{o||null==a["return"]||a["return"]()}finally{if(s)throw i}}return r}}function Ge(t){if(Array.isArray(t))return t}var He={components:{},props:["id"],data:function(){return{reRender:!0,validformAddServiceProcessOption:!1,serviceConfigId:"",serviceConfigName:"",isDvc:!1,boNganh:!1,seqOrder:"",optionName:"",dossierTemplateList:[],dossierTemplateFilter:"",serviceProcessList:[],serviceProcessFilter:"",autoSelect:"",instructionNote:"",submissionNote:"",registerBookList:[],registerBookCode:"",sampleCount:"",cmOptions:{tabSize:4,mode:"text/html",theme:"base16-light",lineNumbers:!0,line:!0},rules:{required:function(t){return!!t||"Bắt buộc phải nhập."},number:function(t){var e=/^\d+$/;return e.test(t)||"Bắt buộc phải nhập kiểu số."},email:function(t){var e=/^(([^<>()[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/;return e.test(t)||"Sai định dạng thư điện tử."},passWord:function(t){var e=/^((?=.*\d)(?=.*[a-z])(?=.*[A-Z])(?=.*[@$!%*#?&])([0-9a-zA-Z@$!%*#?&]{8,}))$/;return e.test(t)||"Ít nhất 8 ký tự và có chữ hoa, chữ thường, ký tự đặc biệt @$!%*#?&"},telNo:function(t){var e=/^0([1-9]{1}\d{8})$/;return t?e.test(t)||"Số điện thoại gồm 10 ký tự 0-9, eg: 0989123456, ...":[]},syntaxError:function(t){return!t||(t=String(t).trim(),t.indexOf("</")<0||"Không được có ký tự </")},varchar50:function(t){return!t||(t=String(t).trim(),t.length<=50||"Không được nhập quá 50 ký tự")},varchar75:function(t){return!t||(t=String(t).trim(),t.length<=75||"Không được nhập quá 75 ký tự")},varchar255:function(t){return!t||(t=String(t).trim(),t.length<=255||"Không được nhập quá 255 ký tự")},varchar500:function(t){return!t||(t=String(t).trim(),t.length<=500||"Không được nhập quá 500 ký tự")},varchar2000:function(t){return!t||(t=String(t).trim(),t.length<=5e3||"Không được nhập quá 5000 ký tự")},varchar5000:function(t){return!t||(t=String(t).trim(),t.length<=5e3||"Không được nhập quá 5000 ký tự")}}}},computed:{},created:function(){var t=this;try{t.boNganh=boNganh}catch(e){}try{t.isDvc=isDvc}catch(e){}t.$nextTick((function(){var e=t.$router.history.current.query;t.serviceConfigId=e.hasOwnProperty("serviceConfigId")&&e.serviceConfigId?e.serviceConfigId:"",t.serviceConfigName=e.hasOwnProperty("serviceConfigName")&&e.serviceConfigName?e.serviceConfigName:"",t.getDossierTemplate(),t.getServiceProcesses(),"0"!=t.id&&t.serviceConfigId?t.getServiceProcessOptionDetail():(t.optionName=t.serviceConfigName,t.reRender=!1,setTimeout((function(){t.reRender=!0}),1e3))}))},watch:{},methods:{openServiceConfig:function(){var t=this;t.$router.push({path:"/table/opencps_serviceconfig_dvc"})},openServiceConfigProcess:function(){var t=this;t.$router.push({path:"/table/opencps_processoption_dvc?serviceConfigId="+t.serviceConfigId+"&serviceConfigName="+t.serviceConfigName})},getDossierTemplate:function(){var t=this,e={};t.dossierTemplateList=[],t.$store.dispatch("getDossierTemplateDvc",e).then((function(e){t.dossierTemplateList=e})).catch((function(){t.dossierTemplateList=[]}))},getServiceProcesses:function(){var t=this,e={};t.serviceProcessList=[],t.$store.dispatch("getServiceProcessesDvc",e).then((function(e){t.serviceProcessList=e})).catch((function(){t.serviceProcessList=[]}))},getRegisterBooks:function(){var t=this,e={};t.registerBookList=[],t.$store.dispatch("getRegisterBookList",e).then((function(e){t.registerBookList=e})).catch((function(){t.registerBookList=[]}))},getServiceProcessOptionDetail:function(){var t=this,e=[],a="",n={headers:{groupId:window.themeDisplay.getScopeGroupId()}},i={start:0,end:50},r=new URLSearchParams;r.append("method","GET"),r.append("url","/serviceconfigs/"+t.serviceConfigId+"/processes"),r.append("data",JSON.stringify(i)),O.a.post("/o/rest/v2/proxy",r,n).then((function(n){n&&n.data.hasOwnProperty("data")&&(e=n["data"]["data"],a=e.filter((function(e){return e.processOptionId=t.id}))[0],t.seqOrder=a.seqOrder,t.optionName=a.optionName,t.dossierTemplateFilter=a.dossierTemplateId,t.serviceProcessFilter=a.serviceProcessId,t.autoSelect=a.autoSelect,t.instructionNote=a.instructionNote,t.submissionNote=a.submissionNote,t.sampleCount=a.sampleCount,t.registerBookCode=a.hasOwnProperty("registerBookCode")?a["registerBookCode"]:"",t.reRender=!1,setTimeout((function(){t.reRender=!0}),1e3))})).catch((function(t){}))},updateServiceProcessOption:function(t){var e=this,a={serviceConfigId:e.serviceConfigId,processOptionId:e.id,seqOrder:e.seqOrder,optionName:e.optionName,dossierTemplateId:e.dossierTemplateFilter,serviceProcessId:e.serviceProcessFilter,autoSelect:e.autoSelect,instructionNote:e.instructionNote,submissionNote:e.submissionNote,sampleCount:e.sampleCount,registerBookCode:e.registerBookCode,type:t};e.$store.dispatch("createServiceProcessOptionDvc",a).then((function(a){"add"===t?N.a.success("Thêm quy trình thực hiện thành công"):N.a.success("Cập nhật thành công"),e.$router.push({path:"/table/opencps_processoption_dvc?serviceConfigId="+e.serviceConfigId+"&serviceConfigName="+e.serviceConfigName})})).catch((function(t){N.a.error("Yêu cầu thực hiện thất bại")}))},getMaxLength:function(t){var e;return!t.hasOwnProperty("type")||"text-fields"!==t.type&&"textarea"!==t.type||(e=500,"textarea"===t.type&&(e=2e3),t.hasOwnProperty("model")&&(t.model.endsWith("Code")||t.model.endsWith("No")||t.model.endsWith("Id")||"menuGroup"==t.model)&&(e=75),"order"==t.model&&(e=10)),e},parsedate:function(t){var e=t.split("-"),a=Ee(e,3),n=a[0],i=a[1],r=a[2];return"".concat(r,"-").concat(i,"-").concat(n)},currentDate:function(){var t=new Date;return"".concat(t.getFullYear(),"-").concat((t.getMonth()+1).toString().padStart(2,"0"),"-").concat(t.getDate().toString().padStart(2,"0"))},changeDate:function(t){var e=this;e.menuDate1=e.menuDate2=!1,"1"===t?e.fromReceiveDateFormatted=e.formatDate(e.fromReceiveDate):"2"===t&&(e.toReceiveDateFormatted=e.formatDate(e.toReceiveDate))},getMinMax:function(t){if(!t)return null;var e=t.split("/"),a=Ee(e,3),n=a[0],i=a[1],r=a[2];return"".concat(r,"-").concat(i,"-").concat(n)},parseDate:function(t){if(!t)return"";if(String(t).indexOf("/")>0){var e=t.split("/"),a=Ee(e,3),n=a[0],i=a[1],r=a[2];return"".concat(r,"-").concat(i.padStart(2,"0"),"-").concat(n.padStart(2,"0"))}if(String(t).indexOf("-")>0){var o=t.split("-"),s=Ee(o,3),c=s[0],l=s[1],d=s[2];return"".concat(d,"-").concat(l.padStart(2,"0"),"-").concat(c.padStart(2,"0"))}var u=new Date(Number(t));return"".concat(u.getFullYear(),"-").concat((u.getMonth()+1).toString().padStart(2,"0"),"-").concat(u.getDate().toString().padStart(2,"0"))},formatDate:function(t){if(!t)return"";var e=t.split("-"),a=Ee(e,3),n=a[0],i=a[1],r=a[2];return"".concat(r,"/").concat(i,"/").concat(n)},currentDateFormat:function(t){var e=t?new Date(t):new Date;return"".concat(e.getDate().toString().padStart(2,"0"),"/").concat((e.getMonth()+1).toString().padStart(2,"0"),"/").concat(e.getFullYear()," ").concat(e.getHours().toString().padStart(2,"0"),":").concat(e.getMinutes().toString().padStart(2,"0"))},backToList:function(){window.history.back()}}},Qe=He,je=Object(p["a"])(Qe,Me,Fe,!1,null,null,null),Be=je.exports,Ke=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticStyle:{margin:"0 auto"}},[a("vue-confirm-dialog"),a("v-card",{staticClass:"mb-3"},[a("v-toolbar",{attrs:{color:"blue darken-3",dark:"",height:"40"}},[a("v-toolbar-title",{staticClass:"ml-0"},[t._v("\n          Thủ tục hành chính\n        ")]),a("v-spacer"),t.exportExcel?a("v-btn",{attrs:{dark:"",flat:"",loading:t.exportLoading,disabled:t.exportLoading},on:{click:function(e){return t.exportTableData()}}},[a("v-icon",{attrs:{right:"",dark:""}},[t._v("cloud_download")]),t._v("   Xuất file Excel \n        ")],1):t._e()],1)],1),a("v-card",{staticClass:"py-0 px-2"},[a("div",[a("v-form",{ref:"form",attrs:{"lazy-validation":""},model:{value:t.validFormSearch,callback:function(e){t.validFormSearch=e},expression:"validFormSearch"}},[a("div",[a("div",{staticClass:"adv_search my-2 px-2",style:t.boNganh?"background: #eeeeee;width: 100%":"background: #eeeeee"},[a("div",{class:t.isDvc?"searchAdvanced-content pb-2":"searchAdvanced-content py-2"},[a("v-layout",{attrs:{wrap:""}},[t.isDvc?a("v-flex",{staticClass:"my-2 px-2",attrs:{xs12:""}},[a("div",[a("div",{staticClass:"d-inline-block text-bold",staticStyle:{"font-weight":"450",width:"200px"}},[t._v("Đơn vị:")]),a("v-autocomplete",{staticClass:"select-search d-inline-block",staticStyle:{width:"calc(100% - 200px)"},attrs:{placeholder:"Chọn đơn vị",items:t.govAgencyList,"item-text":"administrationName","item-value":"administrationCode","hide-details":"","hide-no-data":"",solo:"",flat:"",height:"32","min-height":"32",clearable:""},model:{value:t.govAgencyFilter,callback:function(e){t.govAgencyFilter=e},expression:"govAgencyFilter"}})],1)]):t._e(),a("v-flex",{class:t.isDvc?"mb-2 px-2":"my-2 px-2",attrs:{xs12:""}},[a("div",[a("div",{staticClass:"d-inline-block text-bold",staticStyle:{"font-weight":"450",width:"200px"}},[t._v("Lĩnh vực:")]),a("v-autocomplete",{staticClass:"select-search d-inline-block",staticStyle:{width:"calc(100% - 200px)"},attrs:{placeholder:"Chọn lĩnh vực",items:t.domainList,"item-text":"domainName","item-value":"domainCode","hide-details":"","hide-no-data":"",solo:"",flat:"",height:"32","min-height":"32",clearable:""},scopedSlots:t._u([{key:"item",fn:function(e){return[a("v-flex",{staticClass:"v-list__tile__title",attrs:{xs12:""}},[t._v(t._s(e.item.domainCode)+" - "+t._s(e.item.domainName))])]}}]),model:{value:t.domainFilter,callback:function(e){t.domainFilter=e},expression:"domainFilter"}})],1)]),a("v-flex",{staticClass:"mb-2 px-2",attrs:{xs12:""}},[a("div",[a("div",{staticClass:"d-inline-block text-bold",staticStyle:{"font-weight":"450",width:"200px"}},[t._v("Từ khóa:")]),a("v-text-field",{staticClass:"search-input-appbar input-search d-inline-block",staticStyle:{width:"calc(100% - 200px)"},attrs:{placeholder:"Tên thủ tục, mã thủ tục, ...","single-lines":"","hide-details":"",solo:"",flat:"",height:"32","min-height":"32",clearable:""},on:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.getServiceInfoList("reset")}},model:{value:t.keyword,callback:function(e){t.keyword=e},expression:"keyword"}})],1)]),a("v-flex",{staticClass:"mb-2 px-2",attrs:{xs12:"",sm6:""}},[a("div",[a("div",{staticClass:"d-inline-block text-bold",staticStyle:{"font-weight":"450",width:"200px"}},[t._v("Mức độ:")]),a("v-autocomplete",{staticClass:"select-search d-inline-block",staticStyle:{width:"calc(100% - 200px)"},attrs:{placeholder:"Chọn mức độ",items:t.levelList,"item-text":"levelName","item-value":"level","hide-details":"","hide-no-data":"",solo:"",flat:"",height:"32","min-height":"32",clearable:""},model:{value:t.levelFilter,callback:function(e){t.levelFilter=e},expression:"levelFilter"}})],1)])],1),a("v-flex",{staticClass:"xs12 mx-2"},[a("v-btn",{staticClass:"mx-0 mb-0",style:t.loadingTable?"pointer-events: none":"",attrs:{loading:t.loadingTable,color:"blue darken-3",dark:""},nativeOn:{click:function(e){return t.getServiceInfoList("reset")}}},[a("v-icon",{attrs:{size:"18"}},[t._v("search")]),t._v("   Tìm kiếm\n                  ")],1),a("v-btn",{staticClass:"mx-0 my-0",attrs:{color:"blue darken-3 right",dark:""},on:{click:t.openCreateServiceInfo}},[a("v-icon",[t._v("add_circle_outline")]),t._v(" \n                    Thêm mới \n                  ")],1)],1)],1)])])]),a("v-data-table",{staticClass:"table-landing table-bordered mt-3",staticStyle:{border:"1px solid rgb(222, 222, 222)"},attrs:{headers:t.serviceInfoListHeader,items:t.serviceInfoList,"hide-actions":"","no-data-text":"Không có dữ liệu"},scopedSlots:t._u([{key:"headers",fn:function(e){return[a("tr",{staticStyle:{height:"42px"}},t._l(e.headers,(function(e){return a("th",{key:e.text,class:e["class"]?e["class"]:"",staticStyle:{"border-right":"1px solid #dedede"},attrs:{width:e["width"]?e["width"]+"px":""}},[a("v-tooltip",{attrs:{bottom:""}},[a("span",{attrs:{slot:"activator"},slot:"activator"},[t._v(t._s(e.text))]),a("span",[t._v(t._s(e.text))])])],1)})),0)]}},{key:"items",fn:function(e){return[a("tr",{class:{active:e.index%2==1},staticStyle:{cursor:"pointer"}},[a("td",{staticClass:"text-xs-center px-2 py-2",staticStyle:{width:"50px",height:"36px","border-right":"1px solid #dedede"},on:{click:function(a){return t.editServiceinfo(e.item)}}},[t.loadingTable?a("content-placeholders",[a("content-placeholders-text",{attrs:{lines:1}})],1):a("div",[a("span",[t._v(t._s(t.serviceinfoPage*t.numberPerPage-t.numberPerPage+e.index+1))])])],1),a("td",{staticClass:"text-xs-left px-2 py-2",staticStyle:{height:"36px","border-right":"1px solid #dedede"},on:{click:function(a){return t.editServiceinfo(e.item)}}},[t.loadingTable?a("content-placeholders",[a("content-placeholders-text",{attrs:{lines:1}})],1):a("div",[a("span",[t._v(t._s(e.item.serviceCode))])])],1),t.showMaDvcqg?a("td",{staticClass:"text-xs-left px-2 py-2",staticStyle:{height:"36px","border-right":"1px solid #dedede"},on:{click:function(a){return t.editServiceinfo(e.item)}}},[t.loadingTable?a("content-placeholders",[a("content-placeholders-text",{attrs:{lines:1}})],1):a("div",[a("span",[t._v(t._s(e.item.serviceCodeDVCQG))])])],1):t._e(),a("td",{staticClass:"text-xs-left px-2 py-2",staticStyle:{height:"36px","border-right":"1px solid #dedede"},on:{click:function(a){return t.editServiceinfo(e.item)}}},[t.loadingTable?a("content-placeholders",[a("content-placeholders-text",{attrs:{lines:1}})],1):a("div",[a("span",[t._v(t._s(e.item.serviceName))])])],1),a("td",{staticClass:"text-xs-left px-2 py-2",staticStyle:{height:"36px","border-right":"1px solid #dedede"},on:{click:function(a){return t.editServiceinfo(e.item)}}},[t.loadingTable?a("content-placeholders",[a("content-placeholders-text",{attrs:{lines:1}})],1):a("div",[a("span",[t._v(t._s(e.item.administrationName))])])],1),a("td",{staticClass:"text-xs-left px-2 py-2",staticStyle:{height:"36px","border-right":"1px solid #dedede"},on:{click:function(a){return t.editServiceinfo(e.item)}}},[t.loadingTable?a("content-placeholders",[a("content-placeholders-text",{attrs:{lines:1}})],1):a("div",[a("span",[t._v(t._s(e.item.domainName))])])],1),a("td",{staticClass:"text-xs-center px-2 py-2",staticStyle:{height:"36px","border-right":"1px solid #dedede"},on:{click:function(a){return t.editServiceinfo(e.item)}}},[t.loadingTable?a("content-placeholders",[a("content-placeholders-text",{attrs:{lines:1}})],1):a("div",[a("span",[t._v(t._s(e.item.maxLevel))])])],1),a("td",{staticClass:"text-xs-center px-2 py-2",staticStyle:{width:"180px",height:"36px","border-right":"1px solid #dedede"}},[t.loadingTable?a("content-placeholders",[a("content-placeholders-text",{attrs:{lines:1}})],1):a("div",[a("v-tooltip",{staticClass:"mx-2",attrs:{top:""}},[a("v-btn",{staticClass:"mx-0 my-0",attrs:{slot:"activator",disabled:t.loading,color:"blue",flat:"",icon:""},on:{click:function(a){return t.cloneThuTuc(e.item)}},slot:"activator"},[a("v-icon",[t._v("sync")])],1),a("span",[t._v("Đồng bộ sang Cổng dịch vụ công")])],1),a("v-tooltip",{staticClass:"mx-2",attrs:{top:""}},[a("v-btn",{staticClass:"mx-0 my-0",attrs:{slot:"activator",disabled:t.loading,color:"blue",flat:"",icon:""},on:{click:function(a){return t.editServiceinfo(e.item)}},slot:"activator"},[a("v-icon",[t._v("edit")])],1),a("span",[t._v("Sửa")])],1),a("v-tooltip",{staticClass:"mx-2",attrs:{top:""}},[a("v-btn",{staticClass:"mx-0 my-0",attrs:{slot:"activator",disabled:t.loading,color:"red",flat:"",icon:""},on:{click:function(a){return t.deleteServiceinfo(e.item)}},slot:"activator"},[a("v-icon",[t._v("delete")])],1),a("span",[t._v("Xóa")])],1)],1)],1)])]}}])}),a("div",{staticClass:"my-2"},[a("div",{staticClass:"text-xs-right layout wrap",staticStyle:{position:"relative"}},[a("div",{staticClass:"flex pagging-table"},[a("tiny-pagination",{attrs:{total:t.totalServiceinfo,page:t.serviceinfoPage,numberPerPage:t.numberPerPage,nameRecord:"thủ tục","custom-class":"custom-tiny-class"},on:{"tiny:change-page":t.changePage}})],1)])])],1)])],1)},ze=[];function Xe(t,e){return ta(t)||Ze(t,e)||Ye(t,e)||We()}function We(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function Ye(t,e){if(t){if("string"===typeof t)return Je(t,e);var a=Object.prototype.toString.call(t).slice(8,-1);return"Object"===a&&t.constructor&&(a=t.constructor.name),"Map"===a||"Set"===a?Array.from(t):"Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a)?Je(t,e):void 0}}function Je(t,e){(null==e||e>t.length)&&(e=t.length);for(var a=0,n=new Array(e);a<e;a++)n[a]=t[a];return n}function Ze(t,e){var a=null==t?null:"undefined"!==typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=a){var n,i,r=[],o=!0,s=!1;try{for(a=a.call(t);!(o=(n=a.next()).done);o=!0)if(r.push(n.value),e&&r.length===e)break}catch(c){s=!0,i=c}finally{try{o||null==a["return"]||a["return"]()}finally{if(s)throw i}}return r}}function ta(t){if(Array.isArray(t))return t}function ea(t,e,a){return e in t?Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}n["default"].use(Z.a),n["default"].component("vue-confirm-dialog",Z.a.default);var aa={components:{"tiny-pagination":bt},data:function(){var t;return t={showMaDvcqg:!1,exportExcel:!1,exportLoading:!1,validFormSearch:!1,isDvc:!1,quanhuyenSelected:"",boNganh:!1,administrationList:[],capCoQuanThucHien:"",govAgencyList:[],govAgencyFilter:"",domainList:[],domainFilter:"",serviceInfoList:[],serviceFilter:"",levelList:[{levelName:"Mức độ 2",level:2},{levelName:"Mức độ 3",level:3},{levelName:"Mức độ 4",level:4}],levelFilter:"",keyword:"",dialogAddApi:!1,dialogAddRole:!1,apiSelected:"",apiCode:"",apiName:"",listRoleApi:[],roleList:[],apiRole:"",apiDescription:"",className:"",listStatus:[{name:"Sử dụng",value:1},{name:"Không sử dụng",value:0}],apiStatus:"",updateApi:"add",fromDate:"",toDate:"",loading:!1,loadingTable:!1,loadingGetRole:!1,ladingAddRole:!1,menuDate1:!1,menuDate2:!1,fromReceiveDate:"",fromReceiveDateFormatted:"",toReceiveDate:"",toReceiveDateFormatted:"",apiItems:[],api:"",dossierNo:""},ea(t,"serviceInfoList",""),ea(t,"serviceinfoPage",1),ea(t,"numberPerPage",10),ea(t,"totalServiceinfo",0),ea(t,"options",{mode:"code"}),ea(t,"dataRequest",{}),ea(t,"dataResponse",{}),ea(t,"dialog_dataInfo",!1),ea(t,"rules",{required:function(t){return!!t||"Thông tin bắt buộc"}}),ea(t,"serviceInfoListHeader",[{text:"STT",align:"center",sortable:!1,width:50},{text:"Mã thủ tục",align:"center",sortable:!1},{text:"Tên thủ tục",align:"center",sortable:!1},{text:"Đơn vị",align:"center",sortable:!1},{text:"Lĩnh vực",align:"center",sortable:!1},{text:"Mức độ",align:"center",sortable:!1},{text:"Thao tác",align:"center",sortable:!1}]),ea(t,"headerListRole",[{text:"STT",align:"center",sortable:!1,width:50},{text:"Mã phân quyền",align:"center",sortable:!1},{text:"Tên",align:"center",sortable:!1},{text:"Thao tác",align:"center",sortable:!1}]),t},computed:{},created:function(){var t=this;try{t.isDvc=isDvc}catch(e){}t.$nextTick((function(){var e=new URLSearchParams,a={type:"admin",cmd:"get",config:"true",code:"opencps_serviceinfo",respone:"tableConfig"};e.append("text",JSON.stringify(a)),O.a.post("/o/rest/v2/socket/web",e,{}).then((function(e){var a=e.data.hasOwnProperty("tableConfig")?e.data["tableConfig"]:"";if(a&&a["detailColumns"])try{for(var n=JSON.parse(a["detailColumns"]),i=0;i<n.length;i++)n[i]["showMaDvcqg"]&&(t.showMaDvcqg=!0,t.serviceInfoListHeader.splice(2,0,{text:"Mã trên DVCQG",align:"center",sortable:!1})),n[i]["exportExcel"]&&(t.exportExcel=!0)}catch(r){}t.isDvc&&t.getAdministration(),t.getServiceInfoList(),t.getDomains()})).catch((function(){t.isDvc&&t.getAdministration(),t.getServiceInfoList(),t.getDomains()}))}))},watch:{govAgencyFilter:function(t){var e=this;e.domainFilter="",e.serviceFilter="",t&&e.isDvc&&e.getDomains(t)}},methods:{exportTableData:function(){var t=this,e={headers:{groupId:window.themeDisplay.getScopeGroupId(),Token:void 0!==window.Liferay?window.Liferay.authToken:"","Content-Type":"application/x-www-form-urlencoded",Accept:"application/json"},responseType:"blob"};t.exportLoading=!0,O.a.get("/o/rest/v2/serviceinfos?exportExcel=true&columnName=serviceCode,serviceName,domainCode,domainName,administrationCode,administrationName,maxLevel&tableName=ServiceInfo",e).then((function(e){t.exportLoading=!1;var a=e.headers["content-disposition"],n=a.split("filename=")[1]||dataReq.fileName;n=n.split('"').join("");var i=document.createElement("a");document.body.appendChild(i),i.style="display: none";var r=window.URL.createObjectURL(e.data);i.href=r,i.download=n,i.click(),window.URL.revokeObjectURL(r)})).catch((function(e){t.exportLoading=!1}))},getServiceAdminisTration:function(){var t=this,e=t.$router.history.current,a=(e.query,function(t){function e(t,e){return t.dictGroupId<e.dictGroupId?-1:t.dictGroupId>e.dictGroupId?1:0}return t.sort(e)});t.$store.dispatch("getServiceAdminisTration",{}).then((function(e){t.administrationList=a(e),t.capCoQuanThucHien="SBN",t.getAgencys("SBN"),t.getAgencys("QUAN_HUYEN")})).catch((function(){}))},getAdministration:function(){var t=this,e={};t.$store.dispatch("getAdministration",e).then((function(e){t.govAgencyList=e})).catch((function(){t.govAgencyList=[]}))},getDomains:function(t){var e=this,a={agencyCode:t||""};e.domainList=[],e.$store.dispatch("getDomain",a).then((function(t){e.domainList=t})).catch((function(){e.domainList=[]}))},getServiceInfo:function(t,e){var a=this,n={domain:e||"",administration:t||""};a.serviceInfoList=[],a.$store.dispatch("getServiceInfo",n).then((function(t){a.serviceInfoList=t})).catch((function(){a.serviceInfoList=[]}))},openCreateServiceInfo:function(){var t=this;t.$router.push({path:"/table/opencps_serviceinfo/editor/0",query:{renew:Math.floor(100*Math.random())+1}})},getServiceInfoList:function(t){var e=this;t&&(e.serviceinfoPage=1),e.loadingTable=!0;var a={headers:{groupId:window.themeDisplay.getScopeGroupId()},params:{start:e.serviceinfoPage*e.numberPerPage-e.numberPerPage,end:e.serviceinfoPage*e.numberPerPage,administration:e.govAgencyFilter,domain:e.domainFilter,level:e.levelFilter,keyword:e.keyword,active:"true"}};O.a.get("/o/rest/v2/serviceinfos",a).then((function(t){var a=t.data;e.loadingTable=!1,a["data"]?(e.serviceInfoList=Array.isArray(a["data"])?a["data"]:[a["data"]],e.totalServiceinfo=a["total"]):(e.serviceInfoList=[],e.totalServiceinfo=0)})).catch((function(t){e.loadingTable=!1,e.serviceInfoList=[],e.totalServiceinfo=0}))},changePage:function(t){var e=this;e.serviceinfoPage=t.page,e.getServiceInfoList()},editServiceinfo:function(t){var e=this,a=e.$router.history.current;a.query;e.$router.push({path:"/table/opencps_serviceinfo/editor/"+t.serviceInfoId+"?serviceCodeDvcqg="+t.serviceCodeDVCQG+"&serviceCode="+t.serviceCode})},deleteServiceinfo:function(t){var e=this;e.$confirm({title:"XÓA THỦ TỤC HÀNH CHÍNH",message:"Bạn có chắc chắn xóa thủ tục này",button:{yes:"Có",no:"Không"},callback:function(a){if(1==a){var n={headers:{groupId:window.themeDisplay.getScopeGroupId()}};O.a.delete("/o/rest/v2/serviceinfos/"+t["serviceInfoId"],n).then((function(){N.a.success("Xóa thủ tục thành công"),e.getServiceInfoList()})).catch((function(t){N.a.error("Xóa thủ tục thất bại")}))}}})},cloneThuTuc:function(t){var e=this;e.$confirm({title:"ĐỒNG BỘ THỦ TỤC HÀNH CHÍNH",message:"Bạn có chắc chắn đồng bộ thủ tục này sang Cổng dịch vụ công",button:{yes:"Có",no:"Không"},callback:function(a){if(1==a){e.loading=!0;var n={headers:{groupId:window.themeDisplay.getScopeGroupId(),Accept:"application/json","Content-Type":"application/x-www-form-urlencoded",Token:void 0!==window.Liferay?window.Liferay.authToken:""}},i=new URLSearchParams;i.append("type","serviceInfo"),i.append("serviceCode",t.serviceCode),i.append("fromServerNo",""),i.append("toServerNo","SERVER_DVC"),O.a.post("/o/rest/v2/backupDatas/exportProcess",i,n).then((function(t){e.loading=!1,N.a.success("Thủ tục đã được đồng bộ sang cổng Dịch vụ công")})).catch((function(){e.loading=!1,N.a.error("Đồng bộ thất bại")}))}}})},updateServiceProcessOption:function(t){var e=this,a=e.$router.history.current;a.query;e.$router.push({path:"/table/opencps_processoption?serviceConfigId="+t.serviceConfigId+"&serviceConfigName="+t.serviceName})},parsedate:function(t){var e=t.split("-"),a=Xe(e,3),n=a[0],i=a[1],r=a[2];return"".concat(r,"-").concat(i,"-").concat(n)},currentDate:function(){var t=new Date;return"".concat(t.getFullYear(),"-").concat((t.getMonth()+1).toString().padStart(2,"0"),"-").concat(t.getDate().toString().padStart(2,"0"))},changeDate:function(t){var e=this;e.menuDate1=e.menuDate2=!1,"1"===t?e.fromReceiveDateFormatted=e.formatDate(e.fromReceiveDate):"2"===t&&(e.toReceiveDateFormatted=e.formatDate(e.toReceiveDate))},getMinMax:function(t){if(!t)return null;var e=t.split("/"),a=Xe(e,3),n=a[0],i=a[1],r=a[2];return"".concat(r,"-").concat(i,"-").concat(n)},parseDate:function(t){if(!t)return"";if(String(t).indexOf("/")>0){var e=t.split("/"),a=Xe(e,3),n=a[0],i=a[1],r=a[2];return"".concat(r,"-").concat(i.padStart(2,"0"),"-").concat(n.padStart(2,"0"))}if(String(t).indexOf("-")>0){var o=t.split("-"),s=Xe(o,3),c=s[0],l=s[1],d=s[2];return"".concat(d,"-").concat(l.padStart(2,"0"),"-").concat(c.padStart(2,"0"))}var u=new Date(Number(t));return"".concat(u.getFullYear(),"-").concat((u.getMonth()+1).toString().padStart(2,"0"),"-").concat(u.getDate().toString().padStart(2,"0"))},formatDate:function(t){if(!t)return"";var e=t.split("-"),a=Xe(e,3),n=a[0],i=a[1],r=a[2];return"".concat(r,"/").concat(i,"/").concat(n)},currentDateFormat:function(t){var e=t?new Date(t):new Date;return"".concat(e.getDate().toString().padStart(2,"0"),"/").concat((e.getMonth()+1).toString().padStart(2,"0"),"/").concat(e.getFullYear()," ").concat(e.getHours().toString().padStart(2,"0"),":").concat(e.getMinutes().toString().padStart(2,"0"))},backToList:function(){window.history.back()}}},na=aa,ia=Object(p["a"])(na,Ke,ze,!1,null,null,null),ra=ia.exports,oa=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("v-card",{staticClass:"px-0 mx-0"},[a("v-toolbar",{attrs:{color:"blue darken-3",dark:"",height:"48"}},[a("v-toolbar-title",{staticClass:"ml-0"},[t._v("\n        "+t._s(t.currentProcessName)+"\n      ")]),a("v-spacer"),a("v-btn",{attrs:{dark:"",icon:""},nativeOn:{click:function(e){return t.backToList.apply(null,arguments)}}},[a("v-icon",[t._v("reply")])],1)],1),a("div",{staticClass:"grid-list"},[a("v-tabs",{model:{value:t.active,callback:function(e){t.active=e},expression:"active"}},[a("v-tabs-slider",{attrs:{color:"blue"}}),a("v-tab",{key:"tab-1",attrs:{href:"#tab-1",ripple:""},on:{click:function(e){return t.changeTab("process")}}},[t._v("\n          Thông tin quy trình\n        ")]),a("v-tab",{key:"tab-2",attrs:{disabled:!(Number(t.id)>0),href:"#tab-2",ripple:""},on:{click:function(e){return t.changeTab("step")}}},[t._v("\n          Bước\n        ")]),a("v-tab",{key:"tab-3",attrs:{disabled:!(Number(t.id)>0),href:"#tab-3",ripple:""},on:{click:function(e){return t.changeTab("action")}}},[t._v("\n          Thao tác\n        ")]),a("v-tab-item",{key:"tab-1",staticClass:"pt-3",attrs:{value:"tab-1",transition:"fade-transition","reverse-transition":"fade-transition"}},[a("v-card",{staticStyle:{"margin-bottom":"40px"}},[a("v-form",{ref:"formAddProcess",staticClass:"px-2",attrs:{"lazy-validation":""},model:{value:t.validAddProcess,callback:function(e){t.validAddProcess=e},expression:"validAddProcess"}},[a("v-layout",{attrs:{wrap:""}},[a("v-flex",{attrs:{xs12:"",sm12:""}},[a("v-text-field",{attrs:{box:"",rules:[t.rules.required,t.rules.varchar75,t.rules.syntaxError],maxlength:75,counter:75,required:""},on:{blur:function(e){return t.formatDataInput()}},model:{value:t.currentProcess.processNo,callback:function(e){t.$set(t.currentProcess,"processNo",e)},expression:"currentProcess.processNo"}},[a("template",{slot:"label"},[t._v("Số hiệu quy trình "),a("span",{staticClass:"red--text darken-3"},[t._v("*")])])],2)],1),a("v-flex",{attrs:{xs12:"",sm12:""}},[a("v-text-field",{attrs:{box:"",rules:[t.rules.required,t.rules.varchar500,t.rules.syntaxError],maxlength:500,counter:500,required:""},model:{value:t.currentProcess.processName,callback:function(e){t.$set(t.currentProcess,"processName",e)},expression:"currentProcess.processName"}},[a("template",{slot:"label"},[t._v("Tên quy trình "),a("span",{staticClass:"red--text darken-3"},[t._v("*")])])],2)],1),a("v-flex",{attrs:{xs12:"",sm12:""}},[a("v-text-field",{attrs:{label:"Mô tả",box:"",rules:[t.rules.varchar2000,t.rules.syntaxError],maxlength:2e3,counter:2e3},model:{value:t.currentProcess.description,callback:function(e){t.$set(t.currentProcess,"description",e)},expression:"currentProcess.description"}})],1),a("v-flex",{attrs:{xs12:"",sm12:""}},[a("v-layout",{attrs:{wrap:""}},[a("v-flex",{staticClass:"pl-0",attrs:{xs12:"",sm7:""}},[a("v-text-field",{attrs:{box:"",rules:[t.rules.required,t.rules.varchar75,t.rules.syntaxError],maxlength:75,counter:75,required:""},model:{value:t.currentProcess.durationCount,callback:function(e){t.$set(t.currentProcess,"durationCount",e)},expression:"currentProcess.durationCount"}},[a("template",{slot:"label"},[t._v("Thời gian xử lý "),a("span",{staticClass:"red--text darken-3"},[t._v("*")])])],2)],1),a("v-flex",{staticClass:"pl-2 pr-0",attrs:{xs12:"",sm5:""}},[a("v-select",{attrs:{box:"",items:[{text:"Tính theo ngày",value:0},{text:"Tính theo giờ",value:1}],"item-text":"text","item-value":"value"},model:{value:t.currentProcess.durationUnit,callback:function(e){t.$set(t.currentProcess,"durationUnit",e)},expression:"currentProcess.durationUnit"}})],1)],1)],1),a("v-flex",{attrs:{xs12:"",sm12:""}},[a("v-layout",{attrs:{wrap:""}},[a("v-flex",{staticClass:"pl-0",attrs:{xs12:"",sm4:""}},[a("v-autocomplete",{attrs:{box:"",label:"Vai trò xử lý",items:t.jobposList,"item-text":"title","item-value":"jobPosId","hide-selected":!0,"return-object":"",clearable:""},model:{value:t.processRoleId,callback:function(e){t.processRoleId=e},expression:"processRoleId"}})],1),a("v-flex",{staticClass:"pl-2",attrs:{xs12:"",sm3:""}},[a("v-select",{attrs:{box:"",items:[{text:"Theo dõi",value:0},{text:"Thực hiện",value:1}],"item-text":"text","item-value":"value",disabled:!t.processRoleId,"return-object":"",cleable:""},model:{value:t.processModerator,callback:function(e){t.processModerator=e},expression:"processModerator"}})],1),a("v-flex",{staticClass:"pl-2",attrs:{xs12:"",sm3:""}},[a("v-text-field",{attrs:{label:"Điều kiện phân công xử lý",disabled:!t.processRoleId,box:"",rules:[t.rules.varchar500,t.rules.syntaxError],maxlength:500,counter:500},model:{value:t.processCondition,callback:function(e){t.processCondition=e},expression:"processCondition"}})],1),a("v-flex",{staticClass:"pl-2 text-xs-right",attrs:{xs12:"",sm2:""}},[a("v-btn",{staticClass:"mr-0",attrs:{color:"blue darken-3",dark:"",disabled:!t.processRoleId},on:{click:t.createItemRole}},[a("v-icon",{attrs:{size:"24"}},[t._v("add")]),t._v(" \n                        Thêm\n                      ")],1)],1),a("v-flex",{attrs:{xs12:"",sm12:""}},[t.processRoleList.length>0?a("v-data-table",{staticClass:"elevation-1 table-bordered",staticStyle:{border:"1px solid #dedede"},attrs:{headers:t.headerProcessRoles,items:t.processRoleList,"hide-actions":""},scopedSlots:t._u([{key:"items",fn:function(e){return[a("td",{staticClass:"text-xs-left",attrs:{width:"40%"}},[t._v(t._s(e.item.roleName))]),a("td",{staticClass:"text-xs-left",attrs:{width:"25%"}},[t._v(t._s(t._f("moderatorText")(e.item.moderator)))]),a("td",{staticClass:"text-xs-left",attrs:{width:"25%"}},[t._v(t._s(e.item.condition))]),a("td",{staticClass:"text-xs-center px-0",attrs:{width:"10%"}},[a("v-icon",{attrs:{small:"",color:"red"},on:{click:function(a){return t.deleteProcessRoles(e.item,e.index)}}},[t._v("\n                              delete\n                            ")])],1)]}}],null,!1,460376502)}):t._e()],1)],1)],1),a("v-flex",{attrs:{xs12:"",sm12:""}},[a("v-layout",{attrs:{wrap:""}},[a("v-flex",{staticClass:"pl-0",attrs:{xs12:"",sm4:""}},[a("v-text-field",{attrs:{label:"Tên tiến trình",box:"",rules:[t.rules.varchar500,t.rules.syntaxError],maxlength:500,counter:500},model:{value:t.sequenceName,callback:function(e){t.sequenceName=e},expression:"sequenceName"}})],1),a("v-flex",{staticClass:"pl-2",attrs:{xs12:"",sm2:""}},[a("v-text-field",{attrs:{label:"Thứ tự thực hiện",box:"",rules:[t.rules.varchar75,t.rules.syntaxError],maxlength:75,counter:75},model:{value:t.sequenceNo,callback:function(e){t.sequenceNo=e},expression:"sequenceNo"}})],1),a("v-flex",{staticClass:"pl-2",attrs:{xs12:"",sm2:""}},[a("v-text-field",{attrs:{label:"Vai trò thực hiện",box:"",rules:[t.rules.varchar500,t.rules.syntaxError],maxlength:500,counter:500},model:{value:t.sequenceRole,callback:function(e){t.sequenceRole=e},expression:"sequenceRole"}})],1),a("v-flex",{staticClass:"pl-2",attrs:{xs12:"",sm2:""}},[a("v-text-field",{attrs:{label:"Thời hạn",box:"",type:"Number",rules:[t.rules.varchar75],maxlength:75,counter:75},model:{value:t.sequenceDurationCount,callback:function(e){t.sequenceDurationCount=e},expression:"sequenceDurationCount"}})],1),a("v-flex",{staticClass:"pl-2 text-xs-right",attrs:{xs12:"",sm2:""}},[a("v-btn",{staticClass:"mr-0",attrs:{color:"blue darken-3",dark:"",disabled:!(t.sequenceName&&t.sequenceRole&&t.sequenceNo&&t.sequenceDurationCount)},on:{click:t.createItemSequence}},[a("v-icon",{attrs:{size:"24"}},[t._v("add")]),t._v(" \n                        Thêm\n                      ")],1)],1),a("v-flex",{attrs:{xs12:"",sm12:""}},[t.processSequenceList.length>0?a("v-data-table",{staticClass:"elevation-1 table-bordered",staticStyle:{border:"1px solid #dedede"},attrs:{headers:t.headerProcessSequence,items:t.processSequenceList,"hide-actions":""},scopedSlots:t._u([{key:"items",fn:function(e){return[a("td",{staticClass:"text-xs-left",attrs:{width:"30%"}},[t._v(t._s(e.item.sequenceName))]),a("td",{staticClass:"text-xs-left",attrs:{width:"15%"}},[t._v(t._s(e.item.sequenceNo))]),a("td",{staticClass:"text-xs-left",attrs:{width:"30%"}},[t._v(t._s(e.item.sequenceRole))]),a("td",{staticClass:"text-xs-left",attrs:{width:"15%"}},[t._v(t._s(e.item.durationCount))]),a("td",{staticClass:"text-xs-center px-0",attrs:{width:"10%"}},[a("v-icon",{attrs:{small:"",color:"red"},on:{click:function(a){return t.deleteProcessSequence(e.item,e.index)}}},[t._v("\n                              delete\n                            ")])],1)]}}],null,!1,1835955881)}):t._e()],1)],1)],1),a("v-flex",{attrs:{xs12:"",sm12:""}},[a("v-layout",{attrs:{wrap:""}},[a("v-flex",{staticClass:"pr-2",attrs:{xs12:"",sm6:""}},[a("v-switch",{attrs:{label:"Tạo số tiếp nhận hồ sơ"},model:{value:t.currentProcess.generateDossierNo,callback:function(e){t.$set(t.currentProcess,"generateDossierNo",e)},expression:"currentProcess.generateDossierNo"}}),a("v-text-field",{attrs:{box:"",rules:t.currentProcess.generateDossierNo?[t.rules.required,t.rules.varchar500,t.rules.syntaxError]:[],required:t.currentProcess.generateDossierNo,disabled:!t.currentProcess.generateDossierNo,maxlength:500,counter:500},model:{value:t.currentProcess.dossierNoPattern,callback:function(e){t.$set(t.currentProcess,"dossierNoPattern",e)},expression:"currentProcess.dossierNoPattern"}},[a("template",{slot:"label"},[t._v("Cấu hình sinh mã số hồ sơ "),t.currentProcess.generateDossierNo?a("span",{staticClass:"red--text darken-3"},[t._v("*")]):t._e()])],2)],1),a("v-flex",{staticClass:"pl-2",attrs:{xs12:"",sm6:""}},[a("v-switch",{attrs:{label:"Sinh ngày hẹn trả hồ sơ"},model:{value:t.currentProcess.generateDueDate,callback:function(e){t.$set(t.currentProcess,"generateDueDate",e)},expression:"currentProcess.generateDueDate"}}),a("v-text-field",{attrs:{box:"",rules:t.currentProcess.generateDueDate?[t.rules.required,t.rules.varchar500,t.rules.syntaxError]:[],required:t.currentProcess.generateDueDate,disabled:!t.currentProcess.generateDueDate,maxlength:500,counter:500},model:{value:t.currentProcess.dueDatePattern,callback:function(e){t.$set(t.currentProcess,"dueDatePattern",e)},expression:"currentProcess.dueDatePattern"}},[a("template",{slot:"label"},[t._v("Cấu hình sinh ngày hẹn trả "),t.currentProcess.generateDueDate?a("span",{staticClass:"red--text darken-3"},[t._v("*")]):t._e()])],2)],1)],1)],1),a("v-flex",{staticClass:"mt-2",attrs:{xs12:"",sm12:""}},[a("v-layout",{attrs:{wrap:""}},[a("v-flex",{attrs:{xs12:"",sm6:""}},[a("v-switch",{attrs:{label:"Sinh mật mã tra cứu hồ sơ"},model:{value:t.currentProcess.generatePassword,callback:function(e){t.$set(t.currentProcess,"generatePassword",e)},expression:"currentProcess.generatePassword"}})],1),a("v-flex",{attrs:{xs12:"",sm6:""}},[a("v-switch",{attrs:{label:"Gửi thông báo cho chủ hồ sơ"},model:{value:t.currentProcess.directNotification,callback:function(e){t.$set(t.currentProcess,"directNotification",e)},expression:"currentProcess.directNotification"}})],1)],1)],1),a("v-layout",{attrs:{wrap:""}},[a("v-flex",{staticClass:"pr-2",attrs:{xs12:"",sm6:""}},[a("v-text-field",{attrs:{box:"",rules:[t.rules.varchar500,t.rules.syntaxError],maxlength:500,counter:500},model:{value:t.currentProcess.dossierGroupPattern,callback:function(e){t.$set(t.currentProcess,"dossierGroupPattern",e)},expression:"currentProcess.dossierGroupPattern"}},[a("template",{slot:"label"},[t._v("Cấu hình sinh mã nhóm hồ sơ")])],2)],1),a("v-flex",{attrs:{xs12:"",sm6:""}},[a("v-text-field",{attrs:{box:"",required:"",rules:[t.rules.required,t.rules.varchar75,t.rules.syntaxError],maxlength:75,counter:75},model:{value:t.currentProcess.serverNo,callback:function(e){t.$set(t.currentProcess,"serverNo",e)},expression:"currentProcess.serverNo"}},[a("template",{slot:"label"},[t._v("Server đồng bộ  "),a("span",{staticClass:"red--text darken-3"},[t._v("*")])])],2)],1)],1)],1),a("v-flex",{staticClass:"text-right pr-3",staticStyle:{position:"fixed",bottom:"0",background:"white","z-index":"4","border-top":"1px solid #dcdcdc",width:"100%","margin-left":"-268px !important",height:"70px"},attrs:{xs12:""}},[0===t.id||"0"===t.id?a("v-btn",{attrs:{color:"blue darken-3",dark:"",loading:t.loading,disabled:t.loading},on:{click:function(e){return t.updateProcess("add")}}},[a("v-icon",[t._v("add_circle_outline")]),t._v(" \n                  Thêm mới\n                ")],1):a("v-btn",{attrs:{color:"blue darken-3",dark:"",loading:t.loading,disabled:t.loading},on:{click:function(e){return t.updateProcess("update")}}},[a("v-icon",[t._v("save")]),t._v(" \n                  Cập nhật\n                ")],1),a("v-btn",{staticClass:"mr-0",attrs:{color:"red darken-3",dark:""},nativeOn:{click:function(e){return t.backToList.apply(null,arguments)}}},[a("v-icon",[t._v("reply")]),t._v(" \n                  Quay lại\n                ")],1)],1)],1)],1)],1),a("v-tab-item",{key:"tab-2",attrs:{value:"tab-2",transition:"fade-transition","reverse-transition":"fade-transition"}},[t.activeStepDetail?a("v-card",{staticClass:"pt-2",staticStyle:{"margin-bottom":"40px"}},[a("v-form",{ref:"formAddStep",staticClass:"px-2",attrs:{"lazy-validation":""},model:{value:t.validAddStep,callback:function(e){t.validAddStep=e},expression:"validAddStep"}},[a("v-layout",{attrs:{wrap:""}},[a("v-flex",{staticClass:"pr-2",attrs:{xs12:"",sm6:""}},[a("v-text-field",{attrs:{box:"",rules:[t.rules.required,t.rules.varchar500,t.rules.syntaxError],maxlength:500,counter:500,required:""},model:{value:t.currentStep.stepName,callback:function(e){t.$set(t.currentStep,"stepName",e)},expression:"currentStep.stepName"}},[a("template",{slot:"label"},[t._v("Tên bước  "),a("span",{staticClass:"red--text darken-3"},[t._v("*")])])],2)],1),a("v-flex",{staticClass:"pl-2",attrs:{xs12:"",sm6:""}},[a("v-text-field",{attrs:{label:"Số thứ tự",box:"",rules:[t.rules.varchar75,t.rules.syntaxError],maxlength:75,counter:75},model:{value:t.currentStep.sequenceNo,callback:function(e){t.$set(t.currentStep,"sequenceNo",e)},expression:"currentStep.sequenceNo"}})],1),a("v-flex",{staticClass:"pr-2",attrs:{xs12:"",sm6:""}},[a("v-autocomplete",{attrs:{box:"",items:t.dossierStatusList,"item-text":"itemName","item-value":"itemCode","hide-selected":!0,clearable:"",rules:[t.rules.required],required:""},on:{change:t.changeDossierStatus},scopedSlots:t._u([{key:"item",fn:function(e){return[a("v-flex",{attrs:{xs12:""}},[t._v(t._s(e.item.itemCode)+" - "+t._s(e.item.itemName))])]}}]),model:{value:t.currentStep.dossierStatus,callback:function(e){t.$set(t.currentStep,"dossierStatus",e)},expression:"currentStep.dossierStatus"}},[a("template",{slot:"label"},[t._v("Trạng thái chính  "),a("span",{staticClass:"red--text darken-3"},[t._v("*")])])],2)],1),a("v-flex",{staticClass:"pl-2",attrs:{xs12:"",sm6:""}},[a("v-text-field",{attrs:{box:"",rules:[t.rules.required,t.rules.varchar75,t.rules.syntaxError],maxlength:75,counter:75,required:""},model:{value:t.currentStep.stepCode,callback:function(e){t.$set(t.currentStep,"stepCode",e)},expression:"currentStep.stepCode"}},[a("template",{slot:"label"},[t._v("Mã bước quy trình "),a("span",{staticClass:"red--text darken-3"},[t._v("*")])])],2)],1),a("v-flex",{staticClass:"pr-2",attrs:{xs12:"",sm6:""}},[a("v-autocomplete",{attrs:{box:"",label:"Trạng thái phụ",items:t.dossierSubStatusList,"item-text":"itemName","item-value":"itemCode","hide-selected":!0,clearable:""},scopedSlots:t._u([{key:"item",fn:function(e){return[a("v-flex",{attrs:{xs12:""}},[t._v(t._s(e.item.itemCode)+" - "+t._s(e.item.itemName))])]}}]),model:{value:t.currentStep.dossierSubStatus,callback:function(e){t.$set(t.currentStep,"dossierSubStatus",e)},expression:"currentStep.dossierSubStatus"}})],1),a("v-flex",{attrs:{xs12:"",sm6:""}},[a("v-text-field",{attrs:{label:"Thời gian xử lý",box:"",rules:[t.rules.varchar500,t.rules.syntaxError],maxlength:500,counter:500},model:{value:t.currentStep.durationCount,callback:function(e){t.$set(t.currentStep,"durationCount",e)},expression:"currentStep.durationCount"}})],1),a("v-flex",{attrs:{xs12:"",sm12:""}},[a("v-text-field",{attrs:{label:"RoleAsStep",box:"",rules:[t.rules.varchar500,t.rules.syntaxError],maxlength:500,counter:500},model:{value:t.currentStep.roleAsStep,callback:function(e){t.$set(t.currentStep,"roleAsStep",e)},expression:"currentStep.roleAsStep"}})],1),a("v-flex",{attrs:{xs12:"",sm12:""}},[a("v-layout",{attrs:{wrap:""}},[a("v-flex",{staticClass:"pl-0",attrs:{xs12:"",sm3:""}},[a("v-autocomplete",{attrs:{label:"Vai trò xử lý",box:"",items:t.jobposList,"item-text":"title","item-value":"jobPosId","hide-selected":!0,"return-object":"",clearable:""},model:{value:t.stepRoleId,callback:function(e){t.stepRoleId=e},expression:"stepRoleId"}})],1),a("v-flex",{staticClass:"px-2",attrs:{xs12:"",sm3:""}},[a("v-select",{attrs:{box:"",items:[{text:"Theo dõi",value:0},{text:"Thực hiện",value:1}],"item-text":"text","item-value":"value",disabled:!t.stepRoleId,"return-object":"",cleable:""},model:{value:t.stepModerator,callback:function(e){t.stepModerator=e},expression:"stepModerator"}})],1),a("v-flex",{staticClass:"pl-1",attrs:{xs12:"",sm4:""}},[a("v-text-field",{attrs:{label:"Điều kiện phân công xử lý",disabled:!t.stepRoleId,box:"",rules:[t.rules.varchar500,t.rules.syntaxError],maxlength:500,counter:500},model:{value:t.stepCondition,callback:function(e){t.stepCondition=e},expression:"stepCondition"}})],1),a("v-flex",{staticClass:"pl-2 text-xs-right",attrs:{xs12:"",sm2:""}},[a("v-btn",{staticClass:"mr-0",attrs:{color:"blue darken-3",dark:"",disabled:!t.stepRoleId},on:{click:t.createItemStepRole}},[a("v-icon",{attrs:{size:"24"}},[t._v("add")]),t._v(" \n                        Thêm\n                      ")],1)],1)],1)],1),a("v-flex",{attrs:{xs12:"",sm12:""}},[t.stepRoleList.length>0?a("v-data-table",{staticClass:"elevation-1 table-bordered",staticStyle:{border:"1px solid #dedede"},attrs:{headers:t.headerProcessRoles,items:t.stepRoleList,"hide-actions":""},scopedSlots:t._u([{key:"items",fn:function(e){return[a("td",{staticClass:"text-xs-left",attrs:{width:"40%"}},[t._v(t._s(e.item.roleName))]),a("td",{staticClass:"text-xs-left",attrs:{width:"25%"}},[t._v(t._s(t._f("moderatorText")(e.item.moderator)))]),a("td",{staticClass:"text-xs-left",attrs:{width:"25%"}},[t._v(t._s(e.item.condition))]),a("td",{staticClass:"text-xs-center px-0",attrs:{width:"10%"}},[a("v-icon",{attrs:{color:"red",small:""},on:{click:function(a){return t.deleteStepRoles(e.item,e.index)}}},[t._v("\n                          delete\n                        ")])],1)]}}],null,!1,2701690671)}):t._e()],1),a("v-flex",{attrs:{xs12:"",sm12:""}},[a("v-text-field",{attrs:{label:"Hướng dẫn",box:"",row:""},model:{value:t.currentStep.stepInstruction,callback:function(e){t.$set(t.currentStep,"stepInstruction",e)},expression:"currentStep.stepInstruction"}})],1),a("v-flex",{attrs:{xs12:"",sm12:""}},[a("v-text-field",{attrs:{label:"Tóm tắt hồ sơ",box:""},model:{value:t.currentStep.briefNote,callback:function(e){t.$set(t.currentStep,"briefNote",e)},expression:"currentStep.briefNote"}})],1),a("v-flex",{attrs:{xs12:"",sm12:""}},[a("v-text-field",{attrs:{label:"Nhúng ajax của phần nghiệp vụ",box:""},model:{value:t.currentStep.customProcessUrl,callback:function(e){t.$set(t.currentStep,"customProcessUrl",e)},expression:"currentStep.customProcessUrl"}})],1),a("v-flex",{attrs:{xs12:"",sm6:""}},[a("v-autocomplete",{attrs:{box:"",label:"Hiển thị thành phần đầu vào",items:[{text:"Kiểm tra hồ sơ đầu vào",value:1},{text:"Bổ sung, hoàn thiện hồ sơ đầu vào",value:2}],"item-text":"text","item-value":"value",clearable:""},model:{value:t.currentStep.checkInput,callback:function(e){t.$set(t.currentStep,"checkInput",e)},expression:"currentStep.checkInput"}})],1),a("v-flex",{staticClass:"pl-2",attrs:{xs12:"",sm6:""}},[a("v-switch",{attrs:{label:"Cho phép sửa hồ sơ"},model:{value:t.currentStep.editable,callback:function(e){t.$set(t.currentStep,"editable",e)},expression:"currentStep.editable"}})],1)],1),a("v-flex",{staticClass:"text-right pr-3",staticStyle:{position:"fixed",bottom:"0",width:"calc( 100% - 300px )",background:"white","z-index":"2"},attrs:{xs12:""}},[0===t.currentStepId||"0"===t.currentStepId?a("v-btn",{attrs:{color:"blue darken-3",dark:"",loading:t.loading,disabled:t.loading},on:{click:function(e){return t.updateStep("add")}}},[a("v-icon",[t._v("add_circle_outline")]),t._v(" \n                  Thêm mới\n                ")],1):a("v-btn",{attrs:{color:"blue darken-3",dark:"",loading:t.loading,disabled:t.loading},on:{click:function(e){return t.updateStep("update")}}},[a("v-icon",[t._v("save")]),t._v(" \n                  Cập nhật\n                ")],1),a("v-btn",{attrs:{color:"red darken-3",dark:"",loading:t.loading,disabled:t.loading},on:{click:t.goBackStepList}},[a("v-icon",[t._v("reply")]),t._v(" \n                  Quay lại\n                ")],1)],1)],1)],1):a("v-card",{staticClass:"py-2 px-2",staticStyle:{"margin-bottom":"40px"}},[a("v-btn",{staticClass:"mb-3",attrs:{color:"blue darken-3",dark:"",loading:t.loading,disabled:t.loading},on:{click:t.createStep}},[a("v-icon",[t._v("add_circle_outline")]),t._v(" \n              Thêm bước xử lý\n            ")],1),a("v-data-table",{staticClass:"elevation-1 table-bordered",staticStyle:{border:"1px solid #dedede"},attrs:{headers:t.headerStep,items:t.stepList,"hide-actions":""},scopedSlots:t._u([{key:"items",fn:function(e){return[a("td",{staticClass:"text-xs-center",attrs:{width:"5%"}},[a("div",[a("span",[t._v(t._s(10*t.pageStep-10+e.index+1))])])]),a("td",{staticClass:"text-xs-left",attrs:{width:"35%"}},[t._v(t._s(e.item.stepName))]),a("td",{staticClass:"text-xs-left",attrs:{width:"15%"}},[t._v(t._s(e.item.stepCode))]),a("td",{staticClass:"text-xs-left",attrs:{width:"20%"}},[t._v(t._s(e.item.dossierStatusText))]),a("td",{staticClass:"text-xs-center",attrs:{width:"10%"}},[t._v(t._s(e.item.durationCount))]),a("td",{staticClass:"text-xs-center px-0",attrs:{width:"15%"}},[a("v-icon",{staticClass:"mr-3",attrs:{small:"",color:"blue"},on:{click:function(a){return t.editStep(e.item)}}},[t._v("\n                    edit\n                  ")]),a("v-icon",{attrs:{small:"",color:"red"},on:{click:function(a){return t.deleteStep(e.item)}}},[t._v("\n                    delete\n                  ")])],1)]}}],null,!1,368405285)},[a("template",{slot:"no-data"})],2),a("v-flex",{staticClass:"text-right",staticStyle:{position:"fixed",bottom:"0",width:"calc( 100% - 300px )",background:"white","z-index":"2"},attrs:{xs12:""}},[a("div",{staticClass:"text-xs-right layout wrap mt-2 pr-2",staticStyle:{position:"relative"}},[a("v-flex",{attrs:{xs12:""}},[a("tiny-pagination",{attrs:{total:t.pageTotalStep,page:t.pageStep,"custom-class":"custom-tiny-class"},on:{"tiny:change-page":t.paggingStepData}})],1)],1)])],1)],1),a("v-tab-item",{key:"tab-3",attrs:{value:"tab-3",transition:"fade-transition","reverse-transition":"fade-transition"}},[t.activeActionDetail?a("v-card",{staticClass:"pt-2",staticStyle:{"margin-bottom":"40px"}},[a("v-form",{ref:"formAddAction",staticClass:"px-2",attrs:{"lazy-validation":""},model:{value:t.validAddAction,callback:function(e){t.validAddAction=e},expression:"validAddAction"}},[a("v-layout",{attrs:{wrap:""}},[a("v-flex",{staticClass:"pr-2",attrs:{xs12:"",sm6:""}},[a("v-text-field",{attrs:{box:"",required:"",rules:[t.rules.required,t.rules.varchar500,t.rules.syntaxError],maxlength:500,counter:500},model:{value:t.currentAction.actionName,callback:function(e){t.$set(t.currentAction,"actionName",e)},expression:"currentAction.actionName"}},[a("template",{slot:"label"},[t._v("Tên thao tác "),a("span",{staticClass:"red--text darken-3"},[t._v("*")])])],2)],1),a("v-flex",{staticClass:"pl-2",attrs:{xs12:"",sm6:""}},[a("v-text-field",{attrs:{box:"",rules:[t.rules.required,t.rules.varchar75,t.rules.syntaxError],maxlength:75,counter:75},model:{value:t.currentAction.actionCode,callback:function(e){t.$set(t.currentAction,"actionCode",e)},expression:"currentAction.actionCode"}},[a("template",{slot:"label"},[t._v("Mã thao tác "),a("span",{staticClass:"red--text darken-3"},[t._v("*")])])],2)],1),a("v-flex",{staticClass:"pr-2",attrs:{xs12:"",sm6:""}},[a("v-text-field",{attrs:{label:"Điều kiện kiểm tra",box:"",rules:[t.rules.varchar500,t.rules.syntaxError],maxlength:500,counter:500},model:{value:t.currentAction.preCondition,callback:function(e){t.$set(t.currentAction,"preCondition",e)},expression:"currentAction.preCondition"}})],1),a("v-flex",{staticClass:"pl-2",attrs:{xs12:"",sm6:""}},[a("v-select",{attrs:{box:"",label:"Kích hoạt sự kiện",items:t.autoEventList,"item-text":"text","item-value":"value","hide-selected":!0,clearable:""},model:{value:t.currentAction.autoEvent,callback:function(e){t.$set(t.currentAction,"autoEvent",e)},expression:"currentAction.autoEvent"}})],1),a("v-flex",{staticClass:"pr-2",attrs:{xs12:"",sm6:""}},[a("v-autocomplete",{attrs:{label:"Bước thực hiện thao tác",box:"",items:t.stepListAction,"item-text":"stepName","item-value":"stepCode","hide-selected":!0,clearable:""},scopedSlots:t._u([{key:"item",fn:function(e){return[a("v-flex",{attrs:{xs12:""}},[t._v(t._s(e.item.stepCode)+" - "+t._s(e.item.stepName))])]}}]),model:{value:t.currentAction.preStepCode,callback:function(e){t.$set(t.currentAction,"preStepCode",e)},expression:"currentAction.preStepCode"}})],1),a("v-flex",{staticClass:"pl-2",attrs:{xs12:"",sm6:""}},[a("v-autocomplete",{attrs:{box:"",label:"Bước sau thực hiện thao tác",items:t.stepListAction,"item-text":"stepName","item-value":"stepCode","hide-selected":!0,clearable:""},scopedSlots:t._u([{key:"item",fn:function(e){return[a("v-flex",{attrs:{xs12:""}},[t._v(t._s(e.item.stepCode)+" - "+t._s(e.item.stepName))])]}}]),model:{value:t.currentAction.postStepCode,callback:function(e){t.$set(t.currentAction,"postStepCode",e)},expression:"currentAction.postStepCode"}})],1),a("v-flex",{staticClass:"pr-2",attrs:{xs12:"",sm6:""}},[a("v-select",{attrs:{box:"",label:"Phân công người thực hiện",items:t.assignTypeList,"item-text":"text","item-value":"value","hide-selected":!0,clearable:""},model:{value:t.currentAction.allowAssignUser,callback:function(e){t.$set(t.currentAction,"allowAssignUser",e)},expression:"currentAction.allowAssignUser"}})],1),a("v-flex",{staticClass:"pl-2",attrs:{xs12:"",sm6:""}},[a("v-switch",{attrs:{label:"Cho phép rollback"},model:{value:t.currentAction.rollbackable,callback:function(e){t.$set(t.currentAction,"rollbackable",e)},expression:"currentAction.rollbackable"}})],1),a("v-flex",{staticClass:"pr-2",attrs:{xs12:"",sm6:""}},[a("v-autocomplete",{attrs:{box:"",label:"Người được chọn ngầm định",items:t.employeeList,"item-text":"fullName","item-value":"employeeId","hide-selected":!0,clearable:""},model:{value:t.currentAction.assignUserId,callback:function(e){t.$set(t.currentAction,"assignUserId",e)},expression:"currentAction.assignUserId"}})],1),a("v-flex",{attrs:{xs12:"",sm12:""}},[a("v-autocomplete",{attrs:{box:"",label:"Mẫu hồ sơ",items:t.dossierTemplateList,"item-text":"templateName","item-value":"dossierTemplateId","hide-selected":!0,clearable:""},model:{value:t.currentAction.dossierTemplateNo,callback:function(e){t.$set(t.currentAction,"dossierTemplateNo",e)},expression:"currentAction.dossierTemplateNo"}})],1),a("v-flex",{staticClass:"pr-2",attrs:{xs12:"",sm6:""}},[a("v-autocomplete",{attrs:{box:"",label:"Tài liệu tạo mới",items:t.dossierPartList,"item-text":"partName","item-value":"fileTemplateNo",multiple:"",clearable:""},scopedSlots:t._u([{key:"selection",fn:function(e){var n=e.item,i=e.index;return[a("v-flex",{attrs:{xs12:""}},[t._v(t._s(i+1)+". "+t._s(n.partName))])]}}]),model:{value:t.currentAction.createDossierFiles,callback:function(e){t.$set(t.currentAction,"createDossierFiles",e)},expression:"currentAction.createDossierFiles"}})],1),a("v-flex",{staticClass:"pl-2",attrs:{xs12:"",sm6:""}},[a("v-autocomplete",{attrs:{box:"",label:"Kết quả trả về",items:t.dossierPartList,"item-text":"partName","item-value":"fileTemplateNo",multiple:"",clearable:""},scopedSlots:t._u([{key:"selection",fn:function(e){var n=e.item,i=e.index;return[a("v-flex",{attrs:{xs12:""}},[t._v(t._s(i+1)+". "+t._s(n.partName))])]}}]),model:{value:t.currentAction.returnDossierFiles,callback:function(e){t.$set(t.currentAction,"returnDossierFiles",e)},expression:"currentAction.returnDossierFiles"}})],1),a("v-flex",{attrs:{xs12:"",sm12:""}},[a("v-select",{attrs:{box:"",label:"Yêu cầu thanh toán",items:t.requestPaymentList,"item-text":"text","item-value":"value","hide-selected":!0},model:{value:t.currentAction.requestPayment,callback:function(e){t.$set(t.currentAction,"requestPayment",e)},expression:"currentAction.requestPayment"}})],1),Number(t.currentAction.requestPayment)>0?a("v-flex",{attrs:{xs12:"",sm12:""}},[a("v-text-field",{attrs:{label:"Chuỗi cấu hình tính phí",box:""},model:{value:t.currentAction.paymentFee,callback:function(e){t.$set(t.currentAction,"paymentFee",e)},expression:"currentAction.paymentFee"}})],1):t._e(),a("v-flex",{attrs:{xs12:"",sm12:""}},[a("v-text-field",{attrs:{label:"Mã đồng bộ",box:""},model:{value:t.currentAction.syncActionCode,callback:function(e){t.$set(t.currentAction,"syncActionCode",e)},expression:"currentAction.syncActionCode"}})],1),a("v-flex",{attrs:{xs12:"",sm12:""}},[a("v-text-field",{attrs:{label:"Cấu hình cơ quan",box:""},model:{value:t.currentAction.createDossier,callback:function(e){t.$set(t.currentAction,"createDossier",e)},expression:"currentAction.createDossier"}})],1),a("v-flex",{attrs:{xs12:"",sm12:""}},[a("v-text-field",{attrs:{label:"Cấu hình panel nhập ý kiến",box:""},model:{value:t.currentAction.configNote,callback:function(e){t.$set(t.currentAction,"configNote",e)},expression:"currentAction.configNote"}})],1),a("v-flex",{attrs:{xs12:"",sm12:""}},[a("v-text-field",{attrs:{label:"Thao tác thực hiện sau",box:"",rules:[t.rules.varchar500,t.rules.syntaxError],maxlength:500,counter:500},model:{value:t.currentAction.postAction,callback:function(e){t.$set(t.currentAction,"postAction",e)},expression:"currentAction.postAction"}})],1),a("v-flex",{attrs:{xs12:"",sm12:""}},[a("v-layout",{attrs:{wrap:""}},[a("v-flex",{staticClass:"pr-2",attrs:{xs12:"",sm3:""}},[a("v-switch",{attrs:{label:"Sinh mã số tiếp nhận"},model:{value:t.currentAction.createDossierNo,callback:function(e){t.$set(t.currentAction,"createDossierNo",e)},expression:"currentAction.createDossierNo"}})],1),a("v-flex",{staticClass:"pl-2",attrs:{xs12:"",sm2:""}},[a("v-switch",{attrs:{label:"Có ký số điện tử"},model:{value:t.currentAction.eSignature,callback:function(e){t.$set(t.currentAction,"eSignature",e)},expression:"currentAction.eSignature"}})],1),t.currentAction.eSignature?a("v-select",{staticClass:"pl-2",attrs:{xs12:"",sm3:"",box:"",label:"Hình thức xác nhận",items:t.esignatureTypeList,"item-text":"text","item-value":"value",clearable:""},model:{value:t.currentAction.signatureType,callback:function(e){t.$set(t.currentAction,"signatureType",e)},expression:"currentAction.signatureType"}}):t._e()],1)],1)],1),a("v-flex",{staticClass:"text-right pr-3",staticStyle:{position:"fixed",bottom:"0",width:"calc( 100% - 300px )",background:"white","z-index":"2"},attrs:{xs12:""}},[0===t.currentActionId||"0"===t.currentActionId?a("v-btn",{attrs:{color:"blue darken-3",dark:"",loading:t.loading,disabled:t.loading},on:{click:function(e){return t.updateAction("add")}}},[a("v-icon",[t._v("add_circle_outline")]),t._v(" \n                  Thêm mới\n                ")],1):a("v-btn",{attrs:{color:"blue darken-3",dark:"",loading:t.loading,disabled:t.loading},on:{click:function(e){return t.updateAction("update")}}},[a("v-icon",[t._v("save")]),t._v(" \n                  Cập nhật\n                ")],1),a("v-btn",{attrs:{color:"red darken-3",dark:"",loading:t.loading,disabled:t.loading},on:{click:t.goBackActionList}},[a("v-icon",[t._v("reply")]),t._v(" \n                  Quay lại\n                ")],1)],1)],1)],1):a("v-card",{staticClass:"py-2 px-2",staticStyle:{"margin-bottom":"40px"}},[a("v-btn",{staticClass:"mb-3",attrs:{color:"blue darken-3",dark:"",loading:t.loading,disabled:t.loading},on:{click:t.createAction}},[a("v-icon",[t._v("add_circle_outline")]),t._v(" \n              Thêm thao tác\n            ")],1),a("v-data-table",{staticClass:"elevation-1 table-bordered",staticStyle:{border:"1px solid #dedede"},attrs:{headers:t.headerAction,items:t.actionList,"hide-actions":""},scopedSlots:t._u([{key:"items",fn:function(e){return[a("td",{staticClass:"text-xs-center",attrs:{width:"5%"}},[a("div",[a("span",[t._v(t._s(10*t.pageAction-10+e.index+1))])])]),a("td",{staticClass:"text-xs-left",attrs:{width:"20%"}},[t._v(t._s(e.item.actionName))]),a("td",{staticClass:"text-xs-left",attrs:{width:"10%"}},[t._v(t._s(e.item.actionCode))]),a("td",{staticClass:"text-xs-left",attrs:{width:"25%"}},[t._v(t._s(e.item.preStepName))]),a("td",{staticClass:"text-xs-left",attrs:{width:"25%"}},[t._v(t._s(e.item.postStepName))]),a("td",{staticClass:"text-xs-center px-0",attrs:{width:"15%"}},[a("v-icon",{staticClass:"mr-3",attrs:{small:"",color:"blue"},on:{click:function(a){return t.editAction(e.item)}}},[t._v("\n                    edit\n                  ")]),a("v-icon",{attrs:{small:"",color:"red"},on:{click:function(a){return t.deleteAction(e.item)}}},[t._v("\n                    delete\n                  ")])],1)]}}],null,!1,3718687045)},[a("template",{slot:"no-data"})],2),a("v-flex",{staticClass:"text-right",staticStyle:{position:"fixed",bottom:"0",width:"calc( 100% - 300px )",background:"white","z-index":"2"},attrs:{xs12:""}},[a("div",{staticClass:"text-xs-right layout wrap mt-2 pr-2",staticStyle:{position:"relative"}},[a("v-flex",{attrs:{xs12:""}},[a("tiny-pagination",{attrs:{total:t.pageTotalAction,page:t.pageAction,"custom-class":"custom-tiny-class"},on:{"tiny:change-page":t.paggingActionData}})],1)],1)])],1)],1)],1)],1)],1)],1)},sa=[],ca=a("3f3e"),la={props:["id"],components:{"tiny-pagination":ca["a"]},data:function(){return{breadCrumbsitems:[{text:"Bảng dữ liệu",disabled:!1},{text:"",disabled:!1}],nameScreen:"",currentProcessName:"",processRoleId:"",processModerator:"",processCondition:"",sequenceName:"",sequenceNo:"",sequenceRole:"",sequenceDurationCount:"",stepRoleId:"",stepModerator:"",stepCondition:"",activeStep:!1,activeStepDetail:!1,currentStepId:"",activeAction:!1,activeActionDetail:!1,currentActionId:"",loading:!1,active:null,processRoleList:[],processSequenceList:[],stepRoleList:[],headerProcessRoles:[{text:"Tên",align:"center",sortable:!1},{text:"Vai trò",align:"center",sortable:!1},{text:"Điều kiện",align:"center",sortable:!1},{text:"Thao tác",align:"center",sortable:!1}],headerProcessSequence:[{text:"Tên tiến trình",align:"center",sortable:!1},{text:"Thứ tự thực hiện",align:"center",sortable:!1},{text:"Vai trò",align:"center",sortable:!1},{text:"Hạn xử lý",align:"center",sortable:!1},{text:"Thao tác",align:"center",sortable:!1}],currentProcess:{processNo:"",processName:"",description:"",durationCount:"",durationUnit:0,roleId:"",condition:"",moderator:0,serverNo:"",generateDossierNo:"",dossierNoPattern:"",dossierGroupPattern:"",generateDueDate:"",dueDatePattern:"",generatePassword:!1,directNotification:!1},validAddProcess:!1,pageTotalStep:0,pageStep:1,headerStep:[{text:"STT",align:"center",sortable:!1},{text:"Tên bước",align:"center",sortable:!1},{text:"Mã bước",align:"center",sortable:!1},{text:"Trạng thái",align:"center",sortable:!1},{text:"Thời gian xử lý",align:"center",sortable:!1},{text:"Thao tác",align:"center",sortable:!1}],stepList:[],stepListAction:[],listStepPage:1,listActionPage:1,currentStep:{stepName:"",dossierStatus:"",dossierSubStatus:"",durationCount:"",stepCode:"",roleId:"",moderator:0,condition:"",stepInstruction:"",briefNote:"",customProcessUrl:"",sequenceNo:"",editable:!1,checkInput:"",roleAsStep:""},validAddStep:!1,pageTotalAction:0,pageAction:1,headerAction:[{text:"STT",align:"center",sortable:!1},{text:"Tên thao tác",align:"center",sortable:!1},{text:"Mã thao tác",align:"center",sortable:!1},{text:"Bước thực hiện thao tác",align:"center",sortable:!1},{text:"Bước sau",align:"center",sortable:!1},{text:"Thao tác",align:"center",sortable:!1}],actionList:[],stepActionList:[],autoEventList:[{text:"listener",value:"listener"},{text:"timmer",value:"timmer"},{text:"special",value:"special"}],assignTypeList:[{text:"Không phân công",value:0},{text:"Chỉ phân công người thực hiện",value:1},{text:"Phân công thực hiện và phối hợp",value:2},{text:"Phân công thực hiện,phối hợp và theo dõi",value:3},{text:"Phân công thực hiện, phối hợp và ủy quyền theo dõi",value:4},{text:"Phân công chỉ chọn một người",value:5},{text:"Phân công theo danh sách role",value:6},{text:"Phân công theo danh sách role, chỉ chọn được một role",value:7},{text:"Phân công theo danh sách role, trừ những role của người dùng hiện tại",value:8},{text:"Phân công theo danh sách role, trừ những role của người dùng hiện tại, chỉ chọn một role",value:9}],dossierTemplateList:[],dossierPartList:[],agencyLists:[],employeeList:[],requestPaymentList:[{text:"Không thay đổi trạng thái",value:0},{text:"Yêu cầu nộp tiền tạm ứng",value:1},{text:"Yêu cầu quyết toán phí",value:2},{text:"Báo đã nộp phí trực tuyến",value:3},{text:"Yêu cầu nộp lại phí trực tuyến",value:4},{text:"Xác nhận hoàn thành thu phí",value:5}],currentAction:{actionName:"",actionCode:"",preCondition:"",autoEvent:"",preStepCode:"",postStepCode:"",allowAssignUser:"",rollbackable:!1,dossierTemplateNo:"",createDossierFiles:[],returnDossierFiles:[],requestPayment:0,paymentFee:"",createDossier:[],syncActionCode:"",configNote:"",createDossierNo:!1,eSignature:!1,signatureType:"digital",portAction:""},esignatureTypeList:[{text:"Sử dụng chữ ký số",value:"digital"},{text:"Sử dụng plugin ký số",value:"plugin"},{text:"Sử dụng HSM",value:"hsm"},{text:"Sử dụng plugin ký số và Hsm",value:"pluginAndHSM"},{text:"Sử dụng captcha",value:"captcha"},{text:"Nhập mật khẩu người dùng",value:"password"},{text:"Nhập mã pin",value:"pin"}],validAddAction:!1,rules:{required:function(t){return!t||(t=String(t).trim(),!!t||"Thông tin bắt buộc")},number:function(t){var e=/^\d+$/;return e.test(t)||"Bắt buộc phải nhập kiểu số."},email:function(t){var e=/^(([^<>()[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/;return e.test(t)||"Sai định dạng thư điện tử."},passWord:function(t){var e=/^((?=.*\d)(?=.*[a-z])(?=.*[A-Z])(?=.*[@$!%*#?&])([0-9a-zA-Z@$!%*#?&]{8,}))$/;return e.test(t)||"Ít nhất 8 ký tự và có chữ hoa, chữ thường, ký tự đặc biệt @$!%*#?&"},telNo:function(t){var e=/^0([1-9]{1}\d{8})$/;return t?e.test(t)||"Số điện thoại gồm 10 ký tự 0-9, eg: 0989123456, ...":[]},syntaxError:function(t){return!t||(t=String(t).trim(),t.indexOf("</")<0||"Không được có ký tự </")},varchar50:function(t){return!t||(t=String(t).trim(),t.length<=50||"Không được nhập quá 50 ký tự")},varchar75:function(t){return!t||(t=String(t).trim(),t.length<=75||"Không được nhập quá 75 ký tự")},varchar255:function(t){return!t||(t=String(t).trim(),t.length<=255||"Không được nhập quá 255 ký tự")},varchar500:function(t){return!t||(t=String(t).trim(),t.length<=500||"Không được nhập quá 500 ký tự")},varchar2000:function(t){return!t||(t=String(t).trim(),t.length<=5e3||"Không được nhập quá 5000 ký tự")},varchar5000:function(t){return!t||(t=String(t).trim(),t.length<=5e3||"Không được nhập quá 5000 ký tự")}}}},created:function(){var t=this;t.$nextTick((function(){var e=t.$router.history.current.query;t.$router.history.current.params;t.getJobpos(),t.getDossierStatus(),t.activeStep=e.hasOwnProperty("step")&&"true"===e.step,t.activeStepDetail=t.activeStep&&e.hasOwnProperty("stepCode")&&e.stepCode,t.currentStepId=t.activeStep&&e.hasOwnProperty("stepCode")&&e.stepCode?Number(e.stepCode):0,t.activeAction=e.hasOwnProperty("action")&&"true"===e.action,t.activeActionDetail=t.activeAction&&e.hasOwnProperty("actionCode")&&e.actionCode,t.currentActionId=t.activeAction&&e.hasOwnProperty("actionCode")&&e.actionCode?Number(e.actionCode):0,t.activeStep?t.active="tab-2":t.activeAction&&(t.active="tab-3"),t.doDetailContent()}))},computed:{jobposList:function(){return this.$store.getters.getJobPosList},dossierStatusList:function(){return this.$store.getters.getDossierStatusList},dossierSubStatusList:function(){return this.$store.getters.getDossierSubStatusList},templateNoAction:function(){return this.currentAction.dossierTemplateNo}},watch:{$route:function(t){var e=this,a=t.query;e.activeStep=a.hasOwnProperty("step")&&"true"===a.step,e.activeStepDetail=e.activeStep&&a.hasOwnProperty("stepCode")&&a.stepCode,e.currentStepId=e.activeStep&&a.hasOwnProperty("stepCode")&&a.stepCode?Number(a.stepCode):0,e.activeAction=a.hasOwnProperty("action")&&"true"===a.action,e.activeActionDetail=e.activeAction&&a.hasOwnProperty("actionCode")&&a.actionCode,e.currentActionId=e.activeAction&&a.hasOwnProperty("actionCode")&&a.actionCode?Number(a.actionCode):0,e.activeStep?e.active="tab-2":e.activeAction?e.active="tab-3":e.active="tab-1",e.doDetailContent()},templateNoAction:function(t){t?this.getDossierParts():(this.currentAction.createDossierFiles="",this.currentAction.returnDossierFiles="")}},methods:{getJobpos:function(){var t=this;t.$store.dispatch("getJobposList").then((function(e){t.$store.commit("setJobPosList",e)})).catch((function(t){}))},getDossierStatus:function(){var t=this;t.$store.dispatch("getDossierStatusList").then((function(e){t.$store.commit("setDossierStatusList",e)})).catch((function(t){}))},changeDossierStatus:function(){var t=this,e=t.currentStep.dossierStatus;e?t.getDossierSubStatus(e):t.$store.commit("setDossierSubStatusList",[])},getDossierSubStatus:function(t){var e=this;e.$store.dispatch("getDossierSubStatusList",t).then((function(t){e.$store.commit("setDossierSubStatusList",t)})).catch((function(t){}))},getProcessDetail:function(t){var e=this;e.$store.dispatch("getProcessDetail",t).then((function(t){e.currentProcess=t,e.currentProcessName=t.processName,e.getProcessRoles(),e.getProcessSequence()})).catch((function(t){}))},getProcessStepsDetail:function(t){var e=this,a={processId:e.id,stepCode:t};e.$store.dispatch("getProcessStepsDetail",a).then((function(t){e.currentStep=t,e.getStepRoles(t.stepCode),e.changeDossierStatus()})).catch((function(t){}))},getAgencyLists:function(){var t=this;t.$store.dispatch("getAgencyLists").then((function(e){t.agencyLists=e})).catch((function(t){}))},getEmployees:function(){var t=this;t.$store.dispatch("getEmployee").then((function(e){t.employeeList=e})).catch((function(t){}))},getDossierTemplates:function(){var t=this;t.$store.dispatch("getDossierTemplate").then((function(e){t.dossierTemplateList=e})).catch((function(t){}))},getDossierParts:function(){var t=this;t.currentAction.dossierTemplateNo?t.$store.dispatch("getDossierPart",t.currentAction.dossierTemplateNo).then((function(e){t.dossierPartList=e})).catch((function(t){})):t.dossierPartList=[]},paggingStepData:function(t){var e=this,a=e.$router.history.current,n=a.query,i="?";for(var r in n["page"]="",n)""!==n[r]&&"undefined"!==n[r]&&void 0!==n[r]&&null!==n[r]&&"null"!==n[r]&&(i+=r+"="+n[r]+"&");i+="page="+t.page,e.$router.push({path:a.path+i})},paggingActionData:function(t){var e=this,a=e.$router.history.current,n=a.query,i="?";for(var r in n["page"]="",n)""!==n[r]&&"undefined"!==n[r]&&void 0!==n[r]&&null!==n[r]&&"null"!==n[r]&&(i+=r+"="+n[r]+"&");i+="page="+t.page,e.$router.push({path:a.path+i})},getProcessSteps:function(t){var e=this,a=e.$router.history.current.query,n={processId:t,page:a.page?a.page:1};e.pageStep=a.page?Number(a.page):1,e.pageTotalStep=0,e.$store.dispatch("getProcessStep",n).then((function(t){e.stepList=t.data,e.pageTotalStep=t.total})).catch((function(t){}))},getProcessStepAction:function(t){var e=this,a={processId:t};e.$store.dispatch("getProcessStep",a).then((function(t){e.stepListAction=t.data})).catch((function(t){}))},getProcessActions:function(){var t=this,e=t.$router.history.current.query,a={processId:t.id,page:e.page?e.page:1};t.pageTotalAction=0,t.pageAction=e.page?Number(e.page):1,t.$store.dispatch("getProcessAction",a).then((function(e){t.actionList=e.data,t.pageTotalAction=e.total})).catch((function(t){}))},getProcessActionDetail:function(t){var e=this,a={processId:e.id,actionCode:t};e.$store.dispatch("getProcessActionsDetail",a).then((function(t){e.currentAction=t,e.currentAction["createDossier"]=t.createDossiers?t.createDossiers:"",e.currentAction["createDossierFiles"]=t.createDossierFiles?t.createDossierFiles.split(","):[],e.currentAction["returnDossierFiles"]=t.returnDossierFiles?t.returnDossierFiles.split(","):[]})).catch((function(t){}))},getProcessRoles:function(){var t=this,e={processId:t.id};t.$store.dispatch("getProcessRole",e).then((function(e){t.processRoleList=e})).catch((function(t){}))},getProcessSequence:function(){var t=this,e={processId:t.id};t.$store.dispatch("getProcessSequence",e).then((function(e){t.processSequenceList=e})).catch((function(t){}))},doDetailContent:function(){var t=this,e=t.$router.history.current.query;t.getAgencyLists(),Number(t.id)>0&&!t.activeStep&&!t.activeAction?t.getProcessDetail(t.id):t.activeStep&&!t.activeStepDetail?t.getProcessSteps(t.id):t.activeStep&&t.activeStepDetail?(t.currentStep={stepName:"",dossierStatus:"",dossierSubStatus:"",durationCount:"",stepCode:"",roleId:"",moderator:0,condition:"",stepInstruction:"",briefNote:"",customProcessUrl:"",sequenceNo:"",editable:!1,checkInput:"",roleAsStep:""},t.stepRoleList=[],Number(e.stepCode)>0&&t.getProcessStepsDetail(e.stepCode)):t.activeAction&&!t.activeActionDetail?t.getProcessActions(t.id):t.activeAction&&t.activeActionDetail&&(t.getProcessStepAction(t.id),t.getDossierTemplates(),t.getEmployees(),t.currentAction={actionName:"",actionCode:"",preCondition:"",autoEvent:"",preStepCode:"",postStepCode:"",allowAssignUser:"",rollbackable:!1,dossierTemplateNo:"",createDossierFiles:[],returnDossierFiles:[],requestPayment:0,syncActionCode:"",configNote:"",createDossierNo:!1,eSignature:!1,signatureType:"digital",createDossier:[]},Number(e.actionCode)>0&&t.getProcessActionDetail(e.actionCode))},updateProcess:function(t){var e=this;e.$router.history.current.path;e.$refs.formAddProcess.validate()&&(e.currentProcess["type"]=t,e.$store.dispatch("postProcess",e.currentProcess).then((function(a){if("add"===t){if(e.processRoleList.length>0)for(var n in e.processRoleList)e.createProcessRoles(a.serviceProcessId,e.processRoleList[n]);if(e.processSequenceList.length>0)for(var i in e.processSequenceList)e.createProcessSequence(a.serviceProcessId,e.processSequenceList[i]);N.a.success("Thực hiện thành công"),window.history.back()}else e.currentProcess=a,N.a.success("Thực hiện thành công"),window.history.back()})).catch((function(t){})))},createItemRole:function(){var t=this,e={roleId:t.processRoleId.roleId,roleName:t.processRoleId.title,roleCode:t.processRoleId.jobPosCode,moderator:t.processModerator.value,moderatorText:t.processModerator.text,condition:t.processCondition};Number(t.id)>0?t.createProcessRoles(t.id,e):t.processRoleList.unshift(e)},createProcessRoles:function(t,e){var a=this,n={processId:t,processRoles:e};a.$store.dispatch("postProcessRoles",n).then((function(t){a.getProcessRoles()})).catch((function(t){}))},createItemSequence:function(){var t=this,e={sequenceName:t.sequenceName,sequenceNo:t.sequenceNo,durationCount:t.sequenceDurationCount,sequenceRole:t.sequenceRole};Number(t.id)>0?t.createProcessSequence(t.id,e):t.processSequenceList.unshift(e)},createProcessSequence:function(t,e){var a=this,n={processId:t,processSequence:e};a.$store.dispatch("postProcessSequence",n).then((function(t){a.getProcessSequence()})).catch((function(t){}))},deleteProcessRoles:function(t,e){var a=this;if(Number(a.id)>0){var n=confirm("Xác nhận xóa dữ liệu");if(n){var i={processId:a.id,processRoles:t};a.$store.dispatch("deleteProcessRoles",i).then((function(t){a.getProcessRoles()})).catch((function(t){}))}}else a.processRoleList.splice(e,1)},deleteProcessSequence:function(t,e){var a=this;if(Number(a.id)>0){var n=confirm("Xác nhận xóa dữ liệu");if(n){var i={processId:a.id,processSequence:t};a.$store.dispatch("deleteProcessSequence",i).then((function(t){a.getProcessSequence()})).catch((function(t){}))}}else a.processSequenceList.splice(e,1)},createStep:function(){var t=this,e=t.$router.history.current.path;t.$router.push({path:e+"?step=true&stepCode=0",query:{renew:Math.floor(100*Math.random())+1}})},updateStep:function(t){var e=this,a=e.$router.history.current.path;e.$refs.formAddStep.validate()&&(e.currentStep["type"]=t,e.currentStep["currentProcess"]=e.id,e.$store.dispatch("postProcessStep",e.currentStep).then((function(n){if("add"===t){if(e.stepRoleList.length>0)for(var i in e.stepRoleList)e.createStepRoles(n.stepCode,e.stepRoleList[i]);e.$router.push({path:a+"?step=true",query:{renew:Math.floor(100*Math.random())+1}})}else e.$router.push({path:a+"?step=true",query:{renew:Math.floor(100*Math.random())+1}})})).catch((function(t){})))},editStep:function(t){var e=this,a=e.$router.history.current.path;e.$router.push({path:a+"?step=true&stepCode="+t.stepCode,query:{renew:Math.floor(100*Math.random())+1}})},createItemStepRole:function(){var t=this,e=t.$router.history.current.query,a=e.hasOwnProperty("stepCode")?e.stepCode:0,n={roleId:t.stepRoleId.roleId,roleName:t.stepRoleId.title,roleCode:t.stepRoleId.jobPosCode,moderatorText:t.stepModerator.text,moderator:t.stepModerator.value,condition:t.stepCondition};a>0?t.createStepRoles(a,n):t.stepRoleList.unshift(n)},createStepRoles:function(t,e){var a=this,n={processId:a.id,stepRoles:e,stepId:t};a.$store.dispatch("postStepRoles",n).then((function(e){a.getStepRoles(t)})).catch((function(t){}))},deleteStepRoles:function(t,e){var a=this,n=a.$router.history.current.query,i=n.hasOwnProperty("stepCode")?n.stepCode:0;if(Number(i)>0){var r=confirm("Xác nhận xóa dữ liệu");if(r){var o={processId:a.id,stepRoles:t,stepId:i};a.$store.dispatch("deleteStepRoles",o).then((function(t){a.getStepRoles(i)})).catch((function(t){}))}}else a.stepRoleList.splice(e,1)},deleteStep:function(t){var e=confirm("Xác nhận xóa dữ liệu");if(e){var a=this,n={currentProcess:a.id,stepCode:t.stepCode};a.$store.dispatch("deleteProcessStep",n).then((function(){setTimeout((function(){a.getProcessSteps(a.id)}),300)})).catch((function(t){}))}},getStepRoles:function(t){var e=this,a={processId:e.id,stepId:t};e.$store.dispatch("getStepRole",a).then((function(t){e.stepRoleList=t})).catch((function(t){}))},createAction:function(){var t=this,e=t.$router.history.current.path;t.$router.push({path:e+"?action=true&actionCode=0",query:{renew:Math.floor(100*Math.random())+1}})},updateAction:function(t){var e=this;e.$router.history.current.path;e.$refs.formAddAction.validate()&&(e.currentAction["type"]=t,e.currentAction["currentProcess"]=e.id,e.$store.dispatch("postProcessAction",e.currentAction).then((function(t){var a={processActionId:t.processActionId,postAction:e.currentAction["postAction"]};e.$store.dispatch("postAction",a).then((function(t){window.history.back()})).catch((function(){}))})).catch((function(t){})))},editAction:function(t){var e=this,a=e.$router.history.current.path;e.$router.push({path:a+"?action=true&actionCode="+t.processActionId,query:{renew:Math.floor(100*Math.random())+1}})},deleteAction:function(t){var e=confirm("Xác nhận xóa dữ liệu");if(e){var a=this,n={currentProcess:a.id,processActionId:t.processActionId};a.$store.dispatch("deleteProcessAction",n).then((function(t){a.getProcessActions(a.id)})).catch((function(t){}))}},changeTab:function(t){var e=this,a=e.$router.history.current.path;"process"===t?e.$router.push(a):"step"===t?Number(e.id)>0?e.$router.push({path:a+"?step=true&page=1",query:{renew:Math.floor(100*Math.random())+1}}):e.$router.push(a):e.$router.push({path:a+"?action=true&page=1",query:{renew:Math.floor(100*Math.random())+1}})},goBackStepList:function(){var t=this,e=t.$router.history.current.path;t.$router.push(e+"?step=true")},goBackActionList:function(){var t=this,e=t.$router.history.current.path;t.$router.push(e+"?action=true")},backToList:function(){var t=this,e=t.$router.history.current.path;t.$router.push(e.substring(0,e.indexOf("/ext/editor/")))}},filters:{moderatorText:function(t){return!1===t||"false"===t||0===t||"0"===t?"Theo dõi":"Thực hiện"},parseArray:function(t){return t?t.split(","):[]}}},da=la,ua=Object(p["a"])(da,oa,sa,!1,null,null,null),pa=ua.exports,va=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("v-breadcrumbs",[a("v-icon",{attrs:{slot:"divider"},slot:"divider"},[t._v("chevron_right")]),t._l(t.breadCrumbsitems,(function(e){return a("v-breadcrumbs-item",{key:e.text,attrs:{disabled:e.disabled}},[t._v("\r\n        "+t._s(e.text)+"\r\n      ")])})),a("a",{staticStyle:{"text-decoration":"none","font-weight":"bold"},attrs:{href:"javascript:;"}})],2),a("v-card",{staticClass:"px-2 mx-1"},[a("v-toolbar",{attrs:{color:"blue darken-3",dark:"",height:"48"}},[a("v-btn",{attrs:{dark:"",icon:""}},[a("v-icon",[t._v("edit")])],1),a("v-toolbar-title",{staticClass:"ml-0"},[t._v("\r\n          Đính kèm thủ tục\r\n        ")]),a("v-spacer"),a("v-btn",{attrs:{dark:"",icon:""},nativeOn:{click:function(e){return t.backToList.apply(null,arguments)}}},[a("v-icon",[t._v("reply")])],1)],1),a("div",{staticClass:"grid-list mt-3"},[a("v-layout",{attrs:{row:"",wrap:""}},[a("v-flex",{staticClass:"control-section uploader customdroparea",staticStyle:{position:"relative"},attrs:{xs12:""}},[a("div",{staticClass:"control_wrapper"},[a("div",{staticClass:"sample_wrapper"},[a("div",{attrs:{id:"dropArea"}},[a("div",{staticClass:"e-upload-done-list"},[a("ul",{staticClass:"e-upload-files"},t._l(t.fileTemplateData,(function(e,n){return a("li",{key:n,staticClass:"e-upload-file-list"},[a("div",{staticClass:"container",staticStyle:{position:"relative","min-height":"75px"}},[a("span",{staticClass:"wrapper",staticStyle:{"line-height":"10px"}},[a("span",{class:["icon sf-icon-"+e["extension"]]}),a("div",{staticClass:"name file-name"},[a("span",[t._v(t._s(e["fileName"]))]),a("span",{staticClass:"mx-2"},[a("strong",[t._v("Phiên bản "+t._s(e["version"]))])]),a("p",{staticStyle:{"margin-top":"5px","font-size":"10px","margin-bottom":"0"}},[t._v("\r\n                                    ( "+t._s((e["size"]/1048576).toFixed(2))+" MB )\r\n                                ")])]),a("v-btn",{staticStyle:{position:"absolute",right:"5px",top:"32px"},attrs:{flat:"",icon:"",color:"primary",loading:t.loading,disabled:t.loading},nativeOn:{click:function(a){return t.processDownloadFileAttach(e)}}},[a("v-icon",{attrs:{size:"14"}},[t._v("link")])],1)],1)])])})),0)])])])])])],1)],1)],1)],1)},ma=[],ha=a("e0e8"),ga=a("7de8");n["default"].use(ha["a"]);var fa={data:function(){return{breadCrumbsitems:[{text:"Đính kèm thủ tục",disabled:!1},{text:"",disabled:!1}],loadingRemove:!1,loading:!1,valid:!1,fileTemplateData:[],fileTemplateTotal:0,path:{saveUrl:"",removeUrl:""},extensions:".pdf, .txt, .rtf, .doc, .docx, .xls, .xlsx, .jpg, .png",dropArea:"dropArea",rawData:[],className:"",fileUpdate:null,indexFile:null}},props:["id"],created:function(){var t=this;t.$nextTick((function(){t.loadFileTemplate()}))},mounted:function(){var t=this;"opencps_deliverabletype"===this.code&&(1===this.pickItem.fileTemplateId||this.pickItem.fileTemplateId,this.path={saveUrl:"",removeUrl:""}),document.getElementById("browse").onclick=function(){return document.getElementsByClassName("e-file-select-wrap")[0].querySelector("button").click(),!1},document.getElementById("dropArea").onclick=function(e){if(e.target.classList.contains("e-file-delete-btn"))for(var a=0;a<t.$refs.uploadObj.getFilesData().length;a++)e.target.closest("li").getAttribute("data-file-name")===t.$refs.uploadObj.getFilesData()[a].name&&t.$refs.uploadObj.remove(t.$refs.uploadObj.getFilesData()[a]);else e.target.classList.contains("e-file-remove-btn")&&Object(ga["s"])(e.target.closest("li"))}},methods:{addHeaders:function(t){var e=this;t.currentRequest.setRequestHeader("Token",e.getAuthToken()),t.currentRequest.setRequestHeader("groupId",e.getScopeGroupId())},loadFileTemplate:function(){var t=this;t.fileTemplateData=[],t.$store.dispatch("getFileattachsVersions",t.id).then((function(e){t.fileTemplateTotal=e.total;for(var a=0;a<e.data.length;a++)t.fileTemplateData.push(JSON.parse(e.data[a]))})).catch((function(t){}))},onSuccess:function(){var t=this;setTimeout((function(){document.getElementById("dropArea").querySelectorAll(".e-upload-success").forEach((function(t){return t.parentNode.removeChild(t)})),t.loadFileTemplate()}),2e3)},onFileRemove:function(t){t.postRawFile=!1},processDownloadFileAttach:function(t){var e=this;e.loading=!0,e.$store.dispatch("detailFileAttachsVersions",t).then((function(){e.loading=!1})).catch((function(t){e.loading=!1,alert("Tải file xảy ra lỗi."+t)}))},backToList:function(){window.history.back()}}},ba=fa,xa=Object(p["a"])(ba,va,ma,!1,null,null,null),ya=xa.exports,Ca=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("v-breadcrumbs",[a("v-icon",{attrs:{slot:"divider"},slot:"divider"},[t._v("chevron_right")]),t._l(t.breadCrumbsitems,(function(e){return a("v-breadcrumbs-item",{key:e.text,attrs:{disabled:e.disabled}},[t._v("\n      "+t._s(e.text)+"\n    ")])})),a("a",{staticStyle:{"text-decoration":"none","font-weight":"bold"},attrs:{href:"javascript:;"}},[t._v("opencps_certnumbers")])],2),a("v-card",{staticClass:"px-2 mx-1"},[a("v-toolbar",{attrs:{color:"blue darken-3",dark:"",height:"48"}},[a("v-btn",{attrs:{dark:"",icon:""}},[a("v-icon",[t._v("edit")])],1),a("v-toolbar-title",{staticClass:"ml-0"},[t._v("\n        "+t._s(t.activeCertNumberDetail?t.currentCertNumber.pattern:"Danh sách tham số hệ thống")+"\n      ")]),a("v-spacer"),a("v-btn",{attrs:{dark:"",icon:""},nativeOn:{click:function(e){return t.backToList.apply(null,arguments)}}},[a("v-icon",[t._v("reply")])],1)],1),a("div",{staticClass:"grid-list mt-3"},[t.activeCertNumberDetail?a("v-form",{ref:"formAddCertNumber",attrs:{"lazy-validation":""},model:{value:t.validAddCertNumber,callback:function(e){t.validAddCertNumber=e},expression:"validAddCertNumber"}},[a("v-layout",{attrs:{wrap:""}},[0!==t.id&&"0"!==t.id?a("v-flex",{attrs:{xs12:"",sm12:""}},[a("v-text-field",{attrs:{box:"",readonly:"",label:"Tên tham số"},model:{value:t.currentCertNumber.certId,callback:function(e){t.$set(t.currentCertNumber,"certId",e)},expression:"currentCertNumber.certId"}})],1):t._e(),a("v-flex",{attrs:{xs12:"",sm12:""}},[a("v-text-field",{attrs:{box:"",rules:[t.rules.required],required:""},model:{value:t.currentCertNumber.pattern,callback:function(e){t.$set(t.currentCertNumber,"pattern",e)},expression:"currentCertNumber.pattern"}},[a("template",{slot:"label"},[t._v("Pattern "),a("span",{staticClass:"red--text darken-3"},[t._v("*")])])],2)],1),a("v-flex",{attrs:{xs12:"",sm12:""}},[a("v-text-field",{attrs:{box:"",type:"number",rules:[t.rules.required],required:""},model:{value:t.currentCertNumber.initNumber,callback:function(e){t.$set(t.currentCertNumber,"initNumber",e)},expression:"currentCertNumber.initNumber"}},[a("template",{slot:"label"},[t._v("Số khởi tạo "),a("span",{staticClass:"red--text darken-3"},[t._v("*")])])],2)],1)],1),a("v-flex",{staticClass:"text-right pr-3",staticStyle:{position:"fixed",bottom:"0",width:"calc( 100% - 300px )",background:"white","z-index":"2"},attrs:{xs12:""}},[0===t.id||"0"===t.id?a("v-btn",{attrs:{color:"blue darken-3",dark:"",loading:t.loading,disabled:t.loading},on:{click:function(e){return t.updateCertNumber("add")}}},[a("v-icon",[t._v("add_circle_outline")]),t._v(" \n            Thêm mới\n          ")],1):a("v-btn",{attrs:{color:"blue darken-3",dark:"",loading:t.loading,disabled:t.loading},on:{click:function(e){return t.updateCertNumber("update")}}},[a("v-icon",[t._v("save")]),t._v(" \n            Cập nhật\n          ")],1),a("v-btn",{staticClass:"mr-0",attrs:{color:"red darken-3",dark:""},nativeOn:{click:function(e){return t.backToList.apply(null,arguments)}}},[a("v-icon",[t._v("reply")]),t._v(" \n            Quay lại\n          ")],1)],1)],1):a("v-card",{staticClass:"py-2",staticStyle:{"margin-bottom":"40px"}},[a("v-btn",{staticClass:"mb-3 mx-0",attrs:{color:"blue darken-3",dark:""},on:{click:t.createCertNumbers}},[a("v-icon",[t._v("add_circle_outline")]),t._v(" \n          Thêm tham số hệ thống\n        ")],1),a("v-data-table",{staticClass:"elevation-1 table-bordered",staticStyle:{border:"1px solid #dedede"},attrs:{headers:t.headerCertNumber,items:t.certNumberList,"hide-actions":""},scopedSlots:t._u([{key:"items",fn:function(e){return[a("td",{staticClass:"text-xs-center",attrs:{width:"10%"}},[a("div",[a("span",[t._v(t._s(10*t.pageCertNumber-10+e.index+1))])])]),a("td",{staticClass:"text-xs-left",attrs:{width:"35%"}},[t._v(t._s(e.item.certId))]),a("td",{staticClass:"text-xs-left",attrs:{width:"20%"}},[t._v(t._s(e.item.pattern))]),a("td",{staticClass:"text-xs-left",attrs:{width:"10%"}},[t._v(t._s(e.item.initNumber))]),a("td",{staticClass:"text-xs-center px-0",attrs:{width:"15%"}},[a("v-icon",{staticClass:"mr-3",attrs:{small:"",color:"blue"},on:{click:function(a){return t.editCertNumber(e.item)}}},[t._v("\n                edit\n              ")]),a("v-icon",{attrs:{small:"",color:"red"},on:{click:function(a){return t.deleteCertNumber(e.item)}}},[t._v("\n                delete\n              ")])],1)]}}],null,!1,603390036)},[a("template",{slot:"no-data"})],2),a("v-flex",{staticClass:"text-right",staticStyle:{position:"fixed",bottom:"0",width:"calc( 100% - 300px )",background:"white","z-index":"2"},attrs:{xs12:""}},[a("div",{staticClass:"text-xs-right layout wrap mt-2 pr-2",staticStyle:{position:"relative"}},[a("v-flex",{attrs:{xs12:""}},[a("tiny-pagination",{attrs:{total:t.pageTotalCertNumber,page:t.pageCertNumber,"custom-class":"custom-tiny-class"},on:{"tiny:change-page":t.paggingCertData}})],1)],1)])],1)],1)],1)],1)},_a=[],Sa={components:{"tiny-pagination":ca["a"]},data:function(){return{breadCrumbsitems:[{text:"Bảng dữ liệu",disabled:!1},{text:"",disabled:!1}],id:"",activeCertNumberDetail:!1,headerCertNumber:[{text:"STT",align:"center",sortable:!1},{text:"Tên tham số",align:"center",sortable:!1},{text:"Pattern",align:"center",sortable:!1},{text:"Số khởi tạo",align:"center",sortable:!1},{text:"Thao tác",align:"center",sortable:!1}],pageTotalCertNumber:0,pageCertNumber:1,certNumberList:[],currentCertNumber:{certId:"",pattern:"",initNumber:""},validAddCertNumber:!1,loading:!1,rules:{required:function(t){return!!t||0===t||"Trường dữ liệu bắt buộc"}}}},created:function(){var t=this;t.$nextTick((function(){var e=t.$router.history.current.query;t.activeCertNumberDetail=e.hasOwnProperty("id")&&""!==e.id,t.activeCertNumberDetail?(t.id=e.id,0!==t.id&&"0"!==t.id?t.getCertNumberDetail():t.currentCertNumber={certId:"",pattern:"",initNumber:""}):t.getCertNumberList()}))},computed:{},watch:{$route:function(t){var e=this,a=t.query;e.activeCertNumberDetail=a.hasOwnProperty("id")&&""!==a.id,e.activeCertNumberDetail?(e.id=a.id,0!==e.id&&"0"!==e.id?e.getCertNumberDetail():e.currentCertNumber={certId:"",pattern:"",initNumber:""}):e.getCertNumberList()}},methods:{createCertNumbers:function(){var t=this,e=t.$router.history.current.path;t.$router.push({path:e+"?id=0",query:{renew:Math.floor(100*Math.random())+1}})},getCertNumberList:function(){var t=this,e=t.$router.history.current.query,a={page:e.page?e.page:1};t.pageCertNumber=e.page?Number(e.page):1,t.pageTotalCertNumber=0,t.$store.dispatch("getCertNumberList",a).then((function(e){t.pageTotalCertNumber=e.total,t.certNumberList=e.data})).catch((function(t){}))},getCertNumberDetail:function(){var t=this,e={certId:t.id};t.$store.dispatch("getCertNumberDetail",e).then((function(e){t.currentCertNumber=e})).catch((function(t){}))},paggingCertData:function(t){var e=this,a=e.$router.history.current,n=a.query,i="?";for(var r in n["page"]="",n)""!==n[r]&&"undefined"!==n[r]&&void 0!==n[r]&&null!==n[r]&&"null"!==n[r]&&(i+=r+"="+n[r]+"&");i+="page="+t.page,e.$router.push({path:a.path+i})},editCertNumber:function(t){var e=this,a=e.$router.history.current.path;e.$router.push({path:a+"?id="+t.certId,query:{renew:Math.floor(100*Math.random())+1}})},deleteCertNumber:function(t){var e=confirm("Xác nhận xóa dữ liệu");if(e){var a=this,n={certId:t.certId};a.$store.dispatch("deleteCertNumber",n).then((function(){setTimeout((function(){a.getCertNumberList()}),300)})).catch((function(t){}))}},updateCertNumber:function(t){var e=this,a=e.$router.history.current.path;e.$refs.formAddCertNumber.validate()&&(e.currentCertNumber["type"]=t,e.loading=!0,e.$store.dispatch("updateCertNumber",e.currentCertNumber).then((function(n){e.loading=!1,"add"===t?e.$router.push({path:a.replace(0,n.certId),query:{renew:Math.floor(100*Math.random())+1}}):e.currentCertNumber=n})).catch((function(t){e.loading=!1})))},backToList:function(){window.history.back()}},filters:{}},ka=Sa,Da=Object(p["a"])(ka,Ca,_a,!1,null,null,null),wa=Da.exports,Ta=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("v-breadcrumbs",[a("v-icon",{attrs:{slot:"divider"},slot:"divider"},[t._v("chevron_right")]),t._l(t.breadCrumbsitems,(function(e){return a("v-breadcrumbs-item",{key:e.text,attrs:{disabled:e.disabled}},[t._v("\n      "+t._s(e.text)+"\n    ")])})),a("a",{staticStyle:{"text-decoration":"none","font-weight":"bold"},attrs:{href:"javascript:;"}},[t._v("opencps_voting")])],2),a("v-card",{staticClass:"px-2 mx-1"},[a("v-toolbar",{attrs:{color:"blue darken-3",dark:"",height:"48"}},[a("v-btn",{attrs:{dark:"",icon:""}},[a("v-icon",[t._v("edit")])],1),a("v-toolbar-title",{staticClass:"ml-0"},[t._v("\n        Quản lý câu hỏi khảo sát\n      ")]),a("v-spacer"),a("v-btn",{attrs:{dark:"",icon:""},nativeOn:{click:function(e){return t.backToList.apply(null,arguments)}}},[a("v-icon",[t._v("reply")])],1)],1),a("div",{staticClass:"grid-list mt-3"},[a("v-card",{staticClass:"py-2"},[a("v-flex",{staticClass:"pl-0",attrs:{xs12:""}},[a("v-autocomplete",{attrs:{box:"",label:"Đối tượng khảo sát",items:t.classNameItems,"item-text":"text","item-value":"value"},on:{change:t.changeClassName},scopedSlots:t._u([{key:"item",fn:function(e){return[a("v-flex",{attrs:{xs12:""}},[t._v(t._s(e.item.text)+" - "+t._s(e.item.value))])]}}]),model:{value:t.className,callback:function(e){t.className=e},expression:"className"}})],1)],1),a("v-card",[t.className?a("v-btn",{staticClass:"mb-3 mx-2",attrs:{color:"blue darken-3",dark:""},on:{click:t.createQuestion}},[a("v-icon",[t._v("add_circle_outline")]),t._v(" \n          Thêm câu hỏi\n        ")],1):t._e(),a("div",{staticClass:"px-2 py-2"},[t._l(t.votingItems,(function(e,n){return Array.isArray(t.votingItems)&&t.votingItems.length>0?a("div",{key:n,staticClass:"mb-2",staticStyle:{position:"relative"}},[a("v-layout",{staticClass:"text-bold",attrs:{wrap:""}},[a("div",{staticClass:"flex px-3 py-1",staticStyle:{height:"26px","max-width":"80px","background-color":"#034687",transform:"skew(-25deg)"}},[a("span",{staticClass:"d-block white--text",staticStyle:{transform:"skew(25deg)"}},[t._v("Câu "+t._s(n+1)+" : ")])]),a("div",{staticClass:"flex pl-3 pr-2 pt-0",staticStyle:{"max-width":"calc(100% - 100px)",color:"#034687"},domProps:{innerHTML:t._s(2!==t.lastestVersion?e.subject:e.title)}})]),2!==t.lastestVersion?a("div",{staticStyle:{position:"absolute",right:"0px",top:"-5px"},style:Array.isArray(e.choices)&&e.choices.length>1?"width:50px":"width:85px"},[a("v-tooltip",{attrs:{top:""}},[a("v-btn",{staticClass:"mx-0 my-1",attrs:{slot:"activator",icon:"",ripple:""},on:{click:function(a){return t.editVotings(e)}},slot:"activator"},[a("v-icon",{attrs:{color:"blue lighten-1"}},[t._v("edit")])],1),a("span",[t._v("Sửa")])],1),a("v-tooltip",{attrs:{top:""}},[a("v-btn",{staticClass:"mx-0 my-1",attrs:{slot:"activator",icon:"",ripple:""},on:{click:function(a){return t.deleteVotings(e)}},slot:"activator"},[a("v-icon",{attrs:{color:"red lighten-1"}},[t._v("delete")])],1),a("span",[t._v("Xóa")])],1)],1):t._e(),2===t.lastestVersion?a("div",{staticStyle:{position:"absolute",right:"0px",top:"-5px"},style:Array.isArray(e.lstChoiceDetailModels)&&e.lstChoiceDetailModels.length>1?"width:50px":"width:85px"},[a("v-tooltip",{attrs:{top:""}},[a("v-btn",{staticClass:"mx-0 my-1",attrs:{slot:"activator",icon:"",ripple:""},on:{click:function(a){return t.editVotings(e)}},slot:"activator"},[a("v-icon",{attrs:{color:"blue lighten-1"}},[t._v("edit")])],1),a("span",[t._v("Sửa")])],1),a("v-tooltip",{attrs:{top:""}},[a("v-btn",{staticClass:"mx-0 my-1",attrs:{slot:"activator",icon:"",ripple:""},on:{click:function(a){return t.deleteVotings(e)}},slot:"activator"},[a("v-icon",{attrs:{color:"red lighten-1"}},[t._v("delete")])],1),a("span",[t._v("Xóa")])],1)],1):t._e(),2!==t.lastestVersion?a("v-radio-group",{staticClass:"ml-3 mt-2",style:Array.isArray(e.choices)&&e.choices.length>1?"width:calc(100% - 50px)":"width:calc(100% - 85px)",attrs:{column:""}},t._l(e.choices,(function(t,e){return a("v-radio",{key:e,attrs:{label:t,value:e+1,readonly:""}})})),1):t._e(),2===t.lastestVersion?a("v-radio-group",{staticClass:"ml-3 mt-2",style:Array.isArray(e.lstChoiceDetailModels)&&e.lstChoiceDetailModels.length>1?"width:calc(100% - 50px)":"width:calc(100% - 85px)",attrs:{column:""}},t._l(e.lstChoiceDetailModels,(function(t,e){return a("v-radio",{key:e,attrs:{label:t["subject"],value:e+1,readonly:""}})})),1):t._e(),Array.isArray(t.votingItems)&&n+1<t.votingItems.length?a("v-divider"):t._e()],1):t._e()})),Array.isArray(t.votingItems)&&0===t.votingItems.length?a("div",{},[a("v-alert",{attrs:{outline:"",color:"warning",icon:"priority_high",value:!0}},[t._v("\n              Không có câu hỏi\n            ")])],1):t._e()],2)],1),a("v-dialog",{attrs:{scrollable:"",persistent:"","max-width":"1000px"},model:{value:t.dialog_addQuestion,callback:function(e){t.dialog_addQuestion=e},expression:"dialog_addQuestion"}},[a("v-card",[a("v-card-title",{staticClass:"headline pb-2"},["add"===t.type?a("span",[t._v("Thêm câu hỏi")]):a("span",[t._v("Sửa câu hỏi")])]),a("v-card-text",{staticClass:"pt-0"},[a("v-form",{ref:"formAddQuestion",attrs:{"lazy-validation":""},model:{value:t.validForm,callback:function(e){t.validForm=e},expression:"validForm"}},[2!==t.lastestVersion?a("v-layout",{staticClass:"py-1 align-center row-list-style",attrs:{wrap:""}},[a("p",{staticClass:"my-2"},[t._v("Mã câu hỏi:")]),a("v-flex",{attrs:{xs12:""}},[a("v-text-field",{attrs:{box:"",rules:"add"===t.type?[t.rules.required,t.rules.varchar75,t.rules.syntaxError]:[],required:"add"===t.type,disabled:"add"!==t.type,maxlength:75,counter:75},model:{value:t.votingCode,callback:function(e){t.votingCode=e},expression:"votingCode"}})],1),a("p",{staticClass:"my-2"},[t._v("Nội dung câu hỏi:")]),a("v-flex",{staticStyle:{position:"relative"},attrs:{xs12:""}},[a("v-btn",{staticStyle:{position:"absolute",top:"0",right:"0","z-index":"5"},attrs:{flat:"",icon:"",color:"primary"},on:{click:function(e){t.editorVisible=!t.editorVisible}}},[t.editorVisible?a("v-icon",[t._v("edit")]):a("v-icon",[t._v("code")])],1),t.editorVisible?t._e():a("v-textarea",{attrs:{box:"",rows:"3",rules:[t.rules.required,t.rules.varchar2000,t.rules.syntaxError],required:"",maxlength:2e3,counter:2e3},model:{value:t.subject,callback:function(e){t.subject=e},expression:"subject"}})],1),a("p",{staticClass:"my-2"},[t._v("Câu trả lời: ")]),a("v-flex",{attrs:{xs12:""}},[a("v-layout",{attrs:{wrap:""}},[a("v-flex",{staticClass:"pr-2",attrs:{xs12:"",sm10:""}},[a("v-textarea",{attrs:{box:"",clearable:"",rows:"3",maxlength:5e3,counter:5e3},on:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.addChoices.apply(null,arguments)}},model:{value:t.answer,callback:function(e){t.answer=e},expression:"answer"}})],1),a("v-flex",{staticClass:"text-xs-right",attrs:{xs12:"",sm2:""}},[a("v-btn",{staticClass:"mt-0 mr-0",attrs:{color:"blue darken-3",dark:"",disabled:!(t.answer&&String(t.answer).length<=5e3),title:t.answer&&String(t.answer).length>5e3?"Câu trả lời tối đa 5000 ký tự":""},on:{click:t.addChoices}},[a("v-icon",{attrs:{size:"24"}},[t._v("add")]),t._v(" \n                        Thêm\n                      ")],1)],1)],1),t._l(t.choicesCurrent,(function(e,n){return a("v-list-tile",{key:n,staticClass:"mt-2",staticStyle:{border:"1px solid #8fbc8f"}},[a("v-list-tile-content",[a("v-list-tile-title",{staticStyle:{"font-size":"13px"}},[t._v(t._s(e))])],1),a("v-list-tile-action",[a("v-btn",{staticClass:"mx-0 my-0",attrs:{icon:"",ripple:""},on:{click:function(a){return t.deleteChoice(n,e)}}},[a("v-icon",{attrs:{color:"red lighten-1"}},[t._v("clear")])],1)],1)],1)}))],2)],1):a("v-layout",{staticClass:"py-1 align-center row-list-style",attrs:{wrap:""}},[a("p",{staticClass:"my-2"},[t._v("Mã câu hỏi "),a("span",{staticStyle:{color:"red"}},[t._v("(*)")]),t._v(":")]),a("v-flex",{attrs:{xs12:""}},[a("v-text-field",{attrs:{box:"",rules:"add"===t.type?[t.rules.required,t.rules.varchar75,t.rules.syntaxError]:[],maxlength:75,counter:75},model:{value:t.votingCode,callback:function(e){t.votingCode=e},expression:"votingCode"}})],1),a("p",{staticClass:"my-2"},[t._v("Nội dung câu hỏi "),a("span",{staticStyle:{color:"red"}},[t._v("(*)")]),t._v(":")]),a("v-flex",{staticStyle:{position:"relative"},attrs:{xs12:""}},[a("v-textarea",{attrs:{box:"",rows:"5",rules:[t.rules.required,t.rules.varchar5000,t.rules.syntaxError],required:"",maxlength:5e3,counter:5e3},model:{value:t.subject,callback:function(e){t.subject=e},expression:"subject"}})],1),a("v-layout",{staticStyle:{width:"100%"},attrs:{wrap:""}},[a("v-flex",{class:"survey"===t.className?"xs12 md6":"xs12"},[a("p",{staticClass:"my-2"},[t._v("Trạng thái "),a("span",{staticStyle:{color:"red"}},[t._v("(*)")]),t._v(":")]),a("v-flex",{attrs:{xs12:""}},[a("v-autocomplete",{attrs:{box:"",items:t.statusItems,"item-text":"text","item-value":"value",rules:[t.rules.required],required:""},model:{value:t.status,callback:function(e){t.status=e},expression:"status"}})],1)],1),"survey"===t.className?a("v-flex",{staticClass:"pl-3",attrs:{xs12:"",md6:""}},[a("p",{staticClass:"my-2"},[t._v("ProcessTime :")]),a("v-flex",{attrs:{xs12:""}},[a("v-switch",{model:{value:t.processTime,callback:function(e){t.processTime=e},expression:"processTime"}})],1)],1):t._e()],1),a("p",{staticClass:"my-2"},[t._v("Câu trả lời: ")]),a("v-flex",{attrs:{xs12:""}},[a("v-layout",{attrs:{wrap:""}},[a("v-flex",{staticClass:"pr-2",attrs:{xs12:"",sm10:""}},[a("v-textarea",{attrs:{box:"",clearable:"",rows:"6",maxlength:5e3,counter:5e3},model:{value:t.answer,callback:function(e){t.answer=e},expression:"answer"}})],1),a("v-flex",{staticClass:"text-xs-right",attrs:{xs12:"",sm2:""}},[a("v-layout",{attrs:{wrap:""}},[a("v-autocomplete",{attrs:{label:"Trạng thái",box:"",items:t.statusItems,"item-text":"text","item-value":"value"},model:{value:t.statusChoice,callback:function(e){t.statusChoice=e},expression:"statusChoice"}}),a("v-text-field",{attrs:{label:"Thứ tự",box:"",rules:"add"===t.type?[t.rules.varchar75,t.rules.syntaxError]:[],maxlength:75},model:{value:t.sibling,callback:function(e){t.sibling=e},expression:"sibling"}}),a("v-text-field",{attrs:{label:"Số điểm",box:"",rules:[t.rules.varchar75,t.rules.syntaxError],maxlength:75},model:{value:t.votePoint,callback:function(e){t.votePoint=e},expression:"votePoint"}})],1)],1),a("v-flex",{attrs:{xs12:""}},[t.updateChoice?t._e():a("v-btn",{staticClass:"mt-0 mr-0",attrs:{color:"blue darken-3",dark:"",disabled:!(t.answer&&String(t.answer).length<=5e3),title:t.answer&&String(t.answer).length>5e3?"Câu trả lời tối đa 5000 ký tự":""},on:{click:function(e){return e.stopPropagation(),t.addChoices.apply(null,arguments)}}},[a("v-icon",{attrs:{size:"24"}},[t._v("add")]),a("span",[t._v("Thêm trả lời")])],1),t.updateChoice?a("v-btn",{staticClass:"mt-0 mr-0",attrs:{color:"blue darken-3",dark:"",disabled:!(t.answer&&String(t.answer).length<=5e3),title:t.answer&&String(t.answer).length>5e3?"Câu trả lời tối đa 5000 ký tự":""},on:{click:t.updateChoiceAction}},[a("v-icon",{attrs:{size:"24"}},[t._v("save")]),t._v(" \n                        "),a("span",[t._v("Cập nhật trả lời")])],1):t._e(),t.updateChoice?a("v-btn",{staticClass:"mt-0 mr-0",attrs:{color:"blue darken-3",dark:""},on:{click:t.cancelUpdateChoices}},[a("v-icon",{attrs:{size:"20"}},[t._v("clear")]),t._v(" \n                        "),a("span",[t._v("Hủy")])],1):t._e()],1)],1),t._l(t.choicesCurrent,(function(e,n){return a("div",{key:n,staticClass:"mt-2 px-2 py-2",staticStyle:{border:"1px solid #8fbc8f"}},[a("v-layout",{attrs:{wrap:""}},[a("v-flex",{staticStyle:{width:"calc(100% - 100px)"}},[a("div",{staticClass:"mb-2",staticStyle:{"font-weight":"500"}},[a("span",[t._v("STT: "+t._s(e.sibling))]),t._v(" - "),a("span",[t._v(" Trạng thái: "+t._s(1===e.status?"Công khai":"Không công khai"))]),t._v(" - \n                          "),a("span",[t._v(" Số điểm: "+t._s(e.votePoint))])]),a("div",[t._v(t._s(e.subject))])]),a("v-flex",{staticClass:"text-xs-right",staticStyle:{width:"100px","max-width":"100px"}},[a("v-btn",{staticClass:"mx-0 my-0",attrs:{icon:"",ripple:""},on:{click:function(a){return t.editChoice(e,n)}}},[a("v-icon",{attrs:{color:"blue lighten-1"}},[t._v("edit")])],1),a("v-btn",{staticClass:"mx-0 my-0",attrs:{icon:"",ripple:""},on:{click:function(a){return t.deleteChoice(n,e)}}},[a("v-icon",{attrs:{color:"red lighten-1"}},[t._v("clear")])],1)],1)],1)],1)}))],2)],1)],1)],1),a("v-card-actions",{staticClass:"px-3"},[a("v-spacer"),"add"===t.type?a("v-btn",{attrs:{color:"blue darken-3",dark:"",loading:t.loading,disabled:t.loading},on:{click:function(e){2!==t.lastestVersion?t.updateQuestion("add"):t.createQuestionVer2("add")}}},[a("v-icon",[t._v("add_circle_outline")]),t._v(" \n              Thêm mới\n            ")],1):a("v-btn",{attrs:{color:"blue darken-3",dark:"",loading:t.loading,disabled:t.loading},on:{click:function(e){2!==t.lastestVersion?t.updateQuestion("update"):t.createQuestionVer2("update")}}},[a("v-icon",[t._v("save")]),t._v(" \n              Cập nhật\n            ")],1),a("v-btn",{staticClass:"mr-0",attrs:{color:"red darken-3",dark:""},on:{click:t.cancelDialog}},[a("v-icon",[t._v("clear")]),t._v(" \n              Hủy\n            ")],1)],1)],1)],1)],1)],1)],1)},Ia=[],Pa=a("5873"),Aa={components:{"tiny-pagination":ca["a"],VueEditor:Pa["a"]},data:function(){return{breadCrumbsitems:[{text:"Bảng dữ liệu",disabled:!1},{text:"",disabled:!1}],classNameItems:[{text:"Đơn vị",value:"govagency"},{text:"Cán bộ",value:"employee"},{text:"Hồ sơ",value:"dossier"},{text:"Khảo sát",value:"survey",lastestVersion:2}],lastestVersion:1,votingItems:[],className:"",validForm:!1,currentQuestion:{},currentChoice:"",indexChoiceUpdate:"",updateChoice:!1,votePoint:"",statusItems:[{text:"Công khai",value:1},{text:"Không công khai",value:0}],processTime:!1,status:1,statusChoice:1,sibling:"",subject:"",votingCode:"",answer:"",choicesCurrent:[],votingIdCurrent:"",type:"",editorVisible:!1,loading:!1,dialog_addQuestion:!1,rules:{required:function(t){return!(!t&&0!==t)||"Bắt buộc phải nhập."},number:function(t){var e=/^\d+$/;return e.test(t)||"Bắt buộc phải nhập kiểu số."},email:function(t){var e=/^(([^<>()[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/;return e.test(t)||"Sai định dạng thư điện tử."},passWord:function(t){var e=/^((?=.*\d)(?=.*[a-z])(?=.*[A-Z])(?=.*[@$!%*#?&])([0-9a-zA-Z@$!%*#?&]{8,}))$/;return e.test(t)||"Ít nhất 8 ký tự và có chữ hoa, chữ thường, ký tự đặc biệt @$!%*#?&"},telNo:function(t){var e=/^0([1-9]{1}\d{8})$/;return t?e.test(t)||"Số điện thoại gồm 10 ký tự 0-9, eg: 0989123456, ...":[]},syntaxError:function(t){return!t||(t=String(t).trim(),t.indexOf("</")<0||"Không được có ký tự </")},varchar50:function(t){return!t||(t=String(t).trim(),t.length<=50||"Không được nhập quá 50 ký tự")},varchar75:function(t){return!t||(t=String(t).trim(),t.length<=75||"Không được nhập quá 75 ký tự")},varchar255:function(t){return!t||(t=String(t).trim(),t.length<=255||"Không được nhập quá 255 ký tự")},varchar500:function(t){return!t||(t=String(t).trim(),t.length<=500||"Không được nhập quá 500 ký tự")},varchar2000:function(t){return!t||(t=String(t).trim(),t.length<=5e3||"Không được nhập quá 5000 ký tự")},varchar5000:function(t){return!t||(t=String(t).trim(),t.length<=5e3||"Không được nhập quá 5000 ký tự")}},customToolbar:[[{header:[!1,1,2,3,4,5,6]}],["bold","italic","underline","strike"],[{align:""},{align:"center"},{align:"right"},{align:"justify"}],["blockquote","code-block"],[{list:"ordered"},{list:"bullet"},{list:"check"}],[{indent:"-1"},{indent:"+1"}],[{color:[]},{background:[]}],["clean"]]}},created:function(){var t=this;t.$nextTick((function(){t.$router.history.current.query;var e="CLASSNAME_VOTING";t.$store.dispatch("getServerconfigs",e).then((function(e){try{var a=JSON.parse(e.configs);t.classNameItems=a.classNames}catch(n){}t.className=t.classNameItems[0]["value"],t.classNameItems[0]&&t.classNameItems[0].hasOwnProperty("lastestVersion")&&t.classNameItems[0]["lastestVersion"]&&(t.lastestVersion=t.classNameItems[0]["lastestVersion"]),t.className&&t.getVotingList()})).catch((function(){t.className=t.classNameItems[0]["value"],t.classNameItems[0]&&t.classNameItems[0].hasOwnProperty("lastestVersion")&&t.classNameItems[0]["lastestVersion"]&&(t.lastestVersion=t.classNameItems[0]["lastestVersion"]),t.className&&t.getVotingList()}))}))},computed:{},watch:{$route:function(t){t.query}},methods:{getVotingList:function(){var t=this,e={className:t.className};t.votingItems=[],t.loading=!0,2!==t.lastestVersion?t.$store.dispatch("getVotingList",e).then((function(e){t.loading=!1,t.votingItems=Array.isArray(e.data)?e.data:[e.data]})).catch((function(e){t.loading=!1})):t.$store.dispatch("getVotingListVer2",e).then((function(e){t.loading=!1;for(var a=Array.isArray(e.data)?e.data:[e.data],n=a.length,i=0;i<n;i++)if(a[i]["lstChoiceDetailModels"]){var r=Array.isArray(a[i]["lstChoiceDetailModels"])?a[i]["lstChoiceDetailModels"]:[a[i]["lstChoiceDetailModels"]];a[i]=Object.assign(a[i]["voteModel"],{lstChoiceDetailModels:r})}else a[i]=Object.assign(a[i]["voteModel"],{lstChoiceDetailModels:[]});t.votingItems=a})).catch((function(e){t.loading=!1}))},changeClassName:function(){var t=this;setTimeout((function(){if(t.className){var e=t.classNameItems.filter((function(e){return e.value==t.className}))[0];e&&e.hasOwnProperty("lastestVersion")&&e["lastestVersion"]?t.lastestVersion=e["lastestVersion"]:t.lastestVersion="",t.getVotingList()}}),300)},createQuestion:function(){var t=this;t.type="add",t.answer="",t.choicesCurrent=[],t.$refs.formAddQuestion.reset(),t.status=1,t.statusChoice=1,t.dialog_addQuestion=!0},addChoices:function(){var t=this;if(2!==t.lastestVersion)t.answer&&t.choicesCurrent.push(t.answer);else if(t.answer&&t.statusChoice)if("add"===t.type){var e={subject:t.answer,sibling:t.sibling,status:t.statusChoice,votePoint:t.votePoint};t.choicesCurrent.push(e),t.answer="",t.sibling="",t.statusChoice=1,t.votePoint=""}else{var a={className:t.className,subject:t.answer,sibling:t.sibling,status:t.statusChoice,votePoint:t.votePoint,voteId:t.votingIdCurrent};t.$store.dispatch("createChoices",a).then((function(e){t.choicesCurrent.push(e),t.answer="",t.sibling="",t.statusChoice=1,t.votePoint=""})).catch((function(){N.a.error("Thêm câu trả lời thất bại")}))}},deleteChoice:function(t,e){var a=this;if(a.updateChoice=!1,a.currentChoice="",a.answer="",a.statusChoice=1,a.sibling="",2!==a.lastestVersion)a.choicesCurrent.splice(t,1);else{var n=confirm("Bạn có chắc chắn xóa trả lời này?");if(n){var i={voteChoiceId:e.voteChoiceId,className:a.className};a.$store.dispatch("deleteChoiceNew",i).then((function(){N.a.success("Xóa trả lời thành công"),setTimeout((function(){a.choicesCurrent.splice(t,1)}),300)})).catch((function(t){N.a.error("Xóa trả lời thất bại")}))}}},updateQuestion:function(t){var e=this,a="";if(e.choicesCurrent&&e.choicesCurrent.length>0)for(var n in e.choicesCurrent)a+=e.choicesCurrent[n]+"\r\n";var i={className:e.className,classPK:"0",subject:e.subject,choices:a,commentable:"",type:e.type,votingCode:e.votingCode?e.votingCode:"",votingId:e.votingIdCurrent};e.$refs.formAddQuestion.validate()&&(e.loading=!0,e.$store.dispatch("updateVotings",i).then((function(t){e.loading=!1,setTimeout((function(){e.getVotingList()}),300),e.dialog_addQuestion=!1})).catch((function(t){e.loading=!1})))},createQuestionVer2:function(t){var e=this,a={className:e.className,title:e.subject,description:"",voteCode:e.votingCode?e.votingCode:"",type:e.type,status:e.status,choiceItems:e.choicesCurrent};"survey"===e.className&&(a.processTime=e.processTime?1:0),"update"===e.type&&(a["votingId"]=e.votingIdCurrent),e.$refs.formAddQuestion.validate()&&(e.loading=!0,e.$store.dispatch("updateVotingsNew",a).then((function(t){e.loading=!1,N.a.success("Yêu cầu thực hiện thành công"),setTimeout((function(){e.getVotingList()}),300),e.dialog_addQuestion=!1})).catch((function(t){e.loading=!1})))},cancelDialog:function(){var t=this;t.getVotingList(),t.dialog_addQuestion=!1},editVotings:function(t){var e=this;e.answer="",e.type="update",2!==e.lastestVersion?(e.votingCode=t["votingCode"],e.subject=t["subject"],e.choicesCurrent=t["choices"],e.votingIdCurrent=t["votingId"]):(e.votingCode=t["voteCode"],e.subject=t["title"],e.status=t["status"],e.choicesCurrent=t["lstChoiceDetailModels"],e.votingIdCurrent=t["voteId"],"survey"===e.className&&(e.processTime=1===t["processTime"])),e.dialog_addQuestion=!0},editChoice:function(t,e){var a=this;a.updateChoice=!0,a.currentChoice=t,a.indexChoiceUpdate=e,a.answer=t.subject,a.statusChoice=t.status,a.sibling=t.sibling,a.votePoint=t.votePoint},updateChoiceAction:function(){var t=this;if("add"===t.type){var e={answer:t.answer,status:t.statusChoice,sibling:t.sibling};t.choicesCurrent[t.indexChoiceUpdate]=Object.assign(t.choicesCurrent[t.indexChoiceUpdate],e)}else t.updateChoiceDetail()},cancelUpdateChoices:function(){var t=this;t.updateChoice=!1,t.currentChoice="",t.answer="",t.statusChoice=1,t.sibling="",t.votePoint=""},updateChoiceDetail:function(){var t=this,e={className:t.className,subject:t.answer,voteId:t.votingIdCurrent,status:t.statusChoice,votePoint:t.votePoint,sibling:t.sibling,voteChoiceId:t.currentChoice["voteChoiceId"]};t.answer&&""!==t.statusChoice&&t.$store.dispatch("updateChoices",e).then((function(e){N.a.success("Cập nhật trả lời thành công");var a={subject:t.answer,status:t.statusChoice,sibling:t.sibling,votePoint:t.votePoint,voteId:t.votingIdCurrent,voteChoiceId:t.currentChoice["voteChoiceId"]};t.choicesCurrent[t.indexChoiceUpdate]=Object.assign(t.choicesCurrent[t.indexChoiceUpdate],a),t.cancelUpdateChoices()})).catch((function(t){N.a.error("Cập nhật trả lời thất bại")}))},deleteVotings:function(t){var e=this,a=confirm("Bạn có chắc chắn xóa câu hỏi này?");if(a)if(2!==e.lastestVersion){var n={votingId:t.votingId};e.$store.dispatch("deleteVotings",n).then((function(){setTimeout((function(){e.getVotingList()}),300)})).catch((function(t){}))}else{var i={votingId:t.voteId,className:e.className};e.$store.dispatch("deleteVotingsNew",i).then((function(){N.a.success("Xóa câu hỏi thành công"),setTimeout((function(){e.getVotingList()}),300)})).catch((function(t){N.a.error("Xóa câu hỏi thất bại")}))}},backToList:function(){window.history.back()}},filters:{}},Na=Aa,La=Object(p["a"])(Na,Ta,Ia,!1,null,null,null),Oa=La.exports,Ra=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("v-breadcrumbs",[a("v-icon",{attrs:{slot:"divider"},slot:"divider"},[t._v("chevron_right")]),t._l(t.breadCrumbsitems,(function(e){return a("v-breadcrumbs-item",{key:e.text,attrs:{disabled:e.disabled}},[t._v("\n      "+t._s(e.text)+"\n    ")])})),a("a",{staticStyle:{"text-decoration":"none","font-weight":"bold"},attrs:{href:"javascript:;"}})],2),a("v-card",{staticClass:"px-2 mx-1"},[a("v-toolbar",{attrs:{color:"blue darken-3",dark:"",height:"48"}},[a("v-btn",{attrs:{dark:"",icon:""}},[a("v-icon",[t._v("edit")])],1),a("v-toolbar-title",{staticClass:"ml-0"},[t._v("\n        Mapping Thủ tục hành chính\n      ")]),a("v-spacer"),a("v-btn",{attrs:{dark:"",icon:""},nativeOn:{click:function(e){return t.backToList.apply(null,arguments)}}},[a("v-icon",[t._v("reply")])],1)],1),a("div",{staticClass:"grid-list mt-3"},[t.isMobile?t._e():a("div",{staticClass:"list-thu-tuc"},[a("v-layout",{staticClass:"white py-2",attrs:{wrap:""}},[a("v-flex",{staticClass:"xs12 sm6 px-2"},[a("v-autocomplete",{staticClass:"select-border",attrs:{items:t.listTimKiemTheo,label:"Tìm kiếm theo","item-text":"text","item-value":"value","hide-selected":!0,box:"",readonly:t.loading},on:{change:t.changeTimKiemTheo},model:{value:t.timKiemTheoSelected,callback:function(e){t.timKiemTheoSelected=e},expression:"timKiemTheoSelected"}})],1),a("v-flex",{staticClass:"xs12 sm6 px-2"},[a("v-autocomplete",{staticClass:"select-border",attrs:{items:t.listTrangThai,label:"Trạng thái","item-text":"text","item-value":"value","hide-selected":!0,box:"",readonly:t.loading,clearable:""},on:{change:t.changeTrangThai},model:{value:t.trangThaiSelected,callback:function(e){t.trangThaiSelected=e},expression:"trangThaiSelected"}})],1),a("v-flex",{staticClass:"xs12 sm6 px-2"},[a("v-text-field",{staticClass:"select-border",attrs:{label:"Tên thủ tục",box:""},model:{value:t.tenThuTucModel,callback:function(e){t.tenThuTucModel=e},expression:"tenThuTucModel"}})],1)],1),t.loading?a("content-placeholders",{staticClass:"mt-3"},[a("content-placeholders-text",{attrs:{lines:10}})],1):a("div",{staticClass:"service__info__table"},["DonVi"===t.timKiemTheoSelected?a("v-data-table",{staticClass:"table-landing table-bordered",attrs:{headers:t.headers,items:t.serviceInfoListDonViView,"hide-actions":""},scopedSlots:t._u([{key:"items",fn:function(e){return[a("tr",{class:{active:e.index%2==1}},[a("td",{staticClass:"text-xs-left",staticStyle:{"border-right":"0.5px solid #aba6a6"}},[t.loading?a("content-placeholders",[a("content-placeholders-text",{attrs:{lines:1}})],1):a("div",[a("v-layout",{attrs:{wrap:""}},[a("v-flex",{staticStyle:{cursor:"pointer"},attrs:{xs12:""},on:{click:function(a){return t.openDialogChiTietThuTucDonVi(e.item)}}},[a("span",{staticClass:"text-bold"},[t._v(t._s(e.item.serviceCode))]),t._v(" - "),a("span",[t._v(t._s(e.item.serviceName))])])],1)],1)],1),a("td",{staticClass:"text-xs-left",staticStyle:{"min-width":"575px"}},[t.loading?a("content-placeholders",[a("content-placeholders-text",{attrs:{lines:1}})],1):a("div",[""===e.item.serviceCodeDVCQG?a("v-layout",{attrs:{wrap:""}},[a("v-flex",{staticClass:"text-right",attrs:{xs12:""}},[a("v-btn",{attrs:{small:"",outline:"",color:"#115ebe"},on:{click:function(a){return t.openDialogMappingDVCQG(e.item)}}},[t._v("Mapping")])],1)],1):a("v-layout",{attrs:{wrap:"","align-center":""}},[a("v-flex",{staticStyle:{cursor:"pointer"},attrs:{sm6:""},on:{click:function(a){return t.openDialogChiTietThuTucDVCQG(e.item)}}},[a("span",{staticClass:"text-bold"},[t._v(t._s(e.item.serviceCodeDVCQG))]),t._v(" - "),a("span",[t._v(t._s(e.item.serviceNameDVCQG))])]),a("v-flex",{staticClass:"text-right",attrs:{sm6:""}},[0===e.item.synced?a("v-btn",{attrs:{small:"",outline:"",color:"#115ebe"},on:{click:function(a){return t.syncServiceinfo(e.item)}}},[t._v("Đồng bộ")]):t._e(),a("v-btn",{attrs:{small:"",outline:"",color:"#115ebe"},on:{click:function(a){return t.removeMapping(e.item)}}},[t._v("Huỷ mapping")])],1)],1)],1)],1)])]}}],null,!1,4224515216)},[a("template",{slot:"no-data"},[a("div",{staticClass:"text-xs-center mt-2"},[t._v("\n                Không có thủ tục nào được tìm thấy\n              ")])])],2):t._e(),"DVCQG"===t.timKiemTheoSelected?a("v-data-table",{staticClass:"table-landing table-bordered",attrs:{headers:t.headers,items:t.serviceInfoListDVCQGView,"hide-actions":""},scopedSlots:t._u([{key:"items",fn:function(e){return[a("tr",{class:{active:e.index%2==1}},[a("td",{staticClass:"text-xs-left",staticStyle:{"min-width":"575px","border-right":"0.5px solid #aba6a6"}},[t.loading?a("content-placeholders",[a("content-placeholders-text",{attrs:{lines:1}})],1):a("div",[e.item.serviceCode?a("v-layout",{attrs:{wrap:""}},[a("v-flex",{staticStyle:{cursor:"pointer"},attrs:{xs6:""},on:{click:function(a){return t.openDialogChiTietThuTucDonVi(e.item)}}},[a("span",{staticClass:"text-bold"},[t._v(t._s(e.item.serviceCode))]),t._v(" - "),a("span",[t._v(t._s(e.item.serviceName))])]),a("v-flex",{staticClass:"text-right",attrs:{xs6:""}},[a("v-btn",{attrs:{small:"",outline:"",color:"#115ebe"},on:{click:function(a){return t.removeMapping(e.item)}}},[t._v("Hủy mapping")])],1)],1):a("v-layout",{attrs:{"align-center":"","justify-center":"",wrap:""}},[a("v-flex",{staticClass:"text-right",attrs:{xs12:""}},[a("v-btn",{attrs:{small:"",outline:"",color:"#115ebe"},on:{click:function(a){return t.openDialogChiTietThuTucThem(e.item)}}},[t._v("Thêm vào đơn vị")]),a("v-btn",{attrs:{small:"",outline:"",color:"#115ebe"},on:{click:function(a){return t.openDialogMappingDonVi(e.item)}}},[t._v("Mapping")])],1)],1)],1)],1),a("td",{staticClass:"text-xs-left"},[t.loading?a("content-placeholders",[a("content-placeholders-text",{attrs:{lines:1}})],1):a("div",[a("v-layout",{attrs:{wrap:""}},[a("v-flex",{staticStyle:{cursor:"pointer"},attrs:{xs12:""},on:{click:function(a){return t.openDialogChiTietThuTucDVCQG(e.item)}}},[a("span",{staticClass:"text-bold"},[t._v(t._s(e.item.serviceCodeDVCQG))]),t._v(" - "),a("span",[t._v(t._s(e.item.serviceNameDVCQG))])])],1)],1)],1)])]}}],null,!1,2828545152)},[a("template",{slot:"no-data"},[a("div",{staticClass:"text-xs-center mt-2"},[t._v("\n                Không có thủ tục nào được tìm thấy\n              ")])])],2):t._e(),a("div",{staticClass:"text-xs-right layout wrap mt-2",staticStyle:{position:"relative"}},[a("div",{staticClass:"flex pagging-table px-2"},[a("tiny-pagination",{attrs:{total:t.totalThuTuc,page:t.thutucPage,"custom-class":"custom-tiny-class"},on:{"tiny:change-page":t.paggingData}})],1)])],1)],1)])],1),a("v-dialog",{attrs:{persistent:"","max-width":"600px"},model:{value:t.dialogMapping,callback:function(e){t.dialogMapping=e},expression:"dialogMapping"}},[a("v-card",{staticStyle:{background:"#fff"}},[a("v-card-title",{attrs:{"pa-1":""}},[a("v-layout",{attrs:{wrap:"","align-center":""}},[a("v-flex",{attrs:{xs6:""}},[a("span",{staticClass:"headline"},[t._v("Chọn để mapping")])]),a("v-flex",{staticClass:"text-right",attrs:{xs6:""}},[a("v-btn",{attrs:{color:"#F44336",fab:"",small:"",dark:""},on:{click:function(e){t.dialogMapping=!1}}},[a("v-icon",[t._v("cancel")])],1)],1)],1)],1),a("v-card-text",[a("v-container",{attrs:{"grid-list-md":""}},[a("v-layout",[a("v-flex",{attrs:{xs12:""}},[a("v-text-field",{attrs:{label:"Tìm kiếm theo tên"},model:{value:t.nameDVCQGModel,callback:function(e){t.nameDVCQGModel=e},expression:"nameDVCQGModel"}})],1)],1),t.listMappingView.length>0?a("div",{staticStyle:{height:"437px","overflow-y":"scroll",padding:"0 10px"}},[t.loadingMapping?a("content-placeholders",[a("content-placeholders-text",{attrs:{lines:5}})],1):t._l(t.listMappingView,(function(e,n){return a("v-layout",{key:n,staticStyle:{"border-bottom":"0.5px dashed"},attrs:{"align-center":"",wrap:""}},[a("v-flex",{staticClass:"pa-0",attrs:{xs9:""}},[a("span",{staticStyle:{"font-weight":"bold"}},[t._v(t._s("DonVi"===t.timKiemTheoSelected?e.serviceCodeDVCQG:e.serviceCode)+"-"+t._s("DonVi"===t.timKiemTheoSelected?e.serviceNameDVCQG:e.serviceName))])]),a("v-flex",{staticClass:"text-right pa-0",attrs:{xs3:""}},[a("v-btn",{staticStyle:{color:"#fff"},attrs:{small:"",color:"#115ebe"},on:{click:function(a){return t.mappingTTHC(e)}}},[t._v("Chọn")])],1)],1)}))],2):a("div",{staticStyle:{height:"437px"}},[a("v-layout",[a("v-flex",{attrs:{xs12:""}},[a("span",[t._v("Không tìm thấy dữ liệu")])])],1)],1),a("v-layout",[a("v-flex",{attrs:{xs12:""}},[a("div",{staticClass:"text-xs-right layout wrap",staticStyle:{position:"relative"}},[a("div",{staticClass:"flex pagging-table"},[a("tiny-pagination",{attrs:{total:t.totalMapping,page:t.pageMapping,"custom-class":"custom-tiny-class"},on:{"tiny:change-page":t.paggingDataMapping}})],1)])])],1)],1)],1)],1)],1),a("v-dialog",{attrs:{persistent:"","max-width":"900px"},model:{value:t.dialogChiTietThuTucDVCQG,callback:function(e){t.dialogChiTietThuTucDVCQG=e},expression:"dialogChiTietThuTucDVCQG"}},[a("v-card",{staticStyle:{background:"#fff"}},[a("v-card-title",{attrs:{"pa-1":""}},[a("v-layout",{attrs:{wrap:"","align-center":""}},[a("v-flex",{attrs:{xs6:""}},[a("span",{staticClass:"headline"},[t._v("Chi tiết thủ tục")])]),a("v-flex",{staticClass:"text-right",attrs:{xs6:""}},[t.btnThem?a("v-btn",{attrs:{color:"blue darken-1 mx-2"},on:{click:function(e){return t.addTTHC()}}},[t._v(" Xác nhận")]):t._e(),a("v-btn",{attrs:{color:"#F44336",fab:"",small:"",dark:""},on:{click:function(e){t.dialogChiTietThuTucDVCQG=!1}}},[a("v-icon",[t._v("cancel")])],1)],1)],1)],1),a("v-card-text",{staticStyle:{height:"600px"}},[a("v-container",{attrs:{"grid-list-md":""}},[a("v-tabs",{attrs:{color:"cyan",dark:"","slider-color":"yellow"},model:{value:t.activeDVC,callback:function(e){t.activeDVC=e},expression:"activeDVC"}},[t._l(t.tabDetailServiecs,(function(e){return a("v-tab",{key:e,attrs:{ripple:""}},[t._v("\n                  "+t._s(e.text)+"\n\n              ")])})),a("v-tab-item",[a("v-card",{staticStyle:{height:"500px","overflow-y":"scroll"},attrs:{flat:""}},[a("v-card-text",[a("v-layout",{attrs:{wrap:"","align-center":""}},[a("v-flex",{attrs:{xs12:""}},[a("v-layout",{attrs:{wrap:""}},[a("v-flex",{attrs:{xs3:""}},[a("strong",[t._v("Tên thủ tục")])]),a("v-flex",{attrs:{xs9:""}},[a("span",[t._v(t._s(t.serviceDVCQGDetail[0].TENTTHC))])])],1)],1),a("v-flex",{attrs:{xs12:""}},[a("v-layout",{attrs:{wrap:""}},[a("v-flex",{attrs:{xs3:""}},[a("strong",[t._v("Mã thủ tục")])]),a("v-flex",{attrs:{xs9:""}},[a("span",[t._v(t._s(t.serviceDVCQGDetail[0].MATTHC))])])],1)],1),a("v-flex",{attrs:{xs12:""}},[a("v-layout",{attrs:{wrap:""}},[a("v-flex",{attrs:{xs3:""}},[a("strong",[t._v("Cơ quan quản lý")])]),a("v-flex",{attrs:{xs9:""}},[t._l(t.serviceDVCQGDetail[0].COQUANTHUCHIEN,(function(e,n){return a("span",{key:n},[t._v(t._s(e.TENDONVI))])})),a("br")],2)],1)],1),a("v-flex",{attrs:{xs12:""}},[a("v-layout",{attrs:{wrap:""}},[a("v-flex",{attrs:{xs3:""}},[a("strong",[t._v("Lĩnh vực")])]),a("v-flex",{attrs:{xs9:""}},[t._l(t.serviceDVCQGDetail[0].LINHVUCTHUCHIEN,(function(e,n){return a("span",{key:n},[t._v(t._s(e.TENLINHVUC))])})),a("br")],2)],1)],1),a("v-flex",{attrs:{xs12:""}},[a("v-layout",{attrs:{wrap:""}},[a("v-flex",{attrs:{xs3:""}},[a("strong",[t._v("Cách thực hiện")])]),a("v-flex",{attrs:{xs9:""}},t._l(t.serviceDVCQGDetail[0].CACHTHUCTHUCHIEN,(function(e,n){return a("div",{key:n},[a("span",[t._v("-Thời gian giải quyết: "+t._s(e.THOIGIAN[0].MOTA))]),a("br")])})),0)],1)],1),a("v-flex",{attrs:{xs12:""}},[a("v-layout",{attrs:{wrap:""}},[a("v-flex",{attrs:{xs3:""}},[a("strong",[t._v("Đối tượng")])]),a("v-flex",{attrs:{xs9:""}},[t._l(t.serviceDVCQGDetail[0].DOITUONGTHUCHIEN,(function(e,n){return a("span",{key:n},[t._v("- "+t._s(e.TENDOITUONG))])})),a("br")],2)],1)],1),a("v-flex",{attrs:{xs12:""}},[a("v-layout",{attrs:{wrap:""}},[a("v-flex",{attrs:{xs3:""}},[a("strong",[t._v("Kết quả giải quyết")])]),a("v-flex",{attrs:{xs9:""}},t._l(t.serviceDVCQGDetail[0].KETQUATHUCHIEN,(function(e,n){return a("div",{key:n},[a("span",[t._v("- Mã kết quả: "+t._s(e.MAKETQUA))]),a("br"),a("span",[t._v("-Tên văn bản: "+t._s(e.TENKETQUA))]),a("br")])})),0)],1)],1)],1)],1)],1)],1),a("v-tab-item",[a("v-card",{staticStyle:{height:"500px","overflow-y":"scroll"},attrs:{flat:""}},[a("v-card-text",[a("v-layout",{attrs:{wrap:""}},t._l(t.serviceDVCQGDetail[0].TRINHTUTHUCHIEN,(function(e,n){return a("v-flex",{key:n,attrs:{xs12:""}},[a("span",[t._v(t._s(e.TRUONGHOP))]),a("br"),t._l(e.TRINHTU,(function(e,n){return a("div",{key:n},[a("span",[t._v("-"+t._s(e.TENTRINHTU))]),a("br")])}))],2)})),1)],1)],1)],1),a("v-tab-item",[a("v-card",{staticStyle:{height:"500px","overflow-y":"scroll"},attrs:{flat:""}},[a("v-card-text",[a("v-layout",{attrs:{wrap:""}},t._l(t.serviceDVCQGDetail[0].THANHPHANHOSO,(function(e,n){return a("v-flex",{key:n,attrs:{xs12:""}},[a("span",[t._v("("+t._s(n+1)+"), "+t._s(e.TRUONGHOP))]),a("br"),t._l(e.GIAYTO,(function(e,n){return a("div",{key:n},[a("span",[t._v("-"+t._s(e.TENGIAYTO))]),a("br")])}))],2)})),1)],1)],1)],1),a("v-tab-item",[a("v-card",{staticStyle:{height:"500px","overflow-y":"scroll"},attrs:{flat:""}},[a("v-card-text",[a("v-layout",{attrs:{wrap:""}},[a("v-flex",[a("p",[t._v(t._s(t.serviceDVCQGDetail.YEUCAU?t.serviceDVCQGDetail.YEUCAU:"Không có"))])])],1)],1)],1)],1)],2)],1)],1)],1)],1),a("v-dialog",{attrs:{persistent:"","max-width":"900px"},model:{value:t.dialogChiTietThuTucDonVi,callback:function(e){t.dialogChiTietThuTucDonVi=e},expression:"dialogChiTietThuTucDonVi"}},[a("v-card",{staticStyle:{background:"#fff"}},[a("v-card-title",{attrs:{"pa-1":""}},[a("v-layout",{attrs:{wrap:"","align-center":""}},[a("v-flex",{attrs:{xs6:""}},[a("span",{staticClass:"headline"},[t._v("Chi tiết thủ tục")])]),a("v-flex",{staticClass:"text-right",attrs:{xs6:""}},[a("v-btn",{attrs:{color:"#F44336",fab:"",small:"",dark:""},on:{click:function(e){t.dialogChiTietThuTucDonVi=!1}}},[a("v-icon",[t._v("cancel")])],1)],1)],1)],1),a("v-card-text",{staticStyle:{height:"600px"}},[a("v-container",{attrs:{"grid-list-md":""}},[a("div",{staticClass:"mt-0"},[a("v-tabs",{attrs:{color:"cyan",dark:"","slider-color":"yellow"},model:{value:t.activeDonVi,callback:function(e){t.activeDonVi=e},expression:"activeDonVi"}},[a("v-tab",{key:"1",staticClass:"mr-2",attrs:{ripple:""}},[t._v(" Thông tin chung ")]),a("v-tab",{key:"2",staticClass:"mr-2",attrs:{ripple:""}},[t._v(" Trình tự thực hiện")]),a("v-tab",{key:"3",staticClass:"mr-2",attrs:{ripple:""}},[t._v(" Thành phần hồ sơ ")]),a("v-tab",{key:"4",staticClass:"mr-2",attrs:{ripple:""}},[t._v(" Yêu cầu điều kiện ")]),a("v-tab-item",{key:"1",staticClass:"wrap-scroll wrap-scroll-sevice"},[a("v-card",{staticStyle:{height:"500px","overflow-y":"scroll"}},[a("v-card-text",{staticClass:"px-0 py-0"},[a("div",{staticClass:"table-detail-domain table-bordered"},[a("div",{staticClass:"table__overflow"},[a("table",{staticClass:"datatable table"},[a("tbody",[a("tr",[a("td",{staticClass:"pt-2"},[a("span",{staticClass:"text-bold"},[t._v("Tên thủ tục")])]),a("td",{staticClass:"pt-2"},[a("span",[t._v(t._s(t.serviceDonViDetail.serviceName))])])]),a("tr",[a("td",{staticClass:"pt-2",staticStyle:{"min-width":"148px"}},[a("span",{staticClass:"text-bold"},[t._v("Mã thủ tục")])]),a("td",{staticClass:"pt-2"},[a("span",[t._v(t._s(t.serviceDonViDetail.serviceCode))])])]),a("tr",[a("td",{staticClass:"pt-2"},[a("span",{staticClass:"text-bold"},[t._v("Cơ quan quản lý")])]),a("td",{staticClass:"pt-2"},[a("span",[t._v(t._s(t.serviceDonViDetail.administrationName))])])]),a("tr",[a("td",{staticClass:"pt-2"},[a("span",{staticClass:"text-bold"},[t._v("Lĩnh vực")])]),a("td",{staticClass:"pt-2"},[a("span",[t._v(t._s(t.serviceDonViDetail.domainName))])])]),a("tr",[a("td",{staticClass:"pt-2"},[a("span",{staticClass:"text-bold"},[t._v("Cách thực hiện")])]),a("td",{staticClass:"pt-2"},[a("span",{domProps:{innerHTML:t._s(t.serviceDonViDetail.methodText)}})])]),a("tr",[a("td",{staticClass:"pt-2"},[a("span",{staticClass:"text-bold"},[t._v("Đối tượng")])]),a("td",{staticClass:"pt-2"},[a("span",{domProps:{innerHTML:t._s(t.serviceDonViDetail.applicantText)}})])]),a("tr",[a("td",{staticClass:"pt-2"},[a("span",{staticClass:"text-bold"},[t._v("Kết quả giải quyết")])]),a("td",{staticClass:"pt-2"},[a("span",{domProps:{innerHTML:t._s(t.serviceDonViDetail.resultText)}})])])])])])])])],1)],1),a("v-tab-item",{key:"2",staticClass:"wrap-scroll wrap-scroll-sevice"},[a("v-card",{staticStyle:{height:"500px","overflow-y":"scroll"}},[a("v-card-text",[a("div",{domProps:{innerHTML:t._s(t.serviceDonViDetail.processText)}})])],1)],1),a("v-tab-item",{key:"3",staticClass:"wrap-scroll wrap-scroll-sevice"},[a("v-card",{staticStyle:{height:"500px","overflow-y":"scroll"}},[a("v-card-text",[a("div",{domProps:{innerHTML:t._s(t.serviceDonViDetail.dossierText)}})])],1)],1),a("v-tab-item",{key:"4",staticClass:"wrap-scroll wrap-scroll-sevice"},[a("v-card",{staticStyle:{height:"500px","overflow-y":"scroll"}},[a("v-card-text",[a("div",{domProps:{innerHTML:t._s(t.serviceDonViDetail.conditionText)}})])],1)],1)],1)],1)])],1)],1)],1),a("v-snackbar",{attrs:{bottom:!1,left:!1,"multi-line":!1,right:!0,timeout:2e3,top:!0,vertical:!1,color:"success"},model:{value:t.snackbarsuccess,callback:function(e){t.snackbarsuccess=e},expression:"snackbarsuccess"}},[t._v("\n    Yêu cầu thực hiện thành công\n    "),a("v-btn",{attrs:{icon:""},on:{click:function(e){t.snackbarsuccess=!1}}},[a("v-icon",[t._v("clear")])],1)],1),a("v-snackbar",{attrs:{bottom:!1,left:!1,"multi-line":!1,right:!0,timeout:2e3,top:!0,vertical:!1,color:"#EF5350"},model:{value:t.snackbarerror,callback:function(e){t.snackbarerror=e},expression:"snackbarerror"}},[t._v("\n    Yêu cầu thực hiện thất bại\n    "),a("v-btn",{attrs:{icon:""},on:{click:function(e){t.snackbarerror=!1}}},[a("v-icon",[t._v("clear")])],1)],1)],1)},Ma=[];a("1157");n["default"].use(N.a);var Fa={components:{"tiny-pagination":bt},data:function(){return{activeDVC:null,activeDonVi:null,snackbarerror:!1,snackbarsuccess:!1,breadCrumbsitems:[{text:"Bảng dữ liệu",disabled:!1},{text:"",disabled:!1}],loading:!0,btnThem:!1,totalMapping:0,dialogMapping:!1,dialogChiTietThuTucDonVi:!1,dialogChiTietThuTucDVCQG:!1,loadingMapping:!1,tenThuTucModel:"",timKiemTheoSelected:"",trangThaiSelected:"",listTrangThai:[{text:"Tất cả",value:""},{text:"Đã đồng bộ",value:"true"},{text:"Chưa đồng bộ",value:"false"}],listTimKiemTheo:[{text:"Tìm kiếm theo TTHC đơn vị",value:"DonVi"},{text:"Tìm kiếm theo TTHC DVC QG",value:"DVCQG"}],tabDetailServiecs:[{text:"Thông tin chung"},{text:"Trình tự thực hiên"},{text:"Thành phần hồ sơ"},{text:"Yêu cầu điều kiện"}],serviceInfoListDonVi:[],serviceInfoListDonViView:[],serviceInfoListDVCQG:[],serviceInfoListDVCQGView:[],headers:[{text:"TTHC tại đơn vị",align:"center",sortable:!1},{text:"TTHC tại DVCQG",align:"center",sortable:!1}],nameDVCQGModel:"",listMappingView:[],listMapping:[],pageMapping:1,totalThuTuc:0,thutucPage:1,pageSize:20,serviceSelect:{},serviceDVCQGDetail:[{CACHTHUCTHUCHIEN:[],TENTTHC:"",CANCUPHAPLY:[],COQUANCOTHAMQUYEN:[],MOTACOQUANTHUCHIEN:"",COQUANTHUCHIEN:[],TTHCLIENTHONG:[],COQUANDUOCUYQUYEN:[],THANHPHANHOSO:[{TRUONGHOP:"",GIAYTO:[]}],DIACHITIEPNHAN:"",TUKHOA:"",COQUANPHOIHOP:[],LOAITTHC:"",MOTADOITUONGTHUCHIEN:"",ID:"",LINHVUCTHUCHIEN:[],YEUCAU:"",TRINHTUTHUCHIEN:[],MACOQUANCONGBO:"",TTHCLIENQUAN:[],DOITUONGTHUCHIEN:[],TRANGTHAI:"",MOTA:"",MATTHC:"",IDQUYETDINHCONGBO:"",MOTACOQUANTHAMQUYEN:"",CAPTHUCHIEN:[],KETQUATHUCHIEN:[]}],serviceDonViDetail:{}}},computed:{},created:function(){var t=this;t.$nextTick((function(){var e=t.$router.history.current,a=e.query,n="?";for(var i in a["mapping"]=a.hasOwnProperty("mapping")&&a.mapping?a.mapping:"",a["timkiemtheo"]=a.hasOwnProperty("timkiemtheo")&&a.timkiemtheo?a.timkiemtheo:"DonVi",t.timKiemTheoSelected=a.hasOwnProperty("timkiemtheo")&&a.timkiemtheo?a.timkiemtheo:"DonVi",a)""!==a[i]&&"undefined"!==a[i]&&void 0!==a[i]&&null!==a[i]&&(n+=i+"="+a[i]+"&");t.$router.push({path:e.path+n,query:{renew:Math.floor(100*Math.random())+1}})}))},watch:{$route:function(t,e){var a=this,n=a.$router.history.current.query;"DonVi"===n.timkiemtheo&&a.doLoadingThuTucDonVi(),"DVCQG"===n.timkiemtheo&&a.doLoadingThuTucDVCQG()},nameDVCQGModel:function(t){var e=this;if(e.pageMapping=1,e.loadingMapping=!0,t){var a=t.toLowerCase();if("DonVi"===e.timKiemTheoSelected){var n=e.listMapping.filter((function(e){if(e.serviceNameDVCQG.toLowerCase().search(a)>=0||e.serviceNameDVCQG.search(a)>=0||e.serviceNameDVCQG===t)return e}));e.listMappingView=n.slice(0,10),e.totalMapping=n.length}else{var i=e.listMapping.filter((function(e){if(e.serviceName.toLowerCase().search(a)>=0||e.serviceName.search(a)>=0||e.serviceName===t)return e}));e.listMappingView=i.slice(0,10),e.totalMapping=i.length}e.loadingMapping=!1}else e.listMappingView=e.listMapping.slice(0,10),e.totalMapping=e.listMapping.length,e.loadingMapping=!1},tenThuTucModel:function(t){var e=this;if(e.thutucPage=1,t){var a=t.toLowerCase();"DonVi"===e.timKiemTheoSelected?e.serviceInfoListDonViView=e.serviceInfoListDonVi.filter((function(e){if(e.serviceName.toLowerCase().search(a)>=0||e.serviceName.search(a)>=0||e.serviceName===t)return e})).slice(0,e.pageSize):e.serviceInfoListDVCQGView=e.serviceInfoListDVCQG.filter((function(e){if(e.serviceNameDVCQG.toLowerCase().search(a)>=0||e.serviceNameDVCQG.search(a)>=0||e.serviceNameDVCQG===t)return e})).slice(0,e.pageSize)}else"DonVi"===e.timKiemTheoSelected?e.serviceInfoListDonViView=e.serviceInfoListDonVi.slice(0,e.pageSize):e.serviceInfoListDVCQGView=e.serviceInfoListDVCQG.slice(0,e.pageSize)}},methods:{changeTrangThai:function(){var t=this;setTimeout((function(){var e=t.$router.history.current,a=e.query,n="?";for(var i in a["mapping"]=t.trangThaiSelected,a["timkiemtheo"]=t.timKiemTheoSelected,a)""!==a[i]&&"undefined"!==a[i]&&void 0!==a[i]&&null!==a[i]&&(n+=i+"="+a[i]+"&");t.$router.push({path:e.path+n,query:{renew:Math.floor(100*Math.random())+1}})}),100)},changeTimKiemTheo:function(){var t=this;setTimeout((function(){var e=t.$router.history.current,a=e.query,n="?";for(var i in a["mapping"]=t.trangThaiSelected,a["timkiemtheo"]=t.timKiemTheoSelected,a)""!==a[i]&&"undefined"!==a[i]&&void 0!==a[i]&&null!==a[i]&&(n+=i+"="+a[i]+"&");t.$router.push({path:e.path+n,query:{renew:Math.floor(100*Math.random())+1}})}),100)},doLoadingThuTucDonVi:function(){var t=this;t.loading=!0;var e=t.$router.history.current.query,a=null;a={mapping:e.hasOwnProperty("mapping")?e.mapping:""},t.$store.dispatch("getTTHCDonVi",a).then((function(e){t.loading=!1,t.serviceInfoListDonVi=e.data,t.totalThuTuc=e.total,t.serviceInfoListDonViView=t.serviceInfoListDonVi.slice(0,t.pageSize),t.thutucPage=1})).catch((function(e){t.loading=!1,t.serviceInfoListDonVi=[],t.totalThuTuc=0,t.serviceInfoListDonViView=t.serviceInfoListDonVi}))},doLoadingThuTucDVCQG:function(){var t=this;t.loading=!0;var e=t.$router.history.current.query,a=null;a={mapping:e.hasOwnProperty("mapping")?e.mapping:""},t.$store.dispatch("getTTHCDVCQG",a).then((function(e){t.loading=!1,t.serviceInfoListDVCQG=e.data,t.totalThuTuc=e.total,t.serviceInfoListDVCQGView=t.serviceInfoListDVCQG.slice(0,t.pageSize),t.thutucPage=1})).catch((function(e){t.loading=!1,t.serviceInfoListDVCQG=[],t.serviceInfoListDVCQGView=t.serviceInfoListDVCQG,t.totalThuTuc=0,t.thutucPage=1}))},paggingDataMapping:function(t){var e=this,a=10*t.page-10,n=10*t.page;if(e.nameDVCQGModel){var i=e.nameDVCQGModel.toLowerCase();"DonVi"===e.timKiemTheoSelected?(e.listMappingView=e.listMapping.filter((function(t){if(t.serviceNameDVCQG.toLowerCase().search(i)>=0||t.serviceNameDVCQG.search(i)>=0||t.serviceNameDVCQG===e.nameDVCQGModel)return t})).slice(a,n),e.totalMapping=e.listMapping.filter((function(t){if(t.serviceNameDVCQG.toLowerCase().search(i)>=0||t.serviceNameDVCQG.search(i)>=0||t.serviceNameDVCQG===e.nameDVCQGModel)return t})).length):(e.listMappingView=e.listMapping.filter((function(t){if(t.serviceName.toLowerCase().search(i)>=0||t.serviceName.search(i)>=0||t.serviceName===e.nameDVCQGModel)return t})).slice(a,n),e.totalMapping=e.listMapping.filter((function(t){if(t.serviceName.toLowerCase().search(i)>=0||t.serviceName.search(i)>=0||t.serviceName===e.nameDVCQGModel)return t})).length)}else e.listMappingView=e.listMapping.slice(a,n),e.totalMapping=e.listMapping.length},paggingData:function(t){var e=this,a=t.page*e.pageSize-e.pageSize,n=t.page*e.pageSize;if(e.thutucPage=t.page,"DonVi"===e.timKiemTheoSelected)if(e.tenThuTucModel){var i=e.tenThuTucModel.toLowerCase();e.serviceInfoListDonViView=e.serviceInfoListDonVi.filter((function(t){if(t.serviceName.toLowerCase().search(i)>=0||t.serviceName.search(i)>=0||t.serviceName===e.tenThuTucModel)return t})).slice(a,n)}else e.serviceInfoListDonViView=e.serviceInfoListDonVi.slice(a,n);if("DVCQG"===e.timKiemTheoSelected)if(e.tenThuTucModel){var r=e.tenThuTucModel.toLowerCase();e.serviceInfoListDVCQGView=e.serviceInfoListDVCQG.filter((function(t){if(t.serviceNameDVCQG.toLowerCase().search(r)>=0||t.serviceNameDVCQG.search(r)>=0||t.serviceNameDVCQG===e.tenThuTucModel)return t})).slice(a,n)}else e.serviceInfoListDVCQGView=e.serviceInfoListDVCQG.slice(a,n)},openDialogMappingDVCQG:function(t){var e=this;e.serviceSelect=t,e.dialogMapping=!0;var a={serviceCode:t.serviceCode,serviceName:t.serviceName};e.loadingMapping=!0,e.$store.dispatch("getTTHCDVCQG",a).then((function(a){e.pageMapping=1,e.listMapping=a.data,e.listMappingView=e.listMapping.slice(0,10),e.totalMapping=e.listMapping.length,e.loadingMapping=!1,e.nameDVCQGModel=t.serviceName})).catch((function(){e.listMapping=[],e.listMappingView=[],e.loadingMapping=!1}))},openDialogMappingDonVi:function(t){var e=this;e.serviceSelect=t,e.dialogMapping=!0;var a={serviceCode:t.serviceCode,serviceName:t.serviceName};e.loadingMapping=!0,e.$store.dispatch("getTTHCDonVi",a).then((function(a){e.pageMapping=1,e.listMapping=a.data,e.listMappingView=e.listMapping.slice(0,10),e.totalMapping=e.listMapping.length,e.loadingMapping=!1,e.nameDVCQGModel=t.serviceNameDVCQG})).catch((function(){e.listMapping=[],e.listMappingView=[],e.loadingMapping=!1}))},openDialogChiTiet:function(t){var e=this;e.serviceSelect=t,e.btnThem=!1;var a={serviceCodeDVCQG:t.serviceCodeDVCQG};e.loadingMapping=!0,e.$store.dispatch("getChiTietTTDVCQG",a).then((function(t){e.serviceDVCQGDetail=t.result,e.dialogChiTietThuTuc=!0,e.activeDVC=0,e.activeDonVi=0})).catch((function(){}))},openDialogChiTietThuTucDVCQG:function(t){var e=this;e.serviceSelect=t,e.btnThem=!1;var a={serviceCodeDVCQG:t.serviceCodeDVCQG};e.loadingMapping=!0,e.$store.dispatch("getChiTietTTDVCQG",a).then((function(t){e.serviceDVCQGDetail=t.result,e.dialogChiTietThuTucDVCQG=!0,e.activeDVC=0,e.activeDonVi=0})).catch((function(){}))},openDialogChiTietThuTucDonVi:function(t){var e=this;e.btnThem=!1;var a={serviceCode:t.serviceInfoId};e.$store.dispatch("getChiTietDonVi",a).then((function(t){e.serviceDonViDetail=t,e.dialogChiTietThuTucDonVi=!0,e.activeDVC=0,e.activeDonVi=0})).catch((function(){}))},openDialogChiTietThuTucThem:function(t){var e=this;e.serviceSelect=t,e.btnThem=!0;var a={serviceCodeDVCQG:t.serviceCodeDVCQG};e.loadingMapping=!0,e.$store.dispatch("getChiTietTTDVCQG",a).then((function(t){e.serviceDVCQGDetail=t.result,e.activeDVC=0,e.activeDonVi=0,e.dialogChiTietThuTucDVCQG=!0})).catch((function(){}))},mappingTTHC:function(t){var e=this,a="",n="",i="",r="";"DonVi"===e.timKiemTheoSelected&&(a=e.serviceSelect.serviceCode,n=e.serviceSelect.serviceCode,i=t.serviceCodeDVCQG,r=t.serviceNameDVCQG),"DVCQG"===e.timKiemTheoSelected&&(a=t.serviceCode,n=t.serviceName,i=e.serviceSelect.serviceCodeDVCQG,r=e.serviceSelect.serviceNameDVCQG);var o={serviceCode:a,serviceCodeDVCQG:i,serviceNameDVCQG:r};e.$store.dispatch("mappingTTHC",o).then((function(t){if(e.dialogMapping=!1,e.snackbarsuccess=!0,"DonVi"===e.timKiemTheoSelected){for(var o=0;o<e.serviceInfoListDonVi.length;o++)if(e.serviceInfoListDonVi[o].serviceCode===a){e.serviceInfoListDonVi[o].serviceCodeDVCQG=i,e.serviceInfoListDonVi[o].serviceNameDVCQG=r,e.serviceInfoListDonVi[o].synced=0,e.serviceInfoListDonVi[o].mappingClassPK=t.serviceInfoMappingId;break}for(var s=0;s<e.serviceInfoListDonViView.length;s++)if(e.serviceInfoListDonViView[s].serviceCode===a){e.serviceInfoListDonViView[s].serviceCodeDVCQG=i,e.serviceInfoListDonViView[s].serviceNameDVCQG=r,e.serviceInfoListDonViView[s].synced=0,e.serviceInfoListDonViView[s].mappingClassPK=t.serviceInfoMappingId;break}}if("DVCQG"===e.timKiemTheoSelected){for(var c=0;c<e.serviceInfoListDVCQG.length;c++)if(e.serviceInfoListDVCQG[c].serviceCodeDVCQG===i){e.serviceInfoListDVCQG[c].serviceCode=a,e.serviceInfoListDVCQG[c].serviceName=n,e.serviceInfoListDVCQG[c].mappingClassPK=t.serviceInfoMappingId;break}for(var l=0;l<e.serviceInfoListDVCQGView.length;l++)if(e.serviceInfoListDVCQGView[l].serviceCodeDVCQG===i){e.serviceInfoListDVCQGView[l].serviceCode=a,e.serviceInfoListDVCQGView[l].serviceName=n,e.serviceInfoListDVCQGView[l].mappingClassPK=t.serviceInfoMappingId;break}}})).catch((function(){e.snackbarerror=!0}))},removeMapping:function(t){var e=this,a={mappingClassPK:t.mappingClassPK};e.$store.dispatch("removeMappingTTHC",a).then((function(a){if(a){if(e.snackbarsuccess=!0,"DonVi"===e.timKiemTheoSelected){for(var n=0;n<e.serviceInfoListDonVi.length;n++)if(e.serviceInfoListDonVi[n].serviceCode===t.serviceCode){e.serviceInfoListDonVi[n].serviceCodeDVCQG="",e.serviceInfoListDonVi[n].serviceNameDVCQG="",e.serviceInfoListDonVi[n].synced=0;break}for(var i=0;i<e.serviceInfoListDonViView.length;i++)if(e.serviceInfoListDonViView[i].serviceCode===t.serviceCode){e.serviceInfoListDonViView[i].serviceCodeDVCQG="",e.serviceInfoListDonViView[i].serviceNameDVCQG="",e.serviceInfoListDonViView[i].synced=0;break}}if("DVCQG"===e.timKiemTheoSelected){for(var r=0;r<e.serviceInfoListDVCQG.length;r++)if(e.serviceInfoListDVCQG[r].serviceCodeDVCQG===t.serviceCodeDVCQG){e.serviceInfoListDVCQG[r].serviceCode="",e.serviceInfoListDVCQG[r].serviceName="";break}for(var o=0;o<e.serviceInfoListDVCQGView.length;o++)if(e.serviceInfoListDVCQGView[o].serviceCodeDVCQG===t.serviceCodeDVCQG){e.serviceInfoListDVCQGView[o].serviceCode="",e.serviceInfoListDVCQGView[o].serviceName="";break}}}else e.snackbarerror=!0})).catch((function(){e.snackbarerror=!0}))},addTTHC:function(){var t=this,e={serviceCodes:t.serviceSelect.serviceCodeDVCQG,type:"create"};t.$store.dispatch("syncServiceinfoNew",e).then((function(e){t.snackbarsuccess=!0,t.dialogChiTietThuTuc=!1,"DonVi"===t.timKiemTheoSelected&&(t.dialogChiTietThuTucDVCQG=!1),"DVCQG"===t.timKiemTheoSelected&&(t.dialogChiTietThuTucDVCQG=!1)})).catch((function(){t.dialogChiTietThuTucDVCQG=!1,t.snackbarerror=!0}))},syncServiceinfo:function(t){var e=this,a={serviceCodes:t.serviceCode,type:"sync"};e.$store.dispatch("syncServiceinfoNew",a).then((function(t){e.snackbarsuccess=!0,e.timKiemTheoSelected,e.timKiemTheoSelected})).catch((function(){e.snackbarerror=!0}))},backToList:function(){window.history.back()}}},Ea=Fa,$a=Object(p["a"])(Ea,Ra,Ma,!1,null,null,null),qa=$a.exports,Va=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticStyle:{margin:"0 auto"}},[a("v-card",{staticClass:"mb-3 mt-2"},[a("v-toolbar",{attrs:{color:"blue darken-3",dark:"",height:"40"}},[a("v-btn",{attrs:{dark:"",icon:""}},[a("v-icon",[t._v("send_and_archive")])],1),a("v-toolbar-title",{staticClass:"ml-0"},[t._v("\n        Theo dõi truy cập API hệ thống\n      ")]),a("v-spacer"),a("v-btn",{attrs:{dark:"",icon:""},nativeOn:{click:function(e){return t.backToList.apply(null,arguments)}}},[a("v-icon",[t._v("reply")])],1)],1)],1),a("v-layout",{staticClass:"px-3 py-3",staticStyle:{"background-color":"#ececec"},attrs:{wrap:""}},[a("v-flex",{staticClass:"px-2 mb-3",attrs:{xs12:"",sm12:""}},[a("div",[a("div",{staticClass:"d-inline-block text-bold",staticStyle:{"font-weight":"450",width:"130px"}},[t._v("Danh sách API:")]),a("v-autocomplete",{staticClass:"select-search d-inline-block",staticStyle:{width:"calc(100% - 130px)"},attrs:{items:t.apiItems,"item-text":"apiName","item-value":"apiCode","hide-details":"","hide-no-data":"",solo:"",flat:"",height:"32","min-height":"32",clearable:""},scopedSlots:t._u([{key:"selection",fn:function(e){return[a("div",[t._v(t._s(e.item.apiName))])]}},{key:"item",fn:function(e){return[a("div",{staticStyle:{"font-size":"14px !important"}},[t._v(t._s(e.item.apiName)+" - "+t._s(e.item.apiDescription))])]}}]),model:{value:t.api,callback:function(e){t.api=e},expression:"api"}})],1)]),a("v-flex",{staticClass:"px-2",attrs:{xs12:"",sm6:""}},[a("div",{staticClass:"layout wrap"},[a("div",{staticClass:"d-inline-block text-bold pt-2",staticStyle:{"font-weight":"450",width:"130px"}},[t._v("Từ ngày:")]),a("v-menu",{ref:"menuDate1",staticStyle:{width:"calc(100% - 130px)"},attrs:{"close-on-content-click":!0,transition:"scale-transition","offset-y":"","full-width":""},model:{value:t.menuDate1,callback:function(e){t.menuDate1=e},expression:"menuDate1"}},[a("v-text-field",{staticClass:"search-input-appbar input-search",attrs:{slot:"activator","persistent-hint":"","append-icon":"event","hide-details":"",solo:"",flat:"",height:"32","min-height":"32"},on:{blur:function(e){t.fromReceiveDate=t.parseDate(t.fromReceiveDateFormatted)}},slot:"activator",model:{value:t.fromReceiveDateFormatted,callback:function(e){t.fromReceiveDateFormatted=e},expression:"fromReceiveDateFormatted"}}),a("v-date-picker",{attrs:{max:t.toReceiveDateFormatted?t.getMinMax(t.toReceiveDateFormatted):t.currentDate(),locale:"vi","first-day-of-week":1,"no-title":""},on:{input:function(e){return t.changeDate("1")}},model:{value:t.fromReceiveDate,callback:function(e){t.fromReceiveDate=e},expression:"fromReceiveDate"}})],1)],1)]),a("v-flex",{staticClass:"px-2",attrs:{xs12:"",sm6:""}},[a("div",{staticClass:"layout wrap"},[a("div",{staticClass:"d-inline-block text-bold pt-2",staticStyle:{"font-weight":"450",width:"130px"}},[t._v("Đến ngày:")]),a("v-menu",{ref:"menuDate2",staticStyle:{width:"calc(100% - 130px)"},attrs:{"close-on-content-click":!0,transition:"scale-transition","offset-y":"","full-width":""},model:{value:t.menuDate2,callback:function(e){t.menuDate2=e},expression:"menuDate2"}},[a("v-text-field",{staticClass:"search-input-appbar input-search",attrs:{slot:"activator","persistent-hint":"","append-icon":"event","hide-details":"",solo:"",flat:"",height:"32","min-height":"32"},on:{blur:function(e){t.toReceiveDate=t.parseDate(t.toReceiveDateFormatted)}},slot:"activator",model:{value:t.toReceiveDateFormatted,callback:function(e){t.toReceiveDateFormatted=e},expression:"toReceiveDateFormatted"}}),a("v-date-picker",{attrs:{min:t.fromReceiveDateFormatted?t.getMinMax(t.fromReceiveDateFormatted):null,max:t.currentDate(),locale:"vi","first-day-of-week":1,"no-title":""},on:{input:function(e){return t.changeDate("2")}},model:{value:t.toReceiveDate,callback:function(e){t.toReceiveDate=e},expression:"toReceiveDate"}})],1)],1)]),a("v-flex",{staticClass:"xs12 mx-2 mt-2"},[a("v-btn",{staticClass:"mx-0 mb-0",attrs:{color:"blue darken-3",dark:""},nativeOn:{click:function(e){return t.searchSyncDossier.apply(null,arguments)}}},[a("v-icon",{attrs:{size:"18"}},[t._v("search")]),t._v("   Tìm kiếm\n      ")],1)],1)],1),a("div",[a("v-data-table",{staticClass:"table-landing table-bordered mt-3",staticStyle:{border:"1px solid rgb(222, 222, 222)"},attrs:{headers:t.dossierListHeader,items:t.dossierList,"hide-actions":"","no-data-text":"Không có dữ liệu"},scopedSlots:t._u([{key:"headers",fn:function(e){return[a("tr",{staticStyle:{height:"42px"}},t._l(e.headers,(function(e){return a("th",{key:e.text,class:e["class"]?e["class"]:"",staticStyle:{"border-right":"1px solid #dedede"},attrs:{width:e["width"]?e["width"]+"px":""}},[a("v-tooltip",{attrs:{bottom:""}},[a("span",{attrs:{slot:"activator"},slot:"activator"},[t._v(t._s(e.text))]),a("span",[t._v(t._s(e.text))])])],1)})),0)]}},{key:"items",fn:function(e){return[a("tr",{class:{active:e.index%2==1},staticStyle:{cursor:"pointer"}},[a("td",{staticClass:"text-xs-center",staticStyle:{width:"50px",height:"36px","border-right":"1px solid #dedede"}},[t.loadingTable?a("content-placeholders",[a("content-placeholders-text",{attrs:{lines:1}})],1):a("div",[a("span",[t._v(t._s(t.dossierPage*t.numberPerPage-t.numberPerPage+e.index+1))])])],1),a("td",{staticClass:"text-xs-left",staticStyle:{height:"36px","border-right":"1px solid #dedede"}},[t.loadingTable?a("content-placeholders",[a("content-placeholders-text",{attrs:{lines:1}})],1):a("div",[a("span",[t._v(t._s(e.item.api))])])],1),a("td",{staticClass:"text-xs-left",staticStyle:{height:"36px","border-right":"1px solid #dedede"}},[t.loadingTable?a("content-placeholders",[a("content-placeholders-text",{attrs:{lines:1}})],1):a("div",[a("span",[t._v(t._s(e.item.createDate?t.currentDateFormat(e.item.createDate):""))])])],1),a("td",{staticClass:"text-xs-left",staticStyle:{height:"36px","border-right":"1px solid #dedede"}},[t.loadingTable?a("content-placeholders",[a("content-placeholders-text",{attrs:{lines:1}})],1):a("div",[a("span",{style:1==e.item.stateSync?"color: green":"color: red"},[t._v(t._s(1==e.item.stateSync?"Thành công":"Thất bại"))])])],1),a("td",{staticClass:"text-xs-center",staticStyle:{height:"36px","border-right":"1px solid #dedede"}},[t.loadingTable?a("content-placeholders",[a("content-placeholders-text",{attrs:{lines:1}})],1):a("div",[a("v-btn",{staticClass:"mx-0 my-1 white--text",attrs:{small:"",color:"blue"},nativeOn:{click:function(a){return t.showData(e.item)}}},[t._v("\n                Xem dữ liệu\n              ")])],1)],1)])]}}])}),a("div",{staticClass:"my-2"},[a("div",{staticClass:"text-xs-right layout wrap",staticStyle:{position:"relative"}},[a("div",{staticClass:"flex pagging-table"},[a("tiny-pagination",{attrs:{total:t.totalDossierSearch,page:t.dossierPage,numberPerPage:t.numberPerPage,nameRecord:"hồ sơ","custom-class":"custom-tiny-class"},on:{"tiny:change-page":t.changePage}})],1)])])],1),a("v-dialog",{attrs:{scrollable:"",persistent:"","max-width":"1300px"},model:{value:t.dialog_dataInfo,callback:function(e){t.dialog_dataInfo=e},expression:"dialog_dataInfo"}},[a("v-card",[a("v-toolbar",{staticClass:"px-3",attrs:{dark:"",color:"blue"}},[a("v-toolbar-title",[t._v("Dữ liệu đồng bộ")]),a("v-spacer"),a("v-btn",{attrs:{icon:"",dark:""},nativeOn:{click:function(e){t.dialog_dataInfo=!1}}},[a("v-icon",[t._v("close")])],1)],1),a("v-card-text",{staticClass:"py-1"},[a("v-layout",{staticClass:"py-1",attrs:{wrap:""}},[a("v-flex",{staticClass:"px-2 data-request",staticStyle:{border:"1px solid #dedede","border-radius":"5px","padding-top":"10px"},attrs:{xs12:"",sm6:""}},[a("p",{staticStyle:{"font-weight":"bold"}},[t._v("Dữ liệu gửi:")]),a("div",{staticStyle:{"word-break":"break-all"}},[t._v(t._s(t.dataRequest))])]),a("v-flex",{staticClass:"px-2 data-response",staticStyle:{border:"1px solid #dedede","border-radius":"5px","padding-top":"10px"},attrs:{xs12:"",sm6:""}},[a("p",{staticStyle:{"font-weight":"bold"}},[t._v("Dữ liệu nhận:")]),a("div",{staticStyle:{"word-break":"break-all"}},[t._v(t._s(t.dataResponse))])])],1)],1),a("v-card-actions",[a("v-spacer"),a("v-btn",{staticClass:"mr-3",attrs:{color:"blue white--text"},nativeOn:{click:function(e){t.dialog_dataInfo=!1}}},[a("v-icon",[t._v("clear")]),t._v("  \n          Thoát\n        ")],1)],1)],1)],1)],1)},Ua=[],Ga=a("838b"),Ha=a.n(Ga);a("b83f");function Qa(t,e){return Xa(t)||za(t,e)||Ba(t,e)||ja()}function ja(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function Ba(t,e){if(t){if("string"===typeof t)return Ka(t,e);var a=Object.prototype.toString.call(t).slice(8,-1);return"Object"===a&&t.constructor&&(a=t.constructor.name),"Map"===a||"Set"===a?Array.from(t):"Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a)?Ka(t,e):void 0}}function Ka(t,e){(null==e||e>t.length)&&(e=t.length);for(var a=0,n=new Array(e);a<e;a++)n[a]=t[a];return n}function za(t,e){var a=null==t?null:"undefined"!==typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=a){var n,i,r=[],o=!0,s=!1;try{for(a=a.call(t);!(o=(n=a.next()).done);o=!0)if(r.push(n.value),e&&r.length===e)break}catch(c){s=!0,i=c}finally{try{o||null==a["return"]||a["return"]()}finally{if(s)throw i}}return r}}function Xa(t){if(Array.isArray(t))return t}var Wa={components:{VueJsonPretty:Ha.a,"tiny-pagination":bt},data:function(){return{fromDate:"",toDate:"",loading:!1,loadingTable:!1,menuDate1:!1,menuDate2:!1,fromReceiveDate:"",fromReceiveDateFormatted:"",toReceiveDate:"",toReceiveDateFormatted:"",apiItems:[],api:"",dossierNo:"",dossierList:"",dossierPage:1,numberPerPage:10,totalDossierSearch:0,options:{mode:"code"},dataRequest:{},dataResponse:{},dialog_dataInfo:!1,dossierListHeader:[{text:"STT",align:"center",sortable:!1},{text:"API",align:"center",sortable:!1},{text:"Thời gian truy cập",align:"center",sortable:!1},{text:"Trạng thái",align:"center",sortable:!1},{text:"Dữ liệu truy cập",align:"center",sortable:!1}]}},computed:{},created:function(){var t=this;t.$nextTick((function(){t.getServiceInfo(),t.searchSyncDossier()}))},watch:{},methods:{showData:function(t){var e=this;try{e.dataRequest=t.bodyRequest}catch(a){e.dataRequest={}}try{e.dataResponse=t.bodyResponse}catch(a){e.dataResponse={}}e.dialog_dataInfo=!0},searchSyncDossier:function(){var t=this;t.loadingTable=!0;var e={headers:{groupId:window.themeDisplay.getScopeGroupId()},params:{api:t.api,dossierNo:t.dossierNo,fromDate:t.fromReceiveDateFormatted,toDate:t.toReceiveDateFormatted,start:t.dossierPage*t.numberPerPage-t.numberPerPage,end:t.dossierPage*t.numberPerPage}};O.a.get("/o/rest/v2/socket/web/log-report",e).then((function(e){var a=e.data;t.loadingTable=!1,t.dossierList=a["data"],t.totalDossierSearch=a["total"]})).catch((function(e){t.loadingTable=!1,t.dossierList=[],t.totalDossierSearch=0}))},getServiceInfo:function(){var t=this,e={headers:{groupId:window.themeDisplay.getScopeGroupId()}};O.a.get("/o/rest/v2/socket/web/apiManagers",e).then((function(e){var a=e.data;if(a.hasOwnProperty("data")&&a.data){var n=a.data;n=Array.isArray(a.data)?a.data:[a.data],t.apiItems=n}})).catch((function(t){}))},changePage:function(t){var e=this;e.dossierPage=t.page,e.searchSyncDossier()},mappingUnit:function(t){return"001.00.26.G14"===t?"Một cửa":"002.00.00.G14"===t?"Dịch vụ công Bộ":"003.00.26.G14"===t?"Cục tần số":""},parsedate:function(t){var e=t.split("-"),a=Qa(e,3),n=a[0],i=a[1],r=a[2];return"".concat(r,"-").concat(i,"-").concat(n)},currentDate:function(){var t=new Date;return"".concat(t.getFullYear(),"-").concat((t.getMonth()+1).toString().padStart(2,"0"),"-").concat(t.getDate().toString().padStart(2,"0"))},changeDate:function(t){var e=this;e.menuDate1=e.menuDate2=!1,"1"===t?e.fromReceiveDateFormatted=e.formatDate(e.fromReceiveDate):"2"===t&&(e.toReceiveDateFormatted=e.formatDate(e.toReceiveDate))},getMinMax:function(t){if(!t)return null;var e=t.split("/"),a=Qa(e,3),n=a[0],i=a[1],r=a[2];return"".concat(r,"-").concat(i,"-").concat(n)},parseDate:function(t){if(!t)return"";if(String(t).indexOf("/")>0){var e=t.split("/"),a=Qa(e,3),n=a[0],i=a[1],r=a[2];return"".concat(r,"-").concat(i.padStart(2,"0"),"-").concat(n.padStart(2,"0"))}if(String(t).indexOf("-")>0){var o=t.split("-"),s=Qa(o,3),c=s[0],l=s[1],d=s[2];return"".concat(d,"-").concat(l.padStart(2,"0"),"-").concat(c.padStart(2,"0"))}var u=new Date(Number(t));return"".concat(u.getFullYear(),"-").concat((u.getMonth()+1).toString().padStart(2,"0"),"-").concat(u.getDate().toString().padStart(2,"0"))},formatDate:function(t){if(!t)return"";var e=t.split("-"),a=Qa(e,3),n=a[0],i=a[1],r=a[2];return"".concat(r,"/").concat(i,"/").concat(n)},currentDateFormat:function(t){var e=t?new Date(t):new Date;return"".concat(e.getDate().toString().padStart(2,"0"),"/").concat((e.getMonth()+1).toString().padStart(2,"0"),"/").concat(e.getFullYear()," ").concat(e.getHours().toString().padStart(2,"0"),":").concat(e.getMinutes().toString().padStart(2,"0"))},backToList:function(){window.history.back()}}},Ya=Wa,Ja=Object(p["a"])(Ya,Va,Ua,!1,null,null,null),Za=Ja.exports,tn=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("v-card",{staticClass:"px-2 mx-1"},[a("v-toolbar",{attrs:{color:"blue darken-3",dark:"",height:"48"}},[a("v-toolbar-title",{staticClass:"ml-0"},[t._v("\n        Đồng bộ danh mục cơ quan\n      ")]),a("v-spacer"),a("v-btn",{attrs:{dark:"",icon:""},nativeOn:{click:function(e){return t.backToList.apply(null,arguments)}}},[a("v-icon",[t._v("reply")])],1)],1),a("div",{staticClass:"grid-list mt-3"},[t.isMobile?t._e():a("div",{staticClass:"list-thu-tuc"},[t.loading?a("content-placeholders",{staticClass:"mt-3"},[a("content-placeholders-text",{attrs:{lines:10}})],1):a("div",{staticClass:"service__info__table"},[a("v-data-table",{staticClass:"table-landing table-bordered",attrs:{headers:t.headersCoQuan,items:t.listCoQuan,"rows-per-page-items":t.rowsPerPageItems,pagination:t.pagination},on:{"update:pagination":function(e){t.pagination=e}},scopedSlots:t._u([{key:"items",fn:function(e){return[a("tr",{class:{active:e.index%2==1}},[a("td",{staticClass:"text-xs-left",staticStyle:{"border-right":"0.5px solid #aba6a6"}},[t.loading?a("content-placeholders",[a("content-placeholders-text",{attrs:{lines:1}})],1):a("div",[a("span",{staticClass:"text-bold"},[t._v(t._s(e.item.itemCode))]),t._v(" - "),a("span",[t._v(t._s(e.item.itemName))])])],1),a("td",{staticClass:"text-xs-left"},[t.loading?a("content-placeholders",[a("content-placeholders-text",{attrs:{lines:1}})],1):a("div",[a("v-layout",{attrs:{wrap:"","align-center":""}},[a("v-flex",{attrs:{xs9:""}},t._l(e.item.similarity,(function(n,i){return n.mapped?a("div",{key:i,staticClass:"mb-2",staticStyle:{position:"relative"}},[n.mapped?a("v-tooltip",{staticStyle:{display:"inline-block",width:"25px",position:"absolute",top:"-2px"},attrs:{top:""}},[a("v-checkbox",{attrs:{slot:"activator",primary:"","hide-details":"",color:"#115ebe",disabled:t.loadingSync},on:{change:function(a){return t.doActionMappingAgency(e.item,e.index,n,i)}},slot:"activator",model:{value:n.mapped,callback:function(e){t.$set(n,"mapped",e)},expression:"itemAgency.mapped"}}),n.mapped?a("span",[t._v("Chọn để hủy mapping")]):a("span",[t._v("Chọn để mapping")])],1):t._e(),n.mapped?a("span",{staticClass:"text-bold",style:n.mapped?"margin-left: 50px":"margin-left: 24px"},[t._v(t._s(n.itemCodeDVCQG))]):t._e(),t._v(" - "),n.mapped?a("span",[t._v(t._s(n.itemNameDVCQG))]):t._e()],1):t._e()})),0),a("v-flex",{staticClass:"text-right",attrs:{xs3:""}},[a("v-btn",{attrs:{small:"",outline:"",color:"#115ebe"},on:{click:function(a){return t.openDialogMapping(e.item)}}},[t._v("Chọn")])],1)],1)],1)],1)])]}}],null,!1,1996281422)},[a("template",{slot:"no-data"},[a("div",{staticClass:"text-xs-center mt-2"},[t._v("\n                Không có thủ tục nào được tìm thấy\n              ")])])],2)],1)],1)])],1),a("v-dialog",{attrs:{persistent:"","max-width":"600px"},model:{value:t.dialogMapping,callback:function(e){t.dialogMapping=e},expression:"dialogMapping"}},[a("v-card",{staticStyle:{background:"#fff"}},[a("v-card-title",{attrs:{"pa-1":""}},[a("v-layout",{attrs:{wrap:"","align-center":""}},[a("v-flex",{attrs:{xs6:""}},[a("span",{staticClass:"headline"},[t._v("Chọn để mapping")])]),a("v-flex",{staticClass:"text-right",attrs:{xs6:""}},[a("v-btn",{attrs:{color:"#115ebe",fab:"",small:"",dark:""},on:{click:function(e){t.dialogMapping=!1}}},[a("v-icon",[t._v("cancel")])],1)],1)],1)],1),a("v-card-text",[a("v-container",{attrs:{"grid-list-md":""}},[a("v-layout",[a("v-flex",{attrs:{xs12:""}},[a("v-text-field",{attrs:{label:"Tìm kiếm theo tên"},model:{value:t.nameDVCQGModel,callback:function(e){t.nameDVCQGModel=e},expression:"nameDVCQGModel"}})],1)],1),t.listMappingView.length>0?a("div",{staticStyle:{height:"437px"}},[t.loadingMapping?a("content-placeholders",[a("content-placeholders-text",{attrs:{lines:5}})],1):t._l(t.listMappingView,(function(e,n){return a("v-layout",{key:n,staticStyle:{"border-bottom":"0.5px dashed"},attrs:{"align-center":"",wrap:""}},[a("v-flex",{staticClass:"pa-0",attrs:{xs9:""}},[a("span",{staticStyle:{"font-weight":"bold"}},[t._v(t._s(e.itemCodeDVCQG)+"-"+t._s(e.itemNameDVCQG))])]),a("v-flex",{staticClass:"text-right pa-0",attrs:{xs3:""}},[a("v-btn",{staticStyle:{color:"#fff"},attrs:{small:"",color:"#115ebe"},on:{click:function(a){return t.mappingAgencyDVCQG(e)}}},[t._v("Chọn")])],1)],1)}))],2):a("div",{staticStyle:{height:"437px"}},[t.loadingMapping?a("content-placeholders",[a("content-placeholders-text",{attrs:{lines:5}})],1):a("v-layout",[a("v-flex",{attrs:{xs12:""}},[a("span",[t._v("Không tìm thấy dữ liệu")])])],1)],1),a("v-layout",[a("v-flex",{attrs:{xs12:""}},[a("div",{staticClass:"text-xs-right layout wrap ",staticStyle:{position:"relative"}},[a("div",{staticClass:"flex pagging-table "},[a("tiny-pagination",{attrs:{total:t.total,page:t.pageMapping,"custom-class":"custom-tiny-class"},on:{"tiny:change-page":t.paggingDataMapping}})],1)])])],1)],1)],1)],1)],1),a("v-snackbar",{attrs:{bottom:!1,left:!1,"multi-line":!1,right:!0,timeout:2e3,top:!0,vertical:!1,color:"success"},model:{value:t.snackbarsuccess,callback:function(e){t.snackbarsuccess=e},expression:"snackbarsuccess"}},[t._v("\n    Yêu cầu thực hiện thành công\n    "),a("v-btn",{attrs:{icon:""},on:{click:function(e){t.snackbarsuccess=!1}}},[a("v-icon",[t._v("clear")])],1)],1),a("v-snackbar",{attrs:{bottom:!1,left:!1,"multi-line":!1,right:!0,timeout:2e3,top:!0,vertical:!1,color:"#EF5350"},model:{value:t.snackbarerror,callback:function(e){t.snackbarerror=e},expression:"snackbarerror"}},[t._v("\n    Yêu cầu thực hiện thất bại\n    "),a("v-btn",{attrs:{icon:""},on:{click:function(e){t.snackbarerror=!1}}},[a("v-icon",[t._v("clear")])],1)],1)],1)},en=[];n["default"].use(N.a);var an={props:["index"],components:{"tiny-pagination":bt},data:function(){return{snackbarsuccess:!1,snackbarerror:!1,breadCrumbsitems:[{text:"Bảng dữ liệu",disabled:!1},{text:"",disabled:!1}],nameDVCQGModel:"",listMapping:[],listMappingView:[],dialogMapping:!1,dialogChiTietCauHoi:!1,loadingSyncSharingqa:!1,dialog_createDossier:!1,dialogVerifycation:!1,dialogLogin:!1,valid:!1,userName:"",passWord:"",loadingSync:!1,loadingMapping:!1,serviceInfoList:[],listCauHoi:[],listCauHoiView:[],totalThuTuc:0,total:0,thutucPage:1,pageMapping:1,govAgencyList:[],govAgencySelected:"",govAgencyThucHienSelected:{},domainList:[],domainListCurrent:[],domainSelected:{},levelSelected:{},serviceNameKey:"",serviceDetail:"",dialogGuide:!1,loading:!0,headersCoQuan:[{text:"Mã cơ quan",align:"center",sortable:!1},{text:"Mã DVCQG",align:"center",sortable:!1}],listTrangThai:[{text:"Đã đồng bộ",value:1},{text:"Chưa đồng bộ",value:2}],trangThaiSelected:"",listCoQuan:[],headersCauHoi:[{text:"Câu hỏi",align:"center",sortable:!1},{text:"Trạng thái",align:"center",sortable:!1},{text:"Thao tác",align:"center",sortable:!1}],listLoaiHoiDap:[{text:"Danh sách câu hỏi được biên soạn bởi Bộ, cơ quan",value:"LayDanhSachHoiDapBoCoQuan"},{text:"Danh sách câu hỏi được gửi bởi công dân, doanh nghiệp",value:"LayDanhSachHoiDapGuiTuDVCQG"}],loaiHoiDapySelected:"",isLogin:!1,verificationApplicantCreateDossier:!1,serviceSelected:"",hasCoQuanThucHien:!1,configUrl:"",syncing:!1,mappingIdArray:{},rowsPerPageItems:[10,20,30,40],pagination:{rowsPerPage:20},chiTietCauHoi:{},coQuanSelect:{}}},computed:{},created:function(){var t=this;t.$nextTick((function(){var e=t.$router.history.current,a=e.query,n=e.query;t.loaiHoiDapySelected=a.hasOwnProperty("service")?a.service:"LayDanhSachHoiDapBoCoQuan";var i="?";for(var r in n["service"]=a.hasOwnProperty("service")?a.service:"LayDanhSachHoiDapBoCoQuan",n)""!==n[r]&&"undefined"!==n[r]&&void 0!==n[r]&&null!==n[r]&&(i+=r+"="+n[r]+"&");t.$router.push({path:e.path+i,query:{renew:Math.floor(100*Math.random())+1}}),t.loadingMapping=!0;var o={service:"LayDanhMucCoQuan"};t.$store.dispatch("getServiceAgencyDVCQG",o).then((function(e){t.pageMapping=1,t.listMapping=e.data,t.listMappingView=t.listMapping.slice(0,10),t.total=t.listMapping.length,t.loadingMapping=!1})).catch((function(){t.listMapping=[],t.listMappingView=[],t.loadingMapping=!1}))}))},watch:{$route:function(t,e){var a=this;t.params,t.query;a.doLoadingAgency()},nameDVCQGModel:function(t){var e=this;if(e.pageMapping=1,e.loadingMapping=!0,t){var a=t.toLowerCase(),n=e.listMapping.filter((function(e){if(e.itemNameDVCQG.toLowerCase().search(a)>=0||e.itemNameDVCQG.search(a)>=0||e.itemNameDVCQG===t)return e}));e.listMappingView=n.slice(0,10),e.total=n.length,e.loadingMapping=!1}else e.listMappingView=e.listMapping.slice(0,10),e.total=e.listMapping.length,e.loadingMapping=!1},trangThaiSelected:function(t){var e=this;e.listCauHoiView=t?1===t?e.listCauHoi.filter((function(t){return!0===t.SYNC})):e.listCauHoi.filter((function(t){return!1===t.SYNC})):e.listCauHoi}},methods:{filterServiceName:function(){var t=this;setTimeout((function(){var e=t.$router.history.current,a=e.query,n="?";for(var i in a["page"]=1,a["agency"]="",a["domain"]="",a["keyword"]=t.serviceNameKey,a)""!==a[i]&&"undefined"!==a[i]&&void 0!==a[i]&&null!==a[i]&&(n+=i+"="+a[i]+"&");t.$router.push({path:e.path+n,query:{renew:Math.floor(100*Math.random())+1}})}),100)},clearKeyword:function(){var t=this;t.serviceNameKey="",t.filterServiceName()},changeAdministration:function(){var t=this;setTimeout((function(){var e=t.$router.history.current,a=e.query,n="?";for(var i in a["page"]=1,a["agency"]=t.govAgencySelected,a["domain"]="",a["keyword"]="",a)""!==a[i]&&"undefined"!==a[i]&&void 0!==a[i]&&null!==a[i]&&(n+=i+"="+a[i]+"&");t.$router.push({path:e.path+n,query:{renew:Math.floor(100*Math.random())+1}})}),100)},changeDomain:function(){var t=this;setTimeout((function(){var e=t.$router.history.current,a=e.query,n="?";for(var i in a["page"]=1,a["domain"]=t.domainSelected,a["keyword"]="",t.trangThaiSelected="",a)""!==a[i]&&"undefined"!==a[i]&&void 0!==a[i]&&null!==a[i]&&(n+=i+"="+a[i]+"&");t.$router.push({path:e.path+n,query:{renew:Math.floor(100*Math.random())+1}})}),100)},changeLoaiHoiDap:function(){var t=this;setTimeout((function(){var e=t.$router.history.current,a=e.query,n="?";for(var i in a["page"]=1,a["service"]=t.loaiHoiDapySelected,a["keyword"]="",a)""!==a[i]&&"undefined"!==a[i]&&void 0!==a[i]&&null!==a[i]&&(n+=i+"="+a[i]+"&");t.$router.push({path:e.path+n,query:{renew:Math.floor(100*Math.random())+1}})}),100)},doLoadingAgency:function(){var t=this;t.$router.history.current.query;t.listCoQuan=[],t.loading=!0;var e={service:"LayDanhMucCoQuan"};t.$store.dispatch("getServiceAgency",e).then((function(e){t.loading=!1,e.data?t.listCoQuan=e.data:t.listCoQuan=[]})).catch((function(e){t.loading=!1,t.listCoQuan=[]}))},doLoadingCauHoi:function(){var t=this,e=t.$router.history.current.query;t.listCauHoi=[],t.listCauHoiView=[],t.loading=!0;var a=null;a={service:e.hasOwnProperty("service")?e.service:""},t.$store.dispatch("getSharingqa",a).then((function(e){t.loading=!1,e.result?(t.listCauHoi=e.result,t.trangThaiSelected?1===t.trangThaiSelected?t.listCauHoiView=t.listCauHoi.filter((function(t){return!0===t.SYNC})):t.listCauHoiView=t.listCauHoi.filter((function(t){return!1===t.SYNC})):t.listCauHoiView=t.listCauHoi):(t.listCauHoi=[],t.listCauHoiView=t.listCauHoi)})).catch((function(e){t.loading=!1,t.listCauHoi=[],t.listCauHoiView=t.listCauHoi}))},mappingAgency:function(t,e,a,n){for(var i=this,r=!1,o="",s={itemCode:t.itemCode,itemCodeDVCQG:a.itemCodeDVCQG},c=0;c<i.listCoQuan[e]["similarity"].length;c++)if(String(c)!==String(n)&&i.listCoQuan[e]["similarity"][c]["mapped"]){i.listCoQuan[e]["similarity"][c]["mapped"]=!1,o=i.listCoQuan[e]["similarity"][c],r=!0;break}if(r){o.dictItemMappingId;i.$store.dispatch("mappingServiceAgency",s).then((function(t){t?i.snackbarsuccess=!0:i.snackbarerror=!0,i.loadingSync=!1})).catch((function(){i.snackbarerror=!0,i.loadingSync=!1}))}else i.$store.dispatch("mappingServiceAgency",s).then((function(t){t?i.snackbarsuccess=!0:i.snackbarerror=!0,i.loadingSync=!1})).catch((function(){i.snackbarerror=!0,i.loadingSync=!1}))},doActionMappingAgency:function(t,e,a,n){var i=this;setTimeout((function(){a["mapped"]?i.mappingAgency(t,e,a,n):i.removeMappingAgency(t,e,a,n),i.loadingSync=!0}),300)},syncSharingqa:function(t){var e=this;e.loadingSyncSharingqa=!0,t=t||{},e.$store.dispatch("syncSharingqa",t).then((function(a){if(a.data.length){e.snackbarsuccess=!0,e.loadingSyncSharingqa=!1;for(var n=0;n<e.listCauHoi.length;n++)if(e.listCauHoi[n].HOIDAPID===t.HOIDAPID){e.listCauHoi[n].SYNC=!0;break}for(var i=0;i<e.listCauHoiView.length;i++)if(e.listCauHoiView[i].HOIDAPID===t.HOIDAPID){e.listCauHoiView[i].SYNC=!0;break}}else e.loadingSyncSharingqa=!1,e.snackbarerror=!0})).catch((function(){e.loadingSyncSharingqa=!1,e.snackbarerror=!0}))},removeMappingAgency:function(t,e,a,n){var i=this,r={dictItemMappingId:a.dictItemMappingId};i.$store.dispatch("removeMappingServiceAgency",r).then((function(t){i.snackbarsuccess=!0,i.loadingSync=!1})).catch((function(){i.snackbarerror=!0,i.loadingSync=!1}))},syncAll:function(){},paggingData:function(t){var e=this,a=e.$router.history.current,n=a.query,i="?";for(var r in n["page"]="",n)""!==n[r]&&"undefined"!==n[r]&&void 0!==n[r]&&null!==n[r]&&"null"!==n[r]&&(i+=r+"="+n[r]+"&");i+="page="+t.page,e.$router.push({path:a.path+i})},paggingDataMapping:function(t){var e=this,a=10*t.page-10,n=10*t.page;if(e.nameDVCQGModel){var i=e.nameDVCQGMode.toLowerCase();e.listMappingView=e.listMapping.filter((function(t){if(t.itemNameDVCQG.toLowerCase().search(i)>=0||t.itemNameDVCQG.search(i)>=0||t.itemNameDVCQG===e.nameDVCQGModel)return t})).slice(a,n)}else e.listMappingView=e.listMapping.slice(a,n)},getColor:function(t){return 2===t?"green":3===t?"orange darken-1":4===t?"red":void 0},viewDetailCauHoi:function(t){var e=this;e.chiTietCauHoi=t,e.dialogChiTietCauHoi=!0},openDialogMapping:function(t){var e=this;e.coQuanSelect=t,e.pageMapping=1,e.nameDVCQGModel=t.itemName,e.dialogMapping=!0},mappingAgencyDVCQG:function(t){var e=this,a={itemCode:e.coQuanSelect.itemCode,itemCodeDVCQG:t.itemCodeDVCQG};e.$store.dispatch("mappingServiceAgency",a).then((function(a){if(a){e.dialogMapping=!1;for(var n=0;n<e.listCoQuan.length;n++)if(e.listCoQuan[n].itemCode===e.coQuanSelect.itemCode){e.listCoQuan[n]["similarity"]=[],e.listCoQuan[n]["similarity"].push({itemCodeDVCQG:t.itemCodeDVCQG,itemNameDVCQG:t.itemNameDVCQG,mapped:!0});break}e.snackbarsuccess=!0}else e.snackbarerror=!0;e.loadingSync=!1})).catch((function(){e.snackbarerror=!0,e.loadingSync=!1}))},backToList:function(){window.history.back()}}},nn=an,rn=Object(p["a"])(nn,tn,en,!1,null,null,null),on=rn.exports,sn=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("v-card",{staticClass:"px-2 mx-1"},[a("v-toolbar",{attrs:{color:"blue darken-3",dark:"",height:"48"}},[a("v-btn",{attrs:{dark:"",icon:""}},[a("v-icon",[t._v("edit")])],1),a("v-toolbar-title",{staticClass:"ml-0"},[t._v("\n        Đồng bộ danh mục câu hỏi\n      ")]),a("v-spacer"),a("v-btn",{attrs:{dark:"",icon:""},nativeOn:{click:function(e){return t.backToList.apply(null,arguments)}}},[a("v-icon",[t._v("reply")])],1)],1),a("div",{staticClass:"grid-list mt-3"},[a("div",{staticClass:"list-thu-tuc"},[a("v-layout",{staticClass:"white py-2",attrs:{wrap:"","align-center":""}},[a("v-flex",{staticClass:"xs12 sm3 px-2"},[a("v-autocomplete",{staticClass:"select-border",attrs:{items:t.listLoaiHoiDap,"item-text":"text","item-value":"value","hide-selected":!0,box:"",readonly:t.loading,clearable:""},on:{change:t.changeLoaiHoiDap},model:{value:t.loaiHoiDapySelected,callback:function(e){t.loaiHoiDapySelected=e},expression:"loaiHoiDapySelected"}})],1),a("v-flex",{staticClass:"xs12 sm3 px-2"},[a("v-autocomplete",{staticClass:"select-border",attrs:{label:"Trạng thái",items:t.listTrangThai,"item-text":"text","item-value":"value","hide-selected":!0,box:"",readonly:t.loading,clearable:""},model:{value:t.trangThaiSelected,callback:function(e){t.trangThaiSelected=e},expression:"trangThaiSelected"}})],1),a("v-flex",{staticClass:"xs12 sm6"},[a("v-btn",{staticStyle:{color:"#fff"},attrs:{small:"",color:"#115ebe",loading:t.loadingSyncSharingqa},on:{click:function(e){return t.syncSharingqa()}}},[t._v("Đồng bộ tất cả")])],1)],1),t.loading?a("content-placeholders",{staticClass:"mt-3"},[a("content-placeholders-text",{attrs:{lines:10}})],1):a("div",{staticClass:"service__info__table"},[a("v-data-table",{staticClass:"table-landing table-bordered",attrs:{headers:t.headersCauHoi,items:t.listCauHoiView,"rows-per-page-items":t.rowsPerPageItems,pagination:t.pagination},on:{"update:pagination":function(e){t.pagination=e}},scopedSlots:t._u([{key:"items",fn:function(e){return[a("tr",{class:{active:e.index%2==1}},[a("td",{staticClass:"text-xs-left",staticStyle:{"border-right":"0.5px solid #aba6a6"}},[t.loading?a("content-placeholders",[a("content-placeholders-text",{attrs:{lines:1}})],1):a("div",[a("span",{staticClass:"text-bold"},[t._v(t._s(e.item.NOIDUNG))])])],1),a("td",{staticClass:"text-xs-left",staticStyle:{"border-right":"0.5px solid #aba6a6",width:"127px"}},[t.loading?a("content-placeholders",[a("content-placeholders-text",{attrs:{lines:1}})],1):a("div",[e.item.SYNC?a("span",[t._v(" Đã đồng bộ")]):t._e()])],1),a("td",{staticClass:"text-xs-left",staticStyle:{width:"229px"}},[t.loading?a("content-placeholders",[a("content-placeholders-text",{attrs:{lines:1}})],1):a("div",[a("v-layout",{attrs:{wrap:"","align-center":""}},[a("v-flex",{attrs:{xs8:""}},[a("v-btn",{staticStyle:{color:"#fff"},attrs:{small:"",color:"#115ebe"},on:{click:function(a){return t.syncSharingqa(e.item)}}},[t._v(t._s(e.item.SYNC?"Đồng bộ lại":"Đồng bộ"))])],1),a("v-flex",{attrs:{xs4:""}},[a("v-icon",{staticStyle:{"font-size":"23px",cursor:"pointer"},attrs:{color:"#115ebe"},on:{click:function(a){return t.viewDetailCauHoi(e.item)}}},[t._v("visibility")])],1)],1)],1)],1)])]}}])},[a("template",{slot:"no-data"},[a("div",{staticClass:"text-xs-center mt-2"},[t._v("\n                Không có câu hỏi nào được tìm thấy\n              ")])])],2)],1)],1)])],1),a("v-dialog",{attrs:{persistent:"","max-width":"600px"},model:{value:t.dialogChiTietCauHoi,callback:function(e){t.dialogChiTietCauHoi=e},expression:"dialogChiTietCauHoi"}},[a("v-card",[a("v-card-title",{attrs:{"pa-1":""}},[a("v-layout",{attrs:{wrap:"","align-center":""}},[a("v-flex",{attrs:{xs6:""}},[a("span",{staticClass:"headline"},[t._v("Chi tiết câu hỏi")])]),a("v-flex",{staticClass:"text-right",attrs:{xs6:""}},[a("v-btn",{attrs:{color:"#115ebe",fab:"",small:"",dark:""},on:{click:function(e){t.dialogChiTietCauHoi=!1}}},[a("v-icon",[t._v("exit_to_app")])],1)],1)],1)],1),a("v-card-text",[a("v-container",{attrs:{"grid-list-md":""}},[a("v-layout",{attrs:{wrap:""}},[a("v-flex",{attrs:{xs12:"",sm6:"",md4:""}},[a("v-text-field",{attrs:{label:"Mã",readonly:""},model:{value:t.chiTietCauHoi.MALINHVUC,callback:function(e){t.$set(t.chiTietCauHoi,"MALINHVUC",e)},expression:"chiTietCauHoi.MALINHVUC"}})],1),a("v-flex",{attrs:{xs12:"",sm6:"",md4:""}},[a("v-text-field",{attrs:{label:"Mã đơn vị",readonly:""},model:{value:t.chiTietCauHoi.MADONVI,callback:function(e){t.$set(t.chiTietCauHoi,"MADONVI",e)},expression:"chiTietCauHoi.MADONVI"}})],1),a("v-flex",{attrs:{xs12:"",sm6:"",md4:""}},[a("v-text-field",{attrs:{label:"Tên đơn vị",readonly:""},model:{value:t.chiTietCauHoi.TENDONVI,callback:function(e){t.$set(t.chiTietCauHoi,"TENDONVI",e)},expression:"chiTietCauHoi.TENDONVI"}})],1),a("v-flex",{attrs:{xs12:""}},[a("v-textarea",{attrs:{name:"input-4-1",label:"Nội dung:",readonly:""},model:{value:t.chiTietCauHoi.NOIDUNG,callback:function(e){t.$set(t.chiTietCauHoi,"NOIDUNG",e)},expression:"chiTietCauHoi.NOIDUNG"}})],1),a("v-flex",{attrs:{xs12:""}},[a("v-textarea",{attrs:{name:"input-4-1",label:"Nội dung trả lời:",readonly:""},model:{value:t.chiTietCauHoi.NOIDUNGTRALOI,callback:function(e){t.$set(t.chiTietCauHoi,"NOIDUNGTRALOI",e)},expression:"chiTietCauHoi.NOIDUNGTRALOI"}})],1)],1)],1)],1)],1)],1),a("v-snackbar",{attrs:{bottom:!1,left:!1,"multi-line":!1,right:!0,timeout:2e3,top:!0,vertical:!1,color:"success"},model:{value:t.snackbarsuccess,callback:function(e){t.snackbarsuccess=e},expression:"snackbarsuccess"}},[t._v("\n    Yêu cầu thực hiện thành công\n    "),a("v-btn",{attrs:{icon:""},on:{click:function(e){t.snackbarsuccess=!1}}},[a("v-icon",[t._v("clear")])],1)],1),a("v-snackbar",{attrs:{bottom:!1,left:!1,"multi-line":!1,right:!0,timeout:2e3,top:!0,vertical:!1,color:"#EF5350"},model:{value:t.snackbarerror,callback:function(e){t.snackbarerror=e},expression:"snackbarerror"}},[t._v("\n    Yêu cầu thực hiện thất bại\n    "),a("v-btn",{attrs:{icon:""},on:{click:function(e){t.snackbarerror=!1}}},[a("v-icon",[t._v("clear")])],1)],1)],1)},cn=[];n["default"].use(N.a);var ln={props:["index"],components:{"tiny-pagination":bt},data:function(){return{snackbarsuccess:!1,snackbarerror:!1,breadCrumbsitems:[{text:"Bảng dữ liệu",disabled:!1},{text:"",disabled:!1}],nameDVCQGModel:"",listMapping:[],listMappingView:[],dialogMapping:!1,dialogChiTietCauHoi:!1,loadingSyncSharingqa:!1,dialog_createDossier:!1,dialogVerifycation:!1,dialogLogin:!1,valid:!1,userName:"",passWord:"",loadingSync:!1,loadingMapping:!1,serviceInfoList:[],listCauHoi:[],listCauHoiView:[],totalThuTuc:0,thutucPage:1,pageMapping:1,govAgencyList:[],govAgencySelected:"",govAgencyThucHienSelected:{},domainList:[],domainListCurrent:[],domainSelected:{},levelSelected:{},serviceNameKey:"",serviceDetail:"",dialogGuide:!1,loading:!0,headersCoQuan:[{text:"Mã cơ quan",align:"center",sortable:!1},{text:"Mã DVCQG",align:"center",sortable:!1}],listTrangThai:[{text:"Đã đồng bộ",value:1},{text:"Chưa đồng bộ",value:2}],trangThaiSelected:"",listCoQuan:[],headersCauHoi:[{text:"Câu hỏi",align:"center",sortable:!1},{text:"Trạng thái",align:"center",sortable:!1},{text:"Thao tác",align:"center",sortable:!1}],listLoaiHoiDap:[{text:"Danh sách câu hỏi được biên soạn bởi Bộ, cơ quan",value:"LayDanhSachHoiDapBoCoQuan"},{text:"Danh sách câu hỏi được gửi bởi công dân, doanh nghiệp",value:"LayDanhSachHoiDapGuiTuDVCQG"}],loaiHoiDapySelected:"",isLogin:!1,verificationApplicantCreateDossier:!1,serviceSelected:"",hasCoQuanThucHien:!1,configUrl:"",syncing:!1,mappingIdArray:{},rowsPerPageItems:[10,20,30,40],pagination:{rowsPerPage:20},chiTietCauHoi:{},coQuanSelect:{}}},computed:{},created:function(){var t=this;t.$nextTick((function(){var e=t.$router.history.current,a=e.query,n=e.query;t.loaiHoiDapySelected=a.hasOwnProperty("service")?a.service:"LayDanhSachHoiDapBoCoQuan";var i="?";for(var r in n["service"]=a.hasOwnProperty("service")?a.service:"LayDanhSachHoiDapBoCoQuan",n)""!==n[r]&&"undefined"!==n[r]&&void 0!==n[r]&&null!==n[r]&&(i+=r+"="+n[r]+"&");t.$router.push({path:e.path+i,query:{renew:Math.floor(100*Math.random())+1}})}))},watch:{$route:function(t,e){var a=this;t.params,t.query;a.doLoadingCauHoi()},nameDVCQGModel:function(t){var e=this;if(e.pageMapping=1,e.loadingMapping=!0,t){var a=t.toLowerCase();e.listMappingView=e.listMapping.filter((function(t){if(t.itemNameDVCQG.toLowerCase().search(a)>=0||t.itemNameDVCQG.search(a)>=0)return t})).slice(0,10),e.loadingMapping=!1}else e.listMappingView=e.listMapping.slice(0,10),e.loadingMapping=!1},trangThaiSelected:function(t){var e=this;e.listCauHoiView=t?1===t?e.listCauHoi.filter((function(t){return!0===t.SYNC})):e.listCauHoi.filter((function(t){return!1===t.SYNC})):e.listCauHoi}},methods:{filterServiceName:function(){var t=this;setTimeout((function(){var e=t.$router.history.current,a=e.query,n="?";for(var i in a["page"]=1,a["agency"]="",a["domain"]="",a["keyword"]=t.serviceNameKey,a)""!==a[i]&&"undefined"!==a[i]&&void 0!==a[i]&&null!==a[i]&&(n+=i+"="+a[i]+"&");t.$router.push({path:e.path+n,query:{renew:Math.floor(100*Math.random())+1}})}),100)},clearKeyword:function(){var t=this;t.serviceNameKey="",t.filterServiceName()},changeAdministration:function(){var t=this;setTimeout((function(){var e=t.$router.history.current,a=e.query,n="?";for(var i in a["page"]=1,a["agency"]=t.govAgencySelected,a["domain"]="",a["keyword"]="",a)""!==a[i]&&"undefined"!==a[i]&&void 0!==a[i]&&null!==a[i]&&(n+=i+"="+a[i]+"&");t.$router.push({path:e.path+n,query:{renew:Math.floor(100*Math.random())+1}})}),100)},changeDomain:function(){var t=this;setTimeout((function(){var e=t.$router.history.current,a=e.query,n="?";for(var i in a["page"]=1,a["domain"]=t.domainSelected,a["keyword"]="",t.trangThaiSelected="",a)""!==a[i]&&"undefined"!==a[i]&&void 0!==a[i]&&null!==a[i]&&(n+=i+"="+a[i]+"&");t.$router.push({path:e.path+n,query:{renew:Math.floor(100*Math.random())+1}})}),100)},changeLoaiHoiDap:function(){var t=this;setTimeout((function(){var e=t.$router.history.current,a=e.query,n="?";for(var i in a["page"]=1,a["service"]=t.loaiHoiDapySelected,a["keyword"]="",a)""!==a[i]&&"undefined"!==a[i]&&void 0!==a[i]&&null!==a[i]&&(n+=i+"="+a[i]+"&");t.$router.push({path:e.path+n,query:{renew:Math.floor(100*Math.random())+1}})}),100)},doLoadingAgency:function(){var t=this;t.$router.history.current.query;t.listCoQuan=[],t.loading=!0;var e={service:"LayDanhMucCoQuan"};t.$store.dispatch("getServiceAgency",e).then((function(e){t.loading=!1,e.data?t.listCoQuan=e.data:t.listCoQuan=[]})).catch((function(e){t.loading=!1,t.listCoQuan=[]}))},doLoadingCauHoi:function(){var t=this,e=t.$router.history.current.query;t.listCauHoi=[],t.listCauHoiView=[],t.loading=!0;var a=null;a={service:e.hasOwnProperty("service")?e.service:""},t.$store.dispatch("getSharingqa",a).then((function(e){t.loading=!1,e.result?(t.listCauHoi=e.result,t.trangThaiSelected?1===t.trangThaiSelected?t.listCauHoiView=t.listCauHoi.filter((function(t){return!0===t.SYNC})):t.listCauHoiView=t.listCauHoi.filter((function(t){return!1===t.SYNC})):t.listCauHoiView=t.listCauHoi):(t.listCauHoi=[],t.listCauHoiView=t.listCauHoi)})).catch((function(e){t.loading=!1,t.listCauHoi=[],t.listCauHoiView=t.listCauHoi}))},mappingAgency:function(t,e,a,n){for(var i=this,r=!1,o="",s={itemCode:t.itemCode,itemCodeDVCQG:a.itemCodeDVCQG},c=0;c<i.listCoQuan[e]["similarity"].length;c++)if(String(c)!==String(n)&&i.listCoQuan[e]["similarity"][c]["mapped"]){i.listCoQuan[e]["similarity"][c]["mapped"]=!1,o=i.listCoQuan[e]["similarity"][c],r=!0;break}if(r){o.dictItemMappingId;i.$store.dispatch("mappingServiceAgency",s).then((function(t){t?i.snackbarsuccess=!0:i.snackbarerror=!0,i.loadingSync=!1})).catch((function(){i.snackbarerror=!0,i.loadingSync=!1}))}else i.$store.dispatch("mappingServiceAgency",s).then((function(t){t?i.snackbarsuccess=!0:i.snackbarerror=!0,i.loadingSync=!1})).catch((function(){i.snackbarerror=!0,i.loadingSync=!1}))},doActionMappingAgency:function(t,e,a,n){var i=this;setTimeout((function(){a["mapped"]?i.mappingAgency(t,e,a,n):i.removeMappingAgency(t,e,a,n),i.loadingSync=!0}),300)},syncSharingqa:function(t){var e=this;e.loadingSyncSharingqa=!0,t=t||{},e.$store.dispatch("syncSharingqa",t).then((function(a){if(a.data.length){e.snackbarsuccess=!0,e.loadingSyncSharingqa=!1;for(var n=0;n<e.listCauHoi.length;n++)if(e.listCauHoi[n].HOIDAPID===t.HOIDAPID){e.listCauHoi[n].SYNC=!0;break}for(var i=0;i<e.listCauHoiView.length;i++)if(e.listCauHoiView[i].HOIDAPID===t.HOIDAPID){e.listCauHoiView[i].SYNC=!0;break}}else e.loadingSyncSharingqa=!1,e.snackbarerror=!0})).catch((function(){e.loadingSyncSharingqa=!1,e.snackbarerror=!0}))},removeMappingAgency:function(t,e,a,n){var i=this,r={dictItemMappingId:a.dictItemMappingId};i.$store.dispatch("removeMappingServiceAgency",r).then((function(t){i.snackbarsuccess=!0,i.loadingSync=!1})).catch((function(){i.snackbarerror=!0,i.loadingSync=!1}))},syncAll:function(){},paggingData:function(t){var e=this,a=e.$router.history.current,n=a.query,i="?";for(var r in n["page"]="",n)""!==n[r]&&"undefined"!==n[r]&&void 0!==n[r]&&null!==n[r]&&"null"!==n[r]&&(i+=r+"="+n[r]+"&");i+="page="+t.page,e.$router.push({path:a.path+i})},paggingDataMapping:function(t){var e=this,a=10*t.page-10,n=10*t.page;e.listMappingView=e.listMapping.slice(a,n)},getColor:function(t){return 2===t?"green":3===t?"orange darken-1":4===t?"red":void 0},viewDetailCauHoi:function(t){var e=this;e.chiTietCauHoi=t,e.dialogChiTietCauHoi=!0},openDialogMapping:function(t){var e=this;e.coQuanSelect=t,e.pageMapping=1,e.nameDVCQGModel=t.itemName,e.dialogMapping=!0},mappingAgencyDVCQG:function(t){var e=this,a={itemCode:e.coQuanSelect.itemCode,itemCodeDVCQG:t.itemCodeDVCQG};e.$store.dispatch("mappingServiceAgency",a).then((function(a){if(a){e.dialogMapping=!1;for(var n=0;n<e.listCoQuan.length;n++)if(e.listCoQuan[n].itemCode===e.coQuanSelect.itemCode){e.listCoQuan[n]["similarity"]=[],e.listCoQuan[n]["similarity"].push({itemCodeDVCQG:t.itemCodeDVCQG,itemNameDVCQG:t.itemNameDVCQG,mapped:!0});break}e.snackbarsuccess=!0}else e.snackbarerror=!0;e.loadingSync=!1})).catch((function(){e.snackbarerror=!0,e.loadingSync=!1}))},backToList:function(){window.history.back()}}},dn=ln,un=Object(p["a"])(dn,sn,cn,!1,null,null,null),pn=un.exports,vn=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("v-breadcrumbs",[a("v-icon",{attrs:{slot:"divider"},slot:"divider"},[t._v("chevron_right")]),a("v-breadcrumbs-item"),a("a",{staticStyle:{"text-decoration":"none","font-weight":"bold"},attrs:{href:"javascript:;"}})],1),a("v-card",{staticClass:"px-2 mx-1"},[a("v-toolbar",{attrs:{color:"blue darken-3",dark:"",height:"48"}},[a("v-btn",{attrs:{dark:"",icon:""}},[a("v-icon",[t._v("edit")])],1),a("v-toolbar-title",{staticClass:"ml-0"},[t._v("\n        Đồng bộ thống kê hồ sơ\n      ")]),a("v-spacer"),a("v-btn",{attrs:{dark:"",icon:""},nativeOn:{click:function(e){return t.backToList.apply(null,arguments)}}},[a("v-icon",[t._v("reply")])],1)],1),a("div",{staticClass:"grid-list mt-3"},[a("v-layout",{attrs:{wrap:""}},[a("v-flex",{attrs:{xs12:"",md4:""}},[a("v-autocomplete",{staticClass:"select-border",attrs:{items:t.months,"item-text":"name","item-value":"value",label:"Tháng","hide-selected":!0,box:""},on:{change:function(e){return t.changeDate()}},model:{value:t.monthSelected,callback:function(e){t.monthSelected=e},expression:"monthSelected"}})],1),a("v-flex",{attrs:{xs12:"",md4:""}},[a("v-autocomplete",{staticClass:"select-border",attrs:{items:t.years,label:"Năm","item-text":"name","item-value":"value","hide-selected":!0,box:""},on:{change:function(e){return t.changeDate()}},model:{value:t.yearSelected,callback:function(e){t.yearSelected=e},expression:"yearSelected"}})],1),a("v-flex",{attrs:{xs12:""}},[a("v-layout",{attrs:{wrap:""}},t._l(t.fields,(function(e,n){return e.hiden?t._e():a("v-flex",{key:n,class:e.class},[a("v-text-field",{attrs:{box:"",label:e.label},model:{value:t.dataPOST.data[0][e.value],callback:function(a){t.$set(t.dataPOST.data[0],e.value,a)},expression:"dataPOST.data[0][item.value]"}})],1)})),1)],1),a("v-flex",{staticClass:"text-xs-right",attrs:{xs12:""}},[a("v-btn",{staticClass:"white--text",attrs:{loading:t.loading,disabled:t.loading,color:"blue darken-3"},on:{click:function(e){return t.postSyncStatistics()}}},[t._v("Gửi đi")])],1)],1)],1)],1),a("v-snackbar",{attrs:{bottom:!1,left:!1,"multi-line":!1,right:!0,timeout:2e3,top:!0,vertical:!1,color:"success"},model:{value:t.snackbarsuccess,callback:function(e){t.snackbarsuccess=e},expression:"snackbarsuccess"}},[t._v("\n    Yêu cầu thực hiện thành công\n    "),a("v-btn",{attrs:{icon:""},on:{click:function(e){t.snackbarsuccess=!1}}},[a("v-icon",[t._v("clear")])],1)],1),a("v-snackbar",{attrs:{bottom:!1,left:!1,"multi-line":!1,right:!0,timeout:2e3,top:!0,vertical:!1,color:"#EF5350"},model:{value:t.snackbarerror,callback:function(e){t.snackbarerror=e},expression:"snackbarerror"}},[t._v("\n    Yêu cầu thực hiện thất bại\n    "),a("v-btn",{attrs:{icon:""},on:{click:function(e){t.snackbarerror=!1}}},[a("v-icon",[t._v("clear")])],1)],1)],1)},mn=[];n["default"].use(N.a);var hn={props:["index"],components:{},data:function(){return{snackbarerror:!1,snackbarsuccess:!1,months:[{name:"Tháng 1",value:1},{name:"Tháng 2",value:2},{name:"Tháng 3",value:3},{name:"Tháng 4",value:4},{name:"Tháng 5",value:5},{name:"Tháng 6",value:6},{name:"Tháng 7",value:7},{name:"Tháng 8",value:8},{name:"Tháng 9",value:9},{name:"Tháng 10",value:10},{name:"Tháng 11",value:11},{name:"Tháng 12",value:12}],years:[],monthSelected:(new Date).getMonth()+1,yearSelected:(new Date).getFullYear(),madonvi:"",fields:[{label:"Mã đơn vị",class:"xs12 md4",value:"Madonvi",model:"",hiden:!0},{label:"Tên đơn vị",class:"xs12 md3",value:"TenDonVi",model:""},{label:"Số nhận trong kỳ",class:"xs12 md3",value:"SoNhanTrongKy",model:""},{label:"Số tồn kỳ trước",value:"SoTonKyTruoc",class:"xs12 md3",model:""},{label:"Tổng số xử lý",value:"TongSoXuLy",class:"xs12 md3",model:""},{label:"Tổng đã xử lý",value:"TongDaXuLy",class:"xs12 md4",model:""},{label:"Tổng đã xử lý đúng hạn",value:"TongXuLyDungHan",class:"xs12 md2",model:""},{label:"Phần trăm đã xử lý đúng hạn",value:"PhanTramXuLyDungHan",class:"xs12 md2",model:""},{label:"Tổng đã xử lý trễ hạn",value:"TongXuLyTreHan",class:"xs12 md2",model:""},{label:"Phần trăm đã xử lý trễ hạn",value:"PhanTramXuLyTreHan",class:"xs12 md2",model:""},{label:"Tổng chưa xử lý",value:"TongChuaXuLy",class:"xs12 md4",model:""},{label:"Tổng chưa xử lý trong hạn",value:"TongChuaXuLyTrongHan",class:"xs12 md2",model:""},{label:"Phần trăm chưa xử lý trong hạn",value:"PhanTramChuaXuLyTrongHan",class:"xs12 md2",model:""},{label:"Tổng chưa xử lý quá hạn",value:"TongChuaXuLyTreHan",class:"xs12 md2",model:""},{label:"Phần trăm chưa xử lý quá hạn",value:"PhanTramChuaXuLyTreHan",class:"xs12 md2",model:""},{label:"Ghi chú",value:"GhiChu",class:"xs12",model:""}],listThongke:[],dataPOST:{service:"DongBoThongKeHoSo",madonvi:"000.00.00.G05",data:[{Thang:"7",Nam:"2020",SoNhanTrongKy:"0",SoTonKyTruoc:"0",TongSoXuLy:"0",TongDaXuLy:"0",TongXuLyDungHan:"0",PhanTramXuLyDungHan:"0",TongXuLyTreHan:"0",PhanTramXuLyTreHan:"0",TongChuaXuLy:"0",TongChuaXuLyTrongHan:"0",PhanTramChuaXuLyTrongHan:"0",TongChuaXuLyTreHan:"0",PhanTramChuaXuLyTreHan:"0",GhiChu:"",Madonvi:"000.00.00.G05",TenDonVi:"Bộ Kế hoạch và Đầu tư",LoaiThongKe:"1"}]},loading:!1}},computed:{},created:function(){var t=this,e=(new Date).getFullYear();t.years=[];for(var a=0;a<=2;a++)t.years.push({value:Number(e)-a,name:"Năm "+String(Number(e)-a)});t.$nextTick((function(){var e="DVCQG_INTEGRATION";t.$store.dispatch("getServerconfigs",e).then((function(e){var a=JSON.parse(e.configs);t.fields[0].model=a.madonvi,t.fields[1].model=a.tendonvi,t.dataPOST["madonvi"]=a.madonvi,t.dataPOST.data[0]["Madonvi"]=a.madonvi,t.dataPOST.data[0]["TenDonVi"]=a.tendonvi})).catch((function(){}));var a={domain:"total",agency:"total",month:String(t.monthSelected),year:String(t.yearSelected)};t.$store.dispatch("getStatistics",a).then((function(e){e.data&&e.data.length?(t.dataPOST.data[0]["SoNhanTrongKy"]=String(e.data[0].receivedCount),t.dataPOST.data[0]["SoTonKyTruoc"]=String(e.data[0].remainingCount),t.dataPOST.data[0]["TongSoXuLy"]=String(e.data[0].processCount),t.dataPOST.data[0]["TongDaXuLy"]=String(e.data[0].releaseCount),t.dataPOST.data[0]["TongXuLyDungHan"]=String(e.data[0].betimesCount+e.data[0].ontimeCount),t.dataPOST.data[0]["PhanTramXuLyDungHan"]=String(((e.data[0].betimesCount+e.data[0].ontimeCount)/e.data[0].releaseCount*100).toFixed(2)),t.dataPOST.data[0]["TongXuLyTreHan"]=String(e.data[0].overtimeCount),t.dataPOST.data[0]["PhanTramXuLyTreHan"]=String((e.data[0].overtimeCount/e.data[0].releaseCount*100).toFixed(2)),t.dataPOST.data[0]["TongChuaXuLy"]=String(e.data[0].processingCount),t.dataPOST.data[0]["TongChuaXuLyTrongHan"]=String(e.data[0].undueCount),t.dataPOST.data[0]["PhanTramChuaXuLyTrongHan"]=String((e.data[0].undueCount/e.data[0].processingCount*100).toFixed(2)),t.dataPOST.data[0]["TongChuaXuLyTreHan"]=String(e.data[0].overdueCount),t.dataPOST.data[0]["PhanTramChuaXuLyTreHan"]=String((e.data[0].overdueCount/e.data[0].processingCount*100).toFixed(2))):(t.dataPOST.data[0]["SoNhanTrongKy"]="0",t.dataPOST.data[0]["SoTonKyTruoc"]="0",t.dataPOST.data[0]["TongSoXuLy"]="0",t.dataPOST.data[0]["TongDaXuLy"]="0",t.dataPOST.data[0]["TongXuLyDungHan"]="0",t.dataPOST.data[0]["PhanTramXuLyDungHan"]="0",t.dataPOST.data[0]["TongXuLyTreHan"]="0",t.dataPOST.data[0]["PhanTramXuLyTreHan"]="0",t.dataPOST.data[0]["TongChuaXuLy"]="0",t.dataPOST.data[0]["TongChuaXuLyTrongHan"]="0",t.dataPOST.data[0]["PhanTramChuaXuLyTrongHan"]="0",t.dataPOST.data[0]["TongChuaXuLyTreHan"]="0",t.dataPOST.data[0]["PhanTramChuaXuLyTreHan"]="0")})).catch((function(){}))}))},watch:{},methods:{changeDate:function(){var t=this;t.dataPOST.data[0]["Thang"]=String(t.monthSelected),t.dataPOST.data[0]["Nam"]=String(t.yearSelected);var e={domain:"total",agency:"total",month:t.monthSelected,year:t.yearSelected};t.$store.dispatch("getStatistics",e).then((function(e){e.data&&e.data.length?(t.dataPOST.data[0]["SoNhanTrongKy"]=String(e.data[0].receivedCount),t.dataPOST.data[0]["SoTonKyTruoc"]=String(e.data[0].remainingCount),t.dataPOST.data[0]["TongSoXuLy"]=String(e.data[0].processCount),t.dataPOST.data[0]["TongDaXuLy"]=String(e.data[0].releaseCount),t.dataPOST.data[0]["TongXuLyDungHan"]=String(e.data[0].betimesCount+e.data[0].ontimeCount),t.dataPOST.data[0]["PhanTramXuLyDungHan"]=String(((e.data[0].betimesCount+e.data[0].ontimeCount)/e.data[0].releaseCount*100).toFixed(2)),t.dataPOST.data[0]["TongXuLyTreHan"]=String(e.data[0].overtimeCount),t.dataPOST.data[0]["PhanTramXuLyTreHan"]=String((e.data[0].overtimeCount/e.data[0].releaseCount*100).toFixed(2)),t.dataPOST.data[0]["TongChuaXuLy"]=String(e.data[0].processingCount),t.dataPOST.data[0]["TongChuaXuLyTrongHan"]=String(e.data[0].undueCount),t.dataPOST.data[0]["PhanTramChuaXuLyTrongHan"]=String((e.data[0].undueCount/e.data[0].processingCount*100).toFixed(2)),t.dataPOST.data[0]["TongChuaXuLyTreHan"]=String(e.data[0].overdueCount),t.dataPOST.data[0]["PhanTramChuaXuLyTreHan"]=String((e.data[0].overdueCount/e.data[0].processingCount*100).toFixed(2))):(t.dataPOST.data[0]["SoNhanTrongKy"]="0",t.dataPOST.data[0]["SoTonKyTruoc"]="0",t.dataPOST.data[0]["TongSoXuLy"]="0",t.dataPOST.data[0]["TongDaXuLy"]="0",t.dataPOST.data[0]["TongXuLyDungHan"]="0",t.dataPOST.data[0]["PhanTramXuLyDungHan"]="0",t.dataPOST.data[0]["TongXuLyTreHan"]="0",t.dataPOST.data[0]["PhanTramXuLyTreHan"]="0",t.dataPOST.data[0]["TongChuaXuLy"]="0",t.dataPOST.data[0]["TongChuaXuLyTrongHan"]="0",t.dataPOST.data[0]["PhanTramChuaXuLyTrongHan"]="0",t.dataPOST.data[0]["TongChuaXuLyTreHan"]="0",t.dataPOST.data[0]["PhanTramChuaXuLyTreHan"]="0")})).catch((function(){}))},postSyncStatistics:function(){var t=this;t.loading=!0,t.dataPOST.data[0]["Thang"]=String(t.monthSelected),t.dataPOST.data[0]["Nam"]=String(t.yearSelected),t.$store.dispatch("postSyncStatistics",t.dataPOST).then((function(e){t.snackbarsuccess=!0,t.loading=!1})).catch((function(){t.loading=!1}))}}},gn=hn,fn=Object(p["a"])(gn,vn,mn,!1,null,null,null),bn=fn.exports,xn=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("v-breadcrumbs",[a("v-icon",{attrs:{slot:"divider"},slot:"divider"},[t._v("chevron_right")]),a("v-breadcrumbs-item"),a("a",{staticStyle:{"text-decoration":"none","font-weight":"bold"},attrs:{href:"javascript:;"}})],1),a("v-card",{staticClass:"px-2 mx-1"},[a("v-toolbar",{attrs:{color:"blue darken-3",dark:"",height:"48"}},[a("v-btn",{attrs:{dark:"",icon:""}},[a("v-icon",[t._v("edit")])],1),a("v-toolbar-title",{staticClass:"ml-0"},[t._v("\n        Nhật ký phiên bản\n      ")]),a("v-spacer"),a("v-btn",{attrs:{dark:"",icon:""},nativeOn:{click:function(e){return t.backToList.apply(null,arguments)}}},[a("v-icon",[t._v("reply")])],1)],1),a("div",{staticClass:"grid-list mt-3"},[a("v-layout",{attrs:{wrap:""}},[a("v-flex",{attrs:{xs12:"",md3:""}},[a("v-menu",{ref:"menu1",attrs:{"close-on-content-click":!1,"nudge-right":40,lazy:"",transition:"scale-transition","offset-y":"","full-width":"","max-width":"290px","min-width":"290px"},model:{value:t.menu1,callback:function(e){t.menu1=e},expression:"menu1"}},[a("v-text-field",{attrs:{slot:"activator",label:"Từ ngày","persistent-hint":"","append-icon":"event",box:""},on:{blur:function(e){t.date=t.parseDate(t.createDateStartFomarted)}},slot:"activator",model:{value:t.createDateStartFomarted,callback:function(e){t.createDateStartFomarted=e},expression:"createDateStartFomarted"}}),a("v-date-picker",{attrs:{"no-title":"",locale:"vi"},on:{input:function(e){t.menu1=!1}},model:{value:t.createDateStart,callback:function(e){t.createDateStart=e},expression:"createDateStart"}})],1)],1),a("v-flex",{attrs:{xs12:"",md3:""}},[a("v-menu",{ref:"menu2",attrs:{"close-on-content-click":!1,"nudge-right":40,lazy:"",transition:"scale-transition","offset-y":"","full-width":"","max-width":"290px","min-width":"290px"},model:{value:t.menu2,callback:function(e){t.menu2=e},expression:"menu2"}},[a("v-text-field",{attrs:{slot:"activator",label:"Đến ngày","persistent-hint":"","append-icon":"event",box:""},on:{blur:function(e){t.date=t.parseDate(t.createDateEndFomarted)}},slot:"activator",model:{value:t.createDateEndFomarted,callback:function(e){t.createDateEndFomarted=e},expression:"createDateEndFomarted"}}),a("v-date-picker",{attrs:{"no-title":"",locale:"vi"},on:{input:function(e){t.menu2=!1}},model:{value:t.createDateEnd,callback:function(e){t.createDateEnd=e},expression:"createDateEnd"}})],1)],1),a("v-flex",{attrs:{xs12:"",md3:""}},[a("v-text-field",{attrs:{label:"Người thao tác",box:""},model:{value:t.actionUser,callback:function(e){t.actionUser=e},expression:"actionUser"}})],1),a("v-flex",{staticClass:"text-xs-right",attrs:{xs12:"",md3:""}},[a("v-btn",{staticClass:"white--text",attrs:{color:"blue darken-3"},on:{click:function(e){return t.search()}}},[t._v("Tìm kiếm")]),a("v-btn",{staticClass:"white--text",attrs:{color:"blue darken-3"},on:{click:function(e){return t.downLoadExcelRevesionLog()}}},[t._v("Xuất Excel")])],1)],1),a("v-layout",{attrs:{wrap:""}},[a("v-flex",{attrs:{xs12:""}},[a("v-data-table",{staticClass:"table-landing table-bordered",attrs:{headers:t.haeders,items:t.revesionLogs,"hide-actions":""},scopedSlots:t._u([{key:"items",fn:function(e){return[a("td",[t._v("\n                     "+t._s(10*parseInt(t.page)-10+e.index+1)+" \n                  ")]),a("td",[t._v("\n                      "+t._s(e.item.actionUser)+"\n                  ")]),a("td",[t._v("\n                      "+t._s(e.item.actionName)+"\n                  ")]),a("td",[t._v("\n                      "+t._s(e.item.createDate.substr(0,10))+"\n                  ")]),a("td",[t._v("\n                      "+t._s(e.item.actionNote)+"\n                  ")])]}}])},[a("template",{slot:"no-data"},[a("div",{staticClass:"text-xs-center mt-2"},[t._v("\n                      Không có dữ liệu\n                  ")])])],2)],1),a("v-flex",{attrs:{xs12:""}},[a("div",{staticClass:"text-xs-right layout wrap",staticStyle:{position:"relative"}},[a("div",{staticClass:"flex pagging-table"},[a("tiny-pagination",{attrs:{total:t.total,page:t.page,"custom-class":"custom-tiny-class"},on:{"tiny:change-page":t.paggingData}})],1)])])],1)],1)],1)],1)},yn=[];function Cn(t,e){return wn(t)||Dn(t,e)||Sn(t,e)||_n()}function _n(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function Sn(t,e){if(t){if("string"===typeof t)return kn(t,e);var a=Object.prototype.toString.call(t).slice(8,-1);return"Object"===a&&t.constructor&&(a=t.constructor.name),"Map"===a||"Set"===a?Array.from(t):"Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a)?kn(t,e):void 0}}function kn(t,e){(null==e||e>t.length)&&(e=t.length);for(var a=0,n=new Array(e);a<e;a++)n[a]=t[a];return n}function Dn(t,e){var a=null==t?null:"undefined"!==typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=a){var n,i,r=[],o=!0,s=!1;try{for(a=a.call(t);!(o=(n=a.next()).done);o=!0)if(r.push(n.value),e&&r.length===e)break}catch(c){s=!0,i=c}finally{try{o||null==a["return"]||a["return"]()}finally{if(s)throw i}}return r}}function wn(t){if(Array.isArray(t))return t}n["default"].use(N.a);var Tn={props:["index"],components:{"tiny-pagination":bt},data:function(){return{menu1:!1,menu2:!1,snackbarerror:!1,snackbarsuccess:!1,createDateStartFomarted:"",createDateEndFomarted:"",createDateStart:"",createDateEnd:"",haeders:[{text:"STT",align:"center",sortable:!1},{text:"Người thao tác",align:"center",sortable:!1},{text:"Thao tác",align:"center",sortable:!1},{text:"Ngày tạo",align:"center",sortable:!1},{text:"Ghi chú",align:"center",sortable:!1}],revesionLogs:[],page:1,total:0,actionUser:""}},computed:{},watch:{createDateStart:function(t){this.createDateStartFomarted=this.formatDate(this.createDateStart)},createDateEnd:function(t){this.createDateEndFomarted=this.formatDate(this.createDateEnd)}},created:function(){var t=this;t.$nextTick((function(){t.getRevesionLog()}))},methods:{formatDate:function(t){if(!t)return null;var e=t.split("-"),a=Cn(e,3),n=a[0],i=a[1],r=a[2];return"".concat(r,"/").concat(i,"/").concat(n)},parseDate:function(t){if(!t)return null;var e=t.split("/"),a=Cn(e,3),n=a[0],i=a[1],r=a[2];return"".concat(r,"-").concat(n.padStart(2,"0"),"-").concat(i.padStart(2,"0"))},search:function(){var t=this;t.page=1,t.getRevesionLog()},getRevesionLog:function(){var t=this,e={start:10*t.page-10,end:10*t.page,order:!0,createDateStart:t.createDateStartFomarted,createDateEnd:t.createDateEndFomarted,actionUser:t.actionUser};t.revesionLogs=[],t.$store.dispatch("getRevesionLog",e).then((function(e){t.revesionLogs=e.data,t.total=e.total})).catch((function(){}))},paggingData:function(t){var e=this;e.page=t.page,e.getRevesionLog()},downLoadExcelRevesionLog:function(){var t=this,e={order:!0,createDateStart:t.createDateStartFomarted,createDateEnd:t.createDateEndFomarted,actionUser:t.actionUser,export:!0};t.$store.dispatch("downLoadExcelRevesionLog",e).then((function(){}))}}},In=Tn,Pn=Object(p["a"])(In,xn,yn,!1,null,null,null),An=Pn.exports,Nn=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("v-card",{staticClass:"px-2 mx-1"},[a("v-toolbar",{attrs:{color:"blue darken-3",dark:"",height:"48"}},[a("v-toolbar-title",{staticClass:"ml-0"},[t._v("\n        Đồng bộ danh mục lĩnh vực\n      ")]),a("v-spacer"),a("v-btn",{attrs:{dark:"",icon:""},nativeOn:{click:function(e){return t.backToList.apply(null,arguments)}}},[a("v-icon",[t._v("reply")])],1)],1),a("div",{staticClass:"grid-list mt-3"},[t.isMobile?t._e():a("div",{staticClass:"list-thu-tuc"},[t.loading?a("content-placeholders",{staticClass:"mt-3"},[a("content-placeholders-text",{attrs:{lines:10}})],1):a("div",{staticClass:"service__info__table"},[a("v-data-table",{staticClass:"table-landing table-bordered",attrs:{headers:t.headersLinhVuc,items:t.listLinhVuc,"rows-per-page-items":t.rowsPerPageItems,pagination:t.pagination},on:{"update:pagination":function(e){t.pagination=e}},scopedSlots:t._u([{key:"items",fn:function(e){return[a("tr",{class:{active:e.index%2==1}},[a("td",{staticClass:"text-xs-left",staticStyle:{"border-right":"0.5px solid #aba6a6"}},[t.loading?a("content-placeholders",[a("content-placeholders-text",{attrs:{lines:1}})],1):a("div",[a("span",{staticClass:"text-bold"},[t._v(t._s(e.item.itemCode))]),t._v(" - "),a("span",[t._v(t._s(e.item.itemName))])])],1),a("td",{staticClass:"text-xs-left"},[t.loading?a("content-placeholders",[a("content-placeholders-text",{attrs:{lines:1}})],1):a("div",[a("v-layout",{attrs:{wrap:"","align-center":""}},[a("v-flex",{attrs:{xs9:""}},t._l(e.item.similarity,(function(n,i){return n.mapped?a("div",{key:i,staticClass:"mb-2",staticStyle:{position:"relative"}},[n.mapped?a("v-tooltip",{staticStyle:{display:"inline-block",width:"25px",position:"absolute",top:"-2px"},attrs:{top:""}},[a("v-checkbox",{attrs:{slot:"activator",primary:"","hide-details":"",color:"#115ebe",disabled:t.loadingSync},on:{change:function(a){return t.doActionMappingDomain(e.item,e.index,n,i)}},slot:"activator",model:{value:n.mapped,callback:function(e){t.$set(n,"mapped",e)},expression:"itemDomain.mapped"}}),n.mapped?a("span",[t._v("Chọn để hủy mapping")]):a("span",[t._v("Chọn để mapping")])],1):t._e(),n.mapped?a("span",{staticClass:"text-bold",style:n.mapped?"margin-left: 50px":"margin-left: 24px"},[t._v(t._s(n.itemCodeDVCQG))]):t._e(),t._v(" - "),n.mapped?a("span",[t._v(t._s(n.itemNameDVCQG))]):t._e()],1):t._e()})),0),a("v-flex",{staticClass:"text-right",attrs:{xs3:""}},[a("v-btn",{attrs:{small:"",outline:"",color:"#115ebe"},on:{click:function(a){return t.openDialogMapping(e.item)}}},[t._v("Chọn")])],1)],1)],1)],1)])]}}],null,!1,3291100590)},[a("template",{slot:"no-data"},[a("div",{staticClass:"text-xs-center mt-2"},[t._v("\n                Không có thủ tục nào được tìm thấy\n              ")])])],2)],1)],1)])],1),a("v-dialog",{attrs:{persistent:"","max-width":"600px"},model:{value:t.dialogMapping,callback:function(e){t.dialogMapping=e},expression:"dialogMapping"}},[a("v-card",{staticStyle:{background:"#fff"}},[a("v-card-title",{attrs:{"pa-1":""}},[a("v-layout",{attrs:{wrap:"","align-center":""}},[a("v-flex",{attrs:{xs6:""}},[a("span",{staticClass:"headline"},[t._v("Chọn để mapping")])]),a("v-flex",{staticClass:"text-right",attrs:{xs6:""}},[a("v-btn",{attrs:{color:"#F44336",fab:"",small:"",dark:""},on:{click:function(e){t.dialogMapping=!1}}},[a("v-icon",[t._v("cancel")])],1)],1)],1)],1),a("v-card-text",[a("v-container",{attrs:{"grid-list-md":""}},[a("v-layout",[a("v-flex",{attrs:{xs12:""}},[a("v-text-field",{attrs:{label:"Tìm kiếm theo tên"},model:{value:t.nameDVCQGModel,callback:function(e){t.nameDVCQGModel=e},expression:"nameDVCQGModel"}})],1)],1),t.listMappingView.length>0?a("div",{staticStyle:{height:"437px"}},[t.loadingMapping?a("content-placeholders",[a("content-placeholders-text",{attrs:{lines:5}})],1):t._l(t.listMappingView,(function(e,n){return a("v-layout",{key:n,staticStyle:{"border-bottom":"0.5px dashed"},attrs:{"align-center":"",wrap:""}},[a("v-flex",{staticClass:"pa-0",attrs:{xs9:""}},[a("span",{staticStyle:{"font-weight":"bold"}},[t._v(t._s(e.itemCodeDVCQG)+"-"+t._s(e.itemNameDVCQG))])]),a("v-flex",{staticClass:"text-right pa-0",attrs:{xs3:""}},[a("v-btn",{staticStyle:{color:"#fff"},attrs:{small:"",color:"#115ebe"},on:{click:function(a){return t.mappingDomainDVCQG(e)}}},[t._v("Chọn")])],1)],1)}))],2):a("div",{staticStyle:{height:"437px"}},[a("v-layout",[a("v-flex",{attrs:{xs12:""}},[a("span",[t._v("Không tìm thấy dữ liệu")])])],1)],1),a("v-layout",[a("v-flex",{attrs:{xs12:""}},[a("div",{staticClass:"text-xs-right layout wrap",staticStyle:{position:"relative"}},[a("div",{staticClass:"flex pagging-table"},[a("tiny-pagination",{attrs:{total:t.total,page:t.pageMapping,"custom-class":"custom-tiny-class"},on:{"tiny:change-page":t.paggingDataMapping}})],1)])])],1)],1)],1)],1)],1),a("v-snackbar",{attrs:{bottom:!1,left:!1,"multi-line":!1,right:!0,timeout:2e3,top:!0,vertical:!1,color:"success"},model:{value:t.snackbarsuccess,callback:function(e){t.snackbarsuccess=e},expression:"snackbarsuccess"}},[t._v("\n    Yêu cầu thực hiện thành công\n    "),a("v-btn",{attrs:{icon:""},on:{click:function(e){t.snackbarsuccess=!1}}},[a("v-icon",[t._v("clear")])],1)],1),a("v-snackbar",{attrs:{bottom:!1,left:!1,"multi-line":!1,right:!0,timeout:2e3,top:!0,vertical:!1,color:"#EF5350"},model:{value:t.snackbarerror,callback:function(e){t.snackbarerror=e},expression:"snackbarerror"}},[t._v("\n    Yêu cầu thực hiện thất bại\n    "),a("v-btn",{attrs:{icon:""},on:{click:function(e){t.snackbarerror=!1}}},[a("v-icon",[t._v("clear")])],1)],1)],1)},Ln=[];n["default"].use(N.a);var On={components:{"tiny-pagination":bt},data:function(){return{snackbarerror:!1,snackbarsuccess:!1,breadCrumbsitems:[{text:"Bảng dữ liệu",disabled:!1},{text:"",disabled:!1}],nameDVCQGModel:"",listMapping:[],listMappingView:[],dialogMapping:!1,dialog_createDossier:!1,dialogVerifycation:!1,dialogLogin:!1,valid:!1,userName:"",passWord:"",loadingSync:!1,loadingMapping:!1,serviceInfoList:[],listLinhVuc:[],totalThuTuc:0,total:0,thutucPage:1,pageMapping:1,govAgencyList:[],govAgencySelected:"",govAgencyThucHienSelected:{},domainList:[],domainListCurrent:[],domainSelected:{},levelSelected:{},serviceNameKey:"",serviceDetail:"",dialogGuide:!1,loading:!0,headers:[{text:"Thủ tục hành chính",align:"center",sortable:!1},{text:"Thủ tục hành chính Dịch vụ công quốc gia",align:"center",sortable:!1}],headersLinhVuc:[{text:"Mã lĩnh vực",align:"center",sortable:!1},{text:"Mã DVCQG",align:"center",sortable:!1}],isLogin:!1,verificationApplicantCreateDossier:!1,serviceSelected:"",hasCoQuanThucHien:!1,configUrl:"",syncing:!1,mappingIdArray:{},rowsPerPageItems:[10,20,30,40],pagination:{rowsPerPage:20},linhVucSelect:{}}},computed:{},created:function(){var t=this;t.$nextTick((function(){var e=t.$router.history.current,a=e.query;t.serviceNameKey=a.hasOwnProperty("keyword")&&a.keyword?a.keyword:"",t.domainSelected=a.hasOwnProperty("domain")?a.domain:"",t.$store.dispatch("getGovAgency").then((function(e){t.govAgencyList=e;var n={agencyCode:""};t.$store.dispatch("getDomain",n).then((function(e){t.domainListCurrent=e,a.hasOwnProperty("agency")||t.govAgencySelected||(t.domainList=e)}))})).catch((function(){})),t.doLoadingServiceDomain(),t.loadingMapping=!0;var n={service:"LayDanhMucLinhVuc"};t.$store.dispatch("getServiceDomainDVCQG",n).then((function(e){t.listMapping=e.data,t.listMappingView=t.listMapping.slice(0,10),t.loadingMapping=!1,t.total=t.listMapping.length})).catch((function(){t.listMapping=[],t.listMappingView=[],t.loadingMapping=!1}))}))},updated:function(){var t=this;t.$nextTick((function(){}))},watch:{$route:function(t,e){var a=this,n=(t.params,t.query);if(n.hasOwnProperty("agency")&&n["agency"]){var i={agencyCode:n["agency"]?n["agency"]:""};a.$store.dispatch("getDomain",i).then((function(t){a.domainListCurrent=t}))}else if(a.domainList&&0!==a.domainList.length)a.domainListCurrent=a.domainList;else{var r={agencyCode:""};a.$store.dispatch("getDomain",r).then((function(t){a.domainList=t,a.domainListCurrent=a.domainList}))}a.govAgencySelected=a.domainSelected=a.serviceNameKey="",a.govAgencySelected=n.hasOwnProperty("agency")&&n.agency?n.agency:"",a.domainSelected=n.hasOwnProperty("domain")?n.domain:"",a.serviceNameKey=n.hasOwnProperty("keyword")?n.keyword:"",a.doLoadingServiceDomain()},nameDVCQGModel:function(t){var e=this;if(e.pageMapping=1,t){var a=t.toLowerCase(),n=e.listMapping.filter((function(e){if(e.itemNameDVCQG.toLowerCase().search(a)>=0||e.itemNameDVCQG.search(a)>=0||e.itemNameDVCQG===t)return e}));e.listMappingView=n.slice(0,10),e.total=n.length}else e.listMappingView=e.listMapping.slice(0,10),e.total=e.listMapping.length}},methods:{filterServiceName:function(){var t=this;setTimeout((function(){var e=t.$router.history.current,a=e.query,n="?";for(var i in a["page"]=1,a["agency"]="",a["domain"]="",a["keyword"]=t.serviceNameKey,a)""!==a[i]&&"undefined"!==a[i]&&void 0!==a[i]&&null!==a[i]&&(n+=i+"="+a[i]+"&");t.$router.push({path:e.path+n,query:{renew:Math.floor(100*Math.random())+1}})}),100)},clearKeyword:function(){var t=this;t.serviceNameKey="",t.filterServiceName()},changeAdministration:function(){var t=this;setTimeout((function(){var e=t.$router.history.current,a=e.query,n="?";for(var i in a["page"]=1,a["agency"]=t.govAgencySelected,a["domain"]="",a["keyword"]="",a)""!==a[i]&&"undefined"!==a[i]&&void 0!==a[i]&&null!==a[i]&&(n+=i+"="+a[i]+"&");t.$router.push({path:e.path+n,query:{renew:Math.floor(100*Math.random())+1}})}),100)},changeDomain:function(){var t=this;setTimeout((function(){var e=t.$router.history.current,a=e.query,n="?";for(var i in a["page"]=1,a["domain"]=t.domainSelected,a["keyword"]="",a)""!==a[i]&&"undefined"!==a[i]&&void 0!==a[i]&&null!==a[i]&&(n+=i+"="+a[i]+"&");t.$router.push({path:e.path+n,query:{renew:Math.floor(100*Math.random())+1}})}),100)},doLoadingServiceDomain:function(){var t=this;t.$router.history.current.query;t.listLinhVuc=[],t.loading=!0;var e=null;e={service:"LayDanhMucLinhVuc"},t.$store.dispatch("getServiceDomain",e).then((function(e){t.loading=!1,e.data?t.listLinhVuc=e.data:t.listLinhVuc=[]})).catch((function(e){t.loading=!1,t.listLinhVuc=[]}))},doActionMappingDomain:function(t,e,a,n){var i=this;setTimeout((function(){a["mapped"]?i.mappingDomain(t,e,a,n):i.removeServiceDomain(t,e,a,n),i.loadingSync=!0}),300)},mappingDomain:function(t,e,a,n){for(var i=this,r=!1,o="",s={itemCode:t.itemCode,itemCodeDVCQG:a.itemCodeDVCQG},c=0;c<i.listLinhVuc[e]["similarity"].length;c++)if(String(c)!==String(n)&&i.listLinhVuc[e]["similarity"][c]["mapped"]){i.listLinhVuc[e]["similarity"][c]["mapped"]=!1,o=i.listLinhVuc[e]["similarity"][c],r=!0;break}if(r){o.dictItemMappingId;i.$store.dispatch("mappingServiceDomain",s).then((function(t){t?i.snackbarsuccess=!0:i.snackbarerror=!0,i.loadingSync=!1})).catch((function(){i.snackbarsuccess=!0,i.loadingSync=!1}))}else i.$store.dispatch("mappingServiceDomain",s).then((function(t){t?i.snackbarsuccess=!0:i.snackbarerror=!0,i.loadingSync=!1})).catch((function(){i.snackbarerror=!0,i.loadingSync=!1}))},removeServiceDomain:function(t,e,a,n){var i=this,r={dictItemMappingId:a.dictItemMappingId};i.$store.dispatch("removeMappingServiceDomain",r).then((function(t){i.snackbarsuccess=!0,i.loadingSync=!1})).catch((function(){i.snackbarerror=!0,i.loadingSync=!1}))},syncServiceinfo:function(t,e,a,n){var i=this;i.loadingSync=!0;var r={serviceCode:t.serviceCode};i.$store.dispatch("syncServiceinfo",r).then((function(t){i.snackbarsuccess=!0,i.loadingSync=!1})).catch((function(){i.snackbarerror=!0,i.loadingSync=!1}))},syncAll:function(){},paggingData:function(t){var e=this,a=e.$router.history.current,n=a.query,i="?";for(var r in n["page"]="",n)""!==n[r]&&"undefined"!==n[r]&&void 0!==n[r]&&null!==n[r]&&"null"!==n[r]&&(i+=r+"="+n[r]+"&");i+="page="+t.page,e.$router.push({path:a.path+i})},paggingDataMapping:function(t){var e=this,a=10*t.page-10,n=10*t.page;if(e.nameDVCQGModel){var i=e.nameDVCQGModel.toLowerCase();e.listMappingView=e.listMapping.filter((function(t){if(t.itemNameDVCQG.toLowerCase().search(i)>=0||t.itemNameDVCQG.search(i)>=0||t.itemNameDVCQG===e.nameDVCQGModel)return t})).slice(a,n)}else e.listMappingView=e.listMapping.slice(a,n)},getColor:function(t){return 2===t?"green":3===t?"orange darken-1":4===t?"red":void 0},openDialogMapping:function(t){var e=this;e.linhVucSelect=t,e.nameDVCQGModel=t.itemName,e.pageMapping=1,e.dialogMapping=!0},mappingDomainDVCQG:function(t){var e=this,a={itemCode:e.linhVucSelect.itemCode,itemCodeDVCQG:t.itemCodeDVCQG};e.$store.dispatch("mappingServiceDomain",a).then((function(a){if(a){e.dialogMapping=!1;for(var n=0;n<e.listLinhVuc.length;n++)if(e.listLinhVuc[n].itemCode===e.linhVucSelect.itemCode){e.listLinhVuc[n]["similarity"]=[],e.listLinhVuc[n]["similarity"].push({itemCodeDVCQG:t.itemCodeDVCQG,itemNameDVCQG:t.itemNameDVCQG,mapped:!0});break}e.snackbarsuccess=!0}else e.snackbarerror=!0;e.loadingSync=!1})).catch((function(){e.snackbarerror=!0,e.loadingSync=!1}))},backToList:function(){window.history.back()}}},Rn=On,Mn=Object(p["a"])(Rn,Nn,Ln,!1,null,null,null),Fn=Mn.exports,En=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticStyle:{margin:"0 auto"}},[a("v-card",{staticClass:"mb-3 mt-2"},[a("v-toolbar",{attrs:{color:"blue darken-3",dark:"",height:"40"}},[a("v-btn",{attrs:{dark:"",icon:""}},[a("v-icon",[t._v("api")])],1),a("v-toolbar-title",{staticClass:"ml-0"},[t._v("\n        Quản lý danh mục API\n      ")]),a("v-spacer"),a("v-btn",{attrs:{dark:"",icon:""},nativeOn:{click:function(e){return t.backToList.apply(null,arguments)}}},[a("v-icon",[t._v("reply")])],1)],1)],1),a("v-card",{staticClass:"py-0 px-0"},[a("v-btn",{staticClass:"mx-0 my-0",attrs:{color:"blue darken-3",dark:""},on:{click:t.openCreateApi}},[a("v-icon",[t._v("add_circle_outline")]),t._v(" \n          Thêm API\n          ")],1),a("div",[a("v-data-table",{staticClass:"table-landing table-bordered mt-3",staticStyle:{border:"1px solid rgb(222, 222, 222)"},attrs:{headers:t.apiListHeader,items:t.apiList,"hide-actions":"","no-data-text":"Không có dữ liệu"},scopedSlots:t._u([{key:"headers",fn:function(e){return[a("tr",{staticStyle:{height:"42px"}},t._l(e.headers,(function(e){return a("th",{key:e.text,class:e["class"]?e["class"]:"",staticStyle:{"border-right":"1px solid #dedede"},attrs:{width:e["width"]?e["width"]+"px":""}},[a("v-tooltip",{attrs:{bottom:""}},[a("span",{attrs:{slot:"activator"},slot:"activator"},[t._v(t._s(e.text))]),a("span",[t._v(t._s(e.text))])])],1)})),0)]}},{key:"items",fn:function(e){return[a("tr",{class:{active:e.index%2==1},staticStyle:{cursor:"pointer"}},[a("td",{staticClass:"text-xs-center px-2",staticStyle:{width:"50px",height:"36px","border-right":"1px solid #dedede"}},[t.loadingTable?a("content-placeholders",[a("content-placeholders-text",{attrs:{lines:1}})],1):a("div",[a("span",[t._v(t._s(t.apiPage*t.numberPerPage-t.numberPerPage+e.index+1))])])],1),a("td",{staticClass:"text-xs-left px-2",staticStyle:{height:"36px","border-right":"1px solid #dedede"}},[t.loadingTable?a("content-placeholders",[a("content-placeholders-text",{attrs:{lines:1}})],1):a("div",[a("span",[t._v(t._s(e.item.apiCode))])])],1),a("td",{staticClass:"text-xs-left px-2",staticStyle:{height:"36px","border-right":"1px solid #dedede"}},[t.loadingTable?a("content-placeholders",[a("content-placeholders-text",{attrs:{lines:1}})],1):a("div",[a("span",[t._v(t._s(e.item.apiName))])])],1),a("td",{staticClass:"text-xs-left px-2",staticStyle:{height:"36px","border-right":"1px solid #dedede"}},[t.loadingTable?a("content-placeholders",[a("content-placeholders-text",{attrs:{lines:1}})],1):a("div",[a("span",[t._v(t._s(e.item.apiDescription))])])],1),a("td",{staticClass:"text-xs-left px-2",staticStyle:{height:"36px","border-right":"1px solid #dedede"}},[t.loadingTable?a("content-placeholders",[a("content-placeholders-text",{attrs:{lines:1}})],1):a("div",[a("span",[t._v(t._s(1==e.item.apiStatus?"Sử dụng":"Không sử dụng"))])])],1),a("td",{staticClass:"text-xs-center px-2",staticStyle:{height:"36px","border-right":"1px solid #dedede"}},[t.loadingTable?a("content-placeholders",[a("content-placeholders-text",{attrs:{lines:1}})],1):a("div",[a("v-tooltip",{staticClass:"mx-2",attrs:{top:""}},[a("v-btn",{staticClass:"mx-0 my-0",attrs:{slot:"activator",color:"blue",flat:"",icon:""},on:{click:function(a){return t.updateRole(e.item)}},slot:"activator"},[a("v-icon",[t._v("groups")])],1),a("span",[t._v("Quyền truy cập")])],1),a("v-tooltip",{staticClass:"mx-2",attrs:{top:""}},[a("v-btn",{staticClass:"mx-0 my-0",attrs:{slot:"activator",color:"green",flat:"",icon:""},on:{click:function(a){return t.editApi(e.item)}},slot:"activator"},[a("v-icon",[t._v("edit")])],1),a("span",[t._v("Sửa")])],1),a("v-tooltip",{staticClass:"mx-2",attrs:{top:""}},[a("v-btn",{staticClass:"mx-0 my-0",attrs:{slot:"activator",color:"red",flat:"",icon:""},on:{click:function(a){return t.deleteApi(e.item)}},slot:"activator"},[a("v-icon",[t._v("delete")])],1),a("span",[t._v("Xóa")])],1)],1)],1)])]}}])}),a("div",{staticClass:"my-2"},[a("div",{staticClass:"text-xs-right layout wrap",staticStyle:{position:"relative"}},[a("div",{staticClass:"flex pagging-table"},[a("tiny-pagination",{attrs:{total:t.totalApi,page:t.apiPage,numberPerPage:t.numberPerPage,nameRecord:"hồ sơ","custom-class":"custom-tiny-class"},on:{"tiny:change-page":t.changePage}})],1)])])],1)],1),a("v-dialog",{attrs:{"max-width":"900px",persistent:""},model:{value:t.dialogAddApi,callback:function(e){t.dialogAddApi=e},expression:"dialogAddApi"}},[a("v-card",[a("v-toolbar",{attrs:{dark:"",color:"blue"}},[a("v-toolbar-title",{staticClass:"mx-3"},["add"===t.updateApi?a("span",[t._v("Thêm mới API")]):a("span",[t._v("Cập nhật thông tin API")])]),a("v-spacer"),a("v-btn",{attrs:{icon:"",dark:""},nativeOn:{click:function(e){t.dialogAddApi=!1}}},[a("v-icon",[t._v("close")])],1)],1),a("v-card-text",{staticClass:"form_vuejs px-0 pb-0",staticStyle:{"background-color":"#eeeeee !important"}},[a("v-form",{ref:"formUpdateApi",attrs:{"lazy-validation":""}},[a("v-layout",{attrs:{wrap:""}},[a("v-flex",{staticClass:"xs12 px-2"},[a("v-layout",{attrs:{wrap:""}},[a("v-flex",{staticClass:"px-2 my-0",attrs:{xs12:"",md6:""}},[a("label",{attrs:{for:""}},[t._v("Mã API "),a("span",{staticClass:"red--text"},[t._v("*")])]),a("v-text-field",{attrs:{solo:"",rules:[t.rules.required],required:""},model:{value:t.apiCode,callback:function(e){t.apiCode=e},expression:"apiCode"}})],1),a("v-flex",{staticClass:"px-2 my-0",attrs:{xs12:"",md6:""}},[a("label",{attrs:{for:""}},[t._v("Tên API "),a("span",{staticClass:"red--text"},[t._v("*")])]),a("v-text-field",{attrs:{solo:"",rules:[t.rules.required],required:""},model:{value:t.apiName,callback:function(e){t.apiName=e},expression:"apiName"}})],1),a("v-flex",{staticClass:"px-2 my-0",attrs:{xs12:""}},[a("label",{attrs:{for:""}},[t._v("URL truy cập "),a("span",{staticClass:"red--text"},[t._v("*")])]),a("v-text-field",{attrs:{solo:"",rules:[t.rules.required],required:"",readonly:"add"!==t.updateApi,disabled:"add"!==t.updateApi},model:{value:t.apiDescription,callback:function(e){t.apiDescription=e},expression:"apiDescription"}})],1),a("v-flex",{staticClass:"px-2 my-0",attrs:{xs12:"",sm6:""}},[a("label",{attrs:{for:""}},[t._v("ClassName "),a("span",{staticClass:"red--text"},[t._v("*")])]),a("v-text-field",{attrs:{solo:"",rules:[t.rules.required],required:""},model:{value:t.className,callback:function(e){t.className=e},expression:"className"}})],1),a("v-flex",{staticClass:"px-2 my-0",attrs:{xs12:"",sm6:""}},[a("label",{attrs:{for:""}},[t._v("Tình trạng "),a("span",{staticClass:"red--text"},[t._v("*")])]),a("v-autocomplete",{attrs:{items:t.listStatus,"item-text":"name","item-value":"value",clearable:"","hide-no-data":"",rules:[t.rules.required],required:"",solo:""},model:{value:t.apiStatus,callback:function(e){t.apiStatus=e},expression:"apiStatus"}})],1)],1)],1),a("v-flex",{staticClass:"mx-0 py-1 mt-2 px-3",staticStyle:{background:"#dededeb3"},attrs:{xs12:""}},[a("v-btn",{staticClass:"white--text right mr-0",attrs:{small:"",color:"red"},on:{click:function(e){t.dialogAddApi=!1}}},[a("v-icon",[t._v("clear")]),t._v("  Đóng")],1),a("v-btn",{staticClass:"right white--text",attrs:{small:"",color:"blue",loading:t.loading,disabled:t.loading},on:{click:function(e){return t.createApi()}}},["add"!==t.updateApi?a("span",[a("v-icon",[t._v("save")]),t._v("  Cập nhật")],1):a("span",[a("v-icon",[t._v("add")]),t._v("  Thêm API")],1)])],1)],1)],1)],1)],1)],1),a("v-dialog",{attrs:{"max-width":"900px",persistent:""},model:{value:t.dialogAddRole,callback:function(e){t.dialogAddRole=e},expression:"dialogAddRole"}},[a("v-card",[a("v-toolbar",{attrs:{dark:"",color:"blue"}},[a("v-toolbar-title",{staticClass:"mx-3"},[a("span",[t._v("Phân quyền truy cập")])]),a("v-spacer"),a("v-btn",{attrs:{icon:"",dark:""},nativeOn:{click:function(e){t.dialogAddRole=!1}}},[a("v-icon",[t._v("close")])],1)],1),a("v-card-text",{staticClass:"px-0 pb-0"},[a("v-layout",{attrs:{wrap:""}},[a("v-flex",{staticClass:"px-2 my-0",staticStyle:{width:"calc(100% - 150px)"}},[a("v-autocomplete",{attrs:{items:t.roleList,"item-text":"title","item-value":"jobPosId",clearable:"","hide-no-data":"","return-object":"",label:"Quyền truy cập"},scopedSlots:t._u([{key:"selection",fn:function(e){return[a("div",[t._v(t._s(e.item.jobPosCode)+" - "+t._s(e.item.title))])]}},{key:"item",fn:function(e){return[a("div",{staticStyle:{"font-size":"14px !important"}},[t._v(t._s(e.item.jobPosCode)+" - "+t._s(e.item.title))])]}}]),model:{value:t.apiRole,callback:function(e){t.apiRole=e},expression:"apiRole"}})],1),a("v-flex",{staticClass:"px-2 my-0 mt-2",staticStyle:{width:"150px"}},[a("v-btn",{staticClass:"white--text",attrs:{small:"",color:"blue",loading:t.loadingAddRole,disabled:t.loadingAddRole},on:{click:function(e){return t.addApiRole()}}},[a("span",[a("v-icon",[t._v("add")]),t._v("  Thêm quyền")],1)])],1)],1),a("v-layout",{staticClass:"mt-2 pb-4",attrs:{wrap:""}},[t.loadingGetRole?a("v-flex",{staticClass:"text-xs-center mt-5",attrs:{xs12:""}},[a("v-progress-circular",{attrs:{size:100,width:1,color:"primary",indeterminate:""}})],1):a("v-flex",{staticClass:"px-2 my-2",attrs:{xs12:""}},[a("div",{staticClass:"mb-2",staticStyle:{"font-weight":"bold"}},[t._v("\n                          Danh sách quyền truy cập:\n                      ")]),a("v-data-table",{staticClass:"table_vuejs",staticStyle:{border:"1px solid rgb(222, 222, 222)"},attrs:{headers:t.headerListRole,items:t.listRoleApi,"hide-actions":"","no-data-text":"Chưa có quyền truy cập nào"},scopedSlots:t._u([{key:"headers",fn:function(e){return[a("tr",{staticStyle:{height:"42px"}},t._l(e.headers,(function(e){return a("th",{key:e.text,class:e["class"]?e["class"]:"",staticStyle:{"border-right":"1px solid #dedede"},attrs:{width:e["width"]?e["width"]+"px":""}},[a("v-tooltip",{attrs:{bottom:""}},[a("span",{attrs:{slot:"activator"},slot:"activator"},[t._v(t._s(e.text))]),a("span",[t._v(t._s(e.text))])])],1)})),0)]}},{key:"items",fn:function(e){return[a("tr",[a("td",{staticClass:"text-xs-center px-2",staticStyle:{width:"50px",height:"36px","border-right":"1px solid #dedede"}},[a("div",[a("span",[t._v(t._s(e.index+1))])])]),a("td",{staticStyle:{"border-right":"1px solid #dedede"}},[t._v(t._s(e.item.roleCode))]),a("td",{staticStyle:{"border-right":"1px solid #dedede"}},[t._v(t._s(e.item.roleName))]),a("td",{staticClass:"text-xs-center px-2",staticStyle:{"border-right":"1px solid #dedede"}},[a("div",[a("v-tooltip",{staticClass:"mx-2",attrs:{top:""}},[a("v-btn",{staticClass:"mx-0 my-0",attrs:{slot:"activator",color:"red",flat:"",icon:""},on:{click:function(a){return t.deleteRoleApi(e.item)}},slot:"activator"},[a("v-icon",[t._v("delete")])],1),a("span",[t._v("Xóa")])],1)],1)])])]}}])})],1)],1)],1)],1)],1)],1)},$n=[];function qn(t,e){return Qn(t)||Hn(t,e)||Un(t,e)||Vn()}function Vn(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function Un(t,e){if(t){if("string"===typeof t)return Gn(t,e);var a=Object.prototype.toString.call(t).slice(8,-1);return"Object"===a&&t.constructor&&(a=t.constructor.name),"Map"===a||"Set"===a?Array.from(t):"Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a)?Gn(t,e):void 0}}function Gn(t,e){(null==e||e>t.length)&&(e=t.length);for(var a=0,n=new Array(e);a<e;a++)n[a]=t[a];return n}function Hn(t,e){var a=null==t?null:"undefined"!==typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=a){var n,i,r=[],o=!0,s=!1;try{for(a=a.call(t);!(o=(n=a.next()).done);o=!0)if(r.push(n.value),e&&r.length===e)break}catch(c){s=!0,i=c}finally{try{o||null==a["return"]||a["return"]()}finally{if(s)throw i}}return r}}function Qn(t){if(Array.isArray(t))return t}var jn={components:{"tiny-pagination":bt},data:function(){return{dialogAddApi:!1,dialogAddRole:!1,apiSelected:"",apiCode:"",apiName:"",listRoleApi:[],roleList:[],apiRole:"",apiDescription:"",className:"",listStatus:[{name:"Sử dụng",value:1},{name:"Không sử dụng",value:0}],apiStatus:"",updateApi:"add",fromDate:"",toDate:"",loading:!1,loadingTable:!1,loadingGetRole:!1,ladingAddRole:!1,menuDate1:!1,menuDate2:!1,fromReceiveDate:"",fromReceiveDateFormatted:"",toReceiveDate:"",toReceiveDateFormatted:"",apiItems:[],api:"",dossierNo:"",apiList:"",apiPage:1,numberPerPage:10,totalApi:0,options:{mode:"code"},dataRequest:{},dataResponse:{},dialog_dataInfo:!1,rules:{required:function(t){return!!t||"Thông tin bắt buộc"}},apiListHeader:[{text:"STT",align:"center",sortable:!1,width:50},{text:"Mã API",align:"center",sortable:!1},{text:"Tên API",align:"center",sortable:!1},{text:"URL truy cập",align:"center",sortable:!1},{text:"Tình trạng",align:"center",sortable:!1},{text:"Thao tác",align:"center",sortable:!1}],headerListRole:[{text:"STT",align:"center",sortable:!1,width:50},{text:"Mã phân quyền",align:"center",sortable:!1},{text:"Tên",align:"center",sortable:!1},{text:"Thao tác",align:"center",sortable:!1}]}},computed:{},created:function(){var t=this;t.$nextTick((function(){t.getApiRole(),t.getApiList()}))},watch:{},methods:{openCreateApi:function(){var t=this;t.updateApi="add",t.dialogAddApi=!0,t.$refs.formUpdateApi.reset(),t.$refs.formUpdateApi.resetValidation()},getApiList:function(){var t=this;t.loadingTable=!0;var e={headers:{groupId:window.themeDisplay.getScopeGroupId()},params:{start:t.apiPage*t.numberPerPage-t.numberPerPage,end:t.apiPage*t.numberPerPage}};O.a.get("/o/rest/v2/socket/web/apiManagers",e).then((function(e){var a=e.data;t.loadingTable=!1,a["data"]?(t.apiList=Array.isArray(a["data"])?a["data"]:[a["data"]],t.totalApi=a["total"]):(t.apiList=[],t.totalApi=0)})).catch((function(e){t.loadingTable=!1,t.apiList=[],t.totalApi=0}))},getApiRole:function(){var t=this,e={headers:{groupId:window.themeDisplay.getScopeGroupId()}};O.a.get("/o/rest/v2/jobpos",e).then((function(e){var a=e.data;a.hasOwnProperty("data")?t.roleList=Array.isArray(a["data"])?a["data"]:[a["data"]]:t.roleList=[]})).catch((function(t){}))},changePage:function(t){var e=this;e.apiPage=t.page,e.getApiList()},createApi:function(){var t=this;if(t.$refs.formUpdateApi.validate()){var e={headers:{groupId:window.themeDisplay.getScopeGroupId()}},a=new URLSearchParams;a.append("apiCode",t.apiCode),a.append("apiName",t.apiName),a.append("apiStatus",t.apiStatus),a.append("apiDescription",t.apiDescription),a.append("className",t.className),"add"===t.updateApi?O.a.post("/o/rest/v2/socket/web/apiManagers",a,e).then((function(e){N.a.success("Thực hiện thành công"),t.dialogAddApi=!1,t.apiPage=1,t.getApiList()})).catch((function(t){N.a.error("Thêm mới không thành công")})):O.a.put("/o/rest/v2/socket/web/apiManagers/"+t.apiSelected["apiManagerId"],a,e).then((function(e){N.a.success("Thực hiện thành công"),t.dialogAddApi=!1,t.getApiList()})).catch((function(){N.a.error("Cập nhật không thành công")}))}},editApi:function(t){var e=this;e.updateApi="update",e.apiSelected=t,e.apiCode=e.apiSelected.apiCode,e.apiName=e.apiSelected.apiName,e.apiDescription=e.apiSelected.apiDescription,e.apiStatus=e.apiSelected.apiStatus,e.className=e.apiSelected.className,e.dialogAddApi=!0,e.$refs.formUpdateApi.resetValidation()},deleteApi:function(t){var e=this,a={headers:{groupId:window.themeDisplay.getScopeGroupId()}},n=confirm("Bạn có chắc chắn xóa API này");n&&O.a.delete("/o/rest/v2/socket/web/apiManagers/"+t["apiManagerId"],a).then((function(){N.a.success("Thực hiện thành công"),e.getApiList()})).catch((function(t){N.a.error("Xóa API không thành công")}))},updateRole:function(t){var e=this;e.apiSelected=t,e.dialogAddRole=!0,e.getRoleApiList()},getRoleApiList:function(){var t=this,e={headers:{groupId:window.themeDisplay.getScopeGroupId()},params:{apiCode:t.apiSelected["apiCode"]}};t.loadingGetRole=!0,O.a.get("/o/rest/v2/socket/web/apiRoles",e).then((function(e){t.loadingGetRole=!1,t.apiRole="";var a=e.data;a.hasOwnProperty("data")?t.listRoleApi=Array.isArray(a["data"])?a["data"]:[a["data"]]:t.listRoleApi=[]})).catch((function(){t.loadingGetRole=!1}))},addApiRole:function(){var t=this;if(t.apiRole){var e={headers:{groupId:window.themeDisplay.getScopeGroupId()}},a=new URLSearchParams;a.append("apiCode",t.apiSelected.apiCode),a.append("roleCode",t.apiRole.jobPosCode),a.append("roleId",t.apiRole.roleId),a.append("apiRoleStatus",""),t.loadingAddRole=!0,O.a.post("/o/rest/v2/socket/web/apiRoles",a,e).then((function(e){t.loadingAddRole=!1,N.a.success("Thực hiện thành công"),t.getRoleApiList()})).catch((function(){t.loadingAddRole=!1,N.a.error("Thêm mới không thành công")}))}},deleteRoleApi:function(t){var e=this,a={headers:{groupId:window.themeDisplay.getScopeGroupId()}},n=confirm("Bạn có chắc chắn xóa quyền truy cập này");n&&O.a.delete("/o/rest/v2/socket/web/apiRoles/"+t["apiRoleId"],a).then((function(t){N.a.success("Thực hiện thành công"),e.getRoleApiList()})).catch((function(){N.a.error("Xóa API không thành công")}))},parsedate:function(t){var e=t.split("-"),a=qn(e,3),n=a[0],i=a[1],r=a[2];return"".concat(r,"-").concat(i,"-").concat(n)},currentDate:function(){var t=new Date;return"".concat(t.getFullYear(),"-").concat((t.getMonth()+1).toString().padStart(2,"0"),"-").concat(t.getDate().toString().padStart(2,"0"))},changeDate:function(t){var e=this;e.menuDate1=e.menuDate2=!1,"1"===t?e.fromReceiveDateFormatted=e.formatDate(e.fromReceiveDate):"2"===t&&(e.toReceiveDateFormatted=e.formatDate(e.toReceiveDate))},getMinMax:function(t){if(!t)return null;var e=t.split("/"),a=qn(e,3),n=a[0],i=a[1],r=a[2];return"".concat(r,"-").concat(i,"-").concat(n)},parseDate:function(t){if(!t)return"";if(String(t).indexOf("/")>0){var e=t.split("/"),a=qn(e,3),n=a[0],i=a[1],r=a[2];return"".concat(r,"-").concat(i.padStart(2,"0"),"-").concat(n.padStart(2,"0"))}if(String(t).indexOf("-")>0){var o=t.split("-"),s=qn(o,3),c=s[0],l=s[1],d=s[2];return"".concat(d,"-").concat(l.padStart(2,"0"),"-").concat(c.padStart(2,"0"))}var u=new Date(Number(t));return"".concat(u.getFullYear(),"-").concat((u.getMonth()+1).toString().padStart(2,"0"),"-").concat(u.getDate().toString().padStart(2,"0"))},formatDate:function(t){if(!t)return"";var e=t.split("-"),a=qn(e,3),n=a[0],i=a[1],r=a[2];return"".concat(r,"/").concat(i,"/").concat(n)},currentDateFormat:function(t){var e=t?new Date(t):new Date;return"".concat(e.getDate().toString().padStart(2,"0"),"/").concat((e.getMonth()+1).toString().padStart(2,"0"),"/").concat(e.getFullYear()," ").concat(e.getHours().toString().padStart(2,"0"),":").concat(e.getMinutes().toString().padStart(2,"0"))},backToList:function(){window.history.back()}}},Bn=jn,Kn=Object(p["a"])(Bn,En,$n,!1,null,null,null),zn=Kn.exports,Xn=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("v-breadcrumbs",[a("v-icon",{attrs:{slot:"divider"},slot:"divider"},[t._v("chevron_right")]),a("v-breadcrumbs-item"),a("a",{staticStyle:{"text-decoration":"none","font-weight":"bold"},attrs:{href:"javascript:;"}})],1),a("v-card",{staticClass:"px-2 mx-1"},[a("v-toolbar",{attrs:{color:"blue darken-3",dark:"",height:"48"}},[a("v-btn",{attrs:{dark:"",icon:""}},[a("v-icon",[t._v("edit")])],1),a("v-toolbar-title",{staticClass:"ml-0"},[t._v("\n        Số thứ tự, sổ theo dõi\n      ")]),a("v-spacer"),a("v-btn",{attrs:{dark:"",icon:""},nativeOn:{click:function(e){return t.backToList.apply(null,arguments)}}},[a("v-icon",[t._v("reply")])],1)],1),a("div",{staticClass:"grid-list mt-3"},[a("v-layout",{attrs:{wrap:""}},[a("v-flex",{attrs:{xs12:"",md4:""}},[a("v-autocomplete",{staticClass:"select-border",attrs:{items:t.govAgencys,label:"Cơ quan","item-text":"itemName","item-value":"itemCode","hide-selected":!0,box:""},on:{change:function(e){return t.changeGovAgencyCode()}},model:{value:t.govAgencyCodeSelected,callback:function(e){t.govAgencyCodeSelected=e},expression:"govAgencyCodeSelected"}})],1),a("v-flex",{attrs:{xs12:"",md4:""}},[a("v-autocomplete",{staticClass:"select-border",attrs:{items:t.registerBooks,label:"Sổ theo dõi","item-text":"itemName","item-value":"itemCode","hide-selected":!0,box:""},on:{change:function(e){return t.changeRegisterBookCode()}},model:{value:t.registerBookCodeSelectd,callback:function(e){t.registerBookCodeSelectd=e},expression:"registerBookCodeSelectd"}})],1),a("v-flex",{attrs:{xs12:"",md4:""}},[a("v-text-field",{staticClass:"select-border",attrs:{box:""},model:{value:t.counter,callback:function(e){t.counter=e},expression:"counter"}})],1),a("v-flex",{staticClass:"text-xs-right",attrs:{xs12:""}},[a("v-btn",{staticClass:"white--text",attrs:{small:"",color:"blue darken-3"},on:{click:function(e){return t.postCounters()}}},[t._v("Gửi đi")])],1)],1)],1)],1),a("v-snackbar",{attrs:{bottom:!1,left:!1,"multi-line":!1,right:!0,timeout:2e3,top:!0,vertical:!1,color:"success"},model:{value:t.snackbarsuccess,callback:function(e){t.snackbarsuccess=e},expression:"snackbarsuccess"}},[t._v("\n    Yêu cầu thực hiện thành công\n    "),a("v-btn",{attrs:{icon:""},on:{click:function(e){t.snackbarsuccess=!1}}},[a("v-icon",[t._v("clear")])],1)],1),a("v-snackbar",{attrs:{bottom:!1,left:!1,"multi-line":!1,right:!0,timeout:2e3,top:!0,vertical:!1,color:"#EF5350"},model:{value:t.snackbarerror,callback:function(e){t.snackbarerror=e},expression:"snackbarerror"}},[t._v("\n    Yêu cầu thực hiện thất bại\n    "),a("v-btn",{attrs:{icon:""},on:{click:function(e){t.snackbarerror=!1}}},[a("v-icon",[t._v("clear")])],1)],1)],1)},Wn=[];n["default"].use(N.a);var Yn={props:["index"],components:{},data:function(){return{snackbarerror:!1,snackbarsuccess:!1,govAgencys:[],registerBooks:[],govAgencyCodeSelected:"",registerBookCodeSelectd:"",counter:""}},computed:{},created:function(){var t=this;t.$nextTick((function(){t.$store.dispatch("REGISTER_GOVAGENCY").then((function(e){e&&e.length>0?t.govAgencys=e:t.$store.dispatch("getAgencyLists").then((function(e){t.govAgencys=e})).catch((function(){}))})).catch((function(){})),t.$store.dispatch("getRegisterBookList").then((function(e){t.registerBooks=e})).catch((function(){}))}))},watch:{},methods:{changeGovAgencyCode:function(){var t=this;setTimeout((function(){t.getCounters()}),100)},changeRegisterBookCode:function(){var t=this;setTimeout((function(){t.getCounters()}),100)},getCounters:function(){var t=this;if(t.govAgencyCodeSelected&&t.registerBookCodeSelectd){var e={registerBookCode:t.registerBookCodeSelectd,govAgencyCode:t.govAgencyCodeSelected};t.$store.dispatch("getCounters",e).then((function(e){t.counter=e})).catch((function(){}))}},postCounters:function(){var t=this;if(t.govAgencyCodeSelected&&t.registerBookCodeSelectd){var e={registerBookCode:t.registerBookCodeSelectd,govAgencyCode:t.govAgencyCodeSelected,countNum:t.counter};t.$store.dispatch("postCounters",e).then((function(e){t.snackbarsuccess=!0})).catch((function(){}))}}}},Jn=Yn,Zn=Object(p["a"])(Jn,Xn,Wn,!1,null,null,null),ti=Zn.exports,ei=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("v-breadcrumbs",[a("v-icon",{attrs:{slot:"divider"},slot:"divider"},[t._v("chevron_right")]),t._l(t.breadCrumbsitems,(function(e){return a("v-breadcrumbs-item",{key:e.text,attrs:{disabled:e.disabled}},[t._v("\n      "+t._s(e.text)+"\n    ")])}))],2),a("v-card",{staticClass:"px-2 mx-1",staticStyle:{overflow:"hidden"}},[a("v-toolbar",{attrs:{color:"blue darken-3",dark:"",height:"48"}},[a("v-toolbar-title",{staticClass:"ml-2"},[a("v-btn",{staticClass:"mx-0",attrs:{loading:t.importLoading,disabled:t.importLoading,color:"blue darken-3",dark:""},nativeOn:{click:function(e){return t.doImportData()}}},[t._v("\n          Tải lên file dữ liệu thống kê\n          "),a("v-icon",{attrs:{right:"",dark:""}},[t._v("cloud_upload")])],1)],1),a("v-spacer")],1),a("div",{staticStyle:{overflow:"hidden","overflow-x":"auto"}},[a("input",{directives:[{name:"show",rawName:"v-show",value:!1,expression:"false"}],ref:"importData",attrs:{type:"file",name:"importData",accept:t.accept},on:{change:t.onFilePicked}}),t.importMessage?a("v-alert",{attrs:{value:!0,color:"success",icon:"check_circle",outline:""}},[t._v("\n        Cấu hình dữ liệu thống kê thành công\n      ")]):t._e()],1)],1)],1)},ai=[],ni={props:["tableName"],data:function(){return{responseXMLSuccess:"",importMessage:!1,importLoading:!1,showFilter:!1,accept:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet, application/vnd.ms-excel",breadCrumbsitems:[{text:"Import",disabled:!1},{text:"XLS, XLSX",disabled:!1}]}},methods:{doImportData:function(){this.importMessage=!1,this.$refs.importData.click()},onFilePicked:function(t){var e=this;e.importLoading=!0;var a=t.target.files||t.dataTransfer.files;if(a&&a[0]){var n=new FormData;n.append("file",a[0]),O()({method:"post",url:"/o/rest/statistics/import/manual",data:n,config:{headers:{"Content-Type":"multipart/form-data"}}}).then((function(t){e.responseXMLSuccess=t.data,e.importLoading=!1,e.importMessage=!0})).catch((function(t){e.importLoading=!1,e.importMessage=!1}))}else e.importLoading=!1}}},ii=ni,ri=Object(p["a"])(ii,ei,ai,!1,null,null,null),oi=ri.exports,si=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("v-breadcrumbs",[a("v-icon",{attrs:{slot:"divider"},slot:"divider"},[t._v("chevron_right")]),t._l(t.breadCrumbsitems,(function(e){return a("v-breadcrumbs-item",{key:e.text,attrs:{disabled:e.disabled}},[t._v("\n      "+t._s(e.text)+"\n    ")])}))],2),a("v-card",{staticClass:"px-2 mx-1",staticStyle:{overflow:"hidden"}},[a("v-toolbar",{attrs:{color:"blue darken-3",dark:"",height:"48"}},[a("v-toolbar-title",{staticClass:"ml-2"},[a("v-btn",{staticClass:"mx-0",attrs:{loading:t.importLoading,disabled:t.importLoading,color:"blue darken-3",dark:""},nativeOn:{click:function(e){return t.doImportData()}}},[t._v("\n          Upload\n          "),a("v-icon",{attrs:{right:"",dark:""}},[t._v("cloud_upload")])],1)],1),a("v-spacer"),a("v-icon",{attrs:{dark:""}},[t._v("more_vert")]),a("v-btn",{attrs:{dark:"",icon:""}},[a("v-icon",[t._v("refresh")])],1)],1),a("div",{staticStyle:{overflow:"hidden","overflow-x":"auto"}},[a("input",{directives:[{name:"show",rawName:"v-show",value:!1,expression:"false"}],ref:"importData",attrs:{type:"file",name:"importData",accept:t.accept},on:{change:t.onFilePicked}}),t.importMessage?a("v-alert",{attrs:{value:!0,color:"success",icon:"check_circle",outline:""}},[t._v("\n        Gửi yêu cầu Import dữ liệu thành công.\n      ")]):t._e(),t.importMessage?a("v-alert",{attrs:{value:!0,color:"success",outline:""}},[t._v("\n        "+t._s(t.responseXMLSuccess)+"\n      ")]):t._e()],1)],1),a("v-breadcrumbs",[a("v-icon",{attrs:{slot:"divider"},slot:"divider"},[t._v("chevron_right")]),t._l(t.breadCrumbsitems2,(function(e){return a("v-breadcrumbs-item",{key:e.text,attrs:{disabled:e.disabled}},[t._v("\n      "+t._s(e.text)+"\n    ")])}))],2),a("v-card",{staticClass:"px-2 mx-1",staticStyle:{overflow:"hidden"}},[a("v-toolbar",{attrs:{color:"blue darken-3",dark:"",height:"48"}},[a("v-toolbar-title",{staticClass:"ml-2"},[a("v-btn",{staticClass:"mx-0",attrs:{loading:t.importExcelLoading,disabled:t.importExcelLoading,color:"blue darken-3",dark:""},nativeOn:{click:function(e){return t.doImportExcelData()}}},[t._v("\n          Upload\n          "),a("v-icon",{attrs:{right:"",dark:""}},[t._v("cloud_upload")])],1)],1),a("v-spacer"),a("v-icon",{attrs:{dark:""}},[t._v("more_vert")]),a("v-btn",{attrs:{dark:"",icon:""}},[a("v-icon",[t._v("refresh")])],1)],1),a("div",{staticStyle:{overflow:"hidden","overflow-x":"auto"}},[a("input",{directives:[{name:"show",rawName:"v-show",value:!1,expression:"false"}],ref:"importExcelData",attrs:{type:"file",name:"importExcelData"},on:{change:t.onFileExcelPicked}})])],1),a("v-breadcrumbs",[a("v-icon",{attrs:{slot:"divider"},slot:"divider"},[t._v("chevron_right")]),t._l(t.breadCrumbsitems3,(function(e){return a("v-breadcrumbs-item",{key:e.text,attrs:{disabled:e.disabled}},[t._v("\n      "+t._s(e.text)+"\n    ")])}))],2),a("v-card",{staticClass:"px-2 mx-1",staticStyle:{overflow:"hidden"}},[a("v-toolbar",{attrs:{color:"blue darken-3",dark:"",height:"48"}},[a("v-toolbar-title",{staticClass:"ml-2"},[a("v-btn",{staticClass:"mx-0",attrs:{loading:t.importPhongBanLoading,disabled:t.importPhongBanLoading,color:"blue darken-3",dark:""},nativeOn:{click:function(e){return t.doImportPhongBanExcelData()}}},[t._v("\n          Upload\n          "),a("v-icon",{attrs:{right:"",dark:""}},[t._v("cloud_upload")])],1)],1),a("v-spacer"),a("v-icon",{attrs:{dark:""}},[t._v("more_vert")]),a("v-btn",{attrs:{dark:"",icon:""}},[a("v-icon",[t._v("refresh")])],1)],1),a("div",{staticStyle:{overflow:"hidden","overflow-x":"auto"}},[a("input",{directives:[{name:"show",rawName:"v-show",value:!1,expression:"false"}],ref:"importPhongBanData",attrs:{type:"file",name:"importPhongBanData"},on:{change:t.onFilePhongBanPicked}})])],1),a("v-snackbar",{attrs:{bottom:!1,left:!1,"multi-line":!1,right:!0,timeout:2e3,top:!0,vertical:!1,color:"success"},model:{value:t.snackbarsuccess,callback:function(e){t.snackbarsuccess=e},expression:"snackbarsuccess"}},[t._v("\n    Yêu cầu thực hiện thành công\n    "),a("v-btn",{attrs:{icon:""},on:{click:function(e){t.snackbarsuccess=!1}}},[a("v-icon",[t._v("clear")])],1)],1),a("v-snackbar",{attrs:{bottom:!1,left:!1,"multi-line":!1,right:!0,timeout:2e3,top:!0,vertical:!1,color:"#EF5350"},model:{value:t.snackbarerror,callback:function(e){t.snackbarerror=e},expression:"snackbarerror"}},[t._v("\n    "+t._s(t.messError?t.messError:"Yêu cầu thực hiện thất bại")+"\n    "),a("v-btn",{attrs:{icon:""},on:{click:function(e){t.snackbarerror=!1}}},[a("v-icon",[t._v("clear")])],1)],1)],1)},ci=[],li={props:["tableName"],data:function(){return{snackbarerror:!1,snackbarsuccess:!1,messError:"",responseXMLSuccess:"",importMessage:!1,importLoading:!1,importExcelLoading:!1,importPhongBanLoading:!1,showFilter:!1,accept:"text/xml,application/zip",breadCrumbsitems:[{text:"Import",disabled:!1},{text:"XML/ZIP/EXCEL",disabled:!1}],breadCrumbsitems2:[{text:"Import",disabled:!1},{text:"Người dùng",disabled:!1}],breadCrumbsitems3:[{text:"Import",disabled:!1},{text:"Phòng ban",disabled:!1}]}},methods:{doImportData:function(){this.importLoading=!0,this.importMessage=!1,this.$refs.importData.click()},doImportExcelData:function(){this.importExcelLoading=!0,this.importMessage=!1,this.$refs.importExcelData.click()},doImportPhongBanExcelData:function(){this.importPhongBanLoading=!0,this.importMessage=!1,this.$refs.importPhongBanData.click()},onFilePicked:function(t){var e=this,a=t.target.files||t.dataTransfer.files;if(a&&a[0]){var n=new FormData;n.append("file",a[0]),O()({method:"post",url:"/o/rest/v2/dossiers/import/files",data:n,config:{headers:{"Content-Type":"multipart/form-data"}}}).then((function(t){e.responseXMLSuccess=t.data,e.importLoading=!1,e.importMessage=!0})).catch((function(t){e.messError="";try{var a=t.response.data;e.messError=a.description?a.description:a.message}catch(n){}e.importLoading=!1,e.importMessage=!1}))}},onFileExcelPicked:function(t){var e=this,a=t.target.files||t.dataTransfer.files;if(a&&a[0]){var n=new FormData;n.append("file",a[0]),O()({method:"post",url:"/o/rest/v2/dossiers/import/excel",data:n,config:{headers:{"Content-Type":"multipart/form-data"}}}).then((function(t){e.snackbarsuccess=!0,e.importExcelLoading=!1})).catch((function(t){e.messError="";try{var a=t.response.data;e.messError=a.description?a.description:a.message}catch(n){}e.importExcelLoading=!1,e.snackbarerror=!0}))}},onFilePhongBanPicked:function(t){var e=this,a=t.target.files||t.dataTransfer.files;if(a&&a[0]){var n=new FormData;n.append("file",a[0]),O()({method:"post",url:"/o/rest/v2/workingunits/import/files",data:n,config:{headers:{"Content-Type":"multipart/form-data"}}}).then((function(t){e.snackbarsuccess=!0,e.importPhongBanLoading=!1})).catch((function(t){e.importPhongBanLoading=!1,e.messError="";try{var a=t.response.data;e.messError=a.description?a.description:a.message}catch(n){}e.snackbarerror=!0}))}}}},di=li,ui=Object(p["a"])(di,si,ci,!1,null,null,null),pi=ui.exports,vi=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("v-breadcrumbs",[a("v-icon",{attrs:{slot:"divider"},slot:"divider"},[t._v("chevron_right")]),t._l(t.breadCrumbsitems,(function(e){return a("v-breadcrumbs-item",{key:e.text,attrs:{disabled:e.disabled}},[t._v("\n      "+t._s(e.text)+"\n    ")])}))],2),a("v-card",{staticClass:"px-2 mx-1",staticStyle:{overflow:"hidden"}},[t.exportLoading?a("v-card-text",[a("v-flex",{attrs:{xs12:"",sm12:""}},[a("v-flex",{staticClass:"text-xs-center",attrs:{color:"blue"}},[a("span",[t._v("Đang thực hiện export dữ liệu ...")])]),a("v-progress-linear",{attrs:{color:"blue",indeterminate:!0}})],1)],1):a("v-btn",{staticClass:"white--text",attrs:{color:"blue"},on:{click:function(e){return t.exportData()}}},[t._v("\n      EXPORT DỮ LIỆU  \n      "),a("v-icon",{attrs:{right:"",dark:""}},[t._v("cloud_download")])],1)],1)],1)},mi=[],hi={props:["tableName"],data:function(){return{exportLoading:!1,breadCrumbsitems:[{text:"Export",disabled:!1},{text:"ZIP",disabled:!1}]}},methods:{exportData:function(){var t=this;t.exportLoading=!0,t.$store.dispatch("doExportData").then((function(e){t.exportLoading=!1,alert("Export dữ liệu thành công")})).catch((function(){t.exportLoading=!1,alert("Export dữ liệu không thành công")}))}}},gi=hi,fi=Object(p["a"])(gi,vi,mi,!1,null,null,null),bi=fi.exports,xi=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("v-card",{staticClass:"px-2 mx-1",staticStyle:{overflow:"hidden"}},[a("v-toolbar",{attrs:{color:"blue darken-3",dark:"",height:"48"}},[a("v-btn",{attrs:{dark:"",icon:""}},[a("v-icon",[t._v("merge_type")])],1),a("v-toolbar-title",{staticClass:"ml-0"},[t._v("\n        "+t._s(t.nameScreen)+"\n      ")]),a("v-spacer"),a("v-icon",{attrs:{dark:""}},[t._v("more_vert")]),a("v-btn",{attrs:{dark:"",icon:""},nativeOn:{click:function(e){return t.backToList.apply(null,arguments)}}},[a("v-icon",[t._v("reply")])],1)],1),a("div",{staticClass:"grid-list mt-2"},[a("div",{staticClass:"mermaid",attrs:{id:"mermaid_dossier"}})]),t.noDetail?a("v-alert",{attrs:{value:!0,color:"warning",icon:"priority_high",outline:""}},[t._v("\n    Không tìm thấy dữ liệu\n  ")]):t._e()],1)],1)},yi=[],Ci=a("9b2d");Ci["a"].initialize({theme:"forest",startOnLoad:!1});var _i={props:["tableName","id"],data:function(){return{breadCrumbsitems:[{text:"Bảng dữ liệu",disabled:!1},{text:"",disabled:!1}],nameScreen:"Chi tiết biểu đồ quy trình",showDetailForm:!1,noDetail:!1,dataSocket:{}}},created:function(){var t=this;t.$nextTick((function(){t.noDetail=!1,t.loadMermaidgraph()}))},methods:{backToList:function(){var t=this,e=t.$router.history.current,a=e.query,n=e.path,i="?";for(var r in a["state_change"]="0",a["renew"]="",a)""!==a[r]&&"undefined"!==a[r]&&void 0!==a[r]&&(i+=r+"="+a[r]+"&");i+="renew="+Math.floor(100*Math.random())+1,t.$router.push({path:n.substring(0,n.indexOf("/flowchart/"))+i})},loadMermaidgraph:function(){var t=this;t.showDetailForm=!1,document.getElementById("mermaid_dossier").innerHTML="",t.$store.dispatch("loadMermaidgraph",t.id).then((function(e){Ci["a"].render("theGraph",e,(function(e){document.getElementById("mermaid_dossier").innerHTML=e,t.showDetailForm=!0})),setTimeout((function(){window.svgPanZoom("#theGraph",{zoomEnabled:!0,controlIconsEnabled:!0,fit:!0,center:!0,minZoom:.1})}),500)}))}}},Si=_i,ki=Object(p["a"])(Si,xi,yi,!1,null,null,null),Di=ki.exports,wi=[{path:"/table/:tableName",name:"Home",component:C,props:!0,meta:{requiresAuth:!0},children:[{path:"/table/opencps_serviceconfig",name:"DichVuCong",component:It,props:!0,meta:{requiresAuth:!0}},{path:"/table/opencps_serviceconfig_dvc",name:"DichVuCongCongDVC",component:Vt,props:!0,meta:{requiresAuth:!0}},{path:"/table/opencps_serviceconfig/editor/:id",name:"ChiTietDichVuCong",component:Bt,props:!0,meta:{requiresAuth:!0}},{path:"/table/opencps_serviceconfig_dvc/editor/:id",name:"ChiTietDichVuCongCongDvc",component:Jt,props:!0,meta:{requiresAuth:!0}},{path:"/table/opencps_processoption",name:"QuyTrinhThucHienDvc",component:de,props:!0,meta:{requiresAuth:!0}},{path:"/table/opencps_processoption_dvc",name:"QuyTrinhThucHienDvcCongDvc",component:_e,props:!0,meta:{requiresAuth:!0}},{path:"/table/opencps_processoption/editor/:id",name:"ChiTietQuyTrinhThucHienDvc",component:Re,props:!0,meta:{requiresAuth:!0}},{path:"/table/opencps_processoption_dvc/editor/:id",name:"ChiTietQuyTrinhThucHienDvcCongDvc",component:Be,props:!0,meta:{requiresAuth:!0}},{path:"/table/opencps_serviceinfo",name:"ThuTucHanhChinh",component:ra,props:!0,meta:{requiresAuth:!0}},{path:"/table/:tableName",name:"TableEditor",component:nt,props:!0,meta:{requiresAuth:!0}},{path:"/table/:tableName/editor/:id",name:"TableEditorForm",component:lt,props:!0,meta:{requiresAuth:!0}},{path:"/table/opencps_serviceprocess/ext/editor/:id",name:"QuyTrinhThuTuc",component:pa,props:!0,meta:{requiresAuth:!0}},{path:"/table/opencps_services_filetemplates/ext/editor/:id",name:"DinhKemThuTuc",component:ya,props:!0,meta:{requiresAuth:!0}},{path:"/table/opencps_certnumbers/certnumbers",name:"ThamSoHeThong",component:wa,props:!0,meta:{requiresAuth:!0}},{path:"/table/opencps_voting/votings",name:"Voting",component:Oa,props:!0,meta:{requiresAuth:!0}},{path:"/table/opencps_mapping/tthc",name:"MappingTTHC",component:qa,props:!0,meta:{requiresAuth:!0}},{path:"/table/opencps_tracking/api",name:"ManagerApi",component:zn,props:!0,meta:{requiresAuth:!0}},{path:"/table/opencps_mapping/domain",name:"SyncDomain",component:Fn,props:!0,meta:{requiresAuth:!0}},{path:"/table/opencps_mapping/agency",name:"SyncAgency",component:on,props:!0,meta:{requiresAuth:!0}},{path:"/table/opencps_mapping/sharingqa",name:"SyncSharingqa",component:pn,props:!0,meta:{requiresAuth:!0}},{path:"/table/opencps_stt/stt",name:"STT",component:ti,props:!0,meta:{requiresAuth:!0}},{path:"/table/sync/statistics",name:"SyncStatistics",component:bn,props:!0,meta:{requiresAuth:!0}},{path:"/table/dossierlogs/revesionLog",name:"RevesionLog",component:An,props:!0,meta:{requiresAuth:!0}},{path:"/table/opencps_config_report/reports",name:"Report",component:oi,props:!0,meta:{requiresAuth:!0}},{path:"/table/opencps_tracking/tracking-api",name:"TheoDoiLogTruyCap",component:Za,props:!0,meta:{requiresAuth:!0}},{path:"/table/:tableName/tool_import",name:"Import",component:pi,props:!0,meta:{requiresAuth:!0}},{path:"/table/:tableName/tool_export",name:"Export",component:bi,props:!0,meta:{requiresAuth:!0}},{path:"/table/:tableName/flowchart/:id",name:"FlowChartView",component:Di,props:!0,meta:{requiresAuth:!0}}]},{path:"*",name:"NotFound",component:T}];n["default"].use(h["a"]);var Ti=new h["a"]({routes:wi});Ti.beforeEach((function(t,e,a){t.matched.some((function(t){return t.meta.requiresAuth}));a()}));var Ii=Ti,Pi=a("2f62"),Ai=a("21a6"),Ni=a.n(Ai);n["default"].use(Pi["a"]);var Li=new Pi["a"].Store({state:{snackbarerror:!1,snackbarsocket:!1,refreshSocket:0,initData:{},tocken:"",loginUser:[{email:"",role:""}],user:null,socket:{isConnected:!1,message:"",reconnectError:!1},isConnected:!1,endPointApi:"/o/rest/v2",listTableMenu:[{icon:"keyboard_arrow_up","icon-alt":"keyboard_arrow_down",text:"Nghiệp vụ",model:!0,children:[{icon:"filter_1",link:"/table/opencps_serviceinfo",code:"opencps_serviceinfo",text:"Thủ tục hành chính"},{icon:"filter_2",link:"/table/opencps_dossiertemplate",code:"opencps_dossiertemplate",text:"Mẫu hồ sơ"},{icon:"filter_3",link:"/table/opencps_serviceprocess",code:"opencps_serviceprocess",text:"Quy trình thủ tục"},{icon:"filter_4",link:"/table/opencps_serviceconfig",code:"opencps_serviceconfig",text:"Dịch vụ công một cửa"},{icon:"filter_5",link:"/table/opencps_serviceconfig_dvc",code:"opencps_serviceconfig_dvc",text:"Dịch vụ công cổng DVC"},{icon:"filter_6",link:"/table/opencps_stepconfig",code:"opencps_stepconfig",text:"Bước xử lý"},{icon:"filter_7",link:"/table/opencps_actionconfig",code:"opencps_actionconfig",text:"Thao tác xử lý"}]}],jobPosList:[],dossierStatusList:[],dossierSubStatusList:[],employeesList:[],dossierTemplatesList:[],processStepList:[],processActionList:[],processRoleList:[],problem:!0},actions:{loadInitResource:function(t){var e=t.state;return new Promise((function(t){null!==window.themeDisplay&&void 0!==window.themeDisplay?(e.initData["groupId"]=window.themeDisplay.getScopeGroupId(),e.initData["user"]={userName:window.themeDisplay.getUserName(),userEmail:"",userId:window.themeDisplay.getUserId()}):(e.initData["groupId"]=0,e.initData["user"]={userName:"",userEmail:"",userId:20103}),t(e.initData)}))},getRoleUser:function(t,e){t.commit;var a=t.state;return new Promise((function(t,e){var n={headers:{groupId:window.themeDisplay?window.themeDisplay.getScopeGroupId():""}};O.a.get(a.endPointApi+"/users/login",n).then((function(e){var a=e.data;if(a&&a.length>0){var n=[];for(var i in a)a[i]["role"]&&n.push(a[i]["role"]);t(n)}else t(["default"])})).catch((function(t){e("default")}))}))},loadMermaidgraph:function(t,e){var a=t.state,n={headers:{groupId:a.initData.groupId}},i="/o/rest/v2/serviceprocesses/"+e+"/mermaidgraph";return new Promise((function(t,e){O.a.get(i,n).then((function(e){t(e.data)})).catch((function(t){e(t)}))}))},doExportData:function(t){t.commit,t.state;return new Promise((function(t,e){Li.dispatch("loadInitResource").then((function(a){var n={headers:{groupId:window.themeDisplay?window.themeDisplay.getScopeGroupId():""},responseType:"blob"},i=new URLSearchParams;O.a.post("/o/rest/v2/backupDatas/backup",i,n).then((function(e){var a=e.data;a&&Ni()(a,"DataExport.zip");var n=window.URL.createObjectURL(a);t(n)})).catch((function(t){e(t)}))}))}))},doChangeStatusAccount:function(t,e){var a=t.commit,n=t.state;return new Promise((function(t,i){Li.dispatch("loadInitResource").then((function(){var r={headers:{groupId:n.initData.groupId}};O.a.put("/o/v1/opencps/user/"+e["id"]+"/deactive",e["data"],r).then((function(){t({status:200})})).catch((function(t){i(t),a("setsnackbarerror",!0)}))}))}))},deactiveAccount:function(t,e){var a=t.commit,n=t.state;return new Promise((function(t,i){Li.dispatch("loadInitResource").then((function(){var r={headers:{groupId:n.initData.groupId}};O.a.put("/o/v1/opencps/user/"+e["id"]+"/deactive",e["data"],r).then((function(){t({statu:200})})).catch((function(t){i(t),a("setsnackbarerror",!0)}))}))}))},changePassUserAccount:function(t,e){var a=t.commit,n=t.state;return new Promise((function(t,i){Li.dispatch("loadInitResource").then((function(){var r={headers:{groupId:n.initData.groupId}};O.a.put("/o/v1/opencps/user/"+e["id"]+"/changepass",e["data"],r).then((function(){t({statu:200})})).catch((function(t){i(t),a("setsnackbarerror",!0)}))}))}))},createUserAccount:function(t,e){var a=t.commit,n=t.state;return new Promise((function(t,i){Li.dispatch("loadInitResource").then((function(){var r={headers:{groupId:n.initData.groupId,Accept:"application/json"}},o="applicant"===e["type"]?"/o/rest/v2/applicants/":"/o/rest/v2/employees/",s=new URLSearchParams;s.append("email",e["data"]["email"]),s.append("screenName",""),s.append("exist",!1),O.a.post(o+e["id"]+"/account",s,r).then((function(e){var a=e.data;t(a)})).catch((function(t){i(t),t.response["status"]&&409===t.response["status"]?alert("Địa chỉ email đã được sử dụng trên hệ thống"):a("setsnackbarerror",!0)}))}))}))},getUserAccount:function(t,e){var a=t.commit,n=t.state;return new Promise((function(t,i){Li.dispatch("loadInitResource").then((function(){var r={headers:{groupId:n.initData.groupId}};O.a.get("/o/v1/opencps/user/"+e,r).then((function(e){var a=e.data;t(a)})).catch((function(t){i(t),a("setsnackbarerror",!0)}))}))}))},getUserDetail:function(t,e){t.commit;var a=t.state;return new Promise((function(t,n){Li.dispatch("loadInitResource").then((function(){var i={headers:{groupId:a.initData.groupId,Accept:"application/json"}},r="applicant"===e["type"]?"/o/rest/v2/applicants/":"/o/rest/v2/employees/";O.a.get(r+e["id"],i).then((function(e){var a=e.data;t(a)})).catch((function(t){n(t)}))}))}))},getImageComponent:function(t,e){var a=t.commit,n=t.state;return new Promise((function(t,i){Li.dispatch("loadInitResource").then((function(){var r={headers:{groupId:n.initData.groupId}};O.a.get("/o/v1/opencps/users/avatar/"+e["className"]+"/"+e["pk"],r).then((function(e){var a=e.data;t(a)})).catch((function(t){i(t),a("setsnackbarerror",!0)}))}))}))},downloadServiceFileTemplate:function(t,e){var a=t.commit,n=t.state;return new Promise((function(t,i){Li.dispatch("loadInitResource").then((function(){var r={headers:{groupId:n.initData.groupId,"Content-Type":"application/octet-stream"},responseType:"blob"};O.a.get("/o/v1/opencps/filetemplate/"+e["serviceInfoId"]+"/"+e["fileTemplateNo"],r).then((function(a){Ni()(a.data,e["uuid"]+"."+e["extension"]),t({status:!0})})).catch((function(t){i(t),a("setsnackbarerror",!0)}))}))}))},detailFileAttachsVersions:function(t,e){var a=t.commit,n=t.state;return new Promise((function(t,i){Li.dispatch("loadInitResource").then((function(){var r={headers:{groupId:n.initData.groupId,"Content-Type":"application/octet-stream"},responseType:"blob"};O.a.get("/o/rest/v2/fileattachs/versions/"+e.fileEntryId+"/"+e.version,r).then((function(a){Ni()(a.data,e["uuid"]+"."+e["extension"]),t({status:!0})})).catch((function(t){i(t),a("setsnackbarerror",!0)}))}))}))},updateServiceFileTemplate:function(t,e){var a=t.commit,n=t.state;return new Promise((function(t,i){Li.dispatch("loadInitResource").then((function(){var r={headers:{groupId:n.initData.groupId}};O.a.put("/o/v1/opencps/filetemplate/"+e["item"]["serviceInfoId"]+"/"+e["item"]["fileTemplateNo"],{fileTemplateNo:e["fileTemplateNo"],templateName:e["templateName"]},r).then((function(){t({status:!0})})).catch((function(t){i(t),a("setsnackbarerror",!0)}))}))}))},removeServiceFileTemplate:function(t,e){var a=t.commit,n=t.state;return new Promise((function(t,i){Li.dispatch("loadInitResource").then((function(){var r={headers:{groupId:n.initData.groupId}};O.a.delete("/o/v1/opencps/filetemplate/"+e["serviceInfoId"]+"/"+e["fileTemplateNo"],r).then((function(){t({status:!0})})).catch((function(t){i(t),a("setsnackbarerror",!0)}))}))}))},getServiceFileTemplate:function(t,e){var a=t.commit,n=t.state;return new Promise((function(t,i){Li.dispatch("loadInitResource").then((function(){var r={headers:{groupId:n.initData.groupId}};O.a.get("/o/v1/opencps/filetemplate/"+e,r).then((function(e){var a=e.data;a.data&&t(a)})).catch((function(t){i(t),a("setsnackbarerror",!0)}))}))}))},getAttachFileData:function(t,e){var a=t.commit,n=t.state;return new Promise((function(t,i){Li.dispatch("loadInitResource").then((function(){var r={headers:{groupId:n.initData.groupId}};O.a.get("/o/v1/opencps/fileattach/"+e["className"]+"/"+e["pk"],r).then((function(e){var a=e.data;a.data&&t(a)})).catch((function(t){i(t),a("setsnackbarerror",!0)}))}))}))},getJobposList:function(t){var e=t.commit,a=t.state;return new Promise((function(t,n){Li.dispatch("loadInitResource").then((function(){var i={headers:{groupId:a.initData.groupId}};O.a.get(a.endPointApi+"/jobpos",i).then((function(e){var a=e.data;a&&t(a.data)})).catch((function(t){n(t),e("setsnackbarerror",!0)}))}))}))},getDossierStatusList:function(t){var e=t.commit,a=t.state;return new Promise((function(t,n){Li.dispatch("loadInitResource").then((function(){var i={headers:{groupId:a.initData.groupId}};O.a.get(a.endPointApi+"/dictcollections/DOSSIER_STATUS/dictitems",i).then((function(e){var a=e.data;a&&t(a.data)})).catch((function(t){n(t),e("setsnackbarerror",!0)}))}))}))},getDossierSubStatusList:function(t,e){var a=t.commit,n=t.state;return new Promise((function(t,i){Li.dispatch("loadInitResource").then((function(){var r={headers:{groupId:n.initData.groupId}};O.a.get(n.endPointApi+"/dictcollections/DOSSIER_STATUS/dictitems?parent="+e,r).then((function(e){var a=e.data;a.data&&t(a.data)})).catch((function(t){i(t),a("setsnackbarerror",!0)}))}))}))},getAgencyLists:function(t){var e=t.state;return new Promise((function(t,a){Li.dispatch("loadInitResource").then((function(){var n={headers:{groupId:e.initData.groupId,Accept:"application/json"}};O.a.get(e.endPointApi+"/dictcollections/GOVERNMENT_AGENCY/dictitems",n).then((function(e){var a=e.data;if(a.data){var n=a.data;t(n)}else t([])})).catch((function(t){a(t)}))}))}))},getAgencys:function(t,e){t.commit,t.state;return new Promise((function(t,a){var n={headers:{groupId:window.themeDisplay.getScopeGroupId()},params:{}};e.parent&&(n.params={parent:e.parent}),O.a.get("/o/rest/v2/dictcollections/REPORT_GROUP/dictgroups/"+e.administration+"/dictitems",n).then((function(e){var a=e.data;t(a.data)})).catch((function(t){a(t)}))}))},getAgencysFromParent:function(t,e){t.commit,t.state;return new Promise((function(t,a){var n={headers:{groupId:e.hasOwnProperty("groupIdTrungTam")?e.groupIdTrungTam:window.themeDisplay.getScopeGroupId()},params:{}};e.parent&&(n.params={parent:e.parent}),O.a.get("/o/rest/v2/dictcollections/REPORT_GROUP/dictitems",n).then((function(e){var a=e.data;t(a.data)})).catch((function(t){a(t)}))}))},getAdministration:function(t){var e=t.state;return new Promise((function(t,a){Li.dispatch("loadInitResource").then((function(){var n={headers:{groupId:e.initData.groupId,Accept:"application/json"}};O.a.get(e.endPointApi+"/serviceinfos/statistics/agencies?sort=siblingSearch",n).then((function(e){var a=e.data;if(a.data){var n=a.data;t(n)}else t([])})).catch((function(t){a(t)}))}))}))},REGISTER_GOVAGENCY:function(t){var e=t.state;return new Promise((function(t,a){Li.dispatch("loadInitResource").then((function(){var n={headers:{groupId:e.initData.groupId,Accept:"application/json"}};O.a.get(e.endPointApi+"/dictcollections/REGISTER_GOVAGENCY/dictitems",n).then((function(e){var a=e.data;if(a.data){var n=a.data;t(n)}else t([])})).catch((function(t){a(t)}))}))}))},getRegisterBookList:function(t){var e=t.state;return new Promise((function(t,a){Li.dispatch("loadInitResource").then((function(){var n={headers:{groupId:e.initData.groupId,Accept:"application/json"}};O.a.get(e.endPointApi+"/dictcollections/REGISTER_BOOK/dictitems",n).then((function(e){var a=e.data;if(a.data){var n=a.data;t(n)}else t([])})).catch((function(t){a(t)}))}))}))},getDossierTemplate:function(t){var e=t.state;return new Promise((function(t,a){Li.dispatch("loadInitResource").then((function(){var n={headers:{groupId:e.initData.groupId}};O.a.get(e.endPointApi+"/dossiertemplates",n).then((function(e){var a=e.data;a.data&&t(a.data)})).catch((function(t){a(t)}))}))}))},getDossierTemplateDvc:function(t){t.state;return new Promise((function(t,e){Li.dispatch("loadInitResource").then((function(){var e={headers:{groupId:window.themeDisplay.getScopeGroupId()}},a={},n=new URLSearchParams;n.append("method","GET"),n.append("url","/dossiertemplates"),n.append("data",JSON.stringify(a)),O.a.post("/o/rest/v2/proxy",n,e).then((function(e){var a=e.data;a.data&&t(a.data)})).catch((function(t){}))}))}))},getServiceProcesses:function(t){var e=t.state;return new Promise((function(t,a){Li.dispatch("loadInitResource").then((function(){var n={headers:{groupId:e.initData.groupId}};O.a.get(e.endPointApi+"/serviceprocesses",n).then((function(e){var a=e.data;a.data&&t(a.data)})).catch((function(t){a(t)}))}))}))},getServiceProcessesDvc:function(t){t.state;return new Promise((function(t,e){Li.dispatch("loadInitResource").then((function(){var e={headers:{groupId:window.themeDisplay.getScopeGroupId()}},a={},n=new URLSearchParams;n.append("method","GET"),n.append("url","/serviceprocesses"),n.append("data",JSON.stringify(a)),O.a.post("/o/rest/v2/proxy",n,e).then((function(e){var a=e.data;a.data&&t(a.data)})).catch((function(t){}))}))}))},getServiceAdminisTration:function(t,e){t.commit,t.state;return new Promise((function(t,e){var a={headers:{groupId:window.themeDisplay.getScopeGroupId()},params:{}};O.a.get("/o/rest/v2/dictcollections/REPORT_GROUP/dictgroups",a).then((function(e){var a=e.data;t(a.data)})).catch((function(t){e(t)}))}))},getEmployee:function(t){var e=t.commit,a=t.state;return new Promise((function(t,n){Li.dispatch("loadInitResource").then((function(){var i={headers:{groupId:a.initData.groupId}};O.a.get(a.endPointApi+"/employees",i).then((function(e){var a=e.data;a.data&&t(a.data)})).catch((function(t){n(t),e("setsnackbarerror",!0)}))}))}))},getDossierPart:function(t,e){var a=t.commit,n=t.state;return new Promise((function(t,i){Li.dispatch("loadInitResource").then((function(){var r={headers:{groupId:n.initData.groupId}};O.a.get(n.endPointApi+"/dossiertemplates/"+e+"/parts",r).then((function(e){var a=e.data;a.data&&t(a.data)})).catch((function(t){i(t),a("setsnackbarerror",!0)}))}))}))},getProcessDetail:function(t,e){var a=t.commit,n=t.state;return new Promise((function(t,i){Li.dispatch("loadInitResource").then((function(){var r={headers:{groupId:n.initData.groupId}};O.a.get(n.endPointApi+"/serviceprocesses/"+e,r).then((function(e){var a=e.data;a&&t(a)})).catch((function(t){i(t),a("setsnackbarerror",!0)}))}))}))},getProcessStepsDetail:function(t,e){var a=t.commit,n=t.state;return new Promise((function(t,i){Li.dispatch("loadInitResource").then((function(){var r={headers:{groupId:n.initData.groupId}};O.a.get(n.endPointApi+"/serviceprocesses/"+e.processId+"/steps/"+e.stepCode,r).then((function(e){var a=e.data;a&&t(a)})).catch((function(t){i(t),a("setsnackbarerror",!0)}))}))}))},getProcessStep:function(t,e){var a=t.commit,n=t.state;return new Promise((function(t,i){Li.dispatch("loadInitResource").then((function(){var r=e.page?{start:10*e.page-10,end:10*e.page}:{},o={headers:{groupId:n.initData.groupId},params:r};O.a.get(n.endPointApi+"/serviceprocesses/"+e.processId+"/steps",o).then((function(e){var a=e.data;a&&t(a)})).catch((function(t){i(t),a("setsnackbarerror",!0)}))}))}))},getProcessAction:function(t,e){var a=t.commit,n=t.state;return new Promise((function(t,i){Li.dispatch("loadInitResource").then((function(){var r={headers:{groupId:n.initData.groupId},params:{start:10*e.page-10,end:10*e.page}};O.a.get(n.endPointApi+"/serviceprocesses/"+e.processId+"/actions",r).then((function(e){var a=e.data;a&&t(a)})).catch((function(t){i(t),a("setsnackbarerror",!0)}))}))}))},getProcessRole:function(t,e){var a=t.commit,n=t.state;return new Promise((function(t,i){Li.dispatch("loadInitResource").then((function(){var r={headers:{groupId:n.initData.groupId}};O.a.get(n.endPointApi+"/serviceprocesses/"+e.processId+"/roles",r).then((function(e){var a=e.data;a.data?t(a.data):t([])})).catch((function(t){i(t),a("setsnackbarerror",!0)}))}))}))},getProcessSequence:function(t,e){var a=t.commit,n=t.state;return new Promise((function(t,i){Li.dispatch("loadInitResource").then((function(){var r={headers:{groupId:n.initData.groupId}};O.a.get(n.endPointApi+"/serviceprocesses/"+e.processId+"/sequences",r).then((function(e){var a=e.data;a.data?t(a.data):t([])})).catch((function(t){i(t),a("setsnackbarerror",!0)}))}))}))},getProcessActionsDetail:function(t,e){var a=t.commit,n=t.state;return new Promise((function(t,i){Li.dispatch("loadInitResource").then((function(){var r={headers:{groupId:n.initData.groupId}};O.a.get(n.endPointApi+"/serviceprocesses/"+e.processId+"/actions/"+e.actionCode,r).then((function(e){var a=e.data;a&&t(a)})).catch((function(t){i(t),a("setsnackbarerror",!0)}))}))}))},deleteProcessAction:function(t,e){var a=t.commit,n=t.state;return new Promise((function(t,i){Li.dispatch("loadInitResource").then((function(){var r={headers:{groupId:n.initData.groupId}};O.a.delete(n.endPointApi+"/serviceprocesses/"+e.currentProcess+"/actions/"+e.processActionId,r).then((function(e){var a=e.data;a&&t(a)})).catch((function(t){i(t),a("setsnackbarerror",!0)}))}))}))},postProcess:function(t,e){var a=t.commit,n=t.state;return new Promise((function(t,i){Li.dispatch("loadInitResource").then((function(){var r={headers:{groupId:n.initData.groupId,Accept:"application/json"}},o=new URLSearchParams;o.append("processNo",e.processNo?e.processNo:""),o.append("processName",e.processName?e.processName:""),o.append("description",e.description?e.description:""),o.append("durationCount",e.durationCount),o.append("durationUnit",e.durationUnit),o.append("generateDossierNo",e.generateDossierNo),o.append("dossierNoPattern",e.dossierNoPattern),o.append("dossierGroupPattern",e.dossierGroupPattern?e.dossierGroupPattern:""),o.append("generateDueDate",e.generateDueDate),o.append("dueDatePattern",e.dueDatePattern),o.append("generatePassword",e.generatePassword),o.append("directNotification",e.directNotification),o.append("serverNo",e.serverNo),"add"===e.type?O.a.post(n.endPointApi+"/serviceprocesses",o,r).then((function(e){t(e.data)})).catch((function(t){i(t)})):O.a.put(n.endPointApi+"/serviceprocesses/"+e.serviceProcessId,o,r).then((function(e){t(e.data)})).catch((function(t){i(t),a("setsnackbarerror",!0)}))}))}))},postProcessRoles:function(t,e){var a=t.commit,n=t.state;return new Promise((function(t,i){Li.dispatch("loadInitResource").then((function(){var r={headers:{groupId:n.initData.groupId,Accept:"application/json"}},o=new URLSearchParams,s=e.processRoles.moderator;o.append("roleId",e.processRoles.roleId),!1!==e.processRoles.moderator&&"false"!==e.processRoles.moderator||(s=0),!0!==e.processRoles.moderator&&"true"!==e.processRoles.moderator||(s=1),o.append("moderator",s),o.append("roleName",e.processRoles.roleName?e.processRoles.roleName:""),o.append("roleCode",e.processRoles.roleCode?e.processRoles.roleCode:""),o.append("condition",e.processRoles.condition?e.processRoles.condition:""),O.a.post(n.endPointApi+"/serviceprocesses/"+e.processId+"/roles",o,r).then((function(e){t(e.data)})).catch((function(t){i(t),a("setsnackbarerror",!0)}))}))}))},putProcessRoles:function(t,e){var a=t.commit,n=t.state;return new Promise((function(t,i){Li.dispatch("loadInitResource").then((function(){var r={headers:{groupId:n.initData.groupId,Accept:"application/json"}},o=new URLSearchParams;o.append("moderator",e.processRoles.moderator),o.append("condition",e.processRoles.condition?e.processRoles.condition:""),O.a.put(n.endPointApi+"/serviceprocesses/"+e.processId+"/roles/"+e.processRoles.roleId,o,r).then((function(e){t(e.data)})).catch((function(t){i(t),a("setsnackbarerror",!0)}))}))}))},deleteProcessRoles:function(t,e){var a=t.commit,n=t.state;return new Promise((function(t,i){Li.dispatch("loadInitResource").then((function(){var r={headers:{groupId:n.initData.groupId,Accept:"application/json"}};O.a.delete(n.endPointApi+"/serviceprocesses/"+e.processId+"/roles/"+e.processRoles.roleId,r).then((function(e){t(e.data)})).catch((function(t){i(t),a("setsnackbarerror",!0)}))}))}))},postProcessSequence:function(t,e){var a=t.commit,n=t.state;return new Promise((function(t,i){Li.dispatch("loadInitResource").then((function(){var r={headers:{groupId:n.initData.groupId,Accept:"application/json"}},o=new URLSearchParams;o.append("sequenceName",e.processSequence.sequenceName?e.processSequence.sequenceName:""),o.append("sequenceNo",e.processSequence.sequenceNo?e.processSequence.sequenceNo:""),o.append("durationCount",e.processSequence.durationCount),o.append("sequenceRole",e.processSequence.sequenceRole?e.processSequence.sequenceRole:""),O.a.post(n.endPointApi+"/serviceprocesses/"+e.processId+"/sequences",o,r).then((function(e){t(e.data)})).catch((function(t){i(t),a("setsnackbarerror",!0)}))}))}))},deleteProcessSequence:function(t,e){var a=t.commit,n=t.state;return new Promise((function(t,i){Li.dispatch("loadInitResource").then((function(){var r={headers:{groupId:n.initData.groupId,Accept:"application/json"}};O.a.delete(n.endPointApi+"/serviceprocesses/"+e.processId+"/sequences/"+e.processSequence.sequenceNo,r).then((function(e){t(e.data)})).catch((function(t){i(t),a("setsnackbarerror",!0)}))}))}))},postProcessStep:function(t,e){var a=t.commit,n=t.state;return new Promise((function(t,i){Li.dispatch("loadInitResource").then((function(){var r={headers:{groupId:n.initData.groupId,Accept:"application/json"}},o=new URLSearchParams;o.append("stepCode",e.stepCode),o.append("stepName",e.stepName),o.append("sequenceNo",e.sequenceNo),o.append("dossierStatus",e.dossierStatus?e.dossierStatus:""),o.append("dossierSubStatus",e.dossierSubStatus?e.dossierSubStatus:""),o.append("durationCount",e.durationCount),o.append("customProcessUrl",e.customProcessUrl),o.append("briefNote",e.briefNote),o.append("stepInstruction",e.stepInstruction),o.append("editable",e.editable),o.append("checkInput",e.checkInput?e.checkInput:""),o.append("roleAsStep",e.roleAsStep?e.roleAsStep:""),"add"===e.type?O.a.post(n.endPointApi+"/serviceprocesses/"+e.currentProcess+"/steps",o,r).then((function(e){t(e.data)})).catch((function(t){i(t)})):O.a.put(n.endPointApi+"/serviceprocesses/"+e.currentProcess+"/steps/"+e.stepCode,o,r).then((function(e){t(e.data)})).catch((function(t){i(t),a("setsnackbarerror",!0)}))}))}))},deleteProcessStep:function(t,e){var a=t.commit,n=t.state;return new Promise((function(t,i){Li.dispatch("loadInitResource").then((function(){var r={headers:{groupId:n.initData.groupId}};O.a.delete(n.endPointApi+"/serviceprocesses/"+e.currentProcess+"/steps/"+e.stepCode,r).then((function(e){var a=e.data;a&&t(a)})).catch((function(t){i(t),a("setsnackbarerror",!0)}))}))}))},getStepRole:function(t,e){var a=t.commit,n=t.state;return new Promise((function(t,i){Li.dispatch("loadInitResource").then((function(){var r={headers:{groupId:n.initData.groupId}};O.a.get(n.endPointApi+"/serviceprocesses/"+e.processId+"/steps/"+e.stepId+"/roles",r).then((function(e){var a=e.data;a.data?t(a.data):t([])})).catch((function(t){i(t),a("setsnackbarerror",!0)}))}))}))},postStepRoles:function(t,e){var a=t.commit,n=t.state;return new Promise((function(t,i){Li.dispatch("loadInitResource").then((function(){var r={headers:{groupId:n.initData.groupId,Accept:"application/json"}},o=new URLSearchParams,s=e.stepRoles.moderator;!1!==e.stepRoles.moderator&&"false"!==e.stepRoles.moderator||(s=0),!0!==e.stepRoles.moderator&&"true"!==e.stepRoles.moderator||(s=1),o.append("roleId",e.stepRoles.roleId?e.stepRoles.roleId:""),o.append("roleName",e.stepRoles.roleName?e.stepRoles.roleName:""),o.append("roleCode",e.stepRoles.roleCode?e.stepRoles.roleCode:""),o.append("moderator",s),o.append("condition",e.stepRoles.condition?e.stepRoles.condition:""),O.a.post(n.endPointApi+"/serviceprocesses/"+e.processId+"/steps/"+e.stepId+"/roles",o,r).then((function(e){t(e.data)})).catch((function(t){i(t),a("setsnackbarerror",!0)}))}))}))},deleteStepRoles:function(t,e){var a=t.commit,n=t.state;return new Promise((function(t,i){Li.dispatch("loadInitResource").then((function(){var r={headers:{groupId:n.initData.groupId,Accept:"application/json"}};O.a.delete(n.endPointApi+"/serviceprocesses/"+e.processId+"/steps/"+e.stepId+"/roles/"+e.stepRoles.roleId,r).then((function(e){t(e.data)})).catch((function(t){i(t),a("setsnackbarerror",!0)}))}))}))},postProcessAction:function(t,e){var a=t.commit,n=t.state;return new Promise((function(t,i){Li.dispatch("loadInitResource").then((function(){var r={headers:{groupId:n.initData.groupId,Accept:"application/json"}},o=new URLSearchParams;o.append("actionCode",e.actionCode?e.actionCode:""),o.append("actionName",e.actionName?e.actionName:""),o.append("preStepCode",e.preStepCode?e.preStepCode:""),o.append("postStepCode",e.postStepCode?e.postStepCode:""),o.append("autoEvent",e.autoEvent?e.autoEvent:""),o.append("preCondition",e.preCondition?e.preCondition:""),o.append("allowAssignUser",e.allowAssignUser),o.append("assignUserId",e.assignUserId?e.assignUserId:""),o.append("requestPayment",e.requestPayment?e.requestPayment:0),o.append("paymentFee",e.paymentFee?e.paymentFee:""),o.append("syncActionCode",e.syncActionCode?e.syncActionCode:""),o.append("rollbackable",e.rollbackable),o.append("createDossierFiles",e.createDossierFiles?e.createDossierFiles.join():""),o.append("returnDossierFiles",e.returnDossierFiles?e.returnDossierFiles.join():""),o.append("createDossierNo",e.createDossierNo?e.createDossierNo:""),o.append("eSignature",e.eSignature),o.append("signatureType",e.eSignature&&e.signatureType?e.signatureType:""),o.append("configNote",(e.configNote,e.configNote)),o.append("dossierTemplateNo",e.dossierTemplateNo?e.dossierTemplateNo:""),o.append("createDossiers",e.createDossier?e.createDossier:""),"add"===e.type?O.a.post(n.endPointApi+"/serviceprocesses/"+e.currentProcess+"/actions",o,r).then((function(e){t(e.data)})).catch((function(t){i(t)})):O.a.put(n.endPointApi+"/serviceprocesses/"+e.currentProcess+"/actions/"+e.processActionId,o,r).then((function(e){t(e.data)})).catch((function(t){i(t),a("setsnackbarerror",!0)}))}))}))},postAction:function(t,e){var a=t.commit,n=t.state;return new Promise((function(t,i){Li.dispatch("loadInitResource").then((function(){var r={headers:{groupId:n.initData.groupId,Accept:"application/json"}},o=new URLSearchParams;o.append("postAction",e.postAction?e.postAction:""),O.a.put(n.endPointApi+"/serviceprocesses/processAction/"+e.processActionId+"/postAction",o,r).then((function(e){t(e.data)})).catch((function(t){i(t),a("setsnackbarerror",!0)}))}))}))},getCertNumberList:function(t,e){var a=t.commit,n=t.state;return new Promise((function(t,i){Li.dispatch("loadInitResource").then((function(){var r=e.page?{start:10*e.page-10,end:10*e.page}:{},o={headers:{groupId:n.initData.groupId},params:r};O.a.get(n.endPointApi+"/vr-app/certnumbers",o).then((function(e){var a=e.data;a&&t(a)})).catch((function(t){i(t),a("setsnackbarerror",!0)}))}))}))},getCertNumberDetail:function(t,e){var a=t.commit,n=t.state;return new Promise((function(t,i){Li.dispatch("loadInitResource").then((function(){var r={headers:{groupId:n.initData.groupId}};O.a.get(n.endPointApi+"/vr-app/certnumbers/"+e.certId,r).then((function(e){var a=e.data;a&&t(a)})).catch((function(t){i(t),a("setsnackbarerror",!0)}))}))}))},updateCertNumber:function(t,e){var a=t.commit,n=t.state;return new Promise((function(t,i){Li.dispatch("loadInitResource").then((function(){var r={headers:{groupId:n.initData.groupId,Accept:"application/json"}},o=new URLSearchParams;o.append("pattern",e.pattern?e.pattern:""),o.append("initNumber",e.initNumber?e.initNumber:""),"add"===e.type?O.a.post(n.endPointApi+"/vr-app/certnumbers",o,r).then((function(e){t(e.data)})).catch((function(t){i(t)})):O.a.put(n.endPointApi+"/vr-app/certnumbers/"+e.certId,o,r).then((function(e){t(e.data)})).catch((function(t){i(t),a("setsnackbarerror",!0)}))}))}))},deleteCertNumber:function(t,e){var a=t.commit,n=t.state;return new Promise((function(t,i){Li.dispatch("loadInitResource").then((function(){n.initData.groupId;O.a.delete(n.endPointApi+"/vr-app/certnumbers/"+e.certId).then((function(e){t(e.data)})).catch((function(t){i(t),a("setsnackbarerror",!0)}))}))}))},getVotingList:function(t,e){var a=t.commit,n=t.state;return new Promise((function(t,i){Li.dispatch("loadInitResource").then((function(){var r={headers:{groupId:n.initData.groupId}};O.a.get(n.endPointApi+"/postal/votings/"+e.className+"/0",r).then((function(e){var a=e.data;a&&t(a)})).catch((function(t){i(t),a("setsnackbarerror",!0)}))}))}))},getVotingListVer2:function(t,e){var a=t.commit,n=t.state;return new Promise((function(t,i){Li.dispatch("loadInitResource").then((function(){var r={headers:{groupId:n.initData.groupId}};O.a.get(n.endPointApi+"/postal/vote/"+e.className,r).then((function(e){var a=e.data;a&&t(a)})).catch((function(t){i(t),a("setsnackbarerror",!0)}))}))}))},updateVotings:function(t,e){var a=t.commit,n=t.state;return new Promise((function(t,i){Li.dispatch("loadInitResource").then((function(){var r={headers:{groupId:n.initData.groupId,Accept:"application/json"}},o=new URLSearchParams;o.append("className",e.className?e.className:""),o.append("classPK",e.classPK?e.classPK:""),o.append("votingCode",e.votingCode?e.votingCode:""),o.append("subject",e.subject?e.subject:""),o.append("choices",e.choices?e.choices:""),o.append("commentable",e.commentable?e.commentable:""),"add"===e.type?O.a.post(n.endPointApi+"/postal/votings",o,r).then((function(e){t(e.data)})).catch((function(t){i(t)})):O.a.put(n.endPointApi+"/postal/votings/"+e.votingId,o,r).then((function(e){t(e.data)})).catch((function(t){i(t),a("setsnackbarerror",!0)}))}))}))},updateVotingsNew:function(t,e){var a=t.commit,n=t.state;return new Promise((function(t,i){Li.dispatch("loadInitResource").then((function(){var r={headers:{groupId:n.initData.groupId,Accept:"application/json"}},o=new URLSearchParams;o.append("className",e.className?e.className:""),o.append("voteCode",e.voteCode?e.voteCode:""),o.append("title",e.title?e.title:""),o.append("description",e.description?e.description:""),o.append("status",e.status?e.status:0),"survey"===e.className&&o.append("processTime",e.processTime),"add"===e.type?O.a.post(n.endPointApi+"/postal/vote/"+e.className+"/question",o,r).then((function(a){e.choiceItems&&e.choiceItems.length>0?function(){var n=0,i=e.choiceItems.length;for(var r in e.choiceItems){var o=Object.assign(e.choiceItems[r],{className:e.className,voteId:a.data.voteId});Li.dispatch("createChoices",o).then((function(){n+=1,n===i&&t(a.data)})).catch((function(){n+=1,n===i&&t(a.data)}))}}():t(a.data)})).catch((function(t){i(t)})):O.a.put(n.endPointApi+"/postal/vote/"+e.className+"/question/"+e.votingId,o,r).then((function(e){t(e.data)})).catch((function(t){i(t),a("setsnackbarerror",!0)}))}))}))},createChoices:function(t,e){t.commit;var a=t.state;return new Promise((function(t,n){Li.dispatch("loadInitResource").then((function(){var i={headers:{groupId:a.initData.groupId,Accept:"application/json"}},r=new URLSearchParams;r.append("className",e.className?e.className:""),r.append("voteId",e.voteId?e.voteId:""),r.append("subject",e.subject?e.subject:""),r.append("sibling",e.sibling?e.sibling:1),r.append("status",e.status?e.status:1),r.append("votePoint",""!==e.votePoint?e.votePoint:""),O.a.post(a.endPointApi+"/postal/vote/"+e.className+"/choice",r,i).then((function(e){t(e.data)})).catch((function(t){n(t)}))}))}))},updateChoices:function(t,e){var a=t.commit,n=t.state;return new Promise((function(t,i){Li.dispatch("loadInitResource").then((function(){var r={headers:{groupId:n.initData.groupId,Accept:"application/json"}},o=new URLSearchParams;o.append("voteId",e.voteId?e.voteId:""),o.append("subject",e.subject?e.subject:""),o.append("sibling",e.sibling?e.sibling:1),o.append("votePoint",""!==e.votePoint?e.votePoint:""),o.append("status",""!==e.status?e.status:""),O.a.put(n.endPointApi+"/postal/vote/"+e.className+"/choice/"+e.voteChoiceId,o,r).then((function(e){t(e.data)})).catch((function(t){i(t),a("setsnackbarerror",!0)}))}))}))},deleteVotings:function(t,e){var a=t.commit,n=t.state;return new Promise((function(t,i){Li.dispatch("loadInitResource").then((function(){n.initData.groupId;O.a.delete(n.endPointApi+"/postal/votings/"+e.votingId).then((function(e){t(e.data)})).catch((function(t){i(t),a("setsnackbarerror",!0)}))}))}))},deleteVotingsNew:function(t,e){var a=t.commit,n=t.state;return new Promise((function(t,i){Li.dispatch("loadInitResource").then((function(){n.initData.groupId;O.a.delete(n.endPointApi+"/postal/vote/"+e.className+"/question/"+e.votingId).then((function(e){t(e.data)})).catch((function(t){i(t),a("setsnackbarerror",!0)}))}))}))},deleteChoiceNew:function(t,e){var a=t.commit,n=t.state;return new Promise((function(t,i){Li.dispatch("loadInitResource").then((function(){n.initData.groupId;O.a.delete(n.endPointApi+"/postal/vote/"+e.className+"/choice/"+e.voteChoiceId).then((function(e){t(e.data)})).catch((function(t){i(t),a("setsnackbarerror",!0)}))}))}))},getGovAgency:function(t,e){t.commit;var a=t.state;return new Promise((function(t,e){Li.dispatch("loadInitResource").then((function(e){var n={headers:{groupId:a.initData.groupId},params:{sort:"siblingSearch"}};O.a.get(a.endPointApi+"/serviceinfos/statistics/agencies",n).then((function(e){var a=e.data;if(a.data){var n=a.data;t(n)}else t([])})).catch((function(t){}))}))}))},getDomain:function(t,e){t.commit;var a=t.state;return new Promise((function(t,n){Li.dispatch("loadInitResource").then((function(n){var i={headers:{groupId:a.initData.groupId},params:{agency:e.agencyCode,sort:"siblingSearch"}};O.a.get(a.endPointApi+"/serviceinfos/statistics/domains",i).then((function(e){var a=e.data;if(a.data){var n=a.data;t(n)}else t([])})).catch((function(t){}))}))}))},getServiceInfo:function(t,e){t.commit;var a=t.state;return new Promise((function(t,n){Li.dispatch("loadInitResource").then((function(n){var i={headers:{groupId:a.initData.groupId},params:{sort:"siblingSearch",administration:e.administration?e.administration:"",domain:e.domain?e.domain:""}};O.a.get(a.endPointApi+"/serviceinfos",i).then((function(e){var a=e.data;if(a.data){var n=a.data;t(n)}else t([])})).catch((function(t){}))}))}))},getDomainDvc:function(t,e){t.commit,t.state;return new Promise((function(t,a){Li.dispatch("loadInitResource").then((function(a){var n={headers:{groupId:window.themeDisplay.getScopeGroupId()}},i={agency:e.agencyCode,sort:"siblingSearch"},r=new URLSearchParams;r.append("method","GET"),r.append("url","/serviceinfos/statistics/domains"),r.append("data",JSON.stringify(i)),O.a.post("/o/rest/v2/proxy",r,n).then((function(e){var a=e.data;if(a.data){var n=a.data;t(n)}else t([])})).catch((function(t){}))}))}))},getServiceInfoDvc:function(t,e){t.commit,t.state;return new Promise((function(t,a){Li.dispatch("loadInitResource").then((function(a){var n={headers:{groupId:window.themeDisplay.getScopeGroupId()}},i={sort:"siblingSearch",administration:e.administration?e.administration:"",domain:e.domain?e.domain:""},r=new URLSearchParams;r.append("method","GET"),r.append("url","/serviceinfos"),r.append("data",JSON.stringify(i)),O.a.post("/o/rest/v2/proxy",r,n).then((function(e){var a=e.data;if(a.data){var n=a.data;t(n)}else t([])})).catch((function(t){}))}))}))},getServiceConfigDetail:function(t,e){t.commit;var a=t.state;return new Promise((function(t,n){Li.dispatch("loadInitResource").then((function(n){var i={headers:{groupId:a.initData.groupId},params:{}};O.a.get(a.endPointApi+"/serviceconfigs/"+e.serviceConfigId,i).then((function(e){var a=e.data;t(a)})).catch((function(t){}))}))}))},getServiceConfigDetailCongDvc:function(t,e){t.commit,t.state;return new Promise((function(t,a){Li.dispatch("loadInitResource").then((function(a){var n={headers:{groupId:window.themeDisplay.getScopeGroupId()}},i={},r=new URLSearchParams;r.append("method","GET"),r.append("url","/serviceconfigs/"+e.serviceConfigId),r.append("data",JSON.stringify(i)),O.a.post("/o/rest/v2/proxy",r,n).then((function(e){var a=e.data;t(a)})).catch((function(t){}))}))}))},createServiceConfig:function(t,e){t.commit;var a=t.state;return new Promise((function(t,n){Li.dispatch("loadInitResource").then((function(){var i={headers:{groupId:a.initData.groupId,Accept:"application/json"}},r=new URLSearchParams;r.append("serviceInfoId",e.serviceInfoId?e.serviceInfoId:""),r.append("govAgencyCode",e.govAgencyCode?e.govAgencyCode:""),r.append("serviceInstruction",e.serviceInstruction?e.serviceInstruction:""),r.append("serviceLevel",e.serviceLevel),r.append("serviceUrl",e.serviceUrl),r.append("forCitizen",e.forCitizen),r.append("forBusiness",e.forBusiness),r.append("postalService",e.postalService),r.append("registration",e.registration),r.append("receptionReport",e.receptionReport),"add"===e.type?O.a.post(a.endPointApi+"/serviceconfigs",r,i).then((function(e){t(e.data)})).catch((function(t){n(t)})):O.a.put(a.endPointApi+"/serviceconfigs/"+e.serviceConfigId,r,i).then((function(e){t(e.data)})).catch((function(t){n(t)}))}))}))},createServiceConfigDvc:function(t,e){t.commit,t.state;return new Promise((function(t,a){Li.dispatch("loadInitResource").then((function(){var n={headers:{groupId:window.themeDisplay.getScopeGroupId()}},i=new URLSearchParams,r="";r="add"===e.type?"/serviceconfigs":"/serviceconfigs/"+e.serviceConfigId;var o={serviceInfoId:e.serviceInfoId?e.serviceInfoId:"",govAgencyCode:e.govAgencyCode?e.govAgencyCode:"",serviceInstruction:e.serviceInstruction?e.serviceInstruction:"",serviceLevel:e.serviceLevel,serviceUrl:e.serviceUrl,forCitizen:e.forCitizen,forBusiness:e.forBusiness,postalService:e.postalService,registration:e.registration,receptionReport:e.receptionReport};"add"===e.type?i.append("method","POST"):i.append("method","PUT"),i.append("url",r),i.append("data",JSON.stringify(o)),O.a.post("/o/rest/v2/proxy",i,n).then((function(e){t(e.data)})).catch((function(t){a(t)}))}))}))},getServiceProcessOptionDetail:function(t,e){t.commit;var a=t.state;return new Promise((function(t,n){Li.dispatch("loadInitResource").then((function(n){var i={headers:{groupId:a.initData.groupId},params:{}};O.a.get(a.endPointApi+"/serviceconfigs/"+e.serviceConfigId+"/processes/"+e.processOptionId,i).then((function(e){var a=e.data;t(a)})).catch((function(t){}))}))}))},createServiceProcessOption:function(t,e){t.commit;var a=t.state;return new Promise((function(t,n){Li.dispatch("loadInitResource").then((function(){var i={headers:{groupId:a.initData.groupId,Accept:"application/json"}},r=new URLSearchParams;r.append("optionName",e.optionName),r.append("seqOrder",e.seqOrder),r.append("autoSelect",e.autoSelect),r.append("instructionNote",e.instructionNote),r.append("submissionNote",e.submissionNote),r.append("dossierTemplateId",e.dossierTemplateId),r.append("serviceProcessId",e.serviceProcessId),r.append("postalService",e.postalService),r.append("registerBookCode",e.registerBookCode),r.append("sampleCount",e.sampleCount),"add"===e.type?O.a.post(a.endPointApi+"/serviceconfigs/"+e.serviceConfigId+"/processes",r,i).then((function(e){t(e.data)})).catch((function(t){n(t)})):O.a.put(a.endPointApi+"/serviceconfigs/"+e.serviceConfigId+"/processes/"+e.processOptionId,r,i).then((function(e){t(e.data)})).catch((function(t){n(t)}))}))}))},createServiceProcessOptionDvc:function(t,e){t.commit,t.state;return new Promise((function(t,a){Li.dispatch("loadInitResource").then((function(){var n={headers:{groupId:window.themeDisplay.getScopeGroupId()}},i=new URLSearchParams,r="";r="add"===e.type?"/serviceconfigs/"+e.serviceConfigId+"/processes":"/serviceconfigs/"+e.serviceConfigId+"/processes/"+e.processOptionId;var o={optionName:e.optionName,seqOrder:e.seqOrder,autoSelect:e.autoSelect,instructionNote:e.instructionNote,submissionNote:e.submissionNote,dossierTemplateId:e.dossierTemplateId,serviceProcessId:e.serviceProcessId,postalService:e.postalService,registerBookCode:e.registerBookCode,sampleCount:e.sampleCount};"add"===e.type?i.append("method","POST"):i.append("method","PUT"),i.append("url",r),i.append("data",JSON.stringify(o)),O.a.post("/o/rest/v2/proxy",i,n).then((function(e){t(e.data)})).catch((function(t){a(t)}))}))}))},getServiceLists:function(t,e){t.commit;var a=t.state;return new Promise((function(t,n){Li.dispatch("loadInitResource").then((function(i){var r={start:15*e.page-15,end:15*e.page,keyword:e.keyword.replace(/[!@#$%^&*(),?":{}|<>]/g,""),domain:e.domain,administration:e.agency},o={headers:{groupId:a.initData.groupId},params:r};O.a.get(a.endPointApi+"/serviceinfos/mappingsuggest",o).then((function(e){var a=e.data;t(a)})).catch((function(t){n(t)}))}))}))},getSharingqa:function(t,e){t.commit;var a=t.state;return new Promise((function(t,n){Li.dispatch("loadInitResource").then((function(i){var r={headers:{groupId:a.initData.groupId}};O.a.post("/o/rest/v2/nps/getsharingqa",e,r).then((function(e){var a=e.data;t(a)})).catch((function(t){n(t)}))}))}))},getServiceDomain:function(t,e){t.commit;var a=t.state;return new Promise((function(t,n){Li.dispatch("loadInitResource").then((function(i){var r={url:"o/rest/v2/dictcollections/SERVICE_DOMAIN/dictitems/mappingsuggest",method:"get",params:e,headers:{groupId:a.initData.groupId}};O.a.request(r).then((function(e){var a=e.data;t(a)})).catch((function(t){n(t)}))}))}))},getServiceDomainDVCQG:function(t,e){t.commit;var a=t.state;return new Promise((function(t,n){Li.dispatch("loadInitResource").then((function(i){var r={url:"/o/rest/v2/dictcollections/SERVICE_DOMAIN/dictitems/dvcqg",method:"get",params:e,headers:{groupId:a.initData.groupId}};O.a.request(r).then((function(e){var a=e.data;t(a)})).catch((function(t){n(t)}))}))}))},getServiceAgency:function(t,e){t.commit;var a=t.state;return new Promise((function(t,n){Li.dispatch("loadInitResource").then((function(i){var r={url:"o/rest/v2/dictcollections/GOVERNMENT_AGENCY/dictitems/mappingsuggest",method:"get",params:e,headers:{groupId:a.initData.groupId}};O.a.request(r).then((function(e){var a=e.data;t(a)})).catch((function(t){n(t)}))}))}))},getServiceAgencyDVCQG:function(t,e){t.commit;var a=t.state;return new Promise((function(t,n){Li.dispatch("loadInitResource").then((function(i){var r={url:"/o/rest/v2/dictcollections/GOVERNMENT_AGENCY/dictitems/dvcqg",method:"get",params:e,headers:{groupId:a.initData.groupId}};O.a.request(r).then((function(e){var a=e.data;t(a)})).catch((function(t){n(t)}))}))}))},syncServiceinfoNew:function(t,e){t.commit;var a=t.state;return new Promise((function(t,n){Li.dispatch("loadInitResource").then((function(i){var r={headers:{groupId:a.initData.groupId}},o=new URLSearchParams;o.append("serviceCodes",e.serviceCodes),o.append("type",e.type),O.a.post("/o/rest/v2/nps/syncserviceinfo",o,r).then((function(e){e.data?t(e.data):t("")})).catch((function(t){n(t)}))}))}))},syncServiceinfoAll:function(t,e){t.commit;var a=t.state;return new Promise((function(t,e){Li.dispatch("loadInitResource").then((function(n){var i={headers:{groupId:a.initData.groupId}},r=new URLSearchParams;O.a.post("/o/rest/v2/nps/syncserviceinfo",r,i).then((function(e){e.data?t(e.data):t("")})).catch((function(t){e(t)}))}))}))},removeMappingServiceAgency:function(t,e){t.commit;var a=t.state;return new Promise((function(t,n){Li.dispatch("loadInitResource").then((function(i){var r={url:"o/rest/v2/dictcollections/GOVERNMENT_AGENCY/dictitems/removemapping/"+e.dictItemMappingId,method:"delete",headers:{groupId:a.initData.groupId}};O.a.request(r).then((function(e){e.data?t(e.data):t("")})).catch((function(t){n(t)}))}))}))},removeMappingServiceDomain:function(t,e){t.commit;var a=t.state;return new Promise((function(t,n){Li.dispatch("loadInitResource").then((function(i){var r={url:"o/rest/v2/dictcollections/SERVICE_DOMAIN/dictitems/removemapping/"+e.dictItemMappingId,method:"delete",headers:{groupId:a.initData.groupId}};O.a.request(r).then((function(e){e.data?t(e.data):t("")})).catch((function(t){n(t)}))}))}))},removeMappingTTHC:function(t,e){t.commit;var a=t.state;return new Promise((function(t,n){Li.dispatch("loadInitResource").then((function(i){var r={headers:{groupId:a.initData.groupId}};O.a.delete("/o/rest/v2/nps/removemappingserviceinfo/"+e.mappingClassPK,r).then((function(e){e.data?t(e.data):t("")})).catch((function(t){n(t)}))}))}))},mappingTTHC:function(t,e){t.commit;var a=t.state;return new Promise((function(t,n){Li.dispatch("loadInitResource").then((function(i){var r={headers:{groupId:a.initData.groupId}},o=new URLSearchParams;o.append("serviceCode",e.serviceCode),o.append("serviceCodeDVCQG",e.serviceCodeDVCQG),o.append("serviceNameDVCQG",e.serviceNameDVCQG),O.a.post("/o/rest/v2/nps/mappingserviceinfo",o,r).then((function(e){e.data?t(e.data):t("")})).catch((function(t){n(t)}))}))}))},mappingServiceDomain:function(t,e){t.commit;var a=t.state;return new Promise((function(t,n){Li.dispatch("loadInitResource").then((function(i){var r={headers:{groupId:a.initData.groupId}},o=new URLSearchParams;o.append("itemCode",e.itemCode),o.append("itemCodeDVCQG",e.itemCodeDVCQG),O.a.post("o/rest/v2/dictcollections/SERVICE_DOMAIN/dictitems/mapping",o,r).then((function(e){e.data?t(e.data):t("")})).catch((function(t){n(t)}))}))}))},mappingServiceAgency:function(t,e){t.commit;var a=t.state;return new Promise((function(t,n){Li.dispatch("loadInitResource").then((function(i){var r={headers:{groupId:a.initData.groupId}},o=new URLSearchParams;o.append("itemCode",e.itemCode),o.append("itemCodeDVCQG",e.itemCodeDVCQG),O.a.post("o/rest/v2/dictcollections/GOVERNMENT_AGENCY/dictitems/mapping",o,r).then((function(e){e.data?t(e.data):t("")})).catch((function(t){n(t)}))}))}))},syncSharingqa:function(t,e){t.commit;var a=t.state;return new Promise((function(t,n){Li.dispatch("loadInitResource").then((function(i){var r={headers:{groupId:a.initData.groupId}};e?O.a.post("/o/rest/v2/nps/syncsharingqa",e,r).then((function(e){var a=e.data;t(a)})).catch((function(t){n(t)})):O.a.post("/o/rest/v2/nps/syncsharingqa",e,r).then((function(e){var a=e.data;t(a)})).catch((function(t){n(t)}))}))}))},getTTHCDonVi:function(t,e){t.commit;var a=t.state;return new Promise((function(t,n){Li.dispatch("loadInitResource").then((function(i){var r={url:"/o/rest/v2/serviceinfos",method:"get",params:e,headers:{groupId:a.initData.groupId}};O.a.request(r).then((function(e){var a=e.data;t(a)})).catch((function(t){n(t)}))}))}))},getTTHCDVCQG:function(t,e){t.commit;var a=t.state;return new Promise((function(t,n){Li.dispatch("loadInitResource").then((function(i){var r={url:"/o/rest/v2/nps/serviceinfodvcqg",method:"get",params:e,headers:{groupId:a.initData.groupId}};O.a.request(r).then((function(e){var a=e.data;t(a)})).catch((function(t){n(t)}))}))}))},getChiTietTTDVCQG:function(t,e){t.commit;var a=t.state;return new Promise((function(t,n){Li.dispatch("loadInitResource").then((function(i){var r={url:"/o/rest/v2/nps/serviceinfodvcqg/"+e.serviceCodeDVCQG,method:"get",headers:{groupId:a.initData.groupId}};O.a.request(r).then((function(e){var a=e.data;t(a)})).catch((function(t){n(t)}))}))}))},getChiTietDonVi:function(t,e){t.commit;var a=t.state;return new Promise((function(t,n){Li.dispatch("loadInitResource").then((function(i){var r={url:"/o/rest/v2/serviceinfos/"+e.serviceCode,method:"get",headers:{groupId:a.initData.groupId}};O.a.request(r).then((function(e){var a=e.data;t(a)})).catch((function(t){n(t)}))}))}))},addTTHC:function(t,e){t.commit;var a=t.state;return new Promise((function(t,e){Li.dispatch("loadInitResource").then((function(n){var i={headers:{groupId:a.initData.groupId}},r=new URLSearchParams;r.append("serviceCodes",""),r.append("type","create"),O.a.post("/o/rest/v2/nps/syncserviceinfo",r,i).then((function(e){e.data?t(e.data):t("")})).catch((function(t){e(t)}))}))}))},statisticURl:function(t,e){t.commit;var a=t.state;return new Promise((function(t,n){Li.dispatch("loadInitResource").then((function(i){var r={};r="year"===e.path?{url:"/o/rest/v2/accessStatistics/url/"+e.path,method:"get",params:{day:e.day,month:e.month,year:e.year},headers:{groupId:a.initData.groupId}}:{url:"/o/rest/v2/accessStatistics/url/"+e.path,method:"get",params:{startDay:e.startDay,endDay:e.endDay},headers:{groupId:a.initData.groupId}},O.a.request(r).then((function(e){var a=e.data;t(a)})).catch((function(t){n(t)}))}))}))},statisticThietBi:function(t,e){t.commit;var a=t.state;return new Promise((function(t,n){Li.dispatch("loadInitResource").then((function(i){var r={};r="day"===e.path?{url:"/o/rest/v2/accessStatistics/"+e.path,method:"get",params:{day:e.day,month:e.month,year:e.year},headers:{groupId:a.initData.groupId}}:{url:"/o/rest/v2/accessStatistics/"+e.path,method:"get",params:{startDay:e.startDay,endDay:e.endDay},headers:{groupId:a.initData.groupId}},O.a.request(r).then((function(e){var a=e.data;t(a)})).catch((function(t){n(t)}))}))}))},getCounters:function(t,e){t.commit,t.state;return new Promise((function(t,a){Li.dispatch("loadInitResource").then((function(n){var i={url:"/o/rest/v2/vr-app/certnumbers/counters",headers:{groupId:Liferay.ThemeDisplay.getScopeGroupId()},params:e};O.a.request(i).then((function(e){t(e.data)})).catch((function(t){a(t)}))}))}))},postCounters:function(t,e){t.commit;var a=t.state;return new Promise((function(t,n){Li.dispatch("loadInitResource").then((function(i){var r={headers:{groupId:a.initData.groupId}},o=new URLSearchParams;o.append("registerBookCode",e.registerBookCode),o.append("govAgencyCode",e.govAgencyCode),o.append("countNum",e.countNum),O.a.post("o/rest/v2/vr-app/certnumbers/counters",o,r).then((function(e){e.data?t(e.data):t("")})).catch((function(t){n(t)}))}))}))},getServerconfigs:function(t,e){t.commit;var a=t.state;return new Promise((function(t,n){Li.dispatch("loadInitResource").then((function(i){var r={headers:{groupId:a.initData.groupId}};O.a.get("/o/rest/v2/serverconfigs/"+e,r).then((function(e){e.data?t(e.data):t("")})).catch((function(t){n(t)}))}))}))},getStatistics:function(t,e){t.commit;var a=t.state;return new Promise((function(t,n){Li.dispatch("loadInitResource").then((function(i){var r={headers:{groupId:a.initData.groupId},params:e};O.a.get("/o/rest/statistics",r).then((function(e){e.data?t(e.data):t("")})).catch((function(t){n(t)}))}))}))},postSyncStatistics:function(t,e){t.commit,t.state;return new Promise((function(t,a){Li.dispatch("loadInitResource").then((function(n){O.a.post("/o/rest/v2/nps/getsharingdata",e).then((function(e){e.data?t(e.data):t("")})).catch((function(t){a(t)}))}))}))},getRevesionLog:function(t,e){t.commit;var a=t.state;return new Promise((function(t,n){Li.dispatch("loadInitResource").then((function(i){var r={headers:{"Content-Type":"application/json",Accept:"application/json",groupId:a.initData.groupId},params:e};O.a.get("/o/rest/v2/dossierlogs/revesionLog",r).then((function(e){e.data?t(e.data):t("")})).catch((function(t){n(t)}))}))}))},putFileAttach:function(t,e){t.commit,t.state;return new Promise((function(t,a){Li.dispatch("loadInitResource").then((function(n){var i={headers:{Accept:"application/json","Content-Type":"multipart/form-data"}},r=new FormData;r.append("file",e.file),r.append("fileName",e.fileName),r.append("fileType",e.fileType),r.append("fileSize",e.fileSize),O.a.put("/o/rest/v2/fileattachs/versions/"+e.fileEntryId,r,i).then((function(e){e.data?t(e.data):t("")})).catch((function(t){a(t)}))}))}))},postDeliverabletypes:function(t,e){t.commit,t.state;return new Promise((function(t,a){Li.dispatch("loadInitResource").then((function(n){var i={headers:{Accept:"application/json","Content-Type":"multipart/form-data"}},r=new FormData;r.append("file",e.file),O.a.post("/o/rest/v2/deliverabletypes/"+e.deliverableTypeId+"/fileTemplateId",r,i).then((function(e){e.data?t(e.data):t("")})).catch((function(t){a(t)}))}))}))},getFileattachsVersions:function(t,e){t.commit;var a=t.state;return new Promise((function(t,n){Li.dispatch("loadInitResource").then((function(i){a.initData.groupId;O.a.get("/o/rest/v2/fileattachs/versions/"+e).then((function(e){e.data?t(e.data):t("")})).catch((function(t){n(t)}))}))}))},downLoadExcelRevesionLog:function(t,e){var a=t.state;return new Promise((function(t,n){Li.dispatch("loadInitResource").then((function(i){var r={headers:{"Content-Type":"x-www-form-urlencoded",Accept:"application/json",groupId:a.initData.groupId},responseType:"blob",params:e};O.a.get("/o/rest/v2/dossierlogs/revesionLog",r).then((function(e){var a=e.headers["content-disposition"],n=a.split("filename=")[1]||"danhsach";n=n.split('"').join("");var i=document.createElement("a");document.body.appendChild(i),i.style="display: none";var r=window.URL.createObjectURL(e.data);i.href=r,i.download=n,i.click(),window.URL.revokeObjectURL(r),t(e.data)})).catch((function(t){n(t)}))}))}))},updateServiceInfo:function(t,e){t.commit;var a=t.state;return new Promise((function(t,n){Li.dispatch("loadInitResource").then((function(){var i={headers:{groupId:a.initData.groupId,Accept:"application/json"}},r=new URLSearchParams;r.append("serviceCodeDVCQG",e.serviceCodeDVCQG?e.serviceCodeDVCQG:""),r.append("maxLevel",e.maxLevel?e.maxLevel:2),r.append("active",e.public),O.a.put(a.endPointApi+"/serviceinfos/"+e.serviceInfoId,r,i).then((function(e){t(e.data)})).catch((function(t){n(t)}))}))}))}},mutations:{SOCKET_ONOPEN:function(t,e){n["default"].prototype.$socket=e.currentTarget,t.socket.isConnected=!0},SOCKET_ONCLOSE:function(t,e){t.socket.isConnected=!1,t.isConnected=!1},SOCKET_ONERROR:function(t,e){},SOCKET_ONMESSAGE:function(t,e){t.socket.message=e},SOCKET_RECONNECT:function(t,e){t.isConnected=!0},SOCKET_RECONNECT_ERROR:function(t){t.socket.reconnectError=!0},setlistTableMenu:function(t,e){var a=t.listTableMenu;for(var n in a[2].children=[],e)e[n][4]&&a.length>1?a[1].children.push({icon:"arrow_right",link:"/table/"+e[n][1],code:e[n][1],text:e[n][2]}):!e[n][4]&&a.length>2&&a[2].children.push({icon:"arrow_right",link:"/table/"+e[n][1],code:e[n][1],text:e[n][2]});var i={headers:{groupId:window.themeDisplay.getScopeGroupId(),Token:void 0!==window.Liferay?window.Liferay.authToken:""}};O.a.get("/o/v1/opencps/jexcel/backend.datamgt.service/org.opencps.datamgt.model.DictCollection/org.opencps.datamgt.service.DictCollectionLocalServiceUtil/dictCollectionId/collectionName",i).then((function(t){var e=t.data;if(e)for(var n in e)a[3].children.push({icon:"arrow_right",link:"/table/opencps_dictitem?dictCollectionId="+e[n]["id"],code:e[n]["id"],text:e[n]["name"]})})).catch((function(t){})),t.listTableMenu=a},setInitData:function(t,e){t.initData=e},setJobPosList:function(t,e){t.jobPosList=e},setDossierStatusList:function(t,e){t.dossierStatusList=e},setDossierSubStatusList:function(t,e){t.dossierSubStatusList=e},setEmployeesList:function(t,e){t.employeesList=e},setDossierTemplatesList:function(t,e){t.dossierTemplatesList=e},setProcessStepList:function(t,e){t.processStepList=e},setProcessActionList:function(t,e){t.processActionList=e},setProcessRoleList:function(t,e){t.processRoleList=e},setsnackbarerror:function(t,e){t.snackbarerror=e},setsnackbarsocket:function(t,e){t.snackbarsocket=e},setloginUser:function(t,e){if(e){var a=e[0];"Administrator"===a["role"]||("Administrator_data"===a["role"]?t.listTableMenu.splice(3,1):(a["role"],t.listTableMenu.splice(2,1),t.listTableMenu.splice(2,1))),t.loginUser=e}},setproblem:function(t,e){t.problem=e},setisConnected:function(t,e){t.isConnected=e}},getters:{getlistTableMenu:function(t){return t.listTableMenu},getJobPosList:function(t){return t.jobPosList},getDossierStatusList:function(t){return t.dossierStatusList},getDossierSubStatusList:function(t){return t.dossierSubStatusList},getEmployeesList:function(t){return t.employeesList},getDossierTemplatesList:function(t){return t.dossierTemplatesList},getProcessStepList:function(t){return t.processStepList},getProcessActionList:function(t){return t.processActionList},getProcessRoleList:function(t){return t.processRoleList},getsnackbarerror:function(t){return t.snackbarerror},getsnackbarsocket:function(t){return t.snackbarsocket},getloginUser:function(t){return t.loginUser[0]},getUserRoles:function(t){return t.loginUser},getisConnected:function(t){return t.isConnected},getproblem:function(t){return t.problem}}}),Oi=a("8f94"),Ri=a.n(Oi),Mi=(a("a7be"),a("cc10"),a("f9d4"),a("967d"));n["default"].use(ha["a"]),n["default"].use(Mi["default"]);var Fi=void 0!==window.themeDisplay?window.themeDisplay.getScopeGroupId():0,Ei=(void 0!==window.themeDisplay&&window.themeDisplay.getCompanyId(),void 0!==window.themeDisplay&&window.themeDisplay.getUserId(),void 0!==window.themeDisplay&&window.themeDisplay.getUserName(),void 0!==window.themeDisplay?window.themeDisplay.getPortalURL().replace("http://",""):"localhost:8080");void 0!==window.themeDisplay&&window.Liferay.authToken,Ei.indexOf(":")>0&&Ei.substr(0,Ei.indexOf(":"));O.a.defaults.headers.common["Token"]=void 0!==window.Liferay?window.Liferay.authToken:"",O.a.defaults.headers.common["groupId"]=Fi,n["default"].config.productionTip=!0,n["default"].use(Ri.a,{mode:"text/javascript",theme:"base16-light",lineNumbers:!0,line:!0}),n["default"].mixin({methods:{getScopeGroupId:function(){return null!==window.themeDisplay&&void 0!==window.themeDisplay?window.themeDisplay.getScopeGroupId():0},getAuthToken:function(){return null!==window.themeDisplay&&void 0!==window.themeDisplay?window.Liferay.authToken:""},getUserId:function(){return null!==window.themeDisplay&&void 0!==window.themeDisplay?window.themeDisplay.getUserId():0}}}),new n["default"]({el:"#app_manage_data",router:Ii,store:Li,render:function(t){return t(m)},created:function(){var t=this;t.$nextTick((function(){setTimeout((function(){t.dataSocket={};var e=new URLSearchParams,a={type:"api",cmd:"get",respone:"loginUser",api:"/o/v1/opencps/users/login",headers:{Token:t.getAuthToken(),groupId:t.getScopeGroupId(),USER_ID:t.getUserId()}};e=new URLSearchParams,e.append("text",JSON.stringify(a)),O.a.post("/o/rest/v2/socket/web",e,{}).then((function(n){var i=n.data;if(t.dataSocket[i.respone]=i[i.respone],"loginUser"===i.respone){var r;try{r=i["loginUser"]}catch(o){r=""}t.$store.commit("setloginUser",r)}e=new URLSearchParams,a={type:"admin",cmd:"get",responeType:"menu",code:"opencps_adminconfig",respone:"listTableMenu",start:-1,end:-1},e.append("text",JSON.stringify(a)),O.a.post("/o/rest/v2/socket/web",e,{}).then((function(e){var a=e.data;t.dataSocket[a.respone]=a[a.respone],"listTableMenu"===a.respone&&t.$store.commit("setlistTableMenu",t.dataSocket[a.respone])})).catch((function(t){}))})).catch((function(n){e=new URLSearchParams,a={type:"admin",cmd:"get",responeType:"menu",code:"opencps_adminconfig",respone:"listTableMenu",start:-1,end:-1},e.append("text",JSON.stringify(a)),O.a.post("/o/rest/v2/socket/web",e,{}).then((function(e){var a=e.data;t.dataSocket[a.respone]=a[a.respone],"listTableMenu"===a.respone&&t.$store.commit("setlistTableMenu",t.dataSocket[a.respone])})).catch((function(t){}))})),window.location.href.endsWith("#/")&&t.$router.push("/table/opencps_serviceinfo")}),300)}))},computed:{problem:{get:function(){return this.$store.getters.getproblem},set:function(t){this.$store.commit("setproblem",t)}},isConnected:{get:function(){return this.$store.getters.getisConnected},set:function(t){this.$store.commit("setisConnected",t)}}},watch:{$route:function(t,e){var a=this;a.problem=!0}}})},"861c":function(t,e,a){},a51b:function(t,e,a){},c35c:function(t,e,a){},ca9a:function(t,e,a){},eab3:function(module,__webpack_exports__,__webpack_require__){"use strict";var toastr__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("854a"),toastr__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(toastr__WEBPACK_IMPORTED_MODULE_0__),axios__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("bc3a"),axios__WEBPACK_IMPORTED_MODULE_1___default=__webpack_require__.n(axios__WEBPACK_IMPORTED_MODULE_1__);function _slicedToArray(t,e){return _arrayWithHoles(t)||_iterableToArrayLimit(t,e)||_unsupportedIterableToArray(t,e)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _unsupportedIterableToArray(t,e){if(t){if("string"===typeof t)return _arrayLikeToArray(t,e);var a=Object.prototype.toString.call(t).slice(8,-1);return"Object"===a&&t.constructor&&(a=t.constructor.name),"Map"===a||"Set"===a?Array.from(t):"Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a)?_arrayLikeToArray(t,e):void 0}}function _arrayLikeToArray(t,e){(null==e||e>t.length)&&(e=t.length);for(var a=0,n=new Array(e);a<e;a++)n[a]=t[a];return n}function _iterableToArrayLimit(t,e){var a=null==t?null:"undefined"!==typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=a){var n,i,r=[],o=!0,s=!1;try{for(a=a.call(t);!(o=(n=a.next()).done);o=!0)if(r.push(n.value),e&&r.length===e)break}catch(c){s=!0,i=c}finally{try{o||null==a["return"]||a["return"]()}finally{if(s)throw i}}return r}}function _arrayWithHoles(t){if(Array.isArray(t))return t}__webpack_exports__["a"]={components:{},props:["id"],data:function(){return{reRender:!0,validFormAddServiceConfig:!1,isDvc:!1,boNganh:!1,administration:"",govAgencyList:[],govAgencyFilter:"",domainList:[],domainFilter:"",serviceInfoList:[],serviceFilter:"",levelList:[{levelName:"Mức độ 2",level:2},{levelName:"Mức độ 3",level:3},{levelName:"Mức độ 4",level:4}],levelFilter:"",serviceInstruction:"",cmOptions:{tabSize:4,mode:"text/html",theme:"base16-light",lineNumbers:!0,line:!0},serviceUrl:"",forCitizen:!1,forBusiness:!1,postalService:!1,registration:!1,rules:{required:function(t){return!!t||"Bắt buộc phải nhập."},number:function(t){var e=/^\d+$/;return e.test(t)||"Bắt buộc phải nhập kiểu số."},email:function(t){var e=/^(([^<>()[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/;return e.test(t)||"Sai định dạng thư điện tử."},passWord:function(t){var e=/^((?=.*\d)(?=.*[a-z])(?=.*[A-Z])(?=.*[@$!%*#?&])([0-9a-zA-Z@$!%*#?&]{8,}))$/;return e.test(t)||"Ít nhất 8 ký tự và có chữ hoa, chữ thường, ký tự đặc biệt @$!%*#?&"},telNo:function(t){var e=/^0([1-9]{1}\d{8})$/;return t?e.test(t)||"Số điện thoại gồm 10 ký tự 0-9, eg: 0989123456, ...":[]},syntaxError:function(t){return!t||(t=String(t).trim(),t.indexOf("</")<0||"Không được có ký tự </")},varchar50:function(t){return!t||(t=String(t).trim(),t.length<=50||"Không được nhập quá 50 ký tự")},varchar75:function(t){return!t||(t=String(t).trim(),t.length<=75||"Không được nhập quá 75 ký tự")},varchar255:function(t){return!t||(t=String(t).trim(),t.length<=255||"Không được nhập quá 255 ký tự")},varchar500:function(t){return!t||(t=String(t).trim(),t.length<=500||"Không được nhập quá 500 ký tự")},varchar2000:function(t){return!t||(t=String(t).trim(),t.length<=5e3||"Không được nhập quá 5000 ký tự")},varchar5000:function(t){return!t||(t=String(t).trim(),t.length<=5e3||"Không được nhập quá 5000 ký tự")}}}},computed:{},created:function(){var t=this;try{t.boNganh=boNganh}catch(e){}try{t.isDvc=isDvc}catch(e){}t.$nextTick((function(){if(t.getAgency(),"0"!=t.id)t.getServiceConfigDetail();else{var e=t.$router.history.current.query;t.domainFilter=e.hasOwnProperty("domainCode")&&e.domainCode?e.domainCode:"",t.serviceFilter=e.hasOwnProperty("serviceCode")&&e.serviceCode?e.serviceCode:"",t.govAgencyFilter=e.hasOwnProperty("govAgencyCode")&&e.govAgencyCode?e.govAgencyCode:"",t.administration=e.hasOwnProperty("administration")&&e.administration?e.administration:"",t.levelFilter=e.hasOwnProperty("level")&&e.level?Number(e.level):"",t.isDvc&&!t.boNganh?t.govAgencyFilter&&(t.administration&&"XA_PHUONG"===t.administration?(t.getDomains("CAP_XA"),t.getServiceInfo("CAP_XA",t.domainFilter)):(t.getDomains(t.govAgencyFilter),t.getServiceInfo(t.govAgencyFilter,t.domainFilter))):(t.getDomains(t.govAgencyFilter),t.getServiceInfo(t.govAgencyFilter,t.domainFilter)),t.reRender=!1,setTimeout((function(){t.reRender=!0}),1e3)}}))},watch:{domainFilter:function(t){var e=this;t&&e.getServiceInfo(e.govAgencyFilter,t)}},methods:{getAgency:function(){var t=this,e={};t.govAgencyList=[],t.$store.dispatch("getAgencyLists",e).then((function(e){var a=function(t){function e(t,e){return t.itemName<e.itemName?-1:t.itemName>e.itemName?1:0}return t.sort(e)};t.govAgencyList=a(e)})).catch((function(){t.govAgencyList=[]}))},getDomains:function(t){var e=this,a={agencyCode:t||""};e.domainList=[],e.$store.dispatch("getDomainDvc",a).then((function(t){e.domainList=t})).catch((function(){e.domainList=[]}))},getServiceInfo:function(t,e){var a=this,n={domain:e||"",administration:t||""};a.serviceInfoList=[],a.$store.dispatch("getServiceInfoDvc",n).then((function(t){a.serviceInfoList=t})).catch((function(){a.serviceInfoList=[]}))},getServiceConfigDetail:function(){var t=this,e={serviceConfigId:t.id};t.$store.dispatch("getServiceConfigDetailCongDvc",e).then((function(e){e&&(t.domainFilter=e.domainCode,t.serviceFilter=e.serviceInfoId,t.govAgencyFilter=e.govAgencyCode,t.serviceInstruction=e.serviceInstruction,t.levelFilter=e.serviceLevel,t.serviceUrl=e.serviceUrl,t.forCitizen=e.forCitizen,t.forBusiness=e.forBusiness,t.postalService=e.postalService,t.registration=e.registration,t.getDomains(),t.getServiceInfo(),t.reRender=!1,setTimeout((function(){t.reRender=!0}),1e3))})).catch((function(){}))},updateServiceConfig:function(t){var e=this,a={serviceConfigId:e.id,serviceInfoId:e.serviceFilter,govAgencyCode:e.govAgencyFilter,serviceInstruction:e.serviceInstruction,serviceLevel:e.levelFilter,serviceUrl:e.serviceUrl,forCitizen:e.forCitizen,forBusiness:e.forBusiness,postalService:e.postalService,registration:e.registration,receptionReport:"",type:t};e.$store.dispatch("createServiceConfigDvc",a).then((function(a){"add"===t?toastr__WEBPACK_IMPORTED_MODULE_0___default.a.success("Thêm dịch vụ công thành công"):toastr__WEBPACK_IMPORTED_MODULE_0___default.a.success("Cập nhật thành công"),e.$router.push({path:"/table/opencps_serviceconfig_dvc",query:{renew:Math.floor(100*Math.random())+1}})})).catch((function(t){toastr__WEBPACK_IMPORTED_MODULE_0___default.a.error("Yêu cầu thực hiện thất bại")}))},processRules:function processRules(rulesStr,itemData){var maxLength,syntaxErrorInput=!1,vm=this;!itemData.hasOwnProperty("type")||"text-fields"!==itemData.type&&"textarea"!==itemData.type||(maxLength=500,"textarea"===itemData.type&&(maxLength=2e3),itemData.hasOwnProperty("model")&&(itemData.model.endsWith("Code")||itemData.model.endsWith("No")||itemData.model.endsWith("Id")||"menuGroup"==itemData.model)&&(maxLength=75),"order"==itemData.model&&(maxLength=10),syntaxErrorInput=!0);var rulesInput=[];if(rulesStr){var hasRuleVarChar=rulesStr.indexOf("varchar")>=0;rulesInput=eval("( "+rulesStr+" )"),2e3!=maxLength||hasRuleVarChar||rulesInput.push(vm.rules.varchar2000),500!=maxLength||hasRuleVarChar||rulesInput.push(vm.rules.varchar500),75!=maxLength||hasRuleVarChar||rulesInput.push(vm.rules.varchar75),10!=maxLength||hasRuleVarChar||rulesInput.push(vm.rules.varchar10)}else 2e3==maxLength&&rulesInput.push(vm.rules.varchar2000),500==maxLength&&rulesInput.push(vm.rules.varchar500),75==maxLength&&rulesInput.push(vm.rules.varchar75),10==maxLength&&rulesInput.push(vm.rules.varchar10);return syntaxErrorInput&&rulesInput.push(vm.rules.syntaxError),rulesInput},getMaxLength:function(t){var e;return!t.hasOwnProperty("type")||"text-fields"!==t.type&&"textarea"!==t.type||(e=500,"textarea"===t.type&&(e=2e3),t.hasOwnProperty("model")&&(t.model.endsWith("Code")||t.model.endsWith("No")||t.model.endsWith("Id")||"menuGroup"==t.model)&&(e=75),"order"==t.model&&(e=10)),e},parsedate:function(t){var e=t.split("-"),a=_slicedToArray(e,3),n=a[0],i=a[1],r=a[2];return"".concat(r,"-").concat(i,"-").concat(n)},currentDate:function(){var t=new Date;return"".concat(t.getFullYear(),"-").concat((t.getMonth()+1).toString().padStart(2,"0"),"-").concat(t.getDate().toString().padStart(2,"0"))},changeDate:function(t){var e=this;e.menuDate1=e.menuDate2=!1,"1"===t?e.fromReceiveDateFormatted=e.formatDate(e.fromReceiveDate):"2"===t&&(e.toReceiveDateFormatted=e.formatDate(e.toReceiveDate))},getMinMax:function(t){if(!t)return null;var e=t.split("/"),a=_slicedToArray(e,3),n=a[0],i=a[1],r=a[2];return"".concat(r,"-").concat(i,"-").concat(n)},parseDate:function(t){if(!t)return"";if(String(t).indexOf("/")>0){var e=t.split("/"),a=_slicedToArray(e,3),n=a[0],i=a[1],r=a[2];return"".concat(r,"-").concat(i.padStart(2,"0"),"-").concat(n.padStart(2,"0"))}if(String(t).indexOf("-")>0){var o=t.split("-"),s=_slicedToArray(o,3),c=s[0],l=s[1],d=s[2];return"".concat(d,"-").concat(l.padStart(2,"0"),"-").concat(c.padStart(2,"0"))}var u=new Date(Number(t));return"".concat(u.getFullYear(),"-").concat((u.getMonth()+1).toString().padStart(2,"0"),"-").concat(u.getDate().toString().padStart(2,"0"))},formatDate:function(t){if(!t)return"";var e=t.split("-"),a=_slicedToArray(e,3),n=a[0],i=a[1],r=a[2];return"".concat(r,"/").concat(i,"/").concat(n)},currentDateFormat:function(t){var e=t?new Date(t):new Date;return"".concat(e.getDate().toString().padStart(2,"0"),"/").concat((e.getMonth()+1).toString().padStart(2,"0"),"/").concat(e.getFullYear()," ").concat(e.getHours().toString().padStart(2,"0"),":").concat(e.getMinutes().toString().padStart(2,"0"))},backToList:function(){window.history.back()}}}},f04e:function(module,__webpack_exports__,__webpack_require__){"use strict";function _slicedToArray(t,e){return _arrayWithHoles(t)||_iterableToArrayLimit(t,e)||_unsupportedIterableToArray(t,e)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _unsupportedIterableToArray(t,e){if(t){if("string"===typeof t)return _arrayLikeToArray(t,e);var a=Object.prototype.toString.call(t).slice(8,-1);return"Object"===a&&t.constructor&&(a=t.constructor.name),"Map"===a||"Set"===a?Array.from(t):"Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a)?_arrayLikeToArray(t,e):void 0}}function _arrayLikeToArray(t,e){(null==e||e>t.length)&&(e=t.length);for(var a=0,n=new Array(e);a<e;a++)n[a]=t[a];return n}function _iterableToArrayLimit(t,e){var a=null==t?null:"undefined"!==typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=a){var n,i,r=[],o=!0,s=!1;try{for(a=a.call(t);!(o=(n=a.next()).done);o=!0)if(r.push(n.value),e&&r.length===e)break}catch(c){s=!0,i=c}finally{try{o||null==a["return"]||a["return"]()}finally{if(s)throw i}}return r}}function _arrayWithHoles(t){if(Array.isArray(t))return t}__webpack_exports__["a"]={data:function(){return{toDateFormatted:null,toDate:null,rules:{required:function(t){return!!t||"Bắt buộc phải nhập."},number:function(t){var e=/^\d+$/;return e.test(t)||"Bắt buộc phải nhập kiểu số."},email:function(t){var e=/^(([^<>()[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/;return e.test(t)||"Sai định dạng thư điện tử."},passWord:function(t){var e=/^((?=.*\d)(?=.*[a-z])(?=.*[A-Z])(?=.*[@$!%*#?&])([0-9a-zA-Z@$!%*#?&]{8,}))$/;return e.test(t)||"Ít nhất 8 ký tự và có chữ hoa, chữ thường, ký tự đặc biệt @$!%*#?&"},telNo:function(t){var e=/^0([1-9]{1}\d{8})$/;return t?e.test(t)||"Số điện thoại gồm 10 ký tự 0-9, eg: 0989123456, ...":[]},syntaxError:function(t){return!t||(t=String(t).trim(),!(t.indexOf("</")>=0||t.indexOf("<img")>=0||t.indexOf("<script")>=0)||"Dữ liệu nhập không hợp lệ")},varchar10:function(t){return!t||(t=String(t).trim(),t.length<=10||"Không được nhập quá 10 ký tự")},varchar50:function(t){return!t||(t=String(t).trim(),t.length<=50||"Không được nhập quá 50 ký tự")},varchar75:function(t){return!t||(t=String(t).trim(),t.length<=75||"Không được nhập quá 75 ký tự")},varchar255:function(t){return!t||(t=String(t).trim(),t.length<=255||"Không được nhập quá 255 ký tự")},varchar500:function(t){return!t||(t=String(t).trim(),t.length<=500||"Không được nhập quá 500 ký tự")},varchar2000:function(t){return!t||(t=String(t).trim(),t.length<=5e3||"Không được nhập quá 5000 ký tự")},varchar5000:function(t){return!t||(t=String(t).trim(),t.length<=5e3||"Không được nhập quá 5000 ký tự")}}}},props:["value","item","dataValue","min","max"],watch:{toDate:function(t){this.toDateFormatted=this.formatDate(t),this.$emit("input",new Date(t).getTime())}},methods:{formatDate:function(t){if(!t)return null;var e=new Date(t);return e.getDate()+"/"+(e.getMonth()+1)+"/"+e.getFullYear()},parseDate:function(t){if(!t)return null;var e=t.split("/"),a=_slicedToArray(e,3),n=a[0],i=a[1],r=a[2];return"".concat(r,"-").concat(i.padStart(2,"0"),"-").concat(n.padStart(2,"0"))},processRules:function processRules(rulesStr){return eval("( "+rulesStr+" )")}}}},f0b1:function(t,e,a){"use strict";var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-layout",{staticClass:"text-center",staticStyle:{position:"relative"},attrs:{wrap:""}},[a("v-flex",{staticClass:"control-section uploader file-preview py-0",staticStyle:{position:"relative"},attrs:{xs12:""}},[a("div",{staticClass:"control_wrapper"},[a("div",{attrs:{id:"dropAreaJasper"}},[a("span",{staticClass:"droparea",staticStyle:{display:"none"},attrs:{id:"drop"}},[t._v(" Kéo thả tệp tin hoặc "),a("a",{staticStyle:{right:"20px",color:"#0064c7",position:"absolute","text-decoration":"none","font-weight":"700"},attrs:{href:"javascript:;",id:"browseJasper"}},[t._v("Chọn từ máy tính   📤")])]),a("ejs-uploader",{ref:"uploadObj",attrs:{name:"UploadFiles",allowedExtensions:t.extensions,asyncSettings:t.path,dropAreaJasper:t.dropAreaJasper,success:t.onSuccess,removing:t.onFileRemove,uploading:t.addHeaders}})],1),t.fileTotal>0?a("div",{staticClass:"e-upload-done-list"},[a("ul",{staticClass:"e-upload-files"},[a("li",{staticClass:"e-upload-file-list"},[a("div",{staticClass:"container py-2",staticStyle:{position:"relative"}},[a("span",{staticClass:"wrapper layout row wrap",staticStyle:{"line-height":"10px"}},[a("span",{class:["icon sf-icon-txt"]}),a("div",{staticClass:"name file-name",staticStyle:{"line-height":"42px","padding-left":"10px"}},[t._v("\n                File cấu hình JASPER\n              ")]),a("v-btn",{staticStyle:{position:"absolute",right:"5px",top:"8px"},attrs:{flat:"",icon:"",color:"primary",href:t.avatarData,target:"_blank",loading:t.loading,disabled:t.loading}},[a("v-icon",{attrs:{size:"14"}},[t._v("link")])],1)],1)])])])]):t._e()])])],1)},i=[],r=a("a026"),o=a("e0e8");a("7de8");r["default"].use(o["a"]);var s={data:function(){return{fileTotal:0,noAvatar:!0,avatarData:"",loadingRemove:!1,loading:!1,fileTemplateData:[],fileTemplateTotal:0,path:{saveUrl:"",removeUrl:""},extensions:".txt",dropAreaJasper:"dropAreaJasper",rawData:[],className:""}},props:["pickItem","pk","code"],created:function(){var t=this;t.$nextTick((function(){this.loadImageComponent()}))},mounted:function(){this.path={saveUrl:this.pickItem["upload_api"]+"JASPER/"+this.pk,removeUrl:this.pickItem["remove_api"]+"JASPER/"+this.pk},this.className=this.pickItem["class_name"],document.getElementById("browseJasper").onclick=function(){return document.getElementsByClassName("e-file-select-wrap")[0].querySelector("button").click(),!1}},methods:{addHeaders:function(t){var e=this;t.currentRequest.setRequestHeader("Token",e.getAuthToken()),t.currentRequest.setRequestHeader("groupId",e.getScopeGroupId())},loadImageComponent:function(){var t=this;t.fileTotal=0;var e={pk:t.pk,className:t.className};t.noAvatar=!0,t.avatarData="",t.$store.dispatch("getImageComponent",e).then((function(e){if(""!==e&&null!==e){t.noAvatar=!1;var a="";null!==window.themeDisplay&&void 0!==window.themeDisplay&&(a=themeDisplay.getPortalURL()),t.avatarData=a+e,t.fileTotal=1}}))},onSuccess:function(){var t=this;setTimeout((function(){document.getElementById("dropAreaJasper").querySelectorAll(".e-upload-success").forEach((function(t){return t.parentNode.removeChild(t)})),t.loadImageComponent()}),2e3)},onFileRemove:function(t){t.postRawFile=!1},processDownloadFileAttach:function(t){var e=this;e.loading=!0,e.$store.dispatch("downloadServiceFileTemplate",t).then((function(){e.loading=!1})).catch((function(t){e.loading=!1,alert("Tải file xảy ra lỗi."+t)}))}}},c=s,l=a("2877"),d=Object(l["a"])(c,n,i,!1,null,null,null);e["a"]=d.exports},fa98:function(t,e,a){"use strict";var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-menu",{attrs:{"close-on-content-click":!0,lazy:"",transition:"fade-transition","offset-y":"","full-width":"","max-width":"290px","min-width":"290px"}},[a("v-text-field",{attrs:{slot:"activator",box:"","append-icon":"event",rules:t.processRules(t.item.rules),value:t.formatDate(t.dataValue)},on:{blur:function(e){t.toDate=t.parseDate(t.toDateFormatted)}},slot:"activator"},[a("template",{slot:"label"},[t._v(t._s(t.item["label"])+" "),t.item.required?a("span",{staticClass:"red--text darken-3"},[t._v("*")]):t._e()])],2),a("v-date-picker",{attrs:{min:t.min,max:t.max,"no-title":""},model:{value:t.toDate,callback:function(e){t.toDate=e},expression:"toDate"}})],1)},i=[],r=a("f04e"),o=r["a"],s=a("2877"),c=Object(s["a"])(o,n,i,!1,null,null,null);e["a"]=c.exports},ff94:function(module,__webpack_exports__,__webpack_require__){"use strict";var _TinyPagination_vue__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("3f3e"),axios__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("bc3a"),axios__WEBPACK_IMPORTED_MODULE_1___default=__webpack_require__.n(axios__WEBPACK_IMPORTED_MODULE_1__),file_saver__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("21a6"),file_saver__WEBPACK_IMPORTED_MODULE_2___default=__webpack_require__.n(file_saver__WEBPACK_IMPORTED_MODULE_2__);__webpack_exports__["a"]={props:["tableName"],components:{TinyPagination:_TinyPagination_vue__WEBPACK_IMPORTED_MODULE_0__["a"]},data:function(){return{order:1,applicantType:"",backTableName:"",depen:!1,showLoadingTable:!0,nameScreen:"",showFilter:!1,breadCrumbsitems:[{text:"Bảng dữ liệu",disabled:!1},{text:"",disabled:!1}],showMenu:!1,x:0,y:0,tableData:[],tableConfig:{},dataSocket:{},currentIndex:-1,filterData:{},columnsDataFilter:[],page:1,pageTotalCounter:0,showCopy:!1,tableConfigExport:"",exportExcel:!1,showWorkingunits:!1,dialog:!1,tree:[],itemTree:[],exportLoading:!1,dataTest:[],open:[],items:[{id:1,name:"Applications :",children:[{id:2,name:"Calendar : app"},{id:3,name:"Chrome : app"},{id:4,name:"Webstorm : app"}]},{id:5,name:"Documents :",children:[{id:6,name:"vuetify :",children:[{id:7,name:"src :",children:[{id:8,name:"index : ts"},{id:9,name:"bootstrap : ts"}]}]},{id:10,name:"material2 :",children:[{id:11,name:"src :",children:[{id:12,name:"v-btn : ts"},{id:13,name:"v-card : ts"},{id:14,name:"v-window : ts"}]}]}]},{id:15,name:"Downloads :",children:[{id:16,name:"October : pdf"},{id:17,name:"November : pdf"},{id:18,name:"Tutorial : html"}]},{id:19,name:"Videos :",children:[{id:20,name:"Tutorials :",children:[{id:21,name:"Basic layouts : mp4"},{id:22,name:"Advanced techniques : mp4"},{id:23,name:"All about app : dir"}]},{id:24,name:"Intro : mov"},{id:25,name:"Conference introduction : avi"}]}],downloadFileTemplate:""}},computed:{problem:{get:function(){return this.$store.getters.getproblem},set:function(t){this.$store.commit("setproblem",t)}},isConnected:{get:function(){return this.$store.getters.getisConnected},set:function(t){this.$store.commit("setisConnected",t)}}},watch:{$route:function(t,e){var a=this;a.dataSocket={};var n=t.query;n.hasOwnProperty("state_change")&&"0"!==String(n["state_change"])&&(a.showFilter=!1),n.hasOwnProperty("page")?a.page=parseInt(n.page):a.page=1,a.showLoadingTable=!0,a.isConnected&&(a.isConnected=!1),setTimeout((function(){a.getData()}),10)}},created:function(){var t=this;t.$nextTick((function(){var e=t.$router.history.current.query;e.hasOwnProperty("page")&&"1"!==e["page"]?t.page=parseInt(e["page"]):t.page=1;var a=document.getElementById("editor-video-preloader");null!==a&&void 0!==a&&a.play(),setTimeout((function(){t.getData()}),10)}))},methods:{rePullData:function(){var t=this,e=t.$router.history.current,a=e.query,n="?";for(var i in a["state_change"]="0",a["renew"]="",a)""!==a[i]&&"undefined"!==a[i]&&void 0!==a[i]&&(n+=i+"="+a[i]+"&");n+="renew="+Math.floor(100*Math.random())+1,t.$router.push({path:e.path+n})},paggingData:function(t){var e=this,a=e.$router.history.current,n=a.query,i="?";for(var r in n["state_change"]="0",n["page"]="",n)""!==n[r]&&"undefined"!==n[r]&&void 0!==n[r]&&(i+=r+"="+n[r]+"&");i+="page="+t.page,e.$router.push({path:a.path+i})},getData:function getData(){var vm=this;if(vm.showCopy=!1,vm.exportExcel=!1,vm.showWorkingunits=!1,vm.downloadFileTemplate="",vm.showFilter||""!==vm.applicantType)for(var key in vm.filterData)vm.columnsDataFilter[key]["value_filter"]=String(vm.filterData[key]).trim(),delete vm.columnsDataFilter[key]["source"],delete vm.columnsDataFilter[key]["options"];else vm.columnsDataFilter=[];var query=vm.$router.history.current.query;if(query.hasOwnProperty("pk")){var pk_type="number";query.hasOwnProperty("pk_type")&&(pk_type=query["pk_type"]),vm.columnsDataFilter.push({key:query["col"],value_filter:String(query["pk"]).trim(),compare:"=",type:pk_type})}var dataPost=new URLSearchParams,textPost={type:"admin",cmd:"get",config:"true",code:vm.$router.history.current.params.tableName,respone:"tableConfig"};dataPost.append("text",JSON.stringify(textPost)),axios__WEBPACK_IMPORTED_MODULE_1___default.a.post("/o/rest/v2/socket/web",dataPost,{}).then((function(response){var dataObj=response.data;if(vm.tableConfigExport=dataObj,vm.dataSocket[dataObj.respone]=dataObj[dataObj.respone],null!==vm.dataSocket["tableConfig"]&&void 0!==vm.dataSocket["tableConfig"]&&"tableConfig"===dataObj.respone){if(vm.nameScreen=vm.dataSocket["tableConfig"]["name"],vm.backTableName=vm.dataSocket["tableConfig"]["dependency_title"],vm.dataSocket["tableConfig"]["detailColumns"])try{for(var detailColumns=JSON.parse(vm.dataSocket["tableConfig"]["detailColumns"]),i=0;i<detailColumns.length;i++)detailColumns[i]["showCopy"]&&(vm.showCopy=!0),detailColumns[i]["exportExcel"]&&(vm.exportExcel=!0),detailColumns[i]["showWorkingunits"]&&(vm.showWorkingunits=!0),detailColumns[i]["downloadFileTemplate"]&&(vm.downloadFileTemplate=detailColumns[i]["downloadFileTemplate"])}catch(err){}if(vm.dataSocket["tableConfig"].hasOwnProperty("dependency_title")?vm.depen=!0:vm.depen=!1,"opencps_dictitem"===vm.tableName&&query.hasOwnProperty("dictCollectionId")&&query.dictCollectionId){var objectConfig=vm.dataSocket["tableConfig"],columns=eval("( "+objectConfig.columns+" )");for(var key in columns)if("dictCollectionId"===columns[key]["key"])if(columns[key]["value_filter"]=query.dictCollectionId,vm.columnsDataFilter.length>0)for(var key in vm.columnsDataFilter)"dictCollectionId"===vm.columnsDataFilter[key]["key"]&&(vm.columnsDataFilter[key]["value_filter"]=query.dictCollectionId);else vm.columnsDataFilter.push(columns[key])}textPost="opencps_applicant"===vm.tableName?{type:"admin",cmd:"get",code:vm.$router.history.current.params.tableName,respone:"tableData",filter:vm.columnsDataFilter,sort:vm.order?"activationCode_desc":"activationCode_asc",start:10*vm.page-10,end:10*vm.page}:"opencps_userlogin"===vm.tableName?{type:"admin",cmd:"get",code:vm.$router.history.current.params.tableName,respone:"tableData",filter:vm.columnsDataFilter,sort:vm.order?"createDate_desc":"createDate_asc",start:10*vm.page-10,end:10*vm.page}:{type:"admin",cmd:"get",code:vm.$router.history.current.params.tableName,respone:"tableData",filter:vm.columnsDataFilter,start:10*vm.page-10,end:10*vm.page},dataPost=new URLSearchParams,dataPost.append("text",JSON.stringify(textPost)),axios__WEBPACK_IMPORTED_MODULE_1___default.a.post("/o/rest/v2/socket/web",dataPost,{}).then((function(t){var e=t.data;vm.dataSocket[e.respone]=e[e.respone],null===vm.dataSocket["tableConfig"]||void 0===vm.dataSocket["tableConfig"]||null===vm.dataSocket["tableData"]||void 0===vm.dataSocket["tableData"]||"tableData"!==e.respone&&"tableConfig"!==e.respone||(vm.nameScreen=vm.dataSocket["tableConfig"]["name"],vm.backTableName=vm.dataSocket["tableConfig"]["dependency_title"],vm.dataSocket["tableConfig"].hasOwnProperty("dependency_title")?vm.depen=!0:vm.depen=!1,vm.generateTable(),vm.showLoadingTable=!1)})).catch((function(t){})),textPost={type:"admin",cmd:"get",counter:"true",code:vm.$router.history.current.params.tableName,respone:"pageTotalCounter",filter:vm.columnsDataFilter},dataPost=new URLSearchParams,dataPost.append("text",JSON.stringify(textPost)),axios__WEBPACK_IMPORTED_MODULE_1___default.a.post("/o/rest/v2/socket/web",dataPost,{}).then((function(t){var e=t.data;if(vm.dataSocket[e.respone]=e[e.respone],"pageTotalCounter"===e.respone?(vm.pageTotalCounter=parseInt(vm.dataSocket["pageTotalCounter"]),vm.showLoadingTable=!1):"loginUser"===e.respone?vm.$store.commit("setloginUser",e["loginUser"]):"listTableMenu"===e.respone&&vm.$store.commit("setlistTableMenu",vm.dataSocket[e.respone]),"get"!==e["cmd"]){var a=vm.$router.history.current,n=a.query,i="?";for(var r in n["state_change"]="0",n["renew"]="",n)""!==n[r]&&"undefined"!==n[r]&&void 0!==n[r]&&(i+=r+"="+n[r]+"&");i+="renew="+Math.floor(100*Math.random())+1,vm.$router.push({path:a.path.substring(0,a.path.indexOf("/editor/"))+i})}})).catch((function(t){}))}})).catch((function(t){})),vm.problem=!0},show:function(t){var e=this;void 0!==t&&null!==t?(t.preventDefault(),this.showMenu=!1,this.x=t.clientX,this.y=t.clientY,this.$nextTick((function(){e.showMenu=!0}))):(this.showMenu=!1,this.$nextTick((function(){e.showMenu=!0})))},addFilterRow:function addFilterRow(){var vm=this;if(vm.showFilter=!vm.showFilter,vm.showFilter){var dataFilter=[],objectConfig=vm.dataSocket["tableConfig"],columns=eval("( "+objectConfig.columns+" )"),colWidths=[],colAlignments=[];for(var key in columns)"checkbox"===columns[key]["type"]?dataFilter.push(!1):dataFilter.push(""),colWidths.push(columns[key]["width"]),colAlignments.push(columns[key]["colAlignments"]);window.$("#table_filter_"+vm.tableName).jexcel({data:[dataFilter],colHeaders:objectConfig.headersName,colWidths:colWidths,colAlignments:colAlignments,allowInsertRow:!1,allowManualInsertRow:!1,allowInsertColumn:!1,allowManualInsertColumn:!1,allowDeleteRow:!1,allowDeleteColumn:!1,contextMenu:function(){vm.show(window.event)},onchange:function(t,e,a){var n=e[0].cellIndex-1;vm.filterData[n]=a;var i=vm.$router.history.current,r=i.query,o="?";for(var s in r["page"]=1,r["state_change"]="0",r["renew"]="",r)""!==r[s]&&"undefined"!==r[s]&&void 0!==r[s]&&(o+=s+"="+r[s]+"&");o+="renew="+Math.floor(100*Math.random())+1,vm.$router.push({path:i.path+o})},columns:columns})}else window.$("#table_filter_"+vm.tableName).jexcel("destroy")},generateTable:function generateTable(){var vm=this,objectConfig=vm.dataSocket["tableConfig"],columns=eval("( "+objectConfig.columns+" )"),colWidths=[],colAlignments=[];for(var key in columns)colWidths.push(columns[key]["width"]),colAlignments.push(columns[key]["colAlignments"]);vm.columnsDataFilter=columns;var dataEnCode=vm.dataSocket["tableData"];if(dataEnCode.length>0)for(var _key3 in dataEnCode)if(dataEnCode[_key3].length>0)for(var index in dataEnCode[_key3])dataEnCode[_key3][index]=String(dataEnCode[_key3][index]).replace(/\</g,"&lt;").replace(/\>/g,"%gt;");window.$("#table_database_"+vm.tableName).jexcel({data:dataEnCode,colHeaders:objectConfig.headersName,colWidths:colWidths,colAlignments:colAlignments,updateSelection:function(){return!1},onselection:function(t,e){var a=window.$(t).jexcel("getColumnNameFromId",window.$(e).prop("id"));vm.currentIndex=a.substring(1)-1},contextMenu:function(){vm.show(window.event)},onsort:function(t,e,a){var n=columns[e]["column"];vm.order=a,vm.page=1,vm.setDataJexcel(n)},closeEditor:function(t,e){var a=t.children[0].value;return t.innerHTML=a,a},columns:columns}),vm.problem=!1},setDataJexcel:function(t){var e=this,a={},n=e.order?"_desc":"_asc";a={type:"admin",cmd:"get",code:e.$router.history.current.params.tableName,respone:"tableData",filter:e.columnsDataFilter,sort:t+n,start:10*e.page-10,end:10*e.page};var i=new URLSearchParams;i.append("text",JSON.stringify(a)),axios__WEBPACK_IMPORTED_MODULE_1___default.a.post("/o/rest/v2/socket/web",i,{}).then((function(t){var a=t.data;e.dataSocket[a.respone]=a[a.respone],null===e.dataSocket["tableConfig"]||void 0===e.dataSocket["tableConfig"]||null===e.dataSocket["tableData"]||void 0===e.dataSocket["tableData"]||"tableData"!==a.respone&&"tableConfig"!==a.respone||window.$("#table_database_"+e.tableName).jexcel("setData",e.dataSocket["tableData"],!1)})).catch((function(t){}))},toEditor:function(t){var e=this,a=0;if(-1===t){var n=e.dataSocket["tableData"];a=n[e.currentIndex][0]}else a=t;var i=e.$router.history.current,r=i.query;e.dataSocket["tableConfig"]["extForm"]?e.$router.push({path:"/table/"+e.tableName+"/ext/editor/"+a,query:r}):e.$router.push({path:"/table/"+e.tableName+"/editor/"+a,query:r})},backToCode:function(){var t=this,e=t.$router.history.current.query;t.$router.push({path:t.dataSocket["tableConfig"]["dependency_link"]+"/"+e["pk"]})},copyRecord:function(t){var e=this,a=0;if(-1===t){var n=e.dataSocket["tableData"];a=n[e.currentIndex][0]}else a=t;var i=e.$router.history.current,r=i.query;r["idCopy"]=a,e.dataSocket["tableConfig"]["extForm"]?e.$router.push({path:"/table/"+e.tableName+"/ext/editor/0",query:r}):e.$router.push({path:"/table/"+e.tableName+"/editor/0",query:r})},deleteRecord:function(){var t=this,e=confirm("Bạn có muốn xoá bản ghi này?");if(e){var a=0,n=t.dataSocket["tableData"];a=n[t.currentIndex][0];var i=new URLSearchParams,r={type:"admin",cmd:"delete",respone:"detail",id:a,code:t.$router.history.current.params.tableName};i=new URLSearchParams,i.append("text",JSON.stringify(r)),axios__WEBPACK_IMPORTED_MODULE_1___default.a.post("/o/rest/v2/socket/web",i,{}).then((function(e){var a=e.data;if(t.dataSocket[a.respone]=a[a.respone],"get"!==a["cmd"]){var n=t.$router.history.current,i=n.query,r="?";for(var o in i["state_change"]="0",i["renew"]="",i)""!==i[o]&&"undefined"!==i[o]&&void 0!==i[o]&&(r+=o+"="+i[o]+"&");r+="renew="+Math.floor(100*Math.random())+1,t.$router.push({path:n.path.substring(0,n.path.indexOf("/editor/"))+r})}})).catch((function(t){}))}},toBieuDoQuyTrinh:function(){var t=this,e=0,a=t.dataSocket["tableData"];e=a[t.currentIndex][0];var n=t.$router.history.current,i=n.query;t.$router.push({path:"/table/"+t.tableName+"/flowchart/"+e,query:i})},cloneServiceProcess:function(){var t=this.dataSocket["tableData"][this.currentIndex];this.$emit("cloneProcess",t[0],t[1],t[2])},cloneMauHoSo:function(){var t=this.dataSocket["tableData"][this.currentIndex];this.$emit("cloneTemplate",t[0],t[1],t[2])},filterApplicantType:function(t){var e=this;e.applicantType=t,e.filterData[1]=t;var a=e.$router.history.current,n=a.query,i="?";for(var r in n["page"]=1,n["state_change"]="0",n["renew"]="",n)""!==n[r]&&"undefined"!==n[r]&&void 0!==n[r]&&(i+=r+"="+n[r]+"&");i+="renew="+Math.floor(100*Math.random())+1,e.$router.push({path:a.path+i})},exportTableData:function(){var t=this,e={type:"admin",cmd:"get",code:t.$router.history.current.params.tableName,respone:"tableData",filter:[],start:-1,end:-1},a={headers:{groupId:window.themeDisplay.getScopeGroupId(),Token:void 0!==window.Liferay?window.Liferay.authToken:"","Content-Type":"application/x-www-form-urlencoded",Accept:"application/json"},responseType:"blob"},n=new URLSearchParams;n.append("columnName",JSON.stringify(t.tableConfigExport)),n.append("content",JSON.stringify(e)),t.exportLoading=!0,axios__WEBPACK_IMPORTED_MODULE_1___default.a.post("/o/rest/v2/socket/web/export-excel",n,a).then((function(e){t.exportLoading=!1;var a=e.headers["content-disposition"],n=a.split("filename=")[1]||dataReq.fileName;n=n.split('"').join("");var i=document.createElement("a");document.body.appendChild(i),i.style="display: none";var r=window.URL.createObjectURL(e.data);i.href=r,i.download=n,i.click(),window.URL.revokeObjectURL(r)})).catch((function(e){t.exportLoading=!1}))},getWorkingunits:function(){var t=this;t.dialog=!0;var e={headers:{groupId:window.themeDisplay.getScopeGroupId(),Token:void 0!==window.Liferay?window.Liferay.authToken:""}};axios__WEBPACK_IMPORTED_MODULE_1___default.a.get("/o/rest/v2/workingunits",e).then((function(e){var a=e.data.data;t.itemTree=t.list_to_tree(a,"workingUnitId","parentWorkingUnitId")})).catch((function(t){}))},list_to_tree:function(t,e,a){var n,i,r={},o=[];for(i=0;i<t.length;i+=1)r[t[i][e]]=i,t[i]["children"]=[];for(i=0;i<t.length;i+=1)n=t[i],0!==n[a]?t[r[n[a]]].children.push(n):o.push(n);return o},downloadFile:function(t){var e=document.createElement("a");e.href=t,document.body.appendChild(e),e.click()},backToList:function(){var t=this;t.$router.go(-1)}}}}});