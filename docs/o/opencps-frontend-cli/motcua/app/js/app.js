(function(t){function e(e){for(var i,s,r=e[0],c=e[1],l=e[2],u=0,h=[];u<r.length;u++)s=r[u],Object.prototype.hasOwnProperty.call(o,s)&&o[s]&&h.push(o[s][0]),o[s]=0;for(i in c)Object.prototype.hasOwnProperty.call(c,i)&&(t[i]=c[i]);d&&d(e);while(h.length)h.shift()();return n.push.apply(n,l||[]),a()}function a(){for(var t,e=0;e<n.length;e++){for(var a=n[e],i=!0,r=1;r<a.length;r++){var c=a[r];0!==o[c]&&(i=!1)}i&&(n.splice(e--,1),t=s(s.s=a[0]))}return t}var i={},o={app:0},n=[];function s(e){if(i[e])return i[e].exports;var a=i[e]={i:e,l:!1,exports:{}};return t[e].call(a.exports,a,a.exports,s),a.l=!0,a.exports}s.m=t,s.c=i,s.d=function(t,e,a){s.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:a})},s.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},s.t=function(t,e){if(1&e&&(t=s(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var a=Object.create(null);if(s.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)s.d(a,i,function(e){return t[e]}.bind(null,i));return a},s.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return s.d(e,"a",e),e},s.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},s.p="/";var r=window["webpackJsonp"]=window["webpackJsonp"]||[],c=r.push.bind(r);r.push=e,r=r.slice();for(var l=0;l<r.length;l++)e(r[l]);var d=c;n.push(["56d7","chunk-vendors"]),a()})({"0838":function(t,e,a){"use strict";var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"phancong",staticStyle:{"background-color":"white",width:"100%"}},[a("v-expansion-panel",{staticClass:"expansion-pl",attrs:{value:[!0],expand:""}},[a("v-expansion-panel-content",[a("div",{attrs:{slot:"header"},slot:"header"},[a("div",{staticClass:"background-triangle-small"},[a("v-icon",{attrs:{size:"18",color:"white"}},[t._v("star_rate")])],1),t._v("Ngày hẹn trả\n      ")]),a("v-card",[a("v-card-text",[a("v-layout",{staticClass:"pl-2",attrs:{wrap:""}},[a("v-icon",{staticClass:"hover-pointer",attrs:{color:"primary"},on:{click:t.showDatePicker}},[t._v("event")]),a("vue-ctk-date-time-picker",{ref:"datepicker",staticClass:"ml-2",staticStyle:{width:"auto!important"},attrs:{format:"YYYY-MM-DDTHH:mm","time-format":"HH:mm","without-header":!0,formatted:"DD/MM/YYYY HH:mm",label:t.dueDateInput?"":"Chọn ngày","min-date":t.minDate,locale:"vi"},model:{value:t.dueDateInput,callback:function(e){t.dueDateInput=e},expression:"dueDateInput"}})],1)],1)],1)],1)],1)],1)},o=[],n=window.VueCtkDateTimePicker?window.VueCtkDateTimePicker.default:window["vue-ctk-date-time-picker"],s={components:{"vue-ctk-date-time-picker":n},props:["dueDateEdit"],data:function(){return{dueDateInput:"",minDate:null}},created:function(){var t=this;t.dueDateInput=t.dueDateEdit?t.formatDateInput(t.dueDateEdit):"",console.log("dueDateInput",t.dueDateInput)},watch:{},mounted:function(){this.dueDateInput=this.dueDateEdit?this.formatDateInput(this.dueDateEdit):"",console.log("dueDateInput",this.dueDateInput),this.minDate=this.getCurentDateTime("date")},methods:{getDateInput:function(){var t=this;console.log("vm.dueDateInput",t.dueDateInput);var e=t.dueDateInput?new Date(t.dueDateInput).getTime():"";return e},getCurentDateTime:function(t){var e=new Date;return"datetime"===t?"".concat(e.getDate().toString().padStart(2,"0"),"/").concat((e.getMonth()+1).toString().padStart(2,"0"),"/").concat(e.getFullYear()," | ").concat(e.getHours().toString().padStart(2,"0"),":").concat(e.getMinutes().toString().padStart(2,"0")):"date"===t?"".concat(e.getFullYear(),"-").concat((e.getMonth()+1).toString().padStart(2,"0"),"-").concat(e.getDate().toString().padStart(2,"0")):void 0},formatDateInput:function(t){return"".concat(t.getFullYear(),"-").concat((t.getMonth()+1).toString().padStart(2,"0"),"-").concat(t.getDate().toString().padStart(2,"0")," ").concat(t.getHours().toString().padStart(2,"0"),":").concat(t.getMinutes().toString().padStart(2,"0"))},showDatePicker:function(){this.$refs.datepicker.showDatePicker()}}},r=s,c=a("2877"),l=a("6544"),d=a.n(l),u=a("b0af"),h=a("99d9"),p=a("cd55"),m=a("49e2"),g=a("132d"),v=a("a722"),f=Object(c["a"])(r,i,o,!1,null,null,null);e["a"]=f.exports;d()(f,{VCard:u["a"],VCardText:h["b"],VExpansionPanel:p["a"],VExpansionPanelContent:m["a"],VIcon:g["a"],VLayout:v["a"]})},1136:function(t,e,a){"use strict";var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("v-expansion-panel",{attrs:{value:[!0],expand:""}},[a("v-expansion-panel-content",[a("div",{attrs:{slot:"header"},slot:"header"},[a("div",{staticClass:"background-triangle-small"},[a("v-icon",{attrs:{size:"18",color:"white"}},[t._v("star_rate")])],1),t._v("Thông tin chung hồ sơ")]),t.mauCongVan?t._e():a("v-card",[a("v-card-text",{staticClass:"py-0"},[a("v-layout",{staticClass:"px-2 py-2",attrs:{wrap:""}},[1!==t.originality?a("v-flex",{staticClass:"pr-3",staticStyle:{"word-break":"break-word"},attrs:{xs12:"",sm4:""}},[a("div",{staticClass:"xs12 sm12 pb-1"},[a("span",{staticClass:"pr-2"},[t._v("Chủ hồ sơ: ")]),a("v-tooltip",{attrs:{top:""}},[a("span",{staticClass:"text-bold "},[t._v(t._s(t.thongTinChiTietHoSo.applicantName))]),a("span",{staticClass:"pl-0 text-bold",attrs:{slot:"activator"},slot:"activator"},[t._v(" "+t._s(t.thongTinChiTietHoSo.applicantName.length>100?t.thongTinChiTietHoSo.applicantName.substr(0,100)+"...":t.thongTinChiTietHoSo.applicantName))])])],1),a("div",{staticClass:"xs12 sm12 pb-1"},[a("span",{staticClass:"pr-2"},[t._v("Số CMND/ căn cước: ")]),a("span",{staticClass:"pl-0 text-bold"},[t._v(" "+t._s(t.thongTinChiTietHoSo.applicantIdNo))])]),a("div",{staticClass:"xs12 sm12 pb-1 overHidden"},[a("span",{staticClass:"pr-2"},[t._v("Địa chỉ: ")]),a("v-tooltip",{attrs:{top:""}},[a("span",{staticClass:"text-bold ",attrs:{slot:"activator"},slot:"activator"},[t._v(t._s(String(t.thongTinChiTietHoSo.address).replace(/\./g,"").length<100?String(t.thongTinChiTietHoSo.address).replace(/\./g,""):String(t.thongTinChiTietHoSo.address).replace(/\./g,"").substr(100)+"...")+" "+t._s(t.thongTinChiTietHoSo.wardName)+"\n                    "),t.thongTinChiTietHoSo.wardName?a("span",[t._v(", "+t._s(t.thongTinChiTietHoSo.districtName)+", "+t._s(t.thongTinChiTietHoSo.cityName))]):t._e()]),a("span",{staticClass:"pl-0"},[t._v(" "+t._s(String(t.thongTinChiTietHoSo.address).replace(/\./g,""))+" "+t._s(t.thongTinChiTietHoSo.wardName)),t.thongTinChiTietHoSo.wardName?a("span",[t._v(", "+t._s(t.thongTinChiTietHoSo.districtName)+", "+t._s(t.thongTinChiTietHoSo.cityName))]):t._e()])])],1),a("div",{staticClass:"xs12 sm12 pb-1"},[a("span",{staticClass:"pl-0"},[t._v("Thư điện tử: ")]),a("span",{staticClass:"pl-0 text-bold "},[t._v(" "+t._s(t.thongTinChiTietHoSo.contactEmail)+" ")])]),a("div",{staticClass:"xs12 sm12 pb-1"},[a("span",{staticClass:"pr-2"},[t._v("Điện thoại: ")]),a("span",{staticClass:"pl-0 text-bold "},[t._v(" "+t._s(t.thongTinChiTietHoSo.contactTelNo)+" ")])]),a("div",{staticClass:"xs12 sm12 pb-1"},[a("v-menu",{staticStyle:{position:"relative !important"},attrs:{"offset-y":""}},[a("span",{staticClass:"pr-2",attrs:{slot:"activator"},slot:"activator"},[t._v("\n                    Thông tin người nộp\n                    "),a("v-icon",{staticStyle:{position:"absolute",right:"-12px",top:"-2px"},attrs:{color:"blue",size:"22"}},[t._v("arrow_drop_down")])],1),a("v-list",{staticClass:"px-3 py-2"},[a("div",{staticClass:"xs12 sm12 py-1"},[a("span",{staticClass:"pr-2"},[t._v("Tên người nộp:")]),t.thongTinChiTietHoSo.online?a("span",{staticClass:"pl-0 text-bold"},[t._v(" \n                        "+t._s(t.thongTinChiTietHoSo.applicantName)+"\n                      ")]):a("span",{staticClass:"pl-0 text-bold "},[t._v(" "+t._s(t.thongTinChiTietHoSo.delegateName)+" ")])]),a("div",{staticClass:"xs12 sm12 py-1"},[a("span",{staticClass:"pr-2"},[t._v("Số CMND/ căn cước: ")]),t.thongTinChiTietHoSo.online?a("span",{staticClass:"pl-0 text-bold"},[t._v(" \n                        "+t._s(t.thongTinChiTietHoSo.applicantIdNo)+"\n                      ")]):a("span",{staticClass:"pl-0 text-bold "},[t._v(" "+t._s(t.thongTinChiTietHoSo.delegateIdNo)+" ")])]),a("div",{staticClass:"xs12 sm12 py-1"},[a("span",{staticClass:"pr-2"},[t._v("Địa chỉ:")]),t.thongTinChiTietHoSo.online?a("span",{staticClass:"pl-0 text-bold"},[t._v(" \n                        "+t._s(String(t.thongTinChiTietHoSo.address).replace(/\./g,""))+" "+t._s(t.thongTinChiTietHoSo.wardName)+"\n                        "),t.thongTinChiTietHoSo.wardName?a("span",[t._v(", "+t._s(t.thongTinChiTietHoSo.districtName)+", "+t._s(t.thongTinChiTietHoSo.cityName))]):t._e()]):a("span",{staticClass:"pl-0 text-bold"},[t._v(" \n                        "+t._s(String(t.thongTinChiTietHoSo.delegateAddress).replace(/\./g,""))+" "+t._s(t.thongTinChiTietHoSo.delegateWardName)+"\n                        "),t.thongTinChiTietHoSo.delegateWardName?a("span",[t._v(", "+t._s(t.thongTinChiTietHoSo.delegateDistrictName)+", "+t._s(t.thongTinChiTietHoSo.delegateCityName))]):t._e()])]),a("div",{staticClass:"xs12 sm12 py-1"},[a("span",{staticClass:"pr-2"},[t._v("Thư điện tử:")]),t.thongTinChiTietHoSo.online?a("span",{staticClass:"pl-0 text-bold "},[t._v(" "+t._s(t.thongTinChiTietHoSo.contactEmail)+" ")]):a("span",{staticClass:"pl-0 text-bold "},[t._v(" "+t._s(t.thongTinChiTietHoSo.delegateEmail)+" ")])]),a("div",{staticClass:"xs12 sm12 py-1"},[a("span",{staticClass:"pr-2"},[t._v("Số điện thoại:")]),t.thongTinChiTietHoSo.online?a("span",{staticClass:"pl-0 text-bold "},[t._v(" "+t._s(t.thongTinChiTietHoSo.contactTelNo)+" ")]):a("span",{staticClass:"pl-0 text-bold "},[t._v(" "+t._s(t.thongTinChiTietHoSo.delegateTelNo)+" ")])])])],1)],1)]):t._e(),1===t.originality?a("v-flex",{staticClass:"pr-3",staticStyle:{"word-break":"break-word"},attrs:{xs12:"",sm4:""}},[a("div",{staticClass:"xs12 sm12 pb-1"},[a("span",{staticClass:"pr-2"},[t._v("Mã hồ sơ: ")]),a("span",{staticClass:"pl-0 text-bold "},[t._v("  "+t._s(t.thongTinChiTietHoSo.dossierNo)+" ")])]),a("div",{staticClass:"xs12 sm12 pb-1"},[a("span",{staticClass:"pr-2"},[t._v("Cơ quan: ")]),a("span",{staticClass:"pl-0 text-bold "},[t._v("  "+t._s(t.thongTinChiTietHoSo.govAgencyName)+" ")])]),a("div",{staticClass:"xs12 sm12 pb-1"},[a("span",{staticClass:"pr-2"},[t._v("Trạng thái: ")]),a("span",{staticClass:"pl-0 text-bold "},[t._v(" "+t._s(t.thongTinChiTietHoSo.dossierStatusText)+" ")])])]):t._e(),1!==t.originality?a("v-flex",{staticStyle:{"word-break":"break-word"},attrs:{xs12:"",sm4:""}},[a("div",{staticClass:"xs12 sm12 pb-1"},[t.thongTinChiTietHoSo.online?a("span",{staticClass:"pr-2"},[t._v("Ngày gửi trực tuyến: ")]):a("span",{staticClass:"pr-2"},[t._v("Ngày nộp hồ sơ: ")]),t.thongTinChiTietHoSo.online?a("span",{staticClass:"pl-0 text-bold"},[t._v(" "+t._s(t.thongTinChiTietHoSo.submitDate)+" ")]):a("span",{staticClass:"pl-0 text-bold"},[t._v(" "+t._s(t.thongTinChiTietHoSo.receiveDate)+" ")])]),a("div",{staticClass:"xs12 sm12 pb-1"},[a("span",{staticClass:"pr-2"},[t._v("Ngày tiếp nhận: ")]),a("span",{staticClass:"pl-0 text-bold "},[t._v(" "+t._s(t.thongTinChiTietHoSo.receiveDate))])]),a("div",{staticClass:"xs12 sm12 pb-1"},[a("span",{staticClass:"pr-2"},[t._v("Thời hạn giải quyết: ")]),t.thongTinChiTietHoSo.durationCount>0?a("span",{staticClass:"pl-0 text-bold "},[t._v(" \n                  "+t._s(t.durationText(t.thongTinChiTietHoSo.durationUnit,t.thongTinChiTietHoSo.durationCount))+" làm việc \n                ")]):a("span",{staticClass:"pl-0 text-bold "},[t._v("\n                  Không quy định\n                ")])]),a("div",{staticClass:"xs12 sm12 pb-1"},[a("span",{staticClass:"pr-2"},[t._v("Ngày hẹn trả: ")]),a("span",{staticClass:"pl-0 text-bold "},[t._v(" "+t._s(t.thongTinChiTietHoSo.dueDate))])])]):a("v-flex",{attrs:{xs12:"",sm4:""}},[a("div",{staticClass:"xs12 sm12 pb-1"},[t.thongTinChiTietHoSo.online?a("span",{staticClass:"pr-2"},[t._v("Ngày gửi trực tuyến: ")]):a("span",{staticClass:"pr-2"},[t._v("Ngày nộp hồ sơ: ")]),t.thongTinChiTietHoSo.online?a("span",{staticClass:"pl-0 text-bold"},[t._v(" "+t._s(t.thongTinChiTietHoSo.submitDate)+" ")]):a("span",{staticClass:"pl-0 text-bold"},[t._v(" "+t._s(t.thongTinChiTietHoSo.receiveDate)+" ")])]),a("div",{staticClass:"xs12 sm12 pb-1"},[a("span",{staticClass:"pr-2"},[t._v("Ngày tiếp nhận: ")]),a("span",{staticClass:"pl-0 text-bold "},[t._v(" "+t._s(t.thongTinChiTietHoSo.receiveDate))])]),a("div",{staticClass:"xs12 sm12 pb-1"},[a("span",{staticClass:"pr-2"},[t._v("Ngày hẹn trả: ")]),a("span",{staticClass:"pl-0 text-bold "},[t._v(" "+t._s(t.thongTinChiTietHoSo.dueDate))])])]),1!==t.originality?a("v-flex",{staticStyle:{"word-break":"break-word"},attrs:{xs12:"",sm4:""}},[a("div",{staticClass:"xs12 sm12 pb-1"},[a("span",{staticClass:"pr-2"},[t._v("Mã hồ sơ: ")]),a("span",{staticClass:"pl-0 text-bold "},[t._v("  "+t._s(t.thongTinChiTietHoSo.dossierNo)+" ")])]),t.thongTinChiTietHoSo.originDossierNo?a("div",{staticClass:"xs12 sm12 pb-1"},[a("span",{staticClass:"pr-2"},[t._v("Hồ sơ gốc: ")]),a("span",{staticClass:"pl-0 text-bold "},[t._v("  "+t._s(t.thongTinChiTietHoSo.originDossierNo)+" ")])]):t._e(),a("div",{staticClass:"xs12 sm12 pb-1"},[a("span",{staticClass:"pr-2"},[t._v("Trạng thái: ")]),a("span",{staticClass:"pl-0 text-bold "},[t._v(" "+t._s(t.thongTinChiTietHoSo.dossierStatusText)+" ")])]),t.checkSoBan(t.thongTinChiTietHoSo)&&"paying"===t.thongTinChiTietHoSo.dossierStatus&&t.xacthuc_BNG?a("div",{staticClass:"xs12 sm12 pb-1"},[a("span",{staticClass:"pr-2"},[t._v("Số bản: ")]),a("span",{staticClass:"pl-0 text-bold "},[t._v(" "+t._s(JSON.parse(t.thongTinChiTietHoSo.metaData).tongSoBan)+" bản")])]):t._e(),t.checkTongSoTien(t.thongTinChiTietHoSo)&&"paying"===t.thongTinChiTietHoSo.dossierStatus&&t.xacthuc_BNG?a("div",{staticClass:"xs12 sm12 pb-1"},[a("span",{staticClass:"pr-2"},[t._v("Tổng số tiền: ")]),a("span",{staticClass:"pl-0 text-bold "},[t._v(" "+t._s(t.formarMoney(JSON.parse(t.thongTinChiTietHoSo.metaData).tongSoTien)))])]):t._e(),t.thongTinChiTietHoSo.dossierNote&&"null"!==t.thongTinChiTietHoSo.dossierNote&&t.thongTinChiTietHoSo.dossierNote.indexOf("<br/>")<0&&t.thongTinChiTietHoSo.dossierNote.indexOf("</br>")<0?a("div",{staticClass:"xs12 sm12 pb-1",staticStyle:{color:"#0b72ba"}},[t._v("\n                Ghi chú:\n              ")]):t._e(),t.thongTinChiTietHoSo.dossierNote&&"null"!==t.thongTinChiTietHoSo.dossierNote&&t.thongTinChiTietHoSo.dossierNote.indexOf("<br/>")<0&&t.thongTinChiTietHoSo.dossierNote.indexOf("</br>")<0?a("div",{staticClass:"xs12 sm12 pb-1 overHidden"},[a("v-tooltip",{attrs:{top:""}},[a("span",{staticClass:"text-bold ",attrs:{slot:"activator"},slot:"activator"},[t._v(t._s(t.thongTinChiTietHoSo.dossierNote)+" ")]),a("span",{staticClass:"pl-0"},[t._v(" "+t._s(t.thongTinChiTietHoSo.dossierNote)+" ")])])],1):t._e(),t.thongTinChiTietHoSo["groupDossierId"]&&!t.mauCongVan?a("div",{staticClass:"xs12 sm12 pb-1"},[a("span",{staticClass:"pr-2"},[t._v("Nhóm hồ sơ: ")]),a("span",{staticClass:"pl-0 text-bold",style:t.thongTinChiTietHoSo["permission"].indexOf("write")>=0?"cursor: pointer; color: #0072bc":"",attrs:{title:t.thongTinChiTietHoSo["permission"].indexOf("write")>=0?"Chi tiết nhóm hồ sơ":""},on:{click:t.detailGroup}},[t._v("\n                  "+t._s(t.groupDossierName)+"\n                ")])]):t._e(),t.thongTinChiTietHoSo.dossierNote&&"null"!==t.thongTinChiTietHoSo.dossierNote&&t.thongTinChiTietHoSo.dossierNote.indexOf("<br/>")<0&&t.thongTinChiTietHoSo.dossierNote.indexOf("</br>")<0?a("div",{staticClass:"xs12 sm12 pb-1",staticStyle:{color:"#0b72ba"}},[t._v("\n                Ghi chú:\n              ")]):t._e()]):a("v-flex",{staticStyle:{"word-break":"break-word"},attrs:{xs12:"",sm4:""}},[t.thongTinChiTietHoSo.dossierNote&&"null"!==t.thongTinChiTietHoSo.dossierNote&&t.thongTinChiTietHoSo.dossierNote.indexOf("<br/>")<0&&t.thongTinChiTietHoSo.dossierNote.indexOf("</br>")<0?a("div",{staticClass:"xs12 sm12 pb-1",staticStyle:{color:"#0b72ba"}},[t._v("\n                Ghi chú:\n              ")]):t._e(),t.thongTinChiTietHoSo.dossierNote&&"null"!==t.thongTinChiTietHoSo.dossierNote&&t.thongTinChiTietHoSo.dossierNote.indexOf("<br/>")<0&&t.thongTinChiTietHoSo.dossierNote.indexOf("</br>")<0?a("div",{staticClass:"xs12 sm12 pb-1 overHidden"},[a("v-tooltip",{attrs:{top:""}},[a("span",{staticClass:"text-bold ",attrs:{slot:"activator"},slot:"activator"},[t._v(t._s(t.thongTinChiTietHoSo.dossierNote)+" ")]),a("span",{staticClass:"pl-0"},[t._v(" "+t._s(t.thongTinChiTietHoSo.dossierNote)+" ")])])],1):t._e(),t.thongTinChiTietHoSo.extendDate?a("div",{staticClass:"xs12 sm12 pb-1"},[a("span",{staticClass:"pl-0 text-bold"},[t._v("Hẹn lại: "+t._s(t.thongTinChiTietHoSo.extendDate))])]):t._e()])],1)],1)],1),t.mauCongVan?a("v-card",[a("v-card-text",{staticClass:"py-0"},[a("v-layout",{staticClass:"px-2 py-2",attrs:{wrap:""}},[a("v-flex",{staticClass:"pr-3",attrs:{xs12:"",sm4:""}},[a("div",{staticClass:"xs12 sm12 pb-1"},[a("span",{staticClass:"pr-2"},[t._v("Chủ hồ sơ: ")]),a("span",{staticClass:"pl-0 text-bold"},[t._v(" "+t._s(t.thongTinChiTietHoSo.applicantName))])]),a("div",{staticClass:"xs12 sm12 pb-1"},[a("span",{staticClass:"pr-2"},[t._v("Số CMND/ căn cước: ")]),a("span",{staticClass:"pl-0 text-bold"},[t._v(" "+t._s(t.thongTinChiTietHoSo.applicantIdNo))])]),a("div",{staticClass:"xs12 sm12 pb-1"},[a("span",{staticClass:"pr-2"},[t._v("Giới tính: ")]),a("span",{staticClass:"pl-0 text-bold"},[t._v(" "+t._s(0===t.metaData.gender?"Nam":"Nữ"))])]),a("div",{staticClass:"xs12 sm12 pb-1"},[a("span",{staticClass:"pr-2"},[t._v("Ngày sinh: ")]),a("span",{staticClass:"pl-0 text-bold"},[t.metaData.birthDateDay&&t.metaData.birthDateMonth&&t.metaData.birthDateYear?a("span",[t._v(t._s(t.metaData.birthDateDay)+"/ ")]):t._e(),t.metaData.birthDateMonth&&t.metaData.birthDateYear?a("span",[t._v(t._s(t.metaData.birthDateMonth)+"/ ")]):t._e(),t.metaData.birthDateYear?a("span",[t._v(t._s(t.metaData.birthDateYear)+" ")]):t._e()])]),a("div",{staticClass:"xs12 sm12 pb-1"},[a("span",{staticClass:"pr-2"},[t._v("Quê quán: ")]),a("span",{staticClass:"text-bold pl-0"},[t.metaData.wardNativeName?a("span",[t._v(t._s(t.metaData.wardNativeName)+", ")]):t._e(),t.metaData.districtNativeName?a("span",[t._v(t._s(t.metaData.districtNativeName)+", ")]):t._e(),t.metaData.cityNativeName?a("span",[t._v(t._s(t.metaData.cityNativeName)+" ")]):t._e()])])]),a("v-flex",{staticClass:"pr-3",attrs:{xs12:"",sm4:""}},[a("div",{staticClass:"xs12 sm12 pb-1"},[a("span",{staticClass:"pr-2"},[t._v("Nơi đăng ký HKTT: ")]),a("span",{staticClass:"text-bold pl-0"},[t.thongTinChiTietHoSo.address?a("span",[t._v(t._s(t.thongTinChiTietHoSo.address)+", ")]):t._e(),t.thongTinChiTietHoSo.wardName?a("span",[t._v(t._s(t.thongTinChiTietHoSo.wardName)+", ")]):t._e(),t.thongTinChiTietHoSo.districtName?a("span",[t._v(t._s(t.thongTinChiTietHoSo.districtName)+", ")]):t._e(),t.thongTinChiTietHoSo.cityName?a("span",[t._v(t._s(t.thongTinChiTietHoSo.cityName)+" ")]):t._e()])]),a("div",{staticClass:"xs12 sm12 pb-1"},[a("span",{staticClass:"pr-2"},[t._v("Tình trạng: ")]),a("span",{staticClass:"pl-0 text-bold "},[t._v(" "+t._s(t.metaData.state&&1===t.metaData.state?"Đã chết":"Còn sống"))])]),a("div",{staticClass:"xs12 sm12 pb-1"},[a("span",{staticClass:"pr-2"},[t._v("Số năm được hưởng: ")]),a("span",{staticClass:"pl-0 text-bold "},[t._v(" "+t._s(t.metaData.yearPayment?t.metaData.yearPayment:""))])]),a("div",{staticClass:"xs12 sm12 pb-1"},[a("span",{staticClass:"pr-2"},[t._v("Mức trợ cấp (đồng/tháng): ")]),a("span",{staticClass:"pl-0 text-bold "},[t._v(" "+t._s(t.metaData.subsidy?t.currency(t.metaData.subsidy):""))])])]),a("v-flex",{attrs:{xs12:"",sm4:""}},[a("div",{staticClass:"xs12 sm12 pb-1"},[a("span",{staticClass:"pr-2"},[t._v("Mã hồ sơ: ")]),a("span",{staticClass:"pl-0 text-bold "},[t._v("  "+t._s(t.thongTinChiTietHoSo.dossierNo)+" ")])]),t.thongTinChiTietHoSo.originDossierNo?a("div",{staticClass:"xs12 sm12 pb-1"},[a("span",{staticClass:"pr-2"},[t._v("Hồ sơ gốc: ")]),a("span",{staticClass:"pl-0 text-bold "},[t._v("  "+t._s(t.thongTinChiTietHoSo.originDossierNo)+" ")])]):t._e(),a("div",{staticClass:"xs12 sm12 pb-1"},[a("span",{staticClass:"pr-2"},[t._v("Ngày tiếp nhận: ")]),a("span",{staticClass:"pl-0 text-bold "},[t._v(" "+t._s(t.thongTinChiTietHoSo.receiveDate))])]),a("div",{staticClass:"xs12 sm12 pb-1"},[a("span",{staticClass:"pr-2"},[t._v("Thời hạn giải quyết: ")]),t.thongTinChiTietHoSo.durationCount>0?a("span",{staticClass:"pl-0 text-bold "},[t._v(" \n                  "+t._s(t.durationText(t.thongTinChiTietHoSo.durationUnit,t.thongTinChiTietHoSo.durationCount))+" làm việc \n                ")]):a("span",{staticClass:"pl-0 text-bold "},[t._v("\n                  Không quy định\n                ")])]),a("div",{staticClass:"xs12 sm12 pb-1"},[a("span",{staticClass:"pr-2"},[t._v("Ngày hẹn trả: ")]),a("span",{staticClass:"pl-0 text-bold "},[t._v(" "+t._s(t.thongTinChiTietHoSo.dueDate))])]),a("div",{staticClass:"xs12 sm12 pb-1"},[a("span",{staticClass:"pr-2"},[t._v("Trạng thái: ")]),a("span",{staticClass:"pl-0 text-bold "},[t._v(" "+t._s(t.thongTinChiTietHoSo.dossierStatusText)+" ")])])])],1)],1)],1):t._e()],1)],1),t.mauCongVan?a("v-expansion-panel",{attrs:{value:[!0],expand:""}},[a("v-expansion-panel-content",[a("div",{attrs:{slot:"header"},slot:"header"},[a("div",{staticClass:"background-triangle-small"},[a("v-icon",{attrs:{size:"18",color:"white"}},[t._v("star_rate")])],1),t._v("Thông tin người nộp")]),a("v-card",[a("v-card-text",{staticClass:"py-0"},[a("v-layout",{staticClass:"px-2 py-2",attrs:{wrap:""}},[a("v-flex",{staticClass:"pr-3",attrs:{xs12:"",sm4:""}},[a("div",{staticClass:"xs12 sm12 pb-1"},[a("span",{staticClass:"pr-2"},[t._v("Họ tên: ")]),a("span",{staticClass:"pl-0 text-bold"},[t._v(" "+t._s(t.thongTinChiTietHoSo.delegateName))])]),a("div",{staticClass:"xs12 sm12 pb-1"},[a("span",{staticClass:"pr-2"},[t._v("CMND/ hộ chiếu: ")]),a("span",{staticClass:"pl-0 text-bold"},[t._v(" "+t._s(t.thongTinChiTietHoSo.delegateIdNo))])])]),a("v-flex",{staticClass:"pr-3",attrs:{xs12:"",sm4:""}},[a("div",{staticClass:"xs12 sm12 pb-1"},[a("span",{staticClass:"pr-2"},[t._v("Địa chỉ: ")]),a("span",{staticClass:"pl-0 text-bold"},[t._v(" "+t._s(t.thongTinChiTietHoSo.delegateAddress))])]),a("div",{staticClass:"xs12 sm12 pb-1"},[a("span",{staticClass:"pr-2"},[t._v("Số điện thoại: ")]),a("span",{staticClass:"pl-0 text-bold"},[t._v(" "+t._s(t.thongTinChiTietHoSo.delegateTelNo))])])]),a("v-flex",{staticClass:"pr-3",attrs:{xs12:"",sm4:""}},[a("div",{staticClass:"xs12 sm12 pb-1"},[a("span",{staticClass:"pr-2"},[t._v("Email: ")]),a("span",{staticClass:"pl-0 text-bold"},[t._v(" "+t._s(t.thongTinChiTietHoSo.delegateEmail))])])])],1)],1)],1)],1)],1):t._e()],1)},o=[],n={props:{detailDossier:{type:Object,default:function(){}},mauCongVan:{type:String,default:function(){return""}}},watch:{detailDossier:function(t){var e=this;e.thongTinChiTietHoSo=t;try{e.metaData=JSON.parse(t.metaData)}catch(a){}e.thongTinChiTietHoSo["groupDossierId"]&&e.$store.dispatch("getDetailDossier",e.thongTinChiTietHoSo["groupDossierId"]).then((function(t){e.groupDossierNo=t["dossierNo"],e.groupDossierName=t["dossierName"]}))}},components:{},data:function(){return{thongTinChiTietHoSo:{},metaData:"",groupDossierNo:"",groupDossierName:"",showContactDetail:!1,xacthuc_BNG:!1}},computed:{loading:function(){return this.$store.getters.loading},originality:function(){var t=this;return t.getOriginality()}},created:function(){var t=this;t.thongTinChiTietHoSo=t.detailDossier,t.thongTinChiTietHoSo["groupDossierId"]&&t.$store.dispatch("getDetailDossier",t.thongTinChiTietHoSo["groupDossierId"]).then((function(e){t.groupDossierNo=e["dossierNo"],t.groupDossierName=e["dossierName"]}));try{xacthuc_BNG&&(t.xacthuc_BNG=!0)}catch(e){}},mounted:function(){var t=this;t.thongTinChiTietHoSo=t.detailDossier},methods:{initData:function(t){var e=this;e.$store.dispatch("getDetailDossier",t).then((function(t){e.thongTinChiTietHoSo=t,console.log("thongTinChiTietHoSo",e.thongTinChiTietHoSo)}))},goBack:function(){window.history.back()},durationText:function(t,e){var a;if(1===t&&e>8){var i,o=Math.floor(e/8)+" ngày";i=e%8!==0?8*(e/8-Math.floor(e/8))+" giờ":"",a="".concat(o," ").concat(i)}else 0===t?a=e+" ngày":1===t&&e<=8&&(a=e+" giờ");return a},detailGroup:function(){var t=this;t.thongTinChiTietHoSo["permission"].indexOf("write")>=0&&t.$router.push("/danh-sach-ho-so/0/nhom-ho-so/"+t.thongTinChiTietHoSo["groupDossierId"])},currency:function(t){if(t){var e=(t/1).toFixed(0).replace(".",",");return e.toString().replace(/\B(?=(\d{3})+(?!\d))/g,".")}return""},checkSoBan:function(t){try{var e=JSON.parse(t.metaData);return"tongSoBan"in e}catch(a){return!1}},checkTongSoTien:function(t){try{var e=JSON.parse(t.metaData);return"tongSoTien"in e}catch(a){return!1}},formarMoney:function(t){var e=new Intl.NumberFormat("vi-VN",{style:"currency",currency:"VND"});return e.format(parseFloat(t))}},filters:{dateTimeView:function(t){if(t){var e=new Date(t);return"".concat(e.getDate().toString().padStart(2,"0"),"/").concat((e.getMonth()+1).toString().padStart(2,"0"),"/").concat(e.getFullYear()," | ").concat(e.getHours().toString().padStart(2,"0"),":").concat(e.getMinutes().toString().padStart(2,"0"))}return""}}},s=n,r=a("2877"),c=a("6544"),l=a.n(c),d=a("b0af"),u=a("99d9"),h=a("cd55"),p=a("49e2"),m=a("0e8f"),g=a("132d"),v=a("a722"),f=a("8860"),_=a("e449"),y=a("3a2f"),C=Object(r["a"])(s,i,o,!1,null,null,null);e["a"]=C.exports;l()(C,{VCard:d["a"],VCardText:u["b"],VExpansionPanel:h["a"],VExpansionPanelContent:p["a"],VFlex:m["a"],VIcon:g["a"],VLayout:v["a"],VList:f["a"],VMenu:_["a"],VTooltip:y["a"]})},"26ed":function(t,e,a){"use strict";var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticStyle:{"background-color":"white",width:"100%"}},["overdue"===t.type||"preoverdue"===t.type?a("v-expansion-panel",{staticClass:"expansion-pl",attrs:{value:[!0],expand:""}},[a("v-expansion-panel-content",["overdue"===t.type?a("div",{attrs:{slot:"header"},slot:"header"},[a("div",{staticClass:"background-triangle-small"},[a("v-icon",{attrs:{size:"18",color:"white"}},[t._v("star_rate")])],1),a("span",[t._v("Lý do chậm hạn trả")]),a("span",{staticStyle:{color:"red"}},[t._v(" *")])]):a("div",{attrs:{slot:"header"},slot:"header"},[a("div",{staticClass:"background-triangle-small"},[a("v-icon",{attrs:{size:"18",color:"white"}},[t._v("star_rate")])],1),a("span",[t._v("Lý do")]),a("span",{staticStyle:{color:"red"}},[t._v(" *")])]),a("v-card",[a("v-card-text",{staticClass:"py-2 px-2"},[a("v-layout",{attrs:{wrap:""}},[a("v-flex",{staticClass:"mx-3",attrs:{xs12:""}},[a("v-form",{ref:"delayNoteForm",model:{value:t.valid,callback:function(e){t.valid=e},expression:"valid"}},[a("v-text-field",{attrs:{box:"","multi-line":"",rows:3,rules:function(){return""!==t.delayNote||"Trường dữ liệu bắt buộc"}},model:{value:t.delayNote,callback:function(e){t.delayNote=e},expression:"delayNote"}})],1)],1)],1)],1)],1)],1)],1):t._e(),a("v-expansion-panel",{staticClass:"expansion-pl",attrs:{value:[!0],expand:""}},[a("v-expansion-panel-content",[a("div",{attrs:{slot:"header"},slot:"header"},[a("div",{staticClass:"background-triangle-small"},[a("v-icon",{attrs:{size:"18",color:"white"}},[t._v("star_rate")])],1),"overdue"===t.type||"preoverdue"===t.type?a("span",[t._v("Ngày hẹn lại")]):t._e(),"betimes"===t.type?a("span",[t._v("Ngày hẹn trả sớm")]):t._e()]),a("v-card",[a("v-card-text",[a("v-layout",{staticClass:"pl-2",attrs:{wrap:""}},[a("v-icon",{staticClass:"hover-pointer",attrs:{color:"blue"},on:{click:t.showDatePicker}},[t._v("event")]),a("vue-ctk-date-time-picker",{ref:"datepicker",staticClass:"ml-2",staticStyle:{width:"auto!important"},attrs:{format:"YYYY-MM-DDTHH:mm","time-format":"HH:mm","without-header":!0,formatted:"DD/MM/YYYY HH:mm",label:t.extendDateInput?"":"Chọn ngày","min-date":t.minDate,locale:"vi"},model:{value:t.extendDateInput,callback:function(e){t.extendDateInput=e},expression:"extendDateInput"}})],1)],1)],1)],1)],1)],1)},o=[];function n(t,e){return c(t)||r(t,e)||s()}function s(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function r(t,e){var a=[],i=!0,o=!1,n=void 0;try{for(var s,r=t[Symbol.iterator]();!(i=(s=r.next()).done);i=!0)if(a.push(s.value),e&&a.length===e)break}catch(c){o=!0,n=c}finally{try{i||null==r["return"]||r["return"]()}finally{if(o)throw n}}return a}function c(t){if(Array.isArray(t))return t}var l=window.VueCtkDateTimePicker?window.VueCtkDateTimePicker.default:window["vue-ctk-date-time-picker"],d={components:{"vue-ctk-date-time-picker":l},props:["extendDateEdit","type"],data:function(){return{extendDateInput:"",minDate:null,delayNote:""}},created:function(){},watch:{},mounted:function(){this.extendDateInput=this.extendDateEdit?this.parseCurrentDate(this.extendDateEdit):this.formatDateInput(new Date),console.log("extendDateInput",this.extendDateInput),this.minDate=this.getCurentDateTime("date")},methods:{doExport:function(){var t,e=this,a=e.extendDateInput?new Date(e.extendDateInput).getTime():"";return t="overdue"===e.type||"preoverdue"===e.type?{text:e.delayNote,extendDate:a,valid:e.$refs.delayNoteForm.validate()}:{text:e.delayNote,extendDate:a,valid:!0},t},getCurentDateTime:function(t){var e=new Date;return"datetime"===t?"".concat(e.getDate().toString().padStart(2,"0"),"/").concat((e.getMonth()+1).toString().padStart(2,"0"),"/").concat(e.getFullYear()," | ").concat(e.getHours().toString().padStart(2,"0"),":").concat(e.getMinutes().toString().padStart(2,"0")):"date"===t?"".concat(e.getFullYear(),"-").concat((e.getMonth()+1).toString().padStart(2,"0"),"-").concat(e.getDate().toString().padStart(2,"0")):void 0},formatDateInput:function(t){return"".concat(t.getFullYear(),"-").concat((t.getMonth()+1).toString().padStart(2,"0"),"-").concat(t.getDate().toString().padStart(2,"0")," ").concat(t.getHours().toString().padStart(2,"0"),":").concat(t.getMinutes().toString().padStart(2,"0"))},showDatePicker:function(){this.$refs.datepicker.showDatePicker()},parseCurrentDate:function(t){if(!t)return null;var e=t.split(" "),a=n(e,2),i=a[0],o=a[1],s="".concat(i).split("/"),r=n(s,3),c=r[0],l=r[1],d=r[2],u="".concat(o).split(":"),h=n(u,3),p=h[0],m=h[1];h[2];return"".concat(d,"-").concat(l.padStart(2,"0"),"-").concat(c.padStart(2,"0")," ").concat(p,":").concat(m)}}},u=d,h=a("2877"),p=a("6544"),m=a.n(p),g=a("b0af"),v=a("99d9"),f=a("cd55"),_=a("49e2"),y=a("0e8f"),C=a("4bd4"),D=a("132d"),T=a("a722"),x=a("2677"),b=Object(h["a"])(u,i,o,!1,null,null,null);e["a"]=b.exports;m()(b,{VCard:g["a"],VCardText:v["b"],VExpansionPanel:f["a"],VExpansionPanelContent:_["a"],VFlex:y["a"],VForm:C["a"],VIcon:D["a"],VLayout:T["a"],VTextField:x["a"]})},"335e":function(t,e,a){"use strict";var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[t.dossiersgroup.length>0?a("div",{staticClass:"mb-3"},[a("v-data-table",{staticClass:"table-landing table-bordered",attrs:{"select-all":"",headers:t.headers,items:t.dossiersgroup,pagination:t.pagination,"hide-actions":"","item-key":"dossierId"},on:{"update:pagination":function(e){t.pagination=e}},scopedSlots:t._u([{key:"headers",fn:function(e){return[a("tr",[a("th",{staticClass:"v_data_table_check_all",staticStyle:{"padding-left":"14px !important"},attrs:{width:"32px"}},[a("v-checkbox",{attrs:{"input-value":e.all,indeterminate:e.indeterminate,primary:"","hide-details":""},nativeOn:{click:function(e){return t.toggleAllSelectDialog(e)}}})],1),t._l(t.headers,(function(e){return a("th",{key:e.text,class:e["class"]?e["class"]:"",attrs:{width:e["width"]?e["width"]+"px":""}},[a("v-tooltip",{attrs:{bottom:""}},[a("span",{attrs:{slot:"activator"},slot:"activator"},[t._v(t._s(e.text))]),a("span",[t._v(t._s(e.text))])])],1)}))],2)]}},{key:"items",fn:function(e){return[a("tr",{staticStyle:{cursor:"pointer"}},[a("td",{staticClass:"text-xs-center pl-3",staticStyle:{height:"40px !important"},attrs:{width:"32px"}},[a("v-checkbox",{attrs:{primary:"","hide-details":""},model:{value:e.selected,callback:function(a){t.$set(e,"selected",a)},expression:"props.selected"}})],1),a("td",{staticClass:"text-xs-center",staticStyle:{height:"40px !important"},attrs:{width:"50px"},on:{click:function(a){t.viewDetail(e.item,e.index)}}},[a("span",[t._v(t._s(t.pagination.page*t.pagination.rowsPerPage-t.pagination.rowsPerPage+e.index+1))])]),a("td",{staticClass:"text-xs-left",staticStyle:{height:"40px !important"},attrs:{width:"250px"},on:{click:function(a){t.viewDetail(e.item,e.index)}}},[t._v("\n            "+t._s(e.item.dossierNo)+"\n          ")]),a("td",{staticClass:"text-xs-left",staticStyle:{height:"40px !important"},on:{click:function(a){t.viewDetail(e.item,e.index)}}},[t._v("\n            "+t._s(e.item.applicantName)+"\n          ")]),a("td",{staticClass:"text-xs-left",staticStyle:{height:"40px !important"},attrs:{width:"200px"},on:{click:function(a){t.viewDetail(e.item,e.index)}}},[t._v("\n            "+t._s(e.item.dossierSubStatusText?e.item.dossierSubStatusText:e.item.dossierStatusText)+"\n          ")])])]}}]),model:{value:t.selectedAttach,callback:function(e){t.selectedAttach=e},expression:"selectedAttach"}}),t.dossiersgroup.length>10?a("div",{staticClass:"text-xs-center layout wrap mt-2 pr-1",staticStyle:{position:"relative"}},[a("div",{staticClass:"flex pagging-table px-2"},[a("tiny-pagination",{attrs:{total:t.dossiersgroup.length,currentLimit:15,page:t.pagination.page,"custom-class":"custom-tiny-class"},on:{"tiny:change-page":t.paggingData}})],1)]):t._e()],1):t._e()])},o=[],n=a("854a"),s=a.n(n),r=(a("1157"),a("e722"));function c(t,e,a){return e in t?Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}s.a.options={closeButton:!0,timeOut:"5000"};var l={props:["index","id","dossiersgroup"],components:{"tiny-pagination":r["a"]},data:function(){var t;return t={detailGroup:!1,dialogImportDosier:!1,dialogSelectDosier:!1,groupDossierList:[],groupDossierSelected:"",dossiersgroup:[]},c(t,"dossiersgroup",[]),c(t,"selected",[]),c(t,"selectedAttach",[]),c(t,"stepList",[]),c(t,"stepSelected",""),c(t,"btnDynamics",[]),c(t,"processOptionSelected",""),c(t,"inputTypes",[6]),c(t,"outputTypesGroup",[7]),c(t,"inputTypesIntoGroup",[1,3,6]),c(t,"outputTypes",[2]),c(t,"loadingAction",!1),c(t,"dialogAddGroup",!1),c(t,"activeAddDossierIntoGroup",!1),c(t,"headers",[{text:"STT",align:"center",sortable:!1,class:"text-xs-center"},{text:"Mã hồ sơ",align:"center",sortable:!1,class:"text-xs-center"},{text:"Tên chủ hồ sơ",align:"center",sortable:!1,class:"text-xs-center"},{text:"Trạng thái",align:"center",sortable:!1,class:"text-xs-center"}]),c(t,"filesGroupDossier",[]),c(t,"progressUploadFile",!1),c(t,"totalDossier",0),c(t,"valueProgress",0),c(t,"countDossierSuccess",0),c(t,"pagination",{rowsPerPage:15,page:1}),t},computed:{loading:function(){return this.$store.getters.loading},originality:function(){var t=this;return t.getOriginality()},filesAdd:function(){return this.$store.getters.getFilesAdd},activeAddFileGroup:function(){return this.$store.getters.activeAddFileGroup}},created:function(){var t=this;t.$nextTick((function(){t.$router.history.current.query}))},mounted:function(){},watch:{$route:function(t,e){t.query},selectedAttach:function(t){var e=this;e.$store.commit("setSelectDossierGroup",t)},selected:function(t){},activeAddFileGroup:function(t){var e=this;console.log("val activeAddFileGroup",t),e.stepSelected="",e.dialogSelectDosier=t}},methods:{paggingData:function(t){var e=this;e.pagination.page=t.page},changeStep:function(){var t=this;setTimeout((function(){t.stepSelected?(t.dossiersgroup=t.dossiersgroup.filter((function(e){return String(e["stepCode"])===String(t.stepSelected["stepCode"])})),t.$store.dispatch("pullProcessSteps",t.stepSelected).then((function(e){e.hasOwnProperty("menuGroup")&&e.menuGroup?t.$store.dispatch("getDetailMenuConfig",e).then((function(e){if(e.hasOwnProperty("buttonConfig")&&e.buttonConfig)try{t.btnDynamics=JSON.parse(e["buttonConfig"])["buttons"],t.btnDynamics=t.btnDynamics.filter((function(t){return"ACTIONS"===t["form"]})),t.btnDynamics=t.btnDynamics.filter((function(e){return!e.hasOwnProperty("onlySteps")||e.hasOwnProperty("onlySteps")&&e["onlySteps"].filter((function(e){return String(e)===String(t.stepSelected["stepCode"])}))>0}))}catch(a){t.btnDynamics=[]}else t.btnDynamics=[]})):t.btnDynamics=[]}))):(t.dossiersgroup=t.dossiersgroup,t.btnDynamics=[])}),200)},viewDetail:function(t,e){var a=this;a.$router.history.current.query;a.$router.push("/danh-sach-ho-so/0/chi-tiet-ho-so/"+t["dossierId"])},addFileToDossier:function(){var t=this,e=t.selectedAttach.map((function(t){return t.dossierId})).toString(),a=t.filesAdd.map((function(t){return t.dossierFileId})).toString(),i={dossierIds:e,dossierFileId:a};t.$store.dispatch("uploadFileDossierGroup",i).then((function(t){s.a.success("Đính kèm tài liệu thành công")}))},cancelAddFile:function(){},toggleAll:function(){var t=this;t.selected.length?t.selected=[]:t.selected=t.dossiersgroup},toggleAllSelectDialog:function(){var t=this;console.log("toggleAllSelectDialog",t.dossiersgroup,t.selectedAttach),t.selectedAttach.length?t.selectedAttach=[]:t.selectedAttach=t.dossiersgroup,console.log("toggleAllSelectDialog 2",t.selectedAttach)},goBack:function(){var t=this,e=t.$router.history.current.params,a=t.$router.history.current.query;t.activeAddDossierIntoGroup?(t.activeAddDossierIntoGroup=!1,t.getDetaiGroup(t.id)):t.$router.push({path:"/danh-sach-ho-so/"+e.index,query:a})}}},d=l,u=a("2877"),h=a("6544"),p=a.n(h),m=a("ac7c"),g=a("8fea"),v=a("3a2f"),f=Object(u["a"])(d,i,o,!1,null,null,null);e["a"]=f.exports;p()(f,{VCheckbox:m["a"],VDataTable:g["a"],VTooltip:v["a"]})},3677:function(t,e,a){"use strict";var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("v-expansion-panel",{staticClass:"expansion-pl",attrs:{value:[!0],expand:""}},[a("v-expansion-panel-content",[a("div",{attrs:{slot:"header"},slot:"header"},[a("div",{staticClass:"background-triangle-small"},[a("v-icon",{attrs:{size:"18",color:"white"}},[t._v("star_rate")])],1),t.detailView?a("span",[t._v(t._s(t.currentHoSoLienThong?t.currentHoSoLienThong.dossierName:""))]):a("span",[t._v("Danh sách hồ sơ liên thông")])]),a("v-card",{},[a("v-card-text",{staticClass:"px-0 py-0"},[t.detailView?a("div",[a("v-expansion-panel",{staticClass:"expansion-pl ext__form",attrs:{value:[!0],expand:""}},[a("v-expansion-panel-content",{attrs:{value:!0}},[a("div",{attrs:{slot:"header"},slot:"header"},[a("div",{staticClass:"background-triangle-small"},[t._v(" I.")]),t._v("\n                  Tài liệu nộp     \n                ")]),a("thanh-phan-ho-so",{ref:"thanhphanhoso1",attrs:{onlyView:!0,id:"nm",partTypes:t.inputTypes}})],1)],1),a("v-expansion-panel",{staticClass:"expansion-pl ext__form",attrs:{value:[!0],expand:""}},[a("v-expansion-panel-content",{attrs:{value:!0}},[a("div",{attrs:{slot:"header"},slot:"header"},[a("div",{staticClass:"background-triangle-small"},[t._v(" II.")]),t._v("\n                  Tài liệu kết quả\n                ")]),a("thanh-phan-ho-so",{ref:"thanhphanhoso2",attrs:{onlyView:!0,id:"kq",partTypes:t.outputTypes}})],1)],1),a("v-flex",{staticClass:"mt-3 mb-2 text-right",attrs:{xs12:""}},[a("v-btn",{staticClass:"my-0 mx-0",attrs:{color:"primary"},on:{click:function(e){t.detailView=!1}}},[a("v-icon",{attrs:{size:"16"}},[t._v("undo")]),t._v("  \n                Quay lại danh sách \n              ")],1)],1)],1):a("v-data-table",{staticClass:"table-landing table-bordered",attrs:{headers:t.headers,items:t.listLienThong,"hide-actions":"","item-key":"dossierId"},scopedSlots:t._u([{key:"items",fn:function(e){return[a("tr",[a("td",{staticClass:"text-xs-center",attrs:{width:"5%"}},[a("span",[t._v(t._s(e.index+1))])]),a("td",{staticClass:"text-xs-left",attrs:{width:"30%"}},[t._v("\n                  "+t._s(e.item.dossierName)+"\n                ")]),a("td",{staticClass:"text-xs-left",attrs:{width:"10%"}},[t._v("\n                  "+t._s(e.item.dossierNo)+"\n                ")]),a("td",{staticClass:"text-xs-left",attrs:{width:"25%"}},[t._v("\n                  "+t._s(e.item.govAgencyName)+"\n                ")]),a("td",{staticClass:"text-xs-left",attrs:{width:"15%"}},[t._v("\n                  "+t._s(e.item.createDate)+"\n                ")]),a("td",{staticClass:"text-xs-left",attrs:{width:"15%"}},[t._v("\n                  "+t._s(e.item.dossierSubStatusText?e.item.dossierSubStatusText:e.item.dossierStatusText)+"\n                ")])])]}}])})],1)],1)],1)],1)],1)},o=[],n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-card",[a("v-card-text",{staticClass:"pb-0"},[a("v-layout",{attrs:{wrap:""}},[a("v-flex",{attrs:{xs12:"",sm2:""}},[a("v-subheader",{staticClass:"pl-0 text-header"},[t._v("Thủ tục: ")])],1),a("v-flex",{attrs:{xs12:"",sm10:""}},[a("v-subheader",{staticClass:"pl-0 header-text-field text-header"},[t._v("  "+t._s(t.thongTinChiTietHoSo.serviceName)+" ")])],1),a("v-flex",{attrs:{xs12:"",sm2:""}},[a("v-subheader",{staticClass:"pl-0 text-header"},[t._v("Mã số hồ sơ: ")])],1),a("v-flex",{attrs:{xs12:"",sm4:""}},[a("v-subheader",{staticClass:"pl-0 text-header header-text-field"},[t._v("  "+t._s(t.thongTinChiTietHoSo.dossierNo)+" ")])],1),a("v-flex",{attrs:{xs12:"",sm2:""}},[a("v-subheader",{staticClass:"pl-0 text-header"},[t._v("Thời hạn giải quyết: ")])],1),a("v-flex",{attrs:{xs12:"",sm4:""}},[a("v-subheader",{staticClass:"pl-0 text-header header-text-field"},[t._v("  "+t._s(t.durationText(t.thongTinChiTietHoSo.durationUnit,t.thongTinChiTietHoSo.durationCount))+" làm việc  ")])],1),a("v-flex",{attrs:{xs12:"",sm2:""}},[a("v-subheader",{staticClass:"pl-0 text-header"},[t._v("Ngày tiếp nhận: ")])],1),a("v-flex",{attrs:{xs12:"",sm4:""}},[a("v-subheader",{staticClass:"pl-0 text-header header-text-field"},[t._v("  "+t._s(t.thongTinChiTietHoSo.receiveDate)+" ")])],1),a("v-flex",{attrs:{xs12:"",sm2:""}},[a("v-subheader",{staticClass:"pl-0 text-header"},[t._v("Ngày hẹn trả: ")])],1),a("v-flex",{attrs:{xs12:"",sm4:""}},[a("v-subheader",{staticClass:"pl-0 text-header header-text-field"},[t._v("  "+t._s(t.thongTinChiTietHoSo.dueDate)+" ")])],1)],1)],1)],1)},s=[],r={data:function(){return{thongTinChiTietHoSo:{}}},computed:{loading:function(){return this.$store.getters.loading}},created:function(){},methods:{initData:function(t){this.thongTinChiTietHoSo=t},durationText:function(t,e){var a;if(1===t&&e>8){var i,o=Math.floor(e/8)+" ngày";i=e%8!==0?8*(e/8-Math.floor(e/8))+" giờ":"",a="".concat(o," ").concat(i)}else 0===t?a=e+" ngày":1===t&&e<=8&&(a=e+" giờ");return a}},filters:{dateTimeView:function(t){if(t){var e=new Date(t);return"".concat(e.getDate().toString().padStart(2,"0"),"/").concat((e.getMonth()+1).toString().padStart(2,"0"),"/").concat(e.getFullYear(),"  ").concat(e.getHours().toString().padStart(2,"0"),":").concat(e.getMinutes().toString().padStart(2,"0"))}return""}}},c=r,l=a("2877"),d=a("6544"),u=a.n(d),h=a("b0af"),p=a("99d9"),m=a("0e8f"),g=a("a722"),v=a("e0c7"),f=Object(l["a"])(c,n,s,!1,null,null,null),_=f.exports;u()(f,{VCard:h["a"],VCardText:p["b"],VFlex:m["a"],VLayout:g["a"],VSubheader:v["a"]});var y=a("6e92"),C={components:{thongtinchunghoso:_,"thanh-phan-ho-so":y["a"]},props:{listLienThong:{type:Array,default:function(){return[]}},dossierDetail:{type:Object,default:function(){}}},data:function(){return{loading:!1,inputTypes:[1,3],outputTypes:[2],detailView:!1,thongTinLienThong:{},hoSoLienThongItems:[],currentHoSoLienThong:"",lienthongPage:1,headers:[{text:"STT",align:"center",sortable:!1},{text:"Tên hồ sơ",align:"center",sortable:!1},{text:"Mã hồ sơ",align:"center",sortable:!1},{text:"Cơ quan liên thông",align:"center",sortable:!1},{text:"Ngày gửi liên thông",align:"center",sortable:!1},{text:"Trạng thái",align:"center",sortable:!1}]}},computed:{},created:function(){var t=this;t.$nextTick((function(){}))},methods:{getDossierLogs:function(t){var e=this,a={dossierId:t.dossierId,type:""};e.$store.dispatch("loadDossierLogs",a).then((function(e){e.length>0&&(t.dossierLog=e)})).catch((function(t){console.log(t)}))},viewDetail:function(t){var e=this;console.log("item",t),e.detailView=!0,e.currentHoSoLienThong=t,setTimeout((function(){e.$refs.thanhphanhoso1&&e.$refs.thanhphanhoso1.initData(t),e.$refs.thanhphanhoso2&&e.$refs.thanhphanhoso2.initData(t)}),300)},goBack:function(){window.history.back()}},filters:{dateTimeView:function(t){if(t){var e=new Date(t);return"".concat(e.getDate().toString().padStart(2,"0"),"/").concat((e.getMonth()+1).toString().padStart(2,"0"),"/").concat(e.getFullYear(),"  ").concat(e.getHours().toString().padStart(2,"0"),":").concat(e.getMinutes().toString().padStart(2,"0"))}return""}}},D=C,T=a("8336"),x=a("8fea"),b=a("cd55"),S=a("49e2"),N=a("132d"),P=Object(l["a"])(D,i,o,!1,null,null,null);e["a"]=P.exports;u()(P,{VBtn:T["a"],VCard:h["a"],VCardText:p["b"],VDataTable:x["a"],VExpansionPanel:b["a"],VExpansionPanelContent:S["a"],VFlex:m["a"],VIcon:N["a"]})},4360:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return store}));var vue__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("a026"),vuex__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("2f62"),toastr__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("854a"),toastr__WEBPACK_IMPORTED_MODULE_2___default=__webpack_require__.n(toastr__WEBPACK_IMPORTED_MODULE_2__),axios__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("bc3a"),axios__WEBPACK_IMPORTED_MODULE_3___default=__webpack_require__.n(axios__WEBPACK_IMPORTED_MODULE_3__),_support_json__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("bbd0"),_support_json__WEBPACK_IMPORTED_MODULE_4___namespace=__webpack_require__.t("bbd0",1),jquery__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("1157"),jquery__WEBPACK_IMPORTED_MODULE_5___default=__webpack_require__.n(jquery__WEBPACK_IMPORTED_MODULE_5__),file_saver__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("21a6"),file_saver__WEBPACK_IMPORTED_MODULE_6___default=__webpack_require__.n(file_saver__WEBPACK_IMPORTED_MODULE_6__);vue__WEBPACK_IMPORTED_MODULE_0__["a"].use(toastr__WEBPACK_IMPORTED_MODULE_2___default.a),vue__WEBPACK_IMPORTED_MODULE_0__["a"].use(vuex__WEBPACK_IMPORTED_MODULE_1__["a"]),toastr__WEBPACK_IMPORTED_MODULE_2___default.a.options={closeButton:!0,timeOut:"10000"};var store=new vuex__WEBPACK_IMPORTED_MODULE_1__["a"].Store({state:{initData:_support_json__WEBPACK_IMPORTED_MODULE_4__.initData,endPointApi:"/o/rest/v2",loading:!1,loadingTable:!1,loadingDynamicBtn:!1,loadingGov:!1,validFileUpload:!1,fileTypeAllowDefault:"pdf,doc,docx,xls,xlsx,png,jpg,jpeg,txt,rtf",fileTypePAYMENT:["png","jpg","jpeg"],error:null,user:{role:""},userLogin:"",employeeLogin:"",index:0,kysoSuccess:!1,activeGetCounter:!1,activeLoadingDataHoSo:!1,trangThaiHoSoList:null,listThuTucHanhChinh:null,checkInput:0,stepOverdueNextAction:"",usersNextAction:[],lePhi:{fee:"",feeNote:"",request:""},dossier:{applicantIdNo:"ccc"},dossierSelected:[],actionActive:{},serviceConfigObj:{},dossierTemplateName:"",thongTinChungHoSo:{serviceName:"",dossierTemplateName:"",serviceConfig:"",serviceOption:"",dossierNo:"",receiveDate:new Date,dueDate:(new Date).toString(),durationDate:"",dossierId:"",dossierIdCTN:"",dossierStatus:"",dossierStatusText:""},vnpostCodeItems:[],serviceConfigItems:null,serviceOptionItems:[],citys:null,cityVal:null,districtVal:null,wardVal:null,resultServices:null,dossierFiles:[],listHistoryProcessingItems:[],thanhPhanHoSo:{dossierTemplates:_support_json__WEBPACK_IMPORTED_MODULE_4__.dossierTemplates},dossierTemplates:_support_json__WEBPACK_IMPORTED_MODULE_4__.dossierTemplates,applicantId:"",applicantBussinessExit:!1,applicantNote:"",thongTinChuHoSo:{userType:"1",cityCode:"",districtCode:"",wardCode:"",applicantIdNo:"",contactEmail:"",contactName:"",address:"",applicantName:""},thongTinChuHoSoBindChuyenPhat:{cityCode:"",districtCode:"",wardCode:"",address:"",contactTelNo:""},thongTinNguoiNopHoSo:{sameUser:!0,delegateName:"",delegateCityCode:"",delegateAddress:"",delegateDistrictCode:"",delegateWardCode:"",delegateEmail:"",delegateTelNo:"",delegateIdNo:""},dichVuChuyenPhatKetQua:{viaPostal:0,postalServiceCode:"",postalAddress:"",postalCityCode:"",postalDistrictCode:"",postalWardCode:"",postalTelNo:""},dichVuChuyenPhatHoSo:{vnpostalStatus:0,postalServiceCode:"",postalAddress:"",postalCityCode:"",postalCityName:"",postalDistrictCode:"",postalDistrictName:"",postalWardCode:"",postalWardName:"",postalTelNo:""},viaPostal:0,data_phancong:[],dataCreateDossier:{},dataCreateFile:[],paymentProfile:"",paymentFileName:"",forGroupDossier:!1,dossierIntoGroup:[],filesAdd:[],activeAddFileGroup:!1,dossierTemplateLienThong:"",activePrintBienNhan:"",createFileSigned:"",advSearchShow:!1,visibleDoAction:!0,filterDateFromTo:["fromReceiveDate","toReceiveDate","fromDueDate","toDueDate","fromReleaseDate","toReleaseDate","fromFinishDate","toFinishDate"],dossierSelectedDoAction:[],formActionGroup:""},actions:{clearError:function(t){var e=t.commit;e("clearError")},loadInitResource:function(t){var e=t.commit,a=t.state;return new Promise((function(t,i){null!==window.themeDisplay&&void 0!==window.themeDisplay?(a.initData["groupId"]=window.themeDisplay.getScopeGroupId(),a.initData["user"]={userName:window.themeDisplay.getUserName(),userEmail:"",userId:window.themeDisplay.getUserId()}):(a.initData["groupId"]=0,a.initData["user"]={userName:"",userEmail:"",userId:20164}),""===a["user"].role&&store.dispatch("getRoleUser").then((function(t){a["user"].role=t})).catch((function(t){a["user"].role=["default"],console.log(t)})),e("setInitData",a.initData),t(a.initData)}))},getRoleUser:function(t,e){t.commit;var a=t.state;return new Promise((function(t,e){var i={headers:{groupId:window.themeDisplay.getScopeGroupId()?window.themeDisplay.getScopeGroupId():""}};axios__WEBPACK_IMPORTED_MODULE_3___default.a.get(a.endPointApi+"/users/login",i).then((function(e){var a=e.data;if(a&&a.length>0){var i=[];for(var o in a)if(a[o]["role"]){var n=a[o]["role"].split("_"),s=n.length;if(isNaN(Number(n[s-1])))i.push(a[o]["role"]);else{var r=a[o]["role"].replace("_"+n[s-1],"");i.push(r)}}t(i)}else t(["default"])})).catch((function(t){console.log(t),e("default")}))}))},loadMenuConfigToDo:function loadMenuConfigToDo(_ref4){var commit=_ref4.commit,state=_ref4.state;return commit("setLoadingDynamicBtn",!0),null===state.trangThaiHoSoList?new Promise((function(resolve,reject){store.dispatch("loadInitResource").then((function(result){var param={headers:{groupId:state.initData.groupId}};axios__WEBPACK_IMPORTED_MODULE_3___default.a.get(state.initData.menuConfigToDo,param).then((function(response){var serializable=response.data,menuData=[],index=0;for(var key in serializable.data){var current=serializable.data[key],menuDetail={index:index,active:!1,title:current["menuName"],id:current["menuGroup"],icon:current["icon"]?current["icon"]:"",action:"description",action_active:"play_arrow",counter:-1,menuType:parseInt(current["menuType"]),queryParams:current["queryParams"],hasViewText:current["hasViewText"]};index+=1;var tableConfig=current["tableConfig"],buttonConfig=current["buttonConfig"];if(""!==tableConfig&&void 0!==tableConfig&&"undefined"!==tableConfig&&-1!==String(tableConfig).indexOf("{")&&-1!==String(tableConfig).indexOf("}"))try{menuDetail["tableConfig"]=eval("("+tableConfig+")")}catch(error){alert("Lỗi cấu hình TableConfig menu "+current["menuName"])}if(""!==buttonConfig&&void 0!==buttonConfig&&"undefined"!==buttonConfig&&-1!==String(buttonConfig).indexOf("{")&&-1!==String(buttonConfig).indexOf("}"))try{menuDetail["buttonConfig"]=eval("("+buttonConfig+")")}catch(error){alert("Lỗi cấu hình ButtonConfig menu "+current["menuName"])}if(current.hasOwnProperty("steps")&&(Array.isArray(current.steps)&&current.steps.length>1&&(menuDetail["items"]=current.steps),current.steps&&!Array.isArray(current.steps))){var stepsItems=[];stepsItems.push(current.steps),menuDetail["items"]=stepsItems}menuData.push(menuDetail)}commit("setLoadingDynamicBtn",!1),commit("setMenuConfigToDo",menuData),resolve(menuData)})).catch((function(t){commit("setLoadingDynamicBtn",!1),console.log(t),reject(t)}))})).catch((function(){}))})):new Promise((function(t,e){commit("setLoadingDynamicBtn",!1),t(state.trangThaiHoSoList)}))},loadListThuTucHanhChinh:function(t,e){var a=t.commit,i=t.state;return new Promise((function(t,o){store.dispatch("loadInitResource").then((function(n){var s={headers:{groupId:i.initData.groupId},params:{}};e&&e.hasOwnProperty("searchGovAgencyCode")&&e.searchGovAgencyCode&&(s.params.searchGovAgencyCode=e.searchGovAgencyCode),e&&e.hasOwnProperty("groupServiceCode")&&e.groupServiceCode&&(s.params.groupServiceCode=e.groupServiceCode),console.log("loadListThuTucHanhChinh",e,s),axios__WEBPACK_IMPORTED_MODULE_3___default.a.get(i.initData.getListThuTucHanhChinh,s).then((function(e){var i=e.data,o=Array.from(i.data);a("setListThuTucHanhChinh",o),t(o)})).catch((function(t){console.log(t),o(t)}))})).catch((function(){}))}))},loadingDataHoSo:function(t,e){var a=t.commit,i=t.state;return console.log("filter search dossier",e),a("setLoadingTable",!0),new Promise((function(t,o){store.dispatch("loadInitResource").then((function(n){var s={start:e.page*e.numberPerPage-e.numberPerPage,end:e.page*e.numberPerPage,agency:e.agency?e.agency:"",service:e.service?e.service:"",template:e.template?e.template:"",status:e.status?e.status:"",register:e.register?e.register:"",keyword:e.keyword?e.keyword:"",domain:e.domain?e.domain:"",substatus:e.substatus?e.substatus:"",year:e.year?e.year:0,month:e.month?e.month:0,day:e.day?e.day:0,top:e.top?e.top:"",dossierNo:e.dossierNo?e.dossierNo:"",paymentStatus:e.paymentStatus?e.paymentStatus:""};for(var r in e["follow"]&&(s.follow=e.follow,s.originality=0),e["originality"]&&(s.originality=e.originality),e["viapostal"]&&(s.viapostal=e.viapostal),e["sort"]&&(s.sort=e.sort),""!==e.order&&(s.order="true"===String(e.order)),e.donvigui&&(s.donvigui=e.donvigui),e.donvinhan&&(s.donvinhan=e.donvinhan),e.documentNo&&(s.documentNo=e.documentNo),e.dateCv&&(s.documentDate=e.dateCv),e.groupDossierId&&(s.groupDossierId=e.groupDossierId),i.filterDateFromTo)e.hasOwnProperty(i.filterDateFromTo[r])&&e[i.filterDateFromTo[r]]&&(s[i.filterDateFromTo[r]]=e[i.filterDateFromTo[r]]);!s.hasOwnProperty("order")||!0!==s.order&&!1!==s.order||(e.queryParams=e.queryParams.replace("order=false",""),e.queryParams=e.queryParams.replace("order=true",""),e.queryParams=e.queryParams.replace("&order=false",""),e.queryParams=e.queryParams.replace("&order=true",""));var c=e.queryParams.split("?");0!==c.length&&(c[1]?"&"===c[1].charAt(0)&&(e.queryParams=c[1].slice(1)?c[0]+"?"+c[1].slice(1):c[0]):e.queryParams=c[0]),console.log("paramSearch_dossier_5",e.queryParams,s);var l={headers:{groupId:i.initData.groupId},params:s};axios__WEBPACK_IMPORTED_MODULE_3___default.a.get(e.queryParams,l).then((function(e){var i=e.data;a("setLoadingTable",!1),a("setUserNextAction",[]),t(i)})).catch((function(t){a("setLoadingTable",!1),a("setUserNextAction",[]),console.log(t),o(t)}))})).catch((function(){}))}))},getHoSoAddGroup:function(t,e){t.commit;var a=t.state;return new Promise((function(t,i){store.dispatch("loadInitResource").then((function(o){var n={start:e.page*e.numberPerPage-e.numberPerPage,end:e.page*e.numberPerPage,groupDossierIdHs:e.groupDossierIdHs,groupDossierId:e.hasOwnProperty("groupDossierId")?e.groupDossierId:"",service:e.service,dossierNo:e.dossierNo},s={headers:{groupId:a.initData.groupId}},r=-1!==e.api.indexOf("?")?"":"?";axios__WEBPACK_IMPORTED_MODULE_3___default.a.get(e.api+r+"&sort=dossierNo&order=true&start="+n.start+"&end="+n.end+"&groupDossierIdHs="+n.groupDossierIdHs+"&service="+n.service+"&dossierNo="+n.dossierNo,s).then((function(e){var a=e.data;t(a)})).catch((function(t){i(t)}))})).catch((function(){}))}))},getGroupDossier:function(t,e){t.commit;var a=t.state;return new Promise((function(t,e){store.dispatch("loadInitResource").then((function(i){var o={originality:9},n={headers:{groupId:a.initData.groupId},params:o};axios__WEBPACK_IMPORTED_MODULE_3___default.a.get("/o/rest/v2/dossiers/todo",n).then((function(e){var a=e.data;a.data?t(a.data):t([])})).catch((function(t){e(t)}))})).catch((function(){}))}))},loadingCounterNotStep:function(t,e){t.commit;var a=t.state;return new Promise((function(t,i){store.dispatch("loadInitResource").then((function(o){var n={start:0,end:1,agency:e.agency?e.agency:"",service:e.service?e.service:"",template:e.template?e.template:"",status:e.status?e.status:"",register:e.register?e.register:"",keyword:e.keyword?e.keyword:"",domain:e.domain?e.domain:"",substatus:e.substatus?e.substatus:"",year:e.year?e.year:0,month:e.month?e.month:0,day:e.day?e.day:0,top:e.top?e.top:"",dossierNo:e.dossierNo?e.dossierNo:"",viapostal:e.viapostal?e.viapostal:""};e["originality"]&&(n["originality"]=e.originality);var s={headers:{groupId:a.initData.groupId},params:n};axios__WEBPACK_IMPORTED_MODULE_3___default.a.get(e.queryParams,s).then((function(e){var a=e.data;t(a)})).catch((function(t){i(t)}))})).catch((function(){}))}))},loadingCounterHoSo:function(t,e){t.commit;var a=t.state;return new Promise((function(t,i){store.dispatch("loadInitResource").then((function(o){var n={headers:{groupId:a.initData.groupId}};e.hasOwnProperty("originality")&&1===e.originality&&(n["params"]={owner:!0}),axios__WEBPACK_IMPORTED_MODULE_3___default.a.get(a.initData.counterMenuStep,n).then((function(e){var a=e.data;t(a)})).catch((function(t){console.log(t),i(t)}))})).catch((function(){}))}))},loadDossierSelected:function(t,e){var a=t.commit;t.state;a("dossierSelected",e)},loadActionActive:function(t,e){var a=t.commit;t.state;a("actionActive",e)},loadDictItems:function(t,e){var a=t.commit,i=t.state;return new Promise((function(t,o){store.dispatch("loadInitResource").then((function(n){var s="VNPOST_CITY_CODE"===e.collectionCode?0:i.initData.groupId,r={headers:{groupId:s},params:{parent:e.parent}};axios__WEBPACK_IMPORTED_MODULE_3___default.a.get(i.initData.regionApi+"/"+e.collectionCode+"/dictitems",r).then((function(i){var o=i.data;"ADMINISTRATIVE_REGION"===e.collectionCode&&(0!==e.level||e.hasOwnProperty("commit")||a("setCitys",o.data)),t(i.data)}),(function(t){o(t)}))})).catch((function(){}))}))},loadDetailDictItems:function(t,e){t.commit;var a=t.state;return new Promise((function(t,i){store.dispatch("loadInitResource").then((function(o){var n="VNPOST_CITY_CODE"===e.collectionCode?0:a.initData.groupId,s={headers:{groupId:n},params:{}};axios__WEBPACK_IMPORTED_MODULE_3___default.a.get(a.initData.regionApi+"/"+e.collectionCode+"/dictitems/"+e.itemCode,s).then((function(e){t(e.data)}),(function(t){i(t)}))})).catch((function(){}))}))},getGroupDictitem:function(t,e){t.commit;var a=t.state;return new Promise((function(t,i){store.dispatch("loadInitResource").then((function(o){var n={headers:{groupId:a.initData.groupId},params:{}};axios__WEBPACK_IMPORTED_MODULE_3___default.a.get(a.initData.regionApi+"/"+e.collectionCode+"/dictgroups/"+e.groupCode+"/dictitems",n).then((function(e){e.data.hasOwnProperty("data")?t(e.data.data):t([])}),(function(t){i(t)}))})).catch((function(){}))}))},resetThongTinChungHoSo:function(t){var e=t.commit,a={serviceConfig:{},serviceOption:"",receiveDate:new Date,dueDate:(new Date).toString(),durationDate:"",dossierId:"",dossierNo:"",govAgencyName:"",dossierIdCTN:"",processBlock:"",processUnit:"",dossierStatus:"",dossierStatusText:"",submitDate:""};e("setThongTinChungHoSo",a)},resetThongTinChuHoSo:function(t){var e=t.commit,a={userType:"1",cityCode:"",districtCode:"",wardCode:"",applicantIdNo:"",contactEmail:"",contactName:"",address:"",applicantName:""};e("setThongTinChuHoSo",a)},resetThongTinNguoiNopHoSo:function(t){var e=t.commit,a={sameUser:"",delegateName:"",delegateCityCode:"",delegateAddress:"",delegateDistrictCode:"",delegateWardCode:"",delegateEmail:"",delegateTelNo:"",delegateIdNo:""};e("setThongTinNguoiNopHoSo",a)},resetThanhPhanHoSo:function(t){var e=t.commit;e("setDossierTemplates",[])},loadDossierMark:function(t,e){t.commit;var a=t.state;return new Promise((function(t,i){var o={headers:{groupId:a.initData.groupId},params:{type:1}};axios__WEBPACK_IMPORTED_MODULE_3___default.a.get(a.initData.dossierApi+"/"+e.dossierId+"/marks",o).then((function(e){var a=e.data;if(a.data){var i=a.data;t(i)}else t([])})).catch((function(t){i(t)}))}))},loadDossierTemplates:function(t,e){t.commit;var a=t.state;return new Promise((function(t,i){store.dispatch("loadInitResource").then((function(o){var n={headers:{groupId:a.initData.groupId}};axios__WEBPACK_IMPORTED_MODULE_3___default.a.get(a.initData.dossierTemplatesApi+"/"+e.dossierTemplateNo,n).then((function(e){var i=e.data,o=function(t){try{return JSON.parse(t),JSON.parse(t)}catch(i){var e={tip:t,maxSize:30,extensions:a.fileTypeAllowDefault};return e}};if(i&&i["dossierParts"])for(var n in i["dossierParts"]){i["dossierParts"][n].hasTemplate=!1,i["dossierParts"][n].hasTemplateLienThong=!1,i["dossierParts"][n].fileMarkDefault="",i["dossierParts"][n].recordCountDefault="";var s=i["dossierParts"][n]["partTip"];i["dossierParts"][n]["partTip"]=o(s)}t(i)}),(function(t){i(t)}))})).catch((function(){}))}))},loadAllDossierTemplates:function(t,e){t.commit;var a=t.state;return new Promise((function(t,i){store.dispatch("loadInitResource").then((function(o){var n={headers:{groupId:a.initData.groupId}};axios__WEBPACK_IMPORTED_MODULE_3___default.a.get(a.initData.dossierTemplatesApi+"/"+e.dossierTemplateNo,n).then((function(e){var i=e.data,o=function(t){try{return JSON.parse(t),JSON.parse(t)}catch(i){var e={tip:t,maxSize:30,extensions:a.fileTypeAllowDefault};return e}};if(i&&i["dossierParts"])for(var n in i["dossierParts"]){var s=i["dossierParts"][n]["partTip"];i["dossierParts"][n]["partTip"]=o(s)}t(i.dossierParts)}),(function(t){i(t)}))})).catch((function(){}))}))},copyFile:function(t,e){t.commit;var a=t.state;return new Promise((function(t,i){var o={headers:{groupId:a.initData.groupId}},n=new URLSearchParams;n.append("dossierTemplateNo",e.dossierTemplateNo?e.dossierTemplateNo:""),n.append("dossierPartNo",e.dossierPartNo?e.dossierPartNo:""),n.append("dossierFileId",e.dossierFileId?e.dossierFileId:""),axios__WEBPACK_IMPORTED_MODULE_3___default.a.post(a.initData.dossierApi+"/"+e.dossierId+"/files/copyfile",n,o).then((function(e){t(e)})).catch((function(t){console.log(t),i(t)}))}))},copyFileFromStorage:function(t,e){t.commit;var a=t.state;return new Promise((function(t,i){var o={headers:{groupId:a.initData.groupId}},n=new URLSearchParams;n.append("dossierTemplateNo",e.dossierTemplateNo?e.dossierTemplateNo:""),n.append("dossierPartNo",e.partNo?e.partNo:""),n.append("uri",e.filePath?e.filePath:""),n.append("displayName",e.fileName?e.fileName:""),n.append("fileType",e.fileType?e.fileType:""),axios__WEBPACK_IMPORTED_MODULE_3___default.a.post(a.initData.dossierApi+"/"+e.dossierId+"/files/applicantdata",n,o).then((function(e){t(e)})).catch((function(t){console.log(t),i(t)}))}))},deleteAttackFiles:function(t,e){t.commit;var a=t.state;t.dispatch;return new Promise((function(t,i){var o={headers:{groupId:a.initData.groupId}},n=new URLSearchParams;e.hasForm||e.eform?axios__WEBPACK_IMPORTED_MODULE_3___default.a.put(a.initData.dossierApi+"/"+e.dossierId+"/files/"+e.referenceUid+"/resetformdata",n,o).then((function(e){console.log("success"),t(e)})).catch((function(t){console.log(t),i(t)})):axios__WEBPACK_IMPORTED_MODULE_3___default.a.delete(a.initData.dossierApi+"/"+e.dossierId+"/files/"+e.fileTemplateNo+"/all",o).then((function(e){console.log("success!"),t(e)})).catch((function(t){console.log(t),i(t)}))}))},deleteDossierFile:function(t,e){t.commit;var a=t.state;return new Promise((function(t,i){var o={headers:{groupId:a.initData.groupId}};axios__WEBPACK_IMPORTED_MODULE_3___default.a.delete(a.initData.dossierApi+"/"+e.dossierId+"/files/"+e.referenceUid,o).then((function(e){t(e)})).catch((function(t){i(t)}))}))},resetCounterTemplate:function(t,e){t.commit;var a=t.state;a.dossierTemplates.forEach((function(t){t.partNo===e.partNo&&(t.hasForm?t.count=1:t.count=0)}))},deleteSingleFile:function(t,e){t.commit;var a=t.state,i={headers:{groupId:a.initData.groupId}};axios__WEBPACK_IMPORTED_MODULE_3___default.a.delete(a.initData.dossierApi+"/"+a.thonTinChungHoSo.dossierId+"/files/"+e.referenceUid,i).then((function(t){console.log("success")})).catch((function(t){console.log(t)}))},uploadSingleFile:function(t,e){t.commit;var a=t.state;return new Promise((function(t,i){var o=[],n=jquery__WEBPACK_IMPORTED_MODULE_5___default()('input[id="file'+e.partNo+'"]')[0].files,s=n.length,r=0;if(n)for(var c=0;c<s;c++){var l=n[c],d=l["name"];l["name"]&&(d=l["name"].replace(/\%/g,""),d=d.replace(/\//g,""),d=d.replace(/\\/g,""));var u=new FormData;3===e.partType?(e["displayName"]&&(d=e["displayName"].replace(/\%/g,""),d=d.replace(/\//g,""),d=d.replace(/\\/g,"")),u.append("displayName",d)):u.append("displayName",d),u.append("fileType",l.type),u.append("fileSize",l.size),u.append("isSync","false"),u.append("file",l,d),u.append("dossierPartNo",e.partNo),u.append("dossierTemplateNo",e.dossierTemplateNo),u.append("fileTemplateNo",e.fileTemplateNo),u.append("formData",""),u.append("referenceUid","");var h={partTip:e.partTip,file:l};store.dispatch("validFileUpload",h),l&&a.validFileUpload?axios__WEBPACK_IMPORTED_MODULE_3___default.a.post(a.initData.dossierApi+"/"+e.dossierId+"/files",u,{headers:{groupId:a.initData.groupId,"Content-Type":"multipart/form-data"}}).then((function(e){r+=1,o.push(e.data),r===s&&t(o)})).catch((function(t){toastr__WEBPACK_IMPORTED_MODULE_2___default.a.clear(),toastr__WEBPACK_IMPORTED_MODULE_2___default.a.error("Yêu cầu của bạn thực hiện thất bại."),r+=1,r===s&&i(o)})):(r+=1,r===s&&i(o))}}))},uploadFileDossierGroup:function(t,e){t.commit;var a=t.state;return new Promise((function(t,i){var o={headers:{groupId:a.initData.groupId}},n=new URLSearchParams;n.append("dossierIds",e.dossierIds?e.dossierIds:""),n.append("dossierFileId",e.dossierFileId?e.dossierFileId:""),axios__WEBPACK_IMPORTED_MODULE_3___default.a.post(a.initData.dossierApi+"/dossierfiles",n,o).then((function(e){t(e)})).catch((function(t){console.log(t),i(t)}))}))},uploadSingleFileGroupCongVan:function(t,e){t.commit;var a=t.state;return new Promise((function(t,i){var o=[],n=jquery__WEBPACK_IMPORTED_MODULE_5___default()('input[id="documentFile"]')[0].files,s=n.length,r=0;if(n)for(var c=0;c<s;c++){var l=n[c],d=l["name"];l["name"]&&(d=l["name"].replace(/\%/g,""),d=d.replace(/\//g,""),d=d.replace(/\\/g,""));var u=new FormData;3===e.partType?(e["displayName"]&&(d=e["displayName"].replace(/\%/g,""),d=d.replace(/\//g,""),d=d.replace(/\\/g,"")),u.append("displayName",d)):u.append("displayName",d),u.append("fileType",l.type),u.append("fileSize",l.size),u.append("isSync","false"),u.append("file",l,d),u.append("dossierPartNo",e.partNo),u.append("dossierTemplateNo",e.dossierTemplateNo),u.append("fileTemplateNo",e.fileTemplateNo),u.append("formData",""),u.append("referenceUid","");var h={partTip:e.partTip,file:l};console.log("dataFILEELLELE",e,e.partTip),store.dispatch("validFileUpload",h),l&&a.validFileUpload?axios__WEBPACK_IMPORTED_MODULE_3___default.a.post(a.initData.dossierApi+"/"+e.dossierId+"/files",u,{headers:{groupId:a.initData.groupId,"Content-Type":"multipart/form-data"}}).then((function(e){r+=1,o.push(e.data),r===s&&t(o)})).catch((function(t){toastr__WEBPACK_IMPORTED_MODULE_2___default.a.clear(),toastr__WEBPACK_IMPORTED_MODULE_2___default.a.error("Yêu cầu của bạn thực hiện thất bại."),r+=1,r===s&&i(o)})):(r+=1,r===s&&i(o))}}))},uploadSingleOtherFile:function(t,e){t.commit;var a=t.state;return new Promise((function(t,i){var o=new FormData,n=e["displayName"];e["displayName"]&&(n=e["displayName"].replace(/\%/g,""),n=n.replace(/\//g,""),n=n.replace(/\\/g,"")),o.append("displayName",e.displayName?n:""),o.append("dossierPartNo",e.partNo?e.partNo:""),o.append("file",""),o.append("fileType",""),o.append("fileSize",""),o.append("isSync","false"),o.append("dossierTemplateNo",""),o.append("fileTemplateNo",""),o.append("formData",""),o.append("referenceUid",""),axios__WEBPACK_IMPORTED_MODULE_3___default.a.post(a.initData.dossierApi+"/"+e.dossierId+"/files",o,{headers:{groupId:a.initData.groupId,"Content-Type":"multipart/form-data"}}).then((function(e){t(e.data),toastr__WEBPACK_IMPORTED_MODULE_2___default.a.clear(),console.log("upload file success!")})).catch((function(t){console.log(t),toastr__WEBPACK_IMPORTED_MODULE_2___default.a.clear(),toastr__WEBPACK_IMPORTED_MODULE_2___default.a.error("Yêu cầu của bạn thực hiện thất bại."),i(t)}))}))},uploadPaymentFile:function(t,e){t.commit;var a=t.state;return new Promise((function(t,i){var o=jquery__WEBPACK_IMPORTED_MODULE_5___default()("#"+e.selector)[0].files,n=o[0],s=n["name"];n["name"]&&(s=n["name"].replace(/\%/g,""),s=s.replace(/\//g,""),s=s.replace(/\\/g,""));var r=new FormData;r.append("file",n,s);var c={partTip:e["partTip"],file:n};store.dispatch("validFileUpload",c),n&&a.validFileUpload?axios__WEBPACK_IMPORTED_MODULE_3___default.a.put(a.initData.dossierApi+"/"+e.dossierId+"/payments/"+e.referenceUid+"/confirmfile",r,{headers:{groupId:a.initData.groupId,"Content-Type":"multipart/form-data"}}).then((function(e){t(e.data)})).catch((function(t){console.log(t),toastr__WEBPACK_IMPORTED_MODULE_2___default.a.clear(),toastr__WEBPACK_IMPORTED_MODULE_2___default.a.error("Tải file lên thất bại"),i(t)})):i("error")}))},uploadDossierFileImport:function(t,e){t.commit;var a=t.state;return new Promise((function(t,i){var o=jquery__WEBPACK_IMPORTED_MODULE_5___default()("#"+e.selector)[0].files,n=o[0],s=n["name"],r=new FormData;r.append("file",n,s);var c={partTip:e["partTip"],file:n};store.dispatch("validFileUpload",c),n&&a.validFileUpload?axios__WEBPACK_IMPORTED_MODULE_3___default.a.post("/o/rest/v2/dossiers/createMutiplite/files",r,{headers:{groupId:a.initData.groupId,"Content-Type":"multipart/form-data"}}).then((function(e){t(e.data),console.log("Tải file lên thành công")})).catch((function(t){console.log(t),toastr__WEBPACK_IMPORTED_MODULE_2___default.a.clear(),toastr__WEBPACK_IMPORTED_MODULE_2___default.a.error("Tải file lên thất bại"),i(t)})):i("error")}))},getDetailDossier:function(t,e){var a=t.commit,i=t.state;return new Promise((function(t,o){store.dispatch("loadInitResource").then((function(n){var s={headers:{groupId:i.initData.groupId}};a("setLoading",!0),axios__WEBPACK_IMPORTED_MODULE_3___default.a.get(i.initData.postDossierApi+"/"+e,s).then((function(e){var i={delegateName:e.data.delegateName,delegateCityCode:e.data.delegateCityCode,delegateAddress:e.data.delegateAddress,delegateDistrictCode:e.data.delegateDistrictCode,delegateWardCode:e.data.delegateWardCode,delegateEmail:e.data.delegateEmail,delegateTelNo:e.data.delegateTelNo,delegateIdNo:e.data.delegateIdNo};t(e.data),a("setLoading",!1),a("setDossier",e.data),a("setThongTinChuHoSo",e.data),a("setLePhi",e.data),a("setThongTinNguoiNopHoSo",i),a("setThongTinChungHoSo",e.data),a("setDichVuChuyenPhatKetQua",e.data)}),(function(t){a("setLoading",!1),o(t)})).catch((function(t){console.log(t)}))})).catch((function(){}))}))},getGovAgency:function(t,e){t.commit;var a=t.state;return new Promise((function(t,e){var i={headers:{groupId:a.initData.groupId},params:{sort:"sibling"}};axios__WEBPACK_IMPORTED_MODULE_3___default.a.get(a.initData.regionApi+"/GOVERNMENT_AGENCY/dictitems",i).then((function(e){t(e.data.data)})).catch((function(t){console.log(t)}))}))},getDocumentType:function(t,e){t.commit;var a=t.state;return new Promise((function(t,e){var i={headers:{groupId:a.initData.groupId},params:{sort:"sibling"}};axios__WEBPACK_IMPORTED_MODULE_3___default.a.get(a.initData.regionApi+"/DOCUMENT_TYPE/dictitems",i).then((function(e){e.data&&e.data.data?t(e.data.data):t(null)})).catch((function(){e(null)}))}))},loadDossierFiles:function(t,e){var a=t.commit,i=t.state;return new Promise((function(t,o){var n={headers:{groupId:i.initData.groupId}};axios__WEBPACK_IMPORTED_MODULE_3___default.a.get(i.initData.dossierApi+"/"+e+"/files",n).then((function(e){a("setDossierFiles",e.data.data),e.data.data?t(e.data.data):t([])})).catch((function(e){console.log(e),t([])}))}))},getPaymentFiles:function(t,e){var a=t.commit,i=t.state;return new Promise((function(t,o){var n={headers:{groupId:i.initData.groupId}};axios__WEBPACK_IMPORTED_MODULE_3___default.a.get(i.initData.dossierApi+"/"+e.dossierId+"/payments/"+e.referenceUid+"/confirmfile",n).then((function(e){200===e.status||"200"===e.status?t("hasPayment"):t(""),e.headers["content-disposition"]?a("setPaymentFileName",e.headers["content-disposition"].split(";")[1].split("=")[1].replace(/\"/g,"")):a("setPaymentFileName","payment_file")})).catch((function(t){console.log(t),o(t)}))}))},putPayments:function(t,e){t.commit;var a=t.state;return new Promise((function(t,i){var o={headers:{groupId:a.initData.groupId}},n=new URLSearchParams;axios__WEBPACK_IMPORTED_MODULE_3___default.a.put(a.initData.dossierApi+"/keypay/"+e.referenceUid+"/"+e.referenceUid,n,o).then((function(e){store.dispatch("getActiveGetCounter",!a.activeGetCounter),e.data?t(e.data):t([])})).catch((function(t){console.log(t),i(t)}))}))},viewFile:function(t,e){t.commit;var a=t.state;t.dispatch;return new Promise((function(t,i){var o={headers:{groupId:a.initData.groupId},responseType:"blob"};axios__WEBPACK_IMPORTED_MODULE_3___default.a.get(a.initData.dossierApi+"/"+e.dossierId+"/files/"+e.referenceUid,o).then((function(e){if(e.data){var a=window.URL.createObjectURL(e.data);t(a)}else t("pending")})).catch((function(t){console.log(t)}))}))},viewPaymentFile:function(t,e){t.commit;var a=t.state;t.dispatch;return new Promise((function(t,i){var o={headers:{groupId:a.initData.groupId},responseType:"blob"};axios__WEBPACK_IMPORTED_MODULE_3___default.a.get(a.initData.dossierApi+"/"+e.dossierId+"/payments/"+e.referenceUid+"/confirmfile",o).then((function(e){var a=window.URL.createObjectURL(e.data);t(a)})).catch((function(t){console.log(t)}))}))},viewDocument:function(t,e){t.commit;var a=t.state;t.dispatch;return new Promise((function(t,i){var o={headers:{groupId:a.initData.groupId},responseType:"blob"};axios__WEBPACK_IMPORTED_MODULE_3___default.a.get(a.initData.dossierApi+"/"+e.dossierId+"/documents/"+e.referenceUid,o).then((function(e){var a=window.URL.createObjectURL(e.data);t(a)})).catch((function(t){console.log(t)}))}))},downloadFileDocument:function(t,e){t.commit;var a=t.state;t.dispatch;return new Promise((function(t,i){var o={headers:{groupId:a.initData.groupId},responseType:"blob"};axios__WEBPACK_IMPORTED_MODULE_3___default.a.get(a.initData.dossierApi+"/"+e.dossierId+"/documents/"+e.referenceUid,o).then((function(e){var a=window.URL.createObjectURL(e.data),i=decodeURI(e.headers["content-disposition"].match(/filename="(.*)"/)[1].split(".")[1]),o=decodeURI(e.headers["content-disposition"].match(/filename="(.*)"/)[1]);if("pdf,png,jpg,jpeg".indexOf(i.toLowerCase())>=0)t(a);else{var n=e.data;file_saver__WEBPACK_IMPORTED_MODULE_6___default()(n,o)}})).catch((function(t){console.log(t)}))}))},postDossier:function(t,e){var a=t.commit,i=t.state;return new Promise((function(t,o){a("setLoading",!0);var n={headers:{groupId:i.initData.groupId,Accept:"application/json","Content-Type":"application/x-www-form-urlencoded",cps_auth:""}},s=new URLSearchParams;s.append("serviceCode",e.serviceCode),s.append("govAgencyCode",e.govAgencyCode),s.append("dossierTemplateNo",e.templateNo),s.append("originality",e.originality),e.j_captcha_response&&s.append("j_captcha_response",e.j_captcha_response),axios__WEBPACK_IMPORTED_MODULE_3___default.a.post(i.initData.postDossierApi,s,n).then((function(o){o.data.serviceConfig=i.serviceConfigObj,a("setLoading",!1),a("setDossier",o.data),a("setThongTinChuHoSo",o.data),a("setLePhi",o.data),a("setThongTinChungHoSo",o.data),toastr__WEBPACK_IMPORTED_MODULE_2___default.a.clear(),e.j_captcha_response?t(o):t(o.data)})).catch((function(t){o(t),toastr__WEBPACK_IMPORTED_MODULE_2___default.a.clear(),toastr__WEBPACK_IMPORTED_MODULE_2___default.a.error("Yêu cầu của bạn thực hiện thất bại."),a("setLoading",!1)}))}))},postDossierIntoGroup:function(t,e){var a=t.commit,i=t.state;return new Promise((function(t,o){a("setLoading",!0);var n={headers:{groupId:i.initData.groupId,Accept:"application/json","Content-Type":"application/x-www-form-urlencoded",cps_auth:""}},s=new URLSearchParams;s.append("dossierId",e.dossierId),axios__WEBPACK_IMPORTED_MODULE_3___default.a.put("/o/rest/v2/dossiers/"+e.groupDossierId+"/groupDossier",s,n).then((function(e){a("setLoading",!1),t(e.data)})).catch((function(t){a("setLoading",!1),o(t),toastr__WEBPACK_IMPORTED_MODULE_2___default.a.clear(),toastr__WEBPACK_IMPORTED_MODULE_2___default.a.error("Yêu cầu của bạn thực hiện thất bại")}))}))},postDossierNewVersion:function(t,e){var a=t.commit,i=t.state;return new Promise((function(t,o){a("setLoading",!0);var n={headers:{groupId:i.initData.groupId,Accept:"application/json","Content-Type":"application/x-www-form-urlencoded",cps_auth:""}},s=new URLSearchParams;s.append("serviceCode",e.serviceCode),s.append("govAgencyCode",e.govAgencyCode),s.append("dossierTemplateNo",e.templateNo),s.append("originality",e.originality),s.append("dossiers",e.dossiers),s.append("dossierFileArr",e.dossierFileArr),s.append("dossierMarkArr",e.dossierMarkArr),s.append("payment",e.payment),e.j_captcha_response&&s.append("j_captcha_response",e.j_captcha_response),axios__WEBPACK_IMPORTED_MODULE_3___default.a.post("/o/rest/v2/dossiers/create/all",s,n).then((function(o){o.data.serviceConfig=i.serviceConfigObj,a("setLoading",!1),toastr__WEBPACK_IMPORTED_MODULE_2___default.a.clear(),e.j_captcha_response?t(o):t(o.data)})).catch((function(t){o(t),toastr__WEBPACK_IMPORTED_MODULE_2___default.a.clear(),toastr__WEBPACK_IMPORTED_MODULE_2___default.a.error("Yêu cầu của bạn thực hiện thất bại."),a("setLoading",!1)}))}))},putDossierNew:function(t,e){var a=t.commit,i=t.state;return new Promise((function(t,o){a("setLoading",!0);var n={headers:{groupId:i.initData.groupId,Accept:"application/json","Content-Type":"application/x-www-form-urlencoded",cps_auth:""}},s=new URLSearchParams;for(var r in e.dossier)s.append(r,e.dossier[r]);axios__WEBPACK_IMPORTED_MODULE_3___default.a.put("/o/rest/v2/dossiers/"+e.id,s,n).then((function(o){o.data.serviceConfig=i.serviceConfigObj,a("setLoading",!1),toastr__WEBPACK_IMPORTED_MODULE_2___default.a.clear(),e.j_captcha_response?t(o):t(o.data)})).catch((function(t){o(t),toastr__WEBPACK_IMPORTED_MODULE_2___default.a.clear(),toastr__WEBPACK_IMPORTED_MODULE_2___default.a.error("Yêu cầu của bạn thực hiện thất bại."),a("setLoading",!1)}))}))},putDossierFileNew:function(t,e){var a=t.commit,i=t.state;return new Promise((function(t,o){a("setLoading",!0);var n={headers:{groupId:i.initData.groupId,Accept:"application/json","Content-Type":"application/x-www-form-urlencoded",cps_auth:""}},s=new URLSearchParams;s.append("formdata",e.formData),axios__WEBPACK_IMPORTED_MODULE_3___default.a.put("/o/rest/v2/dossiers/"+e.id+"/files/"+e.referenceUid+"/formdata",s,n).then((function(o){o.data.serviceConfig=i.serviceConfigObj,a("setLoading",!1),toastr__WEBPACK_IMPORTED_MODULE_2___default.a.clear(),e.j_captcha_response?t(o):t(o.data)})).catch((function(t){o(t),toastr__WEBPACK_IMPORTED_MODULE_2___default.a.clear(),toastr__WEBPACK_IMPORTED_MODULE_2___default.a.error("Yêu cầu của bạn thực hiện thất bại."),a("setLoading",!1)}))}))},putMetaData:function(t,e){var a=t.commit,i=t.state;return new Promise((function(t,o){a("setLoading",!0);var n={headers:{groupId:i.initData.groupId,Accept:"application/json","Content-Type":"application/x-www-form-urlencoded",cps_auth:""}},s=new URLSearchParams;console.log("data put metadata111",e.data),s.append("data",e.data),axios__WEBPACK_IMPORTED_MODULE_3___default.a.put("/o/rest/v2/dossiers/"+e.id+"/metadata",s,n).then((function(e){t(e)})).catch((function(t){o(t)}))}))},putPayment:function(t,e){var a=t.commit,i=t.state;return new Promise((function(t,o){a("setLoading",!0);var n={headers:{groupId:i.initData.groupId,Accept:"application/json"}},s=new URLSearchParams;s.append("requestPayment",e.payment.requestPayment),s.append("paymentNote",e.payment.paymentNote),s.append("advanceAmount",e.payment.advanceAmount),s.append("feeAmount",e.payment.feeAmount),s.append("serviceAmount",e.payment.serviceAmount),s.append("shipAmount",e.payment.shipAmount),axios__WEBPACK_IMPORTED_MODULE_3___default.a.post("/o/rest/v2/dossiers/"+e.dossierId+"/payment",s,n).then((function(e){t(e)})).catch((function(t){o(t),toastr__WEBPACK_IMPORTED_MODULE_2___default.a.clear(),toastr__WEBPACK_IMPORTED_MODULE_2___default.a.error("Yêu cầu của bạn thực hiện thất bại."),a("setLoading",!1)}))}))},getDossiersIntoGroup:function(t,e){t.commit;var a=t.state;return new Promise((function(t,i){var o={headers:{groupId:a.initData.groupId},params:{groupDossierId:e.groupDossierId?String(e.groupDossierId):""}};axios__WEBPACK_IMPORTED_MODULE_3___default.a.get("/o/rest/v2/dossiers",o).then((function(e){e.data&&e.data["data"]?t(e.data["data"]):t([])})).catch((function(t){console.log(t),i(t)}))}))},getDossiers:function(t,e){t.commit;var a=t.state;return new Promise((function(t,i){store.dispatch("loadInitResource").then((function(o){var n={url:"/o/rest/v2/dossiers",method:"get",params:{dossierNo:e.dossierNo,order:!0,start:0,end:15},headers:{groupId:a.initData.groupId}};axios__WEBPACK_IMPORTED_MODULE_3___default.a.request(n).then((function(e){var a=e.data;a.data?t(a.data):t([])})).catch((function(t){i(t)}))})).catch((function(){}))}))},doCopy:function(t,e){var a=t.commit,i=t.state;return new Promise((function(t,o){a("setLoading",!0);var n={headers:{groupId:i.initData.groupId,Accept:"application/json"}},s=new URLSearchParams;axios__WEBPACK_IMPORTED_MODULE_3___default.a.post(i.initData.postDossierApi+"/"+e.dossierId+"/cloning",s,n).then((function(e){toastr__WEBPACK_IMPORTED_MODULE_2___default.a.clear(),t(e.data)})).catch((function(t){o(t),toastr__WEBPACK_IMPORTED_MODULE_2___default.a.clear(),toastr__WEBPACK_IMPORTED_MODULE_2___default.a.error("Yêu cầu của bạn thực hiện thất bại."),a("setLoading",!1)}))}))},doCancel:function(t,e){var a=t.commit,i=t.state;return new Promise((function(t,o){a("setLoading",!0);var n={headers:{groupId:i.initData.groupId,Accept:"application/json"}},s=new URLSearchParams;axios__WEBPACK_IMPORTED_MODULE_3___default.a.post(i.initData.postDossierApi+"/"+e.dossierId+"/cancel",s,n).then((function(e){toastr__WEBPACK_IMPORTED_MODULE_2___default.a.clear(),t(e.data)})).catch((function(t){o(t),toastr__WEBPACK_IMPORTED_MODULE_2___default.a.clear(),toastr__WEBPACK_IMPORTED_MODULE_2___default.a.error("Yêu cầu của bạn thực hiện thất bại."),a("setLoading",!1)}))}))},putDossier:function(t,e){var a=t.commit,i=t.state;return new Promise((function(t,o){a("setLoading",!1);var n={headers:{groupId:i.initData.groupId,Accept:"application/json","Content-Type":"application/x-www-form-urlencoded",cps_auth:""}},s="";s="2"===e.userType?"business":"1"===e.userType?"citizen":"organization";var r=!1;null!==e["sameUser"]&&void 0!==e["sameUser"]&&"undefined"!==e["sameUser"]&&(r=e["sameUser"]),console.log("dataPutdossier_1",e);var c=new URLSearchParams;c.append("applicantName",e.applicantName?e.applicantName:""),c.append("dossierNo",e.dossierNo?e.dossierNo:""),c.append("applicantIdType",s),c.append("applicantIdNo",e.applicantIdNo?e.applicantIdNo:""),c.append("address",e.address?e.address:""),c.append("cityCode",e.cityCode?e.cityCode:""),c.append("districtCode",e.districtCode?e.districtCode:""),c.append("wardCode",e.wardCode?e.wardCode:""),c.append("contactTelNo",e.contactTelNo?e.contactTelNo:""),c.append("contactEmail",e.contactEmail?e.contactEmail:""),c.append("delegateName",e.delegateName?e.delegateName:""),c.append("delegateIdNo",e.delegateIdNo?e.delegateIdNo:""),c.append("delegateTelNo",e.delegateTelNo?e.delegateTelNo:""),c.append("delegateEmail",e.delegateEmail?e.delegateEmail:""),c.append("delegateAddress",e.delegateAddress?e.delegateAddress:""),c.append("delegateCityCode",e.delegateCityCode?e.delegateCityCode:""),c.append("delegateDistrictCode",e.delegateDistrictCode?e.delegateDistrictCode:""),c.append("delegateWardCode",e.delegateWardCode?e.delegateWardCode:""),c.append("applicantNote",i.applicantNote),c.append("dossierName",e.dossierName?e.dossierName:""),c.append("isSameAsApplicant",r),e.editable&&c.append("dueDate",e.dueDate?e.dueDate:""),e.viaPostal&&(c.append("viaPostal",e.viaPostal),c.append("postalServiceCode",e.postalServiceCode?e.postalServiceCode:""),c.append("postalAddress",e.postalAddress?e.postalAddress:""),c.append("postalCityCode",e.postalCityCode?e.postalCityCode:""),c.append("postalDistrictCode",e.postalDistrictCode?e.postalDistrictCode:""),c.append("postalTelNo",e.postalTelNo?e.postalTelNo:""),e.hasOwnProperty("vnpostalStatus")&&c.append("vnpostalStatus",e.vnpostalStatus)),e.viaPostal&&"1"===String(e.vnpostalStatus)&&c.append("vnpostalProfile",JSON.stringify(e.vnpostalProfile)),c.append("fromViaPostal",e.hasOwnProperty("fromViaPostal")?e.fromViaPostal:""),c.append("sampleCount",e.sampleCount?e.sampleCount:0),e.formMeta&&c.append("formMeta",e.formMeta?e.formMeta:""),console.log("dataPutdossier",c),axios__WEBPACK_IMPORTED_MODULE_3___default.a.put(i.initData.postDossierApi+"/"+e.dossierId,c,n).then((function(e){t(e.data),a("setLoading",!1),a("setDossier",e.data),a("setThongTinChuHoSo",e.data),a("setThongTinChungHoSo",e.data),a("setLePhi",e.data),a("setDichVuChuyenPhatKetQua",e.data)})).catch((function(t){o(t)}))}))},putDossierCongVan:function(t,e){var a=t.commit,i=t.state;return new Promise((function(t,o){a("setLoading",!1);var n={headers:{groupId:i.initData.groupId,Accept:"application/json","Content-Type":"application/x-www-form-urlencoded",cps_auth:""}},s=new URLSearchParams;s.append("documentNo",e.documentNo?e.documentNo:""),s.append("documentDate",e.documentDate?e.documentDate:""),s.append("dueDate",e.dueDate?e.dueDate:""),s.append("briefNote",e.briefNote?e.briefNote:""),s.append("sampleCount",e.sampleCount?e.sampleCount:""),s.append("contactTelNo",e.contactTelNo?e.contactTelNo:""),s.append("contactEmail",e.contactEmail?e.contactEmail:""),s.append("delegateIdNo",e.delegateIdNo?e.delegateIdNo:""),s.append("delegateName",e.delegateName?e.delegateName:""),e.hasOwnProperty("formCode")&&"NEW_GROUP_CV_DI"===e.formCode&&s.append("metadata",JSON.stringify({congVanDi:!0})),console.log("dataPutdossier",s),axios__WEBPACK_IMPORTED_MODULE_3___default.a.put(i.initData.postDossierApi+"/"+e.dossierId,s,n).then((function(a){e.hasOwnProperty("typeAction")&&"add"===e.typeAction&&store.dispatch("getActiveGetCounter",!i.activeGetCounter),t(a.data)})).catch((function(t){o(t)}))}))},importDossier:function(t,e){var a=t.commit,i=t.state;return new Promise((function(t,o){a("setLoading",!1);var n={headers:{groupId:i.initData.groupId,Accept:"application/json","Content-Type":"application/x-www-form-urlencoded",cps_auth:""}},s=new URLSearchParams;s.append("serviceCode",e["serviceCode"]),s.append("govAgencyCode",e["govAgencyCode"]),s.append("dossierTemplateNo",e["dossierTemplateNo"]),s.append("originality",e["originality"]),s.append("dossiers",e["dossiers"]),s.append("dossierFileArr",e["dossierFiles"]),s.append("dossierMarkArr",e["dossierMarks"]),s.append("payment",e["payment"]),axios__WEBPACK_IMPORTED_MODULE_3___default.a.post(i.initData.postDossierApi+"/import/all",s,n).then((function(e){t(e.data)})).catch((function(t){o(t)}))}))},updateApplicantNote:function(t,e){t.commit;var a=t.state;return new Promise((function(t,i){var o={headers:{groupId:a.initData.groupId,Accept:"application/json","Content-Type":"application/x-www-form-urlencoded",cps_auth:""}},n=new URLSearchParams;n.append("applicantNote",a.applicantNote),axios__WEBPACK_IMPORTED_MODULE_3___default.a.put(a.initData.postDossierApi+"/"+e.dossierId,n,o).then((function(e){t(e.data)})).catch((function(t){i(t)}))}))},getApplicantInfos:function(t,e){t.commit;var a=t.state;return new Promise((function(t,i){var o={headers:{groupId:a.initData.groupId}};axios__WEBPACK_IMPORTED_MODULE_3___default.a.get(a.endPointApi+"/applicants/ngsp/"+e.applicantIdNo,o).then((function(e){e.data&&e.data["Data"]&&t(e.data["Data"])})).catch((function(t){console.log(t),i(t)}))}))},checkApplicantInfos:function(t,e){t.commit;var a=t.state;return new Promise((function(t,i){var o={headers:{groupId:a.initData.groupId?a.initData.groupId:"",Accept:"application/json","Content-Type":"application/x-www-form-urlencoded"}},n=a.endPointApi+"/applicants/ngsp/verify",s=new URLSearchParams;s.append("applicantIdNo",e.applicantIdNo?e.applicantIdNo:""),s.append("applicantName",e.applicantName?e.applicantName:""),axios__WEBPACK_IMPORTED_MODULE_3___default.a.post(n,s,o).then((function(e){t(e.data)})).catch((function(t){i(t)}))}))},getDossierFilesApplicants:function(t,e){t.commit;var a=t.state;return new Promise((function(t,i){var o={headers:{groupId:a.initData.groupId}};axios__WEBPACK_IMPORTED_MODULE_3___default.a.get(a.initData.dossierApi+"/"+e.dossierId+"/applicant/"+e.applicantIdNo+"/files/"+e.fileTemplateNo+"/search",o).then((function(e){e.data.data?t(e.data.data):t([])})).catch((function(t){console.log(t),i(t)}))}))},putDuedateDossier:function(t,e){var a=t.commit,i=t.state;return new Promise((function(t,o){a("setLoading",!1);var n={headers:{groupId:i.initData.groupId,Accept:"application/json","Content-Type":"application/x-www-form-urlencoded"}},s=new URLSearchParams;s.append("dueDate",e),axios__WEBPACK_IMPORTED_MODULE_3___default.a.put(i.initData.postDossierApi+"/"+i.thongTinChungHoSo.dossierId,s,n).then((function(e){t(e.data)})).catch((function(t){o(t)}))}))},submitDossier:function(t,e){t.commit;var a=t.state;return new Promise((function(t,e){var i={headers:{groupId:a.initData.groupId}};axios__WEBPACK_IMPORTED_MODULE_3___default.a.get(a.initData.dossierApi+"/"+a.thongTinChungHoSo.dossierId+"/submitting",i).then((function(e){t(e.data)})).catch((function(t){e(t),console.log(t)}))}))},postDossierMark:function(t,e){t.commit;var a=t.state;return new Promise((function(t,i){var o={headers:{groupId:a.initData.groupId,Accept:"application/json","Content-Type":"application/x-www-form-urlencoded",cps_auth:""}},n=new URLSearchParams;1===e["checkInput"]?(void 0!==e.fileCheck&&"undefined"!==e.fileCheck&&null!==e.fileCheck&&n.append("fileCheck",e.fileCheck),void 0!==e.fileComment&&"undefined"!==e.fileComment&&null!==e.fileComment&&n.append("fileComment",e.fileComment)):void 0!==e.fileMark&&"undefined"!==e.fileMark&&n.append("fileMark",e.fileMark),isNaN(e.recordCount)||void 0===e.recordCount||"undefined"===e.recordCount||null===e.recordCount||n.append("recordCount",e.recordCount);var s=a.initData.dossierApi+"/"+e.dossierId+"/marks/"+e.partNo;axios__WEBPACK_IMPORTED_MODULE_3___default.a.post(s,n,o).then((function(e){t(e.data)})).catch((function(t){i(t)}))}))},postAction:function(t,e){var a=t.commit,i=t.state;return new Promise((function(t,o){a("setLoading",!0);var n={headers:{groupId:i.initData.groupId}},s=new URLSearchParams;s.append("actionCode",e.actionCode?e.actionCode:""),s.append("actionNote",e.actionNote?e.actionNote:""),s.append("actionUser",e.actionUser?e.actionUser:""),s.append("payload",e.payload?JSON.stringify(e.payload):""),s.append("security",e.security?e.security:""),s.append("assignUsers",e.assignUsers?JSON.stringify(e.assignUsers):""),s.append("payment",e.payment?JSON.stringify(e.payment):""),s.append("createDossiers",e.createDossiers?e.createDossiers:"");var r=i.initData.dossierApi+"/"+e.dossierId+"/actions";axios__WEBPACK_IMPORTED_MODULE_3___default.a.post(r,s,n).then((function(e){t(e.data),a("setLoading",!1),store.dispatch("getActiveGetCounter",!i.activeGetCounter)})).catch((function(t){o(t),toastr__WEBPACK_IMPORTED_MODULE_2___default.a.clear(),toastr__WEBPACK_IMPORTED_MODULE_2___default.a.error("Yêu cầu của bạn thực hiện thất bại."),store.commit("setLoading",!1)}))}))},getUserInfoFromApplicantIdNo:function(t,e){t.commit;var a=t.state;return new Promise((function(t,i){store.dispatch("loadInitResource").then((function(o){var n={headers:{groupId:a.initData.groupId},params:{start:0,end:5,idNo:e.idNo}};axios__WEBPACK_IMPORTED_MODULE_3___default.a.get(a.initData.applicantApi,n).then((function(e){t(e.data.data)})).catch((function(t){console.log(t),i(t)}))})).catch((function(){}))}))},loadAlpcaForm:function loadAlpcaForm(_ref68,data){var commit=_ref68.commit,state=_ref68.state,dispatch=_ref68.dispatch,id=data["id"]?data["id"]:"nm",formScript,formData;window.$('div[id="formAlpaca'+data.dossierPartNo+id+'"]').empty(),console.log("data_loadAlpcaForm",data,eval("("+data.formScript+")")),formScript=data.formScript?eval("("+data.formScript+")"):{},formData=data.formData?eval("("+data.formData+")"):{},formScript.data=formData,window.$('div[id="formAlpaca'+data.dossierPartNo+id+'"]').alpaca(formScript)},putAlpacaForm:function(t,e){t.commit;var a=t.state;t.dispatch;return new Promise((function(t,i){var o={headers:{groupId:a.initData.groupId,cps_auth:""}},n=e["id"]?e["id"]:"nm";try{var s=window.$('div[id="formAlpaca'+e.dossierPartNo+n+'"]').alpaca("get"),r=s.getValue(),c=window.$('div[id="formAlpaca'+e.dossierPartNo+n+'"]').alpaca("get").childrenByPropertyId;if(c)for(var l in c)if(c[l].isRequired()&&""===c[l].getValue())return toastr__WEBPACK_IMPORTED_MODULE_2___default.a.clear(),toastr__WEBPACK_IMPORTED_MODULE_2___default.a.error(c[l].options.title?c[l].options.title+" là trường dữ liệu bắt buộc":c[l].options["name"]+" là trường dữ liệu bắt buộc"),void i("valid");var d=new URLSearchParams;d.append("formdata",JSON.stringify(r));var u=a.initData.dossierApi+"/"+e.dossierId+"/files/"+e.referenceUid+"/formdata";axios__WEBPACK_IMPORTED_MODULE_3___default.a.put(u,d,o).then((function(e){t(e.data)})).catch((function(t){i(e)}))}catch(h){console.log(h),i(e)}}))},putAlpacaFormCallBack:function(t,e){t.commit;var a=t.state;t.dispatch;return new Promise((function(t,i){var o={headers:{groupId:a.initData.groupId,cps_auth:""}};try{var n=new URLSearchParams;n.append("formdata",JSON.stringify(e));var s=a.initData.dossierApi+"/"+e.dossierId+"/files/"+e.referenceUid+"/formdata";axios__WEBPACK_IMPORTED_MODULE_3___default.a.put(s,n,o).then((function(e){t(e.data)})).catch((function(t){i(e)}))}catch(r){console.log(r),i(e)}}))},rollBack:function(t,e){var a=t.state;t.commit;return new Promise((function(t,i){var o={headers:{groupId:a.initData.groupId}};try{var n=new URLSearchParams,s=a.initData.dossierApi+"/"+e.dossierId+"/rollback";axios__WEBPACK_IMPORTED_MODULE_3___default.a.post(s,n,o).then((function(e){t(e.data),store.dispatch("getActiveGetCounter",!a.activeGetCounter)})).catch((function(t){i(e)}))}catch(r){console.log(r),i(e)}}))},goToStep:function(t,e){var a=t.state;t.commit;return new Promise((function(t,i){var o={headers:{groupId:a.initData.groupId}};try{var n=new URLSearchParams,s=a.initData.dossierApi+"/"+e.dossierId+"/goto/"+e.stepCode;axios__WEBPACK_IMPORTED_MODULE_3___default.a.post(s,n,o).then((function(e){t(e.data),store.dispatch("getActiveGetCounter",!a.activeGetCounter)})).catch((function(t){i(e)}))}catch(r){console.log(r),i(e)}}))},postEform:function(t,e){t.commit;var a=t.state;return new Promise((function(t,i){var o={headers:{groupId:a.initData.groupId,"Content-Type":"multipart/form-data"}};try{var n=e["id"]?e["id"]:"nm",s=new FormData,r=window.$('div[id="formAlpaca'+e.partNo+n+'"]').alpaca("get"),c=r.getValue();s.append("formData",JSON.stringify(c)),s.append("file","");var l=window.$('div[id="formAlpaca'+e.partNo+n+'"]').alpaca("get").childrenByPropertyId;if(l)for(var d in l)if(l[d].isRequired()&&""===l[d].getValue())return toastr__WEBPACK_IMPORTED_MODULE_2___default.a.clear(),toastr__WEBPACK_IMPORTED_MODULE_2___default.a.error(l[d].options.title?l[d].options.title+" là trường dữ liệu bắt buộc":l[d].options["name"]+" là trường dữ liệu bắt buộc"),void i("valid");var u=a.initData.dossierApi+"/"+e.dossierId+"/eforms/"+e.partNo;axios__WEBPACK_IMPORTED_MODULE_3___default.a.post(u,s,o).then((function(e){t(e.data)})).catch((function(t){i(e)}))}catch(h){console.log(h),i(e)}}))},postEformCallBack:function(t,e){t.commit;var a=t.state;return new Promise((function(t,i){var o={headers:{groupId:a.initData.groupId,"Content-Type":"multipart/form-data"}};try{var n=new FormData;console.log("data put1",e),n.append("formData",JSON.stringify(e)),n.append("file","");var s=a.initData.dossierApi+"/"+e.dossierId+"/eforms/"+e.tp;axios__WEBPACK_IMPORTED_MODULE_3___default.a.post(s,n,o).then((function(e){t(e.data)})).catch((function(t){i(e)}))}catch(r){console.log(r),i(e)}}))},postEformEsignature:function(t,e){t.commit;var a=t.state;return new Promise((function(t,i){var o={headers:{groupId:a.initData.groupId,"Content-Type":"multipart/form-data"}};try{var n=new FormData;n.append("formData",JSON.stringify(JSON.parse(e.formData))),n.append("file","");var s=a.initData.dossierApi+"/"+e.dossierId+"/eforms/"+e.partNo;axios__WEBPACK_IMPORTED_MODULE_3___default.a.post(s,n,o).then((function(e){t(e.data)})).catch((function(t){i(e)}))}catch(r){console.log(r),i(e)}}))},postVNPOST:function(t,e){var a=t.commit,i=t.state;return new Promise((function(t,o){a("setLoading",!0);var n={headers:{groupId:i.initData.groupId,Accept:"application/json","Content-Type":"application/x-www-form-urlencoded"}},s=new URLSearchParams;s.append("customerCode","ccth"),s.append("orderNumber",i.thongTinChungHoSo.dossierId),s.append("senderProvince",e.senderProvince),s.append("senderAddress",e.senderAddress),s.append("senderName",e.senderName),s.append("senderTel",e.senderTel),s.append("receiverName",e.receiverName),s.append("receiverAddress",e.receiverAddress),s.append("receiverTel",e.receiverTel),s.append("receiverProvince",e.receiverProvince);var r="/o/rest/v2/postal/vnpost";axios__WEBPACK_IMPORTED_MODULE_3___default.a.post(r,s,n).then((function(e){t(e.data),a("setLoading",!1)})).catch((function(t){o(t),toastr__WEBPACK_IMPORTED_MODULE_2___default.a.clear(),toastr__WEBPACK_IMPORTED_MODULE_2___default.a.error("Yêu cầu của bạn thực hiện thất bại."),a("setLoading",!1)}))}))},getDossierTemplateEdit:function(t){t.commit;var e=t.state;return new Promise((function(t,a){var i=e.dossierTemplates,o=[];try{0===e.dossierFiles.length?dispatch("loadDossierFiles").then((function(e){e.forEach((function(t){i.forEach((function(e){t.dossierPartNo===e.partNo&&o.push({partName:e.partName,partNo:e.partNo,displayName:t.displayName,dossierFileId:t.dossierFileId,partType:e.partType,hasForm:e.hasForm,fileType:t.fileType,referenceUid:t.referenceUid})}))})),t(o)})).catch((function(e){console.log(e),t([])})):e.dossierFiles.forEach((function(t){i.forEach((function(e){t.dossierPartNo===e.partNo&&o.push({partName:e.partName,partNo:e.partNo,displayName:t.displayName,dossierFileId:t.dossierFileId,partType:e.partType,hasForm:e.hasForm,fileType:t.fileType,referenceUid:t.referenceUid})}))})),t(o),console.log(o)}catch(n){console.log(n),a([])}}))},loadPlugin:function loadPlugin(_ref78,item){var commit=_ref78.commit,state=_ref78.state;return new Promise((function(resolve,reject){item.plugin=!0;var urlPluginFormData=state.initData.dossierApi+"/"+item.dossierId+"/plugins/"+item.processPluginId+"/formdata",urlPluginFormScript=state.initData.dossierApi+"/"+item.dossierId+"/plugins/"+item.processPluginId+"/formscript",config_plugins={headers:{groupId:state.initData.groupId,Token:window.Liferay?window.Liferay.authToken:""},dataType:"text"};axios__WEBPACK_IMPORTED_MODULE_3___default.a.all([axios__WEBPACK_IMPORTED_MODULE_3___default.a.get(urlPluginFormScript,config_plugins),axios__WEBPACK_IMPORTED_MODULE_3___default.a.get(urlPluginFormData,config_plugins)]).then(axios__WEBPACK_IMPORTED_MODULE_3___default.a.spread((function(urlResponesFormScript,urlResponesFormData){var responseScript=urlResponesFormScript.data,responseData=urlResponesFormData.data;if(item.plugin=!0,-1!==responseScript.indexOf("#preview@pdf")){var url=state.initData.dossierApi+"/"+item.dossierId+"/plugins/"+item.processPluginId+"/preview",config_blob={headers:{groupId:state.initData.groupId},responseType:"blob"};axios__WEBPACK_IMPORTED_MODULE_3___default.a.get(url,config_blob).then((function(t){var e=window.URL.createObjectURL(t.data);item.pdf=!0,item.url=e,item.no_pdf="",resolve(item)})).catch((function(t){console.log(t),item.pdf=!0,item.url="",item.no_pdf="Tài liệu đính kèm không tồn tại!",resolve(item)}))}if(-1!==responseScript.indexOf("#preview@html")){console.log("view html");var config_view={headers:{groupId:state.initData.groupId},dataType:"json"};item.html=!0,item.no_html="";var _url=state.initData.dossierApi+"/"+item.dossierId+"/plugins/"+item.processPluginId+"/previewhtml";axios__WEBPACK_IMPORTED_MODULE_3___default.a.get(_url,config_view).then((function(response){item.no_html="",vm.stepModel=item;var serializable=response.data,partNo=serializable.partNo,dossierFileId=serializable.dossierFileId,formReport=eval("("+serializable.formReport+")"),formData=eval("("+serializable.formData+")");formReport.data=formData,window.$("#alpacajs_form_plugin").alpaca(formReport),window.$(".dossierFilePartNo").val(""),window.$(".dossierFilePartNo").attr("id","dossierFileId"+partNo),window.$(".dossierFilePartNo").val(dossierFileId)})).catch((function(t){console.log(t),item.html=!0,item.no_html="Tài liệu đính kèm không tồn tại!",resolve(item)}))}}))).catch((function(t){console.log(t),reject(t)}))}))},getActiveGetCounter:function(t,e){var a=t.commit;t.state;a("setActiveGetCounter",e)},getActiveLoadingDataHoSo:function(t,e){var a=t.commit;t.state;a("setActiveLoadingDataHoSo",e)},setDefaultCityCode:function(t,e){t.commit;var a=t.state;a.thongTinChuHoSo.cityCode=e},getListHistoryProcessingItems:function(t,e){t.commit;var a=t.state;return new Promise((function(t,i){store.dispatch("loadInitResource").then((function(o){var n={headers:{groupId:a.initData.groupId}},s=[];axios__WEBPACK_IMPORTED_MODULE_3___default.a.get(a.initData.dossierlogsApi+"/"+e.dossierId+"/logs",n).then((function(e){var a=e.data;for(var i in a.data)"PROCESS_TYPE"===a.data[i].notificationType&&s.push(a.data[i]);t(s)})).catch((function(t){i(t)}))}))}))},loadDossierLogs:function(t,e){t.commit;var a=t.state;return new Promise((function(t,i){var o={headers:{groupId:a.initData.groupId},params:{notificationType:e.type}},n=a.initData.dossierApi+"/"+e.dossierId+"/logs";axios__WEBPACK_IMPORTED_MODULE_3___default.a.get(n,o).then((function(e){t(e.data.data)})).catch((function(t){i(t)}))}))},loadPlugins:function(t,e){t.commit;var a=t.state;return new Promise((function(t,i){var o={headers:{groupId:a.initData.groupId}},n=a.initData.dossierApi+"/"+e.dossierId+"/plugins";axios__WEBPACK_IMPORTED_MODULE_3___default.a.get(n,o).then((function(e){t(e.data.data)})).catch((function(t){i(t)}))}))},downloadFile:function(t,e){t.commit;var a=t.state;return new Promise((function(t,i){var o={headers:{groupId:a.initData.groupId},responseType:"blob"};axios__WEBPACK_IMPORTED_MODULE_3___default.a.get(a.initData.dossierApi+"/"+e.dossierId+"/files/"+e.fileAttachId,o).then((function(e){var a=window.URL.createObjectURL(e.data),i=decodeURI(e.headers["content-disposition"].match(/filename="(.*)"/)[1].split(".")[1]),o=decodeURI(e.headers["content-disposition"].match(/filename="(.*)"/)[1]);if("pdf,png,jpg,jpeg".indexOf(i.toLowerCase())>=0)t(a);else{var n=e.data;file_saver__WEBPACK_IMPORTED_MODULE_6___default()(n,o)}})).catch((function(t){i(t)}))}))},getCpsAuthen:function(t){t.commit;var e=t.state;return new Promise((function(t,a){var i={headers:{groupId:e.initData.groupId},params:{}};axios__WEBPACK_IMPORTED_MODULE_3___default.a.get("http://127.0.0.1:8080/api/onegate/token",i).then((function(e){t(e.data)})).catch((function(t){a(t)}))}))},loadUsersComment:function(t,e){t.commit;var a=t.state;return new Promise((function(t,i){var o=[],n={headers:{groupId:a.initData.groupId},params:{userMapping:!0}};axios__WEBPACK_IMPORTED_MODULE_3___default.a.get(a.initData.dossierApi+"/"+e+"/contacts",n).then((function(e){if(null!=e&&e.hasOwnProperty("data")){var a=e.data;jquery__WEBPACK_IMPORTED_MODULE_5___default.a.each(a,(function(t,e){var a={};a.id=e.userId,a.fullname=e.userName,a.email=e.email,a.profilePictureURL=e.profileUrl,o.push(a)}))}else o=[];t(o)})).catch((function(t){o=[],i(o)}))}))},loadCommentItems:function(t,e){t.commit;var a=t.state;return new Promise((function(t,i){var o={headers:{groupId:a.initData.groupId},params:{}};axios__WEBPACK_IMPORTED_MODULE_3___default.a.get(a.initData.commentApi+"/"+e.className+"/"+e.classPK,o).then((function(e){t(e.data.data)})).catch((function(t){i(t)}))}))},postComment:function(t,e){t.commit;var a=t.state;return new Promise((function(t,i){var o={headers:{groupId:a.initData.groupId}},n=e.pings.join(),s=new URLSearchParams;s.append("className",e.className),s.append("classPK",e.classPK),s.append("parent",null!=e.parent?e.parent:0),s.append("pings",n),s.append("content",e.content),s.append("upvoteCount",null!=e.upvoteCount?e.upvoteCount:0),s.append("opinion",e.opinion),axios__WEBPACK_IMPORTED_MODULE_3___default.a.post(a.initData.commentApi,s,o).then((function(e){var a={};null!=e&&(a=e.data,console.log("resPostCmt",a)),t(a)})).catch((function(t){toastr__WEBPACK_IMPORTED_MODULE_2___default.a.clear(),toastr__WEBPACK_IMPORTED_MODULE_2___default.a.error("Yêu cầu của bạn thực hiện thất bại."),console.log(t)}))}))},putComment:function(t,e){t.commit;var a=t.state;return new Promise((function(t,i){var o={headers:{groupId:a.initData.groupId}},n=e.pings.join(),s=new URLSearchParams;s.append("pings",n),s.append("content",e.content),axios__WEBPACK_IMPORTED_MODULE_3___default.a.put(a.initData.commentApi+"/"+e.commentId,s,o).then((function(e){var a={};null!=e&&(a=e.data),t(a)})).catch((function(t){console.log(t)}))}))},deleteComment:function(t,e){t.commit;var a=t.state;return new Promise((function(t,i){var o={headers:{groupId:a.initData.groupId}};axios__WEBPACK_IMPORTED_MODULE_3___default.a.delete(a.initData.commentApi+"/"+e.commentId,o).then((function(e){t(e)})).catch((function(t){i(t)}))}))},upvoteComment:function(t,e){t.commit;var a=t.state;return new Promise((function(t,i){var o={headers:{groupId:a.initData.groupId}};if(e.userHasUpvoted){var n=new URLSearchParams;n.append("className",e.className),n.append("classPK",e.classPK),n.append("commentId",e.commentId),n.append("upvoteCount",null!=e.upvoteCount?e.upvoteCount:0),axios__WEBPACK_IMPORTED_MODULE_3___default.a.put(a.initData.commentApi+"/"+e.commentId+"/upvotes",n,o).then((function(e){var a={};null!=e&&(a=e.data),t(a)})).catch((function(t){console.log(t)}))}else axios__WEBPACK_IMPORTED_MODULE_3___default.a.delete(a.initData.commentApi+"/"+e.commentId+"/upvotes",o).then((function(e){var a={};null!=e&&(a=e.data),t(a)})).catch((function(t){console.log(t)}))}))},loadProcessStep:function(t,e){t.commit;var a=t.state;return new Promise((function(t,i){store.dispatch("loadInitResource").then((function(o){var n={headers:{groupId:a.initData.groupId}},s=a.initData.dossierApi+"/"+e.dossierId+"/nextactions",r=a.initData.dossierApi+"/"+e.dossierId+"/plugins";axios__WEBPACK_IMPORTED_MODULE_3___default.a.all([axios__WEBPACK_IMPORTED_MODULE_3___default.a.get(s,n),axios__WEBPACK_IMPORTED_MODULE_3___default.a.get(r,n)]).then(axios__WEBPACK_IMPORTED_MODULE_3___default.a.spread((function(e,a){var i=e.data.data,o=a.data.data,n=[],s=[];if(i)for(var r=0;r<i.length;r++){if(i[r].type=1,i[r].configNote){var c=JSON.parse(i[r].configNote);i[r].configNote=c}s.push(i[r])}else i=[],s=[];if(o)for(var l=0;l<o.length;l++){var d={type:2,processActionId:o[l].processPluginId,actionName:o[l].pluginName};n.push(d)}var u=s,h=n;u.push.apply(u,h),t(u)}))).catch((function(t){i(t)}))}))}))},pullNextactions:function(t,e){var a=t.commit,i=t.state;return new Promise((function(t,o){store.dispatch("loadInitResource").then((function(n){console.log("result",n);var s={headers:{groupId:i.initData.groupId}};axios__WEBPACK_IMPORTED_MODULE_3___default.a.get(i.initData.getNextAction+"/"+e.dossierId+"/nextactions",s).then((function(e){var i=e.data;a("setUserNextAction",[]),a("setCheckInput",i["checkInput"]),a("setStepOverdueNextAction",i["stepOverdue"]),i["users"]&&(Array.isArray(i["users"])?a("setUserNextAction",i["users"]):a("setUserNextAction",[i["users"]])),t(i.data)})).catch((function(t){console.log(t),o(t),a("setUserNextAction",[])}))})).catch((function(){}))}))},pullBtnConfigStep:function(t,e){t.commit;var a=t.state;return new Promise((function(t,i){var o={headers:{groupId:a.initData.groupId}};axios__WEBPACK_IMPORTED_MODULE_3___default.a.get(a.initData.stepConfigApi+"/status/"+e.dossierStatus+"/"+e.dossierSubStatus,o).then((function(e){var a,i=e.data.data;a=i[0].buttonConfig&&i[0].buttonConfig.indexOf("{")>=0&&JSON.parse(i[0].buttonConfig)["buttons"]?JSON.parse(i[0].buttonConfig)["buttons"]:[],t(a)})).catch((function(t){console.log(t),i(t)}))}))},loadDossierDocuments:function(t,e){t.commit;var a=t.state,i={headers:{groupId:a.initData.groupId},params:{}},o=a.initData.documentApi+"/"+e.dossierId+"/documents";return new Promise((function(t,e){axios__WEBPACK_IMPORTED_MODULE_3___default.a.get(o,i).then((function(e){e.data.data?t(e.data.data):t([])})).catch((function(t){e(t)}))}))},loadDossierPayments:function(t,e){t.commit;var a=t.state,i={headers:{groupId:a.initData.groupId},params:{}},o=a.initData.dossierApi+"/"+e.dossierId+"/payment";return new Promise((function(t,e){axios__WEBPACK_IMPORTED_MODULE_3___default.a.get(o,i).then((function(e){t(e.data)})).catch((function(t){e(t)}))}))},postDossierPayments:function(t,e){t.commit;var a=t.state,i={headers:{groupId:a.initData.groupId}},o=new URLSearchParams;o.append("paymentFee",e.paymentFee),o.append("paymentNote",e.paymentNote);var n=a.initData.dossierApi+"/"+e.dossierId+"/payment";return new Promise((function(t,e){axios__WEBPACK_IMPORTED_MODULE_3___default.a.post(n,o,i).then((function(e){t(e.data)})).catch((function(t){e(t)}))}))},loadDossierActions:function(t,e){t.commit;var a=t.state,i={headers:{groupId:a.initData.groupId},params:{stepType:e.stepType}},o=a.initData.dossierApi+"/"+e.dossierId+"/sequences";return new Promise((function(t,e){axios__WEBPACK_IMPORTED_MODULE_3___default.a.get(o,i).then((function(e){t(e.data)})).catch((function(t){e(t)}))}))},loadMermaidgraph:function(t,e){t.commit;var a=t.state,i={headers:{groupId:a.initData.groupId},params:{stepType:e.stepType}},o=a.initData.dossierApi+"/"+e.dossierId+"/mermaidgraph";return new Promise((function(t,e){axios__WEBPACK_IMPORTED_MODULE_3___default.a.get(o,i).then((function(e){t(e.data)})).catch((function(t){e(t)}))}))},loadDossierLienThong:function(t,e){t.commit;var a=t.state;return new Promise((function(t,i){store.dispatch("loadInitResource").then((function(o){var n={headers:{groupId:a.initData.groupId},params:{originDossierId:e}};axios__WEBPACK_IMPORTED_MODULE_3___default.a.get(a.initData.dossierApi,n).then((function(e){var a=e.data;a.data?t(a.data):t([])})).catch((function(t){i(t)}))})).catch((function(){}))}))},getDossierUserAsign:function(t,e){t.commit;var a=t.state;return new Promise((function(t,i){store.dispatch("loadInitResource").then((function(o){var n={headers:{groupId:a.initData.groupId}};axios__WEBPACK_IMPORTED_MODULE_3___default.a.get(a.initData.dossierApi+"/"+e+"/users",n).then((function(e){var a=e.data;a["data"]?Array.isArray(a["data"])?t(a.data):t([a["data"]]):t([])})).catch((function(t){i(t)}))}))}))},postDossierUserAsign:function(t,e){t.commit;var a=t.state;return new Promise((function(t,i){store.dispatch("loadInitResource").then((function(o){var n={headers:{groupId:a.initData.groupId}},s=new URLSearchParams;s.append("assignUsers",e.users?JSON.stringify(e.users):""),s.append("delegacy",e.delegacy),axios__WEBPACK_IMPORTED_MODULE_3___default.a.post(a.initData.dossierApi+"/"+e.dossierId+"/users",s,n).then((function(e){t(e)})).catch((function(t){i(t)}))})).catch((function(){}))}))},loadDossierSyncs:function(t,e){t.commit;var a=t.state;return new Promise((function(t,i){var o={headers:{groupId:a.initData.groupId}},n=a.endPointApi+"/dossiers/"+e.dossierId+"/syncs";axios__WEBPACK_IMPORTED_MODULE_3___default.a.get(n,o).then((function(e){t(e.data.data)})).catch((function(t){i(t)}))}))},processDossierRouter:function(t,e){t.commit;var a=t.state;return new Promise((function(t,i){store.dispatch("loadInitResource").then((function(o){var n={headers:{groupId:a.initData.groupId,Accept:"application/json","Content-Type":"application/x-www-form-urlencoded"}},s=new URLSearchParams;s.append("actionCode",e.actionCode?e.actionCode:""),s.append("payment",e.payment?JSON.stringify(e.payment):""),s.append("assignUsers",e.toUsers?JSON.stringify(e.toUsers):""),s.append("actionNote",e.userNote?JSON.stringify(e.userNote):""),s.append("payload",e.payload?JSON.stringify(e.payload):""),axios__WEBPACK_IMPORTED_MODULE_3___default.a.post(a.initData.getNextAction+"/"+e.dossierId+"/actions",s,n).then((function(e){store.dispatch("getActiveGetCounter",!a.activeGetCounter);var i=e.data;t(i)})).catch((function(t){console.log(t),toastr__WEBPACK_IMPORTED_MODULE_2___default.a.clear(),toastr__WEBPACK_IMPORTED_MODULE_2___default.a.error("Yêu cầu của bạn thực hiện thất bại."),i(t)}))})).catch((function(){}))}))},deleteDossier:function(t,e){t.commit;var a=t.state;return new Promise((function(t,i){store.dispatch("loadInitResource").then((function(o){var n={headers:{groupId:a.initData.groupId,Accept:"application/json"}};axios__WEBPACK_IMPORTED_MODULE_3___default.a.delete(a.initData.getNextAction+"/"+e.dossierId,n).then((function(e){var i=e.data;store.dispatch("getActiveGetCounter",!a.activeGetCounter),t(i)})).catch((function(t){console.log(t),toastr__WEBPACK_IMPORTED_MODULE_2___default.a.clear(),toastr__WEBPACK_IMPORTED_MODULE_2___default.a.error("Yêu cầu của bạn thực hiện thất bại."),i(t)}))})).catch((function(){}))}))},restoreDossier:function(t,e){t.commit;var a=t.state;return new Promise((function(t,i){store.dispatch("loadInitResource").then((function(o){var n={headers:{groupId:a.initData.groupId,Accept:"application/json"}};axios__WEBPACK_IMPORTED_MODULE_3___default.a.post("/o/rest/v2/dossiers/"+e.dossierId+"/restore",n).then((function(e){var a=e.data;t(a)})).catch((function(t){console.log(t),toastr__WEBPACK_IMPORTED_MODULE_2___default.a.clear(),toastr__WEBPACK_IMPORTED_MODULE_2___default.a.error("Yêu cầu của bạn thực hiện thất bại."),i(t)}))})).catch((function(){}))}))},getListDossierFiles:function(t,e){t.commit;var a=t.state;return new Promise((function(t,i){var o={headers:{groupId:a.initData.groupId}};axios__WEBPACK_IMPORTED_MODULE_3___default.a.get(a.initData.dossierApi+"/"+e+"/files",o).then((function(e){e.data.data?t(e.data.data):t([])})).catch((function(t){console.log(t),i(t)}))})).catch((function(){}))},deleteDossierPatch:function(t,e){t.commit;var a=t.state;return new Promise((function(t,i){store.dispatch("loadInitResource").then((function(o){var n={headers:{groupId:a.initData.groupId,Accept:"application/json"}},s=0,r=e["dossierId"].length;for(var c in e.dossierId)axios__WEBPACK_IMPORTED_MODULE_3___default.a.delete(a.initData.getNextAction+"/"+e.dossierId[c],n).then((function(e){var i=e.data;s+=1,s===r&&(store.dispatch("getActiveGetCounter",!a.activeGetCounter),store.dispatch("getActiveLoadingDataHoSo",!a.activeLoadingDataHoSo)),t(i)})).catch((function(t){console.log(t),s+=1,s===r&&(store.dispatch("getActiveGetCounter",!a.activeGetCounter),store.dispatch("getActiveLoadingDataHoSo",!a.activeLoadingDataHoSo)),toastr__WEBPACK_IMPORTED_MODULE_2___default.a.clear(),toastr__WEBPACK_IMPORTED_MODULE_2___default.a.error("Yêu cầu của bạn thực hiện thất bại."),i(t)}))})).catch((function(){}))}))},doPrint01:function(t,e){t.commit;var a=t.state;return new Promise((function(t,i){store.dispatch("loadInitResource").then((function(o){var n={headers:{groupId:a.initData.groupId},responseType:"blob",params:{payload:e.payload}};axios__WEBPACK_IMPORTED_MODULE_3___default.a.get(a.initData.getNextAction+"/"+e.dossierId+"/documents/preview/"+e.document,n).then((function(e){var a=e.data,i=window.URL.createObjectURL(a);t(i)})).catch((function(t){console.log(t),toastr__WEBPACK_IMPORTED_MODULE_2___default.a.clear(),toastr__WEBPACK_IMPORTED_MODULE_2___default.a.error("Yêu cầu của bạn thực hiện thất bại."),i(t)}))})).catch((function(){}))}))},doPrint03:function(t,e){t.commit;var a=t.state;return new Promise((function(t,i){store.dispatch("loadInitResource").then((function(o){var n={headers:{groupId:a.initData.groupId},responseType:"blob",params:{}};e.document&&(n.params.documentType=e.document),axios__WEBPACK_IMPORTED_MODULE_3___default.a.get(a.initData.getNextAction+"/"+e.dossierId+"/documents/print",n).then((function(e){var a=e.data;if(void 0!==e["status"]&&200!==e["status"])i("pending");else if(a["size"]){var o=window.URL.createObjectURL(a);t(o)}else t("pending")})).catch((function(t){console.log(t),toastr__WEBPACK_IMPORTED_MODULE_2___default.a.clear(),toastr__WEBPACK_IMPORTED_MODULE_2___default.a.error("Yêu cầu của bạn thực hiện thất bại."),i(t)}))})).catch((function(){}))}))},doGuiding:function(t,e){t.commit;var a=t.state;return new Promise((function(t,i){store.dispatch("loadInitResource").then((function(o){var n={serviceCode:e.serviceCode?e.serviceCode:"",serviceName:e.serviceName?e.serviceName:"",typeCode:e.typeCode?e.typeCode:"",templateNo:e.templateNo?e.templateNo:"",applicantName:e.applicantName?e.applicantName:"",applicantAddress:e.applicantAddress?e.applicantAddress:"",applicantEmail:e.applicantEmail?e.applicantEmail:"",applicantTelNo:e.applicantTelNo?e.applicantTelNo:"",govAgencyCode:e.govAgencyCode?e.govAgencyCode:"",govAgencyName:e.govAgencyName?e.govAgencyName:"",applicantNote:e.applicantNote?e.applicantNote:"",type:e.type?e.type:"",applicantIdType:e.applicantType?e.applicantType:""};"denied"!==e.type&&(n["partNo"]=e.partNo?e.partNo:""),e.reportType&&(n["reportType"]=e.reportType);var s={headers:{groupId:a.initData.groupId},responseType:"blob",params:n};axios__WEBPACK_IMPORTED_MODULE_3___default.a.get(a.initData.getServiceConfigs+"/"+e.serviceConfigId+"/guide",s).then((function(a){var i=a.data;e.reportType&&file_saver__WEBPACK_IMPORTED_MODULE_6___default()(i,"denied"===e.type?"tuchoitiepnhan":"huongdanthutuc"+(new Date).getTime()+".doc");var o=window.URL.createObjectURL(i);t(o)})).catch((function(t){console.log(t),toastr__WEBPACK_IMPORTED_MODULE_2___default.a.clear(),toastr__WEBPACK_IMPORTED_MODULE_2___default.a.error("Yêu cầu của bạn thực hiện thất bại."),i(t)}))})).catch((function(){}))}))},doPrint02:function(t,e){t.commit;var a=t.state;return new Promise((function(t,i){store.dispatch("loadInitResource").then((function(o){var n={headers:{groupId:a.initData.groupId},responseType:"blob"},s=new URLSearchParams;s.append("dossiers",e.dossiers),s.append("payload",e.payload),axios__WEBPACK_IMPORTED_MODULE_3___default.a.post(a.initData.getNextAction+"/preview/"+e.document,s,n).then((function(e){var a=e.data,i=window.URL.createObjectURL(a);t(i)})).catch((function(t){console.log(t),toastr__WEBPACK_IMPORTED_MODULE_2___default.a.clear(),toastr__WEBPACK_IMPORTED_MODULE_2___default.a.error("Yêu cầu của bạn thực hiện thất bại."),i(t)}))}))}))},printPay:function(t,e){t.commit;var a=t.state;return new Promise((function(t,i){store.dispatch("loadInitResource").then((function(o){var n={headers:{groupId:a.initData.groupId},responseType:"blob"};axios__WEBPACK_IMPORTED_MODULE_3___default.a.get(a.initData.getNextAction+"/"+e.dossierId+"/payments/"+e.referenceUid+"/invoicefile/preview",n).then((function(e){var a=e.data,i=window.URL.createObjectURL(a);t(i)})).catch((function(t){console.log(t),toastr__WEBPACK_IMPORTED_MODULE_2___default.a.clear(),toastr__WEBPACK_IMPORTED_MODULE_2___default.a.error("Yêu cầu của bạn thực hiện thất bại."),i(t)}))})).catch((function(){}))}))},previewTienTrinh:function(t,e){t.commit;var a=t.state;return new Promise((function(t,i){store.dispatch("loadInitResource").then((function(o){var n={headers:{groupId:a.initData.groupId},responseType:"blob"};axios__WEBPACK_IMPORTED_MODULE_3___default.a.get("/o/rest/v2/dossiers/"+e.dossierId+"/documents/preview/SEQUENCES",n).then((function(e){var a=e.data,i=window.URL.createObjectURL(a);t(i)})).catch((function(t){toastr__WEBPACK_IMPORTED_MODULE_2___default.a.clear(),toastr__WEBPACK_IMPORTED_MODULE_2___default.a.error("Yêu cầu của bạn thực hiện thất bại."),i(t)}))})).catch((function(){}))}))},processPullBtnDetail:function(t,e){t.commit;var a=t.state;return new Promise((function(t,i){store.dispatch("loadInitResource").then((function(o){var n={headers:{groupId:a.initData.groupId}};axios__WEBPACK_IMPORTED_MODULE_3___default.a.get(a.initData.getNextAction+"/"+e.dossierId+"/nextactions/"+e.actionId,n).then((function(e){var a=e.data;t(a)})).catch((function(t){console.log(t),i(t)}))})).catch((function(){}))}))},getNextAction:function(t,e){t.commit;var a=t.state;return new Promise((function(t,i){store.dispatch("loadInitResource").then((function(o){var n={headers:{groupId:a.initData.groupId}};axios__WEBPACK_IMPORTED_MODULE_3___default.a.get(a.initData.dossierApi+"/"+e.dossierId+"/nextactions/"+e.actionId,n).then((function(e){var a=e.data;t(a)})).catch((function(t){i(t)}))})).catch((function(){}))}))},loadFormScript:function(t,e){var a=t.state;t.commit;return new Promise((function(t,i){store.dispatch("loadInitResource").then((function(o){jquery__WEBPACK_IMPORTED_MODULE_5___default.a.ajax({url:a.initData.dossierTemplatesApi+"/"+e.templateFileNo+"/parts/"+e.partNo+"/formscript",type:"GET",headers:{groupId:a.initData.groupId,Token:window.Liferay?window.Liferay.authToken:""},dataType:"text",success:function(e){var a=e;t(a)},error:function(e){console.log(e),t(e),i(e)}})})).catch((function(){}))}))},loadFormScriptKQ:function(t,e){var a=t.state;t.commit;return new Promise((function(t,i){store.dispatch("loadInitResource").then((function(o){jquery__WEBPACK_IMPORTED_MODULE_5___default.a.ajax({url:a.initData.dossierTemplatesApi+"/"+e.templateNo+"/parts/"+e.partNo+"/formscript",type:"GET",headers:{groupId:a.initData.groupId,Token:window.Liferay?window.Liferay.authToken:""},dataType:"text",success:function(e){var a=e;t(a)},error:function(e){console.log(e),t(e),i(e)}})})).catch((function(){}))}))},loadFormData:function(t,e){var a=t.state;t.commit;return new Promise((function(t,i){store.dispatch("loadInitResource").then((function(o){jquery__WEBPACK_IMPORTED_MODULE_5___default.a.ajax({url:a.initData.dossierApi+"/"+e.dossierId+"/eforms/"+e.partNo+"/formdata",type:"GET",headers:{groupId:a.initData.groupId,Token:window.Liferay?window.Liferay.authToken:""},dataType:"text",success:function(e){var a=e;t(a)},error:function(e){console.log(e),t(e),i(e)}})})).catch((function(){}))}))},loadDossierCounting:function(t,e){var a=t.state,i=(t.commit,{headers:{groupId:a.initData.groupId}}),o="/o/rest/v2/statistics/dossiers/counting";return new Promise((function(t,e){axios__WEBPACK_IMPORTED_MODULE_3___default.a.get(o,i).then((function(e){t(e.data)})).catch((function(t){e(t)}))}))},reassignDossier:function(t,e){t.commit;var a=t.state;return new Promise((function(t,i){store.dispatch("loadInitResource").then((function(o){var n={headers:{groupId:a.initData.groupId}},s=new URLSearchParams;s.append("toUsers",JSON.stringify(e.toUsers)),axios__WEBPACK_IMPORTED_MODULE_3___default.a.put(a.initData.dossierApi+"/"+e.dossierId+"/reassign",s,n).then((function(e){var a=e.data;t(a)})).catch((function(t){console.log(t),toastr__WEBPACK_IMPORTED_MODULE_2___default.a.clear(),toastr__WEBPACK_IMPORTED_MODULE_2___default.a.error("Yêu cầu của bạn thực hiện thất bại."),i(t)}))})).catch((function(){}))}))},pullProcessSteps:function(t,e){t.commit;var a=t.state;return new Promise((function(t,i){store.dispatch("loadInitResource").then((function(o){var n={headers:{groupId:a.initData.groupId}};axios__WEBPACK_IMPORTED_MODULE_3___default.a.get(a.initData.stepConfigApi+"/"+e.stepCode,n).then((function(e){var a=e.data;t(a)})).catch((function(t){console.log(t),i(t)}))})).catch((function(){}))}))},loadServiceConfigsGov:function(t,e){var a=t.commit,i=t.state;return new Promise((function(t,e){store.dispatch("loadInitResource").then((function(o){var n={headers:{groupId:i.initData.groupId},params:{}};a("setLoadingGov",!0),axios__WEBPACK_IMPORTED_MODULE_3___default.a.get(i.initData.serviceConfigByGovApi,n).then((function(e){a("setLoadingGov",!1);var i=e.data;i.govAgencies?t(i.govAgencies):t([])})).catch((function(t){console.log(t),a("setLoadingGov",!1),e(t)}))})).catch((function(){}))}))},getServiceInfos:function(t,e){t.commit;var a=t.state;return new Promise((function(t,i){store.dispatch("loadInitResource").then((function(o){var n={start:e.start?e.start:0,end:e.end?e.end:10,keyword:e.keyword?e.keyword.replace(/[!@#$%^&*(),?":{}|<>]/g,""):"",level:e.level?e.level:0,domain:e.domain?e.domain:""};e.domain&&(n.sort="siblingSearch");var s={headers:{groupId:a.initData.groupId},params:n};axios__WEBPACK_IMPORTED_MODULE_3___default.a.get("/o/rest/v2/serviceinfos",s).then((function(e){var a=e.data;t(a)})).catch((function(t){console.log(t),i(t)}))}))}))},getServiceConfigs:function(t,e){t.commit;var a=t.state;return new Promise((function(t,i){store.dispatch("loadInitResource").then((function(o){var n={headers:{groupId:a.initData.groupId},params:{start:e.start?e.start:0,end:e.end?e.end:10,agency:e.agency?e.agency:"",keyword:e.keyword?e.keyword:"",domain:e.domain?e.domain:"",level:e.level?e.level:"3,4",serviceConfigId:e.service?e.service:"",service:e.serviceCode?e.serviceCode:""}};axios__WEBPACK_IMPORTED_MODULE_3___default.a.get("/o/rest/v2/serviceconfigs",n).then((function(e){var a=e.data;t(a)})).catch((function(t){console.log(t),i(t)}))})).catch((function(){}))}))},getServiceAdminisTration:function(t,e){t.commit;var a=t.state;return new Promise((function(t,e){store.dispatch("loadInitResource").then((function(i){var o={headers:{groupId:a.initData.groupId},params:{}};axios__WEBPACK_IMPORTED_MODULE_3___default.a.get("/o/rest/v2/dictcollections/REPORT_GROUP/dictgroups",o).then((function(e){var a=e.data;t(a.data)})).catch((function(t){console.log(t),e(t)}))})).catch((function(){}))}))},getAgencys:function(t,e){t.commit;var a=t.state;return new Promise((function(t,i){store.dispatch("loadInitResource").then((function(o){var n={headers:{groupId:a.initData.groupId},params:{}};e.parent&&(n.params={parent:e.parent}),console.log("data",e),axios__WEBPACK_IMPORTED_MODULE_3___default.a.get("/o/rest/v2/dictcollections/REPORT_GROUP/dictgroups/"+e.administration+"/dictitems",n).then((function(e){var a=e.data;t(a.data)})).catch((function(t){console.log(t),i(t)}))})).catch((function(){}))}))},getAgencysFromParent:function(t,e){t.commit;var a=t.state;return new Promise((function(t,i){store.dispatch("loadInitResource").then((function(o){var n={headers:{groupId:a.initData.groupId},params:{}};e.parent&&(n.params={parent:e.parent}),console.log("data",e),axios__WEBPACK_IMPORTED_MODULE_3___default.a.get("/o/rest/v2/dictcollections/REPORT_GROUP/dictitems",n).then((function(e){var a=e.data;t(a.data)})).catch((function(t){console.log(t),i(t)}))})).catch((function(){}))}))},getDomains:function(t,e){t.commit;var a=t.state;return new Promise((function(t,i){store.dispatch("loadInitResource").then((function(o){var n={headers:{groupId:a.initData.groupId},params:{agency:e.agency?e.agency:"",sort:"siblingSearch"}};axios__WEBPACK_IMPORTED_MODULE_3___default.a.get("/o/rest/v2/serviceinfos/statistics/domains",n).then((function(e){var a=e.data;t(a.data)})).catch((function(t){console.log(t),i(t)}))})).catch((function(){}))}))},processCheckNextActions:function(t,e){t.commit;var a=t.state;return new Promise((function(t,i){store.dispatch("loadInitResource").then((function(o){var n={headers:{groupId:a.initData.groupId}},s=e.actionCode.split(",");axios__WEBPACK_IMPORTED_MODULE_3___default.a.get(a.initData.dossierApi+"/"+e.dossierId+"/nextactions",n).then((function(a){var i=a.data,o=i.data,n=e,r=!1;for(var c in s)if(!r)for(var l in o)if(String(s[c])===String(o[l].actionCode)){n.actionCode=o[l].actionCode,r=!0;break}t(n)})).catch((function(t){console.log(t),i(t)}))})).catch((function(){}))}))},getServiceOpionByProcess:function(t,e){t.commit;var a=t.state;return new Promise((function(t,i){store.dispatch("loadInitResource").then((function(o){var n={headers:{groupId:a.initData.groupId},params:{}};axios__WEBPACK_IMPORTED_MODULE_3___default.a.get(a.initData.getServiceConfigs+"/"+e.serviceConfigId+"/processes",n).then((function(e){var a=e.data;a.data?t(a.data):t("")})).catch((function(t){console.log(t),i(t)}))}))})).catch((function(){}))},getStatusLists:function(t,e){t.commit;var a=t.state;return new Promise((function(t,e){store.dispatch("loadInitResource").then((function(i){var o={headers:{groupId:a.initData.groupId}};axios__WEBPACK_IMPORTED_MODULE_3___default.a.get(a.endPointApi+"/dictcollections/DOSSIER_STATUS/dictitems?parent=0",o).then((function(e){var a=e.data;if(a.data){var i=a.data;t(i)}else t([])})).catch((function(t){console.log(t),e(t)}))})).catch((function(){}))}))},getVNPOSTcode:function(t,e){t.commit;var a=t.state;return new Promise((function(t,e){store.dispatch("loadInitResource").then((function(i){var o={headers:{groupId:a.initData.groupId}};axios__WEBPACK_IMPORTED_MODULE_3___default.a.get("/o/rest/v2/dictcollections/VNPOST_CITY_CODE/dictitems",o).then((function(e){var a=e.data;if(a.data){var i=a.data;t(i)}else t([])})).catch((function(t){console.log(t),e(t)}))})).catch((function(){}))}))},getSubstatusLists:function(t,e){t.commit;var a=t.state;return new Promise((function(t,i){store.dispatch("loadInitResource").then((function(o){var n={headers:{groupId:a.initData.groupId}};axios__WEBPACK_IMPORTED_MODULE_3___default.a.get("/o/rest/v2/dictcollections/DOSSIER_STATUS/dictitems?parent="+e.itemCode,n).then((function(e){var a=e.data;if(a.data){var i=a.data;t(i)}else t([])})).catch((function(t){console.log(t),i(t)}))})).catch((function(){}))}))},getAgencyLists:function(t,e){t.commit;var a=t.state;return new Promise((function(t,e){store.dispatch("loadInitResource").then((function(i){var o={headers:{groupId:a.initData.groupId},params:{sort:"siblingSearch"}};axios__WEBPACK_IMPORTED_MODULE_3___default.a.get("/o/rest/v2/serviceinfos/statistics/agencies",o).then((function(e){var a=e.data;if(a.data){var i=a.data;t(i)}else t([])})).catch((function(t){console.log(t),e(t)}))})).catch((function(){}))}))},getServiceLists:function(t,e){t.commit;var a=t.state;return new Promise((function(t,e){store.dispatch("loadInitResource").then((function(i){var o={headers:{groupId:a.initData.groupId}};axios__WEBPACK_IMPORTED_MODULE_3___default.a.get(a.endPointApi+"/serviceinfos",o).then((function(e){var a=e.data;if(a.data){var i=a.data;null!==i&&void 0!==i&&"undefined"!==i&&i.unshift({serviceCode:"",serviceName:"toàn bộ"}),t(i)}else t([])})).catch((function(t){console.log(t),e(t)}))})).catch((function(){}))}))},getServiceinfoFilter:function(t,e){var a=t.commit,i=t.state;return new Promise((function(t,o){store.dispatch("loadInitResource").then((function(n){var s={headers:{groupId:i.initData.groupId},params:{domain:e.domain}};e&&e.hasOwnProperty("searchGovAgencyCode")&&e.searchGovAgencyCode&&(s.params.searchGovAgencyCode=e.searchGovAgencyCode),e&&e.hasOwnProperty("groupServiceCode")&&e.groupServiceCode&&(s.params.groupServiceCode=e.groupServiceCode),console.log("getServiceinfoFilter",e,s),axios__WEBPACK_IMPORTED_MODULE_3___default.a.get(i.initData.getListThuTucHanhChinh,s).then((function(e){var i=e.data,o=Array.from(i.data);a("setListThuTucHanhChinh",o),t(o)})).catch((function(t){console.log(t),o(t)}))})).catch((function(){}))}))},getDomainLists:function(t,e){t.commit;var a=t.state;return new Promise((function(t,e){store.dispatch("loadInitResource").then((function(i){var o={headers:{groupId:a.initData.groupId},params:{sort:"siblingSearch"}};axios__WEBPACK_IMPORTED_MODULE_3___default.a.get(a.endPointApi+"/serviceinfos/statistics/domains",o).then((function(e){var a=e.data;if(a.data){var i=a.data;t(i)}else t([])})).catch((function(t){console.log(t),e(t)}))})).catch((function(){}))}))},getListCongVan:function(t,e){t.commit;var a=t.state;return new Promise((function(t,i){store.dispatch("loadInitResource").then((function(o){var n={headers:{groupId:a.initData.groupId},params:e.paramSearch};axios__WEBPACK_IMPORTED_MODULE_3___default.a.get("/o/rest/v2/dossiers/groupDossier/dossierId",n).then((function(e){var a=e.data;if(a.data){var i=a.data;t(i)}else t([])})).catch((function(t){console.log(t),i(t)}))})).catch((function(){}))}))},getExtraForm:function(t,e){t.commit;var a=t.state;return new Promise((function(t,i){store.dispatch("loadInitResource").then((function(o){var n={headers:{groupId:a.initData.groupId},params:{}};"9100"===String(e.actionId)&&(n.params.isActionCode=!0),axios__WEBPACK_IMPORTED_MODULE_3___default.a.get(a.initData.dossierApi+"/"+e.dossierId+"/nextactions/"+e.actionId+"/payload",n).then((function(e){var a=e.data;a.data?t(a.data):t([])})).catch((function(t){i(t)}))})).catch((function(){}))}))},getServiceInfo:function(t,e){t.commit;var a=t.state;return new Promise((function(t,i){store.dispatch("loadInitResource").then((function(o){var n={headers:{groupId:a.initData.groupId}};axios__WEBPACK_IMPORTED_MODULE_3___default.a.get(a.initData.serviceInfoApi+"/"+e.serviceInfoId,n).then((function(e){var a=e.data;t(a)})).catch((function(t){console.log(t),i(t)}))})).catch((function(){}))}))},changeDisplayNameFile:function(t,e){t.commit;var a=t.state;return new Promise((function(t,i){store.dispatch("loadInitResource").then((function(o){var n={headers:{groupId:a.initData.groupId}},s=new URLSearchParams;s.append("displayName",e.displayName),axios__WEBPACK_IMPORTED_MODULE_3___default.a.put(a.initData.serviceInfoApi+"/"+e.dossierId+"/files/"+e.dossierFileId,s,n).then((function(e){var a=e.data;t(a)})).catch((function(t){console.log(t),i(t)}))})).catch((function(){}))}))},loadingDossierCounting:function(t,e){t.commit;var a=t.state;return new Promise((function(t,e){store.dispatch("loadInitResource").then((function(i){var o={headers:{groupId:a.initData.groupId}};axios__WEBPACK_IMPORTED_MODULE_3___default.a.get(a.endPointApi+"/statistics/dossiers/counting",o).then((function(e){var a=e.data;a.hasOwnProperty("data")?t(a.data):t(null)})).catch((function(t){console.log(t),e(t)}))})).catch((function(){}))}))},loadVoting:function(t,e){t.commit;var a=t.state;return new Promise((function(t,i){store.dispatch("loadInitResource").then((function(o){var n={headers:{groupId:a.initData.groupId}};axios__WEBPACK_IMPORTED_MODULE_3___default.a.get("/o/rest/v2/postal/votings/"+e.className+"/"+e.classPk,n).then((function(e){var a=e.data;a&&a.data?t(a.data):t([])})).catch((function(t){i(t)}))})).catch((function(){}))}))},loadVotingMC:function(t,e){t.commit;var a=t.state;return new Promise((function(t,i){store.dispatch("loadDetailDossierMC",e["dossierDetail"]).then((function(o){var n={headers:{groupId:a.initData.groupId}},s=new URLSearchParams;s.append("method","GET"),s.append("url","/postal/votings/"+e.className+"/"+o["dossierId"]),s.append("data",""),s.append("serverCode","SERVER_"+o["govAgencyCode"]),axios__WEBPACK_IMPORTED_MODULE_3___default.a.post("/o/rest/v2/proxy",s,n).then((function(e){e.data?t(e.data.data):t([])})).catch((function(t){i(t)}))})).catch((function(t){}))}))},loadDetailDossierMC:function(t,e){t.commit;var a=t.state;return new Promise((function(t,i){var o={headers:{groupId:a.initData.groupId}},n=new URLSearchParams;n.append("method","GET"),n.append("url","/dossiers/"+e["referenceUid"]),n.append("data",""),n.append("serverCode","SERVER_"+e["govAgencyCode"]),axios__WEBPACK_IMPORTED_MODULE_3___default.a.post("/o/rest/v2/proxy",n,o).then((function(e){t(e.data)})).catch((function(t){i(t)}))}))},submitVoting:function(t,e){t.commit;var a=t.state;return new Promise((function(t,i){store.dispatch("loadInitResource").then((function(o){var n={headers:{groupId:a.initData.groupId}},s={className:e.className,classPk:e.classPk,selected:e.selected,votingCode:e.votingCode?e.votingCode:""},r=new URLSearchParams;r.append("method","POST"),r.append("url","/postal/votings/"+e.votingId+"/results"),r.append("data",JSON.stringify(s)),r.append("serverCode",e.serverCode),axios__WEBPACK_IMPORTED_MODULE_3___default.a.post("/o/rest/v2/proxy",r,n).then((function(e){t(e.data)})).catch((function(t){toastr__WEBPACK_IMPORTED_MODULE_2___default.a.clear(),toastr__WEBPACK_IMPORTED_MODULE_2___default.a.error("Gửi đánh giá thất bại"),i(t)}))})).catch((function(){}))}))},validFileUpload:function(t,e){t.commit,t.state;var a,i=e.file.name?e.file.name.split("."):"",o=i?i[i.length-1]:"";try{a=JSON.parse(e.partTip)}catch(r){a=e.partTip}var n=a["extensions"]?(a["extensions"]+","+a["extensions"].toUpperCase()).split(","):"",s=(a["maxSize"],n?n.filter((function(t){return t===o})):"");store.commit("setValidFileUpload",!1),s&&s.length>0?Number(e.file.size)<=1048576*a["maxSize"]||!a["maxSize"]?store.commit("setValidFileUpload",!0):(toastr__WEBPACK_IMPORTED_MODULE_2___default.a.clear(),toastr__WEBPACK_IMPORTED_MODULE_2___default.a.error("Tài liệu tải lên dung lượng tối đa là "+a["maxSize"]+" MB"),store.commit("setValidFileUpload",!1)):a["extensions"]?(toastr__WEBPACK_IMPORTED_MODULE_2___default.a.clear(),toastr__WEBPACK_IMPORTED_MODULE_2___default.a.error("Tài liệu tải lên chỉ chấp nhận các định dạng "+a["extensions"]),store.commit("setValidFileUpload",!1)):store.commit("setValidFileUpload",!0)},makeImageCap:function(t){t.commit,t.state;return new Promise((function(t,e){var a={headers:{groupId:window.themeDisplay?window.themeDisplay.getScopeGroupId():"",Accept:"application/json"},responseType:"blob"},i="/o/rest/v2/applicants/jcaptcha";axios__WEBPACK_IMPORTED_MODULE_3___default.a.get(i,a).then((function(e){var a=window.URL.createObjectURL(e.data);t(a)})).catch((function(t){e(t)}))}))},getServiceRecently:function(t,e){t.commit;var a=t.state;return new Promise((function(t,i){store.dispatch("loadInitResource").then((function(o){var n={headers:{groupId:a.initData.groupId},params:{start:e.start?e.start:0,end:e.end?e.end:50,top:"recently"}};axios__WEBPACK_IMPORTED_MODULE_3___default.a.get("/o/rest/v2/serviceinfos/statistic/recently",n).then((function(e){var a=e.data;t(a||"")})).catch((function(t){i(t)}))})).catch((function(){}))}))},loadDossierFormTemplates:function(t,e){t.commit;var a=t.state;return new Promise((function(t,i){store.dispatch("loadInitResource").then((function(o){var n={headers:{groupId:a.initData.groupId}};axios__WEBPACK_IMPORTED_MODULE_3___default.a.get(a.initData.dossierTemplatesApi+"/"+e.dossierTemplateNo,n).then((function(e){var a=e.data;t(a)}),(function(t){i(t)}))})).catch((function(){}))}))},getServiceConfigDetail:function(t,e){t.commit;var a=t.state;return new Promise((function(t,i){store.dispatch("loadInitResource").then((function(o){var n={headers:{groupId:a.initData.groupId}};axios__WEBPACK_IMPORTED_MODULE_3___default.a.get("/o/rest/v2/serviceconfigs/"+e.serviceConfigId,n).then((function(e){var a=e.data;t(a||"")})).catch((function(t){i(t)}))})).catch((function(){}))}))},getScriptViewDetail:function(t,e){t.commit;var a=t.state;return new Promise((function(t,i){store.dispatch("loadInitResource").then((function(o){var n={headers:{groupId:a.initData.groupId}};axios__WEBPACK_IMPORTED_MODULE_3___default.a.get("/o/rest/v2_1/menuconfigs/"+e.menuGroup+"/script",n).then((function(e){var a=e.data;t(a||"")})).catch((function(t){i(t)}))})).catch((function(){}))}))},getDetailMenuConfig:function(t,e){t.commit;var a=t.state;return new Promise((function(t,i){store.dispatch("loadInitResource").then((function(o){var n={headers:{groupId:a.initData.groupId}};axios__WEBPACK_IMPORTED_MODULE_3___default.a.get("/o/rest/v2_1/menuconfigs/"+e.menuGroup,n).then((function(e){var a=e.data;t(a||"")})).catch((function(t){i(t)}))})).catch((function(){}))}))},getPreAction:function(t,e){t.commit;var a=t.state;return new Promise((function(t,i){store.dispatch("loadInitResource").then((function(o){var n={headers:{groupId:a.initData.groupId}};axios__WEBPACK_IMPORTED_MODULE_3___default.a.get("/o/rest/v2/dossiers/"+e.dossierId+"/delegacy",n).then((function(e){var a=e.data;t(a)})).catch((function(t){i(t)}))})).catch((function(){}))}))},getNotifyConfig:function(t,e){t.commit;var a=t.state;return new Promise((function(t,i){store.dispatch("loadInitResource").then((function(o){var n={headers:{groupId:a.initData.groupId}};axios__WEBPACK_IMPORTED_MODULE_3___default.a.get("/o/rest/v2/dossiers/"+e["dossierId"]+"/metadata/"+e["key"],n).then((function(e){var a=e.data;a&&t(a)})).catch((function(t){i(t)}))})).catch((function(){}))}))},putUser:function(t,e){var a=t.commit,i=t.state;return new Promise((function(t,o){var n={headers:{groupId:i.initData.groupId}},s=new URLSearchParams,r="";r="/o/rest/v2/applicants/"+e["applicantId"],s.append("applicantName",e["applicantName"]),s.append("applicantIdType",e["applicantIdType"]),s.append("contactTelNo",e["contactTelNo"]),s.append("address",e["address"]),s.append("contactEmail",e["contactEmail"]),s.append("cityCode",e["cityCode"]),s.append("cityName",e["cityName"]),s.append("districtCode",e["districtCode"]),s.append("districtName",e["districtName"]),s.append("wardCode",e["wardCode"]),s.append("wardName",e["wardName"]),s.append("applicantIdDate",e["applicantIdDate"]),axios__WEBPACK_IMPORTED_MODULE_3___default.a.put(r,s,n).then((function(e){t(e)})).catch((function(t){o(t),a("setsnackbarerror",!0)}))}))},putNotifyConfig:function(t,e){t.commit;var a=t.state;return new Promise((function(t,i){store.dispatch("loadInitResource").then((function(o){var n={headers:{groupId:a.initData.groupId,"Content-Type":"application/x-www-form-urlencoded"}},s={smsNotify:e["smsNotify"],emailNotify:e["emailNotify"]},r=new URLSearchParams;r.append("metaData",JSON.stringify(s)),axios__WEBPACK_IMPORTED_MODULE_3___default.a.put("/o/rest/v2/dossiers/"+e["dossierId"]+"/metadata",r,n).then((function(e){var a=e.data;t(a)})).catch((function(t){i(t)}))})).catch((function(){}))}))},updateFileKySoPlugin:function(t,e){t.commit;var a=t.state;return new Promise((function(t,i){var o={headers:{groupId:a.initData.groupId}},n=new URLSearchParams,s="";s="/o/rest/v2/defaultsignature/vgca/"+e["dossierId"]+"/dossierFiles",n.append("fileEntries",e["fileEntries"]),n.append("dossierFiles",e["dossierFiles"]),axios__WEBPACK_IMPORTED_MODULE_3___default.a.put(s,n,o).then((function(e){t(e)})).catch((function(t){i(t)}))}))},getNotarization:function(t,e){t.commit;var a=t.state;return new Promise((function(t,i){var o={headers:{groupId:a.initData.groupId},params:{dossierId:e.dossierId}};axios__WEBPACK_IMPORTED_MODULE_3___default.a.get("/o/rest/v2/notarizations",o).then((function(e){var a=e.data;a.data?Array.isArray(a.data)?t(a.data):t([a.data]):t([])})).catch((function(t){i([])}))}))},createNotarization:function(t,e){t.commit;var a=t.state;return new Promise((function(t,i){store.dispatch("loadInitResource").then((function(o){var n={headers:{groupId:a.initData.groupId}},s=new URLSearchParams;s.append("dossierId",e.dossierId),s.append("fileName",e.fileName),s.append("totalRecord",Number(e.totalRecord)),s.append("totalPage",Number(e.totalPage)),s.append("totalFee",e.totalFee.toString().replace(/\./g,"")),s.append("totalCopy",0),s.append("notarizationNo",(new Date).getTime()),s.append("notarizationYear",(new Date).getFullYear()),s.append("totalCopy",0),s.append("notarizationDate",(new Date).getTime()),s.append("signerName",""),s.append("signerPosition",""),s.append("statusCode",""),axios__WEBPACK_IMPORTED_MODULE_3___default.a.post("/o/rest/v2/notarizations",s,n).then((function(e){t(e.data)})).catch((function(t){i(t)}))})).catch((function(){}))}))},updateNotarization:function(t,e){t.commit;var a=t.state;return new Promise((function(t,i){store.dispatch("loadInitResource").then((function(o){var n={headers:{groupId:a.initData.groupId}},s=new URLSearchParams;s.append("fileName",e.fileName),s.append("totalRecord",Number(e.totalRecord)),s.append("totalPage",Number(e.totalPage)),s.append("totalFee",e.totalFee.toString().replace(/\./g,"")),s.append("totalCopy",0),axios__WEBPACK_IMPORTED_MODULE_3___default.a.put("/o/rest/v2/notarizations/"+e.notarizationId,s,n).then((function(e){t(e)})).catch((function(t){i(t)}))})).catch((function(){}))}))},deleteNotarization:function(t,e){t.commit;var a=t.state;return new Promise((function(t,i){store.dispatch("loadInitResource").then((function(o){var n={headers:{groupId:a.initData.groupId}};axios__WEBPACK_IMPORTED_MODULE_3___default.a.delete("/o/rest/v2/notarizations/"+e.notarizationId,n).then((function(e){t(e)})).catch((function(t){i(t)}))})).catch((function(){}))}))},getDictcollections:function(t,e){t.commit;var a=t.state;return new Promise((function(t,i){store.dispatch("loadInitResource").then((function(o){var n={url:"o/rest/v2/dictcollections/REPORT_GROUP/dictgroups/"+e.groupCode+"/dictitems",method:"get",headers:{groupId:a.initData.groupId}};axios__WEBPACK_IMPORTED_MODULE_3___default.a.request(n).then((function(e){t(e.data)})).catch((function(t){i(t)}))})).catch((function(){}))}))},getLevels:function(t,e){t.commit;var a=t.state;return new Promise((function(t,e){store.dispatch("loadInitResource").then((function(i){var o={url:"/o/rest/v2/serviceinfos/statistics/levels",method:"get",headers:{groupId:a.initData.groupId}};axios__WEBPACK_IMPORTED_MODULE_3___default.a.request(o).then((function(e){var a=e.data;if(a.data){var i=a.data.filter((function(t){return"2"!==String(t.level)}));for(var o in i)i[o]["levelName"]="Mức độ "+i[o].level;t(i)}else t([])})).catch((function(t){e(t)}))})).catch((function(){}))}))},getVtPayStatus:function(t,e){t.commit;var a=t.state;return new Promise((function(t,i){store.dispatch("loadInitResource").then((function(o){var n={url:"/o/pgi/vtp/search",method:"get",headers:{groupId:a.initData.groupId},params:{billcode:e.billcode,order_id:e.order_id}};axios__WEBPACK_IMPORTED_MODULE_3___default.a.request(n).then((function(e){t(e)})).catch((function(t){i(t)}))})).catch((function(){}))}))},getApplicantDocument:function(t,e){t.commit,t.state;return new Promise((function(t,a){store.dispatch("loadInitResource").then((function(i){var o={headers:{groupId:window.themeDisplay.getScopeGroupId()}},n={start:e.start?e.start:0,end:e.end?e.end:15,applicantIdNo:e.applicantIdNo?e.applicantIdNo:"",fileTemplateNo:e.fileTemplateNo?e.fileTemplateNo:"",status:e.status,keyword:e.keywordSearch?e.keywordSearch:"",applicantDataType:e.applicantDataType?e.applicantDataType:"",fileNo:e.fileNoSearch},s=new URLSearchParams,r=n;s.append("method","GET"),s.append("url","/applicantdatas"),s.append("data",JSON.stringify(r)),axios__WEBPACK_IMPORTED_MODULE_3___default.a.post("/o/rest/v2/proxy",s,o).then((function(e){e["data"].hasOwnProperty("data")?Array.isArray(e["data"]["data"])?t(e.data):t({data:[e["data"]["data"]],total:e["data"]["total"]}):a(e)}),(function(t){a(t)}))})).catch((function(){}))}))},getFileItems:function(t,e){t.commit,t.state;return new Promise((function(t,a){store.dispatch("loadInitResource").then((function(i){var o={headers:{groupId:window.themeDisplay.getScopeGroupId()}},n={status:e.status?e.status:""},s=new URLSearchParams,r=n;s.append("method","GET"),s.append("url","/fileitems"),s.append("data",JSON.stringify(r)),axios__WEBPACK_IMPORTED_MODULE_3___default.a.post("/o/rest/v2/proxy",s,o).then((function(e){t(e.data)}),(function(t){a(t)}))})).catch((function(){}))}))},getFileAttach:function(t,e){t.commit,t.state;return new Promise((function(t,a){var i={headers:{groupId:window.themeDisplay.getScopeGroupId()},responseType:"blob"},o=new URLSearchParams;o.append("method","GET"),o.append("url","/applicantdatas/"+e.applicantDataId+"/preview"),o.append("dataType","binary"),o.append("data",""),axios__WEBPACK_IMPORTED_MODULE_3___default.a.post("/o/rest/v2/proxy",o,i).then((function(e){var a=window.URL.createObjectURL(e.data);t(a)})).catch((function(t){a(t)}))}))},toKeypayDvcqg:function(t,e){t.commit,t.state;return new Promise((function(t,a){var i={headers:{groupId:window.themeDisplay.getScopeGroupId()}},o="kpdvcqg"===e.key?"/o/pgi/kpdvcqg/createtransaction":"/o/pgi/ppdvcqg/inittransaction",n=new URLSearchParams;n.append("dossierId",e.dossierId),axios__WEBPACK_IMPORTED_MODULE_3___default.a.post(o,n,i).then((function(i){i.data&&(i.data.hasOwnProperty("error")&&"0"==i.data.error||i.data.hasOwnProperty("MaLoi")&&"00"==i.data.MaLoi)?t("kpdvcqg"===e.key?i.data.payment_url:i.data.UrlThanhToan):i.data&&(i.data.hasOwnProperty("error")&&"0"!=i.data.error||i.data.hasOwnProperty("MaLoi")&&"00"!=i.data.MaLoi)?(toastr__WEBPACK_IMPORTED_MODULE_2___default.a.error(i.data.hasOwnProperty("msg")?i.data.msg:"Yêu cầu thực hiện thất bại"),a(i)):a(i)})).catch((function(t){a(t)}))}))},getFieldPick:function(t,e){t.commit;var a=t.state;return new Promise((function(t,i){store.dispatch("loadInitResource").then((function(o){var n={headers:{groupId:a.initData.groupId}},s="/o/rest/v2/fieldpick/classpk/"+e;axios__WEBPACK_IMPORTED_MODULE_3___default.a.get(s,n).then((function(e){var a=e.data;t(a)})).catch((function(t){console.log(t),i(t)}))}))}))},postFieldPick:function(t,e){t.commit;var a=t.state;return new Promise((function(t,i){store.dispatch("loadInitResource").then((function(o){var n={headers:{groupId:a.initData.groupId}},s="/o/rest/v2/fieldpick/classpk/"+e.classPK,r=new URLSearchParams,c={};c[e.key]=e.val,r.append("formData",JSON.stringify(c)),axios__WEBPACK_IMPORTED_MODULE_3___default.a.post(s,r,n).then((function(e){var a=e.data;t(a)})).catch((function(t){console.log(t),i(t)}))}))}))},removeDossierFromGroup:function(t,e){t.commit;var a=t.state;return new Promise((function(t,i){var o={headers:{groupId:a.initData.groupId}},n=new URLSearchParams;axios__WEBPACK_IMPORTED_MODULE_3___default.a.put("/o/rest/v2/dossiers/"+e.dossierId+"/groupDossier/"+e.groupDossierId+"/remove",n,o).then((function(e){t(e)})).catch((function(t){i(t)}))}))},getDetailActionCongVan:function(t,e){t.commit;var a=t.state;return new Promise((function(t,i){var o={headers:{groupId:a.initData.groupId},params:{}};axios__WEBPACK_IMPORTED_MODULE_3___default.a.get("/o/rest/v2/dossiers/"+e.dossierId+"/steps/"+e.stepCode+"/actions/"+e.actionCode,o).then((function(e){t(e.data)})).catch((function(t){i(t)}))}))},doActionDossierIntoGroup:function(t,e){t.commit;var a=t.state;return new Promise((function(t,i){var o={headers:{groupId:a.initData.groupId}},n=new URLSearchParams;n.append("actionUser",e.actionUser),axios__WEBPACK_IMPORTED_MODULE_3___default.a.post("/o/rest/v2/dossiers/"+e.dossierId+"/actions/"+e.actionCode+"/groupDossier",n,o).then((function(e){store.dispatch("getActiveGetCounter",!a.activeGetCounter),t(e)})).catch((function(t){i(t)}))}))},checkDaCapPhep:function(t,e){t.commit,t.state;return new Promise((function(t,a){var i={headers:{groupId:window.themeDisplay?window.themeDisplay.getScopeGroupId():""},params:{formDataKey:JSON.stringify(e.formDataKey)}};axios__WEBPACK_IMPORTED_MODULE_3___default.a.get("/o/v1/opencps/deliverable/KQGP",i).then((function(e){t(e.data)})).catch((function(t){a(t)}))}))},attachFileThaoTacGop:function(t,e){t.commit;var a=t.state;return new Promise((function(t,i){var o={headers:{groupId:a.initData.groupId,"Content-Type":"multipart/form-data"}};try{var n=new FormData;n.append("dossierIds",e.dossierIds),n.append("file",e.file);var s=a.initData.dossierApi+"/eforms/"+e.dossierPartNo;axios__WEBPACK_IMPORTED_MODULE_3___default.a.post(s,n,o).then((function(e){t(e.data)})).catch((function(t){i(e)}))}catch(r){console.log(r),i(e)}}))}},mutations:{setLoading:function(t,e){t.loading=e},setLoadingTable:function(t,e){t.loadingTable=e},setLoadingGov:function(t,e){t.loadingGov=e},setValidFileUpload:function(t,e){t.validFileUpload=e},setError:function(t,e){t.error=e},setVisibleDoAction:function(t,e){t.visibleDoAction=e},clearError:function(t){t.error=null},setIndex:function(t,e){t.index=e},setInitData:function(t,e){t.initData=e},setMenuConfigToDo:function(t,e){t.trangThaiHoSoList=e},setDataPhanCong:function(t,e){t.data_phancong=e},setLoadingDynamicBtn:function(t,e){t.loadingDynamicBtn=e},setListThuTucHanhChinh:function(t,e){t.listThuTucHanhChinh=e},setDossierTemplateName:function(t,e){t.dossierTemplateName=e},setIsDetail:function(t,e){t.isDetail=e},setLePhi:function(t,e){t.lePhi.fee=e.paymentFee,t.lePhi.feeNote=e.paymentFeeNote},setThanhPhanHoso:function(t,e){t.thanhPhanHoSo=e},setThanhPhanHosoTemplates:function(t,e){t.thanhPhanHoSo.dossierTemplates=e},setDataCreateFile:function(t,e){t.dataCreateFile=e},setCheckInput:function(t,e){t.checkInput=e},setUserNextAction:function(t,e){t.usersNextAction=e||[]},setStepOverdueNextAction:function(t,e){t.stepOverdueNextAction=e},setThongTinChuHoSo:function(t,e){var a="1";"business"!==e.applicantIdType&&"2"!==e.userType||(a="2");var i={applicantIdNo:e.applicantIdNo,applicantName:e.applicantName,address:e.address,cityCode:e.cityCode,districtCode:e.districtCode,wardCode:e.wardCode,contactEmail:e.contactEmail,contactTelNo:e.contactTelNo,userType:a};t.thongTinChuHoSo=i},setThongTinChuHoSoBindChuyenPhat:function(t,e){t.thongTinChuHoSoBindChuyenPhat={cityCode:e.cityCode,districtCode:e.districtCode,wardCode:e.wardCode,address:e.address,contactTelNo:e.contactTelNo}},setThongTinNguoiNopHoSo:function(t,e){t.thongTinNguoiNopHoSo=Object.assign(t.thongTinNguoiNopHoSo,e)},setDichVuChuyenPhatKetQua:function(t,e){var a={viaPostal:e.viaPostal,postalServiceCode:e.postalServiceCode?e.postalServiceCode:"",postalAddress:e.postalAddress?e.postalAddress:"",postalCityCode:e.postalCityCode?e.postalCityCode:"",postalDistrictCode:e.postalDistrictCode?e.postalDistrictCode:"",postalWardCode:e.postalWardCode?e.postalWardCode:"",postalTelNo:e.postalTelNo?e.postalTelNo:""};t.dichVuChuyenPhatKetQua=a},setDichVuChuyenPhatHoSo:function(t,e){var a={vnpostalStatus:e.vnpostalStatus,postalServiceCode:e.postalServiceCode?e.postalServiceCode:"",postalAddress:e.postalAddress?e.postalAddress:"",postalCityCode:e.postalCityCode?e.postalCityCode:"",postalCityName:e.postalCityName?e.postalCityName:"",postalDistrictCode:e.postalDistrictCode?e.postalDistrictCode:"",postalDistrictName:e.postalDistrictName?e.postalDistrictName:"",postalWardCode:e.postalWardCode?e.postalWardCode:"",postalWardName:e.postalWardName?e.postalWardName:"",postalTelNo:e.postalTelNo?e.postalTelNo:""};t.dichVuChuyenPhatHoSo=a},setViaPostal:function(t,e){t.viaPostal=e},setServiceConfigObj:function(t,e){t.serviceConfigObj=e},setThongTinChungHoSo:function(t,e){var a;if(1===e.processUnit&&e.processBlock>8){var i,o=Math.floor(e.processBlock/8)+" ngày";i=e.processBlock%8!==0?8*(e.processBlock/8-Math.floor(e.processBlock/8))+" giờ":"",a="".concat(o," ").concat(i)}else 0===e.processUnit?a=e.processBlock+" ngày":1===e.processUnit&&e.processBlock<=8&&(a=e.processBlock+" giờ");var n={dossierTemplateNo:e.dossierTemplateNo,dossierTemplateName:e.dossierTemplateName,serviceName:e.serviceName,serviceConfig:e.serviceConfig,serviceOption:e.dossierTemplateNo,receiveDate:new Date(e.receiveDate),dueDate:new Date(e.dueDate).toString(),durationDate:a,dossierId:e.dossierId,dossierIdCTN:e.dossierIdCTN,dossierStatus:e.dossierStatus,dossierNo:e.dossierNo,govAgencyName:e.govAgencyName,dossierStatusText:e.dossierStatusText,submitDate:e.submitDate};t.thongTinChungHoSo=n},setThongTinChungHoSoDueDate:function(t,e){t.thongTinChungHoSo.dueDate=e},setThongTinChungHoSoDurationDate:function(t,e){t.thongTinChungHoSo.durationDate=e},setThongTinChungHoSoReceiveDate:function(t,e){t.thongTinChungHoSo.receiveDate=e},setserviceConfigItems:function(t,e){t.serviceConfigItems=e},setServiceOptionItems:function(t,e){t.serviceOptionItems=e},setServiceOptionThongTinChungHoSo:function(t,e){t.thongTinChungHoSo.serviceOption=e},setCitys:function(t,e){t.citys=e},dossierSelected:function(t,e){t.dossierSelected=e},setDossierSelectedDoAction:function(t,e){t.dossierSelectedDoAction=e},setFormActionGroup:function(t,e){t.formActionGroup=e},actionActive:function(t,e){t.actionActive=e},setResultServices:function(t,e){t.resultServices=e},setDossierTemplates:function(t,e){t.dossierTemplates=e},setDossier:function(t,e){t.dossier=e},setDanhSachHoSo:function(t,e){t.danhSachHoSo=e},setCityVal:function(t,e){t.cityVal=e},setDistrictVal:function(t,e){t.districtVal=e},setWardVal:function(t,e){t.wardVal=e},setDossierFiles:function(t,e){t.dossierFiles=e},setSameUser:function(t,e){t.thongTinNguoiNopHoSo.sameUser=e},setSameUser2:function(t,e){t.sameUser2=e},setPrintPH:function(t,e){t.printPH=e},setlistHistoryProcessingItems:function(t,e){t.listHistoryProcessingItems=e},setUsersComment:function(t,e){t.usersComment=e},setCommentItems:function(t,e){t.commentItems=e},setKysoSuccess:function(t,e){t.kysoSuccess=e},setActiveGetCounter:function(t,e){t.activeGetCounter=e},setActiveLoadingDataHoSo:function(t,e){t.activeLoadingDataHoSo=e},setDataCreateDossier:function(t,e){t.dataCreateDossier=e},setPaymentProfile:function(t,e){t.paymentProfile=e},setPaymentFileName:function(t,e){t.paymentFileName=e},setApplicantBussinessExit:function(t,e){t.applicantBussinessExit=e},setApplicantNote:function(t,e){t.applicantNote=e},setApplicantId:function(t,e){t.applicantId=e},setForGroupDossier:function(t,e){t.forGroupDossier=e},setSelectDossierGroup:function(t,e){t.dossierIntoGroup=e},setFilesAdd:function(t,e){t.filesAdd=e},setActiveAddFileGroup:function(t,e){t.activeAddFileGroup=e},setUserLogin:function(t,e){t.userLogin=e},setEmployeeLogin:function(t,e){t.employeeLogin=e},setDossierTemplateLienThong:function(t,e){t.dossierTemplateLienThong=e},setActivePrintBienNhan:function(t,e){t.activePrintBienNhan=e},setCreateFileSigned:function(t,e){t.createFileSigned=e},setAdvSearchShow:function(t,e){t.advSearchShow=e},setIsMobile:function(t,e){t.isMobile=e}},getters:{loading:function(t){return t.loading},loadingTable:function(t){return t.loadingTable},getVisibleDoAction:function(t){return t.visibleDoAction},loadingGov:function(t){return t.loadingGov},error:function(t){return t.error},index:function(t){return t.index},dossierSelected:function(t){return t.dossierSelected},dossierSelectedDoAction:function(t){return t.dossierSelectedDoAction},formActionGroup:function(t){return t.formActionGroup},actionActive:function(t){return t.actionActive},loadingMenuConfigToDo:function(t){return new Promise((function(t,e){store.dispatch("loadMenuConfigToDo").then((function(e){t(e)})).catch((function(){}))}))},loadingInitData:function(t){return t.initData},loadingDynamicBtn:function(t){return t.loadingDynamicBtn},loadingListThuTucHanhChinh:function(t){store.dispatch("loadListThuTucHanhChinh")},lePhi:function(t){return t.lePhi},isDetail:function(t){return t.isDetail},dossierTemplateName:function(t){return t.dossierTemplateName},thongTinChungHoSo:function(t,e){return t.thongTinChungHoSo},thongTinChuHoSo:function(t){return t.thongTinChuHoSo},thongTinChuHoSoBindChuyenPhat:function(t){return t.thongTinChuHoSoBindChuyenPhat},kysoSuccess:function(t){return t.kysoSuccess},activeGetCounter:function(t){return t.activeGetCounter},activeLoadingDataHoSo:function(t){return t.activeLoadingDataHoSo},thanhPhanHoSo:function(t){return t.thanhPhanHoSo},thongTinNguoiNopHoSo:function(t){return t.thongTinNguoiNopHoSo},dichVuChuyenPhatKetQua:function(t){return t.dichVuChuyenPhatKetQua},dichVuChuyenPhatHoSo:function(t){return t.dichVuChuyenPhatHoSo},viaPostal:function(t){return t.viaPostal},serviceOptionItems:function(t){return t.serviceOptionItems},getDictItems:function(t){return function(e){return"ADMINISTRATIVE_REGION"===e.collectionCode&&0===e.level?null==t.citys?store.dispatch("loadDictItems",e):new Promise((function(e,a){e({total:t.citys.length,data:t.citys})})):store.dispatch("loadDictItems",e)}},getDataCreateFile:function(t){return t.dataCreateFile},getCheckInput:function(t){return t.checkInput},getUsersNextAction:function(t){return t.usersNextAction},getStepOverdueNextAction:function(t){return t.stepOverdueNextAction},resultServices:function(t){return t.resultServices},dossierTemplates:function(t){return t.dossierTemplates},dataDetailDossier:function(t){return t.dossier},dossier:function(t){return t.dossier},getCityVal:function(t){return t.cityVal},getDistrictVal:function(t){return t.districtVal},getWardVal:function(t){return t.wardVal},dossierFiles:function(t){return t.dossierFiles},sameUser2:function(t){return t.sameUser2},getVnpostCodeItems:function(t){return t.vnpostCodeItems},listHistoryProcessingItems:function(t){return t.listHistoryProcessingItems},subStatusNew:function(t){return t.subStatusNew},usersComment:function(t){return t.usersComment},commentItems:function(t){return t.commentItems},dataPhanCong:function(t){return t.data_phancong},getDataCreateDossier:function(t){return t.dataCreateDossier},getPaymentProfile:function(t){return t.paymentProfile},getPaymentFileName:function(t){return t.paymentFileName},getUser:function(t){return t.user},getApplicantIdNo:function(t){return t.applicantId},getApplicantNote:function(t){return t.applicantNote},getApplicantBussinessExit:function(t){return t.applicantBussinessExit},getForGroupDossier:function(t){return t.forGroupDossier},getDossierIntoGroup:function(t){return t.dossierIntoGroup},getFilesAdd:function(t){return t.filesAdd},activeAddFileGroup:function(t){return t.activeAddFileGroup},getMenuConfigsTodo:function(t){return t.trangThaiHoSoList},getUserLogin:function(t){return t.userLogin},getEmployeeLogin:function(t){return t.employeeLogin},getDossierTemplateLienThong:function(t){return t.dossierTemplateLienThong},getActivePrintBienNhan:function(t){return t.activePrintBienNhan},getCreateFileSigned:function(t){return t.createFileSigned},advSearchShow:function(t){return t.advSearchShow},getIsMobile:function(t){return t.isMobile}}})},4626:function(t,e,a){"use strict";var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-card",{staticClass:"mb-3",attrs:{flat:""}},[t.onlyView?t._e():a("div",[a("v-flex",{attrs:{xs12:""}},[a("v-btn",{staticClass:"mx-2 right",attrs:{color:"primary"},nativeOn:{click:function(e){return t.addNotarization(e)}}},[a("v-icon",{attrs:{size:"22",color:"white"}},[t._v("add")]),t._v(" \n        Thêm mới\n      ")],1)],1)],1),a("v-data-table",{staticClass:"elevation-1",staticStyle:{"border-bottom":"1px solid #dedede"},attrs:{headers:t.headers,items:t.notarizationList,loading:t.loading,"hide-actions":"","no-data-text":"Không có tài liệu nào"},scopedSlots:t._u([{key:"items",fn:function(e){return[a("td",{staticClass:"text-xs-center",class:t.onlyView?"pt-1":"pt-3",attrs:{width:"50"}},[t._v(" "+t._s(e.index+1))]),a("td",{staticClass:"text-xs-left py-1"},[t.loading?a("content-placeholders",[a("content-placeholders-text",{attrs:{lines:1}})],1):t._e(),t.loading||t.onlyView?t._e():a("v-text-field",{attrs:{"single-line":"",placeholder:"Nhập tên tài liệu",clearable:"",autofocus:e.index+1===t.notarizationList.length},on:{input:function(a){t.changeDataItem(e.item,e.index)}},model:{value:e.item.fileName,callback:function(a){t.$set(e.item,"fileName",a)},expression:"props.item.fileName"}}),!t.loading&&t.onlyView?a("span",[t._v(t._s(e.item.fileName))]):t._e()],1),a("td",{staticClass:"text-xs-center py-1",staticStyle:{"font-weight":"bold"},attrs:{width:"70"}},[t.loading?a("content-placeholders",[a("content-placeholders-text",{attrs:{lines:1}})],1):t._e(),t.loading||t.onlyView?t._e():a("v-text-field",{attrs:{"single-line":""},on:{input:function(a){t.changeDataItem(e.item,e.index)}},model:{value:e.item.totalRecord,callback:function(a){t.$set(e.item,"totalRecord",a)},expression:"props.item.totalRecord"}}),!t.loading&&t.onlyView?a("span",[t._v(t._s(e.item.totalRecord))]):t._e()],1),a("td",{staticClass:"text-xs-center py-1",staticStyle:{"font-weight":"bold"},attrs:{width:"70"}},[t.loading?a("content-placeholders",[a("content-placeholders-text",{attrs:{lines:1}})],1):t._e(),t.loading||t.onlyView?t._e():a("v-text-field",{attrs:{"single-line":""},on:{input:function(a){t.changeDataItem(e.item,e.index)}},model:{value:e.item.totalPage,callback:function(a){t.$set(e.item,"totalPage",a)},expression:"props.item.totalPage"}}),!t.loading&&t.onlyView?a("span",[t._v(t._s(e.item.totalPage))]):t._e()],1),a("td",{staticClass:"text-xs-center py-1",staticStyle:{"font-weight":"bold"},attrs:{width:"120"}},[t.loading?a("content-placeholders",[a("content-placeholders-text",{attrs:{lines:1}})],1):t._e(),t.loading||t.onlyView?t._e():a("v-text-field",{attrs:{"single-line":"",suffix:"vnđ"},on:{input:function(a){t.changeFeeItem(e.item,e.index)}},model:{value:e.item.totalFee,callback:function(a){t.$set(e.item,"totalFee",a)},expression:"props.item.totalFee"}}),!t.loading&&t.onlyView?a("span",[t._v(t._s(t._f("currency")(e.item.totalFee)))]):t._e()],1),t.onlyView?t._e():a("td",{staticClass:"text-xs-center py-1",attrs:{width:"120"}},[a("v-tooltip",{attrs:{top:""}},[a("v-btn",{attrs:{slot:"activator",disabled:t.loading,width:"50",height:"32",color:"red",dense:"",small:"",dark:""},on:{click:function(a){t.removeNotarization(e.item,e.index)}},slot:"activator"},[a("v-icon",[t._v("remove")])],1),a("span",[t._v("Xóa")])],1),a("v-tooltip",{staticClass:"ml-2",attrs:{top:""}},[a("v-btn",{attrs:{slot:"activator",disabled:t.loading,width:"50",height:"32",color:"primary",dense:"",small:"",dark:""},on:{click:t.addNotarization},slot:"activator"},[a("v-icon",[t._v("add")])],1),a("span",[t._v("Thêm")])],1)],1)]}}])},[t.loading?a("v-progress-linear",{attrs:{slot:"progress",color:"blue",indeterminate:""},slot:"progress"}):t._e(),t.notarizationList.length>0?a("template",{slot:"footer"},[a("td",{staticClass:"text-xs-center",staticStyle:{"border-right":"1px solid #dedede"},attrs:{colspan:t.onlyView?t.headers.length-1:t.headers.length-2}},[a("strong",{staticStyle:{"font-size":"1.25em"}},[t._v("TỔNG TIỀN")])]),a("td",{staticClass:"px-2",style:t.onlyView?"border-right: 1px solid #dedede":""},[a("strong",{staticStyle:{"font-size":"1.25em"}},[t._v(t._s(t._f("currency")(t.fee)))]),a("p",{staticClass:"d-inline-block right text-bold"},[t._v("vnđ")])]),t.onlyView?t._e():a("td",{staticStyle:{"border-right":"1px solid #dedede"}})]):t._e()],2)],1)},o=[],n=(a("1157"),a("854a")),s=a.n(n);s.a.options={closeButton:!0,timeOut:"5000"};var r={props:{dossierId:{type:String,default:function(){return""}},formCodeInput:{type:String,default:function(){return""}},onlyView:{type:Boolean,default:function(){return!1}}},data:function(){return{validAdd:!0,fileName:"",totalRecord:1,totalPage:1,notarizationList:[],pagination:{rowsPerPage:2},totalNotarizations:0,loading:!1,dialog_notarization:!1,doChangeSync:{},headers:[{text:"STT",align:"center",sortable:!1},{text:"Tên tài liệu chứng thực",align:"center",sortable:!1},{text:"Số bản",align:"center",sortable:!1},{text:"Số trang",align:"center",sortable:!1},{text:"Thành tiền",align:"center",sortable:!1},{text:"Thao tác",align:"center",sortable:!1}],fee:""}},created:function(){var t=this;t.onlyView&&t.headers.pop(),t.loading=!0;var e={dossierId:t.dossierId};t.$store.dispatch("getNotarization",e).then((function(e){if(t.loading=!1,t.notarizationList=e,t.notarizationList.length>0){var a=0;if(t.fee=t.notarizationList.reduce((function(t,e){return t+Number(e.totalFee.toString().replace(/\./g,""))}),a),!t.onlyView)for(var i in t.notarizationList)t.notarizationList[i].totalFee=t.convertCurrency(t.notarizationList[i].totalFee)}})).catch((function(){t.loading=!1}))},computed:{originality:function(){var t=this;return t.getOriginality()}},mounted:function(){},watch:{$route:function(t,e){t.query,e.query},notarizationList:function(){var t=this;for(var e in t.notarizationList)t.doChangeSync[e]=""}},methods:{initData:function(t){},showAddNotarization:function(){var t=this;t.dialog_notarization=!0,t.fileName="",t.totalRecord=1,t.totalPage=1,t.$refs.formGuide.resetValidation()},addNotarization:function(){var t=this,e={fileName:"",totalRecord:1,totalPage:1,totalFee:t.feeTotal(1,1).toLocaleString("it-IT"),dossierId:t.dossierId};t.loading=!0,t.$store.dispatch("createNotarization",e).then((function(e){t.loading=!1,e.totalFee=Number(e.totalFee.toString().replace(/\./g,"")).toLocaleString("it-IT"),t.notarizationList.push(e);var a=0;t.fee=t.notarizationList.reduce((function(t,e){return t+Number(e.totalFee.toString().replace(/\./g,""))}),a)})).catch((function(){t.loading=!1}))},removeNotarization:function(t,e){var a=this;console.log("itemRemove",t);var i=confirm("Bạn có chắc chắn xóa tài liệu này?");i&&a.$store.dispatch("deleteNotarization",t).then((function(t){a.notarizationList.splice(e,1);var i=0;a.fee=a.notarizationList.reduce((function(t,e){return t+Number(e.totalFee.toString().replace(/\./g,""))}),i)})).catch((function(){}))},changeDataItem:function(t,e){var a=this;a.notarizationList[e].totalFee=Number(a.feeTotal(t.totalRecord,t.totalPage)).toLocaleString("it-IT");var i=0;function o(){a.doChangeSync[e]=setTimeout((function(){a.$store.dispatch("updateNotarization",t).then((function(t){})).catch((function(){}))}),1500)}a.fee=a.notarizationList.reduce((function(t,e){return t+Number(e.totalFee.toString().replace(/\./g,""))}),i),clearTimeout(a.doChangeSync[e]),o()},changeFeeItem:function(t,e){var a=this;a.notarizationList[e].totalFee=Number(a.notarizationList[e].totalFee.toString().replace(/\./g,"")).toLocaleString("it-IT");var i=0;function o(){a.doChangeSync[e]=setTimeout((function(){a.$store.dispatch("updateNotarization",t).then((function(t){})).catch((function(){}))}),1500)}a.fee=a.notarizationList.reduce((function(t,e){return t+Number(e.totalFee.toString().replace(/\./g,""))}),i),clearTimeout(a.doChangeSync[e]),o()},dataExport:function(){var t=this;for(var e in t.notarizationList)t.notarizationList[e].totalRecord=Number(t.notarizationList[e].totalRecord),t.notarizationList[e].totalPage=Number(t.notarizationList[e].totalPage),t.notarizationList[e].totalFee=Number(t.notarizationList[e].totalFee.toString().replace(/\./g,""));var a={notarizationList:t.notarizationList,feeTotal:t.fee};return console.log("dataExport",a),a},cancelAdd:function(){},feeTotal:function(t,e){var a=isNaN(Number(t))?0:Number(t),i=isNaN(Number(e))?0:Number(e),o=i-2;if(o>0){var n=a*(4e3+1e3*o);return n<2e5?n:2e5}return a*i*2e3},convertCurrency:function(t){if(t){var e=(t/1).toFixed(0).replace(".",",");return e.toString().replace(/\B(?=(\d{3})+(?!\d))/g,".")}return""}},filters:{currency:function(t){if(t){var e=(t/1).toFixed(0).replace(".",",");return e.toString().replace(/\B(?=(\d{3})+(?!\d))/g,".")}return""}}},c=r,l=a("2877"),d=a("6544"),u=a.n(d),h=a("8336"),p=a("b0af"),m=a("8fea"),g=a("0e8f"),v=a("132d"),f=a("8e36"),_=a("2677"),y=a("3a2f"),C=Object(l["a"])(c,i,o,!1,null,null,null);e["a"]=C.exports;u()(C,{VBtn:h["a"],VCard:p["a"],VDataTable:m["a"],VFlex:g["a"],VIcon:v["a"],VProgressLinear:f["a"],VTextField:_["a"],VTooltip:y["a"]})},"4a3a":function(t,e,a){"use strict";var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"phancong",staticStyle:{"background-color":"white",width:"100%"}},[a("v-expansion-panel",{staticClass:"expansion-pl ext__form",attrs:{value:[!0],expand:""}},[a("v-expansion-panel-content",{key:1},[""!==t.esignType&&"digital"!==t.esignType&&"plugin"!==t.esignType?a("div",{attrs:{slot:"header"},slot:"header"},[a("div",{staticClass:"background-triangle-small"},[a("v-icon",{attrs:{size:"18",color:"white"}},[t._v("star_rate")])],1),a("span",[t._v("Duyệt hồ sơ")])]):t._e(),a("v-card",[a("v-card-text",{staticClass:"px-0 py-0"},["captcha"===t.esignType?a("v-flex",{staticClass:"my-3",attrs:{xs12:"",sm12:""}},[a("span",{staticClass:"ml-3",staticStyle:{color:"#ec0f0f"}},[t._v("(*) Xác thực ký duyệt hồ sơ")]),a("v-captcha",{ref:"captcha"})],1):t._e(),"password"===t.esignType?a("v-flex",{staticClass:"my-3 pl-3",attrs:{xs12:"",sm4:""}},[a("span",{staticClass:"ml-3",staticStyle:{color:"#ec0f0f"}},[t._v("(*) Xác thực ký duyệt hồ sơ")]),a("v-text-field",{attrs:{box:"",label:"Nhập mật khẩu xác thực","append-icon":t.e1?"visibility":"visibility_off","append-icon-cb":function(){return t.e1=!t.e1},rules:[function(t){return!!t||"Yêu cầu nhập mật khẩu"}],type:t.e1?"password":"text",name:"input-10-2",required:""},model:{value:t.passWord,callback:function(e){t.passWord=e},expression:"passWord"}})],1):t._e()],1)],1)],1)],1)],1)},o=[],n=a("1157"),s=a.n(n),r=a("854a"),c=a.n(r),l=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("v-flex",{staticClass:"text-xs-center",attrs:{xs12:"",sm12:""}},[a("span",[t._v("Kéo thả các ô vuông đúng thứ tự của từ")]),a("br"),a("v-chip",{staticStyle:{"background-color":"#81D4FA"},attrs:{label:"","text-color":"white"}},[t._v("\n      "+t._s(t.captcha)+"\n    ")])],1),a("div",{directives:[{name:"drag-and-drop",rawName:"v-drag-and-drop:options",value:t.options,expression:"options",arg:"options"}],staticClass:"drag-wrapper text-xs-center mt-3"},[a("ul",{staticClass:"captcha-wrap",attrs:{id:"captcha"}},t._l(t.arrCaptcha,(function(e,i){return a("li",{key:i,staticClass:"item-captcha",staticStyle:{padding:"10px 15px","background-color":"#81D4FA","margin-right":"2px",color:"#fff","font-weight":"bold"}},[t._v(t._s(e))])})),0)])],1)},d=[],u=a("a026"),h=a("d8c5"),p=a.n(h);u["a"].use(p.a);var m={props:["index"],components:{},data:function(){return{options:{dropzoneSelector:"ul.captcha-wrap"},arrCaptcha:[],captcha:"",currentlyDragging:null,loggedEvent:"",images:[{name:"Image 1",src:"http://placehold.it/100/000000/ffffff"},{name:"Image 2",src:"http://placehold.it/100/C93742/ffffff"},{name:"Image 3",src:"http://placehold.it/100/6894D1/ffffff"}]}},computed:{loading:function(){return this.$store.getters.loading}},created:function(){var t=this;t.makeRandomString(),t.shuffleArrCaptcha(t.arrCaptcha)},watch:{},methods:{makeRandomString:function(){for(var t=this,e="",a="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",i=0;i<4;i++)e+=a.charAt(Math.floor(Math.random()*a.length));e&&(t.arrCaptcha=t.shuffleArrCaptcha(e.split(""))),t.captcha=e},shuffleArrCaptcha:function(t){var e=t.length,a=null,i=0;while(e>0)i=Math.floor(Math.random()*e),e--,a=t[e],t[e]=t[i],t[i]=a;return t},checkValidCatcha:function(){var t=this,e="",a=s()("#captcha").children();console.log(a);for(var i=0;i<a.length;i++)e+=a[i].innerHTML;return t.captcha===e}},filters:{dateTimeView:function(t){if(t){var e=new Date(t);return"".concat(e.getDate().toString().padStart(2,"0"),"/").concat((e.getMonth()+1).toString().padStart(2,"0"),"/").concat(e.getFullYear())}return""}}},g=m,v=a("2877"),f=a("6544"),_=a.n(f),y=a("cc20"),C=a("0e8f"),D=Object(v["a"])(g,l,d,!1,null,null,null),T=D.exports;function x(){return document.getElementById("plugin0")}_()(D,{VChip:y["a"],VFlex:C["a"]}),c.a.options={closeButton:!0,timeOut:"5000"};var b=x,S={props:{detailDossier:{},dataEsign:{},filesPdfSignPlugin:{type:Array,default:function(){return[]}}},components:{"v-captcha":T},data:function(){return{tabActive:"tabs-1",filesSign:[],activeKS:!1,noteReason:"",thongTinHoSo:{},passWord:"",e1:!0}},created:function(){""!==this.esignType&&"digital"!==this.esignType||(this.activeKS=!0)},computed:{kysoSuccess:function(){return this.$store.getters.kysoSuccess},esignType:function(){return this.dataEsign.signatureType}},watch:{},mounted:function(){""!==this.esignType&&"digital"!==this.esignType||(this.activeKS=!0)},methods:{changeActive:function(){var t=this;console.log("tabActive",t.tabActive)},doExport:function(){var t=this,e={textValue:t.noteReason,required:"password"===t.esignType?t.passWord:"digital"===t.esignType||""===t.esignType?t.activeKS:t.$refs.captcha.checkValidCatcha()};return console.log("exportData",e),e},checkCreateFile:function(t){var e;e=Array.isArray(t.createFiles)?t.createFiles:[t.createFiles];var a=!1;if(e.length>0)for(var i=e.length,o=0;o<i;o++){var n=e[o];0===n.counter&&(a=!0)}else a=!0;return a},showConfigSignService:function(){vgca_show_config()},viewFileKySo:function(t,e){},signAction:function(t,e){var a=function(t){var e=JSON.parse(t);console.log(e),e.Status},i={FileUploadHandler:"",SessionId:""};i["FileName"]=t["url"];var o=JSON.stringify(i);vgca_sign_approved(o,a)},kySo:function(t){console.log("run ky so data payload",t);var e,a=this;e=Array.isArray(t.createFiles)?t.createFiles:[t.createFiles];var i=[],o=!1;if(e.length>0)for(var n=e.length,s=0;s<n;s++){var r=e[s];if(0===r.counter){o=!0;break}var c=r.dossierFileId,l=r.dossierPartId;if(c&&l&&"digital"===a.esignType){var d=c+","+l;i.push(d)}else if(c&&"digital"!==a.esignType){var u=c;i.push(u)}}else alert("Không tồn tại tệp điện tử. Vui lòng kiểm tra lại");console.log("idArr",i);var h=t.eSignature;if(h){if(o)return void alert("Tệp điện tử chưa sẵn sàng. Xin vui lòng chờ trong giây lát");if(i){var p,m={};m.actionCode=t.actionCode,m.actionUser=window.themeDisplay.getUserName()?window.themeDisplay.getUserName():"",m.actionNote="",m.postStepCode=t.postStepCode?t.postStepCode:"",m.payload=t.payload?t.payload:"",m.assignUsers=t.assignUsers?t.assignUsers:"",m.payment=t.payment?t.payment:"",m.userNote=t.userNote?t.userNote:"",p=i.join(",");var g=t.actionName;if(console.log("strIdArr",p),console.log("paramObj",m),"digital"===a.esignType){if(!b().valid)return h=!1,void alert("Plugin ký số không hoạt động");a.kyDuyetYCGiamDinh(p,m,g)}else"captcha"!==a.esignType&&"password"!==a.esignType&&""!==a.esignType||a.completeKyDuyetCaptchaSignature(p,m,g)}}},kyDuyetYCGiamDinh:function(t,e,a){var i=this,o="/o/rest/v2/defaultsignature/digitalSignature/"+i.detailDossier.dossierId+"/hashComputed";console.log(i.detailDossier.dossierId),s.a.ajax({type:"POST",url:o,async:!1,dataType:"json",headers:{groupId:window.themeDisplay.getScopeGroupId(),Token:window.Liferay.authToken},data:{strIdArr:t,actionCode:e.actionCode,postStepCode:e.postStepCode},success:function(t){console.log(t);var o=t.msg;if("fileEntryId"!==o){var n=t.hashComputers,s=t.signFieldNames,r=t.fileNames,c=t.fileEntryId;console.log("hashComputers: "+n),console.log("signFieldNames: "+s),console.log("fileNames: "+r),console.log("msgs: "+o);var l=[];if(b().valid){for(var d=0;d<n.length;d++){var u=n[d],h=b().Sign(u);if(0===h||7===h){var p=b().Signature,m=s[d],g=r[d];console.log("sign: "+p),console.log("signFieldName: "+m),console.log("fileName: "+g),l.push(p)}else alert(b().ErrorMessage)}i.completeKyDuyetManyYCGiamDinh(l.join(","),s.join(","),r.join(","),c.join(","),e,a)}else alert("Plugin ký số không hoạt động")}else alert("Không tìm thấy file bản thảo. Tạm dừng tiến trình ký số")},error:function(t){}})},completeKyDuyetManyYCGiamDinh:function(t,e,a,i,o,n){var r=this,l="/o/rest/v2/defaultsignature/digitalSignature/"+r.detailDossier.dossierId+"/dossierFiles";s.a.ajax({type:"PUT",url:l,async:!1,dataType:"json",headers:{groupId:window.themeDisplay.getScopeGroupId(),Token:window.Liferay.authToken},data:{actionCode:o["actionCode"],actionUser:o["actionUser"],actionNote:o["actionNote"],assignUserId:o["assignUserId"],postStepCode:o["postStepCode"],subUsers:o["subUsers"],payload:o["payload"]?JSON.stringify(o["payload"]):"",assignUsers:o["assignUsers"],payment:o["payment"]?JSON.stringify(o["payment"]):"",userNote:o["userNote"],sign:t,signFieldName:e,fileName:a,fileEntryId:i},success:function(t){console.log(t);var e=t.msg;"success"===e?(r.$store.commit("setKysoSuccess",!0),""!==r.esignType&&c.a.success("Thực hiện ký số thành công")):"fileEntryId"===e?""!==r.esignType?alert("Không tìm thấy file bản thảo. Tạm dừng tiến trình ký số"):c.a.error("Yêu cầu thực hiện thất bại"):""!==r.esignType?alert(e):c.a.error("Yêu cầu thực hiện thất bại")},error:function(){""!==r.esignType?alert("Thực hiện ký số thất bại"):c.a.error("Yêu cầu thực hiện thất bại")}})},completeKyDuyetCaptchaSignature:function(t,e,a){var i=this,o="/o/rest/v2/defaultsignature/"+i.detailDossier.dossierId+"/dossierFiles";s.a.ajax({type:"PUT",url:o,async:!1,dataType:"json",headers:{groupId:window.themeDisplay.getScopeGroupId()?window.themeDisplay.getScopeGroupId():"",Token:window.Liferay.authToken?window.Liferay.authToken:""},data:{actionCode:e["actionCode"],actionUser:e["actionUser"],actionNote:e["actionNote"],assignUserId:e["assignUserId"],postStepCode:e["postStepCode"],subUsers:e["subUsers"],payload:e["payload"]?JSON.stringify(e["payload"]):"",assignUsers:e["assignUsers"],payment:e["payment"]?JSON.stringify(e["payment"]):"",userNote:e["userNote"],fileEntryId:t},success:function(t){i.$store.commit("setKysoSuccess",!0),""!==i.esignType&&c.a.success("Thực hiện ký số thành công")},error:function(){""!==i.esignType?c.a.error("Thực hiện ký số thất bại"):c.a.error("Yêu cầu thực hiện thất bại")}})},completeKyDuyetYCGiamDinh:function(t,e,a,i,o,n){var r=this,l="/o/rest/v2/defaultsignature/digitalSignature/"+r.detailDossier.dossierId+"/dossierFile";s.a.ajax({type:"PUT",url:l,async:!1,dataType:"json",headers:{groupId:window.themeDisplay.getScopeGroupId(),Token:window.Liferay?window.Liferay.authToken:"","Cache-Control":"no-cache"},data:{actionCode:o["actionCode"],actionUser:o["actionUser"],actionNote:o["actionNote"],assignUserId:o["assignUserId"],postStepCode:o["postStepCode"],subUsers:o["subUsers"],sign:t,signFieldName:e,fileName:a,fileEntryId:i},success:function(t){console.log(t);var e=t.msg;"success"===e?c.a.success("Yêu cầu của bạn được thực hiện thành công"):"fileEntryId"===e?alert("Cảnh báo: Không tìm thấy file bản thảo. Tạm dừng tiến trình đóng dấu số"):alert(e)},error:function(){alert("ky so false")}})},getDocumentTypeIcon:function(t){var e="doc,docx",a="xls,xlsx",i="png,jpg,jpeg";return t?e.indexOf(t.toLowerCase())>=0?{icon:"fas fa fa-file-word-o",color:"blue",size:14}:a.indexOf(t.toLowerCase())>=0?{icon:"fas fa fa-file-excel-o",color:"green",size:14}:"pdf"===t.toLowerCase()?{icon:"fa fa-file-pdf-o",color:"red",size:14}:i.indexOf(t.toLowerCase())>=0?{icon:"fas fa fa-file-image-o",color:"primary",size:14}:{icon:"fas fa fa-paperclip",color:"",size:14}:""}}},N=S,P=a("b0af"),I=a("99d9"),A=a("cd55"),w=a("49e2"),E=a("132d"),k=a("2677"),O=Object(v["a"])(N,i,o,!1,null,null,null);e["a"]=O.exports;_()(O,{VCard:P["a"],VCardText:I["b"],VExpansionPanel:A["a"],VExpansionPanelContent:w["a"],VFlex:C["a"],VIcon:E["a"],VTextField:k["a"]})},"4c9f":function(module,__webpack_exports__,__webpack_require__){"use strict";var D_FDS_frontend_opencps_v2_1_onegate_21_fe_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("a34a"),D_FDS_frontend_opencps_v2_1_onegate_21_fe_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(D_FDS_frontend_opencps_v2_1_onegate_21_fe_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0__),toastr__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("854a"),toastr__WEBPACK_IMPORTED_MODULE_1___default=__webpack_require__.n(toastr__WEBPACK_IMPORTED_MODULE_1__),jquery__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("1157"),jquery__WEBPACK_IMPORTED_MODULE_2___default=__webpack_require__.n(jquery__WEBPACK_IMPORTED_MODULE_2__),_TiepNhan_TiepNhanHoSo_ThongTinChuHoSo_vue__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("826a"),_TiepNhan_TiepNhanHoSo_ThanhPhanHoSoNew_vue__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("6e92"),_TiepNhan_TaiLieuChungThuc_vue__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("4626"),_TiepNhan_TiepNhanHoSo_ThongTinChung_vue__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("c199"),_form_xu_ly_FeeDetail_vue__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__("f374"),_TiepNhan_TiepNhanHoSo_DichVuChuyenPhatKetQua_vue__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__("a9a9"),_TiepNhan_TiepNhanHoSo_DichVuChuyenPhatHoSo_vue__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__("f82c"),_TiepNhan_ThuTucCapHoChieuNgoaiGiaoCongVu_vue__WEBPACK_IMPORTED_MODULE_10__=__webpack_require__("593e"),_TiepNhan_ThuTucHopPhapHoaLanhSu_vue__WEBPACK_IMPORTED_MODULE_11__=__webpack_require__("f53c");function _typeof(t){return _typeof="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_typeof(t)}function _slicedToArray(t,e){return _arrayWithHoles(t)||_iterableToArrayLimit(t,e)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function _iterableToArrayLimit(t,e){var a=[],i=!0,o=!1,n=void 0;try{for(var s,r=t[Symbol.iterator]();!(i=(s=r.next()).done);i=!0)if(a.push(s.value),e&&a.length===e)break}catch(c){o=!0,n=c}finally{try{i||null==r["return"]||r["return"]()}finally{if(o)throw n}}return a}function _arrayWithHoles(t){if(Array.isArray(t))return t}function asyncGeneratorStep(t,e,a,i,o,n,s){try{var r=t[n](s),c=r.value}catch(l){return void a(l)}r.done?e(c):Promise.resolve(c).then(i,o)}function _asyncToGenerator(t){return function(){var e=this,a=arguments;return new Promise((function(i,o){var n=t.apply(e,a);function s(t){asyncGeneratorStep(n,i,o,s,r,"next",t)}function r(t){asyncGeneratorStep(n,i,o,s,r,"throw",t)}s(void 0)}))}}toastr__WEBPACK_IMPORTED_MODULE_1___default.a.options={closeButton:!0,timeOut:"5000"},__webpack_exports__["a"]={props:["index","id","formCode"],components:{"thong-tin-chu-ho-so":_TiepNhan_TiepNhanHoSo_ThongTinChuHoSo_vue__WEBPACK_IMPORTED_MODULE_3__["a"],"thanh-phan-ho-so":_TiepNhan_TiepNhanHoSo_ThanhPhanHoSoNew_vue__WEBPACK_IMPORTED_MODULE_4__["a"],"tai-lieu-chung-thuc":_TiepNhan_TaiLieuChungThuc_vue__WEBPACK_IMPORTED_MODULE_5__["a"],"thong-tin-chung":_TiepNhan_TiepNhanHoSo_ThongTinChung_vue__WEBPACK_IMPORTED_MODULE_6__["a"],"thu-phi":_form_xu_ly_FeeDetail_vue__WEBPACK_IMPORTED_MODULE_7__["a"],"dich-vu-chuyen-phat-ho-so":_TiepNhan_TiepNhanHoSo_DichVuChuyenPhatHoSo_vue__WEBPACK_IMPORTED_MODULE_9__["a"],"dich-vu-chuyen-phat-ket-qua":_TiepNhan_TiepNhanHoSo_DichVuChuyenPhatKetQua_vue__WEBPACK_IMPORTED_MODULE_8__["a"],"thu-tuc-cap-ho-chieu-ngoai-giao-cong-vu":_TiepNhan_ThuTucCapHoChieuNgoaiGiaoCongVu_vue__WEBPACK_IMPORTED_MODULE_10__["a"],"thu-tuc-hop-phap-hoa-lanh-su":_TiepNhan_ThuTucHopPhapHoaLanhSu_vue__WEBPACK_IMPORTED_MODULE_11__["a"]},data:function(){return{isNotarization:!1,dialogXacNhanThaoTac:!1,checkCKCD:!1,templateName:"",formTemplate:"",data_form_template:"",serviceCode_hidden:"",serviceName_hidden:"",govAgencyCode_hidden:"",govAgencyName_hidden:"",dossierTemplateNo_hidden:"",eformCode_hidden:"",validTNHS:!1,dossierId:"",mark:!0,stateEditSample:!1,tiepNhanState:!0,thongTinChiTietHoSo:{},payments:{},paymentProfile:{},briefNote:"",receiveDateEdit:"",editableDate:!1,dueDateEdit:"",viaPortalDetail:0,showThuPhi:!1,inputTypes:[1,3,6],inputTypesGroup:[6],outputTypes:[2],sampleCount:0,isMobile:!1,loadingAction:!1,loadingForm:!1,notifyConfig:!1,smsNotify:!0,emailNotify:!0,dialog_printGuide:!1,dialog_denied:!1,validGuide:!1,validDenied:!1,listThuTucHanhChinh:[],thuTucHanhChinhSelectedGuide:"",listDichVuGuide:[],dichVuSelectedGuide:"",applicantNameGuide:"",applicantTypeGuide:"",applicantEmailGuide:"",applicantNoteGuide:"",tphsGuide:[],headersTphsGuide:[{text:"TT",align:"center",sortable:!1},{text:"Tên thành phần",align:"center",sortable:!1},{text:"Đã có",align:"center",sortable:!1}],dialogPDF:!1,dialogPDFLoading:!0,tiltleDialog:"",requiredConfigData:!1,templateDescription:"",actionDetail:"",rules:{required:function(t){return!!t||"Thông tin bắt buộc"},email:function(t){t=t.trim();var e=/^(([^<>()[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/;return e.test(t)||"Địa chỉ Email không hợp lệ"},passWord:function(t){var e=/^(?![0-9]{6,})[0-9a-zA-Z]{6,}$/;return e.test(t)||"Gồm các ký tự 0-9, a-z và ít nhất 6 ký tự"},telNo:function(t){var e=/^([0-9]{0,})$/;return"string"===typeof t&&(t=t.trim()),e.test(t)||"Gồm các ký tự 0-9"},varchar50:function(t){return!t||(t=String(t).trim(),t.length<=50||"Không được nhập quá 50 ký tự")},varchar100:function(t){return!t||(t=String(t).trim(),t.length<=100||"Không được nhập quá 100 ký tự")},varchar255:function(t){return!t||(t=String(t).trim(),t.length<=255||"Không được nhập quá 255 ký tự")},varchar500:function(t){return!t||(t=String(t).trim(),t.length<=500||"Không được nhập quá 500 ký tự")},varchar5000:function(t){return!t||(t=String(t).trim(),t.length<=5e3||"Không được nhập quá 5000 ký tự")}}}},computed:{loading:function(){return this.$store.getters.loading},originality:function(){var t=this;return t.getOriginality()},dichVuChuyenPhatKetQua:function(){return this.$store.getters.dichVuChuyenPhatKetQua},dichVuChuyenPhatHoSo:function(){return this.$store.getters.dichVuChuyenPhatHoSo},thongTinChuHoSo:function(){return this.$store.getters.thongTinChuHoSo},menuConfigsToDo:function(){return this.$store.getters.getMenuConfigsTodo}},created:function(){var t=this;t.$nextTick((function(){t.dossierId=t.id}))},beforeDestroy:function(){var t=jquery__WEBPACK_IMPORTED_MODULE_2___default()('meta[name="viewport"]');t.attr("content","initial-scale=1.0, width=device-width"),"undefined"!==typeof window&&window.removeEventListener("resize",this.onResize,{passive:!0})},mounted:function(){this.onResize(),window.addEventListener("resize",this.onResize,{passive:!0})},watch:{isMobile:function(t){var e=jquery__WEBPACK_IMPORTED_MODULE_2___default()('meta[name="viewport"]');t?e.attr("content",""):e.attr("content","initial-scale=1.0, width=device-width")},thongTinChuHoSo:function(){var t=this;t.briefNote=t.thongTinChiTietHoSo.serviceName?t.thongTinChiTietHoSo.serviceName:"",t.thongTinChiTietHoSo.serviceName&&!t.thongTinChuHoSo["userType"]&&t.thongTinChuHoSo["applicantName"]?t.briefNote=t.briefNote+" cho "+t.thongTinChuHoSo["applicantName"]:t.thongTinChiTietHoSo.serviceName&&t.thongTinChuHoSo["userType"]&&t.thongTinChuHoSo["applicantName"]&&(t.briefNote=t.briefNote+" cho ông/bà "+t.thongTinChuHoSo["applicantName"]),"UPDATE"===t.formCode&&(t.briefNote=t.thongTinChiTietHoSo.dossierName?t.thongTinChiTietHoSo.dossierName:t.thongTinChiTietHoSo.serviceName)}},methods:{onResize:function(){var t=this,e=window.innerWidth<1024;t.isMobile=e},initData:function initData(data){var vm=this,currentQuery=vm.$router.history.current.query,filter={dossierTemplateNo:currentQuery.hasOwnProperty("template_no")&&currentQuery.template_no?currentQuery.template_no:""};vm.dossierTemplateNo_hidden=currentQuery.hasOwnProperty("template_no")&&currentQuery.template_no?currentQuery.template_no:"",vm.$store.dispatch("loadDossierFormTemplates",filter).then((function(result){try{vm.requiredConfigData=!!result["formMeta"]&&JSON.parse(result["formMeta"])}catch(error){}if(vm.templateName=result["templateName"],vm.templateDescription=result["description"],result["newFormScript"]){console.log(result["newFormScript"]);try{vm.data_form_template=eval("( "+result["newFormScript"]+" ) ")}catch(_unused){vm.data_form_template=result["newFormScript"]}console.log("data_form_template",vm.data_form_template),vm.formTemplate="version_2.0",vm.loadingForm=!0;var filterServiceConfig={serviceConfigId:currentQuery.hasOwnProperty("service_config")&&currentQuery.service_config?currentQuery.service_config:""};currentQuery.hasOwnProperty("service_config")&&currentQuery.service_config?vm.$store.dispatch("getServiceConfigDetail",filterServiceConfig).then((function(t){vm.loadingForm=!1,vm.serviceName_hidden=t.serviceName,vm.serviceCode_hidden=t.serviceCode,vm.govAgencyCode_hidden=t.govAgencyCode,vm.govAgencyName_hidden=t.govAgencyName,vm.dossierTemplateNo_hidden=currentQuery.hasOwnProperty("template_no")&&currentQuery.template_no?currentQuery.template_no:"",vm.eformCode_hidden=currentQuery.hasOwnProperty("eformCode")&&currentQuery.eformCode?currentQuery.eformCode:"",setTimeout((function(){var t,e;vm.data_form_template&&"formHPH"!==vm.data_form_template&&"formCH"!==vm.data_form_template&&(t=vm.data_form_template?vm.data_form_template:{},e={},t.data=e,window.$("#formAlpacaNewTemplate").alpaca(t))}),200);var e={dossierTemplateNo:vm.dossierTemplateNo_hidden};vm.$store.dispatch("loadDossierTemplates",e).then((function(t){for(var e in t["dossierParts"])t["dossierParts"][e].fileMark=!0;vm.tphsGuide=t["dossierParts"].filter((function(t){return 1===t["partType"]}))})).catch((function(){}))})):(vm.loadingForm=!1,vm.serviceCode_hidden=currentQuery.hasOwnProperty("serviceCode")&&currentQuery.serviceCode?currentQuery.serviceCode:"")}else vm.formTemplate="version_1.0",vm.$store.dispatch("getDetailDossier",data).then((function(t){if(vm.dossierId=t.dossierId,vm.briefNote=t.serviceName?t.serviceName:"","UPDATE"===vm.formCode&&(vm.briefNote=t.dossierName?t.dossierName:t.serviceName),t["editable"]=!1,""===t.dossierStatus?vm.$store.dispatch("pullNextactions",t).then((function(e){if(e){var a=e.filter((function(t){return"1"===String(t.enable)&&"listener"!==t.autoEvent}));a.length>1?vm.actionDetail=a.filter((function(t){return 1100===t.actionCode||"1100"===t.actionCode}))[0]:vm.actionDetail=a[0],vm.$store.dispatch("processPullBtnDetail",{dossierId:t.dossierId,actionId:vm.actionDetail?vm.actionDetail.processActionId:""}).then((function(e){t["editable"]=!(!e||!e.receiving)&&e.receiving.editable,t["receivingDuedate"]=e&&e.receiving&&e.receiving.dueDate?e.receiving.dueDate:null,t["receivingDate"]=e&&e.receiving?e.receiving.receiveDate:"",t["allowAssignUser"]=String(e["allowAssignUser"]),vm.editableDate=!(!e||!e.receiving)&&e.receiving.editable,vm.dueDateEdit=e&&e.receiving&&e.receiving.dueDate?e.receiving.dueDate:"",vm.receiveDateEdit=e&&e.receiving?e.receiving.receiveDate:"",e&&e.payment&&e.payment.requestPayment>0&&(vm.showThuPhi=!0,vm.payments=e.payment),vm.$refs.thongtinchunghoso&&vm.$refs.thongtinchunghoso.initData(t)})).catch((function(){}))}else vm.$refs.thongtinchunghoso&&vm.$refs.thongtinchunghoso.initData(t)})):vm.$refs.thongtinchunghoso&&vm.$refs.thongtinchunghoso.initData(t),vm.thongTinChiTietHoSo=t,vm.$refs.thongtinchuhoso.initData(t),vm.viaPortalDetail=t.viaPostal,t.viaPostal>0){var e={vnpostalStatus:0,postalServiceName:"",postalServiceCode:"",postalAddress:"",postalCityCode:"",postalCityName:"",postalDistrictCode:"",postalDistrictName:"",postalWardCode:"",postalWardName:"",postalTelNo:""},a=t.address?t.address+", "+t.wardName+" - "+t.districtName+" - "+t.cityName:"";1===vm.originality&&(t["postalAddress"]=a,t["postalTelNo"]=vm.thongTinChuHoSo["contactTelNo"],e["vnpostalStatus"]=t.vnpostalStatus,e["postalAddress"]=t.address,e["postalCityCode"]=t.cityCode,e["postalCityName"]=t.cityName,e["postalDistrictCode"]=t.districtCode,e["postalDistrictName"]=t.districtName,e["postalWardCode"]=t.wardCode,e["postalWardName"]=t.wardName,e["postalTelNo"]=vm.thongTinChuHoSo["contactTelNo"]),vm.$store.commit("setDichVuChuyenPhatKetQua",t),vm.$store.commit("setDichVuChuyenPhatHoSo",e)}vm.getNotifyConfig(vm.dossierId),vm.$store.dispatch("getServiceInfo",{serviceInfoId:t.serviceCode}).then((function(e){e.hasOwnProperty("isNotarization")&&"true"===String(e.isNotarization)?vm.isNotarization=!0:(vm.isNotarization=!1,vm.$refs.thanhphanhoso.initData(t))}))})).catch((function(t){}))}))},luuHoSo:function(){var t=this;t.$store.commit("setPrintPH",!1);var e=this.$refs.thongtinchunghoso?this.$refs.thongtinchunghoso.getthongtinchunghoso():{},a=this.$refs.thongtinchuhoso.thongTinChuHoSo,i=this.$refs.thongtinchuhoso?this.$refs.thongtinchuhoso.thongTinNguoiNopHoSo:{},o=(this.$refs.thanhphanhoso.dossierTemplateItems,this.$refs.dichvuchuyenphatketqua?this.$refs.dichvuchuyenphatketqua.dichVuChuyenPhatKetQua:{}),n=this.$refs.dichvuchuyenphathoso?this.$refs.dichvuchuyenphathoso.dichVuChuyenPhatHoSo:"",s=t.$refs.thongtinchuhoso.showValid();if(s["validForm"]){var r=!1;if(s["validApplicant"])r=!0;else{var c=confirm(s["message"]+" Bạn có muốn tiếp tục?");c&&(r=!0)}if(r){if(!t.$refs.thanhphanhoso.validDossierTemplate())return;if(2===o.viaPostal&&!t.$refs.dichvuchuyenphatketqua.validDichVuChuyenPhat())return;if(n&&1===n.vnpostalStatus&&!t.$refs.dichvuchuyenphathoso.validDichVuChuyenPhat())return;var l=t.$refs.thanhphanhoso.dossierFilesItems,d=[];l&&l.forEach((function(e,a){e.eForm&&(e["dossierId"]=t.dossierId,d.push(t.$store.dispatch("putAlpacaForm",e)))}));var u=Object.assign(a,i,o,e);if(u["dossierId"]=t.dossierId,u["sampleCount"]=t.thongTinChiTietHoSo.sampleCount,u["originality"]=t.originality,u["dossierName"]=t.briefNote,n){var h={postalServiceName:n.postalServiceCode,postalAddress:n.postalAddress,postalCityCode:n.postalCityCode,postalCityName:n.postalCityName,postalDistrictCode:n.postalDistrictCode,postalDistrictName:n.postalDistrictName,postalWardCode:n.postalWardCode,postalWardName:n.postalWardName,postalTelNo:n.postalTelNo};u["vnpostalStatus"]=n.vnpostalStatus,u["vnpostalProfile"]=h}setTimeout((function(){t.$store.dispatch("putDossier",u).then((function(e){if("UPDATE"===t.formCode)window.history.back();else{var a=t.$store.getters.loadingInitData,i=a.user.userName?a.user.userName:"",o={dossierId:t.dossierId,actionCode:t.actionDetail.actionCode,actionNote:"",actionUser:i,payload:"",security:"",assignUsers:"",payment:t.payments,createDossiers:"",dueDate:u.dueDate};t.$store.dispatch("postAction",o).then((function(e){t.$router.history.current.query;t.$router.push({path:"/danh-sach-ho-so/4/chi-tiet-ho-so/"+e.dossierId,query:{activeTab:"tabs-1"}}),t.tiepNhanState=!1}))}})).catch((function(t){toastr__WEBPACK_IMPORTED_MODULE_1___default.a.clear(),toastr__WEBPACK_IMPORTED_MODULE_1___default.a.error("Yêu cầu của bạn thực hiện thất bại.")})),t.updateNotifyConfig()}),500)}}},tiepNhanHoSo:function(t){var e=this;e.$store.commit("setPrintPH",!1);var a=this.$refs.thongtinchunghoso.getthongtinchunghoso(),i=this.$refs.thongtinchuhoso.getThongTinChuHoSo(),o=this.$refs.thongtinchuhoso.getThongTinNguoiNopHoSo(),n=(this.$refs.thanhphanhoso&&this.$refs.thanhphanhoso.dossierTemplateItems,e.dichVuChuyenPhatKetQua),s=e.$refs.thongtinchuhoso.showValid();if(s["validForm"]){var r=!1;if(s["validApplicant"])r=!0;else{var c=confirm(s["message"]+" Bạn có muốn tiếp tục?");c&&(r=!0)}if(r){if(e.loadingAction=!0,e.$refs.thanhphanhoso&&!e.$refs.thanhphanhoso.validDossierTemplate())return void(e.loadingAction=!1);if(2===n.viaPostal&&!e.$refs.dichvuchuyenphatketqua.validDichVuChuyenPhat())return void(e.loadingAction=!1);var l=e.$refs.thanhphanhoso?e.$refs.thanhphanhoso.dossierFilesItems:"",d=[];l&&l.forEach((function(t,a){t.eForm&&(t["dossierId"]=e.dossierId,d.push(e.$store.dispatch("putAlpacaForm",t)))}));var u=Object.assign(i,o,n,a);u["dossierId"]=e.dossierId,u["sampleCount"]=e.thongTinChiTietHoSo.sampleCount,u["dossierName"]=e.briefNote,u["originality"]=e.originality,e.$store.dispatch("putDossier",u).then((function(a){if(e.loadingAction=!1,"UPDATE"===e.formCode)window.history.back();else{var i=e.$store.getters.loadingInitData,o=i.user.userName?i.user.userName:"",n={};if(e.showThuPhi&&(n={requestPayment:e.payments["requestPayment"],paymentNote:e.payments["paymentNote"],advanceAmount:Number(e.payments["advanceAmount"].toString().replace(/\./g,"")),feeAmount:Number(e.payments["feeAmount"].toString().replace(/\./g,"")),serviceAmount:Number(e.payments["serviceAmount"].toString().replace(/\./g,"")),shipAmount:Number(e.payments["shipAmount"].toString().replace(/\./g,""))},e.isNotarization)){var s=e.$refs.tailieuchungthuc.dataExport();n.feeAmount=s.feeTotal}var r={dueDate:e.editableDate&&u.dueDate?u.dueDate:e.dueDateEdit,receiveDate:e.receiveDateEdit},c={dossierId:e.dossierId,actionCode:e.actionDetail.actionCode,actionNote:"",actionUser:o,payload:r,security:"",assignUsers:"",payment:n,createDossiers:""};e.thongTinChiTietHoSo.hasOwnProperty("allowAssignUser")&&"1"===e.thongTinChiTietHoSo.allowAssignUser&&(c.assignUsers=[{userId:i.user.userId,userName:o,assigned:1}]),e.loadingAction=!0,e.$store.dispatch("postAction",c).then((function(a){if(e.loadingAction=!1,t){var i=e.$router.history.current,o=i.query,n=e.$store.getters.getDataCreateDossier;e.loadingAction=!0,e.$store.dispatch("postDossier",n).then((function(t){e.loadingAction=!1,e.dossierId=t.dossierId,e.$refs.thongtinchunghoso.changeDossierNo(t.dossierNo);var a="?";for(var i in o)""!==o[i]&&"undefined"!==o[i]&&void 0!==o[i]&&(a+=i+"="+o[i]+"&");e.$router.push({path:"/danh-sach-ho-so/0/ho-so/"+t.dossierId+"/NEW"+a,query:{renew:Math.floor(100*Math.random())+1}})})).catch((function(t){e.loadingAction=!1}))}else e.goBack(),e.tiepNhanState=!1})).catch((function(t){e.loadingAction=!1}))}})).catch((function(t){e.loadingAction=!1,toastr__WEBPACK_IMPORTED_MODULE_1___default.a.clear(),toastr__WEBPACK_IMPORTED_MODULE_1___default.a.error("Yêu cầu của bạn thực hiện thất bại.")})),e.updateNotifyConfig()}}else toastr__WEBPACK_IMPORTED_MODULE_1___default.a.error("Vui lòng điền đầy đủ thông tin bắt buộc")},boSungHoSo:function(){var t=this;t.$store.commit("setPrintPH",!1);var e=this.$refs.thongtinchunghoso.getthongtinchunghoso(),a=this.$refs.thongtinchuhoso.thongTinChuHoSo,i=this.$refs.thongtinchuhoso.thongTinNguoiNopHoSo,o=this.$refs.thanhphanhoso.dossierTemplateItems,n=this.$refs.lephi.lePhi,s=this.$refs.dichvuchuyenphatketqua.dichVuChuyenPhatKetQua;if(t.$refs.thongtinchuhoso.showValid()){var r=t.$refs.thanhphanhoso.dossierFilesItems,c=o,l=[],d=[];c&&(c.forEach((function(e,a){1===e.partType&&(e["dossierId"]=t.dossierId,d.push(t.$store.dispatch("postDossierMark",e)))})),r.forEach((function(e,a){e.eForm&&(e["dossierId"]=t.dossierId,l.push(t.$store.dispatch("putAlpacaForm",e)))}))),Promise.all(d).then((function(t){})).catch((function(t){})),Promise.all(l).then((function(r){var c=Object.assign(a,i,o,n,s,e);c["dossierId"]=t.dossierId,t.$store.dispatch("putDossier",c).then((function(e){var a={dossierId:t.dossierId,actionCode:7100,payload:"",security:"",assignUsers:{},payment:{},createDossiers:{},dueDate:c.dueDate};t.$store.dispatch("postAction",a).then((function(t){}))})),t.updateNotifyConfig()})).catch((function(t){}))}},changeViapostal:function(t){this.viaPortalDetail=t?2:1},tiepNhanNhomHoSo:function(t){var e=this;e.$store.commit("setPrintPH",!1);var a=this.$refs.thongtinchuhoso.getThongTinNguoiNopHoSo(),i=(this.$refs.thanhphanhoso.dossierTemplateItems,e.dichVuChuyenPhatKetQua);if(e.loadingAction=!0,2!==i.viaPostal||e.$refs.dichvuchuyenphatketqua.validDichVuChuyenPhat()){var o=e.$refs.thanhphanhoso.dossierFilesItems,n=[];o&&o.forEach((function(t,a){t.eForm&&(t["dossierId"]=e.dossierId,n.push(e.$store.dispatch("putAlpacaForm",t)))}));var s=Object.assign(a,i);s["sampleCount"]=e.thongTinChiTietHoSo.sampleCount,s["dossierName"]=e.briefNote,console.log("data put dossier --\x3e",s);var r={serviceCode:e.thongTinChiTietHoSo.serviceCode,govAgencyCode:e.thongTinChiTietHoSo.govAgencyCode,templateNo:e.thongTinChiTietHoSo.dossierTemplateNo,originality:9};e.$store.dispatch("postDossier",r).then((function(t){s["dossierId"]=t.dossierId,e.$store.dispatch("putDossier",s).then((function(t){e.loadingAction=!1,e.$router.push({path:"/danh-sach-ho-so/0/nhom-ho-so/"+t.dossierId,query:e.$router.history.current.query})})).catch((function(t){e.loadingAction=!1,toastr__WEBPACK_IMPORTED_MODULE_1___default.a.clear(),toastr__WEBPACK_IMPORTED_MODULE_1___default.a.error("Yêu cầu của bạn thực hiện thất bại")})),e.updateNotifyConfig()}))}else e.loadingAction=!1},tiepNhanHoSoNewTemplate:function(t){var e=this;e.loadingAction=!0,console.log(e.checkQuyetDinh());var a={originality:e.getOriginality(),serviceCode:jquery__WEBPACK_IMPORTED_MODULE_2___default()("#serviceCode_hidden").val(),govAgencyCode:jquery__WEBPACK_IMPORTED_MODULE_2___default()("#govAgencyCode_hidden").val(),templateNo:jquery__WEBPACK_IMPORTED_MODULE_2___default()("#dossierTemplateNo_hidden").val(),dossiers:jquery__WEBPACK_IMPORTED_MODULE_2___default()("#dossiers_hidden").val(),dossierFileArr:jquery__WEBPACK_IMPORTED_MODULE_2___default()("#dossierFileArr_hidden").val(),dossierMarkArr:jquery__WEBPACK_IMPORTED_MODULE_2___default()("#dossierMarkArr_hidden").val(),payment:jquery__WEBPACK_IMPORTED_MODULE_2___default()("#payment_hidden").val()},i=JSON.parse(jquery__WEBPACK_IMPORTED_MODULE_2___default()("#dossiers_hidden").val());if("formHPH"===e.data_form_template){if(!e.$refs.formTiepNhan.validate())return toastr__WEBPACK_IMPORTED_MODULE_1___default.a.error("Vui lòng nhập đầy đủ thông tin bắt buộc"),void(e.loadingAction=!1);if("NEW"===e.formCode)e.checkCKCD?(e.loadingAction=!0,e.$store.dispatch("postDossierNewVersion",a).then((function(t){var a=i.metaData,o={id:t.dossierId,data:a};e.$store.dispatch("putMetaData",o).then((function(){e.loadingAction=!1,e.$store.commit("setActivePrintBienNhan",t.dossierId),e.goBack()})).catch((function(){e.loadingAction=!1}))})).catch((function(t){e.loadingAction=!1}))):(e.dialogXacNhanThaoTac=!0,e.loadingAction=!1);else if(e.checkCKCD){var o={id:e.id,dossier:i};e.loadingAction=!0,e.$store.dispatch("putDossierNew",o).then((function(t){var a=i.metaData,o={id:e.id,data:a};e.$store.dispatch("putMetaData",o).then((function(){console.log(t);var a=JSON.parse(jquery__WEBPACK_IMPORTED_MODULE_2___default()("#dossierFileArr_hidden").val());a.forEach(function(){var t=_asyncToGenerator(D_FDS_frontend_opencps_v2_1_onegate_21_fe_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.mark((function t(a){var i,o;return D_FDS_frontend_opencps_v2_1_onegate_21_fe_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if("formCH"!==e.data_form_template){t.next=5;break}if("TP01"!==a.partNo&&"TP02"!==a.partNo){t.next=5;break}return i={id:e.id,referenceUid:a.referenceUid,formData:a.formData},t.next=5,e.$store.dispatch("putDossierFileNew",i).then((function(t){})).catch((function(t){}));case 5:if("formHPH"!==e.data_form_template){t.next=10;break}if("TP01"!==a.partNo){t.next=10;break}return o={id:e.id,referenceUid:a.referenceUid,formData:a.formData},t.next=10,e.$store.dispatch("putDossierFileNew",o).then((function(t){})).catch((function(t){}));case 10:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}());var i={dossierId:e.id,payment:{}};jquery__WEBPACK_IMPORTED_MODULE_2___default()("#payment_hidden").val()&&(i["payment"]=JSON.parse(jquery__WEBPACK_IMPORTED_MODULE_2___default()("#payment_hidden").val())),e.$store.dispatch("putPayment",i).then((function(){e.loadingAction=!1,e.$store.commit("setActivePrintBienNhan",t.dossierId),e.goBack()})).catch((function(){e.loadingAction=!1}))})).catch((function(t){e.loadingAction=!1}))})).catch((function(t){e.loadingAction=!1}))}else e.dialogXacNhanThaoTac=!0,e.loadingAction=!1}if("formCH"===e.data_form_template){if(!e.$refs.formTiepNhan.validate())return toastr__WEBPACK_IMPORTED_MODULE_1___default.a.error("Vui lòng nhập đầy đủ thông tin bắt buộc"),void(e.loadingAction=!1);if(e.checkQuyetDinh())if(e.checkCKCD)if("NEW"===e.formCode)e.loadingAction=!0,e.$store.dispatch("postDossierNewVersion",a).then((function(t){var a=i.metaData,o={id:t.dossierId,data:a};e.$store.dispatch("putMetaData",o).then((function(){e.loadingAction=!1,e.$store.commit("setActivePrintBienNhan",t.dossierId),e.goBack()})).catch((function(){e.loadingAction=!1}))})).catch((function(t){e.loadingAction=!1}));else{var n={id:e.id,dossier:i};e.loadingAction=!0,e.$store.dispatch("putDossierNew",n).then((function(t){var a=i.metaData,o={id:e.id,data:a};e.$store.dispatch("putMetaData",o).then((function(){console.log(t);var a=JSON.parse(jquery__WEBPACK_IMPORTED_MODULE_2___default()("#dossierFileArr_hidden").val());a.forEach(function(){var t=_asyncToGenerator(D_FDS_frontend_opencps_v2_1_onegate_21_fe_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.mark((function t(a){var i,o;return D_FDS_frontend_opencps_v2_1_onegate_21_fe_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if("formCH"!==e.data_form_template){t.next=5;break}if("TP01"!==a.partNo&&"TP02"!==a.partNo){t.next=5;break}return i={id:e.id,referenceUid:a.referenceUid,formData:a.formData},t.next=5,e.$store.dispatch("putDossierFileNew",i).then((function(t){})).catch((function(t){}));case 5:if("formHPH"!==e.data_form_template){t.next=10;break}if("TP01"!==a.partNo){t.next=10;break}return o={id:e.id,referenceUid:a.referenceUid,formData:a.formData},t.next=10,e.$store.dispatch("putDossierFileNew",o).then((function(t){})).catch((function(t){}));case 10:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}());var i={dossierId:e.id,payment:{}};jquery__WEBPACK_IMPORTED_MODULE_2___default()("#payment_hidden").val()&&(i["payment"]=JSON.parse(jquery__WEBPACK_IMPORTED_MODULE_2___default()("#payment_hidden").val())),e.$store.dispatch("putPayment",i).then((function(){e.loadingAction=!1,e.$store.commit("setActivePrintBienNhan",t.dossierId),e.goBack()})).catch((function(){e.loadingAction=!1}))})).catch((function(t){e.loadingAction=!1}))})).catch((function(t){e.loadingAction=!1}))}else e.dialogXacNhanThaoTac=!0,e.loadingAction=!1;else e.loadingAction=!1}},xacNhan:function(){var t=this;t.loadingAction=!0;var e={originality:t.getOriginality(),serviceCode:jquery__WEBPACK_IMPORTED_MODULE_2___default()("#serviceCode_hidden").val(),govAgencyCode:jquery__WEBPACK_IMPORTED_MODULE_2___default()("#govAgencyCode_hidden").val(),templateNo:jquery__WEBPACK_IMPORTED_MODULE_2___default()("#dossierTemplateNo_hidden").val(),dossiers:jquery__WEBPACK_IMPORTED_MODULE_2___default()("#dossiers_hidden").val(),dossierFileArr:jquery__WEBPACK_IMPORTED_MODULE_2___default()("#dossierFileArr_hidden").val(),dossierMarkArr:jquery__WEBPACK_IMPORTED_MODULE_2___default()("#dossierMarkArr_hidden").val(),payment:jquery__WEBPACK_IMPORTED_MODULE_2___default()("#payment_hidden").val()},a=JSON.parse(jquery__WEBPACK_IMPORTED_MODULE_2___default()("#dossiers_hidden").val());if("formHPH"===t.data_form_template){if(!t.$refs.formTiepNhan.validate())return toastr__WEBPACK_IMPORTED_MODULE_1___default.a.error("Vui lòng nhập đầy đủ thông tin bắt buộc"),void(t.loadingAction=!1);if("NEW"===t.formCode)t.loadingAction=!0,t.$store.dispatch("postDossierNewVersion",e).then((function(e){var i=a.metaData,o={id:e.dossierId,data:i};t.$store.dispatch("putMetaData",o).then((function(){t.loadingAction=!1,t.$store.commit("setActivePrintBienNhan",e.dossierId),t.goBack()})).catch((function(){t.loadingAction=!1}))})).catch((function(e){t.loadingAction=!1}));else{var i={id:t.id,dossier:a};t.loadingAction=!0,t.$store.dispatch("putDossierNew",i).then((function(e){var i=a.metaData,o={id:t.id,data:i};t.$store.dispatch("putMetaData",o).then((function(){console.log(e);var a=JSON.parse(jquery__WEBPACK_IMPORTED_MODULE_2___default()("#dossierFileArr_hidden").val());a.forEach(function(){var e=_asyncToGenerator(D_FDS_frontend_opencps_v2_1_onegate_21_fe_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.mark((function e(a){var i,o;return D_FDS_frontend_opencps_v2_1_onegate_21_fe_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if("formCH"!==t.data_form_template){e.next=5;break}if("TP01"!==a.partNo&&"TP02"!==a.partNo){e.next=5;break}return i={id:t.id,referenceUid:a.referenceUid,formData:a.formData},e.next=5,t.$store.dispatch("putDossierFileNew",i).then((function(t){})).catch((function(t){}));case 5:if("formHPH"!==t.data_form_template){e.next=10;break}if("TP01"!==a.partNo){e.next=10;break}return o={id:t.id,referenceUid:a.referenceUid,formData:a.formData},e.next=10,t.$store.dispatch("putDossierFileNew",o).then((function(t){})).catch((function(t){}));case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());var i={dossierId:t.id,payment:{}};jquery__WEBPACK_IMPORTED_MODULE_2___default()("#payment_hidden").val()&&(i["payment"]=JSON.parse(jquery__WEBPACK_IMPORTED_MODULE_2___default()("#payment_hidden").val())),t.$store.dispatch("putPayment",i).then((function(){t.loadingAction=!1,t.$store.commit("setActivePrintBienNhan",e.dossierId),t.goBack()})).catch((function(){t.loadingAction=!1}))})).catch((function(e){t.loadingAction=!1}))})).catch((function(e){t.loadingAction=!1}))}}if("formCH"===t.data_form_template){if(!t.$refs.formTiepNhan.validate())return toastr__WEBPACK_IMPORTED_MODULE_1___default.a.error("Vui lòng nhập đầy đủ thông tin bắt buộc"),void(t.loadingAction=!1);if("NEW"===t.formCode)t.loadingAction=!0,t.$store.dispatch("postDossierNewVersion",e).then((function(e){var i=a.metaData,o={id:e.dossierId,data:i};t.$store.dispatch("putMetaData",o).then((function(){t.loadingAction=!1,t.$store.commit("setActivePrintBienNhan",e.dossierId),t.goBack()})).catch((function(){t.loadingAction=!1}))})).catch((function(e){t.loadingAction=!1}));else{var o={id:t.id,dossier:a};t.loadingAction=!0,t.$store.dispatch("putDossierNew",o).then((function(e){var i=a.metaData,o={id:t.id,data:i};t.$store.dispatch("putMetaData",o).then((function(){console.log(e);var a=JSON.parse(jquery__WEBPACK_IMPORTED_MODULE_2___default()("#dossierFileArr_hidden").val());a.forEach(function(){var e=_asyncToGenerator(D_FDS_frontend_opencps_v2_1_onegate_21_fe_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.mark((function e(a){var i,o;return D_FDS_frontend_opencps_v2_1_onegate_21_fe_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if("formCH"!==t.data_form_template){e.next=5;break}if("TP01"!==a.partNo&&"TP02"!==a.partNo){e.next=5;break}return i={id:t.id,referenceUid:a.referenceUid,formData:a.formData},e.next=5,t.$store.dispatch("putDossierFileNew",i).then((function(t){})).catch((function(t){}));case 5:if("formHPH"!==t.data_form_template){e.next=10;break}if("TP01"!==a.partNo){e.next=10;break}return o={id:t.id,referenceUid:a.referenceUid,formData:a.formData},e.next=10,t.$store.dispatch("putDossierFileNew",o).then((function(t){})).catch((function(t){}));case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());var i={dossierId:t.id,payment:{}};jquery__WEBPACK_IMPORTED_MODULE_2___default()("#payment_hidden").val()&&(i["payment"]=JSON.parse(jquery__WEBPACK_IMPORTED_MODULE_2___default()("#payment_hidden").val())),t.$store.dispatch("putPayment",i).then((function(){t.loadingAction=!1,t.$store.commit("setActivePrintBienNhan",e.dossierId),t.goBack()})).catch((function(){t.loadingAction=!1}))})).catch((function(e){t.loadingAction=!1}))})).catch((function(e){t.loadingAction=!1}))}}},getNotifyConfig:function(t){var e=this;if(e.notifyConfig&&3===e.originality){var a={dossierId:t,key:"smsNotify"};e.$store.dispatch("getNotifyConfig",a).then((function(t){"true"===String(t)?e.smsNotify=!0:e.smsNotify=!1}));var i={dossierId:t,key:"emailNotify"};e.$store.dispatch("getNotifyConfig",i).then((function(t){e.emailNotify=t,"true"===String(t)?e.emailNotify=!0:e.emailNotify=!1}))}},updateNotifyConfig:function(){var t=this;if(t.notifyConfig&&3===t.originality){var e={dossierId:t.dossierId,smsNotify:t.smsNotify,emailNotify:t.emailNotify};t.$store.dispatch("putNotifyConfig",e).then((function(t){}))}},showHDTT:function(){var t=this;t.applicantNameGuide=jquery__WEBPACK_IMPORTED_MODULE_2___default()("#delegateName").val(),t.applicantAddressGuide=jquery__WEBPACK_IMPORTED_MODULE_2___default()("#delegateAddress").val(),jquery__WEBPACK_IMPORTED_MODULE_2___default()("#select2-delegateWardCode-container").text()&&jquery__WEBPACK_IMPORTED_MODULE_2___default()("#select2-delegateWardCode-container").text().indexOf("/")<0&&(t.applicantAddressGuide+=", "+jquery__WEBPACK_IMPORTED_MODULE_2___default()("#select2-delegateWardCode-container").text(),jquery__WEBPACK_IMPORTED_MODULE_2___default()("#delegateAddress").val()||t.applicantAddressGuide.replace(/,/g,"")),jquery__WEBPACK_IMPORTED_MODULE_2___default()("#select2-delegateDistrictCode-container").text()&&jquery__WEBPACK_IMPORTED_MODULE_2___default()("#select2-delegateDistrictCode-container").text().indexOf("/")<0&&(t.applicantAddressGuide+=", "+jquery__WEBPACK_IMPORTED_MODULE_2___default()("#select2-delegateDistrictCode-container").text()),jquery__WEBPACK_IMPORTED_MODULE_2___default()("#select2-delegateCityCode-container").text()&&jquery__WEBPACK_IMPORTED_MODULE_2___default()("#select2-delegateCityCode-container").text().indexOf("/")<0&&(t.applicantAddressGuide+=", "+jquery__WEBPACK_IMPORTED_MODULE_2___default()("#select2-delegateCityCode-container").text()),t.applicantTelNoGuide=jquery__WEBPACK_IMPORTED_MODULE_2___default()("#delegateTelNo").val(),t.applicantEmailGuide=jquery__WEBPACK_IMPORTED_MODULE_2___default()("#delegateEmail").val(),t.dialog_printGuide=!0,t.$refs.formDenied.resetValidation()},showTCTN:function(){var t=this;t.applicantNameGuide=jquery__WEBPACK_IMPORTED_MODULE_2___default()("#delegateName").val(),t.applicantAddressGuide=jquery__WEBPACK_IMPORTED_MODULE_2___default()("#delegateAddress").val(),jquery__WEBPACK_IMPORTED_MODULE_2___default()("#select2-delegateWardCode-container").text()&&jquery__WEBPACK_IMPORTED_MODULE_2___default()("#select2-delegateWardCode-container").text().indexOf("/")<0&&(t.applicantAddressGuide+=", "+jquery__WEBPACK_IMPORTED_MODULE_2___default()("#select2-delegateWardCode-container").text(),jquery__WEBPACK_IMPORTED_MODULE_2___default()("#delegateAddress").val()||t.applicantAddressGuide.replace(/,/g,"")),jquery__WEBPACK_IMPORTED_MODULE_2___default()("#select2-delegateDistrictCode-container").text()&&jquery__WEBPACK_IMPORTED_MODULE_2___default()("#select2-delegateDistrictCode-container").text().indexOf("/")<0&&(t.applicantAddressGuide+=", "+jquery__WEBPACK_IMPORTED_MODULE_2___default()("#select2-delegateDistrictCode-container").text()),jquery__WEBPACK_IMPORTED_MODULE_2___default()("#select2-delegateCityCode-container").text()&&jquery__WEBPACK_IMPORTED_MODULE_2___default()("#select2-delegateCityCode-container").text().indexOf("/")<0&&(t.applicantAddressGuide+=", "+jquery__WEBPACK_IMPORTED_MODULE_2___default()("#select2-delegateCityCode-container").text()),t.applicantTelNoGuide=jquery__WEBPACK_IMPORTED_MODULE_2___default()("#delegateTelNo").val(),t.applicantEmailGuide=jquery__WEBPACK_IMPORTED_MODULE_2___default()("#delegateEmail").val(),t.dialog_denied=!0,t.$refs.formDenied.resetValidation()},doGuiding:function(t){var e=this,a=e.$router.history.current.query;if(e.$refs.formGuide.validate()){e.loadingAction=!0;var i=[];for(var o in e.tphsGuide)e.tphsGuide[o]["fileMark"]||i.push(e.tphsGuide[o]["partNo"]);var n={serviceConfigId:a.hasOwnProperty("service_config")&&a.service_config?a.service_config:"",serviceCode:e.serviceCode_hidden,serviceName:e.serviceName_hidden,templateNo:e.dossierTemplateNo_hidden,applicantName:e.applicantNameGuide,applicantAddress:e.applicantAddressGuide,applicantEmail:e.applicantEmailGuide,applicantTelNo:e.applicantTelNoGuide,govAgencyCode:e.govAgencyCode_hidden,govAgencyName:e.govAgencyName_hidden,typeCode:"DOC_03",partNo:i.toString(),applicantNote:e.applicantNoteGuide,type:"completed",applicantType:e.applicantTypeGuide?"citizen":"business"};"doc"===t&&(n["reportType"]="word"),"doc"!==t&&(e.tiltleDialog="Phiếu hướng dẫn hoàn thiện hồ sơ",e.dialogPDFLoading=!0,e.dialogPDF=!0),e.$store.dispatch("doGuiding",n).then((function(a){e.loadingAction=!1,e.dialog_printGuide=!1,e.dialogPDFLoading=!1,"doc"!==t&&(document.getElementById("dialogPDFPreview").src=a)})).catch((function(){e.loadingAction=!1}))}},doDenied:function(t){var e=this,a=e.$router.history.current.query;if(e.$refs.formDenied.validate()){e.loadingAction=!0;var i={serviceConfigId:a.hasOwnProperty("service_config")&&a.service_config?a.service_config:"",serviceCode:e.serviceCode_hidden,serviceName:e.serviceName_hidden,templateNo:e.dossierTemplateNo_hidden,applicantName:e.applicantNameGuide,applicantAddress:e.applicantAddressGuide,applicantEmail:e.applicantEmailGuide,applicantTelNo:e.applicantTelNoGuide,govAgencyCode:e.govAgencyCode_hidden,govAgencyName:e.govAgencyName_hidden,typeCode:"DOC_03",applicantNote:e.applicantNoteGuide,type:"denied",applicantType:e.applicantTypeGuide?"citizen":"business"};"doc"===t&&(i["reportType"]="word"),"doc"!==t&&(e.tiltleDialog="Phiếu từ chối tiếp nhận",e.dialogPDFLoading=!0,e.dialogPDF=!0),e.$store.dispatch("doGuiding",i).then((function(a){e.loadingAction=!1,e.dialog_denied=!1,e.dialogPDFLoading=!1,"doc"!==t&&(document.getElementById("dialogPDFPreview").src=a)})).catch((function(){e.loadingAction=!1}))}},parseDateToTimestamp:function(t){if(!t)return null;var e="".concat(t).split("/"),a=_slicedToArray(e,3),i=a[0],o=a[1],n=a[2],s="".concat(n,"-").concat(o.padStart(2,"0"),"-").concat(i.padStart(2,"0"));return"Invalid Date"==new Date(s)?"":new Date(s).getTime()},goBack:function(){var t=this,e=t.$router.history.current.params,a=t.$router.history.current.query;delete a["template_no"],delete a["serviceCode"],delete a["service_config"],t.isOffLine?t.$router.push({path:"/add-dvc/0"}):t.$router.push({path:"/danh-sach-ho-so/"+e.index,query:a})},goBackHistory:function(){window.history.back()},changeCheckCKCD:function(t){console.log(t),this.checkCKCD=t},checkQuyetDinh:function(){try{var t=function(){var t=JSON.parse(jquery__WEBPACK_IMPORTED_MODULE_2___default()("#dossierFileArr_hidden").val());console.log(t);var e=t.find((function(t){return"TP02"===t.partNo}));console.log(i);var a=JSON.parse(e.formData).van_ban,i=t.find((function(t){return"TP01"===t.partNo}));console.log(i);var o=JSON.parse(i.formData).thanh_vien_doan;console.log(o),console.log(a);for(var n=function(t){var e=a.filter((function(e){return e.vb_so_hieu_van_ban===a[t]["vb_so_hieu_van_ban"]}));if(e.length>1)return toastr__WEBPACK_IMPORTED_MODULE_1___default.a.error("Văn bản quyết định số "+a[t]["vb_so_hieu_van_ban"]+" bị trùng"),{v:{v:!1}};var i=o.find((function(e){return e.vb_so_hieu_van_ban===a[t]["vb_so_hieu_van_ban"]}));return i?void 0:(toastr__WEBPACK_IMPORTED_MODULE_1___default.a.error("Văn bản quyết định số "+a[t]["vb_so_hieu_van_ban"]+" chưa có thành viên nào"),{v:{v:!1}})},s=0;s<a.length;s++){var r=n(s);if("object"===_typeof(r))return r.v}return{v:!0}}();if("object"===_typeof(t))return t.v}catch(e){return!1}}}}},"4ea3":function(t,e,a){"use strict";var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"comment-temp"},[a("div",[a("v-expansion-panel",{staticClass:"expansion-pl-transparent",attrs:{value:[!0],expand:""}},[a("v-expansion-panel-content",[a("v-card",{staticClass:"comments__container"},[a("v-card-text",{staticClass:"pl-4"},[a("div",{attrs:{id:"comments-container-el"}})])],1)],1)],1)],1)])},o=[],n=a("854a"),s=a.n(n);s.a.options={closeButton:!0,timeOut:"10000"};var r={props:["classPK","className"],data:function(){return{usersComment:[],comment:[],argShowMore:!0,checkOpinion:!0,validFileUpload:!0,fileTypeAllow:["png","jpg","jpeg","pdf","docx","doc","xls","xlsx","txt","rtf"]}},computed:{loading:function(){return this.$store.getters.loading},initData:function(){return this.$store.getters.loadingInitData}},watch:{classPK:function(t){var e=this;e.$store.dispatch("loadUsersComment",t).then((function(t){e.usersComment=t,e.initComment()})).catch((function(t){e.initComment()}))}},created:function(){},mounted:function(){},methods:{runComment:function(){var t=this;t.classPK&&t.initComment()},validateFile:function(t){var e=this,a=t.file.name?t.file.name.split("."):"",i=a?a[a.length-1]:"",o=e.fileTypeAllow,n=10,r=o?o.filter((function(t){return t===i})):"";e.validFileUpload=!1,r&&r.length>0?Number(t.file.size)<=1048576*n?e.validFileUpload=!0:(s.a.error("Tài liệu tải lên dung lượng tối đa là "+n+" MB"),e.validFileUpload=!1):(s.a.error("Tài liệu tải lên chỉ chấp nhận các định dạng "+o.toString()),e.validFileUpload=!1)},initComment:function(){var t=this;window.$("#comments-container-el").comments({profilePictureURL:"/o/opencps-store/js/cli/motcua/app/image/icons-user-comment.png",textareaRows:2,enableAttachments:!0,enableHashtags:!0,enablePinging:!1,postCommentOnEnter:!1,forceResponsive:!1,readOnly:!1,textareaPlaceholderText:"Thêm bình luận mới",newestText:"Mới nhất",oldestText:"Cũ nhất",popularText:"Phổ biến",attachmentsText:"Đính kèm",sendText:"Gửi",replyText:"Trả lời",editText:"Sửa",editedText:"Đã sửa",youText:"Bạn",saveText:"Ghi lại",deleteText:"Xóa",hideRepliesText:"Ẩn câu trả lời",noCommentsText:"Không có bình luận nào",noAttachmentsText:"Không có tệp đính kèm",attachmentDropText:"Kéo thả tệp đính kèm",fieldMappings:{id:"commentId",parent:"parent",userId:"userId",created:"createdDate",modified:"modifiedDate",content:"content",fileURL:"fileUrl",fileMimeType:"fileType",fileName:"fileName",pings:"pings",creator:"userId",fullname:"fullname",profileURL:"profileUrl",profilePictureURL:"pictureUrl",isNew:"isNew",createdByAdmin:"isAdmin",createdByCurrentUser:"createdByCurrentUser",upvoteCount:"upvoteCount",userHasUpvoted:"userHasUpvoted",email:"email",opinion:"opinion",className:"className",classPK:"classPK"},timeFormatter:function(t){if(t){var e=new Date(t);return e.setHours(e.getHours()-7),"".concat(e.getDate().toString().padStart(2,"0"),"/").concat((e.getMonth()+1).toString().padStart(2,"0"),"/").concat(e.getFullYear()," ").concat(e.getHours().toString().padStart(2,"0"),":").concat(e.getMinutes().toString().padStart(2,"0"))}return""},getUsers:function(e,a){e(t.usersComment)},getComments:function(e,a){var i={classPK:t.classPK,className:t.className},o=t.$store.dispatch("loadCommentItems",i);o.then((function(a){var i=[];window.$.each(a,(function(e,a){t.comment=a,t.formatComment(t.comment),i.push(t.comment)})),e(i)})).catch((function(t){e([]),a()}))},postComment:function(e,a,i){e.classPK=t.classPK,e.className=t.className,e.opinion=document.getElementById("opinion").checked,t.$store.dispatch("postComment",e).then((function(e){e.opinion&&window.$(".opinion").hide(),document.getElementById("opinion").checked=!1,t.comment=e,t.formatComment(t.comment),a(t.comment)})).catch((function(){}))},putComment:function(e,a,i){e.classPK=t.classPK,e.className=t.className,t.$store.dispatch("putComment",e).then((function(e){t.comment=e,t.formatComment(t.comment),a(t.comment)})).catch((function(){}))},deleteComment:function(e,a,i){e.classPK=t.classPK,e.className=t.className,t.$store.dispatch("deleteComment",e).then((function(t){a()})).catch((function(t){i(),console.log(t)}))},upvoteComment:function(e,a,i){e.classPK=t.classPK,e.className=t.className,t.$store.dispatch("upvoteComment",e).then((function(e){t.comment=e,t.formatComment(t.comment),a(t.comment)})).catch((function(t){console.log(t)}))},uploadAttachments:function(e,a,i){var o=0,n=[],s=function(){o++,o===e.length&&(0===n.length?i():a(n))};window.$(e).each((function(e,a){var i=new FormData;window.$(Object.keys(a)).each((function(t,e){var o=a[e];o&&i.append(e,o)})),i.append("file",a.file),i.append("className",t.className),i.append("classPK",t.classPK),i.append("parent",null!=a.parent?a.parent:0),i.append("fileName",a.file.name),i.append("fileType",a.file.type),i.append("fileSize",a.file.size),i.append("pings",a.pings.join()),i.append("opinion",document.getElementById("opinion").checked),i.append("email",""),i.append("fullname",t.initData.user.userName),i.append("opinion",document.getElementById("opinion").checked);var o={file:a.file};t.validateFile(o),t.validFileUpload?window.$.ajax({url:t.initData.commentApi+"/uploads",dataType:"json",type:"POST",headers:{groupId:t.initData.groupId},data:i,cache:!1,contentType:!1,processData:!1,success:function(e){e.opinion&&window.$(".opinion").hide(),document.getElementById("opinion").checked=!1,t.formatComment(e),n.push(t.comment),s(),e.opinion&&window.$(".opinion").hide(),document.getElementById("opinion").checked=!1},error:function(t,e){s()}}):s()}))}})},formatComment:function(t){var e=this;e.comment=t,0===t.parent&&(e.comment.parent=null),""===t.fileName&&(e.comment.fileName=null),""===t.fileType&&(e.comment.fileType=null),""===t.fileUrl&&(e.comment.fileUrl=null),""===t.pictureUrl&&(e.comment.pictureUrl="https://png.icons8.com/material/50/000000/guest-male.png"),e.comment.fullname=t.fullname,e.comment.opinion=t.opinion,e.comment.pings=t.pings.toString().split(","),e.comment.createdDate=e.comment.createDate,e.comment.modifiedDate=e.comment.modifiedDate},dateTimeView:function(t){if(t){var e=new Date(t);return"".concat(e.getDate().toString().padStart(2,"0"),"/").concat((e.getMonth()+1).toString().padStart(2,"0"),"/").concat(e.getFullYear()," ").concat(e.getHours().toString().padStart(2,"0"),":").concat(e.getMinutes().toString().padStart(2,"0"))}return""}},filters:{dateTimeView:function(t){if(t){var e=new Date(t);return"".concat(e.getDate().toString().padStart(2,"0"),"/").concat((e.getMonth()+1).toString().padStart(2,"0"),"/").concat(e.getFullYear(),"  ").concat(e.getHours().toString().padStart(2,"0"),":").concat(e.getMinutes().toString().padStart(2,"0"))}return""}}},c=r,l=a("2877"),d=a("6544"),u=a.n(d),h=a("b0af"),p=a("99d9"),m=a("cd55"),g=a("49e2"),v=Object(l["a"])(c,i,o,!1,null,null,null);e["a"]=v.exports;u()(v,{VCard:h["a"],VCardText:p["b"],VExpansionPanel:m["a"],VExpansionPanelContent:g["a"]})},"56d7":function(t,e,a){"use strict";a.r(e);a("0f18");var i=a("a026"),o=a("bb71");a("74ef");i["a"].use(o["a"],{theme:{primary:"#001f4d",secondary:"#424242",accent:"#001f4d",error:"#FF5252",info:"#2196F3",success:"#4CAF50",warning:"#FFC107"},customProperties:!0,iconfont:"md"});var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-app",{staticClass:"onegate__fe",staticStyle:{border:"1px solid #dedede"}},[0===t.trangThaiHoSoList.length||t.isMobile?t._e():a("v-navigation-drawer",{class:{detail_state:0!==t.detailState},attrs:{app:"",clipped:"",floating:"",width:"240"}},[t.loading?a("content-placeholders",{staticClass:"mt-3"},[a("content-placeholders-text",{attrs:{lines:7}})],1):a("v-list",{staticClass:"py-0 nav_trang_thai_ho_so"},t._l(t.trangThaiHoSoList,(function(e,i){return a("v-list-group",{key:i,ref:"listGroupCustom",refInFor:!0,attrs:{"prepend-icon":e["icon"]?e["icon"]:"description","append-icon":(e.hasOwnProperty("items"),""),"no-action":""},model:{value:e.active,callback:function(a){t.$set(e,"active",a)},expression:"item.active"}},[a("v-list-tile",{attrs:{slot:"activator"},on:{click:function(a){t.toTableIndexing(e,i)}},slot:"activator"},[a("v-list-tile-content",[a("v-list-tile-title",[t._v(t._s(e.title))]),e.hasOwnProperty("counter")&&e["counter"]>-1&&3!==e["menuType"]?a("span",{staticClass:"status__counter_group status__counter"},[t._v("\n              "+t._s(e.counter)+"\n            ")]):3!==e["menuType"]?a("span",{staticClass:"status__counter_group status__counter"},[a("v-progress-circular",{attrs:{width:1,size:16,indeterminate:"",color:"red"}})],1):t._e()],1)],1),t._l(e.items,(function(i){return e.items&&e.items.length>1?a("v-list-tile",{key:i.stepCode,class:{"list__tile--active":String(t.currentStep)===String(i.stepCode)},nativeOn:{click:function(e){t.filterSteps(i)}}},[a("v-list-tile-action",[String(t.currentStep)===String(i.stepCode)?a("v-icon",{attrs:{color:"primary"}},[t._v("play_arrow")]):t._e()],1),a("v-list-tile-content",[a("v-list-tile-title",[t._v(t._s(i.menuStepName))]),i.hasOwnProperty("counter")&&i["counter"]>-1?a("span",{staticClass:"status__counter"},[t._v("\n              "+t._s(i.counter)+"\n            ")]):a("span",{staticClass:"status__counter"},[a("v-progress-circular",{attrs:{width:1,size:16,indeterminate:"",color:"red"}})],1)],1)],1):t._e()}))],2)})),1)],1),0!==t.trangThaiHoSoList.length&&t.isMobile?a("div",{attrs:{id:"m-navigation"}},[a("div",{staticClass:"row-header mb-0 py-2",staticStyle:{"background-color":"#070f52"}},[a("div",{staticClass:"ml-2 white--text"},[a("span",[t._v("QUẢN LÝ HỒ SƠ")])])]),a("div",{staticStyle:{"max-height":"200px",overflow:"hidden","overflow-y":"scroll"}},[t.loading?a("content-placeholders",{staticClass:"mt-3"},[a("content-placeholders-text",{attrs:{lines:7}})],1):a("v-list",{staticClass:"py-0 nav_trang_thai_ho_so"},t._l(t.trangThaiHoSoList,(function(e,i){return a("v-list-group",{key:i,ref:"listGroupCustom",refInFor:!0,attrs:{"prepend-icon":e["icon"]?e["icon"]:"description","append-icon":(e.hasOwnProperty("items"),""),"no-action":""},model:{value:e.active,callback:function(a){t.$set(e,"active",a)},expression:"item.active"}},[a("v-list-tile",{staticClass:"px-0",attrs:{slot:"activator"},on:{click:function(a){t.toTableIndexing(e,i)}},slot:"activator"},[a("v-list-tile-content",[a("v-list-tile-title",[t._v(t._s(e.title))]),e.hasOwnProperty("counter")&&e["counter"]>-1&&3!==e["menuType"]?a("span",{staticClass:"status__counter_group status__counter"},[t._v("\n                "+t._s(e.counter)+"\n              ")]):3!==e["menuType"]?a("span",{staticClass:"status__counter_group status__counter"},[a("v-progress-circular",{attrs:{width:1,size:16,indeterminate:"",color:"red"}})],1):t._e()],1)],1),t._l(e.items,(function(i){return e.items&&e.items.length>1?a("v-list-tile",{key:i.stepCode,staticClass:"px-0",class:{"list__tile--active":String(t.currentStep)===String(i.stepCode)},nativeOn:{click:function(e){t.filterSteps(i)}}},[a("v-list-tile-action",[String(t.currentStep)===String(i.stepCode)?a("v-icon",{attrs:{color:"primary"}},[t._v("play_arrow")]):t._e()],1),a("v-list-tile-content",[a("v-list-tile-title",[t._v(t._s(i.menuStepName))]),i.hasOwnProperty("counter")&&i["counter"]>-1?a("span",{staticClass:"status__counter"},[t._v("\n                "+t._s(i.counter)+"\n              ")]):a("span",{staticClass:"status__counter"},[a("v-progress-circular",{attrs:{width:1,size:16,indeterminate:"",color:"red"}})],1)],1)],1):t._e()}))],2)})),1)],1)]):t._e(),a("v-content",[t.isSigned?a("router-view"):t._e(),!t.loading&&0===t.trangThaiHoSoList.length&&t.isSigned?a("v-alert",{staticClass:"mx-3",attrs:{outline:"",color:"warning",icon:"priority_high",value:!0}},[t._v("\n      Bạn không có quyền thao tác!\n    ")]):t._e(),t.isSigned?t._e():a("v-layout",{staticClass:"mt-4",staticStyle:{"max-width":"500px",margin:"0 auto"},attrs:{wrap:""}},[a("v-flex",{attrs:{xs12:""}},[a("v-card",{staticClass:"px-2 py-3",staticStyle:{border:"1px solid #dddddd"},attrs:{flat:""}},[a("v-flex",{staticClass:"primary--text text-bold text-xs-center",attrs:{xs12:""}},[t._v("\n            VUI LÒNG ĐĂNG NHẬP ĐỂ SỬ DỤNG\n          ")]),a("v-flex",{staticClass:"mt-3 text-xs-center",attrs:{xs12:""}},[a("v-btn",{staticClass:"mr-2",attrs:{color:"primary"},on:{click:t.doLogin}},[a("v-icon",[t._v("input")]),t._v(" \n              Đăng nhập\n            ")],1),a("v-btn",{attrs:{color:"primary"},on:{click:t.goBack}},[a("v-icon",[t._v("reply")]),t._v(" \n              Quay lại\n            ")],1)],1)],1)],1)],1)],1),a("object",{attrs:{id:"plugin0",type:"application/x-cryptolib05plugin",width:"0",height:"0"}})],1)},s=[],r=a("bc3a"),c=a.n(r),l=a("1157"),d=a.n(l),u={data:function(){return{isCallBack:!0,trangThaiHoSoList:[],loading:!0,currentStep:"0",counterData:[],detailState:0,isSigned:!!window.themeDisplay&&window.themeDisplay.isSignedIn()}},beforeDestroy:function(){"undefined"!==typeof window&&window.removeEventListener("resize",this.onResize,{passive:!0})},mounted:function(){this.onResize(),window.addEventListener("resize",this.onResize,{passive:!0}),this.isMobile&&d()("section#content").css("padding-left","0px")},computed:{currentIndex:function(){return this.$store.getters.index},activeGetCounter:function(){return this.$store.getters.activeGetCounter},pathLanding:function(){return"/danh-sach-ho-so"},isMobile:function(){return this.$store.getters.getIsMobile}},created:function(){var t=this,e=window.innerWidth<1264;t.$store.commit("setIsMobile",e),c.a.get("/o/v1/opencps/users/"+window.themeDisplay.getUserId()).then((function(e){var a=e.data;if(t.$store.commit("setUserLogin",a),a.hasOwnProperty("className")&&"org.opencps.usermgt.model.Employee"===a.className){var i={headers:{groupId:window.themeDisplay.getScopeGroupId()?window.themeDisplay.getScopeGroupId():""}};c.a.get("/o/rest/v2/employees/byGroupId",i).then((function(e){var a=e.data;t.$store.commit("setEmployeeLogin",a),console.log("setEmployeeLogin",t.$store.getters.getEmployeeLogin)}))}})).catch((function(t){})),t.$nextTick((function(){window.message=t.callback_alpacal,t.loading=!0,t.$store.dispatch("loadMenuConfigToDo").then((function(e){if(t.loading=!1,e){t.trangThaiHoSoList=e;var a=t.$router.history.current.params;Array.isArray(t.trangThaiHoSoList)&&t.trangThaiHoSoList.length>0&&(a.hasOwnProperty("index")||a.hasOwnProperty("serviceCode")?t.trangThaiHoSoList[a.index]["active"]=!0:(t.trangThaiHoSoList[0]["active"]=!0,t.$router.push({path:t.pathLanding+"/0",query:{q:t.trangThaiHoSoList[0]["queryParams"]}}))),t.loadingCounter(),t.loading=!1}})),setInterval((function(){t.loadingCounter()}),3e5)}))},updated:function(){var t=this;t.$nextTick((function(){var e=t.$router.history.current.params;e.hasOwnProperty("index")&&t.isCallBack&&(t.isCallBack=!1,t.$store.commit("setIndex",e.index),e.hasOwnProperty("id")?t.detailState=1:t.detailState=0)}))},watch:{$route:function(t,e){var a=this,i=window.innerWidth<1264;a.$store.commit("setIsMobile",i);var o=t.params,n=t.query;n.hasOwnProperty("step")?(a.currentStep=String(n.step),console.log("currentStep",String(n.step))):a.currentStep="0",n.hasOwnProperty("recount")&&a.loadingCounter(),o.hasOwnProperty("id")?a.detailState=1:a.detailState=0},activeGetCounter:function(t){var e=this;setTimeout((function(){e.loadingCounter()}),300)}},methods:{toTableIndexing:function(t,e){var a=this;try{a.isMobile&&d()("#table-dossier")&&d()("html, body").animate({scrollTop:d()("#table-dossier").offset().top},200,"linear")}catch(i){}this.$store.commit("setIndex",e),a.$router.push({path:a.pathLanding+"/"+e,query:{renew:Math.floor(100*Math.random())+1,q:t.queryParams}})},filterSteps:function(t){var e=this;try{e.isMobile&&d()("#table-dossier")&&d()("html, body").animate({scrollTop:d()("#table-dossier").offset().top},200,"linear")}catch(s){}var a=e.$router.history.current.query,i=e.$router.history.current.params,o=e.trangThaiHoSoList[i.index].queryParams;if(console.log("queryString++++++1111111+++++",o),null!==a&&void 0!==a){var n=o.lastIndexOf("=");n>0&&(o=o.substr(0,n+1))}e.currentStep=String(t.stepCode),e.$router.push({path:e.pathLanding+"/"+i.index,query:{renew:Math.floor(100*Math.random())+1,q:o+t.stepCode,step:t.stepCode}})},loadingCounter:function(){var t=this,e={originality:t.getOriginality()};t.$store.dispatch("loadingCounterHoSo",e).then((function(e){t.counterData=e.data;var a=function(e){if(t.trangThaiHoSoList[e]["counter"]=0,t.trangThaiHoSoList[e].hasOwnProperty("items")){var a=0;for(var i in t.trangThaiHoSoList[e].items)for(var o in t.trangThaiHoSoList[e].items[i]["counter"]=0,t.counterData)if(String(t.counterData[o].stepCode)===String(t.trangThaiHoSoList[e].items[i].stepCode)){var n=t.counterData[o].totalCount;t.trangThaiHoSoList[e].items[i]["counter"]=n,a+=n;break}t.trangThaiHoSoList[e]["counter"]=a}else if(t.trangThaiHoSoList[e].queryParams.indexOf("step")>=0)if(2===t.trangThaiHoSoList[e]["menuType"]){var s={queryParams:t.trangThaiHoSoList[e].queryParams};t.$store.dispatch("loadingCounterNotStep",s).then((function(a){t.trangThaiHoSoList[e]["counter"]=a.total})).catch((function(){t.trangThaiHoSoList[e]["counter"]=0}))}else{var r=t.trangThaiHoSoList[e].queryParams.split("step="),c=0;for(var l in t.counterData)if(String(t.counterData[l].stepCode)===String(r[1])){c=t.counterData[l].totalCount;break}t.trangThaiHoSoList[e]["counter"]=c}else{var d={queryParams:t.trangThaiHoSoList[e].queryParams};t.$store.dispatch("loadingCounterNotStep",d).then((function(a){t.trangThaiHoSoList[e]["counter"]=a.total})).catch((function(){t.trangThaiHoSoList[e]["counter"]=0}))}};for(var i in t.trangThaiHoSoList)a(i);t.loading=!1}))},doLogin:function(){window.location.href=window.themeDisplay.getPortalURL()},goBack:function(){window.history.back()},callback_alpacal:function(t){console.log("data_export_eform",t)},onResize:function(){var t=this,e=window.innerWidth<1264;t.$store.commit("setIsMobile",e)}}},h=u,p=a("2877"),m=a("6544"),g=a.n(m),v=a("0798"),f=a("7496"),_=a("8336"),y=a("b0af"),C=a("549c"),D=a("0e8f"),T=a("132d"),x=a("a722"),b=a("8860"),S=a("56b0"),N=a("ba95"),P=a("40fe"),I=a("5d23"),A=a("f774"),w=a("490a"),E=Object(p["a"])(h,n,s,!1,null,null,null),k=E.exports;g()(E,{VAlert:v["a"],VApp:f["a"],VBtn:_["a"],VCard:y["a"],VContent:C["a"],VFlex:D["a"],VIcon:T["a"],VLayout:x["a"],VList:b["a"],VListGroup:S["a"],VListTile:N["a"],VListTileAction:P["a"],VListTileContent:I["a"],VListTileTitle:I["c"],VNavigationDrawer:A["a"],VProgressCircular:w["a"]});var O=a("8c4f"),F=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[t.trangThaiHoSoList?a("div",{staticClass:"row-header no__hidden_class"},[null!==t.trangThaiHoSoList?a("div",{staticClass:"background-triangle-big"},[a("span",[t._v(t._s(t.trangThaiHoSoList[t.index]["title"]))])]):t._e(),a("div",{staticClass:"layout row wrap header_tools row-blue"},[t.isMobile?t._e():a("div",{staticClass:"flex pl-3 text-ellipsis text-bold",staticStyle:{position:"relative"}},[0!==t.trangThaiHoSoList[t.index]["id"].indexOf("CV_DI")&&0!==t.trangThaiHoSoList[t.index]["id"].indexOf("CV_DEN")?a("v-text-field",{attrs:{placeholder:"Tìm kiếm theo tên hồ sơ, mã hồ sơ, tên thủ tục, chủ hồ sơ ...",solo:""},on:{change:function(e){t.keyword=String(t.keyword).trim()},keyup:function(e){return"button"in e||!t._k(e.keyCode,"enter",13,e.key,"Enter")?t.keywordEventChange(e):null}},model:{value:t.keyword,callback:function(e){t.keyword=e},expression:"keyword"}}):t._e()],1),a("div",{staticClass:"flex text-right",staticStyle:{"margin-left":"auto","max-width":"50px"}},[a("v-tooltip",{attrs:{top:""}},[t.advSearchShow||0===t.getCountAdvSearch()?a("v-btn",{staticClass:"my-0 mx-0 mr-2 px-0",attrs:{slot:"activator",icon:""},nativeOn:{click:function(e){return t.showAdvFilter(e)}},slot:"activator"},[a("v-icon",{attrs:{size:"20"}},[t._v("fas fa fa-filter")])],1):t._e(),!t.advSearchShow&&t.getCountAdvSearch()>=1?a("v-badge",{attrs:{slot:"activator",color:"primary",left:""},slot:"activator"},[a("template",{slot:"badge"},[a("span",{staticStyle:{"font-size":"12px"}},[t._v(t._s(t.getCountAdvSearch()))])]),a("v-btn",{staticClass:"my-0 mr-2 px-0",staticStyle:{"margin-left":"-7px"},attrs:{icon:""},nativeOn:{click:function(e){return t.showAdvFilter(e)}}},[a("v-icon",{attrs:{size:"20"}},[t._v("fas fa fa-filter")])],1)],2):t._e(),a("span",[t._v("Tìm kiếm nâng cao")])],1)],1)])]):t._e(),t.advSearchShow?a("tim-kiem-nang-cao",{ref:"advSearch",attrs:{menuInfo:t.trangThaiHoSoList[t.index]}}):t._e(),a("div",{staticClass:"menu_header_list py-2",class:{no__border__bottom:null===t.btnDynamics||void 0===t.btnDynamics||"undefined"===t.btnDynamics||null!==t.btnDynamics&&void 0!==t.btnDynamics&&"undefined"!==t.btnDynamics&&0===t.btnDynamics.length}},[1!==t.originality&&t.trangThaiHoSoList?a("v-layout",{attrs:{wrap:""}},[t.trangThaiHoSoList[t.index]["tableConfig"].hasOwnProperty("searchCongVan")||t.hiddenFilterDomain?t._e():a("v-flex",{staticClass:"pl-2 pr-2 input-group--text-field-box",attrs:{xs12:"",sm3:""}},[a("v-autocomplete",{attrs:{items:t.listLinhVuc,label:"Chọn lĩnh vực","item-text":"displayName","item-value":"domainCode","return-object":"","hide-no-data":"","hide-selected":!0,clearable:Array.isArray(t.listLinhVuc)&&t.listLinhVuc.length>1,box:""},on:{change:t.changeDomain},model:{value:t.linhVucSelected,callback:function(e){t.linhVucSelected=e},expression:"linhVucSelected"}})],1),t.trangThaiHoSoList[t.index]["tableConfig"].hasOwnProperty("searchCongVan")?a("v-flex",{staticClass:"pl-2 pr-2 input-group--text-field-box",attrs:{xs12:"",sm3:""}},[a("v-autocomplete",{attrs:{items:t.listCongVan,label:"Chọn công văn","item-text":"displayName","item-value":"dossierId","return-object":"","hide-no-data":"","hide-selected":!0,clearable:"",box:"",autofocus:1===t.focusSelect},on:{change:t.changeCongVan},model:{value:t.congvanSelected,callback:function(e){t.congvanSelected=e},expression:"congvanSelected"}})],1):t._e(),t.trangThaiHoSoList[t.index]["tableConfig"].hasOwnProperty("searchDonViGuiCongVan")?a("v-flex",{staticClass:"pl-2 pr-2 input-group--text-field-box",attrs:{xs12:"",sm3:""}},[a("v-autocomplete",{attrs:{items:t.listDonviCongVan,label:"Chọn đơn vị gửi công văn","item-text":"itemName","item-value":"itemCode","return-object":"","hide-no-data":"","hide-selected":!0,clearable:"",box:""},on:{change:t.changeDonViGuiCongVan},model:{value:t.donviguiSelected,callback:function(e){t.donviguiSelected=e},expression:"donviguiSelected"}})],1):t._e(),a("v-flex",{class:!t.hiddenFilterDomain||t.trangThaiHoSoList[t.index]["tableConfig"].hasOwnProperty("searchCongVan")||t.trangThaiHoSoList[t.index]["tableConfig"].hasOwnProperty("searchDonViGuiCongVan")?"xs12 sm3 pl-2 pr-2 input-group--text-field-box":"xs12 sm4 pl-2 pr-2 input-group--text-field-box"},[a("v-autocomplete",{attrs:{items:t.listThuTucHanhChinh,label:"Chọn thủ tục hành chính","item-text":"displayName","item-value":"serviceConfigId","return-object":"","hide-no-data":"","hide-selected":!0,clearable:"",box:"",autofocus:2===t.focusSelect},on:{change:t.changeServiceConfigs},model:{value:t.thuTucHanhChinhSelected,callback:function(e){t.thuTucHanhChinhSelected=e},expression:"thuTucHanhChinhSelected"}})],1),t.trangThaiHoSoList?a("v-flex",{class:!t.hiddenFilterDomain||t.trangThaiHoSoList[t.index]["tableConfig"].hasOwnProperty("searchCongVan")||t.trangThaiHoSoList[t.index]["tableConfig"].hasOwnProperty("searchDonViGuiCongVan")?"xs12 sm3 pl-2 pr-2 input-group--text-field-box":"xs12 sm4 pl-2 pr-2 input-group--text-field-box"},[0!==t.trangThaiHoSoList[t.index]["id"].indexOf("CV_DI")&&0!==t.trangThaiHoSoList[t.index]["id"].indexOf("CV_DEN")?a("v-autocomplete",{attrs:{items:t.listDichVu,label:"Chọn dịch vụ","item-text":"optionName","item-value":"processOptionId","return-object":"","hide-no-data":"","hide-selected":!0,box:""},on:{change:t.changeDichVuConfigs},model:{value:t.dichVuSelected,callback:function(e){t.dichVuSelected=e},expression:"dichVuSelected"}}):a("v-menu",{ref:"menuDateCV",attrs:{"close-on-content-click":!0,transition:"scale-transition","offset-y":"","full-width":""},model:{value:t.menuDateCV,callback:function(e){t.menuDateCV=e},expression:"menuDateCV"}},[a("v-text-field",{staticClass:"search-input-appbar input-search",attrs:{slot:"activator",label:"Chọn ngày công văn","append-icon":"event",box:"",clearable:""},on:{blur:function(e){t.dateCv=t.parseDate(t.dateCvFormatted)}},slot:"activator",model:{value:t.dateCvFormatted,callback:function(e){t.dateCvFormatted=e},expression:"dateCvFormatted"}}),a("v-date-picker",{attrs:{locale:"vi","first-day-of-week":1,"no-title":""},on:{input:function(e){t.changeDate()}},model:{value:t.dateCv,callback:function(e){t.dateCv=e},expression:"dateCv"}})],1)],1):t._e(),a("v-flex",{class:!t.hiddenFilterDomain||t.trangThaiHoSoList[t.index]["tableConfig"].hasOwnProperty("searchCongVan")||t.trangThaiHoSoList[t.index]["tableConfig"].hasOwnProperty("searchDonViGuiCongVan")?"xs12 sm3 pl-2 pr-2":"xs12 sm4 pl-2 pr-2"},[t.trangThaiHoSoList?a("div",{staticStyle:{position:"relative"}},[0!==t.trangThaiHoSoList[t.index]["id"].indexOf("CV_DI")&&0!==t.trangThaiHoSoList[t.index]["id"].indexOf("CV_DEN")?a("v-text-field",{attrs:{label:"Nhập mã hồ sơ đầy đủ","append-icon":"search",box:""},on:{keyup:function(e){return"button"in e||!t._k(e.keyCode,"enter",13,e.key,"Enter")?t.changeDossierNoKey(e):null},change:function(e){t.dossierNoKey=String(t.dossierNoKey).trim()},"click:append":t.changeDossierNoKey},model:{value:t.dossierNoKey,callback:function(e){t.dossierNoKey=e},expression:"dossierNoKey"}}):a("v-text-field",{attrs:{label:"Nhập số công văn đầy đủ","append-icon":"search",box:""},on:{keyup:function(e){return"button"in e||!t._k(e.keyCode,"enter",13,e.key,"Enter")?t.changeDossierNoKey(e):null},"click:append":t.changeDossierNoKey},model:{value:t.documentNo,callback:function(e){t.documentNo=e},expression:"documentNo"}})],1):t._e()])],1):t._e(),null!==t.dossierCounting&&void 0!==t.dossierCounting&&t.dossierCounting.length>0&&t.dossierCountingShow?a("div",{staticClass:"py-1 px-1",staticStyle:{background:"#ffffff","border-top":"1px solid lightgrey"}},t._l(t.dossierCounting,(function(e,i){return a("v-chip",{key:i,attrs:{color:e.key===t.status||e.key===t.top?"orange":""},on:{click:function(a){t.changeAdvFilterDataChips(e)}}},["deleted"===e.key?a("v-avatar",{staticStyle:{"background-color":"#da0e0e","border-color":"#da0e0e",color:"#fff"}},[a("v-icon",{attrs:{size:"16"}},[t._v("delete")])],1):a("v-avatar",{staticStyle:{"background-color":"#0b72ba","border-color":"#0b72ba",color:"#fff"}},[t._v(t._s(e.count))]),a("span",{style:e.key===t.status||e.key===t.top?"color: #fff":""},[t._v(t._s(e.title))])],1)})),1):t._e()],1),t.loadingDynamicBtn?a("v-layout",{attrs:{wrap:""}},[a("v-flex",{attrs:{xs12:"",sm6:""}}),a("v-flex",{attrs:{xs12:"",sm2:""}},[a("content-placeholders",{staticClass:"mt-3"},[a("content-placeholders-text",{attrs:{lines:1}})],1)],1),a("v-flex",{attrs:{xs12:"",sm2:""}},[a("content-placeholders",{staticClass:"mt-3"},[a("content-placeholders-text",{attrs:{lines:1}})],1)],1),a("v-flex",{attrs:{xs12:"",sm2:""}},[a("content-placeholders",{staticClass:"mt-3"},[a("content-placeholders-text",{attrs:{lines:1}})],1)],1)],1):t._e(),t.loadingDynamicBtn?t._e():a("div",{staticClass:"btn_wrap_actions"},[t.getUser("Administrator_data")&&"deleted"!==t.currentQueryState["status"]?a("v-btn",{attrs:{color:"red",dark:""},nativeOn:{click:function(e){t.btnActionEvent(null,{form:"UNDO_DOSSIER"},0,!0)}}},[t._v("\n         Undo   \n    ")]):t._e(),t.getUser("Administrator_data")?a("v-menu",{staticStyle:{position:"relative !important"},attrs:{bottom:""}},[a("v-btn",{attrs:{slot:"activator",color:"red",dark:""},slot:"activator"},[t._v("Go to   "),a("v-icon",{attrs:{size:"18"}},[t._v("arrow_drop_down")])],1),a("v-list",[a("v-list-tile",{on:{click:function(e){t.btnActionEvent(t.selectedDoAction[t.selectedDoAction.length-1],{form:"GOTO_DONE"},0,!0)}}},[a("v-list-tile-title",[t._v("Hoàn thành")])],1),a("v-list-tile",{on:{click:function(e){t.btnActionEvent(t.selectedDoAction[t.selectedDoAction.length-1],{form:"GOTO_CANCEL"},0,!0)}}},[a("v-list-tile-title",[t._v("Rút hồ sơ")])],1),a("v-list-tile",{on:{click:function(e){t.btnActionEvent(t.selectedDoAction[t.selectedDoAction.length-1],{form:"GOTO_DENY"},0,!0)}}},[a("v-list-tile-title",[t._v("Từ chối")])],1)],1)],1):t._e(),t.getUser("Administrator_data")&&"deleted"!==t.currentQueryState["status"]?a("v-btn",{attrs:{color:"red",dark:""},nativeOn:{click:function(e){t.btnActionEvent(null,{form:"CHANGE_DATA_DOSSIER"},0,!0)}}},[t._v("\n      Điều chỉnh dữ liệu\n    ")]):t._e(),t.getUser("Administrator")?a("v-btn",{attrs:{color:"red",dark:""},nativeOn:{click:function(e){t.btnActionEvent(null,{form:"DELETE"},0,!0)}}},[t._v("\n      DELETE\n    ")]):t._e(),t.getUser("Administrator_data")&&t.currentQueryState.hasOwnProperty("status")&&"deleted"===t.currentQueryState["status"]?a("v-btn",{attrs:{color:"red",dark:""},nativeOn:{click:function(e){t.btnActionEvent(null,{form:"RESTORE_DOSSIER"},0,!0)}}},[t._v("\n      Khôi phục hồ sơ\n    ")]):t._e(),t._l(t.btnDynamics,(function(e,i){return String(e.form).indexOf("VIEW")<0&&3!==t.menuType&&!t.hideGroupAction||String(e.form).indexOf("VIEW")<0&&3!==t.menuType&&t.hideGroupAction&&"ACTIONS"!==String(e.form)?a("v-btn",{key:i,attrs:{color:"primary",loading:t.loadingAction&&i===t.indexAction,disabled:t.loadingAction&&i===t.indexAction},nativeOn:{click:function(a){t.btnActionEvent(null,e,i,!0)}}},[t._v("\n      "+t._s(e.title)+t._s(e.tiltle)+"\n      "),a("span",{attrs:{slot:"loader"},slot:"loader"},[t._v("Loading...")])]):t._e()}))],2),a("v-data-table",{staticClass:"table-landing table-bordered",attrs:{id:"table-dossier",headers:t.headers,items:t.hosoDatas,"total-items":t.hosoDatasTotal,"item-key":"dossierId","select-all":3!==t.menuType&&1!==t.originality&&t.btnDynamics.length>0||t.getUser("Administrator")||t.getUser("Administrator_data"),"no-data-text":"Không có hồ sơ nào","hide-actions":""},scopedSlots:t._u([{key:"headers",fn:function(e){return[a("tr",[3!==t.menuType&&1!==t.originality&&t.btnDynamics.length>0||t.getUser("Administrator")||t.getUser("Administrator_data")?a("th",{staticClass:"v_data_table_check_all",attrs:{width:"32px"}},[t.getUser("Administrator")?a("v-checkbox",{attrs:{"input-value":e.all,indeterminate:e.indeterminate,primary:"","hide-details":""},nativeOn:{click:function(e){return t.toggleAll(e)}}}):a("v-checkbox",{attrs:{"input-value":e.all,indeterminate:e.indeterminate,disabled:!t.thuTucHanhChinhSelected&&(!t.doActionGroup||!t.doActionGroupKhacThuTuc)||t.thuTucHanhChinhSelected&&"0"===t.thuTucHanhChinhSelected.serviceConfigId&&(!t.doActionGroup||!t.doActionGroupKhacThuTuc)||t.thuTucHanhChinhSelected&&""===t.thuTucHanhChinhSelected.serviceConfigId&&(!t.doActionGroup||!t.doActionGroupKhacThuTuc),primary:"","hide-details":""},nativeOn:{click:function(e){return t.toggleAll(e)}}})],1):t._e(),t._l(e.headers,(function(e){return t.isMobile?t._e():a("th",{key:e.text,class:e["class"]?e["class"]:"",style:e["sortable"]?"cursor: pointer":"",attrs:{width:e["width"]?e["width"]+"px":""},on:{click:function(a){"true"===String(e["sortable"])&&t.sortAction(e["value"])}}},[a("v-tooltip",{attrs:{bottom:""}},[a("span",{attrs:{slot:"activator"},slot:"activator"},[t._v(t._s(e.text))]),a("span",[t._v(t._s(e.text))])]),e["sortable"]&&e["value"]===t.sortValue?a("v-icon",{staticClass:"ml-2",style:e["sortable"]&&"false"===t.orderSort?"transform: rotate(180deg)":"",attrs:{size:"16"}},[t._v("arrow_downward")]):t._e(),e["sortable"]&&e["value"]!==t.sortValue?a("v-icon",{staticClass:"ml-2",staticStyle:{opacity:"0.5"},attrs:{size:"16"}},[t._v("arrow_downward")]):t._e()],1)})),t.isMobile?a("th",{attrs:{width:"30px"}},[a("span",[t._v("STT")])]):t._e(),t.isMobile?a("th",[a("span",[t._v("Tên thủ tục")])]):t._e(),t.isMobile?a("th",{attrs:{width:"30px"}}):t._e()],2)]}},{key:"items",fn:function(e){return[a("tr",[3!==t.menuType&&1!==t.originality&&t.btnDynamics.length>0||t.getUser("Administrator")||t.getUser("Administrator_data")?a("td",{staticClass:"v_data_table_check_all",attrs:{width:"32px"}},[t.getUser("Administrator")||t.getUser("Administrator_data")?a("v-checkbox",{attrs:{primary:"","hide-details":"",color:"primary"},on:{change:t.changeSelected},model:{value:e.selected,callback:function(a){t.$set(e,"selected",a)},expression:"props.selected"}}):a("v-checkbox",{attrs:{disabled:0===e.item["assigned"]&&(!t.doActionGroup||!t.doActionGroupKhacThuTuc)||!t.thuTucHanhChinhSelected&&!t.doActionGroupKhacThuTuc||t.thuTucHanhChinhSelected&&"0"===t.thuTucHanhChinhSelected.serviceConfigId&&!t.doActionGroupKhacThuTuc||t.thuTucHanhChinhSelected&&""===t.thuTucHanhChinhSelected.serviceConfigId&&!t.doActionGroupKhacThuTuc,primary:"","hide-details":"",color:"primary"},on:{change:t.changeSelected},model:{value:e.selected,callback:function(a){t.$set(e,"selected",a)},expression:"props.selected"}})],1):t._e(),a("td",{staticClass:"text-xs-center px-0 py-0"},[t.loadingTable?a("content-placeholders",[a("content-placeholders-text",{attrs:{lines:1}})],1):a("span",{class:{no_acction__event:!e.item["permission"]},staticStyle:{cursor:"pointer"},on:{click:function(a){t.viewDetail(e.item,e.index)}}},[t._v("\n            "+t._s(t.hosoDatasPage*t.limitRecord-t.limitRecord+e.index+1)+"\n          ")])],1),t._l(t.headers,(function(i,o){return!t.isMobile&&i.hasOwnProperty("value")?a("td",{key:o+"_"+e.item.dossierId,class:i["class_column"]},[t.loadingTable?a("content-placeholders",[a("content-placeholders-text",{attrs:{lines:1}})],1):a("div",{class:{no_acction__event:!e.item["permission"]},staticStyle:{cursor:"pointer","word-break":"break-word"},on:{click:function(a){t.viewDetail(e.item,e.index)}}},[i.hasOwnProperty("layout_view")?a("template-rendering",{attrs:{item:e.item,layout_view:i.layout_view}}):a("span",[t._v("\n              "+t._s(e.item[i.value])+"\n            ")])],1)],1):t._e()})),t.isMobile?a("td",{staticClass:"px-1 py-0"},[t.loadingTable?a("content-placeholders",[a("content-placeholders-text",{attrs:{lines:1}})],1):a("div",{class:{no_acction__event:!e.item["permission"]},staticStyle:{cursor:"pointer","word-break":"break-word"},on:{click:function(a){t.viewDetail(e.item,e.index)}}},[e.item.dossierNo?a("span",{staticClass:"primary--text"},[t._v(" "+t._s(e.item.dossierNo)+" - ")]):t._e(),a("span",{staticClass:"primary--text"},[t._v(" "+t._s(e.item.online?"Hồ sơ trực tuyến":"Hồ sơ một cửa"))]),a("br"),a("span",{staticClass:"primary--text text-bold"},[t._v(" "+t._s(e.item.serviceName)+" ")]),a("br"),a("span",{staticClass:"text-bold"},[t._v("Chủ hồ sơ: ")]),a("span",[t._v(t._s(e.item.applicantName))]),a("br"),a("span",{staticClass:"text-bold"},[t._v("Tiếp nhận: ")]),a("span",[t._v(t._s(e.item.receiveDate))]),a("br"),a("span",{staticClass:"text-bold"},[t._v("Hẹn trả: ")]),a("span",[t._v(t._s(e.item.dueDate))]),a("br"),e.item.dossierOverdue?a("span",{class:e.item.dossierOverdue.indexOf("Quá hạn")>=0?"red--text":"green--text"},[t._v(t._s(e.item.dossierOverdue))]):t._e()])],1):t._e(),t.hideAction?t._e():a("td",{staticClass:"text-xs-center px-0 py-0"},[t.loadingTable?a("content-placeholders",[a("content-placeholders-text",{attrs:{lines:1}})],1):t._e(),t.loadingTable||null===t.btnDynamics&&void 0===t.btnDynamics&&"undefined"===t.btnDynamics&&null===t.btnDossierDynamics&&void 0===t.btnDossierDynamics&&"undefined"===t.btnDossierDynamics?t._e():a("v-menu",{attrs:{left:"","nudge-left":50,"nudge-top":15}},[a("v-btn",{staticClass:"mx-0 my-0",attrs:{slot:"activator",icon:""},on:{click:function(a){t.processPullBtnDynamics(e.item)}},slot:"activator"},[a("v-icon",[t._v("filter_list")])],1),a("v-list",[t._l(t.btnDynamics,(function(i,o){return 3===t.menuType?a("v-list-tile",{key:o+"_menu_"+e.item.dossierId,attrs:{disabled:-1===String(e.item["permission"]).indexOf("write")},on:{click:function(a){t.btnActionEvent(e.item,i,e.index,!1)}}},[a("v-list-tile-title",[t._v(t._s(i.title)+t._s(i.tiltle))])],1):t._e()})),t._l(t.btnDossierDynamics,(function(i,o){return(i["enable"]>0||"special"===i["autoEvent"])&&3!==t.menuType?a("v-list-tile",{key:o+"_"+e.item.dossierId,attrs:{disabled:2===i["enable"]||-1===String(e.item["permission"]).indexOf("write")},on:{click:function(a){t.processPullBtnDetail(e.item,i,e.index,o)}}},[a("v-list-tile-title",[t._v(t._s(i.actionName))])],1):t._e()})),t._l(t.btnStepsDynamics,(function(i,o){return-1!==String(e.item["permission"]).indexOf("write")&&"NEW"!==String(i.form)&&3!==t.menuType&&(!i.hasOwnProperty("roleCode")||i.hasOwnProperty("roleCode")&&t.getUser(i.roleCode))?a("v-list-tile",{key:o+"_"+e.item.dossierId+"_"+e.item.dossierId,on:{click:function(a){t.btnActionEvent(e.item,i,t.index,!1)}}},[a("v-list-tile-title",[t._v(t._s(i.title))])],1):t._e()})),0!==t.trangThaiHoSoList[t.index]["id"].indexOf("CV_DI")&&0===t.trangThaiHoSoList[t.index]["id"].indexOf("CV_DEN")||!e.item.metaData||!t.getMetaData(e.item).hasOwnProperty("congvandagui")||t.getMetaData(e.item)["congvandagui"]?t._e():a("v-list-tile",{on:{click:function(a){t.deleteCongVan(e.item,e.index)}}},[t._v("\n                Xóa công văn\n              ")]),a("v-list-tile",{attrs:{disabled:!e.item["permission"]},on:{click:function(a){t.viewDetail(e.item,e.index)}}},[t._v("\n                Xem chi tiết\n              ")])],2)],1)],1)],2)]}}]),model:{value:t.selected,callback:function(e){t.selected=e},expression:"selected"}}),a("div",{staticClass:"text-xs-right layout wrap",staticStyle:{position:"relative"}},[a("div",{staticClass:"flex pagging-table px-2",class:t.isMobile?"mt-2":""},[a("tiny-pagination",{attrs:{total:t.hosoDatasTotal,page:t.hosoDatasPage,numberPerPage:t.limitRecord,showLimit:!0,"custom-class":"custom-tiny-class",limits:t.limits},on:{"tiny:change-page":t.paggingData}})],1)]),a("v-dialog",{attrs:{"max-width":"700",transition:"fade-transition",persistent:""},model:{value:t.dialogAction,callback:function(e){t.dialogAction=e},expression:"dialogAction"}},[a("v-card",[a("v-form",{ref:"form1",attrs:{"lazy-validation":""},model:{value:t.valid,callback:function(e){t.valid=e},expression:"valid"}},[a("v-toolbar",{attrs:{dark:"",color:"primary"}},[a("v-toolbar-title",[t._v(t._s(t.itemAction.title)+t._s(t.itemAction.tiltle))]),a("v-spacer"),a("v-btn",{attrs:{icon:"",dark:""},nativeOn:{click:function(e){t.dialogAction=!1}}},[a("v-icon",[t._v("close")])],1)],1),a("v-card-text",{staticClass:"pb-0 pt-4"},[a("v-layout",{attrs:{wrap:""}},[a("v-flex",{staticClass:"px-2 pb-3",attrs:{xs12:""}},[a("v-autocomplete",{attrs:{label:"Thủ tục:",items:t.listThuTucHanhChinh,rules:[function(t){return!!t||"Thủ tục hành chính bắt buộc phải chọn"}],required:"",placeholder:"Chọn thủ tục hành chính","item-text":"displayName","item-value":"serviceConfigId","return-object":"","hide-no-data":"","hide-selected":!0,box:""},on:{change:t.changeServiceConfigs},model:{value:t.thuTucHanhChinhSelected,callback:function(e){t.thuTucHanhChinhSelected=e},expression:"thuTucHanhChinhSelected"}})],1),a("v-flex",{staticClass:"px-2",attrs:{xs12:""}},[t.thuTucHanhChinhSelected&&t.listDichVu.length>1?a("v-autocomplete",{attrs:{items:t.listDichVu,label:"Dịch vụ:",placeholder:"Chọn dịch vụ","item-text":"optionName","item-value":"processOptionId","return-object":"","hide-no-data":"","hide-selected":!0,rules:[function(t){return!!t||"Dịch vụ bắt buộc phải chọn"}],required:"",box:""},on:{change:t.changeDichVuConfigs},model:{value:t.dichVuSelected,callback:function(e){t.dichVuSelected=e},expression:"dichVuSelected"}}):t._e()],1)],1)],1),a("v-card-actions",{staticClass:"mx-3"},[a("v-spacer"),a("v-btn",{attrs:{color:"red darken-3",flat:"flat",loading:t.loadingAction,disabled:t.loadingAction},nativeOn:{click:function(e){t.dialogAction=!1}}},[a("v-icon",[t._v("reply")]),t._v(" \n            Quay lại\n            "),a("span",{attrs:{slot:"loader"},slot:"loader"},[t._v("Loading...")])],1),a("v-btn",{attrs:{color:"primary",flat:"flat",loading:t.loadingAction,disabled:t.loadingAction},nativeOn:{click:function(e){t.doSubmitDialogAction(t.itemAction)}}},[a("v-icon",[t._v("save")]),t._v(" \n            Đồng ý\n            "),a("span",{attrs:{slot:"loader"},slot:"loader"},[t._v("Loading...")])],1)],1)],1)],1)],1),a("v-dialog",{attrs:{"max-width":"1000",transition:"fade-transition",persistent:""},model:{value:t.dialogActionProcess,callback:function(e){t.dialogActionProcess=e},expression:"dialogActionProcess"}},[a("v-card",[a("v-form",{ref:"form",attrs:{"lazy-validation":""},model:{value:t.validProcess,callback:function(e){t.validProcess=e},expression:"validProcess"}},[a("v-toolbar",{attrs:{flat:"",dark:"",color:"primary"}},[a("v-toolbar-title",[t._v(t._s(t.itemAction.actionName))]),a("v-spacer"),a("v-btn",{attrs:{icon:"",dark:""},nativeOn:{click:function(e){t.dialogActionProcess=!1}}},[a("v-icon",[t._v("close")])],1)],1),a("v-card-text",{staticClass:"py-0 px-0"},[a("v-layout",{attrs:{wrap:""}},[t.dialogActionProcess&&t.showPhanCongNguoiThucHien?a("phan-cong",{attrs:{type:t.type_assign},model:{value:t.assign_items,callback:function(e){t.assign_items=e},expression:"assign_items"}}):t._e(),t.dialogActionProcess&&t.showYkienCanBoThucHien?a("y-kien-can-bo",{ref:"ykiencanbo",attrs:{user_note:t.userNote}}):t._e()],1)],1),a("v-card-actions",[a("v-spacer"),a("v-btn",{attrs:{color:"primary",loading:t.loadingActionProcess,disabled:t.loadingActionProcess},nativeOn:{click:function(e){t.submitFormXuLy(t.dossierItemDialogPick,t.itemDialogPick,t.resultDialogPick,t.indexDialogPick,!1)}}},[a("v-icon",[t._v("save")]),t._v(" \n          Xác nhận\n          "),a("span",{attrs:{slot:"loader"},slot:"loader"},[t._v("Loading...")])],1),a("v-btn",{attrs:{color:"red",dark:"",loading:t.loadingActionProcess,disabled:t.loadingActionProcess},nativeOn:{click:function(e){t.dialogActionProcess=!1}}},[a("v-icon",[t._v("reply")]),t._v(" \n          Quay lại\n          "),a("span",{attrs:{slot:"loader"},slot:"loader"},[t._v("Loading...")])],1)],1)],1)],1)],1),a("v-dialog",{attrs:{"max-width":"1000",transition:"fade-transition"},model:{value:t.dialogPDF,callback:function(e){t.dialogPDF=e},expression:"dialogPDF"}},[a("v-card",[a("v-toolbar",{attrs:{flat:"",dark:"",color:"primary"}},[a("v-toolbar-title",[t._v(t._s(t.itemAction.title)+t._s(t.itemAction.tiltle))]),a("v-spacer"),a("v-btn",{attrs:{icon:"",dark:""},nativeOn:{click:function(e){t.dialogPDF=!1}}},[a("v-icon",[t._v("close")])],1)],1),t.dialogPDFLoading?a("div",{staticStyle:{"min-height":"600px","text-align":"center",margin:"auto",padding:"25%"}},[a("v-progress-circular",{attrs:{size:100,width:1,color:"primary",indeterminate:""}})],1):t._e(),a("iframe",{directives:[{name:"show",rawName:"v-show",value:!t.dialogPDFLoading,expression:"!dialogPDFLoading"}],staticStyle:{overflow:"auto","min-height":"600px"},attrs:{id:"dialogPDFPreview",src:"",type:"application/pdf",width:"100%",height:"100%",frameborder:"0"}})],1)],1),a("v-dialog",{attrs:{scrollable:"",persistent:"","max-width":"700px"},model:{value:t.dialog_statusAction,callback:function(e){t.dialog_statusAction=e},expression:"dialog_statusAction"}},[a("v-card",[a("v-toolbar",{attrs:{flat:"",dark:"",color:"primary"}},[a("v-toolbar-title",[t._v("Trạng thái xử lý")]),a("v-spacer"),a("v-btn",{attrs:{icon:"",dark:""},nativeOn:{click:function(e){return t.closeDialogStatusAction(e)}}},[a("v-icon",[t._v("close")])],1)],1),a("v-card-text",{staticStyle:{"max-height":"350px"}},t._l(t.selected,(function(e,i){return a("div",{key:e.dossierIdCTN},[a("v-layout",{staticClass:"py-1 align-center row-list-style",staticStyle:{"border-bottom":"1px solid #ddd",position:"relative"},attrs:{wrap:""}},[a("v-flex",{attrs:{xs11:""}},[a("span",{staticClass:"text-bold",staticStyle:{position:"absolute"}},[t._v(t._s(i+1)+".")]),a("div",{staticClass:"ml-4"},[a("span",{staticClass:"text-bold"},[t._v(t._s(e.dossierNo))]),t._v(" - "+t._s(e.serviceName))])]),a("v-flex",{staticClass:"text-right",attrs:{xs1:""}},[e.statusAction?a("v-tooltip",{attrs:{top:""}},[a("v-icon",{attrs:{slot:"activator",size:"20",color:"primary"},slot:"activator"},[t._v("\n                  check\n                ")]),a("span",[t._v("Thành công")])],1):a("v-tooltip",{attrs:{top:""}},[a("v-icon",{attrs:{slot:"activator",size:"20",color:"red darken-3"},slot:"activator"},[t._v("\n                  block\n                ")]),a("span",[t._v("Thất bại")])],1)],1)],1)],1)})),0),a("v-card-actions",[a("v-spacer"),a("v-btn",{attrs:{color:"primary",loading:t.loadingAction,disabled:t.loadingAction},nativeOn:{click:function(e){return t.resend(e)}}},[a("v-icon",{attrs:{size:"20"}},[t._v("refresh")]),t._v(" \n          Thử lại\n          "),a("span",{attrs:{slot:"loader"},slot:"loader"},[t._v("Loading...")])],1),a("v-btn",{attrs:{color:"red",dark:"",loading:t.loadingAction,disabled:t.loadingAction},nativeOn:{click:function(e){return t.closeDialogStatusAction(e)}}},[a("v-icon",[t._v("undo")]),t._v(" \n          Thoát\n          "),a("span",{attrs:{slot:"loader"},slot:"loader"},[t._v("Loading...")])],1)],1)],1)],1),a("v-dialog",{attrs:{scrollable:"",persistent:"","max-width":"700px"},model:{value:t.dialog_printGuide,callback:function(e){t.dialog_printGuide=e},expression:"dialog_printGuide"}},[a("v-card",[a("v-toolbar",{attrs:{flat:"",dark:"",color:"primary"}},[a("v-toolbar-title",[t._v("Thông tin phiếu hướng dẫn hoàn thiện hồ sơ")]),a("v-spacer"),a("v-btn",{attrs:{icon:"",dark:""},nativeOn:{click:function(e){t.dialog_printGuide=!1}}},[a("v-icon",[t._v("close")])],1)],1),a("v-card-text",[a("v-form",{ref:"formGuide",attrs:{"lazy-validation":""},model:{value:t.validGuide,callback:function(e){t.validGuide=e},expression:"validGuide"}},[a("v-layout",{staticClass:"py-1 align-center row-list-style",attrs:{wrap:""}},[a("v-flex",{staticClass:"px-2",attrs:{xs12:""}},[a("div",{staticClass:"my-2 text-bold"},[t._v("Thủ tục hành chính "),a("span",{staticStyle:{color:"red"}},[t._v("*")]),t._v(":")]),a("v-autocomplete",{staticClass:"input-group--text-field-box",attrs:{box:"",items:t.listThuTucHanhChinh,placeholder:"Chọn thủ tục hành chính","item-text":"displayName","item-value":"serviceConfigId","return-object":"","hide-no-data":"","hide-selected":!0,rules:[function(t){return!!t||"Thủ tục bắt buộc phải chọn."}],required:""},on:{change:t.changeServiceConfigsGuide},model:{value:t.thuTucHanhChinhSelectedGuide,callback:function(e){t.thuTucHanhChinhSelectedGuide=e},expression:"thuTucHanhChinhSelectedGuide"}})],1),a("v-flex",{staticClass:"px-2",attrs:{xs12:""}},[a("div",{staticClass:"my-2 text-bold"},[t._v("Dịch vụ "),a("span",{staticStyle:{color:"red"}},[t._v("*")]),t._v(":")]),a("v-autocomplete",{staticClass:"input-group--text-field-box",attrs:{box:"",items:t.listDichVuGuide,placeholder:"Chọn dịch vụ","item-text":"optionName","item-value":"processOptionId","return-object":"","hide-no-data":"","hide-selected":!0,rules:[function(t){return!!t||"Dịch vụ bắt buộc phải chọn."}],required:""},model:{value:t.dichVuSelectedGuide,callback:function(e){t.dichVuSelectedGuide=e},expression:"dichVuSelectedGuide"}})],1),a("v-flex",{staticClass:"px-2",staticStyle:{position:"relative"},attrs:{xs12:""}},[a("div",{staticClass:"my-2 text-bold"},[t._v("Tên người làm thủ tục "),a("span",{staticStyle:{color:"red"}},[t._v("*")]),t._v(":")]),a("v-text-field",{attrs:{placeholder:"Nhập tên người làm thủ tục",box:"",rules:[t.rules.required,t.rules.varchar500],required:""},model:{value:t.applicantNameGuide,callback:function(e){t.applicantNameGuide=e},expression:"applicantNameGuide"}}),a("v-radio-group",{staticClass:"my-0",staticStyle:{position:"absolute",right:"0",top:"0"},attrs:{row:""},model:{value:t.applicantTypeGuide,callback:function(e){t.applicantTypeGuide=e},expression:"applicantTypeGuide"}},[a("v-radio",{attrs:{label:"Công dân",value:!0}}),a("v-radio",{attrs:{label:"Tổ chức, doanh nghiệp",value:!1}})],1)],1),a("v-flex",{staticClass:"px-2",attrs:{xs12:""}},[a("div",{staticClass:"my-2 text-bold"},[t._v("Địa chỉ:")]),a("v-text-field",{attrs:{placeholder:"Nhập địa chỉ",box:"",rules:[t.rules.varchar500]},model:{value:t.applicantAddressGuide,callback:function(e){t.applicantAddressGuide=e},expression:"applicantAddressGuide"}})],1),a("v-flex",{staticClass:"px-2",attrs:{xs12:""}},[a("div",{staticClass:"my-2 text-bold"},[t._v("Thư điện tử:")]),a("v-text-field",{attrs:{box:"",placeholder:"Nhập thư điện tử",rules:[t.rules.varchar100]},model:{value:t.applicantEmailGuide,callback:function(e){t.applicantEmailGuide=e},expression:"applicantEmailGuide"}})],1),a("v-flex",{staticClass:"px-2",attrs:{xs12:""}},[a("div",{staticClass:"my-2 text-bold"},[t._v("Số điện thoại:")]),a("v-text-field",{attrs:{box:"",placeholder:"Nhập số điện thoại",rules:[t.rules.varchar100]},model:{value:t.applicantTelNoGuide,callback:function(e){t.applicantTelNoGuide=e},expression:"applicantTelNoGuide"}})],1),a("v-flex",{staticClass:"px-2",attrs:{xs12:""}},[a("div",{staticClass:"my-2 text-bold"},[t._v("Thông tin thành phần hồ sơ:")]),a("v-data-table",{staticClass:"table-landing table-bordered",staticStyle:{"border-left":"1px solid #dedede"},attrs:{headers:t.headersTphsGuide,items:t.tphsGuide,"hide-actions":""},scopedSlots:t._u([{key:"items",fn:function(e){return[a("tr",{class:{active:e.index%2==1},staticStyle:{cursor:"pointer"}},[a("td",{staticClass:"text-xs-center",staticStyle:{width:"50px"}},[a("div",[a("span",[t._v(t._s(e.index+1))]),a("br")])]),a("td",{staticClass:"text-xs-left"},[a("div",[a("span",[t._v(t._s(e.item.partName))])])]),a("td",{staticClass:"text-xs-center",staticStyle:{width:"50px"}},[a("div",[a("v-checkbox",{staticStyle:{display:"inline-block",width:"25px"},attrs:{primary:"","hide-details":"",color:"primary"},model:{value:e.item.fileMark,callback:function(a){t.$set(e.item,"fileMark",a)},expression:"props.item.fileMark"}})],1)])])]}}])})],1),a("v-flex",{staticClass:"px-2",attrs:{xs12:""}},[a("div",{staticClass:"my-2 text-bold"},[t._v("Ghi chú:")]),a("v-textarea",{staticClass:"py-0",attrs:{box:"",rows:"3",rules:[t.rules.varchar5000]},model:{value:t.applicantNoteGuide,callback:function(e){t.applicantNoteGuide=e},expression:"applicantNoteGuide"}})],1)],1)],1)],1),a("v-card-actions",[a("v-spacer"),a("v-btn",{staticClass:"mr-3",attrs:{color:"primary",loading:t.loadingAction,disabled:t.loadingAction},on:{click:function(e){t.doGuiding("doc")}}},[a("v-icon",[t._v("save")]),t._v("  \n          Lưu phiếu hướng dẫn\n          "),a("span",{attrs:{slot:"loader"},slot:"loader"},[t._v("Loading...")])],1),a("v-btn",{staticClass:"mr-3",attrs:{color:"primary",loading:t.loadingAction,disabled:t.loadingAction},on:{click:function(e){t.doGuiding("pdf")}}},[a("v-icon",[t._v("print")]),t._v("  \n          In phiếu hướng dẫn\n          "),a("span",{attrs:{slot:"loader"},slot:"loader"},[t._v("Loading...")])],1)],1)],1)],1),a("v-dialog",{attrs:{scrollable:"",persistent:"","max-width":"700px"},model:{value:t.dialog_denied,callback:function(e){t.dialog_denied=e},expression:"dialog_denied"}},[a("v-card",[a("v-toolbar",{attrs:{flat:"",dark:"",color:"primary"}},[a("v-toolbar-title",[t._v("Thông tin phiếu từ chối tiếp nhận")]),a("v-spacer"),a("v-btn",{attrs:{icon:"",dark:""},nativeOn:{click:function(e){t.dialog_denied=!1}}},[a("v-icon",[t._v("close")])],1)],1),a("v-card-text",[a("v-form",{ref:"formDenied",attrs:{"lazy-validation":""},model:{value:t.validDenied,callback:function(e){t.validDenied=e},expression:"validDenied"}},[a("v-layout",{staticClass:"py-1 align-center row-list-style",attrs:{wrap:""}},[a("v-flex",{staticClass:"px-2",attrs:{xs12:""}},[a("div",{staticClass:"my-2 text-bold"},[t._v("Thủ tục hành chính "),a("span",{staticStyle:{color:"red"}},[t._v("*")]),t._v(":")]),a("v-autocomplete",{staticClass:"input-group--text-field-box",attrs:{box:"",items:t.listThuTucHanhChinh,placeholder:"Chọn thủ tục hành chính","item-text":"displayName","item-value":"serviceConfigId","return-object":"","hide-no-data":"","hide-selected":!0,rules:[function(t){return!!t||"Thủ tục bắt buộc phải chọn."}],required:""},on:{change:t.changeServiceConfigsGuide},model:{value:t.thuTucHanhChinhSelectedGuide,callback:function(e){t.thuTucHanhChinhSelectedGuide=e},expression:"thuTucHanhChinhSelectedGuide"}})],1),a("v-flex",{staticClass:"px-2",attrs:{xs12:""}},[a("div",{staticClass:"my-2 text-bold"},[t._v("Dịch vụ "),a("span",{staticStyle:{color:"red"}},[t._v("*")]),t._v(":")]),a("v-autocomplete",{staticClass:"input-group--text-field-box",attrs:{box:"",items:t.listDichVuGuide,placeholder:"Chọn dịch vụ","item-text":"optionName","item-value":"processOptionId","return-object":"","hide-no-data":"","hide-selected":!0,rules:[function(t){return!!t||"Dịch vụ bắt buộc phải chọn."}],required:""},model:{value:t.dichVuSelectedGuide,callback:function(e){t.dichVuSelectedGuide=e},expression:"dichVuSelectedGuide"}})],1),a("v-flex",{staticClass:"px-2",staticStyle:{position:"relative"},attrs:{xs12:""}},[a("div",{staticClass:"my-2 text-bold"},[t._v("Tên người làm thủ tục "),a("span",{staticStyle:{color:"red"}},[t._v("*")]),t._v(":")]),a("v-text-field",{attrs:{placeholder:"Nhập tên người làm thủ tục",box:"",rules:[t.rules.required,t.rules.varchar500],required:""},model:{value:t.applicantNameGuide,callback:function(e){t.applicantNameGuide=e},expression:"applicantNameGuide"}}),a("v-radio-group",{staticClass:"my-0",staticStyle:{position:"absolute",right:"0",top:"0"},attrs:{row:""},model:{value:t.applicantTypeGuide,callback:function(e){t.applicantTypeGuide=e},expression:"applicantTypeGuide"}},[a("v-radio",{attrs:{label:"Công dân",value:!0}}),a("v-radio",{attrs:{label:"Tổ chức, doanh nghiệp",value:!1}})],1)],1),a("v-flex",{staticClass:"px-2",attrs:{xs12:""}},[a("div",{staticClass:"my-2 text-bold"},[t._v("Địa chỉ:")]),a("v-text-field",{attrs:{placeholder:"Nhập địa chỉ",box:"",rules:[t.rules.varchar500]},model:{value:t.applicantAddressGuide,callback:function(e){t.applicantAddressGuide=e},expression:"applicantAddressGuide"}})],1),a("v-flex",{staticClass:"px-2",attrs:{xs12:""}},[a("div",{staticClass:"my-2 text-bold"},[t._v("Thư điện tử:")]),a("v-text-field",{attrs:{box:"",placeholder:"Nhập thư điện tử",rules:[t.rules.varchar100]},model:{value:t.applicantEmailGuide,callback:function(e){t.applicantEmailGuide=e},expression:"applicantEmailGuide"}})],1),a("v-flex",{staticClass:"px-2",attrs:{xs12:""}},[a("div",{staticClass:"my-2 text-bold"},[t._v("Số điện thoại:")]),a("v-text-field",{attrs:{box:"",rules:[t.rules.varchar100]},model:{value:t.applicantTelNoGuide,callback:function(e){t.applicantTelNoGuide=e},expression:"applicantTelNoGuide"}})],1),a("v-flex",{staticClass:"px-2",attrs:{xs12:""}},[a("div",{staticClass:"my-2 text-bold"},[t._v("Lý do từ chối tiếp nhận:")]),a("v-textarea",{staticClass:"py-0",attrs:{box:"",rows:"3",rules:[t.rules.varchar5000]},model:{value:t.applicantNoteGuide,callback:function(e){t.applicantNoteGuide=e},expression:"applicantNoteGuide"}})],1)],1)],1)],1),a("v-card-actions",[a("v-spacer"),a("v-btn",{staticClass:"mr-3",attrs:{color:"primary",loading:t.loadingAction,disabled:t.loadingAction},on:{click:function(e){t.doDenied("doc")}}},[a("v-icon",[t._v("save")]),t._v("  \n          Lưu phiếu từ chối\n          "),a("span",{attrs:{slot:"loader"},slot:"loader"},[t._v("Loading...")])],1),a("v-btn",{staticClass:"mr-3",attrs:{color:"primary",loading:t.loadingAction,disabled:t.loadingAction},on:{click:function(e){t.doDenied("pdf")}}},[a("v-icon",[t._v("print")]),t._v("  \n          In phiếu từ chối\n          "),a("span",{attrs:{slot:"loader"},slot:"loader"},[t._v("Loading...")])],1)],1)],1)],1),a("v-dialog",{attrs:{scrollable:"",persistent:"","max-width":"700px"},model:{value:t.dialog_extraForm,callback:function(e){t.dialog_extraForm=e},expression:"dialog_extraForm"}},[a("v-card",[a("v-toolbar",{attrs:{flat:"",dark:"",color:"primary"}},[a("v-toolbar-title",[t._v("\n          Điều chỉnh dữ liệu mã hồ sơ: "+t._s(t.selectedDoAction.length>0?t.selectedDoAction[t.selectedDoAction.length-1]["dossierNo"]:"")+"\n        ")]),a("v-spacer"),a("v-btn",{attrs:{icon:"",dark:""},nativeOn:{click:function(e){t.dialog_extraForm=!1}}},[a("v-icon",[t._v("close")])],1)],1),a("v-card-text",{staticClass:"px-0",attrs:{flat:""}},[a("form-bo-sung-thong-tin",{ref:"formBoSungThongTinNgan",attrs:{dossier_id:t.dossierIdSelected,action_id:t.actionId,type:"dieuchinhdulieu"}})],1),a("v-card-actions",[a("v-spacer"),a("v-btn",{staticClass:"mr-3",attrs:{color:"primary"},on:{click:function(e){t.doChangeDossierExtraForm()}}},[a("v-icon",[t._v("save")]),t._v("  \n          Xác nhận\n        ")],1),a("v-btn",{staticClass:"mr-3",attrs:{color:"primary"},on:{click:function(e){t.dialog_extraForm=!1}}},[a("v-icon",[t._v("clear")]),t._v("  \n          Hủy\n        ")],1)],1)],1)],1)],1)},M=[],V=a("854a"),L=a.n(V),H=function(){var t=this,e=t.$createElement,a=t._self._c||e;return null!==t.layout_view&&void 0!==t.layout_view&&"undefined"!==t.layout_view?a("my-dynamic-view"):t._e()},$=[],R=a("6611"),G=R["a"],q=Object(p["a"])(G,H,$,!1,null,null,null),U=q.exports,B=a("e722"),K=a("7121"),W=a("87c1"),z=a("bbd0"),j=a("d80f"),Q=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"adv_search px-2 mt-2 mx-2",staticStyle:{background:"#eeeeee"}},[a("div",{staticClass:"searchAdvanced-content py-2"},[a("v-layout",{attrs:{wrap:""}},[t.searchAdvanceConfigDefault.status.visible?a("v-flex",{class:t.searchAdvanceConfigDefault.status.class},[a("div",[a("div",{staticClass:"d-inline-block text-bold",staticStyle:{"font-weight":"450",width:"130px"}},[t._v("Trạng thái:")]),a("v-autocomplete",{staticClass:"select-search d-inline-block",staticStyle:{width:"calc(100% - 130px)"},attrs:{items:t.statusItems,"item-text":"itemName","item-value":"itemCode","hide-details":"","hide-no-data":"",solo:"",flat:"",height:"32","min-height":"32",clearable:""},model:{value:t.status,callback:function(e){t.status=e},expression:"status"}})],1)]):t._e(),t.searchAdvanceConfigDefault.substatus.visible?a("v-flex",{class:t.searchAdvanceConfigDefault.substatus.class},[a("div",[a("div",{staticClass:"d-inline-block text-bold",staticStyle:{"font-weight":"450",width:"130px"}},[t._v("Trạng thái con:")]),a("v-autocomplete",{staticClass:"select-search d-inline-block",staticStyle:{width:"calc(100% - 130px)"},attrs:{items:t.substatusItems,"item-text":"itemName","item-value":"itemCode","hide-details":"","hide-no-data":"",solo:"",flat:"",height:"32","min-height":"32",clearable:""},model:{value:t.substatus,callback:function(e){t.substatus=e},expression:"substatus"}})],1)]):t._e(),t.searchAdvanceConfigDefault.top.visible?a("v-flex",{class:t.searchAdvanceConfigDefault.top.class},[a("div",[a("div",{staticClass:"d-inline-block text-bold",staticStyle:{"font-weight":"450",width:"130px"}},[t._v("Theo tình trạng:")]),a("v-autocomplete",{staticClass:"select-search d-inline-block",staticStyle:{width:"calc(100% - 130px)"},attrs:{items:t.topItems,"item-text":"text","item-value":"value","hide-details":"","hide-no-data":"",solo:"",flat:"",height:"32","min-height":"32",clearable:""},model:{value:t.top,callback:function(e){t.top=e},expression:"top"}})],1)]):t._e(),t.searchAdvanceConfigDefault.agency.visible?a("v-flex",{class:t.searchAdvanceConfigDefault.agency.class},[a("div",[a("div",{staticClass:"d-inline-block text-bold",staticStyle:{"font-weight":"450",width:"130px"}},[t._v("Đơn vị:")]),a("v-autocomplete",{staticClass:"select-search d-inline-block",staticStyle:{width:"calc(100% - 130px)"},attrs:{items:t.agencyItems,"item-text":"administrationName","item-value":"administrationCode","hide-details":"","hide-no-data":"",solo:"",flat:"",height:"32","min-height":"32",clearable:""},model:{value:t.agency,callback:function(e){t.agency=e},expression:"agency"}})],1)]):t._e(),t.searchAdvanceConfigDefault.domain.visible||t.searchAdvanceConfigDefault.documentNo.visible?a("v-flex",{class:t.searchAdvanceConfigDefault.domain.class},[0!==t.menuInfo.id.indexOf("CV_DI")&&0!==t.menuInfo.id.indexOf("CV_DEN")?a("div",[a("div",{staticClass:"d-inline-block text-bold",staticStyle:{"font-weight":"450",width:"130px"}},[t._v("Lĩnh vực:")]),a("v-autocomplete",{staticClass:"select-search d-inline-block",staticStyle:{width:"calc(100% - 130px)"},attrs:{items:t.domainItems,"item-text":"domainName","item-value":"domainCode","hide-details":"","hide-no-data":"",solo:"",flat:"",height:"32","min-height":"32",clearable:""},model:{value:t.domain,callback:function(e){t.domain=e},expression:"domain"}})],1):a("div",[a("div",{staticClass:"d-inline-block text-bold",staticStyle:{"font-weight":"450",width:"130px"}},[t._v("Số công văn:")]),a("v-text-field",{staticClass:"search-input-appbar input-search d-inline-block",staticStyle:{width:"calc(100% - 130px)"},attrs:{"single-lines":"","hide-details":"",solo:"",flat:"",height:"32","min-height":"32",clearable:""},model:{value:t.documentNo,callback:function(e){t.documentNo=e},expression:"documentNo"}})],1)]):t._e(),t.searchAdvanceConfigDefault.register.visible&&0!==t.menuInfo.id.indexOf("CV_DI")&&0!==t.menuInfo.id.indexOf("CV_DEN")?a("v-flex",{class:t.searchAdvanceConfigDefault.register.class},[a("div",{staticClass:"d-inline-block text-bold",staticStyle:{"font-weight":"450",width:"130px"}},[t._v("Mã sổ theo dõi:")]),a("v-text-field",{staticClass:"search-input-appbar input-search d-inline-block",staticStyle:{width:"calc(100% - 130px)"},attrs:{"single-lines":"","hide-details":"",solo:"",flat:"",height:"32","min-height":"32",clearable:""},model:{value:t.register,callback:function(e){t.register=e},expression:"register"}})],1):t._e(),!t.searchAdvanceConfigDefault.dateCv.visible||0!==t.menuInfo.id.indexOf("CV_DI")&&0!==t.menuInfo.id.indexOf("CV_DEN")?t._e():a("v-flex",{class:t.searchAdvanceConfigDefault.dateCv.class},[a("div",{staticClass:"d-inline-block text-bold",staticStyle:{"font-weight":"450",width:"130px"}},[t._v("Ngày công văn:")]),a("div",{staticClass:"d-inline-block",staticStyle:{width:"calc(100% - 130px)"}},[a("v-menu",{ref:"menuDateCV",attrs:{"close-on-content-click":!0,transition:"scale-transition","offset-y":"","full-width":""},model:{value:t.menuDateCV,callback:function(e){t.menuDateCV=e},expression:"menuDateCV"}},[a("v-text-field",{staticClass:"search-input-appbar input-search",attrs:{slot:"activator","persistent-hint":"","append-icon":"event",placeholder:"","hide-details":"",solo:"",flat:"",height:"32","min-height":"32",clearable:""},on:{blur:function(e){t.dateCv=t.parseDate(t.dateCvFormatted)}},slot:"activator",model:{value:t.dateCvFormatted,callback:function(e){t.dateCvFormatted=e},expression:"dateCvFormatted"}}),a("v-date-picker",{attrs:{locale:"vi","first-day-of-week":1,"no-title":""},on:{input:function(e){t.changeDate("9")}},model:{value:t.dateCv,callback:function(e){t.dateCv=e},expression:"dateCv"}})],1)],1)]),t.searchAdvanceConfigDefault.fromReceiveDate.visible?a("v-flex",{class:t.searchAdvanceConfigDefault.fromReceiveDate.class},[a("div",{staticClass:"layout wrap"},[a("div",{staticClass:"d-inline-block text-bold pt-1",staticStyle:{"font-weight":"450",width:"130px"}},[t._v("Ngày tiếp nhận:")]),a("v-layout",{staticStyle:{width:"calc(100% - 130px)"},attrs:{wrap:""}},[a("v-flex",{attrs:{xs6:""}},[a("v-menu",{ref:"menuDate1",attrs:{"close-on-content-click":!0,transition:"scale-transition","offset-y":"","full-width":""},model:{value:t.menuDate1,callback:function(e){t.menuDate1=e},expression:"menuDate1"}},[a("v-text-field",{staticClass:"search-input-appbar input-search",attrs:{slot:"activator","persistent-hint":"","append-icon":"event",placeholder:"Từ ngày","hide-details":"",solo:"",flat:"",height:"32","min-height":"32","append-outer-icon":"remove",clearable:""},on:{blur:function(e){t.fromReceiveDate=t.parseDate(t.fromReceiveDateFormatted)}},slot:"activator",model:{value:t.fromReceiveDateFormatted,callback:function(e){t.fromReceiveDateFormatted=e},expression:"fromReceiveDateFormatted"}},[a("template",{slot:"append-outer"},[a("v-icon",{attrs:{color:"primary"}},[t._v("remove")])],1)],2),a("v-date-picker",{attrs:{max:t.toReceiveDateFormatted?t.getMinMax(t.toReceiveDateFormatted):null,locale:"vi","first-day-of-week":1,"no-title":""},on:{input:function(e){t.changeDate("1")}},model:{value:t.fromReceiveDate,callback:function(e){t.fromReceiveDate=e},expression:"fromReceiveDate"}})],1)],1),a("v-flex",{staticClass:"pl-2",attrs:{xs6:""}},[a("v-menu",{ref:"menuDate2",attrs:{"close-on-content-click":!0,transition:"scale-transition","offset-y":"","full-width":""},model:{value:t.menuDate2,callback:function(e){t.menuDate2=e},expression:"menuDate2"}},[a("v-text-field",{staticClass:"search-input-appbar input-search",attrs:{slot:"activator","persistent-hint":"","append-icon":"event",placeholder:"Đến ngày","hide-details":"",solo:"",flat:"",height:"32","min-height":"32",clearable:""},on:{blur:function(e){t.toReceiveDate=t.parseDate(t.toReceiveDateFormatted)}},slot:"activator",model:{value:t.toReceiveDateFormatted,callback:function(e){t.toReceiveDateFormatted=e},expression:"toReceiveDateFormatted"}}),a("v-date-picker",{attrs:{min:t.fromReceiveDateFormatted?t.getMinMax(t.fromReceiveDateFormatted):null,locale:"vi","first-day-of-week":1,"no-title":""},on:{input:function(e){t.changeDate("2")}},model:{value:t.toReceiveDate,callback:function(e){t.toReceiveDate=e},expression:"toReceiveDate"}})],1)],1)],1)],1)]):t._e(),t.searchAdvanceConfigDefault.fromDueDate.visible?a("v-flex",{class:t.searchAdvanceConfigDefault.fromDueDate.class},[a("div",{staticClass:"layout wrap"},[a("div",{staticClass:"d-inline-block text-bold pt-1",staticStyle:{"font-weight":"450",width:"130px"}},[t._v("Ngày hẹn trả:")]),a("v-layout",{staticStyle:{width:"calc(100% - 130px)"},attrs:{wrap:""}},[a("v-flex",{attrs:{xs6:""}},[a("v-menu",{ref:"menuDate3",attrs:{"close-on-content-click":!0,transition:"scale-transition","offset-y":"","full-width":""},model:{value:t.menuDate3,callback:function(e){t.menuDate3=e},expression:"menuDate3"}},[a("v-text-field",{staticClass:"search-input-appbar input-search",attrs:{slot:"activator","persistent-hint":"","append-icon":"event",placeholder:"Từ ngày","hide-details":"",solo:"",flat:"",height:"32","min-height":"32",clearable:""},on:{blur:function(e){t.fromDueDate=t.parseDate(t.fromDueDateFormatted)}},slot:"activator",model:{value:t.fromDueDateFormatted,callback:function(e){t.fromDueDateFormatted=e},expression:"fromDueDateFormatted"}},[a("template",{slot:"append-outer"},[a("v-icon",{attrs:{color:"primary"}},[t._v("remove")])],1)],2),a("v-date-picker",{attrs:{max:t.toDueDateFormatted?t.getMinMax(t.toDueDateFormatted):null,locale:"vi","first-day-of-week":1,"no-title":""},on:{input:function(e){t.changeDate("3")}},model:{value:t.fromDueDate,callback:function(e){t.fromDueDate=e},expression:"fromDueDate"}})],1)],1),a("v-flex",{staticClass:"pl-2",attrs:{xs6:""}},[a("v-menu",{ref:"menuDate4",attrs:{"close-on-content-click":!0,transition:"scale-transition","offset-y":"","full-width":""},model:{value:t.menuDate4,callback:function(e){t.menuDate4=e},expression:"menuDate4"}},[a("v-text-field",{staticClass:"search-input-appbar input-search",attrs:{slot:"activator","persistent-hint":"","append-icon":"event",placeholder:"Đến ngày","hide-details":"",solo:"",flat:"",height:"32","min-height":"32",clearable:""},on:{blur:function(e){t.toDueDate=t.parseDate(t.toDueDateFormatted)}},slot:"activator",model:{value:t.toDueDateFormatted,callback:function(e){t.toDueDateFormatted=e},expression:"toDueDateFormatted"}}),a("v-date-picker",{attrs:{min:t.fromDueDateFormatted?t.getMinMax(t.fromDueDateFormatted):null,locale:"vi","first-day-of-week":1,"no-title":""},on:{input:function(e){t.changeDate("4")}},model:{value:t.toDueDate,callback:function(e){t.toDueDate=e},expression:"toDueDate"}})],1)],1)],1)],1)]):t._e(),t.searchAdvanceConfigDefault.fromReleaseDate.visible?a("v-flex",{class:t.searchAdvanceConfigDefault.fromReleaseDate.class},[a("div",{staticClass:"layout wrap"},[a("div",{staticClass:"d-inline-block text-bold pt-1",staticStyle:{"font-weight":"450",width:"130px"}},[t._v("Ngày có kết quả:")]),a("v-layout",{staticStyle:{width:"calc(100% - 130px)"},attrs:{wrap:""}},[a("v-flex",{attrs:{xs6:""}},[a("v-menu",{ref:"menuDate5",attrs:{"close-on-content-click":!0,transition:"scale-transition","offset-y":"","full-width":""},model:{value:t.menuDate5,callback:function(e){t.menuDate5=e},expression:"menuDate5"}},[a("v-text-field",{staticClass:"search-input-appbar input-search",attrs:{slot:"activator","persistent-hint":"","append-icon":"event",placeholder:"Từ ngày","hide-details":"",solo:"",flat:"",height:"32","min-height":"32",clearable:""},on:{blur:function(e){t.fromReleaseDate=t.parseDate(t.fromReleaseDateFormatted)}},slot:"activator",model:{value:t.fromReleaseDateFormatted,callback:function(e){t.fromReleaseDateFormatted=e},expression:"fromReleaseDateFormatted"}},[a("template",{slot:"append-outer"},[a("v-icon",{attrs:{color:"primary"}},[t._v("remove")])],1)],2),a("v-date-picker",{attrs:{max:t.toReleaseDateFormatted?t.getMinMax(t.toReleaseDateFormatted):null,locale:"vi","first-day-of-week":1,"no-title":""},on:{input:function(e){t.changeDate("5")}},model:{value:t.fromReleaseDate,callback:function(e){t.fromReleaseDate=e},expression:"fromReleaseDate"}})],1)],1),a("v-flex",{staticClass:"pl-2",attrs:{xs6:""}},[a("v-menu",{ref:"menuDate6",attrs:{"close-on-content-click":!0,transition:"scale-transition","offset-y":"","full-width":""},model:{value:t.menuDate6,callback:function(e){t.menuDate6=e},expression:"menuDate6"}},[a("v-text-field",{staticClass:"search-input-appbar input-search",attrs:{slot:"activator","persistent-hint":"","append-icon":"event",placeholder:"Đến ngày","hide-details":"",solo:"",flat:"",height:"32","min-height":"32",clearable:""},on:{blur:function(e){t.toReleaseDate=t.parseDate(t.toReleaseDateFormatted)}},slot:"activator",model:{value:t.toReleaseDateFormatted,callback:function(e){t.toReleaseDateFormatted=e},expression:"toReleaseDateFormatted"}}),a("v-date-picker",{attrs:{min:t.fromReleaseDateFormatted?t.getMinMax(t.fromReleaseDateFormatted):null,locale:"vi","first-day-of-week":1,"no-title":""},on:{input:function(e){t.changeDate("6")}},model:{value:t.toReleaseDate,callback:function(e){t.toReleaseDate=e},expression:"toReleaseDate"}})],1)],1)],1)],1)]):t._e(),t.searchAdvanceConfigDefault.fromFinishDate.visible?a("v-flex",{class:t.searchAdvanceConfigDefault.fromFinishDate.class},[a("div",{staticClass:"layout wrap"},[a("div",{staticClass:"d-inline-block text-bold pt-1",staticStyle:{"font-weight":"450",width:"130px"}},[t._v("Ngày trả hồ sơ:")]),a("v-layout",{staticStyle:{width:"calc(100% - 130px)"},attrs:{wrap:""}},[a("v-flex",{attrs:{xs6:""}},[a("v-menu",{ref:"menuDate7",attrs:{"close-on-content-click":!0,transition:"scale-transition","offset-y":"","full-width":""},model:{value:t.menuDate7,callback:function(e){t.menuDate7=e},expression:"menuDate7"}},[a("v-text-field",{staticClass:"search-input-appbar input-search",attrs:{slot:"activator","persistent-hint":"","append-icon":"event",placeholder:"Từ ngày","hide-details":"",solo:"",flat:"",height:"32","min-height":"32",clearable:""},on:{blur:function(e){t.fromFinishDate=t.parseDate(t.fromFinishDateFormatted)}},slot:"activator",model:{value:t.fromFinishDateFormatted,callback:function(e){t.fromFinishDateFormatted=e},expression:"fromFinishDateFormatted"}},[a("template",{slot:"append-outer"},[a("v-icon",{attrs:{color:"primary"}},[t._v("remove")])],1)],2),a("v-date-picker",{attrs:{max:t.toFinishDateFormatted?t.getMinMax(t.toFinishDateFormatted):null,locale:"vi","first-day-of-week":1,"no-title":""},on:{input:function(e){t.changeDate("7")}},model:{value:t.fromFinishDate,callback:function(e){t.fromFinishDate=e},expression:"fromFinishDate"}})],1)],1),a("v-flex",{staticClass:"pl-2",attrs:{xs6:""}},[a("v-menu",{ref:"menuDate8",attrs:{"close-on-content-click":!0,transition:"scale-transition","offset-y":"","full-width":""},model:{value:t.menuDate8,callback:function(e){t.menuDate8=e},expression:"menuDate8"}},[a("v-text-field",{staticClass:"search-input-appbar input-search",attrs:{slot:"activator","persistent-hint":"","append-icon":"event",placeholder:"Đến ngày","hide-details":"",solo:"",flat:"",height:"32","min-height":"32",clearable:""},on:{blur:function(e){t.toFinishDate=t.parseDate(t.toFinishDateFormatted)}},slot:"activator",model:{value:t.toFinishDateFormatted,callback:function(e){t.toFinishDateFormatted=e},expression:"toFinishDateFormatted"}}),a("v-date-picker",{attrs:{min:t.fromFinishDateFormatted?t.getMinMax(t.fromFinishDateFormatted):null,locale:"vi","first-day-of-week":1,"no-title":""},on:{input:function(e){t.changeDate("8")}},model:{value:t.toFinishDate,callback:function(e){t.toFinishDate=e},expression:"toFinishDate"}})],1)],1)],1)],1)]):t._e()],1),a("v-flex",{staticClass:"xs12 mx-2"},[a("v-btn",{staticClass:"mx-0 mb-0",attrs:{color:"primary",dark:""},nativeOn:{click:function(e){return t.submitAdvSearch(e)}}},[a("v-icon",{attrs:{size:"18"}},[t._v("search")]),t._v("   Tìm kiếm\n      ")],1)],1)],1)])},Y=[];function J(t,e){return tt(t)||Z(t,e)||X()}function X(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function Z(t,e){var a=[],i=!0,o=!1,n=void 0;try{for(var s,r=t[Symbol.iterator]();!(i=(s=r.next()).done);i=!0)if(a.push(s.value),e&&a.length===e)break}catch(c){o=!0,n=c}finally{try{i||null==r["return"]||r["return"]()}finally{if(o)throw n}}return a}function tt(t){if(Array.isArray(t))return t}var et={props:["menuInfo"],components:{},data:function(){return{searchAdvanceConfigDefault:{status:{visible:!0,class:"mb-2 px-2 xs12 sm6 md4",value:"",source:""},substatus:{visible:!0,class:"mb-2 px-2 xs12 sm6 md4",value:"",source:""},top:{visible:!0,class:"mb-2 px-2 xs12 sm6 md4",value:"",source:""},agency:{visible:!0,class:"mb-2 px-2 xs12 sm6 md4",value:"",source:""},domain:{visible:!0,class:"mb-2 px-2 xs12 sm6 md4",value:"",source:""},dateCv:{visible:!0,class:"mb-2 px-2 xs12 sm6 md4",value:"",source:""},register:{visible:!0,class:"mb-2 px-2 xs12 sm6 md4",value:"",source:""},documentNo:{visible:!0,class:"mb-2 px-2 xs12 sm6 md4",value:"",source:""},fromReceiveDate:{visible:!0,class:"mb-2 px-2 xs12 sm6 md6",value:"",source:""},fromDueDate:{visible:!0,class:"mb-2 px-2 xs12 sm6 md6",value:"",source:""},fromReleaseDate:{visible:!0,class:"mb-2 px-2 xs12 sm6 md6",value:"",source:""},fromFinishDate:{visible:!0,class:"mb-2 px-2 xs12 sm6 md6",value:"",source:""}},searchAdvanceConfig:"",advSearchShow:!1,itemsFilter:[],keyFilterItems:[],menuDate1:!1,menuDate2:!1,menuDate3:!1,menuDate4:!1,menuDate5:!1,menuDate6:!1,menuDate7:!1,menuDate8:!1,menuDateCV:!1,dateCvFormatted:"",dateCv:"",fromReceiveDate:"",fromReceiveDateFormatted:"",toReceiveDate:"",toReceiveDateFormatted:"",fromDueDate:"",fromDueDateFormatted:"",toDueDate:"",toDueDateFormatted:"",fromReleaseDate:"",fromReleaseDateFormatted:"",toReleaseDate:"",toReleaseDateFormatted:"",fromFinishDate:"",fromFinishDateFormatted:"",toFinishDate:"",toFinishDateFormatted:"",statusItems:[],status:"",substatusItems:[],substatus:"",agencyItems:[],agency:"",domainItems:[],domain:"",topItems:[{value:"overdue",text:"Đang quá hạn"},{value:"delay",text:"Chậm hạn trả"},{value:"coming",text:"Sắp đến hạn"}],top:"",register:"",documentNo:""}},computed:{},created:function(){var t=this;t.getSearchItems(),console.log("menuInfo",t.menuInfo),t.searchAdvanceConfig=t.menuInfo.tableConfig.hasOwnProperty("searchAdvanceConfig")&&t.menuInfo.tableConfig.searchAdvanceConfig?JSON.parse(t.menuInfo.tableConfig.searchAdvanceConfig):{},t.searchAdvanceConfigDefault=Object.assign(t.searchAdvanceConfigDefault,t.searchAdvanceConfig)},watch:{menuInfo:function(t){var e=this;console.log("menuInfo",t),e.searchAdvanceConfig=t.tableConfig.hasOwnProperty("searchAdvanceConfig")&&t.tableConfig.searchAdvanceConfig?JSON.parse(t.tableConfig.searchAdvanceConfig):{},e.searchAdvanceConfigDefault=Object.assign(e.searchAdvanceConfigDefault,e.searchAdvanceConfig)},$route:function(t,e){var a=this;a.getSearchItems()}},methods:{setShow:function(t){var e=this;if(e.advSearchShow=t,e.statusItems&&0!==e.statusItems.length||e.$store.dispatch("getStatusLists").then((function(t){var a={itemCode:"deleted",itemName:"Đã xóa"};(e.getUser("Administrator")||e.getUser("Administrator_data"))&&t.push(a),e.searchAdvanceConfigDefault.status.hasOwnProperty("source")&&e.searchAdvanceConfigDefault.status.source?e.statusItems=e.searchAdvanceConfigDefault.status.source:e.statusItems=t})).catch((function(){})),!e.substatusItems||0===e.substatusItems.length){var a={itemCode:""};e.$store.dispatch("getSubstatusLists",a).then((function(t){e.searchAdvanceConfigDefault.substatus.hasOwnProperty("source")&&e.searchAdvanceConfigDefault.substatus.source?e.substatusItems=e.searchAdvanceConfigDefault.substatus.source:e.substatusItems=t})).catch((function(){}))}e.agencyItems&&0!==e.agencyItems.length||e.$store.dispatch("getAgencyLists").then((function(t){e.searchAdvanceConfigDefault.agency.hasOwnProperty("source")&&e.searchAdvanceConfigDefault.agency.source?e.agencyItems=e.searchAdvanceConfigDefault.agency.source:e.agencyItems=t})).catch((function(){})),e.domainItems&&0!==e.domainItems.length||e.$store.dispatch("getDomainLists").then((function(t){e.searchAdvanceConfigDefault.domain.hasOwnProperty("source")&&e.searchAdvanceConfigDefault.domain.source?e.domainItems=e.searchAdvanceConfigDefault.domain.source:e.domainItems=t})).catch((function(){}))},getSearchItems:function(){var t=this,e=t.$router.history.current.query;console.log("newQuery",e),t.status=e.hasOwnProperty("status")?e.status:t.searchAdvanceConfigDefault.status.value,t.substatus=e.hasOwnProperty("substatus")?e.substatus:t.searchAdvanceConfigDefault.substatus.value,t.top=e.hasOwnProperty("top")?e.top:t.searchAdvanceConfigDefault.top.value,t.agency=e.hasOwnProperty("agency")?e.agency:t.searchAdvanceConfigDefault.agency.value,t.domain=e.hasOwnProperty("domain")?e.domain:t.searchAdvanceConfigDefault.domain.value,t.register=e.hasOwnProperty("register")?e.register:t.searchAdvanceConfigDefault.register.value,t.documentNo=e.hasOwnProperty("documentNo")?e.documentNo:t.searchAdvanceConfigDefault.documentNo.value,t.fromReceiveDate=e.hasOwnProperty("fromReceiveDate")?t.parseDate(e.fromReceiveDate):"",t.toReceiveDate=e.hasOwnProperty("toReceiveDate")?t.parseDate(e.toReceiveDate):"",t.fromDueDate=e.hasOwnProperty("fromDueDate")?t.parseDate(e.fromDueDate):"",t.toDueDate=e.hasOwnProperty("toDueDate")?t.parseDate(e.toDueDate):"",t.fromReleaseDate=e.hasOwnProperty("fromReleaseDate")?t.parseDate(e.fromReleaseDate):"",t.toReleaseDate=e.hasOwnProperty("toReleaseDate")?t.parseDate(e.toReleaseDate):"",t.fromFinishDate=e.hasOwnProperty("fromFinishDate")?t.parseDate(e.fromFinishDate):"",t.toFinishDate=e.hasOwnProperty("toFinishDate")?t.parseDate(e.toFinishDate):"",t.dateCv=e.hasOwnProperty("dateCv")?t.parseDate(e.dateCv):"",t.fromReceiveDateFormatted=t.formatDate(t.fromReceiveDate),t.toReceiveDateFormatted=t.formatDate(t.toReceiveDate),t.fromDueDateFormatted=t.formatDate(t.fromDueDate),t.toDueDateFormatted=t.formatDate(t.toDueDate),t.fromReleaseDateFormatted=t.formatDate(t.fromReleaseDate),t.toReleaseDateFormatted=t.formatDate(t.toReleaseDate),t.fromFinishDateFormatted=t.formatDate(t.fromFinishDate),t.toFinishDateFormatted=t.formatDate(t.toFinishDate),t.dateCvFormatted=t.formatDate(t.dateCv)},submitAdvSearch:function(){var t=this;console.log("fromReceiveDate",t.fromReceiveDate,t.toReceiveDate);var e=t.$router.history.current,a=e.query,i="?";for(var o in a["status"]=t.status,a["substatus"]=t.substatus,a["top"]=t.top,a["agency"]=t.agency,a["domain"]=t.domain,a["register"]=t.register,a["documentNo"]=t.documentNo?t.documentNo:"",a["fromReceiveDate"]=t.formatDate(t.fromReceiveDate),a["toReceiveDate"]=t.formatDate(t.toReceiveDate),a["fromDueDate"]=t.formatDate(t.fromDueDate),a["toDueDate"]=t.formatDate(t.toDueDate),a["fromReleaseDate"]=t.formatDate(t.fromReleaseDate),a["toReleaseDate"]=t.formatDate(t.toReleaseDate),a["fromFinishDate"]=t.formatDate(t.fromFinishDate),a["toFinishDate"]=t.formatDate(t.toFinishDate),a["dateCv"]=t.formatDate(t.dateCv),console.log("newQuery",a),a)"page"===o?i+=o+"=1&":""!==a[o]&&"undefined"!==a[o]&&void 0!==a[o]&&"adv_renew"!==a[o]&&(i+=o+"="+a[o]+"&");i+="adv_renew="+Math.floor(100*Math.random())+1,i=i.replace(/=__/g,"="),t.$router.push({path:e.path+i})},changeDate:function(t){var e=this;e.menuDate=e.menuDate2=e.menuDate3=e.menuDate4=e.menuDateCV=!1,"1"===t?e.fromReceiveDateFormatted=e.formatDate(e.fromReceiveDate):"2"===t?e.toReceiveDateFormatted=e.formatDate(e.toReceiveDate):"3"===t?e.fromDueDateFormatted=e.formatDate(e.fromDueDate):"4"===t?e.toDueDateFormatted=e.formatDate(e.toDueDate):"5"===t?e.fromReleaseDateFormatted=e.formatDate(e.fromReleaseDate):"6"===t?e.toReleaseDateFormatted=e.formatDate(e.toReleaseDate):"7"===t?e.fromFinishDateFormatted=e.formatDate(e.fromFinishDate):"8"===t?e.toFinishDateFormatted=e.formatDate(e.toFinishDate):"9"===t&&(e.dateCvFormatted=e.formatDate(e.dateCv))},formatDate:function(t){if(!t)return"";var e=t.split("-"),a=J(e,3),i=a[0],o=a[1],n=a[2];return"".concat(n,"/").concat(o,"/").concat(i)},parseDate:function(t){if(!t)return"";if(String(t).indexOf("/")>0){var e=t.split("/"),a=J(e,3),i=a[0],o=a[1],n=a[2];return"".concat(n,"-").concat(o.padStart(2,"0"),"-").concat(i.padStart(2,"0"))}if(String(t).indexOf("-")>0){var s=t.split("-"),r=J(s,3),c=r[0],l=r[1],d=r[2];return"".concat(d,"-").concat(l.padStart(2,"0"),"-").concat(c.padStart(2,"0"))}var u=new Date(Number(t));return"".concat(u.getFullYear(),"-").concat((u.getMonth()+1).toString().padStart(2,"0"),"-").concat(u.getDate().toString().padStart(2,"0"))},getUser:function(t){var e=this,a=e.$store.getters.getUser.role;if(!a)return!1;var i=a.findIndex((function(e){return e===t}));return i>=0},getMinMax:function(t){if(!t)return null;var e=t.split("/"),a=J(e,3),i=a[0],o=a[1],n=a[2];return"".concat(n,"-").concat(o,"-").concat(i)}}},at=et,it=a("c6a6"),ot=a("2e4b"),nt=a("e449"),st=a("2677"),rt=Object(p["a"])(at,Q,Y,!1,null,null,null),ct=rt.exports;function lt(t,e){return ht(t)||ut(t,e)||dt()}function dt(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function ut(t,e){var a=[],i=!0,o=!1,n=void 0;try{for(var s,r=t[Symbol.iterator]();!(i=(s=r.next()).done);i=!0)if(a.push(s.value),e&&a.length===e)break}catch(c){o=!0,n=c}finally{try{i||null==r["return"]||r["return"]()}finally{if(o)throw n}}return a}function ht(t){if(Array.isArray(t))return t}function pt(t){return pt="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},pt(t)}g()(rt,{VAutocomplete:it["a"],VBtn:_["a"],VDatePicker:ot["a"],VFlex:D["a"],VIcon:T["a"],VLayout:x["a"],VMenu:nt["a"],VTextField:st["a"]});var mt={props:["index"],components:{"tiny-pagination":B["a"],"phan-cong":K["a"],"y-kien-can-bo":W["a"],"template-rendering":U,"form-bo-sung-thong-tin":j["a"],"tim-kiem-nang-cao":ct},data:function(){return{xacthuc_BNG:!1,doActionGroup:!1,doActionGroupKhacThuTuc:!1,isAdminSuper:!1,actionId:"",dossierIdSelected:"",dossierCountingShow:!1,dossierCounting:[],advSearchToolsSelected:[],advSearchTools:z.advSearchTools,advSearchItems:[],advObjectSearch:{},menusss:!1,menuType:0,type_assign:"",assign_items:[],returnFiles:[],payments:"",viaPortalDetail:0,countSelected:0,statusFailed:0,dialog_statusAction:!1,dialog_printGuide:!1,dialog_denied:!1,dialog_extraForm:!1,validGuide:!1,validDenied:!1,applicantNameGuide:"",applicantEmailGuide:"",applicantTelNoGuide:"",applicantNoteGuide:"",applicantAddressGuide:"",reasonNote:"",dossierSelected:[],buttonConfigItem:{},textNote:"",thongtinhoso:{},dossierId:0,valid:!1,isCallBack:!0,trangThaiHoSoList:null,listDichVu:[],dichVuSelected:null,btnDynamics:[],btnDossierDynamics:[],btnStepsDynamics:[],loading:!0,headers:[],hideAction:!1,hideGroupAction:!1,hosoDatas:[],hosoDatasTotal:0,hosoDatasPage:1,limitRecord:15,hosoTotalPage:0,selectedDoAction:[],selectMultiplePage:[],selected:[],listThuTucHanhChinh:[],listThuTuc:[],thuTucHanhChinhSelected:null,thuTucHanhChinhSelectedGuide:null,docTypePrint:"",listCongVan:[],congvanSelected:null,listDonviCongVan:[],donviguiSelected:null,listLinhVuc:[],linhVucSelected:null,listDichVuGuide:[],dichVuSelectedGuide:null,templateNoGuide:"",domainCode:"",govAgencyCode:"",serviceCode:"",templateNo:"",dossierNoKey:"",documentNo:"",dateCvFormatted:"",menuDateCV:!1,dialogAction:!1,loadingAction:!1,dialogActionProcess:!1,loadingActionProcess:!1,validProcess:!1,indexAction:-1,itemAction:{title:""},showThongTinCoBanHoSo:!1,showYkienCanBoThucHien:!1,showFormBoSungThongTinNgan:!1,showPhanCongNguoiThucHien:!1,showTaoTaiLieuKetQua:!1,showKyPheDuyetTaiLieu:!1,showTraKetQua:!1,showXacNhanThuPhi:!1,showThuPhi:!1,showThucHienThanhToanDienTu:!1,dossierItemDialogPick:null,itemDialogPick:null,resultDialogPick:null,indexDialogPick:0,userNote:0,dialogPDF:!1,dialogPDFLoading:!0,filterForm:null,checkSelectAll:!1,titleLanding:"",currentQueryState:"",tphsGuide:[],headersTphsGuide:[{text:"TT",align:"center",sortable:!1},{text:"Tên thành phần",align:"center",sortable:!1},{text:"Đã có",align:"center",sortable:!1}],applicantTypeGuide:!0,limits:[],showLimit:!1,advSearchShow:!1,filterKeyAdvSearch:["status","substatus","top","agency","domain","register","fromReceiveDate","toReceiveDate","fromDueDate","toDueDate","fromReleaseDate","toReleaseDate","fromFinishDate","toFinishDate","documentNo","dateCv"],status:"",top:"",orderSort:"",sortValue:"",govAgencyFilterMenuConfig:"",groupServiceFilterMenuConfig:"",disableSearchAgency:!1,hiddenFilterDomain:!1,focusSelect:0,rules:{required:function(t){return!!t||"Thông tin bắt buộc"},cmndHoChieu:function(t){var e=/^(?![0-9]{4,12})[0-9a-zA-Z]{4,12}$/;return e.test(t)||"Gồm các ký tự 0-9, a-z và ít nhất 4-12 ký tự"},email:function(t){t=t.trim();var e=/^(([^<>()[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/;return e.test(t)||"Địa chỉ Email không hợp lệ"},passWord:function(t){var e=/^(?![0-9]{6,})[0-9a-zA-Z]{6,}$/;return e.test(t)||"Gồm các ký tự 0-9, a-z và ít nhất 6 ký tự"},telNo:function(t){var e=/^([0-9]{0,})$/;return"string"===typeof t&&(t=t.trim()),e.test(t)||"Gồm các ký tự 0-9"},varchar50:function(t){return!t||(t=String(t).trim(),t.length<=50||"Không được nhập quá 50 ký tự")},varchar100:function(t){return!t||(t=String(t).trim(),t.length<=100||"Không được nhập quá 100 ký tự")},varchar255:function(t){return!t||(t=String(t).trim(),t.length<=255||"Không được nhập quá 255 ký tự")},varchar500:function(t){return!t||(t=String(t).trim(),t.length<=500||"Không được nhập quá 500 ký tự")},varchar5000:function(t){return!t||(t=String(t).trim(),t.length<=5e3||"Không được nhập quá 5000 ký tự")}}}},computed:{loadingDynamicBtn:function(){return this.$store.getters.loadingDynamicBtn},loadingTable:function(){return this.$store.getters.loadingTable},originality:function(){var t=this;return t.getOriginality()},currentUser:function(){return this.$store.getters.loadingInitData.user},activeLoadingDataHoSo:function(){return this.$store.getters.activeLoadingDataHoSo},activePrintBienNhan:function(){return this.$store.getters.getActivePrintBienNhan},itemsFilterAdv:function(){return this.$store.getters.getItemsFilterAdv},isMobile:function(){return this.$store.getters.getIsMobile},userLoginInfomation:function(){return this.$store.getters.getUserLogin},employeeLoginInfomation:function(){return this.$store.getters.getEmployeeLogin}},created:function(){var t=this;t.selectMultiplePage=[],t.checkSelectAll=3!==t.menuType&&1!==t.originality,t.$nextTick((function(){var e=t.$router.history.current.query,a=t.$router.history.current.query;t.isMobile&&d()("#m-navigation").css("display","block"),t.currentQueryState=e,t.keyword=a.hasOwnProperty("keyword")?a.keyword:"",t.status=a.hasOwnProperty("status")?a.status:"",t.top=a.hasOwnProperty("top")?a.top:"",e.hasOwnProperty("page")&&"1"!==e["page"]?t.hosoDatasPage=parseInt(e["page"]):t.hosoDatasPage=1,t.activePrintBienNhan&&(t.itemAction={title:"In phiếu biên nhận",form:"PRINT_03"},d()(window).scrollTop(0),setTimeout((function(){var e={dossierId:t.activePrintBienNhan};t.doPrint03(e),t.$store.commit("setActivePrintBienNhan","")}),500));try{xacthuc_BNG&&(t.xacthuc_BNG=!0,t.getFieldPick())}catch(i){}}))},updated:function(){var t=this;console.log("run updated"),t.$nextTick((function(){var e=t.$router.history.current.params,a=t.$router.history.current.query;t.currentQueryState=a,e.hasOwnProperty("index")&&t.isCallBack&&(t.isCallBack=!1,t.$store.commit("setLoadingDynamicBtn",!0),setTimeout((function(){t.$store.dispatch("loadMenuConfigToDo").then((function(e){t.btnDynamics=[],t.trangThaiHoSoList=e,t.menuType=parseInt(t.trangThaiHoSoList[t.index]["menuType"]),t.checkSelectAll=3!==t.menuType&&1!==t.originality,t.doActionGroup=t.trangThaiHoSoList[t.index]["tableConfig"].hasOwnProperty("activeGroupAction")&&t.trangThaiHoSoList[t.index]["tableConfig"].activeGroupAction,t.doActionGroupKhacThuTuc=t.trangThaiHoSoList[t.index]["tableConfig"].hasOwnProperty("activeGroupActionService")&&t.trangThaiHoSoList[t.index]["tableConfig"].activeGroupActionService,t.trangThaiHoSoList[t.index]["tableConfig"].hasOwnProperty("searchGovAgencyCode")&&t.trangThaiHoSoList[t.index]["tableConfig"].searchGovAgencyCode&&(t.govAgencyFilterMenuConfig=t.trangThaiHoSoList[t.index]["tableConfig"].searchGovAgencyCode),t.trangThaiHoSoList[t.index]["tableConfig"].hasOwnProperty("groupServiceCode")&&t.trangThaiHoSoList[t.index]["tableConfig"].groupServiceCode&&(t.groupServiceFilterMenuConfig=t.trangThaiHoSoList[t.index]["tableConfig"].groupServiceCode),t.trangThaiHoSoList[t.index]["tableConfig"].hasOwnProperty("disableSearchAgency")&&t.trangThaiHoSoList[t.index]["tableConfig"].disableSearchAgency&&(t.disableSearchAgency=t.trangThaiHoSoList[t.index]["tableConfig"].disableSearchAgency),t.trangThaiHoSoList[t.index]["tableConfig"].hasOwnProperty("hiddenFilterDomain")&&t.trangThaiHoSoList[t.index]["tableConfig"].hiddenFilterDomain&&(t.hiddenFilterDomain=t.trangThaiHoSoList[t.index]["tableConfig"].hiddenFilterDomain),t.processListTTHC(a),t.hiddenFilterDomain||t.processListDomain(a),t.trangThaiHoSoList[t.index]["tableConfig"].hasOwnProperty("searchCongVan")&&t.processListCongVan(a),t.trangThaiHoSoList[t.index]["tableConfig"].hasOwnProperty("searchDonViGuiCongVan")&&t.getDonViCongVan(a),null!==t.trangThaiHoSoList[t.index]["tableConfig"]&&void 0!==t.trangThaiHoSoList[t.index]["tableConfig"]&&t.trangThaiHoSoList[t.index]["tableConfig"].hasOwnProperty("headers")&&(t.headers=t.trangThaiHoSoList[t.index]["tableConfig"]["headers"]),null!==t.trangThaiHoSoList[t.index]["tableConfig"]&&void 0!==t.trangThaiHoSoList[t.index]["tableConfig"]&&t.trangThaiHoSoList[t.index]["tableConfig"].hasOwnProperty("hideAction")&&(t.hideAction=t.trangThaiHoSoList[t.index]["tableConfig"]["hideAction"]),null!==t.trangThaiHoSoList[t.index]["tableConfig"]&&void 0!==t.trangThaiHoSoList[t.index]["tableConfig"]&&t.trangThaiHoSoList[t.index]["tableConfig"].hasOwnProperty("hideGroupAction")&&(t.hideGroupAction=t.trangThaiHoSoList[t.index]["tableConfig"]["hideGroupAction"]),null!==t.trangThaiHoSoList[t.index]["buttonConfig"]&&void 0!==t.trangThaiHoSoList[t.index]["buttonConfig"]&&t.trangThaiHoSoList[t.index]["buttonConfig"].hasOwnProperty("buttons")&&(t.btnDynamics=t.trangThaiHoSoList[t.index]["buttonConfig"]["buttons"]),null!==t.trangThaiHoSoList[t.index]["buttonConfig"]&&void 0!==t.trangThaiHoSoList[t.index]["buttonConfig"]&&t.trangThaiHoSoList[t.index]["buttonConfig"].hasOwnProperty("layout_view")&&(t.filterForm=t.trangThaiHoSoList[t.index]["buttonConfig"]["layout_view"]);var i=[],o=[];for(var n in t.btnDynamics)t.btnDynamics[n].hasOwnProperty("onlySteps")?i.push(t.btnDynamics[n]):o.push(t.btnDynamics[n]);if(t.btnDynamics=[],t.btnDynamics=o,t.btnStepsDynamics=[],a.hasOwnProperty("step"))for(var s in t.trangThaiHoSoList[t.index]["items"]){var r=t.trangThaiHoSoList[t.index]["items"][s];if(String(r.stepCode)===String(a.step)){for(var c in i)for(var l=0;l<i[c].onlySteps.length;l++)String(i[c].onlySteps[l])===String(r.stepCode)&&t.btnDynamics.push(i[c]);break}}console.log("btnDynamics_menu 1",t.btnDynamics),t.$store.commit("setLoadingDynamicBtn",!1)})).catch((function(){}))}),200))}))},watch:{$route:function(t,e){console.log("run watched");var a=this;a.dossierNoKey="",a.linhVucSelected="",a.domainCode="";var i=t.query,o=e.query;if(a.currentQueryState=i,a.doActionGroup=a.trangThaiHoSoList[a.index]["tableConfig"].hasOwnProperty("activeGroupAction")&&a.trangThaiHoSoList[a.index]["tableConfig"].activeGroupAction,a.doActionGroupKhacThuTuc=a.trangThaiHoSoList[a.index]["tableConfig"].hasOwnProperty("activeGroupActionService")&&a.trangThaiHoSoList[a.index]["tableConfig"].activeGroupActionService,a.keyword=i.hasOwnProperty("keyword")?i.keyword:"",a.status=i.hasOwnProperty("status")?i.status:"",a.top=i.hasOwnProperty("top")?i.top:"",a.orderSort=i.hasOwnProperty("order")?i.order:"",a.sortValue=i.hasOwnProperty("sort")?i.sort:"",a.documentNo=i.hasOwnProperty("documentNo")?i.documentNo:"",a.dateCv=i.hasOwnProperty("dateCv")?a.parseDate(i.dateCv):"",a.dateCvFormatted=a.formatDate(a.dateCv),a.trangThaiHoSoList[a.index]["tableConfig"].hasOwnProperty("searchGovAgencyCode")&&a.trangThaiHoSoList[a.index]["tableConfig"].searchGovAgencyCode&&(a.govAgencyFilterMenuConfig=a.trangThaiHoSoList[a.index]["tableConfig"].searchGovAgencyCode),a.trangThaiHoSoList[a.index]["tableConfig"].hasOwnProperty("groupServiceCode")&&a.trangThaiHoSoList[a.index]["tableConfig"].groupServiceCode&&(a.groupServiceFilterMenuConfig=a.trangThaiHoSoList[a.index]["tableConfig"].groupServiceCode),a.trangThaiHoSoList[a.index]["tableConfig"].hasOwnProperty("disableSearchAgency")&&a.trangThaiHoSoList[a.index]["tableConfig"].disableSearchAgency&&(a.disableSearchAgency=a.trangThaiHoSoList[a.index]["tableConfig"].disableSearchAgency),a.trangThaiHoSoList[a.index]["tableConfig"].hasOwnProperty("hiddenFilterDomain")&&a.trangThaiHoSoList[a.index]["tableConfig"].hiddenFilterDomain&&(a.hiddenFilterDomain=a.trangThaiHoSoList[a.index]["tableConfig"].hiddenFilterDomain),i.hasOwnProperty("q")){a.btnDynamics=[],a.$store.commit("setLoadingDynamicBtn",!0),a.menuType=a.trangThaiHoSoList[a.index]["menuType"],a.checkSelectAll=3!==a.menuType&&1!==a.originality,a.headers=a.trangThaiHoSoList[a.index]["tableConfig"]["headers"],null!==a.trangThaiHoSoList[a.index]["tableConfig"]&&void 0!==a.trangThaiHoSoList[a.index]["tableConfig"]&&a.trangThaiHoSoList[a.index]["tableConfig"].hasOwnProperty("hideAction")&&(a.hideAction=a.trangThaiHoSoList[a.index]["tableConfig"]["hideAction"]),null!==a.trangThaiHoSoList[a.index]["tableConfig"]&&void 0!==a.trangThaiHoSoList[a.index]["tableConfig"]&&a.trangThaiHoSoList[a.index]["tableConfig"].hasOwnProperty("hideGroupAction")&&(a.hideGroupAction=a.trangThaiHoSoList[a.index]["tableConfig"]["hideGroupAction"]),null!==a.trangThaiHoSoList[a.index]["buttonConfig"]&&void 0!==a.trangThaiHoSoList[a.index]["buttonConfig"]&&a.trangThaiHoSoList[a.index]["buttonConfig"].hasOwnProperty("buttons")&&(a.btnDynamics=a.trangThaiHoSoList[a.index]["buttonConfig"]["buttons"]),null!==a.trangThaiHoSoList[a.index]["buttonConfig"]&&void 0!==a.trangThaiHoSoList[a.index]["buttonConfig"]&&a.trangThaiHoSoList[a.index]["buttonConfig"].hasOwnProperty("layout_view")&&(a.filterForm=a.trangThaiHoSoList[a.index]["buttonConfig"]["layout_view"]);var n=[],s=[];for(var r in a.btnDynamics)a.btnDynamics[r].hasOwnProperty("onlySteps")?n.push(a.btnDynamics[r]):s.push(a.btnDynamics[r]);if(a.btnDynamics=[],a.btnDynamics=s,a.btnStepsDynamics=[],i.hasOwnProperty("step"))for(var c in a.trangThaiHoSoList[a.index]["items"]){var l=a.trangThaiHoSoList[a.index]["items"][c];if(String(l.stepCode)===String(i.step)){for(var d in n)for(var u=0;u<n[d].onlySteps.length;u++)String(n[d].onlySteps[u])===String(l.stepCode)&&a.btnDynamics.push(n[d]);break}}if(i.hasOwnProperty("page")?(a.hosoDatasPage=parseInt(i.page),i.page===o["page"]&&(a.selectMultiplePage=[])):(a.hosoDatasPage=1,a.selectMultiplePage=[]),a.$store.commit("setLoadingDynamicBtn",!1),!a.hiddenFilterDomain)if(null===a.listLinhVuc||void 0===a.listLinhVuc||null!==a.listLinhVuc&&void 0!==a.listLinhVuc&&0===a.listLinhVuc.length)a.processListDomain(i);else for(var h in 1!==a.listLinhVuc.length||a.trangThaiHoSoList[a.index]["tableConfig"].hasOwnProperty("searchCongVan")?(a.linhVucSelected="",a.domainCode=""):(a.linhVucSelected=a.listLinhVuc[0],a.domainCode=a.linhVucSelected["domainCode"]),a.listLinhVuc)a.trangThaiHoSoList[a.index]["tableConfig"].hasOwnProperty("searchCongVan")||(String(a.listLinhVuc[h]["domainCode"])===String(i.domain)&&(a.linhVucSelected=a.listLinhVuc[h],a.domainCode=a.linhVucSelected["domainCode"]),console.log("linhVucSelected watch",a.linhVucSelected));a.trangThaiHoSoList[a.index]["tableConfig"].hasOwnProperty("searchCongVan")&&a.processListCongVan(i),a.trangThaiHoSoList[a.index]["tableConfig"].hasOwnProperty("searchDonViGuiCongVan")&&a.getDonViCongVan(i),console.log("watchRouter",i),a.processListTTHC(i)}},activeLoadingDataHoSo:function(t){var e=this;setTimeout((function(){e.doLoadingDataHoSo()}),100)},selectMultiplePage:{handler:function(t){var e=this;if(t.length>0)for(var a in e.selectedDoAction=[],t)e.selectedDoAction=e.selectedDoAction.concat(t[a]["selected"]);else e.selectedDoAction=[];e.$store.commit("setDossierSelectedDoAction",e.selectedDoAction)},deep:!0},dichVuSelectedGuide:function(t){var e=this;t&&(e.templateNoGuide=t["templateNo"],t.dossierTemplateNo=t["templateNo"],e.$store.dispatch("loadDossierTemplates",t).then((function(t){for(var a in t["dossierParts"])t["dossierParts"][a].fileMark=!0;e.tphsGuide=t["dossierParts"].filter((function(t){return 1===t["partType"]}))})).catch((function(){})))},trangThaiHoSoList:function(t){var e=this;e.trangThaiHoSoList[e.index]["tableConfig"].hasOwnProperty("pagination")&&e.trangThaiHoSoList[e.index]["tableConfig"]["pagination"]?(e.limits=e.trangThaiHoSoList[e.index]["tableConfig"]["pagination"].filter((function(t){return Number(t)<=100})),e.limits.length>0?(e.limitRecord=e.trangThaiHoSoList[e.index]["tableConfig"]["pagination"][0],e.showLimit=!0):(e.showLimit=!1,e.limitRecord=15)):(e.showLimit=!1,e.limitRecord=15),e.trangThaiHoSoList[e.index]["tableConfig"].hasOwnProperty("searchGovAgencyCode")&&e.trangThaiHoSoList[e.index]["tableConfig"].searchGovAgencyCode&&(e.govAgencyFilterMenuConfig=e.trangThaiHoSoList[e.index]["tableConfig"].searchGovAgencyCode),e.trangThaiHoSoList[e.index]["tableConfig"].hasOwnProperty("groupServiceCode")&&e.trangThaiHoSoList[e.index]["tableConfig"].groupServiceCode&&(e.groupServiceFilterMenuConfig=e.trangThaiHoSoList[e.index]["tableConfig"].groupServiceCode),e.trangThaiHoSoList[e.index]["tableConfig"].hasOwnProperty("disableSearchAgency")&&e.trangThaiHoSoList[e.index]["tableConfig"].disableSearchAgency&&(e.disableSearchAgency=e.trangThaiHoSoList[e.index]["tableConfig"].disableSearchAgency),e.trangThaiHoSoList[e.index]["tableConfig"].hasOwnProperty("hiddenFilterDomain")&&e.trangThaiHoSoList[e.index]["tableConfig"].hiddenFilterDomain&&(e.hiddenFilterDomain=e.trangThaiHoSoList[e.index]["tableConfig"].hiddenFilterDomain),console.log("govAgencyFilterMenuConfig",e.govAgencyFilterMenuConfig,e.groupServiceFilterMenuConfig)},index:function(t){var e=this;console.log("indexMenu",e.index),e.trangThaiHoSoList[e.index]["tableConfig"].hasOwnProperty("pagination")&&e.trangThaiHoSoList[e.index]["tableConfig"]["pagination"]?(e.limits=e.trangThaiHoSoList[e.index]["tableConfig"]["pagination"].filter((function(t){return Number(t)<=100})),e.limits.length>0?(e.limitRecord=e.trangThaiHoSoList[e.index]["tableConfig"]["pagination"][0],e.showLimit=!0):(e.showLimit=!1,e.limitRecord=15)):(e.showLimit=!1,e.limitRecord=15),e.trangThaiHoSoList[e.index]["tableConfig"].hasOwnProperty("searchGovAgencyCode")&&e.trangThaiHoSoList[e.index]["tableConfig"].searchGovAgencyCode&&(e.govAgencyFilterMenuConfig=e.trangThaiHoSoList[e.index]["tableConfig"].searchGovAgencyCode),e.trangThaiHoSoList[e.index]["tableConfig"].hasOwnProperty("groupServiceCode")&&e.trangThaiHoSoList[e.index]["tableConfig"].groupServiceCode&&(e.groupServiceFilterMenuConfig=e.trangThaiHoSoList[e.index]["tableConfig"].groupServiceCode),e.trangThaiHoSoList[e.index]["tableConfig"].hasOwnProperty("disableSearchAgency")&&e.trangThaiHoSoList[e.index]["tableConfig"].disableSearchAgency&&(e.disableSearchAgency=e.trangThaiHoSoList[e.index]["tableConfig"].disableSearchAgency),e.trangThaiHoSoList[e.index]["tableConfig"].hasOwnProperty("hiddenFilterDomain")&&e.trangThaiHoSoList[e.index]["tableConfig"].hiddenFilterDomain&&(e.hiddenFilterDomain=e.trangThaiHoSoList[e.index]["tableConfig"].hiddenFilterDomain),console.log("govAgencyFilterMenuConfig333",e.govAgencyFilterMenuConfig,e.groupServiceFilterMenuConfig)}},methods:{toggleAll:function(){var t=this;if(t.getUser("Administrator")||t.doActionGroup||t.doActionGroupKhacThuTuc)t.selected.length?t.selected=[]:t.selected=t.hosoDatas;else{if(!t.thuTucHanhChinhSelected||t.thuTucHanhChinhSelected&&"0"===t.thuTucHanhChinhSelected.serviceConfigId||t.thuTucHanhChinhSelected&&""===t.thuTucHanhChinhSelected.serviceConfigId)return;t.selected.length?t.selected=[]:t.selected=t.hosoDatas.filter((function(t){return 0!==t["assigned"]}))}t.selectMultiplePage[t.hosoDatasPage-1]["selected"]=t.selected},getUser:function(t){var e=this,a=e.$store.getters.getUser.role;if(!a)return!1;var i=a.findIndex((function(e){return e===t}));return i>=0},changeSelected:function(){var t=this;t.selectMultiplePage[t.hosoDatasPage-1]["selected"]=t.selected},resend:function(){var t=this;t.doActions(null,t.buttonConfigItem,null,!0)},closeDialogStatusAction:function(){var t=this;t.dialog_statusAction=!1,t.selectedDoAction=t.selectedDoAction.filter((function(t){return!t.statusAction}))},submitFormXuLy:function(t,e,a,i,o){var n=this;if(n.showYkienCanBoThucHien){var s=n.$refs.ykiencanbo.doExport();s.valid&&(n.textNote=s.text,n.processAction(t,e,a,i,!1))}else n.processAction(t,e,a,i,!1)},processListTTHC:function(t){var e=this,a={searchGovAgencyCode:e.govAgencyFilterMenuConfig,groupServiceCode:e.groupServiceFilterMenuConfig};e.$store.dispatch("loadListThuTucHanhChinh",a).then((function(a){if((!t.hasOwnProperty("domain")||t.hasOwnProperty("domain")&&""===String(t.domain))&&(e.listThuTucHanhChinh=a.map((function(t){return t["displayName"]=t["serviceCodeDVCQG"]?t["serviceCodeDVCQG"]+" - "+t["serviceName"]:t["serviceCode"]+" - "+t["serviceName"],t}))),e.listThuTuc=a.map((function(t){return t["displayName"]=t["serviceCodeDVCQG"]?t["serviceCodeDVCQG"]+" - "+t["serviceName"]:t["serviceCode"]+" - "+t["serviceName"],t})),t.hasOwnProperty("service_config")&&"0"!==String(t.service_config)){for(var i in e.listThuTucHanhChinh)if(String(e.listThuTucHanhChinh[i].serviceConfigId)===String(t.service_config)){if(e.thuTucHanhChinhSelected=e.listThuTucHanhChinh[i],null!==e.thuTucHanhChinhSelected&&void 0!==e.thuTucHanhChinhSelected&&e.thuTucHanhChinhSelected.hasOwnProperty("options"))if(e.govAgencyCode=e.thuTucHanhChinhSelected.govAgencyCode,e.serviceCode=e.thuTucHanhChinhSelected.serviceCode,t.hasOwnProperty("template_no"))for(var o in e.listDichVu=e.thuTucHanhChinhSelected.options,e.listDichVu)e.listDichVu[o].templateNo===t.template_no&&(e.dichVuSelected=e.listDichVu[o],e.templateNo=e.dichVuSelected.templateNo);else e.listDichVu=[],e.dichVuSelected=null,e.govAgencyCode="",e.serviceCode="",e.templateNo="";break}console.log("thuTucHanhChinhSelected---999",e.thuTucHanhChinhSelected,e.dichVuSelected)}else e.thuTucHanhChinhSelected=null,e.dichVuSelected=null,e.govAgencyCode="",e.serviceCode="",e.templateNo="";console.log("thuTucHanhChinhSelected---7777",e.thuTucHanhChinhSelected,e.dichVuSelected),e.doLoadingDataHoSo()})).catch((function(){e.doLoadingDataHoSo()}))},processListDomain:function(t){var e=this;e.$store.dispatch("getDomainLists").then((function(a){if(a.length>0&&(e.listLinhVuc=a.map((function(t){return t["displayName"]=t["domainCode"]+" - "+t["domainName"],t}))),t.hasOwnProperty("domain")&&""!==String(t.domain)){for(var i in e.listLinhVuc)String(e.listLinhVuc[i]["domainCode"])===String(t.domain)&&(e.linhVucSelected=e.listLinhVuc[i],e.domainCode=e.linhVucSelected["domainCode"]);var o={domain:e.linhVucSelected.domainCode,searchGovAgencyCode:e.govAgencyFilterMenuConfig,groupServiceCode:e.groupServiceFilterMenuConfig};e.$store.dispatch("getServiceinfoFilter",o).then((function(t){e.listThuTucHanhChinh=t.map((function(t){return t["displayName"]=t["serviceCodeDVCQG"]?t["serviceCodeDVCQG"]+" - "+t["serviceName"]:t["serviceCode"]+" - "+t["serviceName"],t})),console.log("listThuTucHanhChinh2",e.listThuTucHanhChinh)})).catch((function(){}))}else 1===e.listLinhVuc.length?e.trangThaiHoSoList[e.index]["tableConfig"].hasOwnProperty("searchCongVan")||(e.linhVucSelected=e.listLinhVuc[0],e.domainCode=e.linhVucSelected["domainCode"]):e.linhVucSelected=null;e.doLoadingDataHoSo()})).catch((function(){}))},processListCongVan:function(t){var e=this;console.log("currentQuery9999999 -- processListCongVan",t);var a=function(t){for(var e={},a=0;a<t.length;a++){var i=t[a].split("="),o=i[0],n="undefined"===typeof i[1]||i[1];if(o=o.toLowerCase(),"string"===typeof n&&(n=n.toLowerCase()),o.match(/\[(\d+)?\]$/)){var s=o.replace(/\[(\d+)?\]/,"");if(e[s]||(e[s]=[]),o.match(/\[\d+\]$/)){var r=/\[(\d+)\]/.exec(o)[1];e[s][r]=n}else e[s].push(n)}else e[o]?e[o]&&"string"===typeof e[o]?(e[o]=[e[o]],e[o].push(n)):e[o].push(n):e[o]=n}return e},i={paramSearch:e.trangThaiHoSoList[e.index]["queryParams"]?a(e.trangThaiHoSoList[e.index]["queryParams"].split("?")[1].split("&")):{}},o=e.trangThaiHoSoList[e.index]["tableConfig"].hasOwnProperty("searchCongVanTheoDonViNhan")?e.trangThaiHoSoList[e.index]["tableConfig"]["searchCongVanTheoDonViNhan"]:"";i.paramSearch=Object.assign(i.paramSearch,{searchCongVanTheoDonViNhan:o}),e.$store.dispatch("getListCongVan",i).then((function(a){if(a.length>0&&(e.listCongVan=a.map((function(t){return t["displayName"]=t["documentNo"]+" - "+t["documentDate"].split(" ")[0]+" - "+t["govAgencyName"],t}))),t.hasOwnProperty("groupDossierId")&&""!==String(t.groupDossierId))for(var i in e.listCongVan)String(e.listCongVan[i]["dossierId"])===String(t.groupDossierId)&&function(){e.congvanSelected=e.listCongVan[i];var t=e.congvanSelected?e.congvanSelected.serviceCode:"";if(t){var a=e.listThuTucHanhChinh.filter((function(e){return e.serviceCode==t}));a&&a.length>0&&(e.thuTucHanhChinhSelected=a[0],null!==e.thuTucHanhChinhSelected&&"null"!==e.thuTucHanhChinhSelected&&void 0!==e.thuTucHanhChinhSelected&&e.thuTucHanhChinhSelected.hasOwnProperty("options")?e.listDichVu=e.thuTucHanhChinhSelected.options:e.listDichVu=[],null!==e.listDichVu&&void 0!==e.listDichVu&&"undefined"!==e.listDichVu&&e.listDichVu.length>0?(e.dichVuSelected=e.listDichVu[0],e.templateNo=e.dichVuSelected.templateNo):e.dichVuSelected=null)}}();else e.congvanSelected=null})).catch((function(){}))},getDonViCongVan:function(t){var e=this,a={collectionCode:"DON_VI_CONG_VAN",level:"",parent:""};e.$store.dispatch("loadDictItems",a).then((function(a){if(e.listDonviCongVan=a.data,t.hasOwnProperty("donvigui")&&""!==String(t.donvigui))for(var i in e.listDonviCongVan)String(e.listDonviCongVan[i]["itemCode"])===String(t.donvigui)&&(e.donviguiSelected=e.listDonviCongVan[i]);else e.donviguiSelected=null})).catch((function(){e.listDonviCongVan=[]}))},checkPemissionSpecialAction:function(t,e,a){var i=this,o=!0;if("PRINT_01"!==t&&"PRINT_02"!==t&&"PRINT_03"!==t&&"GUIDE"!==t&&"PREVIEW"!==t&&"BETIMES"!==t){var n=i.$store.getters.getUsersNextAction;if(n.length>0){var s=n.filter((function(t){if(void 0!==t&&void 0!==e)return t["userId"].toString()===e["userId"].toString()}));o=s.length>0}else o=!1}return"ROLLBACK_01"!==t&&"ROLLBACK_02"!==t&&"ROLLBACK_03"!==t||(o=!1),o},paggingData:function(t){var e=this;e.limitRecord=t.numberPerPage?t.numberPerPage:15;var a=e.$router.history.current,i=a.query,o="?";for(var n in i["page"]="",i)""!==i[n]&&"undefined"!==i[n]&&void 0!==i[n]&&(o+=n+"="+i[n]+"&");o+="page="+t.page,e.$router.push({path:a.path+o})},sortAction:function(t){var e=this,a=e.$router.history.current,i=a.query,o="?";for(var n in i["sort"]=t,i["order"]=i.hasOwnProperty("order")&&"true"===i["order"]?"false":"true",i)"page"===n?o+=n+"=1&":""!==i[n]&&"undefined"!==i[n]&&void 0!==i[n]&&"null"!==i[n]&&null!==i[n]&&"step"!==n&&(o+=n+"="+i[n]+"&");if(-1===String(i["q"]).indexOf("&step")&&3!==e.menuType){var s=i.hasOwnProperty("step")?i["step"]:"";o+="step="+s+"&"}e.$router.push({path:a.path+o,query:{renew:Math.floor(100*Math.random())+1}})},doLoadingDataHoSo:function(){var t=this;t.selected=[];var e=t.$router.history.current.query;if(t.orderSort=e.hasOwnProperty("order")?e.order:"",t.sortValue=e.hasOwnProperty("sort")?e.sort:"",e.hasOwnProperty("q")){var a;a=e.q.indexOf("step")>0||e.q.indexOf("originality")>0?e.q:e["step"]?e.q+"&step="+e["step"]:e.q;var i=null;if(3!==t.menuType)i={queryParams:a,page:t.hosoDatasPage,numberPerPage:t.limitRecord,order:e.hasOwnProperty("order")?e.order:"",agency:e.hasOwnProperty("agency")?e.agency:t.govAgencyCode,service:e.hasOwnProperty("service")?e.service:t.serviceCode,template:e.hasOwnProperty("template")?e.template:t.templateNo,domain:e.hasOwnProperty("domain")?e.domain:t.domainCode,status:e.hasOwnProperty("status")?e.status:"",substatus:e.hasOwnProperty("substatus")?e.substatus:"",year:e.hasOwnProperty("year")?e.year:0,month:e.hasOwnProperty("month")?e.month:0,day:e.hasOwnProperty("day")?e.day:0,top:e.hasOwnProperty("top")?e.top:"",keyword:e.hasOwnProperty("keyword")?e.keyword:"",register:e.hasOwnProperty("register")?e.register:"",paymentStatus:e.hasOwnProperty("paymentStatus")?e.paymentStatus:"",dossierNo:t.dossierNoKey?String(t.dossierNoKey).trim():"",follow:e.hasOwnProperty("follow")?e.follow:"",originality:e.hasOwnProperty("originality")&&e["originality"]?e.originality:"",viapostal:e.hasOwnProperty("viapostal")?e.viapostal:"",fromReceiveDate:e.hasOwnProperty("fromReceiveDate")?e.fromReceiveDate:"",toReceiveDate:e.hasOwnProperty("toReceiveDate")?e.toReceiveDate:"",fromDueDate:e.hasOwnProperty("fromDueDate")?e.fromDueDate:"",toDueDate:e.hasOwnProperty("toDueDate")?e.toDueDate:"",fromReleaseDate:e.hasOwnProperty("fromReleaseDate")?e.fromReleaseDate:"",toReleaseDate:e.hasOwnProperty("toReleaseDate")?e.toReleaseDate:"",fromFinishDate:e.hasOwnProperty("fromFinishDate")?e.fromFinishDate:"",toFinishDate:e.hasOwnProperty("toFinishDate")?e.toFinishDate:"",dateCv:e.hasOwnProperty("dateCv")?e.dateCv:t.dateCvFormatted,documentNo:e.hasOwnProperty("documentNo")?e.documentNo:t.documentNo,donvigui:e.hasOwnProperty("donvigui")?e.donvigui:"",donvinhan:e.hasOwnProperty("donvinhan")?e.donvinhan:"",sort:t.sortValue};else{var o=e.hasOwnProperty("status")&&"deleted"===e["status"]?-1:"";i={queryParams:a,page:t.hosoDatasPage,numberPerPage:t.limitRecord,order:e.hasOwnProperty("order")?e.order:"",agency:e.hasOwnProperty("agency")?e.agency:t.govAgencyCode,service:e.hasOwnProperty("service")?e.service:t.serviceCode,template:e.hasOwnProperty("template")?e.template:t.templateNo,domain:e.hasOwnProperty("domain")?e.domain:t.domainCode,status:e.hasOwnProperty("status")&&e["status"]&&"deleted"!==e["status"]?e.status:"",substatus:e.hasOwnProperty("substatus")?e.substatus:"",year:e.hasOwnProperty("year")?e.year:0,month:e.hasOwnProperty("month")?e.month:0,day:e.hasOwnProperty("day")?e.day:0,top:e.hasOwnProperty("top")?e.top:"",keyword:e.hasOwnProperty("keyword")?e.keyword:"",register:e.hasOwnProperty("register")?e.register:"",originality:e.hasOwnProperty("originality")&&e["originality"]?e.originality:o,paymentStatus:e.hasOwnProperty("paymentStatus")?e.paymentStatus:"",dossierNo:t.dossierNoKey?String(t.dossierNoKey).trim():"",follow:e.hasOwnProperty("follow")?e.follow:"",viapostal:e.hasOwnProperty("viapostal")?e.viapostal:"",fromReceiveDate:e.hasOwnProperty("fromReceiveDate")?e.fromReceiveDate:"",toReceiveDate:e.hasOwnProperty("toReceiveDate")?e.toReceiveDate:"",fromDueDate:e.hasOwnProperty("fromDueDate")?e.fromDueDate:"",toDueDate:e.hasOwnProperty("toDueDate")?e.toDueDate:"",fromReleaseDate:e.hasOwnProperty("fromReleaseDate")?e.fromReleaseDate:"",toReleaseDate:e.hasOwnProperty("toReleaseDate")?e.toReleaseDate:"",fromFinishDate:e.hasOwnProperty("fromFinishDate")?e.fromFinishDate:"",toFinishDate:e.hasOwnProperty("toFinishDate")?e.toFinishDate:"",dateCv:e.hasOwnProperty("dateCv")?e.dateCv:t.dateCvFormatted,documentNo:e.hasOwnProperty("documentNo")?e.documentNo:t.documentNo,donvigui:e.hasOwnProperty("donvigui")?e.donvigui:"",donvinhan:e.hasOwnProperty("donvinhan")?e.donvinhan:"",sort:t.sortValue}}if((t.groupServiceFilterMenuConfig||t.disableSearchAgency)&&(i.agency=""),t.trangThaiHoSoList[t.index]["tableConfig"].hasOwnProperty("searchCongVan")){var n={groupDossierId:e.hasOwnProperty("groupDossierId")?e.groupDossierId:t.congvanSelected?t.congvanSelected.dossierId:""};i=Object.assign(i,n)}t.$store.dispatch("loadingDataHoSo",i).then((function(e){if(t.hosoDatas=e.data,t.hosoDatasTotal=e.total,t.limits=[15,30,50,100],t.hosoTotalPage=Math.ceil(t.hosoDatasTotal/t.limitRecord),t.hosoTotalPage>0&&0===t.selectMultiplePage.length)for(var a=0;a<t.hosoTotalPage;a++){var i={selected:[],page:a+1};t.selectMultiplePage.push(i)}t.selected=t.selectMultiplePage[t.hosoDatasPage-1]["selected"]})).catch((function(e){t.hosoDatas=[],t.hosoDatasTotal=0}))}3===t.menuType||"3"===String(t.menuType)?setTimeout((function(){t.dossierCounting=[],t.$store.dispatch("loadingDossierCounting").then((function(e){if(null!==e&&void 0!==e){if(t.trangThaiHoSoList[t.index]["tableConfig"].hasOwnProperty("advanceSearchCounting")){var a=t.trangThaiHoSoList[t.index]["tableConfig"]["advanceSearchCounting"].split(",");e.forEach((function(e){a.filter((function(t){return t===e["key"]})).length>0&&t.dossierCounting.push(e)}))}else t.dossierCounting=e;if(t.getUser("Administrator_data")){var i={key:"deleted",title:"Hồ sơ đã xóa",count:0};t.dossierCounting.push(i)}}else t.dossierCounting=[];t.dossierCountingShow=!0})).catch((function(){}))}),200):t.dossierCountingShow=!1},changeServiceConfigs:function(t){var e=this;e.selectMultiplePage=[],null!==t&&"null"!==t&&void 0!==t&&t.hasOwnProperty("options")?e.listDichVu=t.options:e.listDichVu=[],null!==e.listDichVu&&void 0!==e.listDichVu&&"undefined"!==e.listDichVu&&e.listDichVu.length>0?(e.dichVuSelected=e.listDichVu[0],e.templateNo=e.dichVuSelected.templateNo):e.dichVuSelected=null;var a=e.$router.history.current,i=a.query,o="?";for(var n in i["service_config"]="",i["template_no"]="",i)"page"===n?o+=n+"=1&":""!==i[n]&&"undefined"!==i[n]&&void 0!==i[n]&&"step"!==n&&(o+=n+"="+i[n]+"&");if(-1===String(i["q"]).indexOf("&step")&&3!==e.menuType){var s=i.hasOwnProperty("step")?i["step"]:"";o+="step="+s+"&"}null!==e.listDichVu&&void 0!==e.listDichVu&&"undefined"!==e.listDichVu&&e.listDichVu.length>0?(o+="service_config="+t.serviceConfigId,o+="&template_no="+e.dichVuSelected.templateNo,e.govAgencyCode=t.govAgencyCode,e.serviceCode=t.serviceCode):(e.templateNo="",e.govAgencyCode="",e.serviceCode=""),e.$router.push({path:a.path+o})},changeServiceConfigsGuide:function(t){var e=this;e.listDichVuGuide=[],setTimeout((function(){null!==t&&"null"!==t&&void 0!==t&&t.hasOwnProperty("options")?e.listDichVuGuide=t.options:e.listDichVuGuide=[],null!==e.listDichVuGuide&&void 0!==e.listDichVuGuide&&"undefined"!==e.listDichVuGuide&&e.listDichVuGuide.length>0?(e.dichVuSelectedGuide=e.listDichVuGuide[0],e.templateNoGuide=e.dichVuSelectedGuide.templateNo):e.dichVuSelectedGuide=null}),300)},changeDomain:function(t){console.log("change Domain",t);var e=this;e.selectMultiplePage=[],e.linhVucSelected=t,t?setTimeout((function(){var t={domain:e.linhVucSelected.domainCode,searchGovAgencyCode:e.govAgencyFilterMenuConfig,groupServiceCode:e.groupServiceFilterMenuConfig};e.$store.dispatch("getServiceinfoFilter",t).then((function(t){e.listThuTucHanhChinh=t.map((function(t){return t["displayName"]=t["serviceCodeDVCQG"]?t["serviceCodeDVCQG"]+" - "+t["serviceName"]:t["serviceCode"]+" - "+t["serviceName"],t}))})).catch((function(){}))}),100):e.listThuTucHanhChinh=e.listThuTuc,e.domainCode=null!==t&&void 0!==t?e.linhVucSelected["domainCode"]:"",e.xacthuc_BNG&&e.postFieldPick("domain",e.linhVucSelected);var a=e.$router.history.current,i=a.query,o="?";for(var n in i["domain"]="",i)"page"===n?o+=n+"=1&":""!==i[n]&&"undefined"!==i[n]&&void 0!==i[n]&&"step"!==n&&(o+=n+"="+i[n]+"&");if(-1===String(i["q"]).indexOf("&step")&&3!==e.menuType){var s=i.hasOwnProperty("step")?i["step"]:"";o+="step="+s+"&"}o+="domain="+e.domainCode,e.$router.push({path:a.path+o,query:{renew:Math.floor(100*Math.random())+1}})},changeCongVan:function(t){var e=this;console.log("congvanSelected",t),e.selectMultiplePage=[],e.congvanSelected=t;var a=t?t.serviceCode:"";if(a){var i=e.listThuTucHanhChinh.filter((function(t){return t.serviceCode==a}));i&&i.length>0&&(e.thuTucHanhChinhSelected=i[0],null!==e.thuTucHanhChinhSelected&&"null"!==e.thuTucHanhChinhSelected&&void 0!==e.thuTucHanhChinhSelected&&e.thuTucHanhChinhSelected.hasOwnProperty("options")?e.listDichVu=e.thuTucHanhChinhSelected.options:e.listDichVu=[],null!==e.listDichVu&&void 0!==e.listDichVu&&"undefined"!==e.listDichVu&&e.listDichVu.length>0?(e.dichVuSelected=e.listDichVu[0],e.templateNo=e.dichVuSelected.templateNo):e.dichVuSelected=null)}var o=e.congvanSelected?e.congvanSelected.dossierId:"",n=e.$router.history.current,s=n.query,r="?";for(var c in s["groupDossierId"]="",s["service_config"]="",s["template_no"]="",s)"page"===c?r+=c+"=1&":""!==s[c]&&"undefined"!==s[c]&&void 0!==s[c]&&"step"!==c&&(r+=c+"="+s[c]+"&");if(-1===String(s["q"]).indexOf("&step")&&3!==e.menuType){var l=s.hasOwnProperty("step")?s["step"]:"";r+="step="+l+"&"}r+="groupDossierId="+o,null!==e.listDichVu&&void 0!==e.listDichVu&&"undefined"!==e.listDichVu&&e.listDichVu.length>0?(r+="&service_config="+e.thuTucHanhChinhSelected.serviceConfigId,r+="&template_no="+e.dichVuSelected.templateNo,e.govAgencyCode=e.thuTucHanhChinhSelected.govAgencyCode,e.serviceCode=e.thuTucHanhChinhSelected.serviceCode):(e.templateNo="",e.govAgencyCode="",e.serviceCode=""),e.$router.push({path:n.path+r,query:{renew:Math.floor(100*Math.random())+1}})},changeDonViGuiCongVan:function(t){var e=this;e.selectMultiplePage=[],e.donviguiSelected=t;var a=e.donviguiSelected?e.donviguiSelected.itemCode:"",i=e.$router.history.current,o=i.query,n="?";for(var s in o["donvigui"]="",o)"page"===s?n+=s+"=1&":""!==o[s]&&"undefined"!==o[s]&&void 0!==o[s]&&"step"!==s&&(n+=s+"="+o[s]+"&");if(-1===String(o["q"]).indexOf("&step")&&3!==e.menuType){var r=o.hasOwnProperty("step")?o["step"]:"";n+="step="+r+"&"}n+="donvigui="+a,e.$router.push({path:i.path+n,query:{renew:Math.floor(100*Math.random())+1}})},changeDossierNoKey:function(){var t=this;t.selectMultiplePage=[],setTimeout((function(){t.doLoadingDataHoSo()}),200)},clearDossierNoKey:function(){this.dossierNoKey="",this.changeDossierNoKey()},changeDichVuConfigs:function(t){var e=this;e.selectMultiplePage=[];var a=e.$router.history.current,i=a.query,o="?";for(var n in i["template_no"]="",i)""!==i[n]&&"undefined"!==i[n]&&void 0!==i[n]&&(o+=n+"="+i[n]+"&");null!==t&&void 0!==t&&(o+="template_no="+t.templateNo,e.templateNo=t.templateNo),e.$router.push({path:a.path+o})},btnActionEvent:function(t,e,a,i){var o=this,n=o.$router.history.current;n.query;if(o.buttonConfigItem={},o.buttonConfigItem=e,o.itemAction=e,o.indexAction=a,!e.hasOwnProperty("requiredCVDen")||o.congvanSelected&&o.thuTucHanhChinhSelected){if("NEW"===String(e.form)||"NEW_GROUP"===String(e.form)||"NEW_GROUP_CV"===String(e.form)||"NEW_GROUP_CV_DI"===String(e.form)){var s=!0;null!==o.dichVuSelected&&void 0!==o.dichVuSelected&&"undefined"!==o.dichVuSelected&&null!==o.listDichVu&&void 0!==o.listDichVu&&1===o.listDichVu.length&&(s=!1),"NEW_GROUP_CV_DI"===String(e.form)&&(s=!1),s?o.dialogAction=!0:"NEW_GROUP_CV_DI"===String(e.form)?o.serviceCode&&o.templateNo?(e.hasOwnProperty("requiredCVDen")&&(e=Object.assign(e,{requiredCVDenGovCode:o.congvanSelected.govAgencyCode,requiredCVDenGroupId:o.congvanSelected.dossierId})),o.$store.commit("setFormActionGroup",e),o.doCreateDossier()):L.a.error("Chưa chọn thủ tục hành chính"):(e.hasOwnProperty("requiredCVDen")&&(e=Object.assign(e,{requiredCVDenGovCode:o.congvanSelected.govAgencyCode,requiredCVDenGroupId:o.congvanSelected.dossierId})),o.$store.commit("setFormActionGroup",e),o.doCreateDossier())}else if("UPDATE"===String(e.form))"BNG-270817"!==t.serviceCode&&"BNG-270821"!==t.serviceCode&&"BNG-270820"!==t.serviceCode&&"BNG-270816"!==t.serviceCode&&"BNG-270819"!==t.serviceCode&&"BNG-270815"!==t.serviceCode||(o.$router.history.current.query["template_no"]=t.dossierTemplateNo,o.$router.history.current.query["serviceCode"]=t.serviceCode),o.$router.history.current.query["template_no"]=t.dossierTemplateNo,o.$router.history.current.query["serviceCode"]=t.serviceCode,o.$router.push({path:"/danh-sach-ho-so/"+o.index+"/ho-so/"+t.dossierId+"/"+o.itemAction.form,query:o.$router.history.current.query});else if("ADD"===String(e.form))o.$router.push({path:"/danh-sach-ho-so/"+o.index+"/bo-sung-ho-so/"+t.dossierId,query:o.$router.history.current.query});else if("IMPORT"===String(e.form))null!==o.dichVuSelected&&void 0!==o.dichVuSelected&&"undefined"!==o.dichVuSelected&&null!==o.listDichVu&&void 0!==o.listDichVu?o.doImportDossier():alert("Chọn thủ tục để thực hiện");else if("COPY"===String(e.form))o.doCopy(t,e,a,i);else if("CANCEL"===String(e.form))o.doCancel(t,e,a,i);else if("PRINT_01"===String(e.form))o.doPrint01(t,e,a,i);else if("PRINT_02"===String(e.form))o.doPrint02(t,e,a,i);else if("PRINT_03"===String(e.form))o.doPrint03(t,e,a,i);else if("GUIDING"===String(e.form))o.thuTucHanhChinhSelectedGuide="",o.dichVuSelectedGuide="",o.tphsGuide=[],o.thuTucHanhChinhSelected&&(o.thuTucHanhChinhSelectedGuide=o.thuTucHanhChinhSelected,o.listDichVuGuide=o.thuTucHanhChinhSelectedGuide.hasOwnProperty("options")?o.thuTucHanhChinhSelectedGuide["options"]:"",o.dichVuSelectedGuide=o.dichVuSelected?o.dichVuSelected:"",o.templateNoGuide=o.dichVuSelectedGuide?o.dichVuSelectedGuide.templateNo:""),o.docTypePrint=e.document,o.dialog_printGuide=!0,o.$refs.formGuide.reset();else if("DENIED"===String(e.form))o.docTypePrint=e.document,o.thuTucHanhChinhSelectedGuide="",o.dichVuSelectedGuide="",o.thuTucHanhChinhSelected&&(o.thuTucHanhChinhSelectedGuide=o.thuTucHanhChinhSelected,o.listDichVuGuide=o.thuTucHanhChinhSelectedGuide.hasOwnProperty("options")?o.thuTucHanhChinhSelectedGuide["options"]:"",o.dichVuSelectedGuide=o.dichVuSelected?o.dichVuSelected:"",o.templateNoGuide=o.dichVuSelectedGuide?o.dichVuSelectedGuide.templateNo:""),o.dialog_denied=!0,o.$refs.formDenied.reset();else if("PREVIEW"===String(e.form))o.doPreview(t,e,a,i);else if("ACTIONS"===String(e.form))o.doActions(t,e,a,i);else if("DELETE"===String(e.form))o.doDeleteDossier(t,e,a,i);else if("ROLLBACK_01"===String(e.form)){var r={actionCode:9e3};o.processAction(t,e,r,a,!0)}else if("ROLLBACK_02"===String(e.form)){var c={actionCode:9e3};o.processAction(t,e,c,a,!0)}else if("OVERDUE"===String(e.form)){var l={actionCode:8500,dossierId:t.dossierId,overdue:t["extendDate"]};o.processPullBtnDetailRouter(t,null,l,null,8500)}else if("PREOVERDUE"===String(e.form)){var d={actionCode:8501,dossierId:t.dossierId,preoverdue:t["extendDate"]};o.processPullBtnDetailRouter(t,null,d,null,8501)}else if("BETIMES"===String(e.form)){var u={actionCode:8400,dossierId:t.dossierId,betimes:t["extendDate"]};o.processPullBtnDetailRouter(t,null,u,null,8400)}else if("CHANGE_DATA_DOSSIER"===String(e.form))o.doChangeDossier(t,e,a,i);else if("UNDO_DOSSIER"===String(e.form))o.doUndoDossier(t,e,a,i);else if("RESTORE_DOSSIER"===String(e.form))o.doRestoreDossier(t,e,a,i);else if("GOTO_DONE"===String(e.form)){if(!t)return void alert("Chọn hồ sơ để thực hiện");var h={stepCode:400,stepName:"hoàn thành"};o.gotoStep(t,h)}else if("GOTO_CANCEL"===String(e.form)){if(!t)return void alert("Chọn hồ sơ để thực hiện");var p={stepCode:410,stepName:"rút"};o.gotoStep(t,p)}else if("GOTO_DENY"===String(e.form)){if(!t)return void alert("Chọn hồ sơ để thực hiện");var m={stepCode:420,stepName:"từ chối"};o.gotoStep(t,m)}}else o.congvanSelected||o.thuTucHanhChinhSelected?!o.congvanSelected&&o.thuTucHanhChinhSelected?(alert("Vui lòng chọn công văn để thực hiện"),o.focusSelect=1):(alert("Vui lòng chọn thủ tục để thực hiện"),o.focusSelect=2):(alert("Vui lòng chọn công văn và thủ tục để thực hiện"),o.focusSelect=1)},doPrint01:function(t,e,a,i){var o=this;o.dialogPDFLoading=!0,o.dialogPDF=!0;var n={dossierId:t.dossierId,document:e.document};o.$store.dispatch("doPrint01",n).then((function(t){o.dialogPDFLoading=!1,document.getElementById("dialogPDFPreview").src=t})).catch((function(){}))},doPrint02:function(t,e,a,i){var o=this;if(null!==o.thuTucHanhChinhSelected&&void 0!==o.thuTucHanhChinhSelected&&"undefined"!==o.thuTucHanhChinhSelected||o.doActionGroup&&o.doActionGroupKhacThuTuc){if(0===o.selectedDoAction.length)return void alert("Chọn hồ sơ để thực hiện");var n={document:e.document,dossiers:JSON.stringify(o.selectedDoAction)};o.dialogPDFLoading=!0,o.dialogPDF=!0,o.$store.dispatch("doPrint02",n).then((function(t){o.dialogPDFLoading=!1,document.getElementById("dialogPDFPreview").src=t})).catch((function(){}))}else alert("Loại thủ tục bắt buộc phải chọn")},doPrint03:function(t,e,a,i){var o=this;o.dialogPDFLoading=!0,o.dialogPDF=!0;var n={dossierId:t.dossierId,document:e?e.document:""},s=0,r=function t(){setTimeout((function(){o.$store.dispatch("doPrint03",n).then((function(e){"pending"===e&&s<=10?(s+=1,t()):s>10?o.dialogPDFLoading=!1:(o.dialogPDFLoading=!1,o.dialogPDF=!0,setTimeout((function(){document.getElementById("dialogPDFPreview").src=e}),100))}))}),1e3)};r()},doGuiding:function(t){var e=this;if(e.$refs.formGuide.validate()){e.loadingAction=!0;var a=[];for(var i in e.tphsGuide)e.tphsGuide[i]["fileMark"]||a.push(e.tphsGuide[i]["partNo"]);var o={serviceConfigId:e.thuTucHanhChinhSelectedGuide.serviceConfigId,serviceCode:e.thuTucHanhChinhSelectedGuide.serviceCode,serviceName:e.thuTucHanhChinhSelectedGuide.serviceName,templateNo:e.templateNoGuide,applicantName:e.applicantNameGuide,applicantAddress:e.applicantAddressGuide,applicantEmail:e.applicantEmailGuide,applicantTelNo:e.applicantTelNoGuide,govAgencyCode:e.thuTucHanhChinhSelectedGuide.govAgencyCode,govAgencyName:e.thuTucHanhChinhSelectedGuide.govAgencyName,typeCode:e.docTypePrint?e.docTypePrint:"DOC_03",partNo:a.toString(),applicantNote:e.applicantNoteGuide,type:"completed",applicantType:e.applicantTypeGuide?"citizen":"business"};"doc"===t&&(o["reportType"]="word"),"doc"!==t&&(e.dialogPDFLoading=!0,e.dialogPDF=!0),e.$store.dispatch("doGuiding",o).then((function(a){e.loadingAction=!1,e.dialog_printGuide=!1,e.dialogPDFLoading=!1,"doc"!==t&&(document.getElementById("dialogPDFPreview").src=a)})).catch((function(){e.loadingAction=!1}))}},doDenied:function(t){var e=this;if(e.$refs.formDenied.validate()){e.loadingAction=!0;var a={serviceConfigId:e.thuTucHanhChinhSelectedGuide.serviceConfigId,serviceCode:e.thuTucHanhChinhSelectedGuide.serviceCode,serviceName:e.thuTucHanhChinhSelectedGuide.serviceName,templateNo:e.templateNoGuide,applicantName:e.applicantNameGuide,applicantAddress:e.applicantAddressGuide,applicantEmail:e.applicantEmailGuide,applicantTelNo:e.applicantTelNoGuide,govAgencyCode:e.thuTucHanhChinhSelectedGuide.govAgencyCode,govAgencyName:e.thuTucHanhChinhSelectedGuide.govAgencyName,typeCode:e.docTypePrint?e.docTypePrint:"DOC_03",applicantNote:e.applicantNoteGuide,type:"denied",applicantType:e.applicantTypeGuide?"citizen":"business"};"doc"===t&&(a["reportType"]="word"),"doc"!==t&&(e.dialogPDFLoading=!0,e.dialogPDF=!0),e.$store.dispatch("doGuiding",a).then((function(a){e.loadingAction=!1,e.dialog_printGuide=!1,e.dialogPDFLoading=!1,"doc"!==t&&(document.getElementById("dialogPDFPreview").src=a)})).catch((function(){e.loadingAction=!1}))}},doPreview:function(t,e,a,i){var o=this;o.dialogPDFLoading=!0,o.dialogPDF=!0;var n={dossierId:t.dossierId,document:e.document};o.$store.dispatch("doPrint03",n).then((function(t){o.dialogPDFLoading=!1,document.getElementById("dialogPDFPreview").src=t})).catch((function(){}))},doActions:function(t,e,a,i){var o=this;o.$router.history.current.query,e.action;if(i)if(o.countSelected=0,1===o.selectedDoAction.length)for(var n in o.selectedDoAction){var s=o.selectedDoAction[n];o.$router.push({path:"/danh-sach-ho-so/"+o.index+"/chi-tiet-ho-so/"+s["dossierId"],query:{activeTab:"tabs-1",btnIndex:null}})}else o.selectedDoAction.length>1?o.$store.dispatch("loadActionActive",e).then((function(){o.$store.dispatch("loadDossierSelected",o.selectedDoAction).then((function(){var t=o.selectedDoAction.map((function(t){return t.dossierId})).join(","),a=o.$router.history.current.query;a["dossiers"]=t,a["actionActive"]=JSON.stringify(e),o.$router.push({path:"/danh-sach-ho-so/"+o.index+"/xu-ly-ho-so",query:a})})).catch((function(){}))})).catch((function(){})):alert("Chọn hồ sơ để thao tác")},doCopy:function(t,e,a,i){var o=this,n={dossierId:t.dossierId};o.loadingAction=!0,o.$store.dispatch("doCopy",n).then((function(t){o.loadingAction=!1,o.indexAction=-1,o.$router.push({path:"/danh-sach-ho-so/"+o.index+"/ho-so/"+t.dossierId+"/"+o.itemAction.form,query:o.$router.history.current.query})})).catch((function(t){o.loadingAction=!1}))},doCancel:function(t,e,a,i){var o=this;if(o.loadingAction=!0,i);else{var n={dossierId:t.dossierId};o.$store.dispatch("doCancel",n).then((function(t){o.loadingAction=!1,o.indexAction=-1,o.$router.push({path:"/danh-sach-ho-so/"+o.index+"/ho-so/"+t.dossierId+"/"+o.itemAction.form,query:o.$router.history.current.query})})).catch((function(t){o.loadingAction=!1}))}},doChangeDossier:function(t,e,a,i){var o=this;o.$router.history.current.query;if(i)if(o.selectedDoAction.length>0){var n=o.selectedDoAction.length;o.actionId=9100,o.dossierIdSelected=o.selectedDoAction[n-1].dossierId,o.dialog_extraForm=!0}else alert("Chọn hồ sơ để thực hiện")},doUndoDossier:function(t,e,a,i){var o=this;o.$router.history.current.query;if(o.selectedDoAction.length>0){var n=o.selectedDoAction.length,s=confirm("Xác thực Undo hồ sơ với mã: "+o.selectedDoAction[n-1].dossierNo);if(s){var r={dossierId:o.selectedDoAction[n-1].dossierId};o.$store.dispatch("rollBack",r).then((function(t){setTimeout((function(){o.doLoadingDataHoSo()}),300)})).catch((function(){setTimeout((function(){o.doLoadingDataHoSo()}),300)}))}}else alert("Chọn hồ sơ để thực hiện")},gotoStep:function(t,e){var a=this;a.$router.history.current.query;if(a.selectedDoAction.length>0){var i=a.selectedDoAction.length,o=confirm("Xác thực "+e["stepName"]+" hồ sơ với mã: "+a.selectedDoAction[i-1].dossierNo);if(o){var n={dossierId:a.selectedDoAction[i-1].dossierId,stepCode:e["stepCode"]};a.$store.dispatch("goToStep",n).then((function(t){setTimeout((function(){a.doLoadingDataHoSo()}),300)})).catch((function(){setTimeout((function(){a.doLoadingDataHoSo()}),300)}))}}else alert("Chọn hồ sơ để thực hiện")},doChangeDossierExtraForm:function(){var t=this,e=t.$refs.formBoSungThongTinNgan.checkValid();if(e){var a=t.$refs.formBoSungThongTinNgan.formSubmitData();if(a){var i=confirm("Bạn có chắc chắn thực hiện hành động điều chỉnh dữ liệu?");if(i){var o=t.selectedDoAction.length,n={dossierId:t.selectedDoAction[o-1].dossierId,actionCode:t.actionId,payload:a};t.$store.dispatch("processDossierRouter",n).then((function(e){t.doLoadingDataHoSo(),t.dialog_extraForm=!1})).catch((function(){t.dialog_extraForm=!1,t.doLoadingDataHoSo()}))}}else t.dialog_extraForm=!1}},doRestoreDossier:function(){var t=this,e=confirm("Bạn có chắc chắn thực hiện hành động khôi phục hồ sơ?");e&&(t.selectedDoAction.length>0?function(){var e=0,a=t.selectedDoAction.length;for(var i in t.selectedDoAction){var o={dossierId:t.selectedDoAction[i]["dossierId"]};t.selectedDoAction[i]["originality"]&&t.$store.dispatch("restoreDossier",o).then((function(i){e+=1,e===a&&t.doLoadingDataHoSo()})).catch((function(){e+=1,e===a&&t.doLoadingDataHoSo()}))}}():alert("Chọn hồ sơ để thực hiện"))},doDeleteDossier:function(t,e,a,i){var o=this,n=confirm("Bạn có chắc chắn thực hiện hành động xóa hồ sơ?");if(!n)return!1;var s=o.$router.history.current.query;if(i){var r={dossierId:0};if(o.selectedDoAction.length>0){var c=[];for(var l in o.selectedDoAction)c.push(o.selectedDoAction[l]["dossierId"]);r["dossierId"]=c,o.$store.dispatch("deleteDossierPatch",r).then((function(t){})).catch((function(){}))}else alert("Chọn hồ sơ để thực hiện")}else{var d={dossierId:t.dossierId};o.$store.dispatch("deleteDossier",d).then((function(t){o.dialogActionProcess=!1,o.loadingActionProcess=!1,o.$router.push({path:o.$router.history.current.path,query:{recount:Math.floor(100*Math.random())+1,renew:Math.floor(100*Math.random())+1,q:s["q"]}})})).catch((function(){}))}},deleteCongVan:function(t,e){var a=this,i={dossierId:t.dossierId},o=confirm("Bạn có chắc chắn thực hiện xóa công văn?");o&&a.$store.dispatch("deleteDossier",i).then((function(t){L.a.success("Xóa công văn thành công"),a.doLoadingDataHoSo()})).catch((function(){}))},doCreateDossier:function(){var t=this,e={serviceCode:t.serviceCode,govAgencyCode:t.govAgencyCode,templateNo:t.templateNo,originality:"NEW_GROUP"===t.itemAction["form"]||"NEW_GROUP_CV"===t.itemAction["form"]||"NEW_GROUP_CV_DI"===t.itemAction["form"]?9:t.getOriginality()},a={dossierTemplateNo:t.templateNo};t.$store.dispatch("loadDossierFormTemplates",a).then((function(a){var i=!(!a["newFormScript"]||!a["newFormScript"].startsWith("MAU_CV_"))&&a["newFormScript"];if(a["newFormScript"]&&!i)t.$router.push({path:"/danh-sach-ho-so/0/ho-so/0/"+t.itemAction.form,query:t.$router.history.current.query});else{t.$store.commit("setDataCreateDossier",e),t.loadingAction=!0;var o=t.$router.history.current.query;"NEW_GROUP_CV"!==t.itemAction["form"]&&"NEW_GROUP_CV_DI"!==t.itemAction["form"]||(o=Object.assign(o,{formActionGroup:JSON.stringify(t.itemAction)}),console.log("query_redirect_Landing",o)),t.$store.dispatch("postDossier",e).then((function(e){t.loadingAction=!1,t.indexAction=-1,t.$router.push({path:"/danh-sach-ho-so/"+t.index+"/ho-so/"+e.dossierId+"/"+t.itemAction.form,query:o})})).catch((function(e){t.loadingAction=!1}))}})).catch((function(){}))},doSubmitDialogAction:function(t){var e=this,a=e.$router.history.current;a.query;e.$refs.form1.validate()&&e.doCreateDossier()},processPullBtnDynamics:function(t){var e=this;e.btnDossierDynamics=[];var a={dossierId:t.dossierId,dossierStatus:t.dossierStatus,dossierSubStatus:t.dossierSubStatus};if(e.dossierId=t.dossierId,""===t.dossierStatus||""===t.dossierSubStatus)e.$store.dispatch("pullNextactions",a).then((function(t){e.btnDossierDynamics=t})).catch((function(){}));else{e.btnStepsDynamics=[];var i=[e.$store.dispatch("pullNextactions",a),e.$store.dispatch("pullBtnConfigStep",a)];Promise.all(i).then((function(t){e.btnDossierDynamics=t[0],e.btnStepsDynamics=t[1]})).catch((function(t){e.$store.dispatch("pullNextactions",a).then((function(t){e.btnDossierDynamics=t})).catch((function(){}))}))}},processAction:function(t,e,a,i,o){var n=this,s=null;n.payments&&(s={requestPayment:n.payments["requestPayment"],advanceAmount:Number(n.payments["advanceAmount"].toString().replace(/\./g,"")),feeAmount:Number(n.payments["feeAmount"].toString().replace(/\./g,"")),serviceAmount:Number(n.payments["serviceAmount"].toString().replace(/\./g,"")),shipAmount:Number(n.payments["shipAmount"].toString().replace(/\./g,""))});var r={dossierId:t.dossierId,actionCode:a.actionCode,toUsers:n.assign_items,payment:s,userNote:n.textNote?n.textNote:""};n.dossierId=t.dossierId;var c=n.$router.history.current.query,l="?";for(var d in c["recount"]=Math.floor(100*Math.random())+1,c["renew"]=Math.floor(100*Math.random())+1,c)""!==c[d]&&"undefined"!==c[d]&&void 0!==c[d]&&(l+=d+"="+c[d]+"&");if(n.loadingActionProcess=!0,o){var u=confirm("Bạn có muốn thực hiện hành động này?");if(!u)return!1;n.$store.dispatch("processDossierRouter",r).then((function(t){n.dialogActionProcess=!1,n.loadingActionProcess=!1,n.$router.push({path:n.$router.history.current.path+l})})).catch((function(){}))}else t.statusAction||n.$store.dispatch("processCheckNextActions",r).then((function(t){n.$store.dispatch("processDossierRouter",t).then((function(t){n.dialogActionProcess=!1,n.loadingActionProcess=!1,"ACTIONS"===String(e.form)?(n.hosoDatas.splice(i,1),n.selectedDoAction[i].statusAction=!0,n.countSelected+=1,n.countSelected===n.selectedDoAction.length&&n.statusFailed>0&&n.selectedDoAction.length>1?n.dialog_statusAction=!0:n.countSelected===n.selectedDoAction.length&&0===n.statusFailed&&n.$router.push({path:n.$router.history.current.path,query:{recount:Math.floor(100*Math.random())+1,renew:Math.floor(100*Math.random())+1,q:c["q"]}})):n.$router.push({path:n.$router.history.current.path,query:{recount:Math.floor(100*Math.random())+1,renew:Math.floor(100*Math.random())+1,q:c["q"]}})})).catch((function(){n.loadingActionProcess=!1,"ACTIONS"===String(e.form)&&(n.countSelected+=1,n.statusFailed+=1,n.selectedDoAction[i].statusAction=!1,n.countSelected===n.selectedDoAction.length&&n.statusFailed>0&&n.selectedDoAction.length>1&&(n.dialog_statusAction=!0))}))})).catch((function(){}))},processPullBtnDetailRouter:function(t,e,a,i,o){var n=this,s=!1;if(n.dossierId=t.dossierId,n.showYkienCanBoThucHien=!1,n.showFormBoSungThongTinNgan=!1,n.showPhanCongNguoiThucHien=!1,n.showTaoTaiLieuKetQua=!1,n.showKyPheDuyetTaiLieu=!1,n.showTraKetQua=!1,n.showXacNhanThuPhi=!1,n.showThuPhi=!1,n.showThucHienThanhToanDienTu=!1,n.dossierItemDialogPick=t,n.itemDialogPick=e,n.resultDialogPick=a,n.indexDialogPick=i,n.userNote=0,null!==a&&void 0!==a&&"undefined"!==a&&(a.hasOwnProperty("userNote")||a.hasOwnProperty("extraForm")||a.hasOwnProperty("allowAssignUser")||a.hasOwnProperty("createFiles")||a.hasOwnProperty("eSignature")||a.hasOwnProperty("returnFiles")||a.hasOwnProperty("payment")||a.hasOwnProperty("overdue")||a.hasOwnProperty("betimes"))){if(!a.hasOwnProperty("userNote")||1!==a.userNote&&"1"!==a.userNote&&2!==a.userNote&&"2"!==a.userNote||(s=!0,n.showYkienCanBoThucHien=!0,n.userNote=a.userNote),a.hasOwnProperty("extraForm")&&a.extraForm&&(s=!0,n.showFormBoSungThongTinNgan=!0),a.hasOwnProperty("allowAssignUser")&&0!==a.allowAssignUser&&(n.assign_items=a.toUsers,n.type_assign=a.allowAssignUser,s=!0,n.showPhanCongNguoiThucHien=!0),a.hasOwnProperty("returnFiles")&&null!==a.createFiles&&void 0!==a.createFiles&&"undefined"!==a.createFiles&&a.createFiles.length>0&&(s=!0,n.showTaoTaiLieuKetQua=!0),a.hasOwnProperty("eSignature")&&a.eSignature&&(s=!0,n.showKyPheDuyetTaiLieu=!0),a.hasOwnProperty("returnFiles")&&null!==a.returnFiles&&void 0!==a.returnFiles&&"undefined"!==a.returnFiles&&a.returnFiles.length>0&&(s=!0,n.showTraKetQua=!0,n.returnFiles=a.returnFiles),a.hasOwnProperty("payment")&&null!==a.payment&&void 0!==a.payment&&"undefined"!==a.payment&&a.payment.requestPayment>0)if(2===a.payment.requestPayment||"2"===a.payment.requestPayment){s=!0;var r={dossierId:n.dossierId};n.$store.dispatch("loadDossierPayments",r).then((function(t){n.paymentProfile=t})).catch((function(t){}))}else s=!0,n.showThuPhi=!0,n.payments=a.payment,n.viaPortalDetail=t.viaPostal;a.hasOwnProperty("overdue")&&(s=!0),a.hasOwnProperty("betimes")&&(s=!0)}if(s){var c={activeTab:"tabs-1",btnIndex:o};n.$router.push({path:"/danh-sach-ho-so/"+n.index+"/chi-tiet-ho-so/"+t["dossierId"],query:c})}else n.processAction(t,e,a,i,!0)},processPullBtnDetail:function(t,e,a,i){var o=this;if(1===e["enable"]||"special"===e["autoEvent"]){o.itemAction=e;var n={dossierId:t.dossierId,actionId:e.processActionId};o.dossierId=t.dossierId,o.loadingActionProcess=!0,o.$store.dispatch("processPullBtnDetail",n).then((function(n){o.processPullBtnDetailRouter(t,e,n,a,i)}))}},goBack:function(){window.history.back()},viewDetail:function(t,e){var a=this;a.$router.history.current.query;t.permission?9===t["originality"]?-1!==a.trangThaiHoSoList[a.index]["id"].indexOf("CV_DI")?a.$router.push({path:"/danh-sach-ho-so/"+this.index+"/nhom-ho-so/NEW_GROUP_CV_DI/"+t.dossierId,query:a.$router.history.current.query}):a.$router.push({path:"/danh-sach-ho-so/"+this.index+"/nhom-ho-so/NEW_GROUP_CV/"+t.dossierId,query:a.$router.history.current.query}):a.$router.push("/danh-sach-ho-so/"+this.index+"/chi-tiet-ho-so/"+t["dossierId"]):1===t["originality"]?a.$router.push("/danh-sach-ho-so/"+this.index+"/chi-tiet-ho-so/"+t["dossierId"]):alert("Bạn không có quyền thao tác với hồ sơ này")},keywordEventChange:function(t){var e=this;e.doRedirectFilter()},showAdvFilter:function(){var t=this;t.advSearchShow=!t.advSearchShow,setTimeout((function(){t.$refs.advSearch&&t.$refs.advSearch.setShow(t.advSearchShow)}),200)},doRedirectFilter:function(){var t=this;t.selectMultiplePage=[];var e=t.$router.history.current,a=e.query,i="?";for(var o in a["keyword"]=String(t.keyword).trim(),a["status"]=t.status,a["top"]=t.top,a)"page"===o?i+=o+"=1&":""!==a[o]&&"undefined"!==a[o]&&void 0!==a[o]&&"adv_renew"!==a[o]&&(i+=o+"="+a[o]+"&");i+="adv_renew="+Math.floor(100*Math.random())+1,i=i.replace(/=__/g,"="),t.$router.push({path:e.path+i})},changeAdvFilterDataChips:function(t){var e=this;"delay"===t.key||"overdue"===t.key||"coming"===t.key?e.top===t.key?e.top="":(e.top=t.key,e.status=""):e.status===t.key?e.status="":(e.status=t.key,e.top=""),e.doRedirectFilter()},doImportDossier:function(){var t=this,e={serviceCode:t.serviceCode,govAgencyCode:t.govAgencyCode,templateNo:t.templateNo,originality:t.getOriginality()};t.$store.commit("setDataCreateDossier",e),t.loadingAction=!0,t.$store.dispatch("postDossier",e).then((function(e){t.loadingAction=!1,t.indexAction=-1,t.$router.push({path:"/import-ho-so/"+e.dossierId,query:t.$router.history.current.query})})).catch((function(e){t.loadingAction=!1}))},getCountAdvSearch:function(){var t=this,e=t.$router.history.current,a=e.query,i=0;for(var o in t.filterKeyAdvSearch)a.hasOwnProperty(t.filterKeyAdvSearch[o])&&a[t.filterKeyAdvSearch[o]]&&(i+=1);return i},filterServiceConfig:function(t){var e=this;if(!e.govAgencyFilterMenuConfig&&!e.groupServiceFilterMenuConfig)return t;if(e.govAgencyFilterMenuConfig&&!e.groupServiceFilterMenuConfig){var a=t.filter((function(t){return t.govAgencyCode===e.govAgencyFilterMenuConfig}));return a}if(!e.govAgencyFilterMenuConfig&&e.groupServiceFilterMenuConfig){var i=[],o=function(e){var a=i.filter((function(a){return a.serviceCode===t[e]["serviceCode"]})).length;0===a&&(console.log("serviceListIndex",t[e],i),i.push(t[e]),console.log("list",i))};for(var n in t)o(n);return i}var s=function(){var a=t.filter((function(t){return t.govAgencyCode===e.govAgencyFilterMenuConfig})),i=[],o=function(t){var e=i.filter((function(e){return e.serviceCode===a[t]["serviceCode"]})).length;0===e&&i.push(a[t])};for(var n in a)o(n);return{v:i}}();return"object"===pt(s)?s.v:void 0},changeDate:function(){var t=this;t.menuDateCV=!1,t.dateCvFormatted=t.formatDate(t.dateCv),setTimeout((function(){t.doLoadingDataHoSo()}),200)},formatDate:function(t){if(!t)return"";var e=t.split("-"),a=lt(e,3),i=a[0],o=a[1],n=a[2];return"".concat(n,"/").concat(o,"/").concat(i)},parseDate:function(t){if(!t)return"";if(String(t).indexOf("/")>0){var e=t.split("/"),a=lt(e,3),i=a[0],o=a[1],n=a[2];return"".concat(n,"-").concat(o.padStart(2,"0"),"-").concat(i.padStart(2,"0"))}if(String(t).indexOf("-")>0){var s=t.split("-"),r=lt(s,3),c=r[0],l=r[1],d=r[2];return"".concat(d,"-").concat(l.padStart(2,"0"),"-").concat(c.padStart(2,"0"))}var u=new Date(Number(t));return"".concat(u.getFullYear(),"-").concat((u.getMonth()+1).toString().padStart(2,"0"),"-").concat(u.getDate().toString().padStart(2,"0"))},validate:function(){return!0},callback:function(t){t?alert(t):alert("please check you are not robot")},getFieldPick:function(){var t=this,e="MOTCUA";t.$store.dispatch("getFieldPick",e).then((function(e){var a=e;a.domain&&(t.linhVucSelected=JSON.parse(a.domain))})).catch((function(t){}))},postFieldPick:function(t,e){var a=this,i={classPK:"MOTCUA",key:t,val:e};a.$store.dispatch("postFieldPick",i).then((function(t){})).catch((function(t){}))},getMetaData:function(t){var e="";try{e=JSON.parse(t.metaData)}catch(a){}return e}}},gt=mt,vt=a("8212"),ft=a("4ca6"),_t=a("99d9"),yt=a("ac7c"),Ct=a("cc20"),Dt=a("8fea"),Tt=a("169a"),xt=a("4bd4"),bt=a("67b6"),St=a("43a6"),Nt=a("9910"),Pt=a("a844"),It=a("71d9"),At=a("2a7f"),wt=a("3a2f"),Et=Object(p["a"])(gt,F,M,!1,null,null,null),kt=Et.exports;g()(Et,{VAutocomplete:it["a"],VAvatar:vt["a"],VBadge:ft["a"],VBtn:_["a"],VCard:y["a"],VCardActions:_t["a"],VCardText:_t["b"],VCheckbox:yt["a"],VChip:Ct["a"],VDataTable:Dt["a"],VDatePicker:ot["a"],VDialog:Tt["a"],VFlex:D["a"],VForm:xt["a"],VIcon:T["a"],VLayout:x["a"],VList:b["a"],VListTile:N["a"],VListTileTitle:I["c"],VMenu:nt["a"],VProgressCircular:w["a"],VRadio:bt["a"],VRadioGroup:St["a"],VSpacer:Nt["a"],VTextField:st["a"],VTextarea:Pt["a"],VToolbar:It["a"],VToolbarTitle:At["b"],VTooltip:wt["a"]});var Ot=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",{staticClass:"row-header no__hidden_class",staticStyle:{"background-color":"#070f52"}},[null!==t.trangThaiHoSoList?a("div",{staticClass:"ml-2 py-2 text-bold white--text"},[a("span",[t._v(t._s(t.trangThaiHoSoList[t.index]["title"]))])]):t._e()]),a("v-layout",{staticClass:"menu_header_list",class:{no__border__bottom:null===t.btnDynamics||void 0===t.btnDynamics||"undefined"===t.btnDynamics||null!==t.btnDynamics&&void 0!==t.btnDynamics&&"undefined"!==t.btnDynamics&&0===t.btnDynamics.length},attrs:{wrap:""}},[1!==t.originality?a("v-layout",{attrs:{wrap:""}},[a("v-flex",{staticClass:"pl-2 pr-2 input-group--text-field-box",attrs:{xs12:"",sm3:""}},[a("v-autocomplete",{attrs:{items:t.listLinhVuc,placeholder:"Chọn lĩnh vực","item-text":"displayName","item-value":"domainCode","return-object":"","hide-no-data":"","hide-selected":!0,clearable:"",box:""},on:{change:t.changeDomain},model:{value:t.linhVucSelected,callback:function(e){t.linhVucSelected=e},expression:"linhVucSelected"}})],1),a("v-flex",{staticClass:"pl-2 pr-2 input-group--text-field-box",attrs:{xs12:"",sm3:""}},[a("v-autocomplete",{attrs:{items:t.listThuTucHanhChinh,placeholder:"Chọn thủ tục hành chính","item-text":"displayName","item-value":"serviceConfigId","return-object":"","hide-no-data":"","hide-selected":!0,clearable:"",box:""},on:{change:t.changeServiceConfigs},model:{value:t.thuTucHanhChinhSelected,callback:function(e){t.thuTucHanhChinhSelected=e},expression:"thuTucHanhChinhSelected"}})],1),a("v-flex",{staticClass:"pl-2 pr-2 input-group--text-field-box",attrs:{xs12:"",sm3:""}},[a("v-autocomplete",{attrs:{items:t.listDichVu,placeholder:"Chọn dịch vụ:","item-text":"optionName","item-value":"processOptionId","return-object":"","hide-no-data":"","hide-selected":!0,box:""},on:{change:t.changeDichVuConfigs},model:{value:t.dichVuSelected,callback:function(e){t.dichVuSelected=e},expression:"dichVuSelected"}})],1),a("v-flex",{staticClass:"pl-2 pr-2 mt-1",attrs:{xs12:"",sm3:""}},[a("div",{staticStyle:{position:"relative"}},[a("v-text-field",{attrs:{placeholder:"Mã hồ sơ, tên hồ sơ, tên thủ tục ...","append-icon":"search",box:"","append-icon-cb":t.keywordEventChange},on:{keyup:function(e){return"button"in e||!t._k(e.keyCode,"enter",13,e.key,"Enter")?t.keywordEventChange(e):null}},model:{value:t.searchKey,callback:function(e){t.searchKey=e},expression:"searchKey"}})],1)])],1):t._e(),null!==t.dossierCounting&&void 0!==t.dossierCounting&&t.dossierCounting.length>0&&t.dossierCountingShow?a("div",{staticClass:"py-1 px-1",staticStyle:{background:"#f6f6f6","border-top":"1px solid lightgrey"}},t._l(t.dossierCounting,(function(e,i){return a("v-chip",{key:i,on:{click:function(a){t.changeAdvFilterDataChips(e)}}},["deleted"===e.key?a("v-avatar",{staticStyle:{"background-color":"#da0e0e","border-color":"#da0e0e",color:"#fff"}},[a("v-icon",{attrs:{size:"16"}},[t._v("delete")])],1):a("v-avatar",{staticStyle:{"background-color":"#0b72ba","border-color":"#0b72ba",color:"#fff"}},[t._v(t._s(e.count))]),t._v("\n        "+t._s(e.title)+"\n      ")],1)})),1):t._e()],1),1===t.originality&&t.viewMobile?a("v-flex",{staticClass:"pl-2 pr-2 mt-2",attrs:{xs12:"",sm3:""}},[a("div",{staticStyle:{position:"relative"}},[a("v-text-field",{attrs:{placeholder:"Tìm theo mã hồ sơ, tên hồ sơ, tên thủ tục ...","append-icon":"search",box:"","append-icon-cb":t.keywordEventChange},on:{keyup:function(e){return"button"in e||!t._k(e.keyCode,"enter",13,e.key,"Enter")?t.keywordEventChange(e):null}},model:{value:t.searchKey,callback:function(e){t.searchKey=e},expression:"searchKey"}})],1)]):t._e(),t.loadingDynamicBtn?a("v-layout",{attrs:{wrap:""}},[a("v-flex",{attrs:{xs12:"",sm6:""}}),a("v-flex",{attrs:{xs12:"",sm2:""}},[a("content-placeholders",{staticClass:"mt-3"},[a("content-placeholders-text",{attrs:{lines:1}})],1)],1),a("v-flex",{attrs:{xs12:"",sm2:""}},[a("content-placeholders",{staticClass:"mt-3"},[a("content-placeholders-text",{attrs:{lines:1}})],1)],1),a("v-flex",{attrs:{xs12:"",sm2:""}},[a("content-placeholders",{staticClass:"mt-3"},[a("content-placeholders-text",{attrs:{lines:1}})],1)],1)],1):t._e(),t.loadingDynamicBtn?t._e():a("div",{staticClass:"btn_wrap_actions"},[t.getUser("Administrator_data")&&"deleted"!==t.currentQueryState["status"]?a("v-btn",{attrs:{color:"red",dark:""},nativeOn:{click:function(e){t.btnActionEvent(null,{form:"UNDO_DOSSIER"},0,!0)}}},[t._v("\n         Undo   \n    ")]):t._e(),t.getUser("Administrator_data")?a("v-menu",{staticStyle:{position:"relative !important"},attrs:{left:""}},[a("v-btn",{attrs:{slot:"activator",color:"red",dark:""},slot:"activator"},[t._v("Go to   "),a("v-icon",{attrs:{size:"18"}},[t._v("arrow_drop_down")])],1),a("v-list",[a("v-list-tile",{on:{click:function(e){t.btnActionEvent(t.selectedDoAction[t.selectedDoAction.length-1],{form:"GOTO_DONE"},0,!0)}}},[a("v-list-tile-title",[t._v("Hoàn thành")])],1),a("v-list-tile",{on:{click:function(e){t.btnActionEvent(t.selectedDoAction[t.selectedDoAction.length-1],{form:"GOTO_CANCEL"},0,!0)}}},[a("v-list-tile-title",[t._v("Rút hồ sơ")])],1),a("v-list-tile",{on:{click:function(e){t.btnActionEvent(t.selectedDoAction[t.selectedDoAction.length-1],{form:"GOTO_DENY"},0,!0)}}},[a("v-list-tile-title",[t._v("Từ chối")])],1)],1)],1):t._e(),t.getUser("Administrator_data")&&"deleted"!==t.currentQueryState["status"]?a("v-btn",{attrs:{color:"red",dark:""},nativeOn:{click:function(e){t.btnActionEvent(null,{form:"CHANGE_DATA_DOSSIER"},0,!0)}}},[t._v("\n      Điều chỉnh dữ liệu\n    ")]):t._e(),t.getUser("Administrator")&&"deleted"!==t.currentQueryState["status"]?a("v-btn",{attrs:{color:"red",dark:""},nativeOn:{click:function(e){t.btnActionEvent(null,{form:"DELETE"},0,!0)}}},[t._v("\n      DELETE\n    ")]):t._e(),t.getUser("Administrator_data")&&t.currentQueryState.hasOwnProperty("status")&&"deleted"===t.currentQueryState["status"]?a("v-btn",{attrs:{color:"red",dark:""},nativeOn:{click:function(e){t.btnActionEvent(null,{form:"RESTORE_DOSSIER"},0,!0)}}},[t._v("\n      Khôi phục hồ sơ\n    ")]):t._e(),t._l(t.btnDynamics,(function(e,i){return String(e.form).indexOf("VIEW")<0&&3!==t.menuType?a("v-btn",{key:i,attrs:{color:"primary",loading:t.loadingAction&&i===t.indexAction,disabled:t.loadingAction&&i===t.indexAction},nativeOn:{click:function(a){t.btnActionEvent(null,e,i,!0)}}},[t._v("\n      "+t._s(e.title)+t._s(e.tiltle)+"\n      "),a("span",{attrs:{slot:"loader"},slot:"loader"},[t._v("Loading...")])]):t._e()}))],2),a("v-data-table",{staticClass:"table-landing table-bordered",attrs:{headers:t.headers,items:t.hosoDatas,"total-items":t.hosoDatasTotal,"item-key":"dossierId","select-all":3!==t.menuType&&1!==t.originality&&t.btnDynamics.length>0||t.getUser("Administrator")||t.getUser("Administrator_data"),"no-data-text":"Không có hồ sơ nào","hide-actions":""},scopedSlots:t._u([{key:"headers",fn:function(e){return[a("tr",[3!==t.menuType&&1!==t.originality&&t.btnDynamics.length>0||t.getUser("Administrator")||t.getUser("Administrator_data")?a("th",{staticClass:"v_data_table_check_all"},[t.getUser("Administrator")?a("v-checkbox",{attrs:{"input-value":e.all,indeterminate:e.indeterminate,primary:"","hide-details":""},nativeOn:{click:function(e){return t.toggleAll(e)}}}):a("v-checkbox",{attrs:{"input-value":e.all,indeterminate:e.indeterminate,disabled:!t.thuTucHanhChinhSelected||t.thuTucHanhChinhSelected&&"0"===t.thuTucHanhChinhSelected.serviceConfigId||t.thuTucHanhChinhSelected&&""===t.thuTucHanhChinhSelected.serviceConfigId,primary:"","hide-details":""},nativeOn:{click:function(e){return t.toggleAll(e)}}})],1):t._e(),a("th",{attrs:{width:"30px"}},[a("span",[t._v("STT")])]),a("th",[a("span",[t._v("Tên thủ tục")])]),t.hideAction?t._e():a("th",{attrs:{width:"30px"}})])]}},{key:"items",fn:function(e){return[a("tr",[3!==t.menuType&&1!==t.originality&&t.btnDynamics.length>0||t.getUser("Administrator")||t.getUser("Administrator_data")?a("td",{staticClass:"v_data_table_check_all"},[t.getUser("Administrator")||t.getUser("Administrator_data")?a("v-checkbox",{attrs:{primary:"","hide-details":"",color:"primary"},on:{change:t.changeSelected},model:{value:e.selected,callback:function(a){t.$set(e,"selected",a)},expression:"props.selected"}}):a("v-checkbox",{attrs:{disabled:0===e.item["assigned"]||!t.thuTucHanhChinhSelected||t.thuTucHanhChinhSelected&&"0"===t.thuTucHanhChinhSelected.serviceConfigId||t.thuTucHanhChinhSelected&&""===t.thuTucHanhChinhSelected.serviceConfigId,primary:"","hide-details":"",color:"primary"},on:{change:t.changeSelected},model:{value:e.selected,callback:function(a){t.$set(e,"selected",a)},expression:"props.selected"}})],1):t._e(),a("td",{staticClass:"text-xs-center px-0 py-0"},[t.loadingTable?a("content-placeholders",[a("content-placeholders-text",{attrs:{lines:1}})],1):a("span",{class:{no_acction__event:!e.item["permission"]},staticStyle:{cursor:"pointer"},on:{click:function(a){t.viewDetail(e.item,e.index)}}},[t._v("\n            "+t._s(t.hosoDatasPage*t.limitRecord-t.limitRecord+e.index+1)+"\n          ")])],1),a("td",{staticClass:"px-1 py-0"},[t.loadingTable?a("content-placeholders",[a("content-placeholders-text",{attrs:{lines:1}})],1):a("div",{class:{no_acction__event:!e.item["permission"]},staticStyle:{cursor:"pointer"},on:{click:function(a){t.viewDetail(e.item,e.index)}}},[e.item.dossierNo?a("span",{staticClass:"primary--text"},[t._v(" "+t._s(e.item.dossierNo)+" - ")]):t._e(),a("span",{staticClass:"primary--text"},[t._v(" "+t._s(e.item.online?"Hồ sơ trực tuyến":"Hồ sơ một cửa"))]),a("br"),a("span",{staticClass:"primary--text text-bold"},[t._v(" "+t._s(e.item.serviceName)+" ")]),a("br"),a("span",{staticClass:"text-bold"},[t._v("Chủ hồ sơ: ")]),a("span",[t._v(t._s(e.item.applicantName))]),a("br"),a("span",{staticClass:"text-bold"},[t._v("Tiếp nhận: ")]),a("span",[t._v(t._s(e.item.receiveDate))]),a("br"),a("span",{staticClass:"text-bold"},[t._v("Hẹn trả: ")]),a("span",[t._v(t._s(e.item.dueDate))]),a("br"),e.item.dossierOverdue?a("span",{class:e.item.dossierOverdue.indexOf("Quá hạn")>=0?"red--text":"green--text"},[t._v(t._s(e.item.dossierOverdue))]):t._e()])],1),t.hideAction?t._e():a("td",{staticClass:"text-xs-center px-0 py-0"},[t.loadingTable?a("content-placeholders",[a("content-placeholders-text",{attrs:{lines:1}})],1):t._e(),t.loadingTable||null===t.btnDynamics&&void 0===t.btnDynamics&&"undefined"===t.btnDynamics&&null===t.btnDossierDynamics&&void 0===t.btnDossierDynamics&&"undefined"===t.btnDossierDynamics?t._e():a("v-menu",{staticStyle:{position:"relative !important"},attrs:{left:""}},[a("v-btn",{staticClass:"mx-0 my-0",attrs:{slot:"activator",icon:""},on:{click:function(a){t.processPullBtnDynamics(e.item)}},slot:"activator"},[a("v-icon",[t._v("more_vert")])],1),a("v-list",[t._l(t.btnDynamics,(function(i,o){return 3===t.menuType?a("v-list-tile",{key:o+"_menu_"+e.item.dossierId,attrs:{disabled:-1===String(e.item["permission"]).indexOf("write")},on:{click:function(a){t.btnActionEvent(e.item,i,e.index,!1)}}},[a("v-list-tile-title",[t._v(t._s(i.title)+t._s(i.tiltle))])],1):t._e()})),t._l(t.btnDossierDynamics,(function(i,o){return(i["enable"]>0||"special"===i["autoEvent"])&&3!==t.menuType?a("v-list-tile",{key:o+"_"+e.item.dossierId,attrs:{disabled:2===i["enable"]||-1===String(e.item["permission"]).indexOf("write")},on:{click:function(a){t.processPullBtnDetail(e.item,i,e.index,o)}}},[a("v-list-tile-title",[t._v(t._s(i.actionName))])],1):t._e()})),t._l(t.btnStepsDynamics,(function(i,o){return-1!==String(e.item["permission"]).indexOf("write")&&"NEW"!==String(i.form)&&3!==t.menuType?a("v-list-tile",{key:o+"_"+e.item.dossierId+"_"+e.item.dossierId,on:{click:function(a){t.btnActionEvent(e.item,i,t.index,!1)}}},[a("v-list-tile-title",[t._v(t._s(i.title))])],1):t._e()})),a("v-list-tile",{attrs:{disabled:!e.item["permission"]},on:{click:function(a){t.viewDetail(e.item,e.index)}}},[t._v("\n                Xem chi tiết\n              ")])],2)],1)],1)])]}}]),model:{value:t.selected,callback:function(e){t.selected=e},expression:"selected"}}),a("div",{class:t.viewMobile?"":"text-xs-right layout wrap",staticStyle:{position:"relative"}},[a("div",{staticClass:"flex pagging-table px-2"},[a("tiny-pagination",{attrs:{total:t.hosoDatasTotal,page:t.hosoDatasPage,numberPerPage:t.limitRecord,showLimit:!!t.showLimit&&t.showLimit,"custom-class":"custom-tiny-class",limits:t.limits},on:{"tiny:change-page":t.paggingData}})],1)]),a("v-dialog",{attrs:{"max-width":"400",transition:"fade-transition",persistent:""},model:{value:t.dialogAction,callback:function(e){t.dialogAction=e},expression:"dialogAction"}},[a("v-card",[a("v-form",{ref:"form",attrs:{"lazy-validation":""},model:{value:t.valid,callback:function(e){t.valid=e},expression:"valid"}},[a("v-card-title",{staticClass:"headline"},[t._v(t._s(t.itemAction.title)+t._s(t.itemAction.tiltle))]),a("v-btn",{staticClass:"mx-0 my-0 absolute__btn_panel mr-2",attrs:{icon:"",dark:""},nativeOn:{click:function(e){t.dialogAction=!1}}},[a("v-icon",[t._v("clear")])],1),t.loadingAction?a("v-progress-linear",{staticClass:"my-0",attrs:{indeterminate:!0}}):t._e(),a("v-card-text",{staticClass:"pb-0 pt-4"},[a("v-layout",{attrs:{wrap:""}},[a("v-flex",{staticClass:"px-2 pb-3",attrs:{xs12:""}},[a("v-autocomplete",{attrs:{items:t.listThuTucHanhChinh,placeholder:"chọn thủ tục hành chính","item-text":"serviceName","item-value":"serviceConfigId","return-object":"","hide-no-data":"","hide-selected":!0},on:{change:t.changeServiceConfigs},model:{value:t.thuTucHanhChinhSelected,callback:function(e){t.thuTucHanhChinhSelected=e},expression:"thuTucHanhChinhSelected"}})],1),a("v-flex",{staticClass:"px-2",attrs:{xs12:""}},[t.thuTucHanhChinhSelected&&t.listDichVu.length>1?a("v-autocomplete",{attrs:{items:t.listDichVu,label:"Dịch vụ:",placeholder:"chọn dịch vụ","item-text":"optionName","item-value":"processOptionId","return-object":"","hide-no-data":"","hide-selected":!0,rules:[function(t){return!!t||"dịch vụ bắt buộc phải chọn."}],required:""},on:{change:t.changeDichVuConfigs},model:{value:t.dichVuSelected,callback:function(e){t.dichVuSelected=e},expression:"dichVuSelected"}}):t._e()],1)],1)],1),a("v-card-actions",[a("v-spacer"),a("v-btn",{attrs:{color:"red darken-3",flat:"flat",loading:t.loadingAction,disabled:t.loadingAction},nativeOn:{click:function(e){t.dialogAction=!1}}},[a("v-icon",[t._v("undo")]),t._v(" \n            Quay lại\n            "),a("span",{attrs:{slot:"loader"},slot:"loader"},[t._v("Loading...")])],1),a("v-btn",{attrs:{color:"primary",flat:"flat",loading:t.loadingAction,disabled:t.loadingAction},nativeOn:{click:function(e){t.doSubmitDialogAction(t.itemAction)}}},[a("v-icon",[t._v("save")]),t._v(" \n            Đồng ý\n            "),a("span",{attrs:{slot:"loader"},slot:"loader"},[t._v("Loading...")])],1)],1)],1)],1)],1),a("v-dialog",{attrs:{"max-width":"1000",transition:"fade-transition",persistent:""},model:{value:t.dialogActionProcess,callback:function(e){t.dialogActionProcess=e},expression:"dialogActionProcess"}},[a("v-card",[a("v-form",{ref:"form",attrs:{"lazy-validation":""},model:{value:t.validProcess,callback:function(e){t.validProcess=e},expression:"validProcess"}},[a("v-card-title",{staticClass:"headline"},[t._v(t._s(t.itemAction.actionName))]),a("v-btn",{staticClass:"mx-0 my-0 absolute__btn_panel mr-2",attrs:{icon:"",dark:""},nativeOn:{click:function(e){t.dialogActionProcess=!1}}},[a("v-icon",[t._v("clear")])],1),t.loadingActionProcess?a("v-progress-linear",{staticClass:"my-0",attrs:{indeterminate:!0}}):t._e(),a("v-card-text",{staticClass:"py-0 px-0"},[a("v-layout",{attrs:{wrap:""}},[t.dialogActionProcess&&t.showPhanCongNguoiThucHien?a("phan-cong",{attrs:{type:t.type_assign},model:{value:t.assign_items,callback:function(e){t.assign_items=e},expression:"assign_items"}}):t._e(),t.dialogActionProcess&&t.showYkienCanBoThucHien?a("y-kien-can-bo",{ref:"ykiencanbo",attrs:{user_note:t.userNote}}):t._e()],1)],1),a("v-card-actions",[a("v-spacer"),a("v-btn",{attrs:{color:"primary",loading:t.loadingActionProcess,disabled:t.loadingActionProcess},nativeOn:{click:function(e){t.submitFormXuLy(t.dossierItemDialogPick,t.itemDialogPick,t.resultDialogPick,t.indexDialogPick,!1)}}},[a("v-icon",[t._v("save")]),t._v(" \n          Xác nhận\n          "),a("span",{attrs:{slot:"loader"},slot:"loader"},[t._v("Loading...")])],1),a("v-btn",{attrs:{color:"red",dark:"",loading:t.loadingActionProcess,disabled:t.loadingActionProcess},nativeOn:{click:function(e){t.dialogActionProcess=!1}}},[a("v-icon",[t._v("undo")]),t._v(" \n          Quay lại\n          "),a("span",{attrs:{slot:"loader"},slot:"loader"},[t._v("Loading...")])],1)],1)],1)],1)],1),a("v-dialog",{attrs:{"max-width":"900",transition:"fade-transition"},model:{value:t.dialogPDF,callback:function(e){t.dialogPDF=e},expression:"dialogPDF"}},[a("v-card",[a("v-card-title",{staticClass:"headline"},[t._v(t._s(t.itemAction.title)+t._s(t.itemAction.tiltle))]),a("v-btn",{staticClass:"mx-0 my-0 absolute__btn_panel mr-2",attrs:{icon:"",dark:""},nativeOn:{click:function(e){t.dialogPDF=!1}}},[a("v-icon",[t._v("clear")])],1),t.dialogPDFLoading?a("div",{staticStyle:{"min-height":"600px","text-align":"center",margin:"auto",padding:"25%"}},[a("v-progress-circular",{attrs:{size:100,width:1,color:"primary",indeterminate:""}})],1):t._e(),a("iframe",{directives:[{name:"show",rawName:"v-show",value:!t.dialogPDFLoading,expression:"!dialogPDFLoading"}],staticStyle:{overflow:"auto","min-height":"600px"},attrs:{id:"dialogPDFPreview",src:"",type:"application/pdf",width:"100%",height:"100%",frameborder:"0"}})],1)],1),a("v-dialog",{attrs:{scrollable:"",persistent:"","max-width":"700px"},model:{value:t.dialog_statusAction,callback:function(e){t.dialog_statusAction=e},expression:"dialog_statusAction"}},[a("v-card",[a("v-card-title",{staticClass:"headline"},[t._v("\n        Trạng thái xử lý\n      ")]),a("v-btn",{staticClass:"mx-0 my-0 absolute__btn_panel mr-2",attrs:{icon:"",dark:""},nativeOn:{click:function(e){return t.closeDialogStatusAction(e)}}},[a("v-icon",[t._v("clear")])],1),a("v-card-text",{staticStyle:{"max-height":"350px"}},t._l(t.selected,(function(e,i){return a("div",{key:e.dossierIdCTN},[a("v-layout",{staticClass:"py-1 align-center row-list-style",staticStyle:{"border-bottom":"1px solid #ddd",position:"relative"},attrs:{wrap:""}},[a("v-flex",{attrs:{xs11:""}},[a("span",{staticClass:"text-bold",staticStyle:{position:"absolute"}},[t._v(t._s(i+1)+".")]),a("div",{staticClass:"ml-4"},[a("span",{staticClass:"text-bold"},[t._v(t._s(e.dossierNo))]),t._v(" - "+t._s(e.serviceName))])]),a("v-flex",{staticClass:"text-right",attrs:{xs1:""}},[e.statusAction?a("v-tooltip",{attrs:{top:""}},[a("v-icon",{attrs:{slot:"activator",size:"20",color:"primary"},slot:"activator"},[t._v("\n                  check\n                ")]),a("span",[t._v("Thành công")])],1):a("v-tooltip",{attrs:{top:""}},[a("v-icon",{attrs:{slot:"activator",size:"20",color:"red darken-3"},slot:"activator"},[t._v("\n                  block\n                ")]),a("span",[t._v("Thất bại")])],1)],1)],1)],1)})),0),a("v-card-actions",[a("v-spacer"),a("v-btn",{attrs:{color:"primary",loading:t.loadingAction,disabled:t.loadingAction},nativeOn:{click:function(e){return t.resend(e)}}},[a("v-icon",{attrs:{size:"20"}},[t._v("refresh")]),t._v(" \n          Thử lại\n          "),a("span",{attrs:{slot:"loader"},slot:"loader"},[t._v("Loading...")])],1),a("v-btn",{attrs:{color:"red",dark:"",loading:t.loadingAction,disabled:t.loadingAction},nativeOn:{click:function(e){return t.closeDialogStatusAction(e)}}},[a("v-icon",[t._v("undo")]),t._v(" \n          Thoát\n          "),a("span",{attrs:{slot:"loader"},slot:"loader"},[t._v("Loading...")])],1)],1)],1)],1),a("v-dialog",{attrs:{scrollable:"",persistent:"","max-width":"700px"},model:{value:t.dialog_printGuide,callback:function(e){t.dialog_printGuide=e},expression:"dialog_printGuide"}},[a("v-card",[a("v-card-title",{staticClass:"headline"},[t._v("\n        Thông tin phiếu hướng dẫn hoàn thiện hồ sơ\n      ")]),a("v-btn",{staticClass:"mx-0 my-0 absolute__btn_panel mr-2",attrs:{icon:"",dark:""},nativeOn:{click:function(e){t.dialog_printGuide=!1}}},[a("v-icon",[t._v("clear")])],1),a("v-card-text",[a("v-form",{ref:"formGuide",attrs:{"lazy-validation":""},model:{value:t.validGuide,callback:function(e){t.validGuide=e},expression:"validGuide"}},[a("v-layout",{staticClass:"py-1 align-center row-list-style",attrs:{wrap:""}},[a("v-flex",{staticClass:"px-2 pb-3",attrs:{xs12:""}},[a("div",{staticClass:"my-2"},[t._v("Thủ tục hành chính:")]),a("v-autocomplete",{staticClass:"input-group--text-field-box",attrs:{items:t.listThuTucHanhChinh,placeholder:"Chọn thủ tục hành chính","item-text":"serviceName","item-value":"serviceConfigId","return-object":"","hide-no-data":"","hide-selected":!0,rules:[function(t){return!!t||"Thủ tục bắt buộc phải chọn."}],required:""},on:{change:t.changeServiceConfigsGuide},model:{value:t.thuTucHanhChinhSelectedGuide,callback:function(e){t.thuTucHanhChinhSelectedGuide=e},expression:"thuTucHanhChinhSelectedGuide"}})],1),a("v-flex",{staticClass:"px-2",attrs:{xs12:""}},[a("div",{staticClass:"my-2"},[t._v("Dịch vụ:")]),a("v-autocomplete",{staticClass:"input-group--text-field-box",attrs:{items:t.listDichVuGuide,placeholder:"Chọn dịch vụ","item-text":"optionName","item-value":"processOptionId","return-object":"","hide-no-data":"","hide-selected":!0,rules:[function(t){return!!t||"dịch vụ bắt buộc phải chọn."}],required:""},model:{value:t.dichVuSelectedGuide,callback:function(e){t.dichVuSelectedGuide=e},expression:"dichVuSelectedGuide"}})],1),a("v-flex",{staticClass:"px-2",attrs:{xs12:""}},[a("div",{staticClass:"my-2"},[t._v("Tên người làm thủ tục:")]),a("v-text-field",{attrs:{placeholder:"Nhập tên người làm thủ tục",box:"",rules:[function(t){return!!t||"Trường dữ liệu bắt buộc"}],required:""},model:{value:t.applicantNameGuide,callback:function(e){t.applicantNameGuide=e},expression:"applicantNameGuide"}})],1),a("v-flex",{staticClass:"px-2",attrs:{xs12:""}},[a("div",{staticClass:"my-2"},[t._v("Địa chỉ:")]),a("v-text-field",{attrs:{placeholder:"Nhập địa chỉ",box:""},model:{value:t.applicantAddressGuide,callback:function(e){t.applicantAddressGuide=e},expression:"applicantAddressGuide"}})],1),a("v-flex",{staticClass:"px-2",attrs:{xs12:""}},[a("div",{staticClass:"my-2"},[t._v("Thư điện tử:")]),a("v-text-field",{attrs:{box:"",placeholder:"Nhập thư điện tử"},model:{value:t.applicantEmailGuide,callback:function(e){t.applicantEmailGuide=e},expression:"applicantEmailGuide"}})],1),a("v-flex",{staticClass:"px-2",attrs:{xs12:""}},[a("div",{staticClass:"my-2"},[t._v("Số điện thoại:")]),a("v-text-field",{attrs:{box:""},model:{value:t.applicantTelNoGuide,callback:function(e){t.applicantTelNoGuide=e},expression:"applicantTelNoGuide"}})],1)],1)],1)],1),a("v-card-actions",[a("v-spacer"),a("v-btn",{staticClass:"mr-3",attrs:{color:"primary",loading:t.loadingAction,disabled:t.loadingAction},on:{click:function(e){t.doGuiding()}}},[a("v-icon",[t._v("print")]),t._v("  \n          In phiếu hướng dẫn\n          "),a("span",{attrs:{slot:"loader"},slot:"loader"},[t._v("Loading...")])],1)],1)],1)],1),a("v-dialog",{attrs:{scrollable:"",persistent:"","max-width":"700px"},model:{value:t.dialog_extraForm,callback:function(e){t.dialog_extraForm=e},expression:"dialog_extraForm"}},[a("v-card",[a("v-card-title",{staticClass:"headline"},[t._v("\n        Điều chỉnh dữ liệu mã hồ sơ: "+t._s(t.selectedDoAction.length>0?t.selectedDoAction[t.selectedDoAction.length-1]["dossierNo"]:"")+"\n      ")]),a("v-btn",{staticClass:"mx-0 my-0 absolute__btn_panel mr-2",attrs:{icon:"",dark:""},nativeOn:{click:function(e){t.dialog_extraForm=!1}}},[a("v-icon",[t._v("clear")])],1),a("v-card-text",{staticClass:"px-0",attrs:{flat:""}},[a("form-bo-sung-thong-tin",{ref:"formBoSungThongTinNgan",attrs:{dossier_id:t.dossierIdSelected,action_id:t.actionId,type:"dieuchinhdulieu"}})],1),a("v-card-actions",[a("v-spacer"),a("v-btn",{staticClass:"mr-3",attrs:{color:"primary"},on:{click:function(e){t.doChangeDossierExtraForm()}}},[a("v-icon",[t._v("save")]),t._v("  \n          Xác nhận\n        ")],1),a("v-btn",{staticClass:"mr-3",attrs:{color:"primary"},on:{click:function(e){t.dialog_extraForm=!1}}},[a("v-icon",[t._v("clear")]),t._v("  \n          Hủy\n        ")],1)],1)],1)],1)],1)},Ft=[],Mt=a("9029");function Vt(t,e){return $t(t)||Ht(t,e)||Lt()}function Lt(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function Ht(t,e){var a=[],i=!0,o=!1,n=void 0;try{for(var s,r=t[Symbol.iterator]();!(i=(s=r.next()).done);i=!0)if(a.push(s.value),e&&a.length===e)break}catch(c){o=!0,n=c}finally{try{i||null==r["return"]||r["return"]()}finally{if(o)throw n}}return a}function $t(t){if(Array.isArray(t))return t}var Rt={props:["index"],components:{"tiny-pagination":B["a"],"phan-cong":K["a"],"y-kien-can-bo":W["a"],"form-bo-sung-thong-tin":j["a"]},data:function(){return{isAdminSuper:!1,actionId:"",dossierIdSelected:"",dossierCountingShow:!1,dossierCounting:[],advSearchToolsSelected:[],advSearchTools:z.advSearchTools,advSearchItems:[],advObjectSearch:{},menusss:!1,itemFilterSupport:{years:[{value:"",name:"Lọc theo năm"},{value:"2017",name:"năm 2017"},{value:"2018",name:"năm 2018"},{value:"2019",name:"năm 2019"}],year:"",months:[{value:"",name:"Lọc theo tháng"},{value:"1",name:"tháng 1"},{value:"2",name:"tháng 2"},{value:"3",name:"tháng 3"},{value:"4",name:"tháng 4"},{value:"5",name:"tháng 5"},{value:"6",name:"tháng 6"},{value:"7",name:"tháng 7"},{value:"8",name:"tháng 8"},{value:"9",name:"tháng 9"},{value:"10",name:"tháng 10"},{value:"11",name:"tháng 11"},{value:"12",name:"tháng 12"}],month:"",tops:[{value:"",name:"toàn bộ"},{value:"overdue",name:"hồ sơ đang quá hạn cần giải quyết"},{value:"delay",name:"chậm hạn trả"},{value:"coming",name:"sắp đến hạn"}],top:"",statusLists:[],status:"",substatusLists:[{itemCode:"",itemName:"toàn bộ"}],substatus:"",agencyLists:[],agency:"",serviceLists:[],service:"",domainLists:[],domain:"",keyword:"",register:"",limitRecord:15},itemFilterKey:["year","month","top","status","substatus","agency","service","domain","keyword","register"],menuType:0,type_assign:"",assign_items:[],returnFiles:[],payments:"",viaPortalDetail:0,countSelected:0,statusFailed:0,dialog_statusAction:!1,dialog_printGuide:!1,dialog_extraForm:!1,validGuide:!1,applicantNameGuide:"",applicantEmailGuide:"",applicantTelNoGuide:"",applicantAddressGuide:"",dossierSelected:[{dossierNo:"18ACE289",serviceName:"Đăng ký, cấp Giấy chứng nhận quyền sử dụng đất, quyền sở hữu nhà ở và tài sản khác gắn liền với đất lần đầu đối với tài sản gắn liền với đất mà chủ sở hữu không đồng thời là người sử dụng đất",statusAction:!1}],buttonConfigItem:{},textNote:"",thongtinhoso:{},dossierId:0,valid:!0,isCallBack:!0,trangThaiHoSoList:null,listDichVu:[],dichVuSelected:null,btnDynamics:[],btnDossierDynamics:[],btnStepsDynamics:[],loading:!0,headers:[],hideAction:!1,hosoDatas:[],hosoDatasTotal:0,hosoDatasPage:1,hosoTotalPage:0,selectedDoAction:[],selectMultiplePage:[],selected:[],listThuTucHanhChinh:[],listThuTuc:[],thuTucHanhChinhSelected:null,thuTucHanhChinhSelectedGuide:null,listLinhVuc:[],linhVucSelected:null,listDichVuGuide:[],dichVuSelectedGuide:null,templateNoGuide:"",domainCode:"",govAgencyCode:"",serviceCode:"",templateNo:"",dossierNoKey:"",searchKey:"",dialogAction:!1,loadingAction:!1,dialogActionProcess:!1,loadingActionProcess:!1,validProcess:!1,indexAction:-1,itemAction:{title:""},showThongTinCoBanHoSo:!1,showYkienCanBoThucHien:!1,showFormBoSungThongTinNgan:!1,showPhanCongNguoiThucHien:!1,showTaoTaiLieuKetQua:!1,showKyPheDuyetTaiLieu:!1,showTraKetQua:!1,showXacNhanThuPhi:!1,showThuPhi:!1,showThucHienThanhToanDienTu:!1,dossierItemDialogPick:null,itemDialogPick:null,resultDialogPick:null,indexDialogPick:0,userNote:0,dialogPDF:!1,dialogPDFLoading:!0,filterForm:null,checkSelectAll:!1,titleLanding:"",currentQueryState:"",limits:[],showLimit:!1}},computed:{loadingDynamicBtn:function(){return this.$store.getters.loadingDynamicBtn},loadingTable:function(){return this.$store.getters.loadingTable},originality:function(){var t=this;return t.getOriginality()},currentUser:function(){return this.$store.getters.loadingInitData.user},activeLoadingDataHoSo:function(){return this.$store.getters.activeLoadingDataHoSo},viewMobile:function(){return Mt["isMobile"]}},created:function(){var t=this;t.selectMultiplePage=[],t.checkSelectAll=3!==t.menuType&&1!==t.originality,t.$nextTick((function(){var e=t.$router.history.current.query,a=t.$router.history.current.query;t.currentQueryState=e,e.hasOwnProperty("page")&&"1"!==e["page"]?t.hosoDatasPage=parseInt(e["page"]):t.hosoDatasPage=1,t.setStateAdvSearch(a)}))},updated:function(){var t=this;t.$nextTick((function(){var e=t.$router.history.current.params,a=t.$router.history.current.query;t.currentQueryState=a,e.hasOwnProperty("index")&&t.isCallBack&&(t.isCallBack=!1,t.$store.commit("setLoadingDynamicBtn",!0),setTimeout((function(){t.$store.dispatch("loadMenuConfigToDo").then((function(e){t.btnDynamics=[],t.trangThaiHoSoList=e,t.menuType=parseInt(t.trangThaiHoSoList[t.index]["menuType"]),t.checkSelectAll=3!==t.menuType&&1!==t.originality,t.processListTTHC(a),t.processListDomain(a),null!==t.trangThaiHoSoList[t.index]["tableConfig"]&&void 0!==t.trangThaiHoSoList[t.index]["tableConfig"]&&t.trangThaiHoSoList[t.index]["tableConfig"].hasOwnProperty("headers")&&(t.headers=t.trangThaiHoSoList[t.index]["tableConfig"]["headers"]),null!==t.trangThaiHoSoList[t.index]["tableConfig"]&&void 0!==t.trangThaiHoSoList[t.index]["tableConfig"]&&t.trangThaiHoSoList[t.index]["tableConfig"].hasOwnProperty("hideAction")&&(t.hideAction=t.trangThaiHoSoList[t.index]["tableConfig"]["hideAction"]),null!==t.trangThaiHoSoList[t.index]["buttonConfig"]&&void 0!==t.trangThaiHoSoList[t.index]["buttonConfig"]&&t.trangThaiHoSoList[t.index]["buttonConfig"].hasOwnProperty("buttons")&&(t.btnDynamics=t.trangThaiHoSoList[t.index]["buttonConfig"]["buttons"]),null!==t.trangThaiHoSoList[t.index]["buttonConfig"]&&void 0!==t.trangThaiHoSoList[t.index]["buttonConfig"]&&t.trangThaiHoSoList[t.index]["buttonConfig"].hasOwnProperty("layout_view")&&(t.filterForm=t.trangThaiHoSoList[t.index]["buttonConfig"]["layout_view"]);var i=[],o=[];for(var n in t.btnDynamics)t.btnDynamics[n].hasOwnProperty("onlySteps")?i.push(t.btnDynamics[n]):o.push(t.btnDynamics[n]);if(t.btnDynamics=[],t.btnDynamics=o,t.btnStepsDynamics=[],a.hasOwnProperty("step"))for(var s in t.trangThaiHoSoList[t.index]["items"]){var r=t.trangThaiHoSoList[t.index]["items"][s];if(String(r.stepCode)===String(a.step)){for(var c in i)for(var l=0;l<i[c].onlySteps.length;l++)String(i[c].onlySteps[l])===String(r.stepCode)&&t.btnDynamics.push(i[c]);break}}t.$store.commit("setLoadingDynamicBtn",!1)}))}),200))}))},watch:{$route:function(t,e){var a=this,i=t.query,o=e.query;if(a.currentQueryState=i,i.hasOwnProperty("q")){a.btnDynamics=[],a.$store.commit("setLoadingDynamicBtn",!0),a.menuType=a.trangThaiHoSoList[a.index]["menuType"],a.checkSelectAll=3!==a.menuType&&1!==a.originality,a.headers=a.trangThaiHoSoList[a.index]["tableConfig"]["headers"],null!==a.trangThaiHoSoList[a.index]["tableConfig"]&&void 0!==a.trangThaiHoSoList[a.index]["tableConfig"]&&a.trangThaiHoSoList[a.index]["tableConfig"].hasOwnProperty("hideAction")&&(a.hideAction=a.trangThaiHoSoList[a.index]["tableConfig"]["hideAction"]),null!==a.trangThaiHoSoList[a.index]["buttonConfig"]&&void 0!==a.trangThaiHoSoList[a.index]["buttonConfig"]&&a.trangThaiHoSoList[a.index]["buttonConfig"].hasOwnProperty("buttons")&&(a.btnDynamics=a.trangThaiHoSoList[a.index]["buttonConfig"]["buttons"]),null!==a.trangThaiHoSoList[a.index]["buttonConfig"]&&void 0!==a.trangThaiHoSoList[a.index]["buttonConfig"]&&a.trangThaiHoSoList[a.index]["buttonConfig"].hasOwnProperty("layout_view")&&(a.filterForm=a.trangThaiHoSoList[a.index]["buttonConfig"]["layout_view"]);var n=[],s=[];for(var r in a.btnDynamics)a.btnDynamics[r].hasOwnProperty("onlySteps")?n.push(a.btnDynamics[r]):s.push(a.btnDynamics[r]);if(a.btnDynamics=[],a.btnDynamics=s,a.btnStepsDynamics=[],i.hasOwnProperty("step"))for(var c in a.trangThaiHoSoList[a.index]["items"]){var l=a.trangThaiHoSoList[a.index]["items"][c];if(String(l.stepCode)===String(i.step)){for(var d in n)for(var u=0;u<n[d].onlySteps.length;u++)String(n[d].onlySteps[u])===String(l.stepCode)&&a.btnDynamics.push(n[d]);break}}if(i.hasOwnProperty("page")?(a.hosoDatasPage=parseInt(i.page),i.page===o["page"]&&(a.selectMultiplePage=[])):(a.hosoDatasPage=1,a.selectMultiplePage=[]),a.$store.commit("setLoadingDynamicBtn",!1),null===a.listLinhVuc||void 0===a.listLinhVuc||null!==a.listLinhVuc&&void 0!==a.listLinhVuc&&0===a.listLinhVuc.length)a.processListDomain(i);else for(var h in a.listLinhVuc)String(a.listLinhVuc[h]["domainCode"])===String(i.domain)&&(a.linhVucSelected=a.listLinhVuc[h],a.domainCode=a.linhVucSelected["domainCode"]);null===a.listThuTucHanhChinh||void 0===a.listThuTucHanhChinh||null!==a.listThuTucHanhChinh&&void 0!==a.listThuTucHanhChinh&&0===a.listThuTucHanhChinh.length?a.processListTTHC(i):a.doLoadingDataHoSo(),a.setStateAdvSearch(i)}},activeLoadingDataHoSo:function(t){var e=this;setTimeout((function(){e.doLoadingDataHoSo()}),100)},selectMultiplePage:{handler:function(t){var e=this;if(t.length>0)for(var a in e.selectedDoAction=[],t)e.selectedDoAction=e.selectedDoAction.concat(t[a]["selected"]);else e.selectedDoAction=[]},deep:!0},trangThaiHoSoList:function(t){var e=this;e.trangThaiHoSoList[e.index]["tableConfig"].hasOwnProperty("pagination")&&e.trangThaiHoSoList[e.index]["tableConfig"]["pagination"]?(e.limits=e.trangThaiHoSoList[e.index]["tableConfig"]["pagination"].filter((function(t){return Number(t)<=100})),e.limits.length>0?(e.limitRecord=e.trangThaiHoSoList[e.index]["tableConfig"]["pagination"][0],e.showLimit=!0):(e.showLimit=!1,e.limitRecord=15)):(e.showLimit=!1,e.limitRecord=15)},index:function(t){var e=this;e.trangThaiHoSoList[e.index]["tableConfig"].hasOwnProperty("pagination")&&e.trangThaiHoSoList[e.index]["tableConfig"]["pagination"]?(e.limits=e.trangThaiHoSoList[e.index]["tableConfig"]["pagination"].filter((function(t){return Number(t)<=100})),e.limits.length>0?(e.limitRecord=e.trangThaiHoSoList[e.index]["tableConfig"]["pagination"][0],e.showLimit=!0):(e.showLimit=!1,e.limitRecord=15)):(e.showLimit=!1,e.limitRecord=15)}},methods:{toggleAll:function(){var t=this;if(t.getUser("Administrator"))t.selected.length?t.selected=[]:t.selected=t.hosoDatas;else{if(!t.thuTucHanhChinhSelected||t.thuTucHanhChinhSelected&&"0"===t.thuTucHanhChinhSelected.serviceConfigId||t.thuTucHanhChinhSelected&&""===t.thuTucHanhChinhSelected.serviceConfigId)return;t.selected.length?t.selected=[]:t.selected=t.hosoDatas.filter((function(t){return 0!==t["assigned"]}))}t.selectMultiplePage[t.hosoDatasPage-1]["selected"]=t.selected},getUser:function(t){var e=this,a=e.$store.getters.getUser.role,i=a.findIndex((function(e){return e===t}));return i>=0},changeSelected:function(){var t=this;t.selectMultiplePage[t.hosoDatasPage-1]["selected"]=t.selected},setStateAdvSearch:function(t){var e=this;if(t.hasOwnProperty("adv_renew")){for(var a in e.advSearchItems=[],e.itemFilterKey)for(var i in t){if(e.itemFilterKey[a]===i&&t[i]){e.itemFilterSupport[e.itemFilterKey[a]]=t[i];break}e.itemFilterSupport[e.itemFilterKey[a]]=""}var o=function(t){var a=e.itemFilterKey[t],i=e.advSearchTools.find((function(t){return t.spec===a}));if(e.itemFilterSupport[a])if("keyword"===a)e.advSearchItems.push({spec:a,value:a+":"+e.itemFilterSupport[a],text:a+":"+e.itemFilterSupport[a],index:-1});else if("year"===a){var o=e.advSearchItems.find((function(t){return"year_month"===t.spec}));o?(o["value"]="year_month:"+e.itemFilterSupport[a]+"_"+e.itemFilterSupport["month"],o["text"]="year_month:"+e.itemFilterSupport[a]+"_"+e.itemFilterSupport["month"],o["index"]=0):e.advSearchItems.push({spec:"year_month",value:"year_month:"+e.itemFilterSupport[a]+"_"+e.itemFilterSupport["month"],text:"year_month:"+e.itemFilterSupport[a]+"_"+e.itemFilterSupport["month"],index:0})}else if("month"===a){var n=e.advSearchItems.find((function(t){return"year_month"===t.spec}));n?(n["value"]="year_month:"+e.itemFilterSupport["year"]+"_"+e.itemFilterSupport[a],n["text"]="year_month:"+e.itemFilterSupport["year"]+"_"+e.itemFilterSupport[a],n["index"]=0):e.advSearchItems.push({spec:"year_month",value:"year_month:"+e.itemFilterSupport["year"]+"_"+e.itemFilterSupport[a],text:"year_month:"+e.itemFilterSupport["year"]+"_"+e.itemFilterSupport[a],index:0})}else e.advSearchItems.push({spec:a,value:a+":"+e.itemFilterSupport[a],text:a+":"+e.itemFilterSupport[a],index:i["index"]})};for(var n in e.itemFilterKey)o(n)}else e.advSearchItems=[];var s=function(t){e.advSearchTools[t].display=!1,e.advSearchTools[t].disabled=!1;var a=e.advSearchItems.find((function(a){return a.spec===e.advSearchTools[t].spec}));a&&(e.advSearchTools[t].display=!0,e.advSearchTools[t].disabled=!0)};for(var r in e.advSearchTools)s(r)},resend:function(){var t=this;t.doActions(null,t.buttonConfigItem,null,!0)},closeDialogStatusAction:function(){var t=this;t.dialog_statusAction=!1,t.selectedDoAction=t.selectedDoAction.filter((function(t){return!t.statusAction}))},submitFormXuLy:function(t,e,a,i,o){var n=this;if(n.showYkienCanBoThucHien){var s=n.$refs.ykiencanbo.doExport();s.valid&&(n.textNote=s.text,n.processAction(t,e,a,i,!1))}else n.processAction(t,e,a,i,!1)},processListTTHC:function(t){var e=this;e.$store.dispatch("loadListThuTucHanhChinh").then((function(a){if((!t.hasOwnProperty("domain")||t.hasOwnProperty("domain")&&""===String(t.domain))&&(e.listThuTucHanhChinh=a.map((function(t){return t["displayName"]=t["serviceCode"]+" - "+t["serviceName"],t}))),e.listThuTuc=a.map((function(t){return t["displayName"]=t["serviceCode"]+" - "+t["serviceName"],t})),t.hasOwnProperty("service_config")&&"0"!==String(t.service_config)){for(var i in e.listThuTucHanhChinh)if(String(e.listThuTucHanhChinh[i].serviceConfigId)===String(t.service_config)){if(e.thuTucHanhChinhSelected=e.listThuTucHanhChinh[i],null!==e.thuTucHanhChinhSelected&&void 0!==e.thuTucHanhChinhSelected&&e.thuTucHanhChinhSelected.hasOwnProperty("options"))if(e.govAgencyCode=e.thuTucHanhChinhSelected.govAgencyCode,e.serviceCode=e.thuTucHanhChinhSelected.serviceCode,t.hasOwnProperty("template_no"))for(var o in e.listDichVu=e.thuTucHanhChinhSelected.options,e.listDichVu)e.listDichVu[o].templateNo===t.template_no&&(e.dichVuSelected=e.listDichVu[o],e.templateNo=e.dichVuSelected.templateNo);else e.listDichVu=[],e.dichVuSelected=null,e.govAgencyCode="",e.serviceCode="",e.templateNo="";break}}else e.thuTucHanhChinhSelected=null,e.dichVuSelected=null,e.govAgencyCode="",e.serviceCode="",e.templateNo="";e.doLoadingDataHoSo()}))},processListDomain:function(t){var e=this;e.$store.dispatch("getDomainLists").then((function(a){if(a.length>0&&(e.listLinhVuc=a.map((function(t){return t["displayName"]=t["domainCode"]+" - "+t["domainName"],t}))),t.hasOwnProperty("domain")&&""!==String(t.domain)){for(var i in e.listLinhVuc)String(e.listLinhVuc[i]["domainCode"])===String(t.domain)&&(e.linhVucSelected=e.listLinhVuc[i],e.domainCode=e.linhVucSelected["domainCode"]);var o={domain:e.linhVucSelected.domainCode};e.$store.dispatch("getServiceinfoFilter",o).then((function(t){e.listThuTucHanhChinh=t.map((function(t){return t["displayName"]=t["serviceCode"]+" - "+t["serviceName"],t}))}))}else e.linhVucSelected=null}))},checkPemissionSpecialAction:function(t,e,a){var i=this,o=!0;if("PRINT_01"!==t&&"PRINT_02"!==t&&"PRINT_03"!==t&&"GUIDE"!==t&&"PREVIEW"!==t&&"BETIMES"!==t){var n=i.$store.getters.getUsersNextAction;if(n.length>0){var s=n.filter((function(t){if(void 0!==t&&void 0!==e)return t["userId"].toString()===e["userId"].toString()}));o=s.length>0}else o=!1}return"ROLLBACK_01"!==t&&"ROLLBACK_02"!==t&&"ROLLBACK_03"!==t||(o=!1),o},paggingData:function(t){var e=this;e.limitRecord=t.numberPerPage?t.numberPerPage:15;var a=e.$router.history.current,i=a.query,o="?";for(var n in i["page"]="",i)""!==i[n]&&"undefined"!==i[n]&&void 0!==i[n]&&(o+=n+"="+i[n]+"&");o+="page="+t.page,e.$router.push({path:a.path+o})},doLoadingDataHoSo:function(){var t=this;t.selected=[];var e=t.$router.history.current.query;if(console.log("currentQuery======",e),e.hasOwnProperty("q")){var a;a=e.q.indexOf("step")>0?e.q:e["step"]?e.q+"&step="+e["step"]:e.q;var i=null;if(3!==t.menuType)i={queryParams:a,page:t.hosoDatasPage,numberPerPage:t.limitRecord,order:e.hasOwnProperty("order")?e.order:"",agency:e.hasOwnProperty("agency")?e.agency:t.govAgencyCode,service:e.hasOwnProperty("service")?e.service:t.serviceCode,template:e.hasOwnProperty("template")?e.template:t.templateNo,domain:e.hasOwnProperty("domain")?e.domain:t.domainCode,status:e.hasOwnProperty("status")?e.status:"",substatus:e.hasOwnProperty("substatus")?e.substatus:"",year:e.hasOwnProperty("year")?e.year:0,month:e.hasOwnProperty("month")?e.month:0,top:e.hasOwnProperty("top")?e.top:"",keyword:e.hasOwnProperty("keyword")&&e.keyword?e.keyword:t.searchKey,register:e.hasOwnProperty("register")?e.register:"",paymentStatus:e.hasOwnProperty("paymentStatus")?e.paymentStatus:"",dossierNo:t.dossierNoKey?t.dossierNoKey:""};else{var o=e.hasOwnProperty("status")&&"deleted"===e["status"]?-1:"";i={queryParams:a,page:t.hosoDatasPage,numberPerPage:t.limitRecord,order:e.hasOwnProperty("order")?e.order:"",agency:e.hasOwnProperty("agency")?e.agency:t.govAgencyCode,service:e.hasOwnProperty("service")?e.service:t.serviceCode,template:e.hasOwnProperty("template")?e.template:t.templateNo,domain:e.hasOwnProperty("domain")?e.domain:t.domainCode,status:e.hasOwnProperty("status")&&e["status"]&&"deleted"!==e["status"]?e.status:"",substatus:e.hasOwnProperty("substatus")?e.substatus:"",year:e.hasOwnProperty("year")?e.year:0,month:e.hasOwnProperty("month")?e.month:0,top:e.hasOwnProperty("top")?e.top:"",keyword:e.hasOwnProperty("keyword")&&e.keyword?e.keyword:"",register:e.hasOwnProperty("register")?e.register:"",paymentStatus:e.hasOwnProperty("paymentStatus")?e.paymentStatus:"",originality:e.hasOwnProperty("originality")&&e["originality"]?e.originality:o,dossierNo:t.dossierNoKey?t.dossierNoKey:""}}t.$store.dispatch("loadingDataHoSo",i).then((function(e){if(t.hosoDatas=e.data,t.hosoDatasTotal=e.total,t.hosoTotalPage=Math.ceil(t.hosoDatasTotal/t.limitRecord),t.hosoTotalPage>0&&0===t.selectMultiplePage.length){for(var a=0;a<t.hosoTotalPage;a++){var i={selected:[],page:a+1};t.selectMultiplePage.push(i)}console.log("selectMultiplePage",t.selectMultiplePage)}t.selected=t.selectMultiplePage[t.hosoDatasPage-1]["selected"]})).catch((function(e){t.hosoDatas=[],t.hosoDatasTotal=0}))}3===t.menuType||"3"===String(t.menuType)?setTimeout((function(){t.$store.dispatch("loadingDossierCounting").then((function(e){if(null!==e&&void 0!==e){if(t.dossierCounting=e,t.getUser("Administrator_data")){var a={key:"deleted",title:"Hồ sơ đã xóa",count:0};t.dossierCounting.push(a)}}else t.dossierCounting=[];t.dossierCountingShow=!0}))}),200):t.dossierCountingShow=!1},changeServiceConfigs:function(t){var e=this;e.selectMultiplePage=[],null!==t&&"null"!==t&&t.hasOwnProperty("options")?this.listDichVu=t.options:this.listDichVu=[],null!==this.listDichVu&&void 0!==this.listDichVu&&"undefined"!==this.listDichVu&&this.listDichVu.length>0?(this.dichVuSelected=this.listDichVu[0],this.templateNo=this.dichVuSelected.templateNo):this.dichVuSelected=null;var a=e.$router.history.current,i=a.query,o="?";for(var n in i["service_config"]="",i["template_no"]="",i)"page"===n?o+=n+"=1&":""!==i[n]&&"undefined"!==i[n]&&void 0!==i[n]&&"step"!==n&&(o+=n+"="+i[n]+"&");-1===String(i["q"]).indexOf("&step")&&3!==e.menuType&&(o+="step="+i["step"]+"&"),null!==this.listDichVu&&void 0!==this.listDichVu&&"undefined"!==this.listDichVu&&this.listDichVu.length>0?(o+="service_config="+t.serviceConfigId,o+="&template_no="+this.dichVuSelected.templateNo,e.govAgencyCode=t.govAgencyCode,e.serviceCode=t.serviceCode):(e.templateNo="",e.govAgencyCode="",e.serviceCode=""),e.$router.push({path:a.path+o})},changeServiceConfigsGuide:function(t){null!==t&&"null"!==t&&t.hasOwnProperty("options")?this.listDichVuGuide=t.options:this.listDichVuGuide=[],null!==this.listDichVuGuide&&void 0!==this.listDichVuGuide&&"undefined"!==this.listDichVuGuide&&this.listDichVuGuide.length>0?(this.dichVuSelectedGuide=this.listDichVuGuide[0],this.templateNoGuide=this.dichVuSelectedGuide.templateNo):this.dichVuSelectedGuide=null},changeDomain:function(t){var e=this;e.selectMultiplePage=[],e.linhVucSelected=t,t?setTimeout((function(){var t={domain:e.linhVucSelected.domainCode};e.$store.dispatch("getServiceinfoFilter",t).then((function(t){e.listThuTucHanhChinh=t.map((function(t){return t["displayName"]=t["serviceCode"]+" - "+t["serviceName"],t}))}))}),100):e.listThuTucHanhChinh=e.listThuTuc,e.domainCode=null!==t?e.linhVucSelected["domainCode"]:"";var a=e.$router.history.current,i=a.query,o="?";for(var n in i["domain"]="",i)"page"===n?o+=n+"=1&":""!==i[n]&&"undefined"!==i[n]&&void 0!==i[n]&&"step"!==n&&(o+=n+"="+i[n]+"&");-1===String(i["q"]).indexOf("&step")&&3!==e.menuType&&(o+="step="+i["step"]+"&"),o+="domain="+e.domainCode,e.$router.push({path:a.path+o,query:{renew:Math.floor(100*Math.random())+1}})},changeDossierNoKey:function(){var t=this;t.selectMultiplePage=[],setTimeout((function(){t.dossierNoKey?(t.dossierNoKey.length>3||""===t.dossierNoKey)&&t.doLoadingDataHoSo():t.doLoadingDataHoSo()}),200)},clearDossierNoKey:function(){this.dossierNoKey="",this.changeDossierNoKey()},changeDichVuConfigs:function(t){var e=this;e.selectMultiplePage=[];var a=e.$router.history.current,i=a.query,o="?";for(var n in i["template_no"]="",i)""!==i[n]&&"undefined"!==i[n]&&void 0!==i[n]&&(o+=n+"="+i[n]+"&");o+="template_no="+t.templateNo,e.templateNo=t.templateNo,e.$router.push({path:a.path+o})},btnActionEvent:function(t,e,a,i){var o=this;if(o.buttonConfigItem={},o.buttonConfigItem=e,o.itemAction=e,o.indexAction=a,"NEW"===String(e.form)){var n=!0;null!==o.dichVuSelected&&void 0!==o.dichVuSelected&&"undefined"!==o.dichVuSelected&&null!==o.listDichVu&&void 0!==o.listDichVu&&1===o.listDichVu.length&&(n=!1),n?o.dialogAction=!0:o.doCreateDossier()}else if("UPDATE"===String(e.form))o.$router.push({path:"/danh-sach-ho-so/"+o.index+"/ho-so/"+t.dossierId+"/"+o.itemAction.form,query:o.$router.history.current.query});else if("ADD"===String(e.form))o.$router.push({path:"/danh-sach-ho-so/"+o.index+"/bo-sung-ho-so/"+t.dossierId,query:o.$router.history.current.query});else if("COPY"===String(e.form))o.doCopy(t,e,a,i);else if("CANCEL"===String(e.form))o.doCancel(t,e,a,i);else if("PRINT_01"===String(e.form))o.doPrint01(t,e,a,i);else if("PRINT_02"===String(e.form))o.doPrint02(t,e,a,i);else if("PRINT_03"===String(e.form))o.doPrint03(t,e,a,i);else if("GUIDING"===String(e.form))o.dialog_printGuide=!0;else if("PREVIEW"===String(e.form))o.doPreview(t,e,a,i);else if("ACTIONS"===String(e.form))o.doActions(t,e,a,i);else if("DELETE"===String(e.form))o.doDeleteDossier(t,e,a,i);else if("ROLLBACK_01"===String(e.form)){var s={actionCode:9e3};o.processAction(t,e,s,a,!0)}else if("ROLLBACK_02"===String(e.form)){var r={actionCode:9e3};o.processAction(t,e,r,a,!0)}else if("OVERDUE"===String(e.form)){var c={actionCode:8500,dossierId:t.dossierId,overdue:t["extendDate"]};o.processPullBtnDetailRouter(t,null,c,null,8500)}else if("PREOVERDUE"===String(e.form)){var l={actionCode:8501,dossierId:t.dossierId,preoverdue:t["extendDate"]};o.processPullBtnDetailRouter(t,null,l,null,8501)}else if("BETIMES"===String(e.form)){var d={actionCode:8400,dossierId:t.dossierId,betimes:t["extendDate"]};o.processPullBtnDetailRouter(t,null,d,null,8400)}else if("CHANGE_DATA_DOSSIER"===String(e.form))o.doChangeDossier(t,e,a,i);else if("UNDO_DOSSIER"===String(e.form))o.doUndoDossier(t,e,a,i);else if("RESTORE_DOSSIER"===String(e.form))o.doRestoreDossier(t,e,a,i);else if("GOTO_DONE"===String(e.form)){if(!t)return void alert("Chọn hồ sơ để thực hiện");var u={actionCode:4e3};o.processAction(t,e,u,a,!0)}else if("GOTO_CANCEL"===String(e.form)){if(!t)return void alert("Chọn hồ sơ để thực hiện");var h={actionCode:4100};o.processAction(t,e,h,a,!0)}else if("GOTO_DENY"===String(e.form)){if(!t)return void alert("Chọn hồ sơ để thực hiện");var p={actionCode:4200};o.processAction(t,e,p,a,!0)}},doPrint01:function(t,e,a,i){var o=this;o.dialogPDFLoading=!0,o.dialogPDF=!0;var n={dossierId:t.dossierId,document:e.document};o.$store.dispatch("doPrint01",n).then((function(t){o.dialogPDFLoading=!1,document.getElementById("dialogPDFPreview").src=t}))},doPrint02:function(t,e,a,i){var o=this;if(console.log("vm.selectedDoAction",o.selectedDoAction),null===o.thuTucHanhChinhSelected||void 0===o.thuTucHanhChinhSelected||"undefined"===o.thuTucHanhChinhSelected)alert("Loại thủ tục bắt buộc phải chọn");else{var n={document:e.document,serviceCode:o.thuTucHanhChinhSelected.serviceCode,govAgencyCode:o.thuTucHanhChinhSelected.govAgencyCode,dossiers:JSON.stringify(o.selectedDoAction)};o.dialogPDFLoading=!0,o.dialogPDF=!0,o.$store.dispatch("doPrint02",n).then((function(t){o.dialogPDFLoading=!1,document.getElementById("dialogPDFPreview").src=t}))}},doPrint03:function(t,e,a,i){var o=this;o.dialogPDFLoading=!0,o.dialogPDF=!0;var n={dossierId:t.dossierId,document:e.document};o.$store.dispatch("doPrint03",n).then((function(t){o.dialogPDFLoading=!1,document.getElementById("dialogPDFPreview").src=t}))},doGuiding:function(){var t=this;if(t.$refs.formGuide.validate()){t.loadingAction=!0;var e={serviceConfigId:t.thuTucHanhChinhSelectedGuide.serviceConfigId,serviceCode:t.thuTucHanhChinhSelectedGuide.serviceCode,serviceName:t.thuTucHanhChinhSelectedGuide.serviceName,templateNo:t.templateNoGuide,applicantName:t.applicantNameGuide,applicantAddress:t.applicantAddressGuide,applicantEmail:t.applicantEmailGuide,applicantTelNo:t.applicantTelNoGuide,employeeName:window.themeDisplay.getUserName()?window.themeDisplay.getUserName():"",typeCode:"DOC_03"};t.dialogPDFLoading=!0,t.dialogPDF=!0,t.$store.dispatch("doGuiding",e).then((function(e){t.loadingAction=!1,t.dialog_printGuide=!1,t.dialogPDFLoading=!1,document.getElementById("dialogPDFPreview").src=e})).catch((function(){t.loadingAction=!1}))}},doPreview:function(t,e,a,i){var o=this;o.dialogPDFLoading=!0,o.dialogPDF=!0;var n={dossierId:t.dossierId,document:e.document};o.$store.dispatch("doPrint03",n).then((function(t){o.dialogPDFLoading=!1,document.getElementById("dialogPDFPreview").src=t}))},doActions:function(t,e,a,i){var o=this;o.$router.history.current.query,e.action;if(i)if(o.countSelected=0,1===o.selectedDoAction.length)for(var n in o.selectedDoAction){var s=o.selectedDoAction[n];o.$router.push({path:"/danh-sach-ho-so/"+o.index+"/chi-tiet-ho-so/"+s["dossierId"],query:{activeTab:"tabs-1",btnIndex:null}})}else o.selectedDoAction.length>1?o.$store.dispatch("loadActionActive",e).then((function(){o.$store.dispatch("loadDossierSelected",o.selectedDoAction).then((function(){var t=o.selectedDoAction.map((function(t){return t.dossierId})).join(","),a=o.$router.history.current.query;a["dossiers"]=t,a["actionActive"]=JSON.stringify(e),o.$router.push({path:"/danh-sach-ho-so/"+o.index+"/xu-ly-ho-so",query:a})}))})):alert("Chọn hồ sơ để thao tác")},doCopy:function(t,e,a,i){var o=this,n={dossierId:t.dossierId};o.loadingAction=!0,o.$store.dispatch("doCopy",n).then((function(t){o.loadingAction=!1,o.indexAction=-1,o.$router.push({path:"/danh-sach-ho-so/"+o.index+"/ho-so/"+t.dossierId+"/"+o.itemAction.form,query:o.$router.history.current.query})})).catch((function(t){o.loadingAction=!1}))},doCancel:function(t,e,a,i){var o=this;if(o.loadingAction=!0,i);else{var n={dossierId:t.dossierId};o.$store.dispatch("doCancel",n).then((function(t){o.loadingAction=!1,o.indexAction=-1,o.$router.push({path:"/danh-sach-ho-so/"+o.index+"/ho-so/"+t.dossierId+"/"+o.itemAction.form,query:o.$router.history.current.query})})).catch((function(t){o.loadingAction=!1}))}},doChangeDossier:function(t,e,a,i){var o=this;o.$router.history.current.query;if(i)if(o.selectedDoAction.length>0){var n=o.selectedDoAction.length;o.actionId=9100,o.dossierIdSelected=o.selectedDoAction[n-1].dossierId,o.dialog_extraForm=!0}else alert("Chọn hồ sơ để thực hiện")},doUndoDossier:function(t,e,a,i){var o=this;o.$router.history.current.query;if(o.selectedDoAction.length>0){var n=o.selectedDoAction.length,s=confirm("Xác thực Undo hồ sơ với mã: "+o.selectedDoAction[n-1].dossierNo);if(s){var r={dossierId:o.selectedDoAction[n-1].dossierId};o.$store.dispatch("rollBack",r).then((function(t){setTimeout((function(){o.doLoadingDataHoSo()}),300)})).catch((function(){setTimeout((function(){o.doLoadingDataHoSo()}),300)}))}}else alert("Chọn hồ sơ để thực hiện")},doChangeDossierExtraForm:function(){var t=this,e=t.$refs.formBoSungThongTinNgan.checkValid();if(e){var a=t.$refs.formBoSungThongTinNgan.formSubmitData(),i=confirm("Bạn có chắc chắn thực hiện hành động điều chỉnh dữ liệu?");if(i){var o=t.selectedDoAction.length,n={dossierId:t.selectedDoAction[o-1].dossierId,actionCode:t.actionId,payload:a};t.$store.dispatch("processDossierRouter",n).then((function(e){t.doLoadingDataHoSo(),t.dialog_extraForm=!1})).catch((function(){t.dialog_extraForm=!1,t.doLoadingDataHoSo()}))}}},doRestoreDossier:function(){var t=this,e=confirm("Bạn có chắc chắn thực hiện hành động khôi phục hồ sơ?");e&&(t.selectedDoAction.length>0?function(){var e=0,a=t.selectedDoAction.length;for(var i in t.selectedDoAction){var o={dossierId:t.selectedDoAction[i]["dossierId"]};console.log("filter Restore",o),t.selectedDoAction[i]["originality"]&&t.$store.dispatch("restoreDossier",o).then((function(i){e+=1,e===a&&t.doLoadingDataHoSo()})).catch((function(){e+=1,e===a&&t.doLoadingDataHoSo()}))}}():alert("Chọn hồ sơ để thực hiện"))},doDeleteDossier:function(t,e,a,i){var o=this,n=confirm("Bạn có chắc chắn thực hiện hành động xóa hồ sơ?");if(!n)return!1;var s=o.$router.history.current.query;if(i){var r={dossierId:0};if(o.selectedDoAction.length>0){var c=[];for(var l in o.selectedDoAction)c.push(o.selectedDoAction[l]["dossierId"]);r["dossierId"]=c,o.$store.dispatch("deleteDossierPatch",r).then((function(t){}))}else alert("Chọn hồ sơ để thực hiện")}else{var d={dossierId:t.dossierId};o.$store.dispatch("deleteDossier",d).then((function(t){o.dialogActionProcess=!1,o.loadingActionProcess=!1,o.$router.push({path:o.$router.history.current.path,query:{recount:Math.floor(100*Math.random())+1,renew:Math.floor(100*Math.random())+1,q:s["q"]}})}))}},doCreateDossier:function(){var t=this,e={serviceCode:t.serviceCode,govAgencyCode:t.govAgencyCode,templateNo:t.templateNo,originality:t.getOriginality()};t.$store.commit("setDataCreateDossier",e),t.loadingAction=!0,t.$store.dispatch("postDossier",e).then((function(e){t.loadingAction=!1,t.indexAction=-1,t.$router.push({path:"/danh-sach-ho-so/"+t.index+"/ho-so/"+e.dossierId+"/"+t.itemAction.form,query:t.$router.history.current.query})})).catch((function(e){t.loadingAction=!1}))},doSubmitDialogAction:function(t){var e=this;e.$refs.form.validate()&&e.doCreateDossier()},processPullBtnDynamics:function(t){var e=this;e.btnDossierDynamics=[];var a={dossierId:t.dossierId,dossierStatus:t.dossierStatus,dossierSubStatus:t.dossierSubStatus};if(e.dossierId=t.dossierId,""===t.dossierStatus||""===t.dossierSubStatus)e.$store.dispatch("pullNextactions",a).then((function(t){e.btnDossierDynamics=t}));else{e.btnStepsDynamics=[];var i=[e.$store.dispatch("pullNextactions",a),e.$store.dispatch("pullBtnConfigStep",a)];Promise.all(i).then((function(t){e.btnDossierDynamics=t[0],e.btnStepsDynamics=t[1]})).catch((function(t){e.$store.dispatch("pullNextactions",a).then((function(t){e.btnDossierDynamics=t}))}))}},processAction:function(t,e,a,i,o){var n=this,s=null;n.payments&&(s={requestPayment:n.payments["requestPayment"],advanceAmount:Number(n.payments["advanceAmount"].toString().replace(/\./g,"")),feeAmount:Number(n.payments["feeAmount"].toString().replace(/\./g,"")),serviceAmount:Number(n.payments["serviceAmount"].toString().replace(/\./g,"")),shipAmount:Number(n.payments["shipAmount"].toString().replace(/\./g,""))});var r={dossierId:t.dossierId,actionCode:a.actionCode,toUsers:n.assign_items,payment:s,userNote:n.textNote?n.textNote:""};n.dossierId=t.dossierId;var c=n.$router.history.current.query,l="?";for(var d in c["recount"]=Math.floor(100*Math.random())+1,c["renew"]=Math.floor(100*Math.random())+1,c)""!==c[d]&&"undefined"!==c[d]&&void 0!==c[d]&&(l+=d+"="+c[d]+"&");if(n.loadingActionProcess=!0,o){var u=confirm("Bạn có muốn thực hiện hành động này?");if(!u)return!1;n.$store.dispatch("processDossierRouter",r).then((function(t){n.dialogActionProcess=!1,n.loadingActionProcess=!1,n.$router.push({path:n.$router.history.current.path+l})}))}else t.statusAction||n.$store.dispatch("processCheckNextActions",r).then((function(t){n.$store.dispatch("processDossierRouter",t).then((function(t){n.dialogActionProcess=!1,n.loadingActionProcess=!1,"ACTIONS"===String(e.form)?(n.hosoDatas.splice(i,1),n.selectedDoAction[i].statusAction=!0,n.countSelected+=1,n.countSelected===n.selectedDoAction.length&&n.statusFailed>0&&n.selectedDoAction.length>1?n.dialog_statusAction=!0:n.countSelected===n.selectedDoAction.length&&0===n.statusFailed&&n.$router.push({path:n.$router.history.current.path,query:{recount:Math.floor(100*Math.random())+1,renew:Math.floor(100*Math.random())+1,q:c["q"]}})):n.$router.push({path:n.$router.history.current.path,query:{recount:Math.floor(100*Math.random())+1,renew:Math.floor(100*Math.random())+1,q:c["q"]}})})).catch((function(){n.loadingActionProcess=!1,"ACTIONS"===String(e.form)&&(n.countSelected+=1,n.statusFailed+=1,n.selectedDoAction[i].statusAction=!1,n.countSelected===n.selectedDoAction.length&&n.statusFailed>0&&n.selectedDoAction.length>1&&(n.dialog_statusAction=!0))}))}))},processPullBtnDetailRouter:function(t,e,a,i,o){var n=this,s=!1;if(n.dossierId=t.dossierId,n.showYkienCanBoThucHien=!1,n.showFormBoSungThongTinNgan=!1,n.showPhanCongNguoiThucHien=!1,n.showTaoTaiLieuKetQua=!1,n.showKyPheDuyetTaiLieu=!1,n.showTraKetQua=!1,n.showXacNhanThuPhi=!1,n.showThuPhi=!1,n.showThucHienThanhToanDienTu=!1,n.dossierItemDialogPick=t,n.itemDialogPick=e,n.resultDialogPick=a,n.indexDialogPick=i,n.userNote=0,null!==a&&void 0!==a&&"undefined"!==a&&(a.hasOwnProperty("userNote")||a.hasOwnProperty("extraForm")||a.hasOwnProperty("allowAssignUser")||a.hasOwnProperty("createFiles")||a.hasOwnProperty("eSignature")||a.hasOwnProperty("returnFiles")||a.hasOwnProperty("payment")||a.hasOwnProperty("overdue")||a.hasOwnProperty("betimes"))){if(!a.hasOwnProperty("userNote")||1!==a.userNote&&"1"!==a.userNote&&2!==a.userNote&&"2"!==a.userNote||(s=!0,n.showYkienCanBoThucHien=!0,n.userNote=a.userNote),a.hasOwnProperty("extraForm")&&a.extraForm&&(s=!0,n.showFormBoSungThongTinNgan=!0),a.hasOwnProperty("allowAssignUser")&&0!==a.allowAssignUser&&(n.assign_items=a.toUsers,n.type_assign=a.allowAssignUser,s=!0,n.showPhanCongNguoiThucHien=!0),a.hasOwnProperty("returnFiles")&&null!==a.createFiles&&void 0!==a.createFiles&&"undefined"!==a.createFiles&&a.createFiles.length>0&&(s=!0,n.showTaoTaiLieuKetQua=!0),a.hasOwnProperty("eSignature")&&a.eSignature&&(s=!0,n.showKyPheDuyetTaiLieu=!0),a.hasOwnProperty("returnFiles")&&null!==a.returnFiles&&void 0!==a.returnFiles&&"undefined"!==a.returnFiles&&a.returnFiles.length>0&&(s=!0,n.showTraKetQua=!0,n.returnFiles=a.returnFiles),a.hasOwnProperty("payment")&&null!==a.payment&&void 0!==a.payment&&"undefined"!==a.payment&&a.payment.requestPayment>0)if(2===a.payment.requestPayment||"2"===a.payment.requestPayment){s=!0;var r={dossierId:n.dossierId};n.$store.dispatch("loadDossierPayments",r).then((function(t){n.paymentProfile=t})).catch((function(t){}))}else s=!0,n.showThuPhi=!0,n.payments=a.payment,n.viaPortalDetail=t.viaPostal;a.hasOwnProperty("overdue")&&(s=!0),a.hasOwnProperty("betimes")&&(s=!0)}if(s){var c={activeTab:"tabs-1",btnIndex:o};n.$router.push({path:"/danh-sach-ho-so/"+n.index+"/chi-tiet-ho-so/"+t["dossierId"],query:c})}else n.processAction(t,e,a,i,!0)},processPullBtnDetail:function(t,e,a,i){var o=this;if(1===e["enable"]||"special"===e["autoEvent"]){o.itemAction=e;var n={dossierId:t.dossierId,actionId:e.processActionId};o.dossierId=t.dossierId,o.loadingActionProcess=!0,o.$store.dispatch("processPullBtnDetail",n).then((function(n){o.processPullBtnDetailRouter(t,e,n,a,i)}))}},goBack:function(){window.history.back()},viewDetail:function(t,e){var a=this;console.log("permission: ",t.permission),null!==t.permission&&""!==t.permission&&a.$router.push("/danh-sach-ho-so/"+this.index+"/chi-tiet-ho-so/"+t["dossierId"])},keywordEventChange:function(t){var e=this;for(var a in e.selectMultiplePage=[],console.log("keywordEventChange",t),e.advObjectSearch={},t)if("string"===typeof t[a]&&null!==t[a]&&void 0!==t[a]&&"undefined"!==t[a])if(t[a].startsWith("keyword:")||t[a].startsWith("year_month:")||t[a].startsWith("top:")||t[a].startsWith("status:")||t[a].startsWith("substatus:")||t[a].startsWith("agency:")||t[a].startsWith("service:")||t[a].startsWith("domain:")||t[a].startsWith("register:")||(e.advObjectSearch["keyword"]=t[a]),t[a].startsWith("keyword:"))e.advObjectSearch["keyword"]=t[a].replace("keyword:","");else for(var i in e.advSearchItems)t[a].startsWith(e.advSearchItems[i].spec+":")&&(e.advObjectSearch[e.advSearchItems[i].spec]=t[a].replace(e.advSearchItems[i].spec+":",""));else{var o=t[a].value;e.advObjectSearch[t[a].spec]=o.replace(t[a].spec+":","")}for(var n in e.advSearchItems=[],e.advObjectSearch)if(e.advObjectSearch.hasOwnProperty(n)){var s=e.advObjectSearch[n];if("string"===typeof s&&null!==s&&void 0!==s&&""!==s)if("keyword"===n)e.advSearchItems.push({spec:n,value:n+":"+s,text:n+":"+s,index:-1});else{var r=-2;for(var c in e.advSearchTools)if(e.advSearchTools[c].spec===n){r=e.advSearchTools[c].index;break}e.advSearchItems.push({spec:n,value:n+":"+s,text:n+":"+s,index:r})}else"string"!==typeof s&&null!==s&&void 0!==s&&""!==s&&e.advSearchItems.push({spec:n,value:n+":"+s.value,text:n+":"+s.value,index:n+":"+s.index})}for(var l in e.advSearchTools)e.advSearchTools[l].display=!1,e.advSearchTools[l].disabled=!1,null!==e.advObjectSearch[e.advSearchTools[l].spec]&&void 0!==e.advObjectSearch[e.advSearchTools[l].spec]&&""!==e.advObjectSearch[e.advSearchTools[l].spec]&&(e.advSearchTools[l].display=!0,e.advSearchTools[l].disabled=!0);console.log("vm.advSearchItems",e.advSearchItems),e.doRedirectFilter()},selectedAdvFilter:function(t){var e=this;e.advSearchTools[t.index].display=!0,e.advSearchTools[t.index].disabled=!0;var a=!1;for(var i in e.advSearchItems)if(e.advSearchItems[i].index===t.index){a=!0;break}a||e.advSearchItems.push({spec:e.advSearchTools[t.index].spec,value:e.advSearchTools[t.index].spec+":__",text:e.advSearchTools[t.index].spec+":__",index:t.index})},showAdvFilter:function(){var t=this;t.menusss=!t.menusss,t.$store.dispatch("getStatusLists").then((function(e){t.itemFilterSupport.statusLists=e;var a={itemCode:"deleted",itemName:"Đã xóa"};t.getUser("Administrator_data")&&t.itemFilterSupport.statusLists.push(a)}));var e={itemCode:""};t.$store.dispatch("getSubstatusLists",e).then((function(e){t.itemFilterSupport.substatusLists=e})),t.$store.dispatch("getAgencyLists").then((function(e){t.itemFilterSupport.agencyLists=e})),t.$store.dispatch("getServiceLists").then((function(e){t.itemFilterSupport.serviceLists=e})),t.$store.dispatch("getDomainLists").then((function(e){t.itemFilterSupport.domainLists=e}))},changeAdvFilterData:function(t,e,a){var i=this;if(console.log("data change advSearch",t,e,a),"status"===e){var o={itemCode:t};i.$store.dispatch("getSubstatusLists",o).then((function(t){i.itemFilterSupport.substatusLists=t}))}var n=t;for(var s in"year"===e?(i.itemFilterSupport.year=t,n=i.itemFilterSupport.year+"_"+i.itemFilterSupport.month,e="year_month"):"month"===e?(i.itemFilterSupport.month=t,n=i.itemFilterSupport.year+"_"+i.itemFilterSupport.month,e="year_month"):i.itemFilterSupport[e]=t,i.advSearchItems)if(console.log("adv Search index",i.advSearchItems[s].index),i.advSearchItems[s].index===a){console.log("vm.itemFilterSupport2",i.itemFilterSupport),i.advSearchItems[s].value=e+":"+n,i.advSearchItems[s].text=e+":"+n;break}i.doRedirectFilter()},doRedirectFilter:function(){var t=this;t.selectMultiplePage=[];var e=t.$router.history.current,a=e.query,i="?";for(var o in a)""!==a[o]&&"undefined"!==a[o]&&void 0!==a[o]&&"top"!==o&&"status"!==o&&"substatus"!==o&&"agency"!==o&&"service"!==o&&"domain"!==o&&"register"!==o&&"year"!==o&&"month"!==o&&"adv_renew"!==o&&"keyword"!==o&&(i+=o+"="+a[o]+"&");for(var n in t.advSearchItems){var s=t.advSearchItems[n];if("year_month"===s.spec){var r=s.text.replace(s.spec+":",""),c=r.split("_"),l=Vt(c,2),d=l[0],u=l[1];i+="year="+d+"&month="+u+"&"}else console.log("currentItemFilter.spec",s.text.replace(s.spec+":","")),i+=s.spec+"="+s.text.replace(s.spec+":","")+"&"}i+="adv_renew="+Math.floor(100*Math.random())+1,i=i.replace(/=__/g,"="),t.$router.push({path:e.path+i})},changeAdvFilterDataChips:function(t){var e=this,a=-2;for(var i in e.advSearchTools)"delay"===t.key||"overdue"===t.key||"coming"===t.key?"top"===e.advSearchTools[i]["spec"]&&(a=e.advSearchTools[i]["index"],e.advSearchTools[i].display=!0,e.advSearchTools[i].disabled=!0):"status"===e.advSearchTools[i]["spec"]&&(a=e.advSearchTools[i]["index"],e.advSearchTools[i].display=!0,e.advSearchTools[i].disabled=!0);var o="";o="delay"===t.key||"overdue"===t.key||"coming"===t.key?"top":"status";var n=!0;for(var s in e.advSearchItems)if("status"===e.advSearchItems[s]["spec"]){if("delay"!==t.key&&"overdue"!==t.key&&"coming"!==t.key){e.advSearchItems[s].value="status:"+t.key,e.advSearchItems[s].text="status:"+t.key,n=!1;break}}else if("top"===e.advSearchItems[s]["spec"]&&("delay"===t.key||"overdue"===t.key||"coming"===t.key)){e.advSearchItems[s].value="top:"+t.key,e.advSearchItems[s].text="top:"+t.key,n=!1;break}n&&e.advSearchItems.push({spec:o,value:o+":"+t.key,text:o+":"+t.key,index:a}),e.doRedirectFilter()},validate:function(){return!0},callback:function(t){t?alert(t):alert("please check you are not robot")}}},Gt=Rt,qt=a("12b2"),Ut=a("8e36"),Bt=Object(p["a"])(Gt,Ot,Ft,!1,null,null,null),Kt=Bt.exports;g()(Bt,{VAutocomplete:it["a"],VAvatar:vt["a"],VBtn:_["a"],VCard:y["a"],VCardActions:_t["a"],VCardText:_t["b"],VCardTitle:qt["a"],VCheckbox:yt["a"],VChip:Ct["a"],VDataTable:Dt["a"],VDialog:Tt["a"],VFlex:D["a"],VForm:xt["a"],VIcon:T["a"],VLayout:x["a"],VList:b["a"],VListTile:N["a"],VListTileTitle:I["c"],VMenu:nt["a"],VProgressCircular:w["a"],VProgressLinear:Ut["a"],VSpacer:Nt["a"],VTextField:st["a"],VTooltip:wt["a"]});var Wt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("v-form",{ref:"formTiepNhanHoSo",attrs:{"lazy-validation":""},model:{value:t.validTNHS,callback:function(e){t.validTNHS=e},expression:"validTNHS"}},["version_1.0"===t.formTemplate?a("div",[a("div",{staticClass:"row-header"},[a("div",{staticClass:"background-triangle-big"},["UPDATE"===t.formCode?a("span",[t._v("SỬA HỒ SƠ")]):"COPY"===t.formCode?a("span",[t._v("SAO CHÉP HỒ SƠ")]):t.isOffLine?a("span",[t._v("NỘP HỒ SƠ TRỰC TUYẾN")]):"NEW_GROUP"===t.formCode?a("span",[t._v("THÊM NHÓM HỒ SƠ")]):"NEW_GROUP_CV"===t.formCode||"NEW_GROUP_CV_DI"===t.formCode?a("span",[t._v("THÊM MỚI CÔNG VĂN")]):a("span",[t._v("THÊM MỚI HỒ SƠ")])]),a("div",{staticClass:"layout row wrap header_tools row-blue"},[a("div",{staticClass:"flex pl-3 text-ellipsis text-bold",staticStyle:{width:"calc(100% - 100px)"},attrs:{title:t.thongTinChiTietHoSo.serviceName}},[t._v("\n            "+t._s(t.thongTinChiTietHoSo.serviceName)+"\n          ")]),a("div",{staticClass:"flex text-right",staticStyle:{"margin-left":"auto",width:"100px"}},[a("v-btn",{staticClass:"my-0 mx-0 btn-border-left",attrs:{flat:"","active-class":"temp_active"},on:{click:t.goBack}},[a("v-icon",{attrs:{size:"18"}},[t._v("reply")]),t._v("  \n              Quay lại\n            ")],1)],1)])]),"NEW_GROUP_CV"!==t.formCode&&"NEW_GROUP_CV_DI"!==t.formCode?a("div",[1!==t.originality&&"NEW_GROUP"!==t.formCode?a("div",{style:t.isNotarization?"display: none":"position: relative"},[a("v-expansion-panel",{staticClass:"expansion-pl",attrs:{value:[!0],expand:""}},[a("v-expansion-panel-content",[a("thong-tin-chung",{ref:"thongtinchunghoso"})],1)],1)],1):t._e(),1===t.originality?a("div",{staticStyle:{position:"relative"}},[a("v-expansion-panel",{staticClass:"expansion-pl",attrs:{value:[!0],expand:""}},[a("v-expansion-panel-content",[a("div",{attrs:{slot:"header"},slot:"header"},[a("div",{staticClass:"background-triangle-small"},[a("v-icon",{attrs:{size:"18",color:"white"}},[t._v("star_rate")])],1),t._v("\n                HƯỚNG DẪN      \n              ")]),a("v-layout",{attrs:{wrap:""}},[a("v-flex",{attrs:{xs12:"",sm12:""}},[a("div",{staticClass:"ml-3 mr-3 pt-1",domProps:{innerHTML:t._s(t.thongTinChiTietHoSo.dossierNote)}})])],1)],1)],1)],1):t._e(),t.mauCongVan?t._e():a("thong-tin-chu-ho-so",{ref:"thongtinchuhoso",attrs:{requiredConfig:t.requiredConfigData,formCode:t.formCode,showApplicant:"NEW_GROUP"===t.formCode,showDelegate:!!t.isNotarization,applicantIdRequired:t.applicantIdRequired}}),t.mauCongVan?a("thong-tin-chu-ho-so-cong-van",{ref:"thongtinchuhosocongvan",attrs:{mauCongVan:t.mauCongVan}}):t._e(),t.isNotarization?t._e():a("div",[a("v-expansion-panel",{staticClass:"expansion-pl",attrs:{value:[!0],expand:""}},[a("v-expansion-panel-content",[a("div",{staticStyle:{display:"flex","align-items":"center"},attrs:{slot:"header"},slot:"header"},[a("div",{staticClass:"background-triangle-small"},[a("v-icon",{attrs:{size:"18",color:"white"}},[t._v("star_rate")])],1),"NEW_GROUP"===t.formCode?a("span",[t._v("Tên nhóm hồ sơ")]):a("span",[t._v(t._s(1===t.originality?"Nội dung yêu cầu giải quyết":"Tên hồ sơ"))]),t._v("\n                    \n              ")]),a("div",[a("v-card",[a("v-card-text",[a("v-form",{ref:"formTenHoSo",attrs:{"lazy-validation":""},model:{value:t.valid_tenHoSo,callback:function(e){t.valid_tenHoSo=e},expression:"valid_tenHoSo"}},[a("v-textarea",{attrs:{rows:2,box:"",rules:1===t.originality?"":[t.rules.varchar5000],placeholder:"NEW_GROUP"===t.formCode?"Nhập tên nhóm hồ sơ":1===t.originality?"Nhập nội dung yêu cầu giải quyết":"Nhập tên hồ sơ"},model:{value:t.briefNote,callback:function(e){t.briefNote=e},expression:"briefNote"}})],1),t.templateDescription?a("div",[t._v("(*)   "+t._s(t.templateDescription))]):t._e()],1)],1)],1)])],1)],1),t.isNotarization?t._e():a("div",{staticStyle:{position:"relative"}},[a("v-expansion-panel",{staticClass:"expansion-pl",attrs:{value:[!0],expand:""}},[a("v-expansion-panel-content",[a("div",{staticStyle:{display:"flex","align-items":"center"},attrs:{slot:"header"},slot:"header"},[a("div",{staticClass:"background-triangle-small"},[a("v-icon",{attrs:{size:"18",color:"white"}},[t._v("star_rate")])],1),"NEW_GROUP"===t.formCode?a("span",[t._v("Thành phần hồ sơ dùng chung")]):a("span",[t._v("Thành phần hồ sơ")]),t._v("\n                    \n                "),t.stateEditSample||1===t.originality?1!==t.originality?a("v-text-field",{staticClass:"px-0 py-0",staticStyle:{width:"90px","max-width":"90px"},attrs:{type:"number"},on:{click:function(t){t.stopPropagation()}},model:{value:t.thongTinChiTietHoSo.sampleCount,callback:function(e){t.$set(t.thongTinChiTietHoSo,"sampleCount",e)},expression:"thongTinChiTietHoSo.sampleCount"}}):t._e():a("span",[t._v("("+t._s(0===t.thongTinChiTietHoSo.sampleCount?"?":t.thongTinChiTietHoSo.sampleCount)+" bộ hồ sơ)")]),t._v("  \n                "),t.stateEditSample||1===t.originality?1!==t.originality?a("v-icon",{staticStyle:{cursor:"pointer"},attrs:{size:"16",color:"primary"},on:{click:function(e){e.stopPropagation(),t.stateEditSample=!t.stateEditSample}}},[t._v("done")]):t._e():a("v-icon",{staticStyle:{cursor:"pointer"},attrs:{size:"16",color:"primary"},on:{click:function(e){e.stopPropagation(),t.stateEditSample=!t.stateEditSample}}},[t._v("edit")])],1),a("thanh-phan-ho-so",{ref:"thanhphanhoso",attrs:{formCodeInput:t.formCode,onlyView:"NEW_GROUP"===t.formCode,id:"nm",partTypes:"NEW_GROUP"===t.formCode||"NEW_GROUP_CV"===t.formCode||"NEW_GROUP_CV_DI"===t.formCode?t.inputTypesGroup:t.inputTypes}})],1)],1)],1),t.isNotarization?a("div",{staticStyle:{position:"relative"}},[a("v-expansion-panel",{staticClass:"expansion-pl",attrs:{value:[!0],expand:""}},[a("v-expansion-panel-content",[a("div",{staticStyle:{display:"flex","align-items":"center"},attrs:{slot:"header"},slot:"header"},[a("div",{staticClass:"background-triangle-small"},[a("v-icon",{attrs:{size:"18",color:"white"}},[t._v("star_rate")])],1),a("span",[t._v("Tài liệu chứng thực")])]),a("tai-lieu-chung-thuc",{ref:"tailieuchungthuc",attrs:{dossierId:t.thongTinChiTietHoSo.dossierId,formCodeInput:t.formCode,onlyView:!1}})],1)],1)],1):t._e(),1!==t.originality&&t.notifyConfig?a("div",{staticStyle:{position:"relative","border-top":"1px solid #ddd"}},[a("v-expansion-panel",{staticClass:"expansion-pl",attrs:{value:[!0],expand:""}},[a("v-expansion-panel-content",{attrs:{"hide-actions":"",value:"2"}},[a("div",{attrs:{slot:"header"},slot:"header"},[a("div",{staticClass:"background-triangle-small"},[a("v-icon",{attrs:{size:"18",color:"white"}},[t._v("star_rate")])],1),t._v("Hình thức gửi thông báo giải quyết hồ sơ")]),a("div",{staticClass:"absolute__btn",staticStyle:{width:"220px"}},[t.loading?a("content-placeholders",{staticClass:"mt-1"},[a("content-placeholders-text",{attrs:{lines:1}})],1):t._e(),a("v-checkbox",{staticClass:"d-inline-block mr-3 mt-2",attrs:{label:"Gửi SMS",color:"primary","hide-details":""},model:{value:t.smsNotify,callback:function(e){t.smsNotify=e},expression:"smsNotify"}}),a("v-checkbox",{staticClass:"d-inline-block ml-3 mt-2",attrs:{label:"Gửi email",color:"primary","hide-details":""},model:{value:t.emailNotify,callback:function(e){t.emailNotify=e},expression:"emailNotify"}})],1)])],1)],1):t._e(),1!==t.originality&&t.fromViaPostalConfig?a("div",{staticStyle:{position:"relative","border-top":"1px solid #ddd"}},[a("v-expansion-panel",{staticClass:"expansion-pl",attrs:{value:[!0],expand:""}},[a("v-expansion-panel-content",{attrs:{"hide-actions":"",value:"2"}},[a("div",{attrs:{slot:"header"},slot:"header"},[a("div",{staticClass:"background-triangle-small"},[a("v-icon",{attrs:{size:"18",color:"white"}},[t._v("star_rate")])],1),t._v("\n                Nhận hồ sơ qua bưu chính\n              ")]),a("div",{staticClass:"absolute__btn",staticStyle:{width:"200px"}},[t.loading?a("content-placeholders",{staticClass:"mt-1"},[a("content-placeholders-text",{attrs:{lines:1}})],1):t._e(),a("v-checkbox",{staticClass:"d-inline-block mt-2",attrs:{label:"Hồ sơ nhận qua bưu chính",color:"primary","hide-details":""},model:{value:t.fromViaPostal,callback:function(e){t.fromViaPostal=e},expression:"fromViaPostal"}})],1)])],1)],1):t._e(),0!==t.viaPortalDetail&&1===t.originality?a("div",{staticStyle:{position:"relative"}},[a("v-expansion-panel",{staticClass:"expansion-pl",attrs:{value:[!0],expand:""}},[a("v-expansion-panel-content",{attrs:{"hide-actions":"",value:"2"}},[a("div",{attrs:{slot:"header"},slot:"header"},[a("div",{staticClass:"background-triangle-small"},[a("v-icon",{attrs:{size:"18",color:"white"}},[t._v("star_rate")])],1),t._v("Dịch vụ chuyển phát hồ sơ")]),a("dich-vu-chuyen-phat-ho-so",{ref:"dichvuchuyenphathoso",on:{changeViapostal:t.changeViapostal}})],1)],1)],1):t._e(),0!==t.viaPortalDetail?a("div",{staticStyle:{position:"relative"}},[a("v-expansion-panel",{staticClass:"expansion-pl",attrs:{value:[!0],expand:""}},[a("v-expansion-panel-content",{attrs:{"hide-actions":"",value:"2"}},[a("div",{attrs:{slot:"header"},slot:"header"},[a("div",{staticClass:"background-triangle-small"},[a("v-icon",{attrs:{size:"18",color:"white"}},[t._v("star_rate")])],1),t._v("Dịch vụ chuyển phát kết quả")]),a("dich-vu-chuyen-phat-ket-qua",{ref:"dichvuchuyenphatketqua",on:{changeViapostal:t.changeViapostal}})],1)],1)],1):t._e(),a("div",{style:t.isNotarization?"display: none":"position: relative;"},[a("v-expansion-panel",{staticClass:"expansion-pl",attrs:{value:[!0],expand:""}},[a("v-expansion-panel-content",{attrs:{"hide-actions":"",value:"2"}},[t.showThuPhi?a("thu-phi",{attrs:{detailDossier:t.thongTinChiTietHoSo,viaPortal:t.viaPortalDetail},model:{value:t.payments,callback:function(e){t.payments=e},expression:"payments"}}):t._e()],1)],1)],1)],1):t._e(),"NEW_GROUP_CV"===t.formCode||"NEW_GROUP_CV_DI"===t.formCode?a("div",[a("div",[a("v-expansion-panel",{staticClass:"expansion-pl",attrs:{value:[!0],expand:""}},[a("v-expansion-panel-content",[a("thong-tin-cong-van",{ref:"thongtincongvan",attrs:{taoQuyetDinh:t.hasTaoQuyetDinh,detailDossier:t.thongTinChiTietHoSo,tphs:t.tphsCV,createFileCongVan:t.createFileCongVan,formCodeInput:t.formCode,donvinhanCollection:t.donvinhanCollection,requiredCVDenGroupId:t.requiredCVDenGroupId,requiredCVDenGovCode:t.requiredCVDenGovCode,lengthDossier:t.dossiersIntoGroupRender.length}})],1)],1)],1),"NEW_GROUP_CV_DI"===t.formCode?a("div",{staticStyle:{position:"relative"}},[a("v-expansion-panel",{staticClass:"expansion-pl",attrs:{value:[!0],expand:""}},[a("v-expansion-panel-content",[a("div",{staticStyle:{display:"flex","align-items":"center"},attrs:{slot:"header"},slot:"header"},[a("div",{staticClass:"background-triangle-small"},[a("v-icon",{attrs:{size:"18",color:"white"}},[t._v("star_rate")])],1),a("span",[t._v("Danh sách hồ sơ")]),t._v("\n                    \n              ")]),a("div",[t.dossiersIntoGroupRender.length>0?a("div",{staticClass:"mb-3"},[a("v-data-table",{staticClass:"table-landing table-bordered",attrs:{headers:t.headersCV,items:t.dossiersIntoGroupRenderTemp,"hide-actions":"","item-key":"dossierId"},scopedSlots:t._u([{key:"headers",fn:function(e){return[a("tr",t._l(t.headersCV,(function(e){return a("th",{key:e.text,class:e["class"]?e["class"]:"",attrs:{width:e["width"]?e["width"]+"px":""}},[a("v-tooltip",{attrs:{bottom:""}},[a("span",{attrs:{slot:"activator"},slot:"activator"},[t._v(t._s(e.text))]),a("span",[t._v(t._s(e.text))])])],1)})),0)]}},{key:"items",fn:function(e){return[a("tr",{staticStyle:{cursor:"pointer"}},[a("td",{staticClass:"text-xs-center",staticStyle:{height:"40px !important"},attrs:{width:"50px"}},[a("span",[t._v(t._s(t.pagination.page*t.pagination.rowsPerPage-t.pagination.rowsPerPage+e.index+1))])]),a("td",{staticClass:"text-xs-left",staticStyle:{height:"40px !important"},attrs:{width:"150px"}},[t._v("\n                          "+t._s(e.item.dossierNo)+"\n                        ")]),a("td",{staticClass:"text-xs-left",staticStyle:{height:"40px !important"},attrs:{width:"150px"}},[t._v("\n                          "+t._s(e.item.applicantName)+"\n                        ")]),a("td",{staticClass:"text-xs-left",staticStyle:{height:"40px !important"},attrs:{width:"100px"}},[t.getMetaData(e.item)&&t.getMetaData(e.item).hasOwnProperty("birthDateDay")&&t.getMetaData(e.item).hasOwnProperty("birthDateMonth")&&t.getMetaData(e.item).hasOwnProperty("birthDateYear")?a("span",[t._v(t._s(t.getMetaData(e.item).birthDateDay)+"/")]):t._e(),e.item&&t.getMetaData(e.item)&&t.getMetaData(e.item).hasOwnProperty("birthDateMonth")&&t.getMetaData(e.item).hasOwnProperty("birthDateYear")?a("span",[t._v(t._s(t.getMetaData(e.item).birthDateMonth)+"/")]):t._e(),e.item&&t.getMetaData(e.item)&&t.getMetaData(e.item).hasOwnProperty("birthDateYear")?a("span",[t._v(t._s(t.getMetaData(e.item).birthDateYear)+" ")]):t._e()]),a("td",{staticClass:"text-xs-left",staticStyle:{height:"40px !important"}},[e.item.address?a("span",[t._v(t._s(e.item.address)+", ")]):t._e(),e.item.wardName?a("span",[t._v(t._s(e.item.wardName)+", ")]):t._e(),e.item.districtName?a("span",[t._v(t._s(e.item.districtName)+", ")]):t._e(),e.item.cityName?a("span",[t._v(t._s(e.item.cityName)+" ")]):t._e()]),a("td",{staticClass:"text-xs-left",staticStyle:{height:"40px !important"},attrs:{width:"100px"}},[e.item.metaData&&t.getMetaData(e.item)&&t.getMetaData(e.item).yearPayment?a("span",[t._v(t._s(t.getMetaData(e.item).yearPayment)+" ")]):t._e()]),a("td",{staticClass:"text-xs-left",staticStyle:{height:"40px !important"},attrs:{width:"100px"}},[e.item.metaData&&t.getMetaData(e.item)&&t.getMetaData(e.item).subsidy?a("span",[t._v(t._s(t.currency(t.getMetaData(e.item).subsidy))+" ")]):t._e()]),a("td",{staticClass:"text-xs-left",staticStyle:{height:"40px !important"},attrs:{width:"100px"}},[e.item.dossierStatusText?a("span",[t._v(t._s(e.item.dossierStatusText)+" ")]):t._e()]),a("td",{staticClass:"text-xs-left",staticStyle:{height:"40px !important"},attrs:{width:"100px"}},[e.item.applicantNote?a("span",[t._v(t._s(e.item.applicantNote)+" ")]):t._e()]),a("td",{staticClass:"text-xs-center",staticStyle:{height:"40px !important"},attrs:{width:"120px"}},[a("v-btn",{staticClass:"mr-2 my-0",attrs:{flat:"",icon:"",color:"indigo",title:"Xem chi tiết"},on:{click:function(a){t.viewDetail(e.item)}}},[a("v-icon",[t._v("fas fa fa-file-text")])],1),a("v-btn",{staticClass:"my-0",attrs:{flat:"",icon:"",color:"red",title:"Xóa"},on:{click:function(a){t.removeDossierFromGroup(e.item)}}},[a("v-icon",{attrs:{size:"22"}},[t._v("delete")])],1)],1)])]}}])}),a("v-layout",{staticClass:"mt-3 ml-3",attrs:{wrap:""}},[a("v-flex",{staticClass:"pt-2",attrs:{xs12:"",sm2:""}},[a("span",[t._v("Tổng số hồ sơ: ")]),a("span",{staticClass:"text-bold"},[t._v(t._s(t.dossiersIntoGroupRender.length)+" ")])]),a("v-flex",{staticClass:"pt-2",attrs:{xs12:"",sm3:""}},[a("span",[t._v("Tổng số tiền: ")]),a("span",{staticClass:"text-bold"},[t._v(t._s(t.currency(t.totalFee))+" đồng")])]),a("v-flex",{attrs:{xs12:"",sm7:""}},[a("div",{staticClass:"text-xs-center layout wrap pr-1",staticStyle:{position:"relative"}},[a("div",{staticClass:"flex pagging-table px-2"},[a("tiny-pagination",{attrs:{showLimit:!0,total:t.dossiersIntoGroupRender.length,showTotal:!1,currentLimit:30,page:t.pagination.page,"custom-class":"custom-tiny-class"},on:{"tiny:change-page":t.paggingData}})],1)])])],1)],1):a("div",{staticClass:"pl-5 py-2"},[t._v("Chưa có hồ sơ nào")])])])],1)],1):t._e()]):t._e(),"NEW_GROUP_CV"!==t.formCode&&"NEW_GROUP_CV_DI"!==t.formCode?a("v-tabs",{staticClass:"mb-4",attrs:{"icons-and-text":"",centered:""}},[a("v-tabs-slider",{attrs:{color:"primary"}}),"NEW_GROUP"===t.formCode&&1!==t.originality&&t.tiepNhanState?a("v-tab",{staticClass:"px-0 py-0",attrs:{href:"#tab-2"},on:{click:function(e){t.tiepNhanNhomHoSo()}}},[a("v-btn",{attrs:{flat:"",loading:t.loadingAction,disabled:t.loadingAction}},[a("v-icon",{attrs:{size:"20"}},[t._v("save")]),t._v("   \n            "),a("span",[t._v("Tạo nhóm")]),a("span",{attrs:{slot:"loader"},slot:"loader"},[t._v("Loading...")])],1)],1):t._e(),"NEW_GROUP"!==t.formCode&&1!==t.originality&&t.tiepNhanState?a("v-tab",{staticClass:"px-0 py-0",attrs:{href:"#tab-2"},on:{click:function(e){t.tiepNhanHoSo()}}},[a("v-btn",{attrs:{flat:"",loading:t.loadingAction,disabled:t.loadingAction}},[a("v-icon",{attrs:{size:"20"}},[t._v("save")]),t._v("   \n            "),"UPDATE"===t.formCode?a("span",[t._v("Lưu hồ sơ")]):a("span",[t._v("Tiếp nhận")]),a("span",{attrs:{slot:"loader"},slot:"loader"},[t._v("Loading...")])],1)],1):t._e(),1!==t.originality&&"UPDATE"!==t.formCode&&"COPY"!==t.formCode&&"NEW_GROUP"!==t.formCode&&t.tiepNhanState?a("v-tab",{staticClass:"px-0 py-0",attrs:{href:"#tab-4"},on:{click:function(e){t.tiepNhanHoSo("add")}}},[a("v-btn",{attrs:{flat:"",loading:t.loadingAction,disabled:t.loadingAction}},[a("v-icon",{attrs:{size:"20"}},[t._v("note_add")]),t._v("   \n            "),a("span",[t._v("Tiếp nhận và thêm mới")]),a("span",{attrs:{slot:"loader"},slot:"loader"},[t._v("Loading...")])],1)],1):t._e(),1===t.originality?a("v-tab",{staticClass:"px-0 py-0",attrs:{href:"#tab-3"},on:{click:t.luuHoSo}},[a("v-btn",{attrs:{flat:"",loading:t.loadingAction,disabled:t.loadingAction}},[a("v-icon",{attrs:{size:"20"}},[t._v("save")]),t._v("  \n            Lưu\n            "),a("span",{attrs:{slot:"loader"},slot:"loader"},[t._v("Loading...")])],1)],1):t._e(),a("v-tab",{staticClass:"px-0 py-0",attrs:{href:"#tab-5"},on:{click:t.goBackHistory}},[a("v-btn",{attrs:{flat:"",loading:t.loadingAction,disabled:t.loadingAction},on:{click:t.goBackHistory}},[a("v-icon",{attrs:{size:"18"}},[t._v("reply")]),t._v("  \n            Quay lại\n            "),a("span",{attrs:{slot:"loader"},slot:"loader"},[t._v("Loading...")])],1)],1)],1):t._e(),"NEW_GROUP_CV"===t.formCode||"NEW_GROUP_CV_DI"===t.formCode?a("v-tabs",{staticClass:"mb-4",attrs:{"icons-and-text":"",centered:""}},["NEW_GROUP_CV_DI"===t.formCode?a("v-tab",{staticClass:"px-0 py-0",attrs:{href:"#tab-1"},on:{click:function(e){t.tiepNhanCongVan("add","save")}}},[a("v-btn",{attrs:{flat:"",loading:t.loadingAction,disabled:t.loadingAction}},[a("v-icon",{attrs:{size:"20"}},[t._v("save")]),t._v("   \n            "),a("span",[t._v("Lưu công văn")]),a("span",{attrs:{slot:"loader"},slot:"loader"},[t._v("Loading...")])],1)],1):t._e(),"NEW_GROUP_CV_DI"===t.formCode?a("v-tab",{staticClass:"px-0 py-0",attrs:{href:"#tab-2"},on:{click:function(e){t.tiepNhanCongVan("add","saveSend")}}},[a("v-btn",{attrs:{flat:"",loading:t.loadingAction,disabled:t.loadingAction||0===t.dossiersIntoGroupRender.length}},[a("v-icon",{attrs:{size:"20"}},[t._v("save")]),t._v("   \n            "),a("span",[t._v("Lưu và gửi công văn")]),a("span",{attrs:{slot:"loader"},slot:"loader"},[t._v("Loading...")])],1)],1):t._e(),"NEW_GROUP_CV"===t.formCode?a("v-tab",{staticClass:"px-0 py-0",attrs:{href:"#tab-3"},on:{click:function(e){t.tiepNhanCongVan("add")}}},[a("v-btn",{attrs:{flat:"",loading:t.loadingAction,disabled:t.loadingAction}},[a("v-icon",{attrs:{size:"20"}},[t._v("save")]),t._v("   \n            "),a("span",[t._v("Thêm công văn")]),a("span",{attrs:{slot:"loader"},slot:"loader"},[t._v("Loading...")])],1)],1):t._e(),a("v-tab",{staticClass:"px-0 py-0",attrs:{href:"#tab-5"},on:{click:t.goBackHistory}},[a("v-btn",{attrs:{flat:"",loading:t.loadingAction,disabled:t.loadingAction},on:{click:t.goBackHistory}},[a("v-icon",{attrs:{size:"18"}},[t._v("reply")]),t._v("  \n            Quay lại\n            "),a("span",{attrs:{slot:"loader"},slot:"loader"},[t._v("Loading...")])],1)],1)],1):t._e()],1):t._e(),"version_2.0"===t.formTemplate?a("div",[a("div",{staticStyle:{display:"none"}},[a("input",{attrs:{id:"validate_required",type:"text"},domProps:{value:!0}}),a("input",{attrs:{id:"serviceCode_hidden",type:"text"},domProps:{value:t.serviceCode_hidden}}),a("input",{attrs:{id:"serviceName_hidden",type:"text"},domProps:{value:t.serviceName_hidden}}),a("input",{attrs:{id:"govAgencyCode_hidden",type:"text"},domProps:{value:t.govAgencyCode_hidden}}),a("input",{attrs:{id:"dossierTemplateNo_hidden",type:"text"},domProps:{value:t.dossierTemplateNo_hidden}}),a("input",{attrs:{id:"eformCode_hidden",type:"text"},domProps:{value:t.eformCode_hidden}})]),a("div",{staticClass:"row-header"},[a("div",{staticClass:"background-triangle-big"},["UPDATE"===t.formCode?a("span",[t._v("SỬA HỒ SƠ")]):"COPY"===t.formCode?a("span",[t._v("SAO CHÉP HỒ SƠ")]):t.isOffLine?a("span",[t._v("NỘP HỒ SƠ TRỰC TUYẾN")]):a("span",[t._v("THÊM MỚI HỒ SƠ")])]),a("div",{staticClass:"layout row wrap header_tools row-blue"},[a("div",{staticClass:"flex xs8 sm10 pl-3 text-ellipsis text-bold",attrs:{title:t.templateName}},[t._v("\n            "+t._s(t.templateName)+"\n          ")]),a("div",{staticClass:"flex xs4 sm2 text-right",staticStyle:{"margin-left":"auto"}},[a("v-btn",{staticClass:"my-0 mx-0 btn-border-left",attrs:{flat:"","active-class":"temp_active"},on:{click:t.goBack}},[a("v-icon",{attrs:{size:"18"}},[t._v("reply")]),t._v("  \n              Quay lại\n            ")],1)],1)])]),t.loadingForm?a("div",{staticClass:"text-xs-center mt-5"},[a("v-progress-circular",{attrs:{size:50,color:"#dedede",indeterminate:""}})],1):a("div",[a("v-card",{attrs:{flat:"",color:"#fff"}},[a("div",{staticStyle:{position:"absolute",right:"0"}},[a("v-btn",{attrs:{color:"primary"},on:{click:function(e){t.showHDTT()}}},[t._v("Phiếu hướng dẫn thủ tục")]),a("v-btn",{attrs:{color:"primary"},on:{click:function(e){t.showTCTN()}}},[t._v("\n              Phiếu từ chối tiếp nhận\n            ")])],1),a("div",{staticClass:"mb-5 pt-0",attrs:{id:"formAlpacaNewTemplate"}})]),a("v-tabs",{staticClass:"mb-4",attrs:{"icons-and-text":"",centered:""}},[a("v-tabs-slider",{attrs:{color:"primary"}}),1!==t.originality&&t.tiepNhanState?a("v-tab",{staticClass:"px-0 py-0",attrs:{href:"#tab-2"},on:{click:function(e){t.tiepNhanHoSoNewTemplate()}}},[a("v-btn",{attrs:{flat:"",loading:t.loadingAction,disabled:t.loadingAction}},[a("v-icon",{attrs:{size:"20"}},[t._v("save")]),t._v("   \n              "),"UPDATE"===t.formCode?a("span",[t._v("Lưu hồ sơ")]):a("span",[t._v("Tiếp nhận")]),a("span",{attrs:{slot:"loader"},slot:"loader"},[t._v("Loading...")])],1)],1):t._e(),1===t.originality?a("v-tab",{staticClass:"px-0 py-0",attrs:{href:"#tab-3"},on:{click:t.luuHoSo}},[a("v-btn",{attrs:{flat:"",loading:t.loadingAction,disabled:t.loadingAction}},[a("v-icon",{attrs:{size:"20"}},[t._v("save")]),t._v("  \n              Lưu\n              "),a("span",{attrs:{slot:"loader"},slot:"loader"},[t._v("Loading...")])],1)],1):t._e(),a("v-tab",{staticClass:"px-0 py-0",attrs:{href:"#tab-5"},on:{click:t.goBack}},[a("v-btn",{attrs:{flat:"",loading:t.loadingAction,disabled:t.loadingAction}},[a("v-icon",{attrs:{size:"18"}},[t._v("reply")]),t._v("  \n              Quay lại\n              "),a("span",{attrs:{slot:"loader"},slot:"loader"},[t._v("Loading...")])],1)],1)],1)],1)]):t._e()]),a("v-dialog",{attrs:{scrollable:"",persistent:"","max-width":"700px"},model:{value:t.dialog_printGuide,callback:function(e){t.dialog_printGuide=e},expression:"dialog_printGuide"}},[a("v-card",[a("v-toolbar",{attrs:{flat:"",dark:"",color:"primary"}},[a("v-toolbar-title",[t._v("Thông tin phiếu hướng dẫn hoàn thiện hồ sơ")]),a("v-spacer"),a("v-btn",{attrs:{icon:"",dark:""},nativeOn:{click:function(e){t.dialog_printGuide=!1}}},[a("v-icon",[t._v("close")])],1)],1),a("v-card-text",[a("v-form",{ref:"formGuide",attrs:{"lazy-validation":""},model:{value:t.validGuide,callback:function(e){t.validGuide=e},expression:"validGuide"}},[a("v-layout",{staticClass:"py-1 align-center row-list-style",attrs:{wrap:""}},[a("v-flex",{staticClass:"px-2",attrs:{xs12:""}},[a("div",{staticClass:"my-2 text-bold"},[t._v("Thủ tục hành chính "),a("span",{staticStyle:{color:"red"}},[t._v("*")]),t._v(":")]),a("v-text-field",{attrs:{box:""},model:{value:t.serviceName_hidden,callback:function(e){t.serviceName_hidden=e},expression:"serviceName_hidden"}})],1),a("v-flex",{staticClass:"px-2",attrs:{xs12:""}},[a("div",{staticClass:"my-2 text-bold"},[t._v("Dịch vụ "),a("span",{staticStyle:{color:"red"}},[t._v("*")]),t._v(":")]),a("v-text-field",{attrs:{box:""},model:{value:t.templateName,callback:function(e){t.templateName=e},expression:"templateName"}})],1),a("v-flex",{staticClass:"px-2",staticStyle:{position:"relative"},attrs:{xs12:""}},[a("div",{staticClass:"my-2 text-bold"},[t._v("Tên người làm thủ tục "),a("span",{staticStyle:{color:"red"}},[t._v("*")]),t._v(":")]),a("v-text-field",{attrs:{placeholder:"Nhập tên người làm thủ tục",box:"",rules:[function(t){return!!t||"Trường dữ liệu bắt buộc"}],required:""},model:{value:t.applicantNameGuide,callback:function(e){t.applicantNameGuide=e},expression:"applicantNameGuide"}}),a("v-radio-group",{staticClass:"my-0",staticStyle:{position:"absolute",right:"0",top:"0"},attrs:{row:""},model:{value:t.applicantTypeGuide,callback:function(e){t.applicantTypeGuide=e},expression:"applicantTypeGuide"}},[a("v-radio",{attrs:{label:"Công dân",value:!0}}),a("v-radio",{attrs:{label:"Tổ chức, doanh nghiệp",value:!1}})],1)],1),a("v-flex",{staticClass:"px-2",attrs:{xs12:""}},[a("div",{staticClass:"my-2 text-bold"},[t._v("Địa chỉ:")]),a("v-text-field",{attrs:{placeholder:"Nhập địa chỉ",box:""},model:{value:t.applicantAddressGuide,callback:function(e){t.applicantAddressGuide=e},expression:"applicantAddressGuide"}})],1),a("v-flex",{staticClass:"px-2",attrs:{xs12:""}},[a("div",{staticClass:"my-2 text-bold"},[t._v("Thư điện tử:")]),a("v-text-field",{attrs:{box:"",placeholder:"Nhập thư điện tử"},model:{value:t.applicantEmailGuide,callback:function(e){t.applicantEmailGuide=e},expression:"applicantEmailGuide"}})],1),a("v-flex",{staticClass:"px-2",attrs:{xs12:""}},[a("div",{staticClass:"my-2 text-bold"},[t._v("Số điện thoại:")]),a("v-text-field",{attrs:{box:""},model:{value:t.applicantTelNoGuide,callback:function(e){t.applicantTelNoGuide=e},expression:"applicantTelNoGuide"}})],1),a("v-flex",{staticClass:"px-2",attrs:{xs12:""}},[a("div",{staticClass:"my-2 text-bold"},[t._v("Thông tin thành phần hồ sơ:")]),a("v-data-table",{staticClass:"table-landing table-bordered",staticStyle:{"border-left":"1px solid #dedede"},attrs:{headers:t.headersTphsGuide,items:t.tphsGuide,"hide-actions":""},scopedSlots:t._u([{key:"items",fn:function(e){return[a("tr",{class:{active:e.index%2==1},staticStyle:{cursor:"pointer"}},[a("td",{staticClass:"text-xs-center",staticStyle:{width:"50px"}},[a("div",[a("span",[t._v(t._s(e.index+1))]),a("br")])]),a("td",{staticClass:"text-xs-left"},[a("div",[a("span",[t._v(t._s(e.item.partName))])])]),a("td",{staticClass:"text-xs-center",staticStyle:{width:"50px"}},[a("div",[a("v-checkbox",{staticStyle:{display:"inline-block",width:"25px"},attrs:{primary:"","hide-details":"",color:"primary"},model:{value:e.item.fileMark,callback:function(a){t.$set(e.item,"fileMark",a)},expression:"props.item.fileMark"}})],1)])])]}}])})],1),a("v-flex",{staticClass:"px-2",attrs:{xs12:""}},[a("div",{staticClass:"my-2 text-bold"},[t._v("Ghi chú:")]),a("v-textarea",{staticClass:"py-0",attrs:{box:"",rows:"3"},model:{value:t.applicantNoteGuide,callback:function(e){t.applicantNoteGuide=e},expression:"applicantNoteGuide"}})],1)],1)],1)],1),a("v-card-actions",[a("v-spacer"),a("v-btn",{staticClass:"mr-3",attrs:{color:"primary",loading:t.loadingAction,disabled:t.loadingAction},on:{click:function(e){t.doGuiding("doc")}}},[a("v-icon",[t._v("save")]),t._v("  \n          Lưu phiếu hướng dẫn\n          "),a("span",{attrs:{slot:"loader"},slot:"loader"},[t._v("Loading...")])],1),a("v-btn",{staticClass:"mr-3",attrs:{color:"primary",loading:t.loadingAction,disabled:t.loadingAction},on:{click:function(e){t.doGuiding("pdf")}}},[a("v-icon",[t._v("print")]),t._v("  \n          In phiếu hướng dẫn\n          "),a("span",{attrs:{slot:"loader"},slot:"loader"},[t._v("Loading...")])],1)],1)],1)],1),a("v-dialog",{attrs:{scrollable:"",persistent:"","max-width":"700px"},model:{value:t.dialog_denied,callback:function(e){t.dialog_denied=e},expression:"dialog_denied"}},[a("v-card",[a("v-toolbar",{attrs:{flat:"",dark:"",color:"primary"}},[a("v-toolbar-title",[t._v("Thông tin phiếu từ chối tiếp nhận")]),a("v-spacer"),a("v-btn",{attrs:{icon:"",dark:""},nativeOn:{click:function(e){t.dialog_denied=!1}}},[a("v-icon",[t._v("close")])],1)],1),a("v-card-text",[a("v-form",{ref:"formDenied",attrs:{"lazy-validation":""},model:{value:t.validDenied,callback:function(e){t.validDenied=e},expression:"validDenied"}},[a("v-layout",{staticClass:"py-1 align-center row-list-style",attrs:{wrap:""}},[a("v-flex",{staticClass:"px-2",attrs:{xs12:""}},[a("div",{staticClass:"my-2 text-bold"},[t._v("Thủ tục hành chính "),a("span",{staticStyle:{color:"red"}},[t._v("*")]),t._v(":")]),a("v-text-field",{attrs:{box:""},model:{value:t.serviceName_hidden,callback:function(e){t.serviceName_hidden=e},expression:"serviceName_hidden"}})],1),a("v-flex",{staticClass:"px-2",attrs:{xs12:""}},[a("div",{staticClass:"my-2 text-bold"},[t._v("Dịch vụ "),a("span",{staticStyle:{color:"red"}},[t._v("*")]),t._v(":")]),a("v-text-field",{attrs:{box:""},model:{value:t.templateName,callback:function(e){t.templateName=e},expression:"templateName"}})],1),a("v-flex",{staticClass:"px-2",staticStyle:{position:"relative"},attrs:{xs12:""}},[a("div",{staticClass:"my-2 text-bold"},[t._v("Tên người làm thủ tục "),a("span",{staticStyle:{color:"red"}},[t._v("*")]),t._v(":")]),a("v-text-field",{attrs:{placeholder:"Nhập tên người làm thủ tục",box:"",rules:[function(t){return!!t||"Trường dữ liệu bắt buộc"}],required:""},model:{value:t.applicantNameGuide,callback:function(e){t.applicantNameGuide=e},expression:"applicantNameGuide"}}),a("v-radio-group",{staticClass:"my-0",staticStyle:{position:"absolute",right:"0",top:"0"},attrs:{row:""},model:{value:t.applicantTypeGuide,callback:function(e){t.applicantTypeGuide=e},expression:"applicantTypeGuide"}},[a("v-radio",{attrs:{label:"Công dân",value:!0}}),a("v-radio",{attrs:{label:"Tổ chức, doanh nghiệp",value:!1}})],1)],1),a("v-flex",{staticClass:"px-2",attrs:{xs12:""}},[a("div",{staticClass:"my-2 text-bold"},[t._v("Địa chỉ:")]),a("v-text-field",{attrs:{placeholder:"Nhập địa chỉ",box:""},model:{value:t.applicantAddressGuide,callback:function(e){t.applicantAddressGuide=e},expression:"applicantAddressGuide"}})],1),a("v-flex",{staticClass:"px-2",attrs:{xs12:""}},[a("div",{staticClass:"my-2 text-bold"},[t._v("Thư điện tử:")]),a("v-text-field",{attrs:{box:"",placeholder:"Nhập thư điện tử"},model:{value:t.applicantEmailGuide,callback:function(e){t.applicantEmailGuide=e},expression:"applicantEmailGuide"}})],1),a("v-flex",{staticClass:"px-2",attrs:{xs12:""}},[a("div",{staticClass:"my-2 text-bold"},[t._v("Số điện thoại:")]),a("v-text-field",{attrs:{box:""},model:{value:t.applicantTelNoGuide,callback:function(e){t.applicantTelNoGuide=e},expression:"applicantTelNoGuide"}})],1),a("v-flex",{staticClass:"px-2",attrs:{xs12:""}},[a("div",{staticClass:"my-2 text-bold"},[t._v("Lý do từ chối tiếp nhận:")]),a("v-textarea",{staticClass:"py-0",attrs:{box:"",rows:"3"},model:{value:t.applicantNoteGuide,callback:function(e){t.applicantNoteGuide=e},expression:"applicantNoteGuide"}})],1)],1)],1)],1),a("v-card-actions",[a("v-spacer"),a("v-btn",{staticClass:"mr-3",attrs:{color:"primary",loading:t.loadingAction,disabled:t.loadingAction},on:{click:function(e){t.doDenied("doc")}}},[a("v-icon",[t._v("save")]),t._v("  \n          Lưu phiếu từ chối\n          "),a("span",{attrs:{slot:"loader"},slot:"loader"},[t._v("Loading...")])],1),a("v-btn",{staticClass:"mr-3",attrs:{color:"primary",loading:t.loadingAction,disabled:t.loadingAction},on:{click:function(e){t.doDenied("pdf")}}},[a("v-icon",[t._v("print")]),t._v("  \n          In phiếu từ chối\n          "),a("span",{attrs:{slot:"loader"},slot:"loader"},[t._v("Loading...")])],1)],1)],1)],1),a("v-dialog",{attrs:{"max-width":"900",transition:"fade-transition"},model:{value:t.dialogPDF,callback:function(e){t.dialogPDF=e},expression:"dialogPDF"}},[a("v-card",[a("v-toolbar",{attrs:{flat:"",dark:"",color:"primary"}},[a("v-toolbar-title",[t._v(t._s(t.tiltleDialog))]),a("v-spacer"),a("v-btn",{attrs:{icon:"",dark:""},nativeOn:{click:function(e){t.dialogPDF=!1}}},[a("v-icon",[t._v("close")])],1)],1),t.dialogPDFLoading?a("div",{staticStyle:{"min-height":"600px","text-align":"center",margin:"auto",padding:"25%"}},[a("v-progress-circular",{attrs:{size:100,width:1,color:"primary",indeterminate:""}})],1):t._e(),a("iframe",{directives:[{name:"show",rawName:"v-show",value:!t.dialogPDFLoading,expression:"!dialogPDFLoading"}],staticStyle:{overflow:"auto","min-height":"600px"},attrs:{id:"dialogPDFPreview",src:"",type:"application/pdf",width:"100%",height:"100%",frameborder:"0"}})],1)],1)],1)},zt=[],jt=a("9f67"),Qt=jt["a"],Yt=a("cd55"),Jt=a("49e2"),Xt=a("71a3"),Zt=a("fe57"),te=a("9a96"),ee=Object(p["a"])(Qt,Wt,zt,!1,null,null,null),ae=ee.exports;g()(ee,{VBtn:_["a"],VCard:y["a"],VCardActions:_t["a"],VCardText:_t["b"],VCheckbox:yt["a"],VDataTable:Dt["a"],VDialog:Tt["a"],VExpansionPanel:Yt["a"],VExpansionPanelContent:Jt["a"],VFlex:D["a"],VForm:xt["a"],VIcon:T["a"],VLayout:x["a"],VProgressCircular:w["a"],VRadio:bt["a"],VRadioGroup:St["a"],VSpacer:Nt["a"],VTab:Xt["a"],VTabs:Zt["a"],VTabsSlider:te["a"],VTextField:st["a"],VTextarea:Pt["a"],VToolbar:It["a"],VToolbarTitle:At["b"],VTooltip:wt["a"]});var ie=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("v-form",{ref:"formTiepNhanHoSo",attrs:{"lazy-validation":""},model:{value:t.validTNHS,callback:function(e){t.validTNHS=e},expression:"validTNHS"}},[a("div",{staticClass:"row-header"},[a("div",{staticClass:"background-triangle-big"},["NEW_GROUP"===t.formCode?a("span",[t._v("THÔNG TIN NHÓM HỒ SƠ")]):t._e(),"NEW_GROUP_CV"===t.formCode||"NEW_GROUP_CV_DI"===t.formCode?a("span",[t.activeAddDossierIntoGroup?a("span",[t._v("THÊM MỚI HỒ SƠ")]):a("span",[t._v("THÔNG TIN CÔNG VĂN")])]):t._e()]),a("div",{staticClass:"layout wrap header_tools row-blue"},[a("div",{staticClass:"flex pl-3 text-ellipsis text-bold",attrs:{title:t.thongTinNhomHoSo.serviceName}},[t._v("\n          "+t._s(t.thongTinNhomHoSo.serviceName)+"\n        ")])])]),t.activeAddDossierIntoGroup?t._e():a("div",["NEW_GROUP"===t.formCode?a("v-layout",{staticStyle:{background:"#fff","border-bottom":"1px solid #dedede"},attrs:{wrap:""}},[a("v-flex",{staticClass:"my-2",attrs:{xs12:"",sm2:""}},[a("v-subheader",{staticClass:"pl-0 text-header pt-2"},[t._v("Tên nhóm hồ sơ: ")])],1),a("v-flex",{staticClass:"my-2 pr-3",attrs:{xs12:"",sm10:""}},[a("v-text-field",{staticClass:"mt-1",model:{value:t.thongTinNhomHoSo.dossierName,callback:function(e){t.$set(t.thongTinNhomHoSo,"dossierName",e)},expression:"thongTinNhomHoSo.dossierName"}})],1)],1):t._e(),"NEW_GROUP"===t.formCode?a("thong-tin-chu-ho-so",{ref:"thongtinnguoinophoso",attrs:{showApplicant:!0,showDelegate:!1}}):t._e(),"NEW_GROUP_CV"===t.formCode||"NEW_GROUP_CV_DI"===t.formCode?a("thong-tin-cong-van",{ref:"thongtincongvan",attrs:{detailDossier:t.thongTinNhomHoSo,tphs:t.tphsCV,taoQuyetDinh:t.hasTaoQuyetDinh,createFileCongVan:t.createFileCongVan,formCodeInput:t.formCode,requiredCVDenGroupId:t.requiredCVDenGroupId,requiredCVDenGovCode:t.requiredCVDenGovCode,donvinhanCollection:t.donvinhanCollection,lengthDossier:t.dossiersIntoGroupRender.length}}):t._e(),"NEW_GROUP"===t.formCode?a("div",{staticStyle:{position:"relative","border-top":"1px solid #dedede"}},[a("v-expansion-panel",{staticClass:"expansion-pl",attrs:{value:0}},[a("v-expansion-panel-content",[a("div",{staticStyle:{display:"flex","align-items":"center"},attrs:{slot:"header"},slot:"header"},[a("div",{staticClass:"background-triangle-small"},[a("v-icon",{attrs:{size:"18",color:"white"}},[t._v("star_rate")])],1),t._v("\n              Thành phần hồ sơ dùng chung    \n            ")]),a("thanh-phan-ho-so-1",{ref:"thanhphanhoso1",attrs:{onlyView:!1,id:"nm",partTypes:t.inputTypes}})],1)],1)],1):t._e(),"NEW_GROUP"===t.formCode?a("div",{staticStyle:{position:"relative"}},[a("v-expansion-panel",{staticClass:"expansion-pl",attrs:{value:[!0],expand:""}},[a("v-expansion-panel-content",{key:1},[a("div",{staticStyle:{display:"flex","align-items":"center"},attrs:{slot:"header"},slot:"header"},[a("div",{staticClass:"background-triangle-small"},[a("v-icon",{attrs:{size:"18",color:"white"}},[t._v("star_rate")])],1),t._v("\n              Kết quả xử lý dùng chung    \n            ")]),a("thanh-phan-ho-so-2",{ref:"thanhphanhoso2",attrs:{onlyView:!0,id:"nm",partTypes:t.outputTypesGroup}})],1)],1)],1):t._e(),a("div",{staticStyle:{position:"relative","border-bottom":"1px solid #dedede"}},[a("v-expansion-panel",{staticClass:"expansion-pl",attrs:{value:[!0],expand:""}},[a("v-expansion-panel-content",{key:1},["NEW_GROUP"===t.formCode?a("div",{staticStyle:{display:"flex","align-items":"center"},attrs:{slot:"header"},slot:"header"},[a("div",{staticClass:"background-triangle-small"},[a("v-icon",{attrs:{size:"18",color:"white"}},[t._v("star_rate")])],1),t._v("\n              Hồ sơ trong nhóm    \n            ")]):t._e(),"NEW_GROUP_CV"===t.formCode||"NEW_GROUP_CV_DI"===t.formCode?a("div",{staticStyle:{display:"flex","align-items":"center"},attrs:{slot:"header"},slot:"header"},[a("div",{staticClass:"background-triangle-small"},[a("v-icon",{attrs:{size:"18",color:"white"}},[t._v("star_rate")])],1),t._v("\n              Danh sách hồ sơ    \n            ")]):t._e(),t.dossiersIntoGroupRender.length>0?a("div",{staticClass:"mb-3"},[a("v-data-table",{staticClass:"table-landing table-bordered",attrs:{"select-all":"",headers:t.headersCV,items:t.dossiersIntoGroupRenderTemp,"hide-actions":"","item-key":"dossierId"},scopedSlots:t._u([{key:"headers",fn:function(e){return[a("tr",t._l(t.headersCV,(function(e){return a("th",{key:e.text,class:e["class"]?e["class"]:"",attrs:{width:e["width"]?e["width"]+"px":""}},[a("v-tooltip",{attrs:{bottom:""}},[a("span",{attrs:{slot:"activator"},slot:"activator"},[t._v(t._s(e.text))]),a("span",[t._v(t._s(e.text))])])],1)})),0)]}},{key:"items",fn:function(e){return[a("tr",{staticStyle:{cursor:"pointer"}},[a("td",{staticClass:"text-xs-center",staticStyle:{height:"40px !important"},attrs:{width:"50px"},on:{click:function(a){t.viewDetail(e.item,e.index)}}},[a("span",[t._v(t._s(t.pagination.page*t.pagination.rowsPerPage-t.pagination.rowsPerPage+e.index+1))])]),a("td",{staticClass:"text-xs-left",staticStyle:{height:"40px !important"},attrs:{width:"150px"},on:{click:function(a){t.viewDetail(e.item,e.index)}}},[t._v("\n                      "+t._s(e.item.dossierNo)+"\n                    ")]),a("td",{staticClass:"text-xs-left",staticStyle:{height:"40px !important"},attrs:{width:"150px"},on:{click:function(a){t.viewDetail(e.item,e.index)}}},[t._v("\n                      "+t._s(e.item.applicantName)+"\n                    ")]),a("td",{staticClass:"text-xs-left",staticStyle:{height:"40px !important"},attrs:{width:"100px"},on:{click:function(a){t.viewDetail(e.item,e.index)}}},[t.getMetaData(e.item)&&t.getMetaData(e.item).hasOwnProperty("birthDateDay")&&t.getMetaData(e.item).hasOwnProperty("birthDateMonth")&&t.getMetaData(e.item).hasOwnProperty("birthDateYear")?a("span",[t._v(t._s(t.getMetaData(e.item).birthDateDay)+"/")]):t._e(),e.item&&t.getMetaData(e.item)&&t.getMetaData(e.item).hasOwnProperty("birthDateMonth")&&t.getMetaData(e.item).hasOwnProperty("birthDateYear")?a("span",[t._v(t._s(t.getMetaData(e.item).birthDateMonth)+"/")]):t._e(),e.item&&t.getMetaData(e.item)&&t.getMetaData(e.item).hasOwnProperty("birthDateYear")?a("span",[t._v(t._s(t.getMetaData(e.item).birthDateYear)+" ")]):t._e()]),a("td",{staticClass:"text-xs-left",staticStyle:{height:"40px !important"},on:{click:function(a){t.viewDetail(e.item,e.index)}}},[e.item.address?a("span",[t._v(t._s(e.item.address)+", ")]):t._e(),e.item.wardName?a("span",[t._v(t._s(e.item.wardName)+", ")]):t._e(),e.item.districtName?a("span",[t._v(t._s(e.item.districtName)+", ")]):t._e(),e.item.cityName?a("span",[t._v(t._s(e.item.cityName)+" ")]):t._e()]),a("td",{staticClass:"text-xs-left",staticStyle:{height:"40px !important"},attrs:{width:"100px"},on:{click:function(a){t.viewDetail(e.item,e.index)}}},[e.item.metaData&&t.getMetaData(e.item)&&t.getMetaData(e.item).yearPayment?a("span",[t._v(t._s(t.getMetaData(e.item).yearPayment)+" ")]):t._e()]),a("td",{staticClass:"text-xs-left",staticStyle:{height:"40px !important"},attrs:{width:"100px"},on:{click:function(a){t.viewDetail(e.item,e.index)}}},[e.item.metaData&&t.getMetaData(e.item)&&t.getMetaData(e.item).subsidy?a("span",[t._v(t._s(t.currency(t.getMetaData(e.item).subsidy))+" ")]):t._e()]),a("td",{staticClass:"text-xs-left",staticStyle:{height:"40px !important"},attrs:{width:"100px"},on:{click:function(a){t.viewDetail(e.item,e.index)}}},[e.item.dossierStatusText?a("span",[t._v(t._s(e.item.dossierStatusText)+" ")]):t._e()]),a("td",{staticClass:"text-xs-left",staticStyle:{height:"40px !important"},attrs:{width:"100px"},on:{click:function(a){t.viewDetail(e.item,e.index)}}},[e.item.applicantNote?a("span",[t._v(t._s(e.item.applicantNote)+" ")]):t._e()]),a("td",{staticClass:"text-xs-center",staticStyle:{height:"40px !important"},attrs:{width:!t.metaDataGroupDossier.hasOwnProperty("congvandagui")&&t.checkGroupDossierIdCvDen(String(e.item["groupDossierIds"]))||t.metaDataGroupDossier.hasOwnProperty("congvandagui")&&!t.metaDataGroupDossier.congvandagui?"170px":"70px"}},[a("v-btn",{staticClass:"mr-2 my-0",attrs:{flat:"",icon:"",color:"indigo",title:"Xem chi tiết"},on:{click:function(a){t.viewDetail(e.item)}}},[a("v-icon",[t._v("fas fa fa-file-text")])],1),!t.metaDataGroupDossier.hasOwnProperty("congvandagui")&&t.checkGroupDossierIdCvDen(String(e.item["groupDossierIds"]),"editAction",e.item)||t.metaDataGroupDossier.hasOwnProperty("congvandagui")&&!t.metaDataGroupDossier.congvandagui&&t.checkGroupDossierIdCvDen(String(e.item["groupDossierIds"]),"editAction",e.item)?a("v-btn",{staticClass:"mr-2 my-0",attrs:{flat:"",icon:"",color:"green",title:"Sửa hồ sơ"},on:{click:function(a){t.editDossierIntoGroup(e.item)}}},[a("v-icon",{attrs:{size:"22"}},[t._v("create")])],1):t._e(),!t.metaDataGroupDossier.hasOwnProperty("congvandagui")&&t.checkGroupDossierIdCvDen(String(e.item["groupDossierIds"]))||t.metaDataGroupDossier.hasOwnProperty("congvandagui")&&!t.metaDataGroupDossier.congvandagui?a("v-btn",{staticClass:"my-0",attrs:{flat:"",icon:"",color:"red",title:"Xóa"},on:{click:function(a){t.removeDossierFromGroup(e.item)}}},[a("v-icon",{attrs:{size:"22"}},[t._v("delete")])],1):t._e()],1)])]}}]),model:{value:t.selected,callback:function(e){t.selected=e},expression:"selected"}}),a("v-layout",{staticClass:"mt-3 ml-3",attrs:{wrap:""}},[a("v-flex",{staticClass:"pt-2",attrs:{xs12:"",sm2:""}},[a("span",[t._v("Tổng số hồ sơ: ")]),a("span",{staticClass:"text-bold"},[t._v(t._s(t.dossiersIntoGroupRender.length)+" ")])]),a("v-flex",{staticClass:"pt-2",attrs:{xs12:"",sm3:""}},[a("span",[t._v("Tổng số tiền: ")]),a("span",{staticClass:"text-bold"},[t._v(t._s(t.currency(t.totalFee))+" đồng")])]),a("v-flex",{attrs:{xs12:"",sm7:""}},[a("div",{staticClass:"text-xs-center layout wrap pr-1",staticStyle:{position:"relative"}},[a("div",{staticClass:"flex pagging-table px-2"},[a("tiny-pagination",{attrs:{showLimit:!0,total:t.dossiersIntoGroupRender.length,showTotal:!1,currentLimit:30,page:t.pagination.page,"custom-class":"custom-tiny-class"},on:{"tiny:change-page":t.paggingData}})],1)])])],1)],1):a("div",{staticClass:"pl-5 py-2"},[t._v("Chưa có hồ sơ nào")]),"NEW_GROUP_CV"===t.formCode&&!t.metaDataGroupDossier.hasOwnProperty("congvandagui")||"NEW_GROUP_CV_DI"===t.formCode?a("v-flex",{staticClass:"text-right mb-3 mr-2",attrs:{xs12:""}},["Thêm mới hồ sơ"===t.addFormNewInGroup?a("v-btn",{staticClass:"mx-0 my-0 mr-2",attrs:{small:"",color:"primary"},on:{click:t.createDossierIntoGroup}},[a("v-icon",{attrs:{size:"20"}},[t._v("add")]),t._v("   \n                "),a("span",[t._v("Thêm mới hồ sơ")])],1):t._e(),"NEW_GROUP_CV"!==t.formCode&&t.metaDataGroupDossier.hasOwnProperty("congvandagui")&&!t.metaDataGroupDossier.congvandagui?a("v-btn",{staticClass:"mx-0 my-0",attrs:{small:"",color:"primary"},on:{click:t.showDossierToAdd}},[a("v-icon",{attrs:{size:"20"}},[t._v("create_new_folder")]),t._v("   \n                "),a("span",[t._v("Thêm hồ sơ đã có")])],1):t._e()],1):t._e(),"NEW_GROUP"===t.formCode?a("v-flex",{staticClass:"text-right mb-3 mr-2",attrs:{xs12:""}},[a("input",{staticStyle:{display:"none"},attrs:{type:"file",id:"dossierImport"},on:{change:function(e){t.uploadfileDossierImport(e)}}}),a("v-btn",{staticClass:"mx-0 my-0 mr-2",staticStyle:{height:"36px !important"},attrs:{color:"primary"},on:{click:t.createDossierIntoGroup}},[a("v-icon",{attrs:{size:"20"}},[t._v("add")]),t._v("   \n                "),a("span",[t._v("Thêm hồ sơ vào nhóm")])],1),a("v-btn",{staticClass:"mx-0 my-0 mr-1",staticStyle:{height:"36px !important"},attrs:{color:"primary"},on:{click:t.importIntoGroup}},[a("v-icon",{attrs:{size:"20"}},[t._v("cloud_upload")]),t._v("   \n                "),a("span",[t._v("Import hồ sơ vào nhóm")])],1)],1):t._e()],1)],1)],1)],1),t.activeAddDossierIntoGroup?a("div",[!t.activeAddDossierIntoGroup||"NEW_GROUP_CV"!==t.formCode&&"NEW_GROUP_CV_DI"!==t.formCode?t._e():a("thong-tin-chu-ho-so-cong-van",{ref:"thongtinchuhosocongvan",attrs:{mauCongVan:t.mauCongVan}}),t.activeAddDossierIntoGroup&&"NEW_GROUP"===t.formCode?a("thong-tin-chu-ho-so",{ref:"thongtinchuhoso",attrs:{showApplicant:!1,showDelegate:!0}}):t._e(),"NEW_GROUP_CV"===t.formCode||"NEW_GROUP_CV_DI"===t.formCode?a("v-expansion-panel",{staticClass:"expansion-pl",attrs:{value:[!0],expand:""}},[a("v-expansion-panel-content",[a("div",{staticStyle:{display:"flex","align-items":"center"},attrs:{slot:"header"},slot:"header"},[a("div",{staticClass:"background-triangle-small"},[a("v-icon",{attrs:{size:"18",color:"white"}},[t._v("star_rate")])],1),a("span",[t._v("Tên hồ sơ")]),t._v("\n                \n          ")]),a("div",[a("v-card",[a("v-card-text",[a("v-form",{ref:"formTenHoSo",attrs:{"lazy-validation":""},model:{value:t.valid_tenHoSo,callback:function(e){t.valid_tenHoSo=e},expression:"valid_tenHoSo"}},[a("v-textarea",{attrs:{rows:2,box:"",label:"Nhập tên hồ sơ",rules:[t.rules.varchar5000]},model:{value:t.dossierNameCongVan,callback:function(e){t.dossierNameCongVan=e},expression:"dossierNameCongVan"}})],1)],1)],1)],1)])],1):t._e(),t.activeAddDossierIntoGroup?a("div",{staticStyle:{position:"relative"}},[a("v-expansion-panel",{staticClass:"expansion-pl",attrs:{value:0}},[a("v-expansion-panel-content",[a("div",{staticStyle:{display:"flex","align-items":"center"},attrs:{slot:"header"},slot:"header"},[a("div",{staticClass:"background-triangle-small"},[a("v-icon",{attrs:{size:"18",color:"white"}},[t._v("star_rate")])],1),t._v("\n              Thành phần hồ sơ     \n            ")]),a("thanh-phan-ho-so",{ref:"thanhphanhoso",attrs:{formCode:t.formCode,onlyView:!1,id:"nm",partTypes:t.inputTypesIntoGroup}})],1)],1)],1):t._e(),0!==t.viaPortalDetail?a("div",{staticStyle:{position:"relative"}},[a("v-expansion-panel",{staticClass:"expansion-pl",attrs:{value:0}},[a("v-expansion-panel-content",{attrs:{"hide-actions":"",value:"2"}},[a("div",{attrs:{slot:"header"},slot:"header"},[a("div",{staticClass:"background-triangle-small"},[a("v-icon",{attrs:{size:"18",color:"white"}},[t._v("star_rate")])],1),t._v("Dịch vụ chuyển phát kết quả")]),a("dich-vu-chuyen-phat-ket-qua",{ref:"dichvuchuyenphatketqua",on:{changeViapostal:t.changeViapostal}})],1)],1)],1):t._e(),a("div",{staticStyle:{position:"relative"}},[a("v-expansion-panel",{staticClass:"expansion-pl",attrs:{value:[!0],expand:""}},[a("v-expansion-panel-content",{attrs:{"hide-actions":"",value:"2"}},[t.showThuPhi?a("thu-phi",{attrs:{viaPortal:t.viaPortalDetail},model:{value:t.payments,callback:function(e){t.payments=e},expression:"payments"}}):t._e()],1)],1)],1)],1):t._e(),t.activeAddDossierIntoGroup||t.activeAddGroup?a("v-tabs",{staticClass:"mb-0 mt-4",attrs:{"icons-and-text":"",centered:""}},[t.activeAddGroup&&"NEW_GROUP_CV"===t.formCode&&!t.metaDataGroupDossier.hasOwnProperty("congvandagui")?a("v-tab",{staticClass:"px-0 py-0",attrs:{href:"#tab-1"},on:{click:function(e){t.putGroupDossier()}}},[a("v-btn",{attrs:{flat:"",loading:t.loadingAction,disabled:t.loadingAction}},[a("v-icon",{attrs:{size:"20"}},[t._v("save")]),t._v("   \n          "),a("span",[t._v("Cập nhật")]),a("span",{attrs:{slot:"loader"},slot:"loader"},[t._v("Loading...")])],1)],1):t._e(),t.activeAddGroup&&"NEW_GROUP_CV_DI"===t.formCode&&t.metaDataGroupDossier.hasOwnProperty("congvandagui")&&!t.metaDataGroupDossier.congvandagui?a("v-tab",{staticClass:"px-0 py-0",attrs:{href:"#tab-1"},on:{click:function(e){t.putGroupDossier("save")}}},[a("v-btn",{attrs:{flat:"",loading:t.loadingAction,disabled:t.loadingAction}},[a("v-icon",{attrs:{size:"20"}},[t._v("save")]),t._v("   \n          "),a("span",[t._v("Lưu công văn")]),a("span",{attrs:{slot:"loader"},slot:"loader"},[t._v("Loading...")])],1)],1):t._e(),t.activeAddGroup&&"NEW_GROUP_CV_DI"===t.formCode&&t.metaDataGroupDossier.hasOwnProperty("congvandagui")&&!t.metaDataGroupDossier.congvandagui?a("v-tab",{staticClass:"px-0 py-0",attrs:{href:"#tab-2"},on:{click:function(e){t.putGroupDossier("saveSend")}}},[a("v-btn",{attrs:{flat:"",loading:t.loadingAction,disabled:t.loadingAction||0===t.lengthDossier}},[a("v-icon",{attrs:{size:"20"}},[t._v("save")]),t._v("   \n          "),a("span",[t._v("Lưu và gửi công văn")]),a("span",{attrs:{slot:"loader"},slot:"loader"},[t._v("Loading...")])],1)],1):t._e(),t.activeAddGroup||"NEW_GROUP_CV"!==t.formCode&&"NEW_GROUP_CV_DI"!==t.formCode?t._e():a("v-tab",{staticClass:"px-0 py-0",attrs:{href:"#tab-1"},on:{click:function(e){t.tiepNhanHoSoCongVan()}}},[a("v-btn",{attrs:{flat:"",loading:t.loadingAction,disabled:t.loadingAction}},[a("v-icon",{attrs:{size:"20"}},[t._v("save")]),t._v("   \n          "),a("span",[t._v("Tiếp nhận hồ sơ")]),a("span",{attrs:{slot:"loader"},slot:"loader"},[t._v("Loading...")])],1)],1),t.activeAddGroup||"NEW_GROUP"!==t.formCode?t._e():a("v-tab",{staticClass:"px-0 py-0",attrs:{href:"#tab-1"},on:{click:function(e){t.tiepNhanHoSo()}}},[a("v-btn",{attrs:{flat:"",loading:t.loadingAction,disabled:t.loadingAction}},[a("v-icon",{attrs:{size:"20"}},[t._v("save")]),t._v("   \n          "),a("span",[t._v("Tiếp nhận hồ sơ")]),a("span",{attrs:{slot:"loader"},slot:"loader"},[t._v("Loading...")])],1)],1),"NEW_GROUP_CV_DI"===t.formCode&&t.createFileCongVan?a("v-tab",{staticClass:"px-0 py-0",attrs:{href:"#tab-3"}},[a("v-btn",{attrs:{flat:"",loading:t.loadingAction,disabled:t.loadingAction},on:{click:t.printCongVan}},[a("v-icon",{attrs:{size:"20"}},[t._v("printer")]),t._v("  \n          "),a("span",{staticStyle:{"margin-left":"-30px"}},[t._v("In công văn")]),a("span",{attrs:{slot:"loader"},slot:"loader"},[t._v("Loading...")])],1)],1):t._e(),t.metaDataGroupDossier.hasOwnProperty("congvandagui")&&!t.metaDataGroupDossier.congvandagui||t.activeDeleteCongVan?a("v-tab",{staticClass:"px-0 py-0",attrs:{href:"#tab-4"},on:{click:function(e){t.deleteCongVan()}}},[a("v-btn",{attrs:{flat:"",loading:t.loadingAction,disabled:t.loadingAction}},[a("v-icon",{attrs:{size:"20"}},[t._v("clear")]),t._v("   \n          "),a("span",[t._v("Xóa công văn")]),a("span",{attrs:{slot:"loader"},slot:"loader"},[t._v("Loading...")])],1)],1):t._e(),a("v-tab",{staticClass:"px-0 py-0",attrs:{href:"#tab-5"},on:{click:t.goBack}},[a("v-btn",{attrs:{flat:"",loading:t.loadingAction,disabled:t.loadingAction}},[a("v-icon",{attrs:{size:"18"}},[t._v("reply")]),t._v("  \n          Quay lại\n          "),a("span",{attrs:{slot:"loader"},slot:"loader"},[t._v("Loading...")])],1)],1)],1):t._e()],1),a("v-dialog",{attrs:{"max-width":"700",transition:"fade-transition"},model:{value:t.dialogImportDosier,callback:function(e){t.dialogImportDosier=e},expression:"dialogImportDosier"}},[a("v-card",[a("v-toolbar",{attrs:{flat:"",dark:"",color:"primary"}},[a("v-toolbar-title",[t._v("Import hồ sơ")]),a("v-spacer"),a("v-btn",{attrs:{icon:"",dark:""},nativeOn:{click:function(e){t.dialogImportDosier=!1}}},[a("v-icon",[t._v("close")])],1)],1),a("v-card-text",{staticClass:"pt-0 pb-0 px-0"},[a("v-flex",{staticClass:"text-xs-center"},[a("v-progress-circular",{staticClass:"my-2",attrs:{rotate:-90,size:70,width:10,value:t.valueProgress,color:"primary"}},[a("span",{staticStyle:{"font-size":"1.5em","font-weight":"bold"}},[t._v(t._s(t.countDossierProgress))])]),a("div",{staticClass:"pb-0",staticStyle:{margin:"0 auto"}},[a("v-card",{staticClass:"py-0"},[a("span",{staticStyle:{color:"green"}},[t._v("Thành công: "+t._s(t.countDossierSuccess)+" hồ sơ")]),a("p",{staticStyle:{color:"red"}},[t._v("Lỗi: "+t._s(t.dossierError.length)+" hồ sơ")])])],1)],1),t.dossierError.length&&!t.loadingImportDossier?a("div",{staticClass:"px-2",staticStyle:{margin:"0 auto"}},[a("span",{staticStyle:{"font-size":"1.2em","font-weight":"bold"}},[t._v("Danh sách hồ sơ bị lỗi:")]),a("v-data-table",{staticClass:"table-landing table-bordered mt-2",staticStyle:{"border-left":"1px solid #dedede"},attrs:{headers:t.headers,items:t.dossierError,"hide-actions":"","item-key":"dossierId"},scopedSlots:t._u([{key:"items",fn:function(e){return[a("tr",{staticStyle:{cursor:"pointer"}},[a("td",{staticClass:"text-xs-center",attrs:{width:""}},[a("span",[t._v(t._s(e.index+1))])]),a("td",{staticClass:"text-xs-left",attrs:{width:""}},[t._v("\n                  "+t._s(e.item.applicantName)+"\n                ")]),a("td",{staticClass:"text-xs-left"},[t._v("\n                  "+t._s(e.item.applicantIdNo)+"\n                ")]),a("td",{staticClass:"text-xs-left",attrs:{width:""}},[t._v("\n                  "+t._s(e.item.address)+"\n                ")])])]}}])})],1):t._e()],1),a("v-card-actions",[a("v-spacer"),t.dossierError.length?a("v-btn",{attrs:{color:"primary",loading:t.loadingImportDossier,disabled:t.loadingImportDossier},nativeOn:{click:function(e){t.addDossierAgain()}}},[a("v-icon",[t._v("send")]),t._v(" \n            Thực hiện lại\n            "),a("span",{attrs:{slot:"loader"},slot:"loader"},[t._v("Loading...")])],1):t._e(),a("v-btn",{staticStyle:{color:"#fff"},attrs:{color:"red",loading:t.loadingImportDossier,disabled:t.loadingImportDossier},nativeOn:{click:function(e){t.dialogImportDosier=!1}}},[a("v-icon",[t._v("reply")]),t._v(" \n          Quay lại\n          "),a("span",{attrs:{slot:"loader"},slot:"loader"},[t._v("Loading...")])],1)],1)],1)],1),a("v-dialog",{attrs:{"max-width":"1000",transition:"fade-transition"},model:{value:t.dialogSelectDosier,callback:function(e){t.dialogSelectDosier=e},expression:"dialogSelectDosier"}},[a("v-card",{attrs:{flat:""}},[a("v-toolbar",{attrs:{flat:"",dark:"",color:"primary"}},[a("v-toolbar-title",[t._v("Chọn hồ sơ đính kèm tài liệu")]),a("v-spacer"),a("v-btn",{attrs:{icon:"",dark:""},nativeOn:{click:function(e){return t.cancelAddFile(e)}}},[a("v-icon",[t._v("close")])],1)],1),a("v-card-text",{staticClass:"pt-0 pb-0 px-0"},[t.dossiersIntoGroupRender.length>0?a("div",{staticClass:"mb-3"},[a("v-layout",{staticClass:"my-2",attrs:{wrap:""}},[a("v-flex",{staticStyle:{width:"120px"}},[a("v-subheader",{staticClass:"pl-0 text-header"},[t._v("Bước xử lý: ")])],1),a("v-flex",{staticClass:"pr-3",staticStyle:{width:"calc(100% - 120px)"}},[a("v-select",{attrs:{items:t.stepList,"item-text":"stepName","item-value":"stepCode","return-object":"",clearable:""},on:{change:t.changeStep},model:{value:t.stepSelected,callback:function(e){t.stepSelected=e},expression:"stepSelected"}})],1)],1),a("v-data-table",{staticClass:"table-landing table-bordered",attrs:{"select-all":"",headers:t.headers,items:t.dossiersIntoGroupRender,pagination:t.pagination,"hide-actions":"","item-key":"dossierId"},on:{"update:pagination":function(e){t.pagination=e}},scopedSlots:t._u([{key:"headers",fn:function(e){return[a("tr",[a("th",{staticClass:"v_data_table_check_all",staticStyle:{"padding-left":"14px !important"},attrs:{width:"32px"}},[a("v-checkbox",{attrs:{"input-value":e.all,indeterminate:e.indeterminate,primary:"","hide-details":""},nativeOn:{click:function(e){return t.toggleAllSelectDialog(e)}}})],1),t._l(t.headers,(function(e){return a("th",{key:e.text,class:e["class"]?e["class"]:"",attrs:{width:e["width"]?e["width"]+"px":""}},[a("v-tooltip",{attrs:{bottom:""}},[a("span",{attrs:{slot:"activator"},slot:"activator"},[t._v(t._s(e.text))]),a("span",[t._v(t._s(e.text))])])],1)}))],2)]}},{key:"items",fn:function(e){return[a("tr",{staticStyle:{cursor:"pointer"}},[a("td",{staticClass:"text-xs-center pl-3",staticStyle:{height:"40px !important"},attrs:{width:"32px"}},[a("v-checkbox",{attrs:{primary:"","hide-details":""},model:{value:e.selected,callback:function(a){t.$set(e,"selected",a)},expression:"props.selected"}})],1),a("td",{staticClass:"text-xs-center",staticStyle:{height:"40px !important"},attrs:{width:"50px"},on:{click:function(a){t.viewDetail(e.item,e.index)}}},[a("span",[t._v(t._s(t.pagination.page*t.pagination.rowsPerPage-t.pagination.rowsPerPage+e.index+1))])]),a("td",{staticClass:"text-xs-left",staticStyle:{height:"40px !important"},attrs:{width:"150px"},on:{click:function(a){t.viewDetail(e.item,e.index)}}},[t._v("\n                  "+t._s(e.item.applicantName)+"\n                ")]),a("td",{staticClass:"text-xs-left",staticStyle:{height:"40px !important"},on:{click:function(a){t.viewDetail(e.item,e.index)}}},[t._v("\n                  "+t._s(e.item.applicantName)+"\n                ")]),a("td",{staticClass:"text-xs-left",staticStyle:{height:"40px !important"},attrs:{width:"200px"},on:{click:function(a){t.viewDetail(e.item,e.index)}}},[t._v("\n                  "+t._s(e.item.dossierSubStatusText?e.item.dossierSubStatusText:e.item.dossierStatusText)+"\n                ")])])]}}]),model:{value:t.selectedAttach,callback:function(e){t.selectedAttach=e},expression:"selectedAttach"}}),t.dossiersIntoGroupRender.length>30?a("div",{staticClass:"text-xs-center layout wrap mt-2 pr-1",staticStyle:{position:"relative"}},[a("div",{staticClass:"flex pagging-table px-2"},[a("tiny-pagination",{attrs:{total:t.dossiersIntoGroupRender.length,currentLimit:30,page:t.pagination.page,"custom-class":"custom-tiny-class"},on:{"tiny:change-page":t.paggingData}})],1)]):t._e()],1):t._e()]),a("v-card-actions",[a("v-spacer"),a("v-btn",{attrs:{color:"primary"},nativeOn:{click:function(e){t.addFileToDossier()}}},[a("v-icon",[t._v("send")]),t._v(" \n          Xác nhận\n        ")],1),a("v-btn",{staticStyle:{color:"#fff"},attrs:{color:"red"},nativeOn:{click:function(e){return t.cancelAddFile(e)}}},[a("v-icon",[t._v("close")]),t._v(" \n          Bỏ qua\n        ")],1)],1)],1)],1),a("v-dialog",{attrs:{"max-width":"1300",transition:"fade-transition"},model:{value:t.dialogAddDossier,callback:function(e){t.dialogAddDossier=e},expression:"dialogAddDossier"}},[a("v-card",{attrs:{flat:""}},[a("v-toolbar",{attrs:{flat:"",dark:"",color:"primary"}},[a("v-toolbar-title",[t._v("Chọn hồ sơ")]),a("v-spacer"),a("v-btn",{attrs:{icon:"",dark:""},nativeOn:{click:function(e){t.dialogAddDossier=!1}}},[a("v-icon",[t._v("close")])],1)],1),a("v-card-text",{staticClass:"pt-0 pb-0 px-0"},[a("div",{staticClass:"mb-3"},[a("v-layout",{staticClass:"my-2",attrs:{wrap:""}},[a("v-flex",{staticClass:"px-2 mt-3"},[a("v-text-field",{attrs:{label:"Tìm kiếm theo mã hồ sơ","append-icon":"search",box:""},on:{keyup:function(e){return"button"in e||!t._k(e.keyCode,"enter",13,e.key,"Enter")?t.searchKeyWordDossierToAdd(e):null},"click:append":t.searchKeyWordDossierToAdd},model:{value:t.dossierNoKey,callback:function(e){t.dossierNoKey=e},expression:"dossierNoKey"}})],1)],1),a("v-data-table",{staticClass:"table-landing table-bordered",attrs:{headers:t.headersCV,items:t.dossiersSelectAdd,"select-all":!0,"hide-actions":"","item-key":"dossierId"},scopedSlots:t._u([{key:"headers",fn:function(e){return[a("tr",[a("th",{staticClass:"v_data_table_check_all",staticStyle:{"padding-left":"14px !important"},attrs:{width:"32px"}},[a("v-checkbox",{staticClass:"pl-1",attrs:{"input-value":e.all,indeterminate:e.indeterminate,primary:"","hide-details":""},nativeOn:{click:function(e){return t.toggleAllSelectDossierAdd(e)}}})],1),t._l(t.headersCV,(function(e){return a("th",{key:e.text,class:e["class"]?e["class"]:"",attrs:{width:e["width"]?e["width"]+"px":""}},[a("v-tooltip",{attrs:{bottom:""}},[a("span",{attrs:{slot:"activator"},slot:"activator"},[t._v(t._s(e.text))]),a("span",[t._v(t._s(e.text))])])],1)}))],2)]}},{key:"items",fn:function(e){return[a("tr",{staticStyle:{cursor:"pointer"}},[a("td",{staticClass:"text-xs-center",staticStyle:{height:"40px !important"},attrs:{width:"30px"}},[a("v-checkbox",{staticClass:"pl-3",attrs:{primary:"","hide-details":"",color:"primary"},on:{change:t.changeSelectedDossierAdd},model:{value:e.selected,callback:function(a){t.$set(e,"selected",a)},expression:"props.selected"}})],1),a("td",{staticClass:"text-xs-center",staticStyle:{height:"40px !important"},attrs:{width:"50px"}},[a("span",[t._v(t._s(t.hosoDatasPage*t.numberPerPageAddDossier-t.numberPerPageAddDossier+e.index+1))])]),a("td",{staticClass:"text-xs-left",staticStyle:{height:"40px !important"},attrs:{width:"150px"}},[t._v("\n                  "+t._s(e.item.dossierNo)+"\n                ")]),a("td",{staticClass:"text-xs-left",staticStyle:{height:"40px !important"},attrs:{width:"150px"}},[t._v("\n                  "+t._s(e.item.applicantName)+"\n                ")]),a("td",{staticClass:"text-xs-left",staticStyle:{height:"40px !important"},attrs:{width:"100px"}},[t.getMetaData(e.item)&&t.getMetaData(e.item).hasOwnProperty("birthDateDay")&&t.getMetaData(e.item).hasOwnProperty("birthDateMonth")&&t.getMetaData(e.item).hasOwnProperty("birthDateYear")?a("span",[t._v(t._s(t.getMetaData(e.item).birthDateDay)+"/")]):t._e(),e.item&&t.getMetaData(e.item)&&t.getMetaData(e.item).hasOwnProperty("birthDateMonth")&&t.getMetaData(e.item).hasOwnProperty("birthDateYear")?a("span",[t._v(t._s(t.getMetaData(e.item).birthDateMonth)+"/")]):t._e(),e.item&&t.getMetaData(e.item)&&t.getMetaData(e.item).hasOwnProperty("birthDateYear")?a("span",[t._v(t._s(t.getMetaData(e.item).birthDateYear)+" ")]):t._e()]),a("td",{staticClass:"text-xs-left",staticStyle:{height:"40px !important"}},[e.item.address?a("span",[t._v(t._s(e.item.address)+", ")]):t._e(),e.item.wardName?a("span",[t._v(t._s(e.item.wardName)+", ")]):t._e(),e.item.districtName?a("span",[t._v(t._s(e.item.districtName)+", ")]):t._e(),e.item.cityName?a("span",[t._v(t._s(e.item.cityName)+" ")]):t._e()]),a("td",{staticClass:"text-xs-left",staticStyle:{height:"40px !important"},attrs:{width:"100px"}},[e.item.metaData&&t.getMetaData(e.item)&&t.getMetaData(e.item).yearPayment?a("span",[t._v(t._s(t.getMetaData(e.item).yearPayment)+" ")]):t._e()]),a("td",{staticClass:"text-xs-left",staticStyle:{height:"40px !important"},attrs:{width:"100px"}},[e.item.metaData&&t.getMetaData(e.item)&&t.getMetaData(e.item).subsidy?a("span",[t._v(t._s(t.currency(t.getMetaData(e.item).subsidy))+" ")]):t._e()]),a("td",{staticClass:"text-xs-left",staticStyle:{height:"40px !important"},attrs:{width:"100px"}},[e.item.dossierStatusText?a("span",[t._v(t._s(e.item.dossierStatusText)+" ")]):t._e()]),a("td",{staticClass:"text-xs-left",staticStyle:{height:"40px !important"},attrs:{width:"100px"}},[e.item.applicantNote?a("span",[t._v(t._s(e.item.applicantNote)+" ")]):t._e()]),a("td",{staticClass:"text-xs-center",staticStyle:{height:"40px !important"},attrs:{width:"100px"}},[a("v-btn",{staticClass:"mr-2 my-0",attrs:{disabled:t.loadingAction,small:"",outline:"",color:"primary"},on:{click:function(a){t.addDossierToGroup(e.item)}}},[a("v-icon",{attrs:{size:"20"}},[t._v("add")]),t._v("   \n                    "),a("span",[t._v("Thêm hồ sơ")])],1)],1)])]}}]),model:{value:t.selectedDossierAdd,callback:function(e){t.selectedDossierAdd=e},expression:"selectedDossierAdd"}}),a("div",{staticClass:"text-xs-right layout wrap",staticStyle:{position:"relative"}},[a("div",{staticClass:"flex pagging-table px-2"},[a("tiny-pagination",{attrs:{total:t.hosoDatasTotal,page:t.hosoDatasPage,numberPerPage:t.numberPerPageAddDossier,showLimit:!1,"custom-class":"custom-tiny-class"},on:{"tiny:change-page":t.paggingDataDossierAdd}})],1)])],1)]),a("v-card-actions",[a("v-spacer"),a("v-btn",{attrs:{disabled:t.loadingAction,color:"primary"},nativeOn:{click:function(e){t.addMultipleDossierToGroup()}}},[a("v-icon",[t._v("send")]),t._v(" \n          Xác nhận\n        ")],1),a("v-btn",{attrs:{disabled:t.loadingAction,color:"primary"},nativeOn:{click:function(e){t.dialogAddDossier=!1}}},[a("v-icon",{staticClass:"white--text"},[t._v("close")]),t._v(" \n          Thoát\n        ")],1)],1)],1)],1),a("v-dialog",{staticStyle:{overflow:"hidden"},attrs:{"max-width":"1000",transition:"fade-transition"},model:{value:t.dialogPDF,callback:function(e){t.dialogPDF=e},expression:"dialogPDF"}},[a("v-card",[a("v-toolbar",{attrs:{dark:"",color:"primary"}},[a("v-toolbar-title",[a("span",[t._v("In công văn")])]),a("v-spacer"),a("v-btn",{attrs:{icon:"",dark:""},nativeOn:{click:function(e){t.dialogPDF=!1}}},[a("v-icon",[t._v("close")])],1)],1),a("iframe",{staticStyle:{overflow:"auto","min-height":"600px"},attrs:{id:"dialogPdfFile",src:"",type:"application/pdf",width:"100%",height:"100%",frameborder:"0"}})],1)],1)],1)},oe=[],ne=a("96b0"),se=a("826a"),re=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("v-card",{attrs:{flat:""}},[t._l(t.dossierTemplateItemsFilter,(function(e,i){return a("div",{key:e.partNo,staticClass:"form_alpaca",staticStyle:{position:"relative"}},[a("v-expansion-panel",{staticClass:"expaned__list__data",attrs:{expand:"",value:t.currentFormView==="formAlpaca"+e.partNo+t.id?[!0]:[!1]}},[a("v-expansion-panel-content",{attrs:{"hide-actions":""}},[a("div",{staticStyle:{"background-color":"#fff"},attrs:{slot:"header"},on:{click:function(e){t.stateView=!1}},slot:"header"},[a("div",{staticStyle:{"align-items":"center",background:"#fff","padding-left":"25px"},style:{width:t.checkStyle(e)}},[a("div",{staticClass:"mr-2",staticStyle:{"min-width":"20px",display:"flex"},on:{click:function(a){(!t.onlyView||!e.hasForm)&&t.loadAlpcaFormClick(e)}}},[a("div",{staticClass:"header__tphs",staticStyle:{"min-width":"20px"}},[a("span",{staticClass:"text-bold"},[t._v(t._s(i+1)+".")]),t._v("  ")]),a("div",{staticClass:"header__tphs",staticStyle:{"text-align":"justify"}},[e.partTip&&e.partTip["tip"]?a("v-tooltip",{staticStyle:{"max-width":"100% !important"},attrs:{top:""}},[a("span",{attrs:{slot:"activator"},slot:"activator"},[t._v("\n                      "+t._s(e.partName)+"\n                      "),e.required?a("span",{staticStyle:{color:"red"}},[t._v("   (*) ")]):t._e()]),e.partTip["tip"]?a("span",[t._v(t._s(e.partTip["tip"]))]):t._e()]):a("span",[t._v("\n                    "+t._s(e.partName)+" "),e.required?a("span",{staticStyle:{color:"red"}},[t._v("   (*) ")]):t._e(),e.hasForm?a("span",{staticStyle:{color:"#004b94"}},[t._v("(Bản khai trực tuyến)")]):t._e()]),t._v("\n                    \n                  "),!e.hasForm&&e.hasFileTemp?a("v-tooltip",{attrs:{top:""}},[a("v-icon",{staticStyle:{color:"#0d71bb"},attrs:{slot:"activator",size:"16",color:"primary"},on:{click:function(a){a.stopPropagation(),t.downloadFileTemplate(e,i)}},slot:"activator"},[t._v("save_alt")]),a("span",[t._v("Biểu mẫu điền thủ công")])],1):t._e()],1)]),a("div",{staticStyle:{display:"flex"}},[1===t.checkInput&&2===e.fileCheck&&e.stateEditFileCheck?a("v-text-field",{attrs:{placeholder:"Nhập lý do",rules:[function(t){return!!t||"Bạn phải nhập lý do trước khi gửi"}],required:""},on:{change:function(t){e.fileComment=String(e.fileComment).trim()},keyup:function(a){if(!("button"in a)&&t._k(a.keyCode,"enter",13,a.key,"Enter"))return null;t.changeFileComment(e,i)}},model:{value:e.fileComment,callback:function(a){t.$set(e,"fileComment",a)},expression:"item.fileComment"}}):t._e(),1===t.checkInput&&2===e.fileCheck&&e.stateEditFileCheck?a("v-tooltip",{attrs:{top:""}},[a("v-btn",{staticClass:"mx-0 my-0",attrs:{slot:"activator",icon:""},on:{click:function(a){a.stopPropagation(),t.changeFileComment(e,i)}},slot:"activator"},[a("v-icon",{staticClass:"mx-0",attrs:{size:"16",color:"primary"}},[t._v("send")])],1),a("span",[t._v("Gửi")])],1):t._e()],1),e.fileComment&&!e.stateEditFileCheck?a("i",{staticStyle:{"font-size":"12px",color:"#0d71bb","margin-left":"10px"}},[t._v(t._s(e.fileComment))]):t._e(),e.fileComment&&!e.stateEditFileCheck&&1===t.checkInput?a("v-tooltip",{attrs:{top:""}},[a("v-icon",{staticStyle:{"font-size":"13px",color:"#0d71bb","margin-left":"10px",cursor:"pointer"},attrs:{slot:"activator"},on:{click:function(t){t.stopPropagation(),e.stateEditFileCheck=!e.stateEditFileCheck}},slot:"activator"},[t._v("edit")]),a("span",[t._v("Chỉnh sửa ý kiến")])],1):t._e(),t._l(t.dossierFilesItems,(function(i,o){return e.partNo===i.dossierPartNo?a("div",{key:o},[i.eForm?t._e():a("div",{style:{width:"calc(100% - 0px)",display:"flex","align-items":"center",background:"#fff","padding-left":"15px","font-size":"12px","margin-bottom":t.onlyView?"5px":"0px"}},[a("span",{staticClass:"ml-3",staticStyle:{cursor:"pointer"},on:{click:function(e){e.stopPropagation(),t.viewFile2(i)}}},[0!==i.fileSize?a("v-icon",{staticClass:"mr-1",attrs:{color:t.getDocumentTypeIcon(i.fileType)["color"],size:t.getDocumentTypeIcon(i.fileType)["size"]}},[t._v("\n                      "+t._s(t.getDocumentTypeIcon(i.fileType)["icon"])+"\n                    ")]):t._e(),t._v("\n                    "+t._s(i.displayName)+" - \n                    "),a("i",[t._v(t._s(i.modifiedDate))])],1),t.onlyView||1===t.checkInput?t._e():a("v-btn",{staticClass:"mx-0 my-0",attrs:{icon:"",ripple:""},on:{click:function(e){e.stopPropagation(),t.deleteSingleFile(i,o)}}},[a("v-icon",{staticStyle:{color:"red"}},[t._v("delete_outline")])],1)],1)]):t._e()})),a("div",{staticClass:"mr-3 my-2 py-2",staticStyle:{display:"none","max-height":"250px","overflow-y":"scroll",border:"1px dashed #f3ae75","border-radius":"5px",position:"relative"},attrs:{id:"fileApplicant-"+e.partNo}},[t._l(t.dossierFilesApplicant,(function(o,n){return o.dossierTemplateNo===t.thongTinHoSo["dossierTemplateNo"]&&e.partNo===o.dossierPartNo?a("div",{key:n},[o.eForm&&0!==o.fileSize?a("div",{style:{width:"calc(100% - 0px)",display:"flex","align-items":"center","padding-left":"15px","font-size":"12px","margin-bottom":t.onlyView?"5px":"3px"}},[a("v-tooltip",{staticStyle:{"max-width":"100%"},attrs:{top:""}},[a("span",{staticStyle:{cursor:"pointer"},attrs:{slot:"activator"},on:{click:function(e){e.stopPropagation(),t.viewGiayToDaNop(o)}},slot:"activator"},[a("i",{staticClass:"ml-1 fa fa-file-o",staticStyle:{color:"#0d71bb","font-size":"13px"}}),t._v("  \n                        "+t._s(o.dossierTemplateNo?o.dossierTemplateNo:o.referenceUid)+"."+t._s(o.fileType)+" - \n                        "),a("i",[t._v(t._s(o.modifiedDate))])]),a("span",[t._v("Bản khai trực tuyến")])]),t.progressUploadPart===o.dossierFileId?a("v-progress-circular",{attrs:{width:2,size:25,color:"green",indeterminate:""}}):t._e(),t.onlyView||t.progressUploadPart?t._e():a("v-tooltip",{staticClass:"ml-2",attrs:{top:""}},[a("v-btn",{staticClass:"mx-0 my-0",attrs:{slot:"activator",icon:""},on:{click:function(e){t.attachToDossier(o,i)}},slot:"activator"},[a("v-badge",[a("v-icon",{attrs:{size:"16",color:"orange darken-3"}},[t._v("cloud_download")])],1)],1),a("span",[t._v("Sử dụng giấy tờ này")])],1)],1):a("div",{style:{width:"calc(100% - 0px)",display:"flex","align-items":"center","padding-left":"15px","font-size":"12px","margin-bottom":t.onlyView?"5px":"3px"}},[a("v-tooltip",{staticStyle:{"max-width":"100%"},attrs:{top:""}},[a("span",{staticStyle:{cursor:"pointer"},attrs:{slot:"activator"},on:{click:function(e){e.stopPropagation(),t.viewGiayToDaNop(o)}},slot:"activator"},[0!==o.fileSize?a("v-icon",{staticStyle:{color:"#0d71bb"}},[t._v("attach_file")]):t._e(),t._v("\n                        "+t._s(o.displayName)+" - \n                        "),a("i",[t._v(t._s(o.modifiedDate))])],1),a("span",[t._v("Đính kèm")])]),t.progressUploadPart===o.dossierFileId?a("v-progress-circular",{attrs:{width:2,size:25,color:"green",indeterminate:""}}):t._e(),t.onlyView||t.progressUploadPart?t._e():a("v-tooltip",{staticClass:"ml-2",attrs:{top:""}},[a("v-btn",{staticClass:"mx-0 my-0",attrs:{slot:"activator",icon:""},on:{click:function(e){t.attachToDossier(o,i)}},slot:"activator"},[a("v-badge",[a("v-icon",{attrs:{size:"16",color:"orange darken-3"}},[t._v("cloud_download")])],1)],1),a("span",[t._v("Sử dụng giấy tờ này")])],1)],1)]):t._e()})),a("v-btn",{staticClass:"mx-0 my-0",staticStyle:{position:"absolute",right:"0px",top:"0px"},attrs:{flat:"",icon:"",color:"red"},on:{click:function(a){a.stopPropagation(),t.showFilesApplicant(e.partNo)}}},[a("v-icon",[t._v("clear")])],1)],2)],2)]),e.hasForm&&!t.onlyView?a("v-card",{attrs:{flat:""}},[a("v-card-text",{staticStyle:{"background-color":"rgba(244, 247, 213, 0.19)"}},[a("v-layout",{attrs:{wrap:""}},[t.stateView?t._e():a("v-flex",{staticClass:"text-xs-right",attrs:{xs12:""}},[a("div",{style:t.pstFixed>t.pstEl&&t.pstFixed<t.endEl+t.pstEl?"position:fixed;top:5px;z-index:101":"",attrs:{id:"wrapForm"+e.partNo+t.id}},[e["editForm"]&&e.hasForm&&!t.onlyView&&1!==t.checkInput?a("v-btn",{attrs:{color:"primary"},on:{click:function(a){a.stopPropagation(),t.saveAlpacaForm(e,i)}}},[a("v-icon",{attrs:{color:"white"}},[t._v("save")]),t._v(" \n                      Lưu lại\n                    ")],1):t._e(),e["editForm"]&&e.daKhai&&e.hasForm?a("v-btn",{attrs:{color:"primary"},on:{click:function(a){a.stopPropagation(),t.previewFormAlpaca(e,i)}}},[a("v-icon",{attrs:{color:"white"}},[t._v("print")]),t._v(" \n                      Xem\n                    ")],1):t._e(),e["editForm"]||!e.hasForm||t.onlyView?t._e():a("v-btn",{attrs:{color:"primary"},on:{click:function(a){a.stopPropagation(),t.editFormAlpaca(e)}}},[a("v-icon",{attrs:{color:"white"}},[t._v("edit")]),t._v(" \n                      Sửa\n                    ")],1),e.daKhai&&e.hasForm&&!t.onlyView&&1!==t.checkInput?a("v-btn",{attrs:{color:"primary"},on:{click:function(a){a.stopPropagation(),t.deleteSingleFileEform(e,i)}}},[a("v-icon",{attrs:{color:"white"}},[t._v("delete")]),t._v(" \n                      Xóa\n                    ")],1):t._e()],1),e["editForm"]?a("div",{class:{no_acction__event:t.onlyView},attrs:{id:"formAlpaca"+e.partNo+t.id}}):t._e(),e["editForm"]?t._e():a("iframe",{staticStyle:{overflow:"auto","min-height":"600px"},attrs:{id:"displayPDF"+e.partNo+t.id,src:"",type:"application/pdf",width:"100%",height:"100%",frameborder:"0"}})])],1)],1)],1):t._e()],1)],1),6!==e.partType||6===e.partType&&("NEW_GROUP"===t.formCode||"NEW_GROUP_CV"===t.formCode||"NEW_GROUP_CV_DI"===t.formCode)?a("div",{staticClass:"absolute__btn group__thanh_phan mr-1"},[t.loading?a("content-placeholders",{staticClass:"mt-1"},[a("content-placeholders-text",{attrs:{lines:1}})],1):a("v-layout",{attrs:{row:"",wrap:""}},[1===t.originality||t.onlyView?t._e():a("v-flex",{staticClass:"layout wrap mr-2",staticStyle:{width:"100px"}},[a("v-text-field",{staticClass:"counter-up-down text-xs-center",staticStyle:{width:"100px"},style:t.onlyView?"pointer-events: none":"",attrs:{title:"Số lượng","append-icon":"add","prepend-inner-icon":"remove","clear-icon":"mdi-close-circle",type:"number",solo:"",flat:"",height:"32"},on:{"click:append":function(e){t.increaseCounter(i)},"click:prepend-inner":function(e){t.decreaseCounter(i)},input:function(e){t.changeRecordCount(i)}},model:{value:t.dossierTemplateItems[i]["recordCount"],callback:function(e){t.$set(t.dossierTemplateItems[i],"recordCount",e)},expression:"dossierTemplateItems[index]['recordCount']"}})],1),1===t.originality||1!==e.partType||t.thongTinHoSo.online||1===t.checkInput?t._e():a("v-flex",{staticClass:"layout wrap",staticStyle:{width:"100px"}},[a("v-autocomplete",{style:t.onlyView?"pointer-events: none":"",attrs:{items:t.fileMarkItems,"hide-no-data":""},on:{change:function(e){t.changeFileMark(e,i)}},model:{value:t.dossierTemplateItems[i].fileMark,callback:function(e){t.$set(t.dossierTemplateItems[i],"fileMark",e)},expression:"dossierTemplateItems[index].fileMark"}})],1),1===t.checkInput?a("v-flex",{staticClass:"layout wrap",staticStyle:{width:"120px"}},[a("v-select",{attrs:{items:t.fileCheckItems,"item-text":"text","item-value":"value"},on:{change:function(e){t.changeFileCheck(e,i)}},model:{value:t.dossierTemplateItems[i].fileCheck,callback:function(e){t.$set(t.dossierTemplateItems[i],"fileCheck",e)},expression:"dossierTemplateItems[index].fileCheck"}})],1):e.fileCheck>0?a("v-flex",{staticClass:"layout wrap",style:{width:"40px","align-items":"center","margin-left":"10px","margin-top":t.thongTinHoSo.online?"10px":"0px"}},[1===e.fileCheck?a("v-tooltip",{attrs:{top:""}},[a("v-icon",{staticClass:"mx-0",attrs:{slot:"activator",size:"24",color:"primary"},slot:"activator"},[t._v("done")]),a("span",[t._v("Đạt")])],1):2===e.fileCheck?a("v-tooltip",{attrs:{top:""}},[a("v-icon",{staticClass:"mx-0",attrs:{slot:"activator",size:"24",color:"primary"},slot:"activator"},[t._v("close")]),a("span",[t._v("Không đạt")])],1):t._e()],1):t._e(),1!==t.checkInput?a("v-flex",{class:{"text-xs-right":t.onlyView},style:{width:t.onlyView?"auto":"120px"}},[e["multiple"]?a("input",{staticStyle:{display:"none"},attrs:{type:"file",multiple:"",id:"file"+e.partNo},on:{change:function(a){t.onUploadSingleFile(a,e,i)}}}):a("input",{staticStyle:{display:"none"},attrs:{type:"file",id:"file"+e.partNo},on:{change:function(a){t.onUploadSingleFile(a,e,i)}}}),3!==e.partType||3!==t.originality||t.onlyView?t._e():a("v-tooltip",{attrs:{top:""}},[a("v-btn",{staticClass:"mx-0 my-0",attrs:{slot:"activator",icon:""},on:{click:function(a){t.addFileOther(e)}},slot:"activator"},[a("v-icon",{staticClass:"mx-0",attrs:{size:"16",color:"primary"}},[t._v("add")])],1),a("span",[t._v("Thêm giấy tờ khác")])],1),t.progressUploadPart===e.partNo?a("v-progress-circular",{attrs:{width:2,size:25,color:"green",indeterminate:""}}):t._e(),t.progressUploadPart!==e.partNo&&!t.onlyView&e.hasForm?a("v-tooltip",{attrs:{top:""}},[a("v-btn",{staticClass:"mx-0 my-0",attrs:{slot:"activator",icon:""},on:{click:function(a){a.stopPropagation(),t.loadAlpcaFormClick(e)}},slot:"activator"},[a("v-badge",[a("v-icon",{attrs:{size:"24",color:"#004b94"}},[t._v("edit")])],1)],1),a("span",[t._v("Khai trực tuyến")])],1):t._e(),t.progressUploadPart!==e.partNo&&t.onlyView&e.hasForm?a("v-tooltip",{attrs:{top:""}},[a("v-btn",{staticClass:"mx-1 my-0",staticStyle:{height:"25px",width:"25px"},attrs:{slot:"activator",fab:"",dark:"",small:"",color:"primary"},on:{click:function(a){t.loadAlpcaFormClick(e)}},slot:"activator"},[a("v-icon",{staticStyle:{"font-size":"14px"}},[t._v("visibility")])],1),a("span",[t._v("Xem")])],1):t._e(),t.progressUploadPart===e.partNo||t.onlyView?t._e():a("v-tooltip",{attrs:{left:""}},[a("v-btn",{staticClass:"mx-0 my-0",attrs:{slot:"activator",icon:""},on:{click:function(a){t.pickFile(e)}},slot:"activator"},[a("v-badge",[a("v-icon",{attrs:{size:"24",color:"#004b94"}},[t._v("cloud_upload")])],1)],1),e.partTip["extensions"]||e.partTip["maxSize"]?a("span",[t._v("Tải giấy tờ lên (Chấp nhận tải lên các định dạng: "+t._s(e.partTip["extensions"])+". Tối đa "+t._s(e.partTip["maxSize"])+" MB)")]):a("span",[t._v("Tải giấy tờ lên")])],1),t.partNoApplicantHasFile(e.partNo)&&!t.onlyView?a("v-tooltip",{attrs:{top:""}},[a("v-btn",{staticClass:"mx-0 my-0",attrs:{slot:"activator",icon:""},on:{click:function(a){t.showFilesApplicant(e.partNo)}},slot:"activator"},[a("v-badge",[a("v-icon",{attrs:{size:"24",color:"orange darken-3"}},[t._v("folder")])],1)],1),a("span",[t._v("Giấy tờ đã nộp")])],1):t._e()],1):t._e()],1)],1):t._e()],1)})),a("v-dialog",{attrs:{"max-width":"400",transition:"fade-transition",persistent:""},model:{value:t.dialogAddOtherTemp,callback:function(e){t.dialogAddOtherTemp=e},expression:"dialogAddOtherTemp"}},[a("v-card",[a("v-form",{ref:"form",attrs:{"lazy-validation":""},model:{value:t.valid,callback:function(e){t.valid=e},expression:"valid"}},[a("v-toolbar",{attrs:{dark:"",color:"primary"}},[a("v-toolbar-title",[t._v("Tên giấy tờ")]),a("v-spacer"),a("v-btn",{attrs:{icon:"",dark:""},nativeOn:{click:function(e){return t.cancelDialog(e)}}},[a("v-icon",[t._v("close")])],1)],1),a("v-card-text",{staticClass:"pb-0 pt-4"},[a("v-layout",{attrs:{wrap:""}},[a("v-flex",{staticClass:"px-2 pb-3 fix__label",attrs:{xs12:""}},[a("v-text-field",{attrs:{label:"Tên giấy tờ:",rules:[function(t){return!!t||"Bạn phải điền tên giấy tờ."}],required:""},on:{change:function(e){t.otherDossierTemplate=String(t.otherDossierTemplate).trim()}},model:{value:t.otherDossierTemplate,callback:function(e){t.otherDossierTemplate=e},expression:"otherDossierTemplate"}})],1)],1)],1),a("v-card-actions",[a("v-spacer"),a("v-btn",{attrs:{color:"red darken-3",flat:"flat",loading:t.loadingAddOther},nativeOn:{click:function(e){return t.cancelDialog(e)}}},[t._v("\n              Quay lại\n              "),a("span",{attrs:{slot:"loader"},slot:"loader"},[t._v("Loading...")])]),a("v-btn",{attrs:{color:"primary",flat:"flat",loading:t.loadingAddOther},nativeOn:{click:function(e){return t.addOtherTemplate(e)}}},[t._v("\n              Đồng ý\n              "),a("span",{attrs:{slot:"loader"},slot:"loader"},[t._v("Loading...")])])],1)],1)],1)],1)],2),a("v-dialog",{staticStyle:{overflow:"hidden"},attrs:{"max-width":"900",transition:"fade-transition"},model:{value:t.dialogPDF,callback:function(e){t.dialogPDF=e},expression:"dialogPDF"}},[a("v-card",[a("v-toolbar",{attrs:{dark:"",color:"primary"}},[a("v-toolbar-title",[t.pdfEform?a("span",[t._v("Bản in đã khai trực tuyến")]):a("span",[t._v("Tài liệu đính kèm")])]),a("v-spacer"),a("v-btn",{attrs:{icon:"",dark:""},nativeOn:{click:function(e){t.dialogPDF=!1}}},[a("v-icon",[t._v("close")])],1)],1),t.dialogPDFLoading?a("div",{staticStyle:{"min-height":"600px","text-align":"center",margin:"auto",padding:"25%"}},[a("v-progress-circular",{attrs:{size:100,width:1,color:"primary",indeterminate:""}})],1):t._e(),a("iframe",{directives:[{name:"show",rawName:"v-show",value:!t.dialogPDFLoading,expression:"!dialogPDFLoading"}],staticStyle:{overflow:"auto","min-height":"600px"},attrs:{id:"dialogPDFPreview"+t.id,src:"",type:"application/pdf",width:"100%",height:"100%",frameborder:"0"}})],1)],1)],1)},ce=[],le=a("5c68"),de=le["a"],ue=a("b56d"),he=Object(p["a"])(de,re,ce,!1,null,null,null),pe=he.exports;g()(he,{VAutocomplete:it["a"],VBadge:ft["a"],VBtn:_["a"],VCard:y["a"],VCardActions:_t["a"],VCardText:_t["b"],VDialog:Tt["a"],VExpansionPanel:Yt["a"],VExpansionPanelContent:Jt["a"],VFlex:D["a"],VForm:xt["a"],VIcon:T["a"],VLayout:x["a"],VProgressCircular:w["a"],VSelect:ue["a"],VSpacer:Nt["a"],VTextField:st["a"],VToolbar:It["a"],VToolbarTitle:At["b"],VTooltip:wt["a"]});var me=a("c199"),ge=a("f374"),ve=a("a9a9"),fe=a("b799");function _e(t,e){return De(t)||Ce(t,e)||ye()}function ye(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function Ce(t,e){var a=[],i=!0,o=!1,n=void 0;try{for(var s,r=t[Symbol.iterator]();!(i=(s=r.next()).done);i=!0)if(a.push(s.value),e&&a.length===e)break}catch(c){o=!0,n=c}finally{try{i||null==r["return"]||r["return"]()}finally{if(o)throw n}}return a}function De(t){if(Array.isArray(t))return t}L.a.options={closeButton:!0,timeOut:"5000"};var Te={props:["index","id","formCode"],components:{"thong-tin-chu-ho-so-cong-van":ne["a"],"thong-tin-chu-ho-so":se["a"],"thanh-phan-ho-so":pe,"thanh-phan-ho-so-1":pe,"thanh-phan-ho-so-2":pe,"thong-tin-chung":me["a"],"thu-phi":ge["a"],"dich-vu-chuyen-phat-ket-qua":ve["a"],"tiny-pagination":B["a"],"thong-tin-cong-van":fe["a"]},data:function(){return{valid_tenHoSo:!1,detailGroup:!1,dialogImportDosier:!1,dialogSelectDosier:!1,dialogAddDossier:!1,dossiersSelectAdd:[],selectedDossierAdd:[],selectMultiplePage:[],selectedDoAction:[],groupDossierList:[],groupDossierSelected:"",dossierNoKey:"",hosoDatasPage:1,hosoDatasTotal:0,hosoTotalPage:0,numberPerPageAddDossier:5,dossiersIntoGroup:[],dossiersIntoGroupRender:[],dossiersIntoGroupRenderTemp:[],selected:[],selectedAttach:[],stepList:[],stepSelected:"",btnDynamics:[],processOptionSelected:"",thongTinNhomHoSo:"",validTNHS:!1,groupDossierNameCreate:"",currentDossierIntoGroup:"",dossierId:"",mark:!0,stateEditSample:!1,tiepNhanState:!1,activeAddGroup:!1,thongTinChiTietHoSo:{},payments:{},paymentProfile:{},briefNote:"",receiveDateEdit:"",editableDate:!1,dueDateEdit:"",viaPortalDetail:0,showThuPhi:!1,inputTypes:[6],outputTypesGroup:[7],inputTypesIntoGroup:[1,3,6],outputTypes:[2],sampleCount:0,isMobile:!1,loadingAction:!1,dialogAddGroup:!1,activeAddDossierIntoGroup:!1,headersCV:[{text:"STT",align:"center",sortable:!1,class:"text-xs-center"},{text:"Mã hồ sơ",align:"center",sortable:!1,class:"text-xs-center"},{text:"Họ và tên",align:"center",sortable:!1,class:"text-xs-center"},{text:"Năm sinh",align:"center",sortable:!1,class:"text-xs-center"},{text:"Nơi đăng ký HKTT",align:"center",sortable:!1,class:"text-xs-center"},{text:"Số tháng được hưởng",align:"center",sortable:!1,class:"text-xs-center"},{text:"Mức trợ cấp (đồng/tháng)",align:"center",sortable:!1,class:"text-xs-center"},{text:"Trạng thái",align:"center",sortable:!1,class:"text-xs-center"},{text:"Ghi chú",align:"center",sortable:!1,class:"text-xs-center"},{text:"Thao tác",align:"center",sortable:!1,class:"text-xs-center"}],headers:[{text:"STT",align:"center",sortable:!1,class:"text-xs-center"},{text:"Mã hồ sơ",align:"center",sortable:!1,class:"text-xs-center"},{text:"Tên chủ hồ sơ",align:"center",sortable:!1,class:"text-xs-center"},{text:"Trạng thái",align:"center",sortable:!1,class:"text-xs-center"}],filesGroupDossier:[],countDossierProgress:0,listDossierImport:[],progressUploadFile:!1,loadingImportDossier:!1,dossierError:[],dossierSuccess:[],totalDossier:0,valueProgress:0,countDossierSuccess:0,dossierNameCongVan:"",pagination:{rowsPerPage:15,page:1},tphsCV:"",totalFee:0,addFormNewInGroup:"",metaDataGroupDossier:"",createFileCongVan:"",postStepCodeCongVan:"",donvinhanCollection:"",requiredCVDenGroupId:"",requiredCVDenGovCode:"",hasTaoQuyetDinh:!1,dialogPDF:!1,congvanguiden:!1,mauCongVan:!1,activeDeleteCongVan:!1,rules:{required:function(t){return!!t||"Thông tin bắt buộc"},email:function(t){t=t.trim();var e=/^(([^<>()[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/;return e.test(t)||"Địa chỉ Email không hợp lệ"},passWord:function(t){var e=/^(?![0-9]{6,})[0-9a-zA-Z]{6,}$/;return e.test(t)||"Gồm các ký tự 0-9, a-z và ít nhất 6 ký tự"},telNo:function(t){var e=/^([0-9]{0,})$/;return"string"===typeof t&&(t=t.trim()),e.test(t)||"Gồm các ký tự 0-9"},varchar100:function(t){return!t||(t=String(t).trim(),t.length<=100||"Không được nhập quá 100 ký tự")},varchar255:function(t){return!t||(t=String(t).trim(),t.length<=255||"Không được nhập quá 255 ký tự")},varchar500:function(t){return!t||(t=String(t).trim(),t.length<=500||"Không được nhập quá 500 ký tự")},varchar5000:function(t){return!t||(t=String(t).trim(),t.length<=5e3||"Không được nhập quá 5000 ký tự")}}}},computed:{loading:function(){return this.$store.getters.loading},originality:function(){var t=this;return t.getOriginality()},dichVuChuyenPhatKetQua:function(){return this.$store.getters.dichVuChuyenPhatKetQua},thongTinChuHoSo:function(){return this.$store.getters.thongTinChuHoSo},filesAdd:function(){return this.$store.getters.getFilesAdd},activeAddFileGroup:function(){return this.$store.getters.activeAddFileGroup},menuConfigs:function(){return this.$store.getters.getMenuConfigsTodo}},created:function(){var t=this;t.$nextTick((function(){t.$router.history.current.query;var e=t.id;t.menuConfigs&&t.menuConfigs.length>0&&(t.addFormNewInGroup=t.menuConfigs[t.index]["tableConfig"].hasOwnProperty("addFormNewInGroup")?t.menuConfigs[t.index]["tableConfig"]["addFormNewInGroup"]:""),e&&t.getDetaiGroup(e)}))},beforeDestroy:function(){var t=d()('meta[name="viewport"]');t.attr("content","initial-scale=1.0, width=device-width"),"undefined"!==typeof window&&window.removeEventListener("resize",this.onResize,{passive:!0})},mounted:function(){var t=this;t.thongTinNhomHoSo&&"NEW_GROUP"===t.formCode&&("NEW_GROUP"===t.formCode&&t.$refs.thongtinnguoinophoso.initData(t.thongTinNhomHoSo),t.$refs.thanhphanhoso1.initData(t.thongTinNhomHoSo),t.$refs.thanhphanhoso2.initData(t.thongTinNhomHoSo),t.filesGroupDossier=t.$refs.thanhphanhoso1.getFilesGroupDossier(),console.log("fileItems 1",t.filesGroupDossier))},watch:{isMobile:function(t){var e=d()('meta[name="viewport"]');t?e.attr("content",""):e.attr("content","initial-scale=1.0, width=device-width")},$route:function(t,e){var a=this,i=(t.query,a.id);a.addFormNewInGroup=a.menuConfigs[a.index]["tableConfig"].hasOwnProperty("addFormNewInGroup")?a.menuConfigs[a.index]["tableConfig"]["addFormNewInGroup"]:"",i&&a.getDetaiGroup(i)},dossiersIntoGroupRender:function(t){var e=this,a=0;if(t&&t.length>0){for(var i=0;i<t.length;i++){console.log(i,t[i]);var o=e.getMetaData(t[i]),n=0;if(o){var s=!(!o.hasOwnProperty("trocapmotlan")||!o["trocapmotlan"]);n=s?Number(o["subsidy"]):Number(o["yearPayment"])*Number(o["subsidy"]),a+=n}}e.dossiersIntoGroupRenderTemp=t.slice(0,e.pagination.rowsPerPage),e.totalFee=a}else e.dossiersIntoGroupRenderTemp=[],e.totalFee=0},thongTinNhomHoSo:function(t){var e=this;if(t&&("NEW_GROUP"===e.formCode&&("NEW_GROUP"===e.formCode&&e.$refs.thongtinnguoinophoso.initData(t),e.$refs.thanhphanhoso1.initData(t),e.$refs.thanhphanhoso2.initData(t),e.$store.dispatch("loadDossierFiles",t.dossierId).then((function(t){e.filesGroupDossier=t})).catch((function(t){}))),"NEW_GROUP_CV"===e.formCode||"NEW_GROUP_CV_DI"===e.formCode)){e.$refs.thongtincongvan.initData(t);t.dossierTemplateNo;e.$store.dispatch("loadDossierFiles",t.dossierId).then((function(t){e.filesGroupDossier=t})).catch((function(t){}))}},selected:function(t){},activeAddFileGroup:function(t){var e=this;console.log("val activeAddFileGroup",t),e.stepSelected="",e.dialogSelectDosier=t},selectMultiplePage:{handler:function(t){var e=this;if(t.length>0)for(var a in e.selectedDoAction=[],t)e.selectedDoAction=e.selectedDoAction.concat(t[a]["selected"]);else e.selectedDoAction=[]},deep:!0},menuConfigs:{handler:function(t){var e=this;t.length&&(e.addFormNewInGroup=e.menuConfigs[parseInt(e.index)]["tableConfig"].hasOwnProperty("addFormNewInGroup")?e.menuConfigs[e.index]["tableConfig"]["addFormNewInGroup"]:"")},deep:!0}},methods:{onResize:function(){var t=this,e=window.innerWidth<1024;t.isMobile=e},paggingData:function(t){var e=this;e.pagination.page=t.page;var a=e.pagination.page*e.pagination.rowsPerPage-e.pagination.rowsPerPage,i=e.pagination.page*e.pagination.rowsPerPage;e.dossiersIntoGroupRenderTemp=e.dossiersIntoGroupRender.slice(a,i)},paggingDataDossierAdd:function(t){var e=this;e.hosoDatasPage=t.page,e.searchDossierToAdd()},getGroupDossier:function(){var t=this,e=t.$router.history.current.query,a={service:e.serviceCode?e.serviceCode:"",template:e.template_no?e.template_no:"",agency:e.govAgencyCode?e.govAgencyCode:""};t.$store.dispatch("getGroupDossier",a).then((function(e){t.groupDossierList=e}))},getDetaiGroup:function(t){var e=this;e.$store.dispatch("getDetailDossier",t).then((function(a){e.thongTinNhomHoSo=a,e.activeAddDossierIntoGroup=!1,e.activeAddGroup=!0,e.groupDossierSelected=a,e.metaDataGroupDossier=e.getMetaData(e.thongTinNhomHoSo),e.donvinhanCollection=e.metaDataGroupDossier.hasOwnProperty("donvinhancollection")?e.metaDataGroupDossier.donvinhancollection:"",e.requiredCVDenGroupId=e.metaDataGroupDossier.hasOwnProperty("requiredCVDenGroupId")?e.metaDataGroupDossier.requiredCVDenGroupId:"",e.requiredCVDenGovCode=e.metaDataGroupDossier.hasOwnProperty("requiredCVDenGovCode")?e.metaDataGroupDossier.requiredCVDenGovCode:"",e.hasTaoQuyetDinh=!!e.metaDataGroupDossier.hasOwnProperty("taoQuyetDinh")&&e.metaDataGroupDossier.taoQuyetDinh;var i={groupDossierId:t};e.dossiersIntoGroup=[],e.dossiersIntoGroupRender=[],e.$store.dispatch("getDossiersIntoGroup",i).then((function(t){if(e.dossiersIntoGroup=t,(e.metaDataGroupDossier.hasOwnProperty("congvandagui")&&e.metaDataGroupDossier.congvandagui||!e.metaDataGroupDossier.hasOwnProperty("congvandagui"))&&(e.activeDeleteCongVan=0===e.dossiersIntoGroup.length),e.$store.commit("setSelectDossierGroup",e.dossiersIntoGroup),e.dossiersIntoGroup.length>0){var a=[],i=function(t){0===a.filter((function(a){return String(a["stepCode"])===String(e.dossiersIntoGroup[t]["stepCode"])})).length&&a.push({stepCode:e.dossiersIntoGroup[t]["stepCode"],stepName:e.dossiersIntoGroup[t]["stepName"]})};for(var o in e.dossiersIntoGroup)i(o);e.stepList=a}e.dossiersIntoGroupRender=e.dossiersIntoGroup}));var o={dossierTemplateNo:e.thongTinNhomHoSo.dossierTemplateNo};e.$store.dispatch("loadDossierFormTemplates",o).then((function(t){e.tphsCV=t["dossierParts"],e.getDetailActionCongVan(),e.mauCongVan=!(!t["newFormScript"]||!t["newFormScript"].startsWith("MAU_CV_"))&&t["newFormScript"]}))}))},changeStep:function(){var t=this;setTimeout((function(){t.stepSelected?(t.dossiersIntoGroupRender=t.dossiersIntoGroup.filter((function(e){return String(e["stepCode"])===String(t.stepSelected["stepCode"])})),t.$store.dispatch("pullProcessSteps",t.stepSelected).then((function(e){e.hasOwnProperty("menuGroup")&&e.menuGroup?t.$store.dispatch("getDetailMenuConfig",e).then((function(e){if(e.hasOwnProperty("buttonConfig")&&e.buttonConfig)try{t.btnDynamics=JSON.parse(e["buttonConfig"])["buttons"],t.btnDynamics=t.btnDynamics.filter((function(t){return"ACTIONS"===t["form"]})),t.btnDynamics=t.btnDynamics.filter((function(e){return!e.hasOwnProperty("onlySteps")||e.hasOwnProperty("onlySteps")&&e["onlySteps"].filter((function(e){return String(e)===String(t.stepSelected["stepCode"])})).length>=0})),console.log("btnDynamics dossierGroup",t.btnDynamics)}catch(a){t.btnDynamics=[]}else t.btnDynamics=[]})):t.btnDynamics=[]}))):(t.dossiersIntoGroupRender=t.dossiersIntoGroup,t.btnDynamics=[])}),200)},btnActionEvent:function(t,e){var a=this;a.selected&&0!==a.selected.length?a.$store.dispatch("loadActionActive",t).then((function(){a.$store.dispatch("loadDossierSelected",a.selected).then((function(){var e=a.selected.map((function(t){return t.dossierId})).join(","),i=a.$router.history.current.query;i["dossiers"]=e,i["actionActive"]=JSON.stringify(t),a.$router.push({path:"/danh-sach-ho-so/0/xu-ly-ho-so",query:i})}))})):L.a.error("Chọn hồ sơ để thực hiện")},showDossierToAdd:function(){var t=this;t.hosoDatasPage=1,t.dossierNoKey="",t.selectMultiplePage=[],t.searchDossierToAdd(),t.dialogAddDossier=!0},putGroupDossier:function(t){var e=this,a=e.$router.history.current.params;e.$router.history.current.query;if("NEW_GROUP"===e.formCode){var i=this.$refs.thongtinnguoinophoso?this.$refs.thongtinnguoinophoso.thongTinNguoiNopHoSo:{},o=e.$refs.thongtinnguoinophoso.showValid();if(o["validForm"]){var n=!1;if(o["validApplicant"])n=!0;else{var s=confirm(o["message"]+" Bạn có muốn tiếp tục?");s&&(n=!0)}if(n){var r=Object.assign(e.thongTinNhomHoSo,i);r["dossierId"]=e.thongTinNhomHoSo.dossierId,r["originality"]=e.thongTinNhomHoSo.originality,r["dossierName"]=e.thongTinNhomHoSo.dossierName,console.log("data put groupDossier --\x3e",r),setTimeout((function(){e.$store.dispatch("putDossier",r).then((function(t){L.a.clear(),L.a.success("Cập nhật thành công")})).catch((function(t){L.a.clear(),L.a.error("Yêu cầu của bạn thực hiện thất bại.")}))}),500)}}}if("NEW_GROUP_CV"===e.formCode||"NEW_GROUP_CV_DI"===e.formCode){var c=this.$refs.thongtincongvan.getThongTinCongVan(),l=c;l.dueDate=e.dateTimeView(c.dueDate);var d=!0;"NEW_GROUP_CV"===e.formCode&&(d=c.validation),d="NEW_GROUP_CV_DI"===e.formCode&&"save"===t||c.validation,d?(e.loadingAction=!0,e.$store.dispatch("putDossierCongVan",l).then((function(i){var o;if("NEW_GROUP_CV"===e.formCode)o=c.metaData;else{var n=e.currentcyToString(String(e.totalFee));if("save"===t){var s={congvandagui:!1,donvinhan:"",tendonvinhan:"",donvinhandraf:c.metaData.donvinhan,tendonvinhandraf:c.metaData.tendonvinhan,totalSubsidy:e.totalFee,totalSubsidyText:n};o=Object.assign(c.metaData,s)}else o=Object.assign(c.metaData,{congvandagui:!0,totalSubsidy:e.totalFee,totalSubsidyText:n})}var r={id:c.dossierId,data:JSON.stringify(o)};"NEW_GROUP_CV"===e.formCode?e.$store.dispatch("putMetaData",r).then((function(){e.loadingAction=!1,e.$router.push({path:"/danh-sach-ho-so/"+a.index+"?"+window.location.href.split("?")[1]})})).catch((function(){e.loadingAction=!1,L.a.clear(),L.a.error("Yêu cầu của bạn thực hiện thất bại")})):e.$store.dispatch("putMetaData",r).then((function(){var i={groupDossierId:c.dossierId,dossierId:""},o=[];for(var n in e.dossiersIntoGroupRender)o.push(e.dossiersIntoGroupRender[n]["dossierId"]);if(i["dossierId"]=o.toString(),e.createFileCongVan){var s={dossierId:e.thongTinNhomHoSo["dossierId"],partNo:e.createFileCongVan};e.$store.dispatch("loadFormData",s).then((function(o){var n=JSON.parse(o),s=Object.assign(n,{tp:e.createFileCongVan,dossierId:e.thongTinNhomHoSo["dossierId"]});e.$store.dispatch("postEformCallBack",s).then((function(o){"save"===t?e.$store.dispatch("postDossierIntoGroup",i).then((function(t){e.loadingAction=!1,L.a.success("Lưu công văn thành công"),e.$router.push({path:"/danh-sach-ho-so/"+a.index+"?"+window.location.href.split("?")[1]})})).catch((function(){e.loadingAction=!1})):e.processAction()}))})).catch((function(t){}))}else"save"===t?e.$store.dispatch("postDossierIntoGroup",i).then((function(t){e.loadingAction=!1,L.a.success("Lưu công văn thành công"),e.$router.push({path:"/danh-sach-ho-so/"+a.index+"?"+window.location.href.split("?")[1]})})).catch((function(){e.loadingAction=!1})):e.processAction()})).catch((function(t){e.loadingAction=!1,L.a.clear(),L.a.error("Yêu cầu của bạn thực hiện thất bại")}))})).catch((function(t){e.loadingAction=!1,L.a.clear(),L.a.error("Yêu cầu của bạn thực hiện thất bại")}))):(e.loadingAction=!1,L.a.clear(),L.a.error("Vui lòng điền đầy đủ các thông tin bắt buộc"))}},createDossierIntoGroup:function(){var t=this;t.$router.history.current.query;t.activeAddGroup=!1,t.activeAddDossierIntoGroup=!0;var e={serviceCode:t.thongTinNhomHoSo.serviceCode,govAgencyCode:t.thongTinNhomHoSo.govAgencyCode,templateNo:t.thongTinNhomHoSo.dossierTemplateNo,originality:t.originality,groupDossierId:t.thongTinNhomHoSo.dossierId,dossierId:""};t.$store.dispatch("postDossier",e).then((function(a){t.currentDossierIntoGroup=a,e.dossierId=a.dossierId,setTimeout((function(){a["editable"]=!1,"NEW_GROUP_CV"!==t.formCode&&"NEW_GROUP_CV_DI"!==t.formCode||t.$refs.thongtinchuhosocongvan.initData(a),""===a.dossierStatus?t.$store.dispatch("pullNextactions",a).then((function(e){if(e){var i=e.filter((function(t){return 1100===t.actionCode||"1100"===t.actionCode}));t.$store.dispatch("processPullBtnDetail",{dossierId:a.dossierId,actionId:i[0]?i[0].processActionId:""}).then((function(e){a["editable"]=!(!e||!e.receiving)&&e.receiving.editable,a["receivingDuedate"]=e&&e.receiving&&e.receiving.dueDate?e.receiving.dueDate:null,a["receivingDate"]=e&&e.receiving?e.receiving.receiveDate:"",t.editableDate=!(!e||!e.receiving)&&e.receiving.editable,t.dueDateEdit=e&&e.receiving&&e.receiving.dueDate?e.receiving.dueDate:"",t.receiveDateEdit=e&&e.receiving?e.receiving.receiveDate:"",e&&e.payment&&e.payment.requestPayment>0&&(t.showThuPhi=!0,t.payments=e.payment)}))}})):t.$refs.thongtinchunghoso&&(console.log("has thong tin chung ho so"),t.$refs.thongtinchunghoso.initData(a));var e=t.filesGroupDossier.filter((function(t){return 6===t["dossierPartType"]||7===t["dossierPartType"]}));if(e.length>0){var i=e.map((function(t){return t.dossierFileId})).toString(),o={dossierIds:a.dossierId,dossierFileId:i};t.$store.dispatch("uploadFileDossierGroup",o).then((function(e){setTimeout((function(){t.$refs.thanhphanhoso.initData(a)}),300)}))}else t.$refs.thanhphanhoso.initData(a);if(t.viaPortalDetail=a.viaPostal,a.viaPostal>0){var n=a.address?a.address+", "+a.wardName+" - "+a.districtName+" - "+a.cityName:"";"NEW"===t.formCode&&1===t.originality&&(a["postalAddress"]=n,a["postalTelNo"]=t.thongTinChuHoSo["contactTelNo"]),t.$store.commit("setDichVuChuyenPhatKetQua",a)}}),300),t.$store.dispatch("postDossierIntoGroup",e).then((function(t){}))})).catch((function(t){}))},uploadfileDossierImport:function(t){var e=this,a=e.$refs.thanhphanhoso1.dossierTemplateItems;a=a.filter((function(t){return 1===t["partType"]||6===t["partType"]})),e.$store.dispatch("loadDossierFiles",e.thongTinNhomHoSo["dossierId"]).then((function(t){var a=[];for(var i in t)1!==t[i]["dossierPartType"]&&6!==t[i]["dossierPartType"]||a.push(t[i]["dossierFileId"]);e.dossierFiles=a?a.toString():"",e.progressUploadFile=!0;var o={};e.countDossierProgress=0,e.valueProgress=0,e.listDossierImport=[],e.dossierError=[],e.dossierSuccess=[],e.countDossierSuccess=0,o["dossierId"]=e.thongTinNhomHoSo["dossierId"],o["referenceUid"]=e.thongTinNhomHoSo["referenceUid"],o["selector"]="dossierImport",o["partTip"]={tip:"",maxSize:10,extensions:"xlsx,xls"};d()("#dossierImport")[0].files[0];e.$store.dispatch("uploadDossierFileImport",o).then((function(t){if(e.progressUploadFile=!1,e.totalDossier=t.total,t.total){var a=confirm("Bạn có chắc chắn thực hiện hành động này?");a&&(e.dialogImportDosier=!0,e.listDossierImport=t.data,console.log(t.data),setTimeout((function(){if(e.listDossierImport.length){e.loadingImportDossier=!0;var t=[];e.listDossierImport.forEach((function(a,i){setTimeout((function(){t.push(e.doCreateDossier(a,i)),t.length===e.listDossierImport.length&&Promise.all(t).then((function(t){e.loadingImportDossier=!1,console.log("dossierSuccess 1123412",e.dossierSuccess);var a={groupDossierId:e.thongTinNhomHoSo.dossierId,dossierId:""},i=[];for(var o in e.dossierSuccess)i.push(e.dossierSuccess[o]["dossierId"]);a["dossierId"]=i.toString(),console.log("dataAddGroup",a),e.$store.dispatch("postDossierIntoGroup",a).then((function(t){0===e.dossierError.length&&(L.a.success("Import hồ sơ thành công"),e.getDetaiGroup(e.thongTinNhomHoSo.dossierId),e.dialogImportDosier=!1)}))})).catch((function(t){e.loadingImportDossier=!1}))}),1e3*i)}))}}),300))}else e.listDossierImport=[],L.a.error("Dữ liệu bị lỗi, vui lòng kiểm tra lại!")})).catch((function(t){e.dialogImportDosier=!1,e.progressUploadFile=!1,L.a.error("Tải file lỗi, vui lòng thử lại!")}))})).catch((function(t){}))},importIntoGroup:function(){document.getElementById("dossierImport").value="",document.getElementById("dossierImport").click()},addDossierAgain:function(){var t=this;if(t.countDossierProgress=t.dossierSuccess.length,t.valueProgress=100*t.countDossierProgress/t.totalDossier,console.log("valueProgress++++",t.valueProgress),t.countDossierSuccess=t.dossierSuccess.length,t.dossierError.length){t.loadingImportDossier=!0;var e=[];t.dossierError.forEach((function(a,i){setTimeout((function(){e.push(t.doCreateDossier(a,i)),e.length===t.dossierError.length&&Promise.all(e).then((function(e){t.loadingImportDossier=!1,console.log("dossierSuccess 1",t.dossierSuccess);var a={groupDossierId:t.thongTinNhomHoSo.dossierId,dossierId:""},i=[];for(var o in t.dossierSuccess)i=i.push(t.dossierSuccess[o]["dossierId"]),a["dossierId"]=i.toString();t.$store.dispatch("postDossierIntoGroup",a).then((function(e){0===t.dossierError.length&&(L.a.success("Import hồ sơ thành công"),t.getDetaiGroup(t.thongTinNhomHoSo.dossierId),t.dialogImportDosier=!1)}))})).catch((function(e){t.loadingImportDossier=!1}))}),1e3*i)}))}},doCreateDossier:function(t,e){var a=this;return new Promise((function(i,o){var n=a,s=a.$refs.thanhphanhoso1.dossierTemplateItems,r={},c=t,l="",d="",u=n.$refs.thongtinnguoinophoso;if(r["serviceCode"]=n.thongTinNhomHoSo["serviceCode"],r["govAgencyCode"]=n.thongTinNhomHoSo["govAgencyCode"],r["dossierTemplateNo"]=n.thongTinNhomHoSo["dossierTemplateNo"],r["originality"]=n.originality,s&&s.length){var h=s.map((function(t){return{partNo:t.partNo,partName:t.partName,fileMark:t.fileMark}}));l=JSON.stringify(h)}else l="";if(r["dossierMarks"]=l,u&&u["thongTinNguoiNopHoSo"]){var p=u["thongTinNguoiNopHoSo"];c=Object.assign(c,p)}r["dossiers"]=c?JSON.stringify(c):"",r["dossierFiles"]=n.dossierFiles?n.dossierFiles:"",r["payment"]=d?JSON.stringify(d):"",n.$store.dispatch("importDossier",r).then((function(t){n.countDossierProgress++,n.valueProgress+=100/n.totalDossier,n.listDossierImport[e]["dossierId"]=t["dossierId"],n.listDossierImport[e]["flagError"]=!1,n.countDossierSuccess<n.listDossierImport.length&&n.countDossierSuccess++,n.calDossierErrorSuccess(),i(!0)})).catch((function(t){console.log(t),n.countDossierProgress++,n.valueProgress+=100/n.totalDossier,n.listDossierImport[e]["flagError"]=!0,n.calDossierErrorSuccess(),o(t)}))}))},calDossierErrorSuccess:function(){var t=this;t.dossierError=t.listDossierImport.filter((function(t){return t["flagError"]})),t.dossierSuccess=t.listDossierImport.filter((function(t){return!t.hasOwnProperty("flagError")||!t["flagError"]}))},tiepNhanHoSo:function(t){var e=this;e.$store.commit("setPrintPH",!1);var a=this.$refs.thongtinchuhoso.getThongTinChuHoSo(),i=this.$refs.thongtinchuhoso.getThongTinNguoiNopHoSo(),o=(this.$refs.thanhphanhoso.dossierTemplateItems,e.dichVuChuyenPhatKetQua);console.log("validate TNHS formThongtinchuhoso.validate()",e.$refs.thongtinchuhoso.showValid());var n=e.$refs.thongtinchuhoso.showValid();if(n["validForm"]){var s=!0;if(s){if(e.loadingAction=!0,!e.$refs.thanhphanhoso.validDossierTemplate())return void(e.loadingAction=!1);if(2===o.viaPostal&&!e.$refs.dichvuchuyenphatketqua.validDichVuChuyenPhat())return void(e.loadingAction=!1);var r=e.$refs.thanhphanhoso.dossierFilesItems,c=[];r&&r.forEach((function(t,a){t.eForm&&(t["dossierId"]=e.dossierId,c.push(e.$store.dispatch("putAlpacaForm",t)))})),i={sameUser:!1,delegateName:e.thongTinNhomHoSo["delegateName"],delegateCityCode:e.thongTinNhomHoSo["delegateCityCode"],delegateAddress:e.thongTinNhomHoSo["delegateAddress"],delegateDistrictCode:e.thongTinNhomHoSo["delegateDistrictCode"],delegateWardCode:e.thongTinNhomHoSo["delegateWardCode"],delegateEmail:e.thongTinNhomHoSo["delegateEmail"],delegateTelNo:e.thongTinNhomHoSo["delegateTelNo"],delegateIdNo:e.thongTinNhomHoSo["delegateIdNo"]};var l=Object.assign(a,i,o);l["dossierId"]=e.currentDossierIntoGroup.dossierId,l["sampleCount"]=e.currentDossierIntoGroup.sampleCount,l["originality"]=e.originality,e.$store.dispatch("putDossier",l).then((function(a){if(e.loadingAction=!1,"UPDATE"===e.formCode)e.goBack();else{var i=e.$store.getters.loadingInitData,o=i.user.userName?i.user.userName:"",n={};e.showThuPhi&&(n={requestPayment:e.payments["requestPayment"],paymentNote:e.payments["paymentNote"],advanceAmount:Number(e.payments["advanceAmount"].toString().replace(/\./g,"")),feeAmount:Number(e.payments["feeAmount"].toString().replace(/\./g,"")),serviceAmount:Number(e.payments["serviceAmount"].toString().replace(/\./g,"")),shipAmount:Number(e.payments["shipAmount"].toString().replace(/\./g,""))});var s={dueDate:e.editableDate&&l.dueDate?l.dueDate:e.dueDateEdit,receiveDate:e.receiveDateEdit},r={dossierId:e.currentDossierIntoGroup.dossierId,actionCode:1100,actionNote:"",actionUser:o,payload:s,security:"",assignUsers:"",payment:n,createDossiers:""};e.loadingAction=!0,e.$store.dispatch("postAction",r).then((function(a){e.loadingAction=!1,t?e.createDossierIntoGroup():(L.a.success("Thêm hồ sơ vào nhóm thành công"),e.getDetaiGroup(e.id),e.activeAddDossierIntoGroup=!1)})).catch((function(t){e.loadingAction=!1}))}})).catch((function(t){e.loadingAction=!1,L.a.clear(),L.a.error("Yêu cầu của bạn thực hiện thất bại.")}))}}},tiepNhanHoSoCongVan:function(t){var e=this,a=this.$refs.thongtinchuhosocongvan.getThongTinChuHoSo(),i=(this.$refs.thanhphanhoso.dossierTemplateItems,e.dichVuChuyenPhatKetQua),o=!0;if(o&&a.validation&&e.$refs.formTenHoSo.validate()){if(e.loadingAction=!0,!e.$refs.thanhphanhoso.validDossierTemplate())return void(e.loadingAction=!1);if(2===i.viaPostal&&!e.$refs.dichvuchuyenphatketqua.validDichVuChuyenPhat())return void(e.loadingAction=!1);var n=e.$refs.thanhphanhoso.dossierFilesItems,s=[];n&&n.forEach((function(t,a){t.eForm&&(t["dossierId"]=e.dossierId,s.push(e.$store.dispatch("putAlpacaForm",t)))})),console.log("assign=congvan",a,i);var r=Object.assign(a,i);r["dossierId"]=e.currentDossierIntoGroup.dossierId,r["sampleCount"]=e.currentDossierIntoGroup.sampleCount,r["originality"]=e.originality,r["userType"]="1",console.log("putDossierIntoCongVan",r);var c=function(){e.$store.dispatch("putDossier",r).then((function(a){if(e.loadingAction=!1,"UPDATE"===e.formCode)e.goBack();else{var i=e.$store.getters.loadingInitData,o=i.user.userName?i.user.userName:"",n={};e.showThuPhi&&(n={requestPayment:e.payments["requestPayment"],paymentNote:e.payments["paymentNote"],advanceAmount:Number(e.payments["advanceAmount"].toString().replace(/\./g,"")),feeAmount:Number(e.payments["feeAmount"].toString().replace(/\./g,"")),serviceAmount:Number(e.payments["serviceAmount"].toString().replace(/\./g,"")),shipAmount:Number(e.payments["shipAmount"].toString().replace(/\./g,""))});var s={dueDate:e.editableDate&&r.dueDate?r.dueDate:e.dueDateEdit,receiveDate:e.receiveDateEdit},c={dossierId:e.currentDossierIntoGroup.dossierId,actionCode:1100,actionNote:"",actionUser:o,payload:s,security:"",assignUsers:"",payment:n,createDossiers:""};e.loadingAction=!0,e.$store.dispatch("postAction",c).then((function(a){e.loadingAction=!1,t?e.createDossierIntoGroup():(L.a.success("Thêm hồ sơ vào nhóm thành công"),e.getDetaiGroup(e.id),e.activeAddDossierIntoGroup=!1)})).catch((function(t){e.loadingAction=!1}))}})).catch((function(t){e.loadingAction=!1,L.a.clear(),L.a.error("Yêu cầu của bạn thực hiện thất bại.")}))},l={formDataKey:{hoten:a.applicantName}};e.$store.dispatch("checkDaCapPhep",l).then((function(t){var i=!1,o=[],n=t.hasOwnProperty("data")?t.data:[];if(n=n.filter((function(t){return t.hasOwnProperty("hoten_data")&&t.hasOwnProperty("ngaysinh_data")})),n.length>0)try{var s=e.parseDate(a.birthDate);o=n.filter((function(t){return String(t.hoten_data).toLocaleLowerCase()===String(a.applicantName).toLocaleLowerCase()&&e.parseDate(t.ngaysinh_data)===s})),o&&o.length>0&&(i=!0)}catch(l){}if(i){var r=confirm("Đối tượng đã cấp phép. Bạn có muốn tiếp tục?");r?c():e.loadingAction=!1}else c()})).catch((function(t){c()}))}else e.loadingAction=!1,L.a.clear(),L.a.error("Dữ liệu không hợp lệ")},changeViapostal:function(t){this.viaPortalDetail=t?2:1},durationText:function(t,e){var a;if(1===t&&e>8){var i,o=Math.floor(e/8)+" ngày";i=e%8!==0?8*(e/8-Math.floor(e/8))+" giờ":"",a="".concat(o," ").concat(i)}else 0===t?a=e+" ngày":1===t&&e<=8&&(a=e+" giờ");return a},viewDetail:function(t,e){var a=this;a.$router.history.current.query;a.$router.push("/danh-sach-ho-so/0/chi-tiet-ho-so/"+t["dossierId"])},editDossierIntoGroup:function(t){var e=this,a=e.$router.history.current.query;a["template_no"]=t.dossierTemplateNo,a["serviceCode"]=t.serviceCode,e.$router.push({path:"/danh-sach-ho-so/0/ho-so/"+t.dossierId+"/UPDATE",query:a})},removeDossierFromGroup:function(t){var e=this,a={dossierId:t.dossierId,groupDossierId:e.thongTinNhomHoSo["dossierId"]},i=confirm("Bạn có muốn thực hiện thao tác này?");i&&e.$store.dispatch("removeDossierFromGroup",a).then((function(t){L.a.success("Yêu cầu thực hiện thành công"),setTimeout((function(){var t={groupDossierId:e.thongTinNhomHoSo["dossierId"]};e.$store.dispatch("getDossiersIntoGroup",t).then((function(t){if(e.dossiersIntoGroup=t,(e.metaDataGroupDossier.hasOwnProperty("congvandagui")&&e.metaDataGroupDossier.congvandagui||!e.metaDataGroupDossier.hasOwnProperty("congvandagui"))&&(e.activeDeleteCongVan=0===e.dossiersIntoGroup.length),e.$store.commit("setSelectDossierGroup",e.dossiersIntoGroup),e.dossiersIntoGroup.length>0){var a=[],i=function(t){0===a.filter((function(a){return String(a["stepCode"])===String(e.dossiersIntoGroup[t]["stepCode"])})).length&&a.push({stepCode:e.dossiersIntoGroup[t]["stepCode"],stepName:e.dossiersIntoGroup[t]["stepName"]}),e.stepList=a};for(var o in e.dossiersIntoGroup)i(o);e.dossiersIntoGroupRender=e.dossiersIntoGroup,e.dossiersIntoGroupRender=e.dossiersIntoGroup}e.dossiersIntoGroupRender=e.dossiersIntoGroup})).catch((function(){L.a.error("Yêu cầu thực hiện thất bại")}))}),100)}))},addFileToDossier:function(){var t=this,e=t.selectedAttach.map((function(t){return t.dossierId})).toString(),a=t.filesAdd.map((function(t){return t.dossierFileId})).toString(),i={dossierIds:e,dossierFileId:a};t.$store.dispatch("uploadFileDossierGroup",i).then((function(t){L.a.success("Đính kèm tài liệu thành công")}))},searchKeyWordDossierToAdd:function(){var t=this;t.selectMultiplePage=[],t.searchDossierToAdd()},searchDossierToAdd:function(){var t,e=this;t="NEW_GROUP_CV"===e.formCode?e.menuConfigs.filter((function(t){return t.id.startsWith("CV_DEN")}))[0]:e.menuConfigs.filter((function(t){return t.id.startsWith("CV_DI")}))[0];var a=t["tableConfig"].hasOwnProperty("apiGetDossierAddGroup")?t["tableConfig"]["apiGetDossierAddGroup"]:"",i={api:a,dossierNo:e.dossierNoKey,service:e.thongTinNhomHoSo.serviceCode,page:e.hosoDatasPage,numberPerPage:e.numberPerPageAddDossier,originality:3,sort:"dossierNo",top:"passed",order:!0,groupDossierIdHs:e.thongTinNhomHoSo.dossierId};e.metaDataGroupDossier.hasOwnProperty("requiredCVDenGroupId")&&(i=Object.assign(i,{groupDossierId:e.metaDataGroupDossier.requiredCVDenGroupId})),a?e.$store.dispatch("getHoSoAddGroup",i).then((function(t){if(e.dossiersSelectAdd=t.data,e.hosoDatasTotal=t.total,e.hosoTotalPage=Math.ceil(e.hosoDatasTotal/e.numberPerPageAddDossier),e.hosoTotalPage>0&&0===e.selectMultiplePage.length)for(var a=0;a<e.hosoTotalPage;a++){var i={selected:[],page:a+1};e.selectMultiplePage.push(i)}e.selectedDossierAdd=e.selectMultiplePage[e.hosoDatasPage-1]["selected"]})).catch((function(t){e.dossiersSelectAdd=[],e.hosoDatasTotal=0})):(e.dossiersSelectAdd=[],e.hosoDatasTotal=0)},changeSelectedDossierAdd:function(){var t=this;console.log("selectedDossierAdd",t.selectedDossierAdd),t.selectMultiplePage[t.hosoDatasPage-1]["selected"]=t.selectedDossierAdd},addMultipleDossierToGroup:function(){var t=this;console.log("selectedDoAction",t.selectedDoAction);for(var e=[],a=t.selectedDoAction.length,i=0;i<a;i++){var o=t.selectedDoAction[i]["dossierId"];e.push(o)}t.addDossierToGroup(!1,e.toString())},addDossierToGroup:function(t,e){var a=this;a.loadingAction=!0;var i={groupDossierId:a.thongTinNhomHoSo.dossierId,dossierId:e||t.dossierId};a.$store.dispatch("postDossierIntoGroup",i).then((function(o){L.a.clear(),L.a.success("Thêm hồ sơ thành công"),setTimeout((function(){a.loadingAction=!1,a.dialogAddDossier=!1,a.$store.dispatch("getDossiersIntoGroup",i).then((function(t){if(a.dossiersIntoGroup=t,(a.metaDataGroupDossier.hasOwnProperty("congvandagui")&&a.metaDataGroupDossier.congvandagui||!a.metaDataGroupDossier.hasOwnProperty("congvandagui"))&&(a.activeDeleteCongVan=0===a.dossiersIntoGroup.length),a.$store.commit("setSelectDossierGroup",a.dossiersIntoGroup),a.dossiersIntoGroup.length>0){var e=[],i=function(t){0===e.filter((function(e){return String(e["stepCode"])===String(a.dossiersIntoGroup[t]["stepCode"])})).length&&e.push({stepCode:a.dossiersIntoGroup[t]["stepCode"],stepName:a.dossiersIntoGroup[t]["stepName"]})};for(var o in a.dossiersIntoGroup)i(o);a.stepList=e}a.dossiersIntoGroupRender=a.dossiersIntoGroup}))}),500);var n=a.filesGroupDossier.filter((function(t){return 6===t["dossierPartType"]||7===t["dossierPartType"]}));if(n.length>0){var s=n.map((function(t){return t.dossierFileId})).toString(),r={dossierIds:e||t.dossierId,dossierFileId:s};a.$store.dispatch("uploadFileDossierGroup",r).then((function(t){}))}})).catch((function(){a.loadingAction=!1}))},processAction:function(){var t=this,e=t.$store.getters.loadingInitData,a=e.user.userName?e.user.userName:"",i={dossierId:t.thongTinNhomHoSo["dossierId"],actionCode:t.metaDataGroupDossier.actioncode,actionUser:a};t.dossiersIntoGroupRender.length>0?(t.loadingAction=!0,t.$store.dispatch("doActionDossierIntoGroup",i).then((function(e){t.loadingAction=!1,L.a.success("Lưu và gửi công văn thành công"),t.$router.push({path:"/danh-sach-ho-so/"+t.index,query:{renew:Math.floor(100*Math.random())+1,q:t.menuConfigs[t.index]["queryParams"]}})})).catch((function(e){t.loadingAction=!1}))):(t.loadingAction=!1,L.a.error("Công văn chưa có hồ sơ"))},getDetailActionCongVan:function(){var t=this,e={dossierId:t.thongTinNhomHoSo["dossierId"],stepCode:t.metaDataGroupDossier.stepcode,actionCode:t.metaDataGroupDossier.actioncode};t.$store.dispatch("getDetailActionCongVan",e).then((function(e){var a;if(e.createDossierFiles)for(var i=e.createDossierFiles.split(","),o=function(e){var o=i.filter((function(a){return a===t.tphsCV[e]["partNo"]}));o.length>0&&7===t.tphsCV[e]["partType"]&&t.tphsCV[e]["hasForm"]&&(a=t.tphsCV[e]["partNo"])},n=0;n<t.tphsCV.length;n++)o(n);t.createFileCongVan=a,t.postStepCodeCongVan=e.postStepCode,console.log("createFileCongVan",t.createFileCongVan)}))},createFileKqCongVan:function(t){var e=this,a={dossierId:e.thongTinNhomHoSo["dossierId"],partNo:e.createFileCongVan};e.$store.dispatch("loadFormData",a).then((function(t){var a=JSON.parse(t),i=Object.assign(a,{tp:e.createFileCongVan,dossierId:e.thongTinNhomHoSo["dossierId"]});e.$store.dispatch("postEformCallBack",i).then((function(t){}))})).catch((function(t){}))},printCongVan:function(){var t=this;t.loadingAction=!0,t.$store.dispatch("loadDossierFiles",t.thongTinNhomHoSo["dossierId"]).then((function(e){var a=e,i=a.filter((function(e){return e.dossierPartNo==t.createFileCongVan&&e.eForm&&"7"===String(e.dossierPartType)}))[0];i&&i["fileSize"]?t.$store.dispatch("viewFile",i).then((function(e){t.loadingAction=!1,t.dialogPDF=!0,document.getElementById("dialogPdfFile").src=e})).catch((function(e){t.loadingAction=!1})):(L.a.error("Bản in công văn chưa được tạo"),t.loadingAction=!1)})).catch((function(){t.loadingAction=!1}))},copyFileDossierIntoGroup:function(){var t=this,e=t.dossiersIntoGroupRender.map((function(t){return t.dossierId})).toString(),a=(t.$refs.thongtincongvan.getFileCongVan(),t.filesKq.filter((function(e){return 7===e["dossierPartType"]&&e["dossierPartNo"]===t.createFileCongVan})));if(a.length>0&&e.length>0){var i=a.map((function(t){return t.dossierFileId})).toString(),o={dossierIds:e,dossierFileId:i};t.$store.dispatch("uploadFileDossierGroup",o).then((function(t){}))}},deleteCongVan:function(){var t=this,e={dossierId:t.thongTinNhomHoSo["dossierId"]},a=confirm("Bạn có chắc chắn thực hiện xóa công văn?");a&&t.$store.dispatch("deleteDossier",e).then((function(e){L.a.success("Xóa công văn thành công"),t.$router.push({path:"/danh-sach-ho-so/"+t.index,query:{renew:Math.floor(100*Math.random())+1,q:t.menuConfigs[t.index]["queryParams"]}})})).catch((function(){}))},getMetaData:function(t){var e="";try{e=JSON.parse(t.metaData)}catch(a){}return e},checkGroupDossierIdCvDen:function(t,e,a){var i=this,o=!0;return t&&(t.split(",").length>1||1===t.split(",").length&&t.split(",")[0]!=i.thongTinNhomHoSo["dossierId"])&&(o=!1),"NEW_GROUP_CV_DI"===i.formCode&&(o=!0),"editAction"===e&&"NEW_GROUP_CV_DI"===i.formCode&&i.thongTinNhomHoSo["govAgencyCode"]!==a["govAgencyCode"]&&(o=!1),o},dateTimeView:function(t){if(t){var e=new Date(t);return"".concat(e.getDate().toString().padStart(2,"0"),"/").concat((e.getMonth()+1).toString().padStart(2,"0"),"/").concat(e.getFullYear()," | ").concat(e.getHours().toString().padStart(2,"0"),":").concat(e.getMinutes().toString().padStart(2,"0"))}return""},currency:function(t){if(t){var e=(t/1).toFixed(0).replace(".",",");return e.toString().replace(/\B(?=(\d{3})+(?!\d))/g,".")}return""},cancelAddFile:function(){},toggleAll:function(){var t=this;t.selected.length?t.selected=[]:t.selected=t.dossiersIntoGroupRender},toggleAllSelectDossierAdd:function(){var t=this;t.selectedDossierAdd.length?t.selectedDossierAdd=[]:t.selectedDossierAdd=t.dossiersSelectAdd,t.selectMultiplePage[t.hosoDatasPage-1]["selected"]=t.selectedDossierAdd,console.log("selectedDossierAdd all",t.selectedDossierAdd),console.log("selectMultiplePage all",t.selectMultiplePage)},toggleAllSelectDialog:function(){var t=this;console.log("toggleAllSelectDialog",t.dossiersIntoGroupRender,t.selectedAttach),t.selectedAttach.length?t.selectedAttach=[]:t.selectedAttach=t.dossiersIntoGroupRender,console.log("toggleAllSelectDialog 2",t.selectedAttach)},goBack:function(){var t=this,e=t.$router.history.current.params,a=t.$router.history.current.query;t.activeAddDossierIntoGroup?(t.activeAddDossierIntoGroup=!1,t.getDetaiGroup(t.id)):t.$router.push({path:"/danh-sach-ho-so/"+e.index,query:a})},parseDate:function(t){try{var e=t.split("/"),a=_e(e,3),i=a[0],o=a[1],n=a[2];return"".concat(n,"-").concat(o.padStart(2,"0"),"-").concat(i.padStart(2,"0"))}catch(s){return""}},currentcyToString:function(t){var e,a,i,o="",n=!1,s=new Array(32);while(t.length>0&&"0"==t.charAt(0))t=t.substring(1,t.length);if(a=t.length,a>28)return"So khong hop le";for(var r=1;r<=a;r++)t=t.replace(",","");a=t.length;for(r=1;r<=a;r++)s[r]=parseInt(t.charAt(r-1));for(r=1;r<=a;r++){if((a-r)%3==2&&0==s[r]&&a-r>=2&&(0==s[r+1]&&0==s[r+2]||(o+="không ")),2==s[r]&&(o+="hai "),3==s[r]&&(o+="ba "),6==s[r]&&(o+="sáu "),7==s[r]&&(o+="bảy "),8==s[r]&&(o+="tám "),9==s[r]&&(o+="chín "),4==s[r]&&(r>1&&(a-r)%3==0&&s[r-1]>1?o+="tư ":o+="bốn "),5==s[r]&&(r>1&&(a-r)%3==0&&0!=s[r-1]?o+="lăm ":o+="năm "),1==s[r]&&((a-r)%3==1?o+="mười ":(a-r)%3==0&&r>1&&s[r-1]>1?o+="mốt ":o+="một "),(a-r)%3==1&&0!=s[r]&&1!=s[r]&&(o+="mươi "),(a-r)%3==1&&0==s[r]&&0!=s[r+1]&&(o+="linh "),(a-r)%3!=2||0==s[r+1]&&0==s[r+2]||(o+="trăm "),r+2<=a&&0!=s[r]&&(a-r)%3==2&&0==s[r+1]&&0==s[r+2]&&(o+="trăm "),a-r==3&&(o+="nghìn "),a-r==6&&(o+="triệu "),a-r==9&&(o+="tỷ "),a-r==12){for(n=!0,e=r+1;r<a;r++)0!=s[r+1]&&(n=!1);o+=0==n?"nghìn ":"nghìn tỷ "}if(a-r==15&&(o+="triệu tỷ "),a-r==18&&(o+="tỷ tỷ "),a-r==21&&(o+="nghìn tỷ tỷ "),a-r==24&&(o+="triệu tỷ tỷ "),a-r==27&&(o+="tỷ tỷ tỷ "),a-r==30&&(o+="nghìn tỷ tỷ "),(a-r)%3==2&&0==s[r]&&0==s[r+1]&&0==s[r+2]&&(r+=2),(a-r)%3==0)for(i=1,e=r+1;e<=a;e++)0!=s[e]&&(i=0);if(1==i)break}""==o&&(o="không ");while(","==o.charAt(o.length))o=o.substring(0,o.length-1);return o=o.charAt(0).toUpperCase()+o.substring(1,o.length),"So khong hop le"!=o?o+="đồng chẵn":o=o,o}}},xe=Te,be=a("e0c7"),Se=Object(p["a"])(xe,ie,oe,!1,null,null,null),Ne=Se.exports;g()(Se,{VBtn:_["a"],VCard:y["a"],VCardActions:_t["a"],VCardText:_t["b"],VCheckbox:yt["a"],VDataTable:Dt["a"],VDialog:Tt["a"],VExpansionPanel:Yt["a"],VExpansionPanelContent:Jt["a"],VFlex:D["a"],VForm:xt["a"],VIcon:T["a"],VLayout:x["a"],VProgressCircular:w["a"],VSelect:ue["a"],VSpacer:Nt["a"],VSubheader:be["a"],VTab:Xt["a"],VTabs:Zt["a"],VTextField:st["a"],VTextarea:Pt["a"],VToolbar:It["a"],VToolbarTitle:At["b"],VTooltip:wt["a"]});var Pe=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"form-chitiet"},[t.viewScript?a("div",[t.loadingForm?a("div",{staticClass:"text-xs-center mt-5"},[a("v-progress-circular",{attrs:{size:50,color:"#dedede",indeterminate:""}})],1):a("div",[a("div",{staticClass:"row-header"},[t._m(0),a("div",{staticClass:"layout row wrap header_tools row-blue"},[a("div",{staticClass:"flex xs8 sm10 pl-3 text-ellipsis text-bold",attrs:{title:t.thongTinChiTietHoSo.serviceName}},[t._v("\n            "+t._s(t.thongTinChiTietHoSo.serviceName)+"\n          ")]),a("div",{staticClass:"flex xs4 sm2 text-right",staticStyle:{"margin-left":"auto"}},[a("v-btn",{staticClass:"my-0 mx-0 btn-border-left",attrs:{flat:"","active-class":"temp_active"},on:{click:t.goBack}},[a("v-icon",{attrs:{size:"18"}},[t._v("reply")]),t._v("  \n              Quay lại\n            ")],1)],1)])]),a("v-card",{attrs:{flat:"",color:"#fff"}},[a("div",{staticClass:"mb-5 pt-0",attrs:{id:"formScriptTemplate"}})])],1)]):a("div",[t.loading?a("content-placeholders",{staticClass:"mt-3"},[a("content-placeholders-text",{attrs:{lines:1}})],1):a("div",{staticClass:"row-header"},[a("div",{staticClass:"background-triangle-big"},[a("span",[t._v("CHI TIẾT HỒ SƠ")])]),a("div",{staticClass:"layout row wrap header_tools row-blue"},[a("div",{staticClass:"flex pl-3 text-ellipsis text-bold",staticStyle:{width:"calc(100% - 100px)"},attrs:{title:t.thongTinChiTietHoSo.serviceName}},[t._v("\n          "+t._s(t.thongTinChiTietHoSo.serviceName)+"\n        ")]),a("div",{staticClass:"flex text-right",staticStyle:{"margin-left":"auto",width:"100px"}},[a("v-btn",{staticClass:"my-0 mx-0 btn-border-left",attrs:{flat:"","active-class":"temp_active"},on:{click:t.goBack}},[a("v-icon",{attrs:{size:"18"}},[t._v("reply")]),t._v("  \n            Quay lại\n          ")],1)],1)])]),a("v-dialog",{staticStyle:{overflow:"hidden"},attrs:{"max-width":"900",transition:"fade-transition"},model:{value:t.dialogPDF,callback:function(e){t.dialogPDF=e},expression:"dialogPDF"}},[a("v-card",[a("v-toolbar",{attrs:{dark:"",color:"primary"}},[a("v-toolbar-title",[t._v(t._s(t.titleDialogPdf))]),a("v-spacer"),a("v-btn",{attrs:{icon:"",dark:""},nativeOn:{click:function(e){t.dialogPDF=!1}}},[a("v-icon",[t._v("close")])],1)],1),t.dialogPDFLoading?a("div",{staticStyle:{"min-height":"600px","text-align":"center",margin:"auto",padding:"25%"}},[a("v-progress-circular",{attrs:{size:100,width:1,color:"primary",indeterminate:""}})],1):t._e(),a("iframe",{directives:[{name:"show",rawName:"v-show",value:!t.dialogPDFLoading,expression:"!dialogPDFLoading"}],staticStyle:{overflow:"auto","min-height":"600px"},attrs:{id:"dialogPDFPreviewXl",src:"",type:"application/pdf",width:"100%",height:"100%",frameborder:"0"}})],1)],1),t.reRender?a("thong-tin-co-ban-ho-so",{ref:"thong-tin-co-ban-ho-so",attrs:{detailDossier:t.thongTinChiTietHoSo,mauCongVan:t.mauCongVan}}):t._e(),a("div",[a("v-tabs",{attrs:{"icons-and-text":""},model:{value:t.activeTab,callback:function(e){t.activeTab=e},expression:"activeTab"}},[a("v-tabs-slider",{attrs:{color:"primary"}}),a("v-tab",{key:1,attrs:{href:"#tabs-1"},on:{click:function(e){t.getNextActions()}}},[a("v-btn",{staticClass:"px-0 py-0 mx-0 my-0",attrs:{flat:""}},[3===t.originality?a("span",[t._v("XỬ LÝ HỒ SƠ")]):a("span",[t._v("CHUẨN BỊ HỒ SƠ")])])],1),a("v-tab",{key:2,attrs:{href:"#tabs-2"},on:{click:function(e){!t.isNotarization&&t.loadTPHS()}}},[t.isNotarization?a("v-btn",{staticClass:"px-0 py-0 mx-0 my-0",attrs:{flat:""}},[a("span",[t._v(" TÀI LIỆU CHỨNG THỰC")])]):a("v-btn",{staticClass:"px-0 py-0 mx-0 my-0",attrs:{flat:""}},[t.thongTinChiTietHoSo.finishDate?a("span",[t._v("THÀNH PHẦN HỒ SƠ VÀ KẾT QUẢ")]):a("span",[t._v("THÀNH PHẦN HỒ SƠ")])])],1),t.paymentDetail?a("v-tab",{key:3,attrs:{href:"#tabs-3"},on:{click:function(e){t.loadPaymentFile()}}},[a("v-btn",{staticClass:"px-0 py-0 mx-0 my-0",attrs:{flat:""}},[t._v("\n            THANH TOÁN\n          ")])],1):t._e(),1!==t.originality&&t.listLienThong.length>0?a("v-tab",{key:4,attrs:{href:"#tabs-4"},on:{click:function(e){t.loadHoSoLienThong()}}},[a("v-btn",{staticClass:"px-0 py-0 mx-0 my-0",attrs:{flat:""}},[t._v("\n            LIÊN THÔNG\n          ")])],1):t._e(),1!==t.originality?a("v-tab",{key:5,attrs:{href:"#tabs-5"},on:{click:function(e){t.loadDossierActions()}}},[a("v-btn",{staticClass:"px-0 py-0 mx-0 my-0",attrs:{flat:""}},[t._v("\n            TIẾN TRÌNH XỬ LÝ\n          ")])],1):t._e(),a("v-tabs-items",{staticStyle:{overflow:"visible!important"},attrs:{"reverse-transition":"fade-transition",transition:"fade-transition"},model:{value:t.activeTab,callback:function(e){t.activeTab=e},expression:"activeTab"}},[a("v-tab-item",{key:1,attrs:{value:"tabs-1","reverse-transition":"fade-transition",transition:"fade-transition"}},[a("div",{staticClass:"px-4 pt-2"},[t.btnStateVisible&&3===t.originality&&!t.thongTinChiTietHoSo.finishDate?a("div",{staticClass:"px-2 py-2",style:t.filterNextActionEnable(t.btnDossierDynamics)||t.usersNextAction&&Array.isArray(t.usersNextAction)&&t.usersNextAction.length>0?"border:1px solid #4caf50;border-radius: 3px":""},[a("p",{staticClass:"mb-2"},[a("span",[t._v("Chuyển đến bởi:  ")]),a("b",[t._v(" "+t._s(t.thongTinChiTietHoSo.lastActionUser))]),t.thongTinChiTietHoSo.lastActionNote&&"null"!==t.thongTinChiTietHoSo.lastActionNote?a("span",[a("span",[t._v(" - Ý kiến: ")]),a("span",{staticStyle:{color:"#0b72ba"}},[t._v(" "+t._s(t.thongTinChiTietHoSo.lastActionNote))])]):t._e()]),a("v-layout",{staticClass:"mb-0",attrs:{wrap:"",xs12:""}},[a("v-flex",{staticStyle:{width:"calc(100% - 110px)","text-align":"justify"}},[a("span",[t._v("Người thực hiện:  ")]),t.usersNextAction&&Array.isArray(t.usersNextAction)&&t.usersNextAction.length>0?a("span",t._l(t.usersNextAction,(function(e,i){return a("span",{key:e.userId},[a("b",[t._v(t._s(e.userName))]),i!==t.usersNextAction.length-1?a("span",[t._v(",")]):t._e()])})),0):t._e()])],1)],1):t._e(),t.thongTinChiTietHoSo.finishDate&&t.btnStateVisible?a("v-alert",{attrs:{value:!0,color:"success",icon:"check_circle",outline:""}},[t._v("\n                Hồ sơ đã hoàn thành quá trình xử lý\n              ")]):t._e()],1),0!==t.checkInput&&t.filterNextActionEnable(t.btnDossierDynamics)?a("div",{staticStyle:{position:"relative"}},[a("v-expansion-panel",{staticClass:"expansion-pl",attrs:{value:[!0],expand:""}},[a("v-expansion-panel-content",{key:1,attrs:{"hide-actions":""}},[a("div",{attrs:{slot:"header"},slot:"header"},[a("div",{staticClass:"background-triangle-small"},[a("v-icon",{attrs:{size:"18",color:"white"}},[t._v("star_rate")])],1),2===t.checkInput?a("span",[t._v("Chỉnh sửa thành phần hồ sơ")]):a("span",[t._v("Kiểm tra thành phần hồ sơ")]),t._v("     \n                  ")]),a("thanh-phan-ho-so",{ref:"thanhphanhoso",attrs:{checkInput:t.checkInput,onlyView:2!==t.checkInput,id:"ci",partTypes:t.inputTypes}})],1)],1)],1):t._e(),t.btnStateVisible?a("div",{staticClass:"px-4 py-3",staticStyle:{"border-bottom":"1px solid #dddddd"}},[t._l(t.btnDossierDynamics,(function(e,i){return e.enable>0||"special"===e["autoEvent"]&&t.thongTinChiTietHoSo["permission"].indexOf("write")>=0?a("v-btn",{key:i,staticClass:"ml-0 mr-2 on-hover-btn",class:{deactive__btn:String(t.btnIndex)===String(i)},attrs:{color:"primary",loading:t.loadingAction&&i===t.btnIndex,disabled:t.loadingAction||2===e.enable},nativeOn:{click:function(a){t.processPullBtnDetail(e,i)}}},[t._v("\n                "+t._s(e.actionName)+"\n                "),a("span",{attrs:{slot:"loader"},slot:"loader"},[t._v("Loading...")])]):t._e()})),t._l(t.btnPlugins,(function(e,i){return a("v-btn",{key:i,staticClass:"ml-0 mr-2 on-hover-btn",attrs:{color:"primary",loading:t.loadingPlugin,disabled:t.loadingPlugin},nativeOn:{click:function(a){t.processPullBtnplugin(e,i)}}},[t._v("\n                "+t._s(e.pluginName)+" \n                "),a("span",{attrs:{slot:"loader"},slot:"loader"},[t._v("Loading...")])])})),t.thaoTacPhanCongLai&&t.detailPreAction&&Number(t.detailPreAction["allowAssignUser"])>2?a("v-btn",{staticClass:"ml-0 mr-2 on-hover-btn",attrs:{color:"primary",loading:t.loadingAction,disabled:t.loadingAction},nativeOn:{click:function(e){return t.phanCongLai(e)}}},[t._v("\n                Phân công lại\n                "),a("span",{attrs:{slot:"loader"},slot:"loader"},[t._v("Loading...")])]):t._e(),t._l(t.btnStepsDynamics,(function(e,i){return"UPDATE"===e.form?a("v-btn",{key:i,staticClass:"ml-0 mr-2 on-hover-btn",attrs:{color:"primary",loading:t.loadingAction,disabled:t.loadingAction},on:{click:function(a){t.btnActionEvent(e,i)}}},[t._v("\n                "+t._s(e.title)+"\n              ")]):t._e()})),t.showMenuActionKhac&&t.thongTinChiTietHoSo["permission"].indexOf("write")>=0?a("v-menu",{staticStyle:{display:"inline-block",position:"relative !important"},attrs:{bottom:"","offset-y":""}},[a("v-btn",{staticClass:"on-hover-btn",attrs:{slot:"activator",color:"primary",dark:""},slot:"activator"},[t._v("Khác   "),a("v-icon",{attrs:{size:"18"}},[t._v("arrow_drop_down")])],1),a("v-list",t._l(t.btnStepsDynamics,(function(e,i){return"UPDATE"!==e.form?a("v-list-tile",{key:i,on:{click:function(a){t.btnActionEvent(e,i)}}},[a("v-list-tile-title",[t._v(t._s(e.title))])],1):t._e()})),1)],1):t._e()],2):t._e(),t.loadingAction?a("content-placeholders",[a("content-placeholders-img"),a("content-placeholders-heading")],1):t._e(),t.btnStateVisible&&t.thongTinChiTietHoSo.hasOwnProperty("dossierSyncState")&&"1"===String(t.thongTinChiTietHoSo.dossierSyncState)?a("div",{staticClass:"px-4 pt-2"},[a("v-progress-circular",{staticStyle:{position:"absolute",bottom:"13px",left:"36px"},attrs:{indeterminate:"",color:"amber"}}),a("v-alert",{attrs:{value:!0,color:"warning",icon:"priority_high",outline:""}},[t._v("\n                Hồ sơ đang đồng bộ trạng thái, vui lòng chờ giây lát.\n              ")])],1):t._e(),t.dialogActionProcess&&!t.loadingAction?a("v-layout",{attrs:{wrap:""}},[t.showThanhPhanLienThong?a("v-expansion-panel",{staticClass:"expansion-pl ext__form",attrs:{value:[!0],expand:""}},[a("v-expansion-panel-content",{key:1},[a("div",{attrs:{slot:"header"},slot:"header"},[a("div",{staticClass:"background-triangle-small"},[a("v-icon",{attrs:{size:"18",color:"white"}},[t._v("star_rate")])],1),t._v(" Thành phần hồ sơ gửi liên thông\n                  ")]),a("thanh-phan-ho-so",{ref:"thanhphanhoso",attrs:{tempLienThong:!0,checkInput:t.checkInput,onlyView:2!==t.checkInput,id:"ci",partTypes:t.inputTypesLienThong}})],1)],1):t._e(),t.showFormBoSungThongTinNgan?a("form-bo-sung-thong-tin",{ref:"formBoSungThongTinNgan",attrs:{dossier_id:Number(t.id),action_id:Number(t.actionIdCurrent)}}):t._e(),t.showPhanCongNguoiThucHien?a("phan-cong",{ref:"phancong",attrs:{data_rolegroup:t.roleGroupPhanCong,detailDossier:t.thongTinChiTietHoSo,data_uyquyen:t.reAsignUsers,type:t.type_assign},model:{value:t.assign_items,callback:function(e){t.assign_items=e},expression:"assign_items"}}):t._e(),t.showTaoTaiLieuKetQua?a("tai-lieu-ket-qua",{ref:"tailieuketqua",attrs:{esignType:t.typeEsign,detailDossier:t.thongTinChiTietHoSo,createFiles:t.createFiles}}):t._e(),t.showTraKetQua?a("tra-ket-qua",{attrs:{detailDossier:t.thongTinChiTietHoSo,createFiles:t.returnFiles}}):t._e(),t.showThuPhi?a("thu-phi",{attrs:{viaPortal:t.viaPortalDetail,detailDossier:t.thongTinChiTietHoSo},model:{value:t.payments,callback:function(e){t.payments=e},expression:"payments"}}):t._e(),t.showThanhToanDienTu?a("thanh-toan-dien-tu",{ref:"epayment",attrs:{paymentProfile:t.paymentProfile,detailDossier:t.thongTinChiTietHoSo}}):t._e(),t.showKyPheDuyetTaiLieu?a("ky-duyet",{ref:"kypheduyettailieu",style:""===t.dataEsign["signatureType"]?"display:none":"",attrs:{detailDossier:t.thongTinChiTietHoSo,dataEsign:t.dataEsign,filesPdfSignPlugin:t.filesPdfSign}}):t._e(),t.showExtendDateEdit?a("ngay-gia-han",{ref:"ngaygiahan",attrs:{type:t.typeExtendDate,extendDateEdit:t.extendDateEdit}}):t._e(),t.showEditDate?a("ngay-hen-tra",{ref:"ngayhentra",attrs:{dueDateEdit:t.dueDateEdit}}):t._e(),t.showPostalService?a("thong-tin-buu-chinh",{attrs:{postalService:t.thongTinChiTietHoSo}}):t._e(),t.showYkienCanBoThucHien?a("y-kien-can-bo",{ref:"ykiencanbo",attrs:{user_note:t.userNote,configNote:t.configNote}}):t._e(),t.visibleDoAction?a("div",{staticClass:"px-4 pt-0 pb-2",staticStyle:{width:"100%","border-bottom":"1px solid #dddddd"}},[t.dialogActionProcess?a("v-btn",{staticClass:"ml-0 mr-2",attrs:{color:"primary",loading:t.loadingActionProcess,disabled:t.loadingActionProcess},nativeOn:{click:function(e){t.processAction(t.dossierItemDialogPick,t.itemDialogPick,t.resultDialogPick,t.indexDialogPick,!1)}}},[a("v-icon",[t._v("save")]),t._v(" \n                  Xác nhận\n                  "),a("span",{attrs:{slot:"loader"},slot:"loader"},[t._v("Loading...")])],1):t._e()],1):t._e()],1):t._e(),t.btnStateVisible?t._e():a("v-alert",{staticClass:"mx-3",attrs:{outline:"",color:t.alertObj.color,icon:t.alertObj.icon,value:!0}},[t._v("\n              "+t._s(t.alertObj.message)+"\n            ")]),!t.btnStateVisible&&(t.rollbackable||t.printDocument||t.printInvoicefilePayment)?a("div",{staticClass:"ml-2 py-2",staticStyle:{width:"100%","border-bottom":"1px solid #dddddd"}},[t.rollbackable?a("v-btn",{attrs:{color:"primary"},on:{click:function(e){t.rollBack()}}},[t._v("Thu hồi hồ sơ")]):t._e(),t.printDocument?a("v-btn",{attrs:{color:"primary",loading:t.dialogPDFLoading,disabled:t.dialogPDFLoading},on:{click:function(e){t.printViewDocument()}}},[a("v-icon",[t._v("print")]),t._v("  \n                In văn bản hành chính\n                "),a("span",{attrs:{slot:"loader"},slot:"loader"},[t._v("Loading...")])],1):t._e(),t.printInvoicefilePayment?a("v-btn",{attrs:{color:"primary",loading:t.dialogPDFLoading,disabled:t.dialogPDFLoading},on:{click:function(e){t.printPay()}}},[a("v-icon",[t._v("print")]),t._v("  \n                In biên lai\n                "),a("span",{attrs:{slot:"loader"},slot:"loader"},[t._v("Loading...")])],1):t._e()],1):t._e()],1),a("v-tab-item",{key:2,attrs:{value:"tabs-2","reverse-transition":"fade-transition",transition:"fade-transition"}},[t.isNotarization?a("div",[a("tai-lieu-chung-thuc",{ref:"tailieuchungthuc",attrs:{dossierId:t.thongTinChiTietHoSo.dossierId,onlyView:!0}})],1):a("div",[a("v-expansion-panel",{staticClass:"expansion-pl ext__form",attrs:{value:[!0],expand:""}},[a("v-expansion-panel-content",{key:1},[a("div",{staticClass:"text-bold",attrs:{slot:"header"},slot:"header"},[a("div",{staticClass:"background-triangle-small"},[t._v(" I.")]),t._v("\n                    Tài liệu nộp     \n                    "),0===t.thongTinChiTietHoSo.sampleCount||t.thongTinChiTietHoSo.online?t._e():a("span",[t._v("("+t._s(0===t.thongTinChiTietHoSo.sampleCount?"?":t.thongTinChiTietHoSo.sampleCount)+" bộ hồ sơ)")])]),a("thanh-phan-ho-so",{ref:"thanhphanhoso1",attrs:{onlyView:!0,id:"nm",partTypes:t.inputTypes}})],1)],1),t.stateViewResult?a("v-expansion-panel",{staticClass:"expansion-pl ext__form",attrs:{value:[!0],expand:""}},[a("v-expansion-panel-content",{key:1},[a("div",{staticClass:"text-bold",attrs:{slot:"header"},slot:"header"},[a("div",{staticClass:"background-triangle-small"},[t._v(" II.")]),t._v("\n                    Kết quả xử lý\n                  ")]),a("thanh-phan-ho-so",{ref:"thanhphanhoso2",attrs:{onlyView:!0,id:"kq",partTypes:t.outputTypes},on:{"tp:change-state-view-result":t.changeStateViewResult}})],1)],1):t._e(),t.documents&&t.documents.length>0?a("v-expansion-panel",{staticClass:"expansion-pl ext__form",attrs:{value:[!0],expand:""}},[a("v-expansion-panel-content",{key:1},[a("div",{staticClass:"text-bold",attrs:{slot:"header"},slot:"header"},[a("div",{staticClass:"background-triangle-small"},[t.stateViewResult?a("span",[t._v("III.")]):a("span",[t._v("II.")])]),t._v("\n                    Văn bản hành chính\n                  ")]),t._l(t.documents,(function(e,i){return a("div",{key:i,staticStyle:{"border-bottom":"1px solid #dedede"}},[a("v-card",[a("v-layout",{staticClass:"pl-4 pr-2 py-1 align-center row-list-style",attrs:{wrap:""}},[a("v-flex",{attrs:{xs11:""}},[a("span",{staticClass:"text-bold",staticStyle:{position:"absolute"}},[t._v(t._s(i+1)+".")]),a("div",{staticStyle:{"margin-left":"20px"}},[t._v(t._s(e.documentName))])]),a("v-flex",{staticClass:"text-right",attrs:{xs1:""}},[a("v-tooltip",{attrs:{top:""}},[a("v-btn",{staticClass:"mx-0 my-0",staticStyle:{height:"25px",width:"25px"},attrs:{slot:"activator",fab:"",dark:"",small:"",color:"primary"},on:{click:function(a){t.viewFileDocument(e)}},slot:"activator"},[a("v-icon",{staticStyle:{"font-size":"14px"}},[t._v("visibility")])],1),a("span",[t._v("Xem")])],1)],1)],1)],1)],1)}))],2)],1):t._e()],1)]),a("v-tab-item",{key:3,attrs:{value:"tabs-3","reverse-transition":"fade-transition",transition:"fade-transition"}},[a("v-card",[a("chi-tiet-thanh-toan",{ref:"thongtinthanhtoan",attrs:{payments:t.paymentDetail,dossierDetail:t.thongTinChiTietHoSo}})],1)],1),t.listLienThong.length>0?a("v-tab-item",{key:4,attrs:{value:"tabs-4","reverse-transition":"fade-transition",transition:"fade-transition"}},[a("v-card",[t.listLienThong.length>0?a("ho-so-lien-thong",{attrs:{listLienThong:t.listLienThong,dossierDetail:t.thongTinChiTietHoSo}}):a("v-card-text",[a("v-flex",{staticClass:"text-xs-center",attrs:{xs12:""}},[a("span",[t._v("Không có hồ sơ liên thông")])])],1)],1)],1):t._e(),1!==t.originality?a("v-tab-item",{key:5,attrs:{value:"tabs-5","reverse-transition":"fade-transition",transition:"fade-transition"}},[t.sequencyDossierImport?t._e():a("v-flex",{staticStyle:{height:"42px"},attrs:{xs12:""}},[a("v-radio-group",{staticClass:"absolute__btn pt-1",staticStyle:{width:"350px"},attrs:{row:""},on:{change:function(e){t.changeTypeTienTrinh(e)}},model:{value:t.typeTienTrinh,callback:function(e){t.typeTienTrinh=e},expression:"typeTienTrinh"}},[a("v-radio",{attrs:{label:"Xem dạng bảng",value:1}}),a("v-radio",{attrs:{label:"Xem dạng biểu đồ",value:2}})],1),t.hasPreviewSync?a("v-btn",{staticClass:"right",attrs:{small:"",color:"primary",loading:t.dialogPDFLoading,disabled:t.dialogPDFLoading},on:{click:function(e){return e.stopPropagation(),t.previewTienTrinh(e)}}},[a("v-icon",{attrs:{color:"white"}},[t._v("print")]),t._v(" \n                In\n              ")],1):t._e()],1),t.sequencyDossierImport?a("v-data-table",{staticClass:"table-landing table-bordered",attrs:{headers:t.headersSequencyImport,items:t.dossierImportActions,"hide-actions":"","no-data-text":"Không có dữ liệu"},scopedSlots:t._u([{key:"headerCell",fn:function(e){return[a("v-tooltip",{attrs:{bottom:""}},[a("span",{attrs:{slot:"activator"},slot:"activator"},[t._v("\n                    "+t._s(e.header.text)+"\n                  ")]),a("span",[t._v("\n                    "+t._s(e.header.text)+"\n                  ")])])]}},{key:"items",fn:function(e){return[a("td",{staticClass:"text-xs-center"},[t._v(t._s(e.index+1))]),a("td",{staticClass:"text-xs-left"},[t._v(t._s(e.item.sequenceName))]),a("td",{staticClass:"text-xs-left"},[t._v(t._s(e.item.actions[0]["actionUser"]))]),a("td",{staticClass:"text-xs-left"},[t._v(t._s(t._f("dateTimeViewSequency")(e.item.startDate)))]),a("td",{staticClass:"text-xs-left"},[t._v(t._s(t._f("dateTimeViewSequency")(e.item.finishDate)))]),a("td",{staticClass:"text-xs-left"},[t._v(t._s(e.item.actions[0]["note"]))])]}}])}):t._e(),t.sequencyDossierImport||1!==t.typeTienTrinh?t._e():a("v-data-table",{staticClass:"table-landing table-bordered",attrs:{headers:t.headers,items:t.dossierActions,"hide-actions":"","no-data-text":"Không có dữ liệu"},scopedSlots:t._u([{key:"headerCell",fn:function(e){return[a("v-tooltip",{attrs:{bottom:""}},[a("span",{attrs:{slot:"activator"},slot:"activator"},[t._v("\n                    "+t._s(e.header.text)+"\n                  ")]),a("span",[t._v("\n                    "+t._s(e.header.text)+"\n                  ")])])]}},{key:"items",fn:function(e){return[a("td",{staticClass:"text-xs-center"},[t._v(t._s(e.index+1))]),a("td",{staticClass:"text-xs-left"},[t._v(t._s(e.item.sequenceRole))]),a("td",{staticClass:"text-xs-left"},[t._v(t._s(e.item.sequenceName))]),a("td",{staticClass:"text-xs-left"},[t._v(t._s(t._f("getThoiHanQuyDinh")(e.item.durationCount)))]),a("td",{staticClass:"text-xs-left"},[t._v(t._s(t._f("dateTimeView")(e.item.startDate)))]),a("td",{staticClass:"text-xs-left"},t._l(e.item.assignUsers,(function(e){return a("div",{key:e.userId},[t._v("\n                    "+t._s(e.userName)+" "),a("br")])})),0),a("td",{staticClass:"text-xs-left"},[t._l(e.item.actions,(function(e,i){return a("div",{key:i},[t._v("\n                    "+t._s(t._f("dateTimeView")(e.createDate))+" : "),a("span",{staticStyle:{color:"#0b72ba"}},[t._v(t._s(e.actionName))]),e.actionNote&&"null"!==e.actionNote?a("span",[t._v(" - "),a("i",[t._v(t._s(e.actionNote))])]):t._e(),Array.isArray(e.files)&&e.files.length>0?a("div",t._l(e.files,(function(e,i){return a("div",{key:i,attrs:{title:"Tải xuống"}},[e.dossierDocumentId?a("p",{on:{click:function(a){t.downloadFileDocument(e.dossierReferenceUid?e.dossierReferenceUid:"")}}},[a("v-icon",{attrs:{size:"18",color:"#0b72ba"}},[t._v("\n                            get_app\n                          ")]),a("span",{staticStyle:{color:"#0b72ba",cursor:"pointer"}},[t._v("\n                            "+t._s(e.fileName)+"\n                          ")])],1):t._e(),e.dossierFileId?a("p",{on:{click:function(a){t.downloadFileLogs(e.dossierFileId)}}},[a("v-icon",{attrs:{size:"18",color:"#0b72ba"}},[t._v("\n                            get_app\n                          ")]),a("span",{staticStyle:{color:"#0b72ba",cursor:"pointer"}},[t._v("\n                            "+t._s(e.fileName)+"\n                          ")])],1):t._e()])})),0):t._e()])})),e.item.statusText?a("div",["done"===t.thongTinChiTietHoSo["dossierStatus"]||"unresolved"===t.thongTinChiTietHoSo["dossierStatus"]||"denied"===t.thongTinChiTietHoSo["dossierStatus"]||"cancelled"===t.thongTinChiTietHoSo["dossierStatus"]?a("span",{staticStyle:{color:"green"}},[t._v("\n                      "+t._s(e.item.statusText.replace("Đang thực hiện:",""))+"\n                    ")]):a("span",{staticStyle:{color:"green"}},[t._v("\n                      "+t._s(e.item.statusText)+"\n                    ")])]):t._e()],2)]}}])}),t.sequencyDossierImport||1===t.typeTienTrinh?t._e():a("div",[t.loadingMermaidgraph?a("content-placeholders",[a("content-placeholders-img"),a("content-placeholders-heading")],1):t._e(),a("div",{staticClass:"mermaid",staticStyle:{padding:"15px","min-height":"350px"},attrs:{id:"mermaid_dossier"}})],1)],1):t._e()],1)],1),a("v-tabs",{attrs:{"icons-and-text":""},model:{value:t.activeTab2,callback:function(e){t.activeTab2=e},expression:"activeTab2"}},[a("v-tabs-slider",{attrs:{color:"primary"}}),1===t.originality&&"new"!==t.thongTinChiTietHoSo["dossierStatus"]||3===t.originality?a("v-tab",{key:2,attrs:{href:"#tabs-2b"}},[a("v-btn",{staticClass:"px-0 py-0 mx-0 my-0",attrs:{flat:""}},[t._v("\n            TRAO ĐỔI\n          ")])],1):t._e(),a("v-tab",{key:3,attrs:{href:"#tabs-3b"},on:{click:function(e){t.loadDossierLogs()}}},[a("v-btn",{staticClass:"px-0 py-0 mx-0 my-0",attrs:{flat:""}},[t._v("\n            NHẬT KÝ SỬA ĐỔI\n          ")])],1),a("v-tabs-items",{attrs:{"reverse-transition":"fade-transition",transition:"fade-transition"},model:{value:t.activeTab2,callback:function(e){t.activeTab2=e},expression:"activeTab2"}},[1===t.originality&&"done"===t.thongTinChiTietHoSo["dossierStatus"]?a("v-tab-item",{key:1,attrs:{value:"tabs-1b","reverse-transition":"fade-transition",transition:"fade-transition"}},[a("div",{staticClass:"px-2 py-2"},[t.votingItems&&t.votingItems.length>0?a("div",t._l(t.votingItems,(function(e,i){return a("div",{key:i},[a("div",{staticClass:"text-bold"},[t._v("\n                    "+t._s(i+1)+".  "+t._s(e.subject)+"\n                  ")]),a("v-radio-group",{staticClass:"ml-3 mt-2",attrs:{column:""},model:{value:e.selected,callback:function(a){t.$set(e,"selected",a)},expression:"item.selected"}},t._l(e.choices,(function(e,i){return a("v-radio",{key:i,staticClass:"ml-2",attrs:{label:e,value:i+1,disabled:3===t.originality}})})),1)],1)})),0):t._e(),!t.votingItems||t.votingItems&&0===t.votingItems.length?a("div",{staticClass:"mx-3"},[a("v-alert",{attrs:{outline:"",color:"warning",icon:"priority_high",value:!0}},[t._v("\n                  Không có đánh giá\n                ")])],1):t._e(),t.votingItems&&t.votingItems.length>0&&1===t.originality?a("div",{staticClass:"ml-3 mt-4"},[a("v-btn",{attrs:{color:"primary",loading:t.loadingVoting,disabled:t.loadingVoting},on:{click:t.submitVoting}},[t._v("Gửi đánh giá")])],1):t._e()])]):t._e(),1===t.originality&&"new"!==t.thongTinChiTietHoSo["dossierStatus"]||3===t.originality?a("v-tab-item",{key:2,attrs:{value:"tabs-2b","reverse-transition":"fade-transition",transition:"fade-transition"}},[t.thongTinChiTietHoSo.online&&!t.thongTinChiTietHoSo.originDossierNo?a("div",[a("v-expansion-panel",{staticClass:"expansion-pl",attrs:{value:[!0],expand:""}},[a("v-expansion-panel-content",{key:1,attrs:{"hide-actions":""}},[a("div",{attrs:{slot:"header"},slot:"header"},[a("div",{staticClass:"background-triangle-small"},[a("v-icon",{attrs:{size:"18",color:"white"}},[t._v("star_rate")])],1),3===t.originality?a("span",[t._v("Trao đổi với người làm thủ tục")]):a("span",[t._v("Trao đổi với cán bộ xử lý")])]),a("v-card",[a("v-card-text",{staticClass:"px-0 py-0 pr-3"},[a("v-flex",{attrs:{xs12:""}},[t.dossierSyncs.length>0?a("ul",{staticClass:"timeline overflowComment",staticStyle:{"max-height":"300px",overflow:"auto"}},t._l(t.dossierSyncs,(function(e,i){return 0!==e.syncType&&0!==e.infoType&&e.actionNote&&"null"!==e.actionNote?a("li",{key:i,staticClass:"timeline-item"},[a("div",{staticClass:"timeline-badge",class:2===e.syncType?"primary":"warning"},[a("v-icon",{attrs:{color:"grey lighten-4",size:"20"}},[t._v(t._s(2===e.syncType?"account_balance":"perm_identity"))])],1),a("div",{staticClass:"timeline-panel"},[a("div",{staticClass:"timeline-heading"},[a("div",{staticClass:"timeline-panel-controls"},[a("div",{staticClass:"timestamp"},[a("small",{staticClass:"text-muted"},[t._v(t._s(t._f("dateTimeView")(e.createDate)))])])])]),a("div",{staticClass:"timeline-body"},[2===e.syncType?a("span",[t._v("Cán bộ trả lời")]):t._e(),2===e.syncType&&e.actionNote&&"null"!==e.actionNote?a("span",[t._v(": ")]):t._e(),e.actionNote&&"null"!==e.actionNote?a("span",{staticStyle:{color:"#0b72ba"}},[t._v(t._s(e.actionNote))]):t._e()])])]):t._e()})),0):a("div",{staticClass:"no-comments no-data my-2"},[a("i",{staticClass:"fa fa-comments",staticStyle:{"font-size":"25px"}}),a("br"),a("span",{staticStyle:{"font-size":"18px"}},[t._v("Không có trao đổi nào")])]),a("div",{staticStyle:{position:"relative"}},[a("v-form",{ref:"formTraoDoi",attrs:{"lazy-validation":""},model:{value:t.validTraoDoi,callback:function(e){t.validTraoDoi=e},expression:"validTraoDoi"}},[a("v-text-field",{staticClass:"pl-4 my-3",attrs:{label:"Nhập trao đổi",rules:[t.rules.varchar5000],box:""},on:{keyup:function(e){return"button"in e||!t._k(e.keyCode,"enter",13,e.key,"Enter")?t.postChat(e):null}},model:{value:t.messageChat,callback:function(e){t.messageChat=e},expression:"messageChat"}}),a("v-icon",{staticClass:"hover-pointer",staticStyle:{position:"absolute",right:"10px",bottom:"18px","font-size":"14px"},attrs:{color:"blue"},on:{click:t.postChat}},[t._v("send")])],1)],1)])],1)],1)],1)],1)],1):t._e(),1!==t.originality?a("div",{staticStyle:{position:"relative"}},[a("v-expansion-panel",{attrs:{value:[!0],expand:""}},[a("v-expansion-panel-content",[a("div",{attrs:{slot:"header"},slot:"header"},[a("div",{staticClass:"background-triangle-small"},[a("v-icon",{attrs:{size:"18",color:"white"}},[t._v("star_rate")])],1),t._v("\n                    Trao đổi nội bộ      \n                  ")]),a("comment",{ref:"comment",attrs:{classPK:t.id,className:t.className}})],1)],1)],1):t._e()]):t._e(),a("v-tab-item",{key:3,attrs:{value:"tabs-3b","reverse-transition":"fade-transition",transition:"fade-transition"}},t._l(t.listHistoryProcessing,(function(e,i){return a("div",{key:e.dossierLogId,staticClass:"list_history_style"},[a("td",{staticClass:"px-2 pt-2",class:i%2!==0?"col-tien-trinh-1":"col-tien-trinh-2"},[t._v(t._s(i+1))]),a("td",{staticClass:"text-xs-left px-2 pt-2 pb-1"},[a("p",{staticClass:"mb-1"},[a("span",[t._v(t._s(t._f("dateTimeView")(e.createDate)))]),t._v(" - "),a("b",[t._v(t._s(e.author))]),t._v(": "),a("span",{staticStyle:{color:"#0b72ba"}},[t._v(t._s(e.payload.stepName))])]),""!==e.content&&null!==e.content?a("p",{staticClass:"mb-1"},[t._v("Ý kiến: "),a("span",{domProps:{innerHTML:t._s(e.content)}})]):t._e(),t._l(e.payload.files,(function(e,i){return a("div",{key:i},[e.dossierFileId?a("p",{staticClass:"history__download__link hover-pointer-download mb-1",staticStyle:{cursor:"pointer"},attrs:{title:"Tải xuống"},on:{click:function(a){a.preventDefault(),a.stopPropagation(),t.downloadFileLogs(e.dossierFileId)}}},[a("v-icon",[t._v("file_download")]),a("span",[t._v(t._s(e.fileName))])],1):t._e(),e.dossierDocumentId?a("p",{staticClass:"history__download__link hover-pointer-download mb-1",staticStyle:{cursor:"pointer"},attrs:{title:"Tải xuống"},on:{click:function(a){a.preventDefault(),a.stopPropagation(),t.downloadFileDocument(e.dossierReferenceUid?e.dossierReferenceUid:"")}}},[a("v-icon",[t._v("file_download")]),a("span",[t._v(t._s(e.fileName))])],1):t._e()])}))],2)])})),0)],1)],1)],1)],1),a("object",{attrs:{id:"plugin0",type:"application/x-cryptolib05plugin",width:"0",height:"0"}}),a("div",{staticStyle:{display:"none"}},[a("input",{attrs:{id:"dossierId_hidden",type:"text"},domProps:{value:t.thongTinChiTietHoSo.dossierId}}),a("input",{attrs:{id:"dossierStatus_hidden",type:"text"},domProps:{value:t.thongTinChiTietHoSo.dossierStatus}}),a("input",{attrs:{id:"dossierSubStatus_hidden",type:"text"},domProps:{value:t.thongTinChiTietHoSo.dossierSubStatus}})]),a("v-dialog",{attrs:{scrollable:"",persistent:"","max-width":"700px"},model:{value:t.dialog_reAsign,callback:function(e){t.dialog_reAsign=e},expression:"dialog_reAsign"}},[a("v-card",[a("v-toolbar",{attrs:{dark:"",color:"primary"}},[a("v-toolbar-title",[t._v("Chọn người thực hiện")]),a("v-spacer"),a("v-btn",{attrs:{icon:"",dark:""},nativeOn:{click:function(e){t.dialog_reAsign=!1}}},[a("v-icon",[t._v("close")])],1)],1),a("v-card-text",[a("phan-cong-lai",{ref:"phanconglai",attrs:{type:1},model:{value:t.reAsignUsers,callback:function(e){t.reAsignUsers=e},expression:"reAsignUsers"}})],1),a("v-card-actions",[a("v-spacer"),a("v-btn",{staticClass:"mr-3",attrs:{color:"primary",loading:t.loadingAction,disabled:t.loadingAction},on:{click:function(e){t.doReAsign()}}},[a("v-icon",[t._v("how_to_reg")]),t._v("  \n          Đồng ý\n          "),a("span",{attrs:{slot:"loader"},slot:"loader"},[t._v("Loading...")])],1),a("v-btn",{staticClass:"mr-3",attrs:{color:"primary"},nativeOn:{click:function(e){t.dialog_reAsign=!1}}},[a("v-icon",[t._v("reply")]),t._v("  \n          Hủy\n        ")],1)],1)],1)],1),a("v-dialog",{staticStyle:{overflow:"hidden"},attrs:{persistent:"",overlay:!1,"max-width":800,transition:"dialog-transition"},model:{value:t.dialogPlugin,callback:function(e){t.dialogPlugin=e},expression:"dialogPlugin"}},[a("v-card",[a("v-card-title",{staticClass:"px-0 py-0"},[a("v-toolbar",{attrs:{dark:"",color:"primary",height:"40"}},[null!==t.modelPlugin&&void 0!==t.modelPlugin?a("div",{staticClass:"text-bold"},[t._v(t._s(t.modelPlugin["pluginName"]))]):t._e(),a("v-spacer"),a("v-toolbar-items",[a("v-btn",{attrs:{icon:"",dark:""},nativeOn:{click:function(e){t.dialogPlugin=!1}}},[a("v-icon",[t._v("close")])],1)],1)],1)],1),a("v-card-text",{staticClass:"pr-0 py-0"},[null===t.modelPlugin?a("div",{staticClass:"text-xs-center center-all",staticStyle:{width:"100%",height:"400px"}},[a("v-progress-circular",{attrs:{indeterminate:"",size:100,color:"purple"}})],1):t.modelPlugin.pending?a("div",[t._v("\n          Hồ sơ chờ đồng bộ ...\n        ")]):t.modelPlugin["plugin"]?a("div",[t.modelPlugin.pdf?a("div",[a("div",{staticClass:"flex xs12 sm12 text-center"},[t.modelPlugin.no_pdf?t._e():a("object",{attrs:{id:"dossierPDFViewPlugin",data:"",width:"100%",height:"100%"}},[a("iframe",{staticStyle:{"min-height":"500px !important","padding-left":"0"},attrs:{src:t.modelPlugin.url,width:"100%"}})]),a("div",{staticClass:"text-center",attrs:{id:"dossierPDFViewNotFound"}},[t._v(t._s(t.modelPlugin.no_pdf))])])]):t._e(),t.modelPlugin["html"]?a("div",[a("input",{staticClass:"dossierFilePartNo",attrs:{type:"hidden",id:"dossierFilePartNo",name:""}}),a("div",{staticClass:"expansion-panel__header",attrs:{id:"alpacajs_form_plugin"}}),a("div",{staticClass:"text-center",attrs:{id:"dossierAlpacaNotFound"}},[t._v(t._s(t.modelPlugin.no_html))])]):t._e()]):a("div")])],1)],1)],1)},Ie=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"background-triangle-big"},[a("span",[t._v("CHI TIẾT HỒ SƠ")])])}],Ae=a("eff4"),we=Ae["a"],Ee=a("c671"),ke=a("aac8"),Oe=Object(p["a"])(we,Pe,Ie,!1,null,null,null),Fe=Oe.exports;g()(Oe,{VAlert:v["a"],VBtn:_["a"],VCard:y["a"],VCardActions:_t["a"],VCardText:_t["b"],VCardTitle:qt["a"],VDataTable:Dt["a"],VDialog:Tt["a"],VExpansionPanel:Yt["a"],VExpansionPanelContent:Jt["a"],VFlex:D["a"],VForm:xt["a"],VIcon:T["a"],VLayout:x["a"],VList:b["a"],VListTile:N["a"],VListTileTitle:I["c"],VMenu:nt["a"],VProgressCircular:w["a"],VRadio:bt["a"],VRadioGroup:St["a"],VSpacer:Nt["a"],VTab:Xt["a"],VTabItem:Ee["a"],VTabs:Zt["a"],VTabsItems:ke["a"],VTabsSlider:te["a"],VTextField:st["a"],VToolbar:It["a"],VToolbarItems:At["a"],VToolbarTitle:At["b"],VTooltip:wt["a"]});var Me=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[t.loading?a("content-placeholders",{staticClass:"mt-3"},[a("content-placeholders-text",{attrs:{lines:1}})],1):t.dossierSelected.length>0?a("div",{staticClass:"row-header"},[a("div",{staticClass:"background-triangle-big"},[a("span",[t._v(t._s(t.actionActive["tiltle"]?t.actionActive["tiltle"]:"XỬ LÝ HỒ SƠ"))])]),a("div",{staticClass:"layout row wrap header_tools row-blue"},[a("div",{staticClass:"flex pl-3 text-ellipsis text-bold",staticStyle:{width:"calc(100% - 100px)"},attrs:{title:t.dossierSelected[0].serviceName}},[t._v("\n        "+t._s(t.dossierSelected[0].serviceName)+"\n      ")]),a("div",{staticClass:"flex text-right",staticStyle:{"margin-left":"auto",width:"100px"}},[a("v-btn",{staticClass:"my-0 mx-0 btn-border-left",attrs:{flat:"","active-class":"temp_active"},on:{click:t.goBack}},[a("v-icon",{attrs:{size:"16"}},[t._v("reply")]),t._v("  \n          Quay lại\n        ")],1)],1)])]):t._e(),t.dossierSelected.length>0?a("v-expansion-panel",{staticClass:"expansion-pl",attrs:{value:[!0],expand:""}},[a("v-expansion-panel-content",[a("v-card",[a("v-card-text",{staticClass:"px-0 pt-0"},[a("v-data-table",{staticClass:"table-landing table-bordered",attrs:{headers:t.headersTable,items:t.dossierSelected,"hide-actions":""},scopedSlots:t._u([{key:"items",fn:function(e){return[a("tr",{class:{active:e.index%2==1}},[a("td",{staticClass:"text-xs-center"},[a("div",[a("span",[t._v(t._s(e.index+1))])])]),a("td",{staticClass:"text-xs-left"},[a("div",[a("span",[t._v(t._s(e.item.dossierNo))]),a("br"),e.item.online?a("span",{staticStyle:{color:"blue"}},[t._v("Hồ sơ trực tuyến")]):a("span",{staticStyle:{color:"green"}},[t._v("Hồ sơ một cửa")])])]),a("td",{staticClass:"text-xs-left"},[a("div",[a("span",[t._v(t._s(e.item.applicantName))])])]),a("td",{staticClass:"text-xs-left"},[a("div",[a("span",[t._v(t._s(e.item.wardName)+", "+t._s(e.item.districtName)+", "+t._s(e.item.cityName))])])])])]}}])})],1)],1)],1)],1):t._e(),a("v-dialog",{attrs:{"max-width":"900",transition:"fade-transition"},model:{value:t.dialogPDF,callback:function(e){t.dialogPDF=e},expression:"dialogPDF"}},[a("v-card",[a("v-card-title",{staticClass:"headline"},[t._v("File đính kèm")]),a("v-btn",{staticClass:"mx-0 my-0 absolute__btn_panel mr-2",attrs:{icon:"",dark:""},nativeOn:{click:function(e){t.dialogPDF=!1}}},[a("v-icon",[t._v("clear")])],1),t.dialogPDFLoading?a("div",{staticStyle:{"min-height":"600px","text-align":"center",margin:"auto",padding:"25%"}},[a("v-progress-circular",{attrs:{size:100,width:1,color:"primary",indeterminate:""}})],1):t._e(),a("iframe",{directives:[{name:"show",rawName:"v-show",value:!t.dialogPDFLoading,expression:"!dialogPDFLoading"}],staticStyle:{overflow:"auto","min-height":"600px"},attrs:{id:"dialogPDFPreview",src:"",type:"application/pdf",width:"100%",height:"100%",frameborder:"0"}})],1)],1),a("div",[t.btnStateVisible?a("v-layout",{attrs:{wrap:""}},[t.showFormBoSungThongTinNgan?a("form-bo-sung-thong-tin",{ref:"formBoSungThongTinNgan",attrs:{dossier_id:Number(t.id),action_id:Number(t.actionIdCurrent)}}):t._e(),t.showPhanCongNguoiThucHien?a("phan-cong",{ref:"phancong",attrs:{type:t.type_assign},model:{value:t.assign_items,callback:function(e){t.assign_items=e},expression:"assign_items"}}):t._e(),t.showTaoTaiLieuKetQua?a("tai-lieu-ket-qua",{ref:"tailieuketqua",attrs:{detailDossier:t.thongTinChiTietHoSo,createFiles:t.createFiles}}):t._e(),t.showExtendDateEdit?a("ngay-gia-han",{ref:"ngaygiahan",attrs:{type:t.typeExtendDate,extendDateEdit:t.extendDateEdit}}):t._e(),t.showEditDate?a("ngay-hen-tra",{ref:"ngayhentra",attrs:{dueDateEdit:t.dueDateEdit}}):t._e(),t.showTraKetQua?a("tra-ket-qua",{attrs:{detailDossier:t.thongTinChiTietHoSo,createFiles:t.returnFiles}}):t._e(),t.showThuPhi?a("thu-phi",{attrs:{viaPortal:t.viaPortalDetail,detailDossier:t.thongTinChiTietHoSo},model:{value:t.payments,callback:function(e){t.payments=e},expression:"payments"}}):t._e(),t.showPostalService?a("thong-tin-buu-chinh",{attrs:{postalService:t.thongTinChiTietHoSo}}):t._e(),t.showYkienCanBoThucHien?a("y-kien-can-bo",{ref:"ykiencanbo",attrs:{user_note:t.userNote}}):t._e(),a("div",{staticClass:"my-2 mx-3"},[a("v-btn",{attrs:{color:"primary",loading:t.loadingActionProcess,disabled:t.loadingActionProcess},nativeOn:{click:function(e){t.processAction()}}},[a("v-icon",[t._v("save")]),t._v(" \n          Xác nhận\n          "),a("span",{attrs:{slot:"loader"},slot:"loader"},[t._v("Loading...")])],1),a("v-btn",{attrs:{color:"primary"},on:{click:function(e){t.goBack()}}},[a("v-icon",{attrs:{size:"16"}},[t._v("reply")]),t._v("  \n          Quay lại\n        ")],1)],1)],1):t._e(),t.btnStateVisible?t._e():a("v-alert",{attrs:{outline:"",color:"success",icon:"check_circle",value:!0}},[t._v("\n      Thực hiện thành công!\n    ")])],1),a("v-dialog",{attrs:{scrollable:"",persistent:"","max-width":"700px"},model:{value:t.dialog_statusAction,callback:function(e){t.dialog_statusAction=e},expression:"dialog_statusAction"}},[a("v-card",[a("v-toolbar",{attrs:{flat:"",dark:"",color:"primary"}},[a("v-toolbar-title",[t._v("Trạng thái xử lý")]),a("v-spacer"),a("v-btn",{attrs:{icon:"",dark:""},nativeOn:{click:function(e){return t.closeDialogStatusAction(e)}}},[a("v-icon",[t._v("close")])],1)],1),a("v-card-text",{staticStyle:{"max-height":"350px"}},t._l(t.dossierSelected,(function(e,i){return a("div",{key:e.dossierId},[a("v-layout",{staticClass:"py-1 align-center row-list-style",staticStyle:{"border-bottom":"1px solid #ddd",position:"relative"},attrs:{wrap:""}},[a("v-flex",{attrs:{xs11:""}},[a("span",{staticClass:"text-bold",staticStyle:{position:"absolute"}},[t._v(t._s(i+1)+".")]),a("div",{staticClass:"ml-4"},[a("span",{staticClass:"text-bold"},[t._v(t._s(e.dossierNo))]),t._v(" - "+t._s(e.applicantName))])]),a("v-flex",{staticClass:"text-right",attrs:{xs1:""}},[e.statusAction?a("v-tooltip",{attrs:{top:""}},[a("v-icon",{attrs:{slot:"activator",size:"20",color:"primary"},slot:"activator"},[t._v("\n                  check\n                ")]),a("span",[t._v("Thành công")])],1):a("v-tooltip",{attrs:{top:""}},[a("v-icon",{attrs:{slot:"activator",size:"20",color:"red darken-3"},slot:"activator"},[t._v("\n                  block\n                ")]),a("span",[t._v("Thất bại")])],1)],1)],1)],1)})),0),a("v-card-actions",[a("v-spacer"),a("v-btn",{attrs:{color:"primary",loading:t.loadingAction,disabled:t.loadingAction},nativeOn:{click:function(e){t.processAction()}}},[a("v-icon",{attrs:{size:"20"}},[t._v("refresh")]),t._v(" \n          Thử lại\n          "),a("span",{attrs:{slot:"loader"},slot:"loader"},[t._v("Loading...")])],1),a("v-btn",{attrs:{color:"red",dark:"",loading:t.loadingAction,disabled:t.loadingAction},nativeOn:{click:function(e){return t.closeDialogStatusAction(e)}}},[a("v-icon",[t._v("undo")]),t._v(" \n          Thoát\n          "),a("span",{attrs:{slot:"loader"},slot:"loader"},[t._v("Loading...")])],1)],1)],1)],1)],1)},Ve=[],Le=a("1136"),He=a("c23d"),$e=a("4a3a"),Re=function(){var t=this,e=t.$createElement,a=t._self._c||e;return t.active?a("div",{staticClass:"taotailieuketqua",staticStyle:{"background-color":"white",width:"100%"}},[a("v-expansion-panel",{staticClass:"expansion-pl",attrs:{value:[!0],expand:""}},[a("v-expansion-panel-content",[a("div",{attrs:{slot:"header"},slot:"header"},[a("div",{staticClass:"background-triangle-small"},[a("v-icon",{attrs:{size:"18",color:"white"}},[t._v("star_rate")])],1),t._v(" Kết quả xử lý\n      ")]),a("v-card",t._l(t.createFiles,(function(e,i){return a("div",{key:e.partNo+"cr",staticClass:"form_alpaca",staticStyle:{position:"relative"}},[a("v-expansion-panel",{staticClass:"expaned__list__data",attrs:{expand:"",value:t.currentFormView==="formAlpaca"+e.partNo+t.id?[!0]:[!1]}},[a("v-expansion-panel-content",{attrs:{"hide-actions":""}},[a("div",{staticStyle:{"background-color":"#fff"},attrs:{slot:"header"},on:{click:function(e){t.stateView=!1}},slot:"header"},[a("div",{staticStyle:{"align-items":"center",background:"#fff","padding-left":"25px"},style:{width:t.checkStyle(e)}},[a("div",{staticClass:"mr-2",staticStyle:{"min-width":"20px",display:"flex"},on:{click:function(a){t.loadAlpcaFormClick(e)}}},[a("div",{staticClass:"header__tphs",staticStyle:{"min-width":"20px"}},[a("span",{staticClass:"text-bold"},[t._v(t._s(i+1)+".")]),t._v("  ")]),a("div",{staticClass:"header__tphs"},[t._v("\n                      "+t._s(e.partName)+" "),e.required?a("span",{staticStyle:{color:"red"}},[t._v(" (*)")]):t._e(),t._v("\n                        \n\n                      "),e.hasForm?a("span",{staticStyle:{color:"#004b94"}},[t._v("(Bản khai trực tuyến)")]):t._e(),t._v("\n                        \n\n                    ")])]),t._l(t.dossierFilesItems,(function(o,n){return e.partNo+t.id!==o.dossierPartNo+t.id||o.eForm?t._e():a("div",{key:n+"cr"},[a("div",{staticStyle:{width:"calc(100% - 370px)",display:"flex","align-items":"center",background:"#fff","padding-left":"25px","font-size":"12px"}},[a("span",{staticClass:"ml-3",staticStyle:{cursor:"pointer"},on:{click:function(e){e.stopPropagation(),t.viewFile2(o,n)}}},[a("v-icon",{staticClass:"mr-1",attrs:{color:t.getDocumentTypeIcon(o.fileType)["color"],size:t.getDocumentTypeIcon(o.fileType)["size"]}},[t._v("\n                          "+t._s(t.getDocumentTypeIcon(o.fileType)["icon"])+"\n                        ")]),t._v("\n                        "+t._s(o.displayName)+" - \n                        "),a("i",[t._v(t._s(o.modifiedDate))])],1),a("v-btn",{staticClass:"mx-0 my-0",attrs:{title:"Xóa",icon:"",ripple:""},on:{click:function(e){e.stopPropagation(),t.deleteSingleFile(o,n,i)}}},[a("v-icon",{staticStyle:{color:"red"}},[t._v("delete_outline")])],1),"plugin"===t.esignType&&"pdf"===o.fileType.toLowerCase()?a("v-tooltip",{attrs:{top:""}},[a("v-btn",{staticClass:"my-0",attrs:{slot:"activator",flat:"",icon:"",color:"indigo"},on:{click:function(e){e.stopPropagation(),t.signAction(o,n)}},slot:"activator"},[a("v-icon",{attrs:{size:"18"}},[t._v("fa fa-pencil-square-o")])],1),a("span",[t._v("Ký duyệt")])],1):t._e()],1)])}))],2)]),e.eForm?a("v-card",[a("v-card-text",{staticStyle:{overflow:"hidden","background-color":"rgba(244, 247, 213, 0.19)"}},[a("v-layout",{attrs:{wrap:""}},[a("v-flex",{staticClass:"text-xs-right",attrs:{xs12:""}},[a("div",{style:t.pstFixed>t.pstEl&&t.pstFixed<t.endEl+t.pstEl?"position:fixed;top:5px;z-index:101":"",attrs:{id:"wrapForm"+e.partNo+t.id}},[e.eForm&&e["editForm"]&&!e.embed?a("v-btn",{attrs:{color:"primary",id:"saveBtn"+e.partNo+e.templateNo},on:{click:function(a){a.stopPropagation(),t.saveAlpacaForm(e,i)}}},[t.loadingApacal?a("i",{staticClass:"fa fa-spinner",attrs:{"aria-hidden":"true"}}):a("v-icon",{attrs:{color:"white"}},[t._v("save")]),t._v(" \n                          Lưu lại\n                        ")],1):t._e(),e["editForm"]&&e.daKhai&&e.eForm?a("v-btn",{attrs:{color:"primary"},on:{click:function(a){a.stopPropagation(),t.previewFormAlpaca(e,i)}}},[t.loadingApacal?a("i",{staticClass:"fa fa-spinner",attrs:{"aria-hidden":"true"}}):a("v-icon",{attrs:{color:"white"}},[t._v("print")]),t._v(" \n                          Xem\n                        ")],1):t._e(),!e["editForm"]&&e.eForm?a("v-btn",{attrs:{color:"primary"},on:{click:function(a){a.stopPropagation(),t.editFormAlpaca(e,i)}}},[a("v-icon",{attrs:{color:"white"}},[t._v("edit")]),t._v(" \n                          Sửa\n                        ")],1):t._e(),e.daKhai&&e.eForm?a("v-btn",{attrs:{color:"primary"},on:{click:function(a){a.stopPropagation(),t.deleteSingleFileEform(e,i)}}},[t.loadingApacal?a("i",{staticClass:"fa fa-spinner",attrs:{"aria-hidden":"true"}}):a("v-icon",{attrs:{color:"white"}},[t._v("delete")]),t._v(" \n                          Xóa\n                        ")],1):t._e()],1),t.createFiles[i]["editForm"]&&!t.createFiles[i].embed?a("div",{attrs:{id:"formAlpaca"+e.partNo+t.id}}):t._e(),t.createFiles[i]["editForm"]&&t.createFiles[i].embed?a("div",[a("iframe",{attrs:{id:"formAlpaca"+e.partNo+t.id+"embed",width:"100%",height:"500px",frameborder:"0",src:""}})]):t._e(),t.createFiles[i]["editForm"]?t._e():a("iframe",{staticStyle:{overflow:"auto","min-height":"600px"},attrs:{id:"displayPDF"+e.partNo+t.id,src:"",type:"application/pdf",width:"100%",height:"100%",frameborder:"0"}})])],1)],1)],1):t._e()],1)],1),a("div",{staticClass:"absolute__btn group__thanh_phan pr-3 mr-1"},[t.loading?a("content-placeholders",{staticClass:"mt-1"},[a("content-placeholders-text",{attrs:{lines:1}})],1):a("v-layout",{attrs:{row:"",wrap:""}},[a("v-flex",{style:"plugin"===t.esignType?"width: 120px":"width: 100px"},[a("input",{staticStyle:{display:"none"},attrs:{type:"file",id:"file"+e.partNo},on:{change:function(a){t.onUploadSingleFile(a,e,i)}}}),t.progressUploadPart+t.id===e.partNo+t.id?a("v-progress-circular",{attrs:{width:2,size:25,color:"green",indeterminate:""}}):t._e(),t.progressUploadPart+t.id!==e.partNo+t.id?a("v-tooltip",{attrs:{top:""}},[a("v-btn",{staticClass:"mx-0 my-0",attrs:{slot:"activator",icon:""},on:{click:function(a){t.pickFile(e)}},slot:"activator"},[a("v-badge",[a("v-icon",{attrs:{size:"24",color:"#004b94"}},[t._v("cloud_upload")])],1)],1),e.partTip["extensions"]||e.partTip["maxSize"]?a("span",[t._v("Tải giấy tờ lên (Chấp nhận tải lên các định dạng: "+t._s(e.partTip["extensions"])+". Tối đa "+t._s(e.partTip["maxSize"])+" MB)")]):a("span",[t._v("Tải giấy tờ lên")])],1):t._e(),"plugin"===t.esignType&&e["eForm"]?a("v-tooltip",{attrs:{top:""}},[a("v-btn",{staticClass:"ml-2 my-0",attrs:{slot:"activator",flat:"",icon:"",color:"indigo"},on:{click:function(a){a.stopPropagation(),t.signAction(e,i,e.partNo)}},slot:"activator"},[a("v-icon",{attrs:{size:"22"}},[t._v("fa fa-pencil-square-o")])],1),a("span",[t._v("Ký duyệt")])],1):t._e()],1)],1)],1)],1)})),0),a("v-dialog",{staticStyle:{overflow:"hidden"},attrs:{"max-width":"1000",transition:"fade-transition"},model:{value:t.dialogPDF,callback:function(e){t.dialogPDF=e},expression:"dialogPDF"}},[a("v-card",[a("v-toolbar",{attrs:{dark:"",color:"primary"}},[a("v-toolbar-title",[t._v(t._s(t.documentType))]),a("v-spacer"),a("v-btn",{attrs:{icon:"",dark:""},nativeOn:{click:function(e){t.dialogPDF=!1}}},[a("v-icon",[t._v("close")])],1)],1),t.dialogPDFLoading?a("div",{staticStyle:{"min-height":"600px","text-align":"center",margin:"auto",padding:"25%"}},[a("v-progress-circular",{attrs:{size:100,width:1,color:"primary",indeterminate:""}})],1):t._e(),a("iframe",{directives:[{name:"show",rawName:"v-show",value:!t.dialogPDFLoading,expression:"!dialogPDFLoading"}],staticStyle:{overflow:"auto","min-height":"600px"},attrs:{id:"dialogPDFPreview"+t.id,src:"",type:"application/pdf",width:"100%",height:"100%",frameborder:"0"}})],1)],1)],1)],1),a("v-dialog",{attrs:{"hide-overlay":"",persistent:"","max-width":"350",transition:"fade-transition"},model:{value:t.dialogConfirm,callback:function(e){t.dialogConfirm=e},expression:"dialogConfirm"}},[a("v-card",{attrs:{flat:""}},[a("v-toolbar",{attrs:{flat:"",dark:"",color:"#1867c0"}},[a("v-toolbar-title",{staticStyle:{"font-size":"16px"}},[t._v(t._s(t.labelConfirm))]),a("v-spacer")],1),a("v-card-actions",{staticClass:"mt-3"},[a("v-flex",{staticClass:"text-xs-center"},[a("v-btn",{staticClass:"mr-2",attrs:{color:"primary"},nativeOn:{click:function(e){return t.confirmAction(e)}}},[a("v-icon",[t._v("send")]),t._v(" \n            Đồng ý\n          ")],1),a("v-btn",{staticClass:"ml-2",staticStyle:{color:"#fff"},attrs:{color:"red"},nativeOn:{click:function(e){t.dialogConfirm=!1}}},[a("v-icon",[t._v("close")]),t._v(" \n            Bỏ qua\n          ")],1)],1)],1)],1)],1),a("v-dialog",{attrs:{"max-width":"1000",transition:"fade-transition"},model:{value:t.dialogSelectDosier,callback:function(e){t.dialogSelectDosier=e},expression:"dialogSelectDosier"}},[a("v-card",{attrs:{flat:""}},[a("v-toolbar",{attrs:{flat:"",dark:"",color:"primary"}},[a("v-toolbar-title",[t._v("Chọn hồ sơ")]),a("v-spacer"),a("v-btn",{attrs:{icon:"",dark:""},nativeOn:{click:function(e){return t.cancelAddFile(e)}}},[a("v-icon",[t._v("close")])],1)],1),a("v-card-text",{staticClass:"pt-0 pb-0 px-0"},[a("ho-so-nhom",{attrs:{dossiersgroup:t.dossierIntoGroup}})],1),a("v-card-actions",[a("v-spacer"),a("v-btn",{attrs:{color:"primary"},nativeOn:{click:function(e){t.addFileToDossier()}}},[a("v-icon",[t._v("send")]),t._v(" \n          Xác nhận\n        ")],1),a("v-btn",{staticStyle:{color:"#fff"},attrs:{color:"red"},nativeOn:{click:function(e){return t.cancelAddFile(e)}}},[a("v-icon",[t._v("close")]),t._v(" \n          Bỏ qua\n        ")],1)],1)],1)],1)],1):t._e()},Ge=[],qe=a("e211"),Ue=qe["a"],Be=Object(p["a"])(Ue,Re,Ge,!1,null,null,null),Ke=Be.exports;g()(Be,{VBadge:ft["a"],VBtn:_["a"],VCard:y["a"],VCardActions:_t["a"],VCardText:_t["b"],VDialog:Tt["a"],VExpansionPanel:Yt["a"],VExpansionPanelContent:Jt["a"],VFlex:D["a"],VIcon:T["a"],VLayout:x["a"],VProgressCircular:w["a"],VSpacer:Nt["a"],VToolbar:It["a"],VToolbarTitle:At["b"],VTooltip:wt["a"]});var We=a("6e92"),ze=a("0838"),je=a("26ed"),Qe=a("8bf2"),Ye={props:["index"],components:{"thong-tin-co-ban-ho-so":Le["a"],"phan-cong":K["a"],"tra-ket-qua":He["a"],"thu-phi":ge["a"],"ky-duyet":$e["a"],"y-kien-can-bo":W["a"],"tai-lieu-ket-qua":Ke,"form-bo-sung-thong-tin":j["a"],"thanh-phan-ho-so":We["a"],"ngay-hen-tra":ze["a"],"ngay-gia-han":je["a"],"thong-tin-buu-chinh":Qe["a"]},data:function(){return{headersTable:[{text:"#",align:"center",sortable:!1},{text:"Mã hồ sơ",align:"center",sortable:!1},{text:"Chủ hồ sơ",align:"center",sortable:!1},{text:"Địa chỉ",align:"center",sortable:!1}],mutilpleAction:!1,actionExits:[],dossierProcess:[],countProcessed:0,activeNotify:!1,dialog_statusAction:!1,thongTinChiTietHoSo:{},nextActions:[],payments:"",dossierActions:[],itemselect:"",actionNote:"",actionsSubmitLoading:!1,showThongTinCoBanHoSo:!1,showYkienCanBoThucHien:!1,showFormBoSungThongTinNgan:!1,showPhanCongNguoiThucHien:!1,showTaoTaiLieuKetQua:!1,showKyPheDuyetTaiLieu:!1,showTraKetQua:!1,showThuPhi:!1,showEditDate:!1,showExtendDateEdit:!1,showPostalService:!1,dueDateEdit:"",checkInput:0,viaPortalDetail:0,showThucHienThanhToanDienTu:!1,dossierItemDialogPick:"",itemDialogPick:"",resultDialogPick:"",indexDialogPick:"",userNote:0,partView:"",stateView:!1,payment_type:0,type_assign:0,returnFiles:[],assign_items:[],btnStateVisible:!0,dialogActionProcess:!1,rollbackable:!1,dialogPDF:!1,dialogPDFLoading:!1,loadingActionProcess:!1,loadingAction:!1,arrDossierId:[],actionActiveTmp:[],gopThuPhi:!0,changePaymentStatus:!1,createFiles:[]}},computed:{loading:function(){return this.$store.getters.loading},originality:function(){var t=this;return t.getOriginality()},dossierSelectedDoAction:function(){return this.$store.getters.dossierSelectedDoAction},dossierSelected:function(){var t=this;return t.$store.getters.dossierSelected},actionActive:function(){return console.log("actionActive-------",this.$store.getters.actionActive),this.$store.getters.actionActive},activeGetCounter:function(){return this.$store.getters.activeGetCounter}},created:function(){var t=this;t.$nextTick((function(){t.btnIndex=-1;var e=t.$router.history.current.query;console.log("currentQuery",e);var a=function(){try{if(void 0===t.actionActive.action||null===t.actionActive.action||""===t.actionActive.action){var a=JSON.parse(e.actionActive);a&&t.$store.dispatch("loadActionActive",a)}}catch(i){console.log(i)}t.getNextActions();try{"undefined"!==typeof gopThuPhi&&(t.gopThuPhi=gopThuPhi)}catch(o){}};if(0===t.dossierSelectedDoAction.length){var i=[];if(e.hasOwnProperty("dossiers")){var o=e.dossiers.split(",");t.arrDossierId=o,o.forEach((function(e){i.push(t.$store.dispatch("getDetailDossier",e))})),Promise.all(i).then((function(e){t.thongTinChiTietHoSo=e[0],t.$store.dispatch("loadDossierSelected",e),a()})).catch((function(t){}))}}else t.thongTinChiTietHoSo=t.dossierSelectedDoAction[0],t.$store.dispatch("loadDossierSelected",t.dossierSelectedDoAction),a()}))},updated:function(){var t=this;t.$nextTick((function(){}))},watch:{},methods:{initData:function(t){},goBack:function(){window.history.back()},processPullBtnDetailRouter:function(t,e,a,i){console.log("result Nextaction",a);var o=this,n=!1;if(o.dossierId=t.dossierId,o.showYkienCanBoThucHien=!1,o.showFormBoSungThongTinNgan=!1,o.showPhanCongNguoiThucHien=!1,o.showTaoTaiLieuKetQua=!1,o.showKyPheDuyetTaiLieu=!1,o.showTraKetQua=!1,o.showThuPhi=!1,o.showEditDate=!1,o.showThucHienThanhToanDienTu=!1,o.dossierItemDialogPick=t,o.itemDialogPick=e,o.resultDialogPick=a,o.indexDialogPick=i,o.userNote=0,null!==a&&void 0!==a&&"undefined"!==a&&(a.hasOwnProperty("userNote")||a.hasOwnProperty("extraForm")||a.hasOwnProperty("allowAssignUser")||a.hasOwnProperty("createFiles")||a.hasOwnProperty("eSignature")||a.hasOwnProperty("returnFiles")||a.hasOwnProperty("payment")||a.hasOwnProperty("checkInput"))){if(!a.hasOwnProperty("userNote")||1!==a.userNote&&"1"!==a.userNote&&2!==a.userNote&&"2"!==a.userNote||(n=!0,o.showYkienCanBoThucHien=!0,o.userNote=a.userNote),a.hasOwnProperty("extraForm")&&a.extraForm&&(n=!0,o.showFormBoSungThongTinNgan=!0),a.hasOwnProperty("allowAssignUser")&&0!==a.allowAssignUser&&(console.log("allowAssignUser",a.toUsers),Array.isArray(a.toUsers)?o.assign_items=a.toUsers:o.assign_items=[a.toUsers],o.type_assign=a.allowAssignUser,n=!0,o.showPhanCongNguoiThucHien=!0),a.hasOwnProperty("createFiles")&&a.createFiles&&null!==a.createFiles&&void 0!==a.createFiles&&"undefined"!==a.createFiles&&(a.createFiles.length>0||[a.createFiles].length>0)&&(n=!0,o.showTaoTaiLieuKetQua=!0,o.createFiles=Array.isArray(a.createFiles)?a.createFiles:[a.createFiles],console.log("showTaoTaiLieuKetQua5555",o.createFiles)),a.hasOwnProperty("eSignature")&&a.eSignature&&(n=!0,o.showKyPheDuyetTaiLieu=!0),a.hasOwnProperty("returnFiles")&&null!==a.returnFiles&&void 0!==a.returnFiles&&"undefined"!==a.returnFiles&&a.returnFiles.length>0&&(n=!0,o.showTraKetQua=!0,o.returnFiles=a.returnFiles),o.gopThuPhi&&a.hasOwnProperty("payment")&&null!==a.payment&&void 0!==a.payment&&"undefined"!==a.payment&&a.payment.requestPayment>0)if(3===a.payment.requestPayment||"3"===a.payment.requestPayment){n=!0,o.showThanhToanDienTu=!0;var s={dossierId:o.dossierId,referenceUid:t.referenceUid};o.$store.dispatch("loadDossierPayments",s).then((function(t){o.paymentProfile=t})).catch((function(t){}))}else n=!0,o.showThuPhi=!0,o.payments=a.payment,o.viaPortalDetail=t.viaPostal;else!o.gopThuPhi&&a.hasOwnProperty("payment")&&null!==a.payment&&void 0!==a.payment&&"undefined"!==a.payment&&a.payment.requestPayment>0&&3!==a.payment.requestPayment&&(o.payments=a.payment,o.changePaymentStatus=!0);a.hasOwnProperty("checkInput")&&null!==a.checkInput&&void 0!==a.checkInput&&"undefined"!==a.checkInput&&(o.checkInput=a.checkInput,2===a.checkInput&&(n=!0,o.$refs.thanhphanhoso.initData(o.thongTinChiTietHoSo))),a.hasOwnProperty("receiving")&&null!==a.receiving&&void 0!==a.receiving&&"undefined"!==a.receiving&&!0===a.receiving.editable&&(n=!0,o.showEditDate=!0,o.dueDateEdit=""!==a.receiving.dueDate?new Date(a.receiving.dueDate):"",o.receiveDateEdit=a.receiving.receiveDate)}n&&(o.dialogActionProcess=!0,o.loadingActionProcess=!1)},processPullBtnDetail:function(t,e){var a=this;a.btnIndex=e,a.itemAction=t,a.actionIdCurrent=t.processActionId;var i={dossierId:a.dossierSelected[0].dossierId,actionId:t.processActionId};a.dialogActionProcess=!1,a.$store.dispatch("processPullBtnDetail",i).then((function(i){a.processPullBtnDetailRouter(a.dossierSelected[0],t,i,e)}))},doCopy:function(t,e,a,i){var o=this,n={dossierId:t.dossierId};o.loadingAction=!0,o.$store.dispatch("doCopy",n).then((function(t){o.loadingAction=!1,o.indexAction=-1,o.$router.push({path:"/danh-sach-ho-so/"+o.index+"/ho-so/"+t.dossierId+"/"+o.itemAction.form,query:o.$router.history.current.query})}))},doCancel:function(t,e,a,i){var o=this;if(o.loadingAction=!0,i)console.log(o.selected);else{var n={dossierId:t.dossierId};o.$store.dispatch("doCancel",n).then((function(t){o.loadingAction=!1,o.indexAction=-1,o.$router.push({path:"/danh-sach-ho-so/"+o.index+"/ho-so/"+t.dossierId+"/"+o.itemAction.form,query:o.$router.history.current.query})}))}},processAction:function(){var t=this,e=t.$store.getters.loadingInitData,a=e.user.userName?e.user.userName:"";t.dossierProcess=t.dossierSelected.filter((function(t){return!1===t["statusAction"]||!t["statusAction"]}));var i=t.dossierProcess.map((function(t){return t.dossierId})).toString(),o=function(){if(t.countProcessed=0,t.mutilpleAction){for(var e in t.actionExits)for(var i in t.dossierSelected)if(!1===t.dossierSelected[i]["statusAction"]||!t.dossierSelected[i]["statusAction"]){var o={dossierId:t.dossierSelected[i].dossierId,actionCode:t.actionExits[e].actionCode,actionUser:a};t.postAction(o,t.dossierSelected[i],i)}}else for(var n in t.dossierSelected)if(!1===t.dossierSelected[n]["statusAction"]||!t.dossierSelected[n]["statusAction"]){var s={dossierId:t.dossierSelected[n].dossierId,actionCode:t.actionActive.action,actionUser:a};t.postAction(s,t.dossierSelected[n],n)}};t.showTaoTaiLieuKetQua?function(){var e=t.$refs.tailieuketqua.getCreateFileAttach(),a=[];for(var n in e)e[n].hasOwnProperty("filesAttach")&&e[n]["filesAttach"].length>0&&e[n]["filesAttach"].forEach((function(e){a.push(t.$store.dispatch("attachFileThaoTacGop",Object.assign(e,{dossierIds:i})))}));a.length>0?Promise.all(a).then((function(t){o()})).catch((function(t){L.a.error("Đính kèm tài liệu không thành công. Vui lòng thử lại")})):o()}():o()},postAction:function(t,e,a){var i=this,o=!0,n=!0;if(i.showPhanCongNguoiThucHien){t["toUsers"]=i.assign_items;var s=i.$refs.phancong.doExport();console.log("validPhanCong",s),o=!!s}var r=null;if(i.payments&&(i.showThuPhi?r={requestPayment:i.payments["requestPayment"],advanceAmount:Number(i.payments["advanceAmount"].toString().replace(/\./g,"")),feeAmount:Number(i.payments["feeAmount"].toString().replace(/\./g,"")),serviceAmount:Number(i.payments["serviceAmount"].toString().replace(/\./g,"")),shipAmount:Number(i.payments["shipAmount"].toString().replace(/\./g,""))}:!i.showThuPhi&&i.changePaymentStatus&&(r={requestPayment:i.payments["requestPayment"]})),(i.showThuPhi||i.changePaymentStatus)&&(t["payment"]=r),i.showFormBoSungThongTinNgan&&(t["payload"]=i.$refs.formBoSungThongTinNgan.formSubmitData()),i.showKyPheDuyetTaiLieu)i.$refs.kypheduyettailieu.doExport();if(i.showEditDate){var c=i.$refs.ngayhentra.getDateInput();console.log("dueDateEdit",c);var l={dueDate:c,receiveDate:i.receiveDateEdit};t["payload"]=l}if(i.showYkienCanBoThucHien){var d=i.$refs.ykiencanbo.doExport(),u="";d.valid?(n=!0,u=d.text):n=!1,t["userNote"]=u}i.validateAction=!(!o||!n);i.$router.history.current.query;i.showYkienCanBoThucHien,i.validateAction&&(i.loadingActionProcess=!0,i.$store.dispatch("processDossierRouter",t).then((function(t){i.countProcessed+=1,i.dossierSelected[a]["statusAction"]=!0,i.countProcessed===i.dossierProcess.length*i.actionExits.length&&i.activeNotify?i.dialog_statusAction=!0:i.countProcessed===i.dossierProcess.length*i.actionExits.length&&(i.loadingActionProcess=!1,i.loadingAction=!1,i.btnStateVisible=!1,setTimeout((function(){i.goBack()}),500))})).catch((function(t){i.countProcessed+=1,i.activeNotify=!0,i.dossierSelected[a]["statusAction"]=!1,i.countProcessed===i.dossierProcess.length*i.actionExits.length&&i.activeNotify?i.dialog_statusAction=!0:i.countProcessed===i.dossierProcess.length*i.actionExits.length&&(i.loadingActionProcess=!1,i.loadingAction=!1,i.btnStateVisible=!1,setTimeout((function(){i.goBack()}),500))})))},doPrint02:function(t,e,a,i){var o=this;if(null===o.thuTucHanhChinhSelected||void 0===o.thuTucHanhChinhSelected||"undefined"===o.thuTucHanhChinhSelected)alert("Loại thủ tục bắt buộc phải chọn");else{var n={document:e.document,serviceCode:o.thuTucHanhChinhSelected.serviceCode,govAgencyCode:o.thuTucHanhChinhSelected.govAgencyCode,dossiers:JSON.stringify(o.selected)};o.dialogPDFLoading=!0,o.dialogPDF=!0,o.$store.dispatch("doPrint02",n).then((function(t){o.dialogPDFLoading=!1,document.getElementById("dialogPDFPreview").src=t}))}},doPrint03:function(t,e,a,i){var o=this;o.dialogPDFLoading=!0,o.dialogPDF=!0;var n={dossierId:t.dossierId,document:e.document};o.$store.dispatch("doPrint03",n).then((function(t){o.dialogPDFLoading=!1,document.getElementById("dialogPDFPreview").src=t}))},doGuiding:function(t,e,a,i){var o=this;if(null===o.thuTucHanhChinhSelected||void 0===o.thuTucHanhChinhSelected||"undefined"===o.thuTucHanhChinhSelected)alert("Loại thủ tục bắt buộc phải chọn");else{var n={serviceConfigId:o.thuTucHanhChinhSelected.serviceConfigId};o.dialogPDFLoading=!0,o.dialogPDF=!0,o.$store.dispatch("doGuiding",n).then((function(t){o.dialogPDFLoading=!1,document.getElementById("dialogPDFPreview").src=t}))}},getNextActions:function(){var t=this;console.log("run next action");t.$router.history.current.query;var e={};t.dossierSelected.length>0?e["dossierId"]=t.dossierSelected[0].dossierId:e["dossierId"]=t.arrDossierId[0];var a=t.$router.history.current.query;t.$store.dispatch("pullNextactions",e).then((function(e){e=e.filter((function(t){return 1===t.enable}));var i=[];if(void 0!==t.actionActive.action&&null!==t.actionActive.action&&"undefined"!==t.actionActive.action&&""!==t.actionActive.action&&(i=t.actionActive.action.split(",")),1===i.length){t.actionExits=i;var o=e.filter((function(e){return e.actionCode.toString()===t.actionActive.action.toString()}));t.dialogActionProcess=!0,t.mutilpleAction=!1,t.processPullBtnDetail(o[0],a.btnIndex)}else{for(var n in t.mutilpleAction=!0,t.actionExits=[],i){var s,r=!1;for(var c in e)if(i[n].toString()===e[c].actionCode.toString()){r=!0,s=e[c];break}r&&t.actionExits.push(s)}t.dialogActionProcess=!0,console.log("actionExits",t.actionExits[0]),t.actionExits[0]&&t.processPullBtnDetail(t.actionExits[0],a.btnIndex)}}))},postNextActions:function(t){var e=this;if(t["dossierId"]=e.thongTinChiTietHoSo.dossierId,t.allowAssignUser>0)e.$store.dispatch("reassignDossier",t).then((function(a){console.log(a);var i={dossierId:e.dossierId,actionCode:t.actionCode,actionNote:e.actionNote,actionUser:"",payload:"",security:"",assignUsers:"",payment:"",createDossiers:""};e.$store.dispatch("postAction",i).then((function(t){console.log(t)}))}));else{var a={dossierId:e.dossierId,actionCode:t.actionCode,actionNote:e.actionNote,actionUser:"",payload:"",security:"",assignUsers:"",payment:"",createDossiers:""};e.$store.dispatch("postAction",a).then((function(t){console.log(t)}))}},closeDialogStatusAction:function(){var t=this;t.dialog_statusAction=!1,t.btnStateVisible=!1,setTimeout((function(){t.goBack()}),500)}},filters:{dateTimeView:function(t){if(t){var e=new Date(t);return"".concat(e.getDate().toString().padStart(2,"0"),"/").concat((e.getMonth()+1).toString().padStart(2,"0"),"/").concat(e.getFullYear()," | ").concat(e.getHours().toString().padStart(2,"0"),":").concat(e.getMinutes().toString().padStart(2,"0"))}return""},getMaxDueDate:function(t){var e=Math.max.apply(Math,t.map((function(t){return t.actionOverdue})));return e}}},Je=Ye,Xe=Object(p["a"])(Je,Me,Ve,!1,null,null,null),Ze=Xe.exports;g()(Xe,{VAlert:v["a"],VBtn:_["a"],VCard:y["a"],VCardActions:_t["a"],VCardText:_t["b"],VCardTitle:qt["a"],VDataTable:Dt["a"],VDialog:Tt["a"],VExpansionPanel:Yt["a"],VExpansionPanelContent:Jt["a"],VFlex:D["a"],VIcon:T["a"],VLayout:x["a"],VProgressCircular:w["a"],VSpacer:Nt["a"],VToolbar:It["a"],VToolbarTitle:At["b"],VTooltip:wt["a"]});var ta=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",{staticClass:"row-header"},[a("div",{staticClass:"background-triangle-big"},[t._v(" HOÀN THIỆN BỔ SUNG HỒ SƠ ")]),a("div",{staticClass:"layout row wrap header_tools row-blue"},[a("div",{staticClass:"flex xs8 sm10 pl-3 text-ellipsis text-bold"},[t._v("\n        "+t._s(t.thongTinChiTietHoSo.serviceName)+"\n      ")]),a("div",{staticClass:"flex xs4 sm2 text-right",staticStyle:{"margin-left":"auto"}},[a("v-btn",{staticClass:"my-0 mx-0 btn-border-left",attrs:{flat:"","active-class":"temp_active"},on:{click:t.goBack}},[t._v("\n        Quay lại  \n          "),a("v-icon",{attrs:{size:"16"}},[t._v("undo")])],1)],1)])]),a("v-expansion-panel",{staticClass:"expansion-p0",attrs:{value:[!0],expand:""}},[a("v-expansion-panel-content",{attrs:{value:!0}},[a("div",{attrs:{slot:"header"},slot:"header"},[a("div",{staticClass:"background-triangle-small"},[t._v("I. ")]),t._v("THÔNG TIN HỒ SƠ\n      ")]),a("v-card",{staticClass:"mb-2"},[a("v-card-text",[a("v-layout",{attrs:{row:"",wrap:""}},[a("v-flex",{attrs:{xs12:"",sm2:""}},[t.loading?a("content-placeholders",{staticClass:"mt-1"},[a("content-placeholders-text",{attrs:{lines:1}})],1):a("v-subheader",{staticClass:"pl-0 text-header"},[t._v("Loại hồ sơ: ")])],1),a("v-flex",{attrs:{xs12:"",sm4:""}},[t.loading?a("content-placeholders",{staticClass:"mt-1"},[a("content-placeholders-text",{attrs:{lines:1}})],1):a("v-subheader",{staticClass:"pl-0 text-header header-text-field"},[a("v-chip",{staticClass:"pl-0 mx-0 my-0",attrs:{small:""}},[t._v(" Hồ sơ trực tuyến ")])],1)],1),a("v-flex",{attrs:{xs12:"",sm2:""}},[t.loading?a("content-placeholders",{staticClass:"mt-1"},[a("content-placeholders-text",{attrs:{lines:1}})],1):a("v-subheader",{staticClass:"pl-0 text-header"},[t._v("Mã hồ sơ: ")])],1),a("v-flex",{attrs:{xs12:"",sm4:""}},[t.loading?a("content-placeholders",{staticClass:"mt-1"},[a("content-placeholders-text",{attrs:{lines:1}})],1):t._e(),a("v-subheader",{staticClass:"pl-0 text-header header-text-field"},[t._v(t._s(t.thongTinChiTietHoSo.dossierIdCTN))])],1),a("v-flex",{attrs:{xs12:"",sm2:""}},[t.loading?a("content-placeholders",{staticClass:"mt-1"},[a("content-placeholders-text",{attrs:{lines:1}})],1):a("v-subheader",{staticClass:"pl-0 text-header"},[t._v("Ngày tiếp nhận: ")])],1),a("v-flex",{attrs:{xs12:"",sm4:""}},[t.loading?a("content-placeholders",{staticClass:"mt-1"},[a("content-placeholders-text",{attrs:{lines:1}})],1):t._e(),a("v-subheader",{staticClass:"pl-0 text-header header-text-field"},[t._v(t._s(t.thongTinChiTietHoSo.receiveDate))])],1),a("v-flex",{attrs:{xs12:"",sm2:""}},[t.loading?a("content-placeholders",{staticClass:"mt-1"},[a("content-placeholders-text",{attrs:{lines:1}})],1):a("v-subheader",{staticClass:"pl-0 text-header"},[t._v("Chủ hồ sơ: ")])],1),a("v-flex",{attrs:{xs12:"",sm4:""}},[t.loading?a("content-placeholders",{staticClass:"mt-1"},[a("content-placeholders-text",{attrs:{lines:1}})],1):t._e(),a("v-subheader",{staticClass:"pl-0 text-header header-text-field"},[t._v(t._s(t.thongTinChiTietHoSo.applicantName))])],1),a("v-flex",{attrs:{xs12:"",sm2:""}},[t.loading?a("content-placeholders",{staticClass:"mt-1"},[a("content-placeholders-text",{attrs:{lines:1}})],1):a("v-subheader",{staticClass:"pl-0 text-header"},[t._v("Địa chỉ: ")])],1),a("v-flex",{attrs:{xs12:"",sm10:""}},[t.loading?a("content-placeholders",{staticClass:"mt-1"},[a("content-placeholders-text",{attrs:{lines:1}})],1):t._e(),a("v-subheader",{staticClass:"pl-0 text-header header-text-field"},[t._v(t._s(t.thongTinChiTietHoSo.address))])],1),a("v-flex",{attrs:{xs12:"",sm2:""}},[t.loading?a("content-placeholders",{staticClass:"mt-1"},[a("content-placeholders-text",{attrs:{lines:1}})],1):a("v-subheader",{staticClass:"pl-0 text-header"},[t._v("Người nộp: ")])],1),a("v-flex",{attrs:{xs12:"",sm4:""}},[t.loading?a("content-placeholders",{staticClass:"mt-1"},[a("content-placeholders-text",{attrs:{lines:1}})],1):t._e(),a("v-subheader",{staticClass:"pl-0 text-header header-text-field"},[t._v(t._s(t.thongTinChiTietHoSo.delegateName))])],1),a("v-flex",{attrs:{xs12:"",sm2:""}},[t.loading?a("content-placeholders",{staticClass:"mt-1"},[a("content-placeholders-text",{attrs:{lines:1}})],1):a("v-subheader",{staticClass:"pl-0 text-header"},[t._v("Số CMND: ")])],1),a("v-flex",{attrs:{xs12:"",sm4:""}},[t.loading?a("content-placeholders",{staticClass:"mt-1"},[a("content-placeholders-text",{attrs:{lines:1}})],1):t._e(),a("v-subheader",{staticClass:"pl-0 text-header header-text-field"},[t._v(t._s(t.thongTinChiTietHoSo.applicantIdNo))])],1)],1)],1)],1)],1)],1),a("v-expansion-panel",{staticClass:"expansion-p0",staticStyle:{position:"relative"},attrs:{value:[!0],expand:""}},[a("v-expansion-panel-content",{attrs:{value:!0}},[a("div",{attrs:{slot:"header"},slot:"header"},[a("div",{staticClass:"background-triangle-small"},[t._v("II. ")]),t._v("THÀNH PHẦN HỒ SƠ\n      ")]),a("thanh-phan-ho-so",{ref:"thanhphanhoso"})],1)],1),a("div",{staticClass:"text-center mt-2"},[t._l(t.btnDossierDynamics,(function(e,i){return t.visibleBtnNextAction?a("v-btn",{key:i,attrs:{color:"primary"},on:{click:function(a){t.nextAction(e,i)}}},[t._v("\n      "+t._s(e.actionName)+"\n      "),a("span",{attrs:{slot:"loader"},slot:"loader"},[t._v("Loading...")])]):t._e()})),a("v-btn",{attrs:{color:"primary",loading:t.loadingAction,disabled:t.loadingAction},nativeOn:{click:function(e){return t.goBack(e)}}},[a("v-icon",[t._v("undo")]),t._v("  \n      Quay lại\n      "),a("span",{attrs:{slot:"loader"},slot:"loader"},[t._v("Loading...")])],1)],2)],1)},ea=[],aa={props:["index","id"],data:function(){return{dialog_addTHPHS:!1,loadingAction:!1,thongTinChiTietHoSo:{},btnDossierDynamics:[],visibleBtnNextAction:!0}},computed:{loading:function(){return this.$store.getters.loading}},components:{"thanh-phan-ho-so":We["a"]},created:function(){var t=this;t.initData(t.id),t.getNextActions(t.id)},watch:{},methods:{initData:function(t){var e=this;e.$store.dispatch("getDetailDossier",t).then((function(t){e.thongTinChiTietHoSo=t,e.$refs.thanhphanhoso.initData(t)}))},goBack:function(){window.history.back()},getNextActions:function(t){var e=this,a={dossierId:t};e.$store.dispatch("pullNextactions",a).then((function(t){e.btnDossierDynamics=t}))},nextAction:function(t,e){console.log("Đã bổ sung");var a=this;console.log("luu Ho So--------------------"),a.$store.commit("setPrintPH",!1);var i=this.$refs.thanhphanhoso.dossierTemplateItems,o=a.$refs.thanhphanhoso.dossierFilesItems,n=i,s=[],r=[];n&&(n.forEach((function(t,e){1===t.partType&&(t["dossierId"]=a.thongTinChiTietHoSo.dossierId,r.push(a.$store.dispatch("postDossierMark",t)))})),0!==o.length?o.forEach((function(t,e){t.eForm&&(t["dossierId"]=a.thongTinChiTietHoSo.dossierId,s.push(a.$store.dispatch("putAlpacaForm",t)))})):n.forEach((function(t,e){1===t.partType&&t.hasForm&&(t["dossierId"]=a.thongTinChiTietHoSo.dossierId,s.push(a.$store.dispatch("postEform",t)))}))),Promise.all(r).then((function(t){})).catch((function(t){})),Promise.all(s).then((function(e){console.log(e);var i={dossierId:a.thongTinChiTietHoSo.dossierId,actionCode:t.actionCode},o=a.$router.history.current.query;a.loadingActionProcess=!0,a.$store.dispatch("processDossierRouter",i).then((function(t){a.visibleBtnNextAction=!1,a.$router.push({path:a.$router.history.current.path,query:{recount:Math.floor(100*Math.random())+1,renew:Math.floor(100*Math.random())+1,q:o["q"]}})}))})).catch((function(t){console.log("reject=============",t)}))}}},ia=aa,oa=Object(p["a"])(ia,ta,ea,!1,null,null,null),na=oa.exports;g()(oa,{VBtn:_["a"],VCard:y["a"],VCardText:_t["b"],VChip:Ct["a"],VExpansionPanel:Yt["a"],VExpansionPanelContent:Jt["a"],VFlex:D["a"],VIcon:T["a"],VLayout:x["a"],VSubheader:be["a"]});var sa=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",["NEW"===t.formCode||"NEW_GROUP"===t.formCode||"NEW_GROUP_CV"===t.formCode||"NEW_GROUP_CV_DI"===t.formCode||"UPDATE"===t.formCode||"COPY"===t.formCode?a("tiep-nhan-ho-so-detail",{ref:"tiepnhanhosodetail",attrs:{formCode:t.formCode,id:t.id,index:t.index}}):t._e()],1)},ra=[],ca=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("v-form",{ref:"formTiepNhanHoSo",attrs:{"lazy-validation":""},model:{value:t.validTNHS,callback:function(e){t.validTNHS=e},expression:"validTNHS"}},["version_1.0"===t.formTemplate?a("div",[a("div",{staticClass:"row-header"},[a("div",{staticClass:"background-triangle-big"},["UPDATE"===t.formCode?a("span",[t._v("SỬA HỒ SƠ")]):"COPY"===t.formCode?a("span",[t._v("SAO CHÉP HỒ SƠ")]):t.isOffLine?a("span",[t._v("NỘP HỒ SƠ TRỰC TUYẾN")]):"NEW_GROUP"===t.formCode?a("span",[t._v("THÊM NHÓM HỒ SƠ")]):a("span",[t._v("THÊM MỚI HỒ SƠ")])]),a("div",{staticClass:"layout row wrap header_tools row-blue"},[a("div",{staticClass:"flex xs8 sm10 pl-3 text-ellipsis text-bold",attrs:{title:t.thongTinChiTietHoSo.serviceName}},[t._v("\n            "+t._s(t.thongTinChiTietHoSo.serviceName)+"\n          ")]),a("div",{staticClass:"flex xs4 sm2 text-right",staticStyle:{"margin-left":"auto"}},[a("v-btn",{staticClass:"my-0 mx-0 btn-border-left",attrs:{flat:"","active-class":"temp_active"},on:{click:t.goBack}},[a("v-icon",{attrs:{size:"18"}},[t._v("reply")]),t._v("  \n              Quay lại\n            ")],1)],1)])]),1!==t.originality&&"NEW_GROUP"!==t.formCode?a("div",{style:t.isNotarization?"display: none":"position: relative"},[a("v-expansion-panel",{staticClass:"expansion-pl",attrs:{value:[!0],expand:""}},[a("v-expansion-panel-content",[a("thong-tin-chung",{ref:"thongtinchunghoso"})],1)],1)],1):t._e(),1===t.originality?a("div",{staticStyle:{position:"relative"}},[a("v-expansion-panel",{staticClass:"expansion-pl",attrs:{value:[!0],expand:""}},[a("v-expansion-panel-content",[a("div",{attrs:{slot:"header"},slot:"header"},[a("div",{staticClass:"background-triangle-small"},[a("v-icon",{attrs:{size:"18",color:"white"}},[t._v("star_rate")])],1),t._v("\n              HƯỚNG DẪN      \n            ")]),a("v-layout",{attrs:{wrap:""}},[a("v-flex",{attrs:{xs12:"",sm12:""}},[a("div",{staticClass:"ml-3 mr-3 pt-1",domProps:{innerHTML:t._s(t.thongTinChiTietHoSo.dossierNote)}})])],1)],1)],1)],1):t._e(),a("thong-tin-chu-ho-so",{ref:"thongtinchuhoso",attrs:{requiredConfig:t.requiredConfigData,formCode:t.formCode,showApplicant:"NEW_GROUP"===t.formCode,showDelegate:!!t.isNotarization}}),t.isNotarization?t._e():a("div",[a("v-expansion-panel",{staticClass:"expansion-pl",attrs:{value:[!0],expand:""}},[a("v-expansion-panel-content",[a("div",{staticStyle:{display:"flex","align-items":"center"},attrs:{slot:"header"},slot:"header"},[a("div",{staticClass:"background-triangle-small"},[a("v-icon",{attrs:{size:"18",color:"white"}},[t._v("star_rate")])],1),"NEW_GROUP"===t.formCode?a("span",[t._v("Tên nhóm hồ sơ")]):a("span",[t._v("Tên hồ sơ")]),t._v("\n                  \n            ")]),a("div",[a("v-card",[a("v-card-text",[a("v-textarea",{attrs:{rows:2,box:"",rules:[t.rules.varchar500],label:"NEW_GROUP"===t.formCode?"Nhập tên nhóm hồ sơ":"Nhập tên hồ sơ"},model:{value:t.briefNote,callback:function(e){t.briefNote=e},expression:"briefNote"}}),t.templateDescription?a("div",[t._v("(*)   "+t._s(t.templateDescription))]):t._e()],1)],1)],1)])],1)],1),t.isNotarization?t._e():a("div",{staticStyle:{position:"relative"}},[a("v-expansion-panel",{staticClass:"expansion-pl",attrs:{value:[!0],expand:""}},[a("v-expansion-panel-content",[a("div",{staticStyle:{display:"flex","align-items":"center"},attrs:{slot:"header"},slot:"header"},[a("div",{staticClass:"background-triangle-small"},[a("v-icon",{attrs:{size:"18",color:"white"}},[t._v("star_rate")])],1),"NEW_GROUP"===t.formCode?a("span",[t._v("Thành phần hồ sơ dùng chung")]):a("span",[t._v("Thành phần hồ sơ")]),t._v("\n                  \n              "),t.stateEditSample||1===t.originality?1!==t.originality?a("v-text-field",{staticClass:"px-0 py-0",staticStyle:{width:"90px","max-width":"90px"},attrs:{type:"number"},on:{click:function(t){t.stopPropagation()}},model:{value:t.thongTinChiTietHoSo.sampleCount,callback:function(e){t.$set(t.thongTinChiTietHoSo,"sampleCount",e)},expression:"thongTinChiTietHoSo.sampleCount"}}):t._e():a("span",[t._v("("+t._s(0===t.thongTinChiTietHoSo.sampleCount?"?":t.thongTinChiTietHoSo.sampleCount)+" bộ hồ sơ)")]),t._v("  \n              "),t.stateEditSample||1===t.originality?1!==t.originality?a("v-icon",{staticStyle:{cursor:"pointer"},attrs:{size:"16",color:"primary"},on:{click:function(e){e.stopPropagation(),t.stateEditSample=!t.stateEditSample}}},[t._v("done")]):t._e():a("v-icon",{staticStyle:{cursor:"pointer"},attrs:{size:"16",color:"primary"},on:{click:function(e){e.stopPropagation(),t.stateEditSample=!t.stateEditSample}}},[t._v("edit")])],1),a("thanh-phan-ho-so",{ref:"thanhphanhoso",attrs:{formCodeInput:t.formCode,onlyView:"NEW_GROUP"===t.formCode,id:"nm",partTypes:"NEW_GROUP"===t.formCode?t.inputTypesGroup:t.inputTypes}})],1)],1)],1),t.isNotarization?a("div",{staticStyle:{position:"relative"}},[a("v-expansion-panel",{staticClass:"expansion-pl",attrs:{value:[!0],expand:""}},[a("v-expansion-panel-content",[a("div",{staticStyle:{display:"flex","align-items":"center"},attrs:{slot:"header"},slot:"header"},[a("div",{staticClass:"background-triangle-small"},[a("v-icon",{attrs:{size:"18",color:"white"}},[t._v("star_rate")])],1),a("span",[t._v("Tài liệu chứng thực")])]),a("tai-lieu-chung-thuc",{ref:"tailieuchungthuc",attrs:{dossierId:t.thongTinChiTietHoSo.dossierId,formCodeInput:t.formCode,onlyView:!1}})],1)],1)],1):t._e(),1!==t.originality&&t.notifyConfig?a("div",{staticStyle:{position:"relative","border-top":"1px solid #ddd"}},[a("v-expansion-panel",{staticClass:"expansion-pl",attrs:{value:[!0],expand:""}},[a("v-expansion-panel-content",{attrs:{"hide-actions":"",value:"2"}},[a("div",{attrs:{slot:"header"},slot:"header"},[a("div",{staticClass:"background-triangle-small"},[a("v-icon",{attrs:{size:"18",color:"white"}},[t._v("star_rate")])],1),t._v("Hình thức gửi thông báo giải quyết hồ sơ")]),a("div",{staticClass:"absolute__btn",staticStyle:{width:"220px"}},[t.loading?a("content-placeholders",{staticClass:"mt-1"},[a("content-placeholders-text",{attrs:{lines:1}})],1):t._e(),a("v-checkbox",{staticClass:"d-inline-block mr-3 mt-2",attrs:{label:"Gửi SMS",color:"primary","hide-details":""},model:{value:t.smsNotify,callback:function(e){t.smsNotify=e},expression:"smsNotify"}}),a("v-checkbox",{staticClass:"d-inline-block ml-3 mt-2",attrs:{label:"Gửi email",color:"primary","hide-details":""},model:{value:t.emailNotify,callback:function(e){t.emailNotify=e},expression:"emailNotify"}})],1)])],1)],1):t._e(),0!==t.viaPortalDetail?a("div",{staticStyle:{position:"relative"}},[a("v-expansion-panel",{staticClass:"expansion-pl",attrs:{value:[!0],expand:""}},[a("v-expansion-panel-content",{attrs:{"hide-actions":"",value:"2"}},[a("div",{attrs:{slot:"header"},slot:"header"},[a("div",{staticClass:"background-triangle-small"},[a("v-icon",{attrs:{size:"18",color:"white"}},[t._v("star_rate")])],1),t._v("Dịch vụ chuyển phát kết quả")]),a("dich-vu-chuyen-phat-ket-qua",{ref:"dichvuchuyenphatketqua",on:{changeViapostal:t.changeViapostal}})],1)],1)],1):t._e(),a("div",{style:t.isNotarization?"display: none":"position: relative;"},[a("v-expansion-panel",{staticClass:"expansion-pl",attrs:{value:[!0],expand:""}},[a("v-expansion-panel-content",{attrs:{"hide-actions":"",value:"2"}},[t.showThuPhi?a("thu-phi",{attrs:{detailDossier:t.thongTinChiTietHoSo,viaPortal:t.viaPortalDetail},model:{value:t.payments,callback:function(e){t.payments=e},expression:"payments"}}):t._e()],1)],1)],1),a("v-tabs",{staticClass:"mb-4",attrs:{"icons-and-text":"",centered:""}},[a("v-tabs-slider",{attrs:{color:"primary"}}),"NEW_GROUP"===t.formCode&&1!==t.originality&&t.tiepNhanState?a("v-tab",{staticClass:"px-0 py-0",attrs:{href:"#tab-2"},on:{click:function(e){t.tiepNhanNhomHoSo()}}},[a("v-btn",{attrs:{flat:"",loading:t.loadingAction,disabled:t.loadingAction}},[a("v-icon",{attrs:{size:"20"}},[t._v("save")]),t._v("   \n            "),a("span",[t._v("Tạo nhóm")]),a("span",{attrs:{slot:"loader"},slot:"loader"},[t._v("Loading...")])],1)],1):t._e(),"NEW_GROUP"!==t.formCode&&1!==t.originality&&t.tiepNhanState?a("v-tab",{staticClass:"px-0 py-0",attrs:{href:"#tab-2"},on:{click:function(e){t.tiepNhanHoSo()}}},[a("v-btn",{attrs:{flat:"",loading:t.loadingAction,disabled:t.loadingAction}},[a("v-icon",{attrs:{size:"20"}},[t._v("save")]),t._v("   \n            "),"UPDATE"===t.formCode?a("span",[t._v("Lưu hồ sơ")]):a("span",[t._v("Tiếp nhận")]),a("span",{attrs:{slot:"loader"},slot:"loader"},[t._v("Loading...")])],1)],1):t._e(),1!==t.originality&&"UPDATE"!==t.formCode&&"COPY"!==t.formCode&&"NEW_GROUP"!==t.formCode&&t.tiepNhanState?a("v-tab",{staticClass:"px-0 py-0",attrs:{href:"#tab-4"},on:{click:function(e){t.tiepNhanHoSo("add")}}},[a("v-btn",{attrs:{flat:"",loading:t.loadingAction,disabled:t.loadingAction}},[a("v-icon",{attrs:{size:"20"}},[t._v("note_add")]),t._v("   \n            "),a("span",[t._v("Tiếp nhận và thêm mới")]),a("span",{attrs:{slot:"loader"},slot:"loader"},[t._v("Loading...")])],1)],1):t._e(),1===t.originality?a("v-tab",{staticClass:"px-0 py-0",attrs:{href:"#tab-3"},on:{click:t.luuHoSo}},[a("v-btn",{attrs:{flat:"",loading:t.loadingAction,disabled:t.loadingAction}},[a("v-icon",{attrs:{size:"20"}},[t._v("save")]),t._v("  \n            Lưu\n            "),a("span",{attrs:{slot:"loader"},slot:"loader"},[t._v("Loading...")])],1)],1):t._e(),a("v-tab",{staticClass:"px-0 py-0",attrs:{href:"#tab-5"},on:{click:t.goBackHistory}},[a("v-btn",{attrs:{flat:"",loading:t.loadingAction,disabled:t.loadingAction},on:{click:t.goBackHistory}},[a("v-icon",{attrs:{size:"18"}},[t._v("reply")]),t._v("  \n            Quay lại\n            "),a("span",{attrs:{slot:"loader"},slot:"loader"},[t._v("Loading...")])],1)],1)],1)],1):t._e(),"version_2.0"===t.formTemplate?a("div",[a("div",{staticStyle:{display:"none"}},[a("input",{attrs:{id:"validate_required",type:"text"},domProps:{value:!0}}),a("input",{attrs:{id:"serviceCode_hidden",type:"text"},domProps:{value:t.serviceCode_hidden}}),a("input",{attrs:{id:"serviceName_hidden",type:"text"},domProps:{value:t.serviceName_hidden}}),a("input",{attrs:{id:"govAgencyCode_hidden",type:"text"},domProps:{value:t.govAgencyCode_hidden}}),a("input",{attrs:{id:"dossierTemplateNo_hidden",type:"text"},domProps:{value:t.dossierTemplateNo_hidden}}),a("input",{attrs:{id:"dossiers_hidden",type:"text"}}),a("input",{attrs:{id:"dossierFileArr_hidden",type:"text"}}),a("input",{attrs:{id:"dossierMarkArr_hidden",type:"text"}}),a("input",{attrs:{id:"payment_hidden",type:"text"}}),a("input",{attrs:{id:"eformCode_hidden",type:"text"},domProps:{value:t.eformCode_hidden}}),a("input",{attrs:{id:"checkCKCD_hidden",type:"text"},domProps:{value:!1}})]),a("div",{staticClass:"row-header"},[a("div",{staticClass:"background-triangle-big"},["UPDATE"===t.formCode?a("span",[t._v("SỬA HỒ SƠ")]):"COPY"===t.formCode?a("span",[t._v("SAO CHÉP HỒ SƠ")]):t.isOffLine?a("span",[t._v("NỘP HỒ SƠ TRỰC TUYẾN")]):a("span",[t._v("THÊM MỚI HỒ SƠ")])]),a("div",{staticClass:"layout row wrap header_tools row-blue"},[a("div",{staticClass:"flex xs8 sm10 pl-3 text-ellipsis text-bold",attrs:{title:t.templateName}},[t._v("\n            "+t._s(t.templateName)+"\n          ")]),a("div",{staticClass:"flex xs4 sm2 text-right",staticStyle:{"margin-left":"auto"}},[a("v-btn",{staticClass:"my-0 mx-0 btn-border-left",attrs:{flat:"","active-class":"temp_active"},on:{click:t.goBack}},[a("v-icon",{attrs:{size:"18"}},[t._v("reply")]),t._v("  \n              Quay lại\n            ")],1)],1)])]),t.loadingForm?a("div",{staticClass:"text-xs-center mt-5"},[a("v-progress-circular",{attrs:{size:50,color:"#dedede",indeterminate:""}})],1):a("div",[a("v-card",{attrs:{flat:"",color:"#fff"}},[a("div",{staticStyle:{position:"absolute",right:"0"}},[a("v-btn",{attrs:{color:"primary"},on:{click:function(e){t.showHDTT()}}},[t._v("Phiếu hướng dẫn thủ tục")]),a("v-btn",{attrs:{color:"primary"},on:{click:function(e){t.showTCTN()}}},[t._v("\n              Phiếu từ chối tiếp nhận\n            ")])],1),"formHPH"!==t.data_form_template&&"formCH"!==t.data_form_template?a("div",{staticClass:"mb-5 pt-0",attrs:{id:"formAlpacaNewTemplate"}}):t._e(),a("v-form",{ref:"formTiepNhan",attrs:{"lazy-validation":""}},["formCH"===t.data_form_template?a("thu-tuc-cap-ho-chieu-ngoai-giao-cong-vu",{attrs:{formCode:t.formCode,id:t.id},on:{changeCheckCKCD:t.changeCheckCKCD}}):t._e(),"formHPH"===t.data_form_template?a("thu-tuc-hop-phap-hoa-lanh-su",{attrs:{formCode:t.formCode,id:t.id},on:{changeCheckCKCD:t.changeCheckCKCD}}):t._e()],1)],1),a("v-tabs",{staticClass:"mb-4",attrs:{"icons-and-text":"",centered:""}},[a("v-tabs-slider",{attrs:{color:"primary"}}),1!==t.originality&&t.tiepNhanState?a("v-tab",{staticClass:"px-0 py-0",style:t.loadingAction?"pointer-events: none;":"",attrs:{href:"#tab-2"},on:{click:function(e){t.tiepNhanHoSoNewTemplate()}}},[a("v-btn",{attrs:{flat:"",loading:t.loadingAction,disabled:t.loadingAction}},[a("v-icon",{attrs:{size:"20"}},[t._v("save")]),t._v("   \n              "),"UPDATE"===t.formCode?a("span",[t._v("Lưu hồ sơ")]):a("span",[t._v("Tiếp nhận")]),a("span",{attrs:{slot:"loader"},slot:"loader"},[t._v("Loading...")])],1)],1):t._e(),1===t.originality?a("v-tab",{staticClass:"px-0 py-0",attrs:{href:"#tab-3"},on:{click:t.luuHoSo}},[a("v-btn",{attrs:{flat:"",loading:t.loadingAction,disabled:t.loadingAction}},[a("v-icon",{attrs:{size:"20"}},[t._v("save")]),t._v("  \n              Lưu\n              "),a("span",{attrs:{slot:"loader"},slot:"loader"},[t._v("Loading...")])],1)],1):t._e(),a("v-tab",{staticClass:"px-0 py-0",attrs:{href:"#tab-5"},on:{click:t.goBack}},[a("v-btn",{attrs:{flat:"",loading:t.loadingAction,disabled:t.loadingAction}},[a("v-icon",{attrs:{size:"18"}},[t._v("reply")]),t._v("  \n              Quay lại\n              "),a("span",{attrs:{slot:"loader"},slot:"loader"},[t._v("Loading...")])],1)],1)],1)],1)]):t._e()]),a("v-dialog",{attrs:{scrollable:"",persistent:"","max-width":"700px"},model:{value:t.dialog_printGuide,callback:function(e){t.dialog_printGuide=e},expression:"dialog_printGuide"}},[a("v-card",[a("v-toolbar",{attrs:{flat:"",dark:"",color:"primary"}},[a("v-toolbar-title",[t._v("Thông tin phiếu hướng dẫn hoàn thiện hồ sơ")]),a("v-spacer"),a("v-btn",{attrs:{icon:"",dark:""},nativeOn:{click:function(e){t.dialog_printGuide=!1}}},[a("v-icon",[t._v("close")])],1)],1),a("v-card-text",[a("v-form",{ref:"formGuide",attrs:{"lazy-validation":""},model:{value:t.validGuide,callback:function(e){t.validGuide=e},expression:"validGuide"}},[a("v-layout",{staticClass:"py-1 align-center row-list-style",attrs:{wrap:""}},[a("v-flex",{staticClass:"px-2",attrs:{xs12:""}},[a("div",{staticClass:"my-2 text-bold"},[t._v("Thủ tục hành chính "),a("span",{staticStyle:{color:"red"}},[t._v("*")]),t._v(":")]),a("v-text-field",{attrs:{box:""},model:{value:t.serviceName_hidden,callback:function(e){t.serviceName_hidden=e},expression:"serviceName_hidden"}})],1),a("v-flex",{staticClass:"px-2",attrs:{xs12:""}},[a("div",{staticClass:"my-2 text-bold"},[t._v("Dịch vụ "),a("span",{staticStyle:{color:"red"}},[t._v("*")]),t._v(":")]),a("v-text-field",{attrs:{box:""},model:{value:t.templateName,callback:function(e){t.templateName=e},expression:"templateName"}})],1),a("v-flex",{staticClass:"px-2",staticStyle:{position:"relative"},attrs:{xs12:""}},[a("div",{staticClass:"my-2 text-bold"},[t._v("Tên người làm thủ tục "),a("span",{staticStyle:{color:"red"}},[t._v("*")]),t._v(":")]),a("v-text-field",{attrs:{placeholder:"Nhập tên người làm thủ tục",box:"",rules:[function(t){return!!t||"Trường dữ liệu bắt buộc"}],required:""},model:{value:t.applicantNameGuide,callback:function(e){t.applicantNameGuide=e},expression:"applicantNameGuide"}}),a("v-radio-group",{staticClass:"my-0",staticStyle:{position:"absolute",right:"0",top:"0"},attrs:{row:""},model:{value:t.applicantTypeGuide,callback:function(e){t.applicantTypeGuide=e},expression:"applicantTypeGuide"}},[a("v-radio",{attrs:{label:"Công dân",value:!0}}),a("v-radio",{attrs:{label:"Tổ chức, doanh nghiệp",value:!1}})],1)],1),a("v-flex",{staticClass:"px-2",attrs:{xs12:""}},[a("div",{staticClass:"my-2 text-bold"},[t._v("Địa chỉ:")]),a("v-text-field",{attrs:{placeholder:"Nhập địa chỉ",box:""},model:{value:t.applicantAddressGuide,callback:function(e){t.applicantAddressGuide=e},expression:"applicantAddressGuide"}})],1),a("v-flex",{staticClass:"px-2",attrs:{xs12:""}},[a("div",{staticClass:"my-2 text-bold"},[t._v("Thư điện tử:")]),a("v-text-field",{attrs:{box:"",placeholder:"Nhập thư điện tử"},model:{value:t.applicantEmailGuide,callback:function(e){t.applicantEmailGuide=e},expression:"applicantEmailGuide"}})],1),a("v-flex",{staticClass:"px-2",attrs:{xs12:""}},[a("div",{staticClass:"my-2 text-bold"},[t._v("Số điện thoại:")]),a("v-text-field",{attrs:{box:""},model:{value:t.applicantTelNoGuide,callback:function(e){t.applicantTelNoGuide=e},expression:"applicantTelNoGuide"}})],1),a("v-flex",{staticClass:"px-2",attrs:{xs12:""}},[a("div",{staticClass:"my-2 text-bold"},[t._v("Thông tin thành phần hồ sơ:")]),a("v-data-table",{staticClass:"table-landing table-bordered",staticStyle:{"border-left":"1px solid #dedede"},attrs:{headers:t.headersTphsGuide,items:t.tphsGuide,"hide-actions":""},scopedSlots:t._u([{key:"items",fn:function(e){return[a("tr",{class:{active:e.index%2==1},staticStyle:{cursor:"pointer"}},[a("td",{staticClass:"text-xs-center",staticStyle:{width:"50px"}},[a("div",[a("span",[t._v(t._s(e.index+1))]),a("br")])]),a("td",{staticClass:"text-xs-left"},[a("div",[a("span",[t._v(t._s(e.item.partName))])])]),a("td",{staticClass:"text-xs-center",staticStyle:{width:"50px"}},[a("div",[a("v-checkbox",{staticStyle:{display:"inline-block",width:"25px"},attrs:{primary:"","hide-details":"",color:"primary"},model:{value:e.item.fileMark,callback:function(a){t.$set(e.item,"fileMark",a)},expression:"props.item.fileMark"}})],1)])])]}}])})],1),a("v-flex",{staticClass:"px-2",attrs:{xs12:""}},[a("div",{staticClass:"my-2 text-bold"},[t._v("Ghi chú:")]),a("v-textarea",{staticClass:"py-0",attrs:{box:"",rows:"3"},model:{value:t.applicantNoteGuide,callback:function(e){t.applicantNoteGuide=e},expression:"applicantNoteGuide"}})],1)],1)],1)],1),a("v-card-actions",[a("v-spacer"),a("v-btn",{staticClass:"mr-3",attrs:{color:"primary",loading:t.loadingAction,disabled:t.loadingAction},on:{click:function(e){t.doGuiding("doc")}}},[a("v-icon",[t._v("save")]),t._v("  \n          Lưu phiếu hướng dẫn\n          "),a("span",{attrs:{slot:"loader"},slot:"loader"},[t._v("Loading...")])],1),a("v-btn",{staticClass:"mr-3",attrs:{color:"primary",loading:t.loadingAction,disabled:t.loadingAction},on:{click:function(e){t.doGuiding("pdf")}}},[a("v-icon",[t._v("print")]),t._v("  \n          In phiếu hướng dẫn\n          "),a("span",{attrs:{slot:"loader"},slot:"loader"},[t._v("Loading...")])],1)],1)],1)],1),a("v-dialog",{attrs:{scrollable:"",persistent:"","max-width":"700px"},model:{value:t.dialog_denied,callback:function(e){t.dialog_denied=e},expression:"dialog_denied"}},[a("v-card",[a("v-toolbar",{attrs:{flat:"",dark:"",color:"primary"}},[a("v-toolbar-title",[t._v("Thông tin phiếu từ chối tiếp nhận")]),a("v-spacer"),a("v-btn",{attrs:{icon:"",dark:""},nativeOn:{click:function(e){t.dialog_denied=!1}}},[a("v-icon",[t._v("close")])],1)],1),a("v-card-text",[a("v-form",{ref:"formDenied",attrs:{"lazy-validation":""},model:{value:t.validDenied,callback:function(e){t.validDenied=e},expression:"validDenied"}},[a("v-layout",{staticClass:"py-1 align-center row-list-style",attrs:{wrap:""}},[a("v-flex",{staticClass:"px-2",attrs:{xs12:""}},[a("div",{staticClass:"my-2 text-bold"},[t._v("Thủ tục hành chính "),a("span",{staticStyle:{color:"red"}},[t._v("*")]),t._v(":")]),a("v-text-field",{attrs:{box:""},model:{value:t.serviceName_hidden,callback:function(e){t.serviceName_hidden=e},expression:"serviceName_hidden"}})],1),a("v-flex",{staticClass:"px-2",attrs:{xs12:""}},[a("div",{staticClass:"my-2 text-bold"},[t._v("Dịch vụ "),a("span",{staticStyle:{color:"red"}},[t._v("*")]),t._v(":")]),a("v-text-field",{attrs:{box:""},model:{value:t.templateName,callback:function(e){t.templateName=e},expression:"templateName"}})],1),a("v-flex",{staticClass:"px-2",staticStyle:{position:"relative"},attrs:{xs12:""}},[a("div",{staticClass:"my-2 text-bold"},[t._v("Tên người làm thủ tục "),a("span",{staticStyle:{color:"red"}},[t._v("*")]),t._v(":")]),a("v-text-field",{attrs:{placeholder:"Nhập tên người làm thủ tục",box:"",rules:[function(t){return!!t||"Trường dữ liệu bắt buộc"}],required:""},model:{value:t.applicantNameGuide,callback:function(e){t.applicantNameGuide=e},expression:"applicantNameGuide"}}),a("v-radio-group",{staticClass:"my-0",staticStyle:{position:"absolute",right:"0",top:"0"},attrs:{row:""},model:{value:t.applicantTypeGuide,callback:function(e){t.applicantTypeGuide=e},expression:"applicantTypeGuide"}},[a("v-radio",{attrs:{label:"Công dân",value:!0}}),a("v-radio",{attrs:{label:"Tổ chức, doanh nghiệp",value:!1}})],1)],1),a("v-flex",{staticClass:"px-2",attrs:{xs12:""}},[a("div",{staticClass:"my-2 text-bold"},[t._v("Địa chỉ:")]),a("v-text-field",{attrs:{placeholder:"Nhập địa chỉ",box:""},model:{value:t.applicantAddressGuide,callback:function(e){t.applicantAddressGuide=e},expression:"applicantAddressGuide"}})],1),a("v-flex",{staticClass:"px-2",attrs:{xs12:""}},[a("div",{staticClass:"my-2 text-bold"},[t._v("Thư điện tử:")]),a("v-text-field",{attrs:{box:"",placeholder:"Nhập thư điện tử"},model:{value:t.applicantEmailGuide,callback:function(e){t.applicantEmailGuide=e},expression:"applicantEmailGuide"}})],1),a("v-flex",{staticClass:"px-2",attrs:{xs12:""}},[a("div",{staticClass:"my-2 text-bold"},[t._v("Số điện thoại:")]),a("v-text-field",{attrs:{box:""},model:{value:t.applicantTelNoGuide,callback:function(e){t.applicantTelNoGuide=e},expression:"applicantTelNoGuide"}})],1),a("v-flex",{staticClass:"px-2",attrs:{xs12:""}},[a("div",{staticClass:"my-2 text-bold"},[t._v("Lý do từ chối tiếp nhận:")]),a("v-textarea",{staticClass:"py-0",attrs:{box:"",rows:"3"},model:{value:t.applicantNoteGuide,callback:function(e){t.applicantNoteGuide=e},expression:"applicantNoteGuide"}})],1)],1)],1)],1),a("v-card-actions",[a("v-spacer"),a("v-btn",{staticClass:"mr-3",attrs:{color:"primary",loading:t.loadingAction,disabled:t.loadingAction},on:{click:function(e){t.doDenied("doc")}}},[a("v-icon",[t._v("save")]),t._v("  \n          Lưu phiếu từ chối\n          "),a("span",{attrs:{slot:"loader"},slot:"loader"},[t._v("Loading...")])],1),a("v-btn",{staticClass:"mr-3",attrs:{color:"primary",loading:t.loadingAction,disabled:t.loadingAction},on:{click:function(e){t.doDenied("pdf")}}},[a("v-icon",[t._v("print")]),t._v("  \n          In phiếu từ chối\n          "),a("span",{attrs:{slot:"loader"},slot:"loader"},[t._v("Loading...")])],1)],1)],1)],1),a("v-dialog",{attrs:{"max-width":"900",transition:"fade-transition"},model:{value:t.dialogPDF,callback:function(e){t.dialogPDF=e},expression:"dialogPDF"}},[a("v-card",[a("v-toolbar",{attrs:{flat:"",dark:"",color:"primary"}},[a("v-toolbar-title",[t._v(t._s(t.tiltleDialog))]),a("v-spacer"),a("v-btn",{attrs:{icon:"",dark:""},nativeOn:{click:function(e){t.dialogPDF=!1}}},[a("v-icon",[t._v("close")])],1)],1),t.dialogPDFLoading?a("div",{staticStyle:{"min-height":"600px","text-align":"center",margin:"auto",padding:"25%"}},[a("v-progress-circular",{attrs:{size:100,width:1,color:"primary",indeterminate:""}})],1):t._e(),a("iframe",{directives:[{name:"show",rawName:"v-show",value:!t.dialogPDFLoading,expression:"!dialogPDFLoading"}],staticStyle:{overflow:"auto","min-height":"600px"},attrs:{id:"dialogPDFPreview",src:"",type:"application/pdf",width:"100%",height:"100%",frameborder:"0"}})],1)],1),a("v-dialog",{attrs:{"max-width":"290",persistent:""},model:{value:t.dialogXacNhanThaoTac,callback:function(e){t.dialogXacNhanThaoTac=e},expression:"dialogXacNhanThaoTac"}},[a("v-card",[a("v-card-text",["formHPH"===t.data_form_template?a("span",[t._v("Bạn chưa chọn CKCD, bạn có chắc tiếp tục thực hiện thao tác?")]):t._e(),"formCH"===t.data_form_template?a("span",[t._v("Bạn chưa kiểm tra thông tin văn bản"),a("noframes"),t._v(", bạn có chắc tiếp tục thực hiện thao tác?")],1):t._e()]),a("v-card-actions",[a("v-spacer"),a("v-btn",{attrs:{color:"primary",small:""},on:{click:function(e){t.xacNhan()}}},[t._v("\n          Xác nhận\n        ")]),a("v-btn",{attrs:{color:"primary",small:""},on:{click:function(e){t.dialogXacNhanThaoTac=!1}}},[t._v("\n          Đóng\n        ")])],1)],1)],1)],1)},la=[],da=a("4c9f"),ua=da["a"],ha=Object(p["a"])(ua,ca,la,!1,null,null,null),pa=ha.exports;g()(ha,{VBtn:_["a"],VCard:y["a"],VCardActions:_t["a"],VCardText:_t["b"],VCheckbox:yt["a"],VDataTable:Dt["a"],VDialog:Tt["a"],VExpansionPanel:Yt["a"],VExpansionPanelContent:Jt["a"],VFlex:D["a"],VForm:xt["a"],VIcon:T["a"],VLayout:x["a"],VProgressCircular:w["a"],VRadio:bt["a"],VRadioGroup:St["a"],VSpacer:Nt["a"],VTab:Xt["a"],VTabs:Zt["a"],VTabsSlider:te["a"],VTextField:st["a"],VTextarea:Pt["a"],VToolbar:It["a"],VToolbarTitle:At["b"]});var ma={props:["index","id","formCode"],components:{"tiep-nhan-ho-so-detail":pa},data:function(){return{initData:null,step:""}},beforeCreate:function(){var t=this;t.$nextTick((function(){var e=t.$router.history.current.query;e.hasOwnProperty("step")&&(t.step=e.step),t.$store.dispatch("loadInitResource").then((function(e){if(t.initData=e,null!==t.initData){var a=t.$refs.tiepnhanhosodetail,i=t.$refs.hoanthienbosunghosodetail,o=t.$refs.traketquadetail,n=t.$refs.chuyenphatketquadetail,s=t.$refs.xemchitiethosodetailcanbo,r=t.$refs.xemchitiethosotinhtrangxulylienthong,c=t.$refs.xemchitiethosolienthong;null!==a&&void 0!==a&&"undefined"!==a?t.$refs.tiepnhanhosodetail.initData(t.id):null!==i&&void 0!==i&&"undefined"!==i?t.$refs.hoanthienbosunghosodetail.initData(t.id):null!==o&&void 0!==o&&"undefined"!==o?t.$refs.traketquadetail.initData(t.id):null!==n&&void 0!==n&&"undefined"!==n?t.$refs.chuyenphatketquadetail.initData(t.id):null!==s&&void 0!==s&&"undefined"!==s?t.$refs.xemchitiethosodetailcanbo.initData(t.id):null!==r&&void 0!==r&&"undefined"!==r?t.$refs.xemchitiethosotinhtrangxulylienthong.initData(t.id):null!==c&&void 0!==c&&"undefined"!==c&&t.$refs.xemchitiethosolienthong.initData(t.id)}}))}))},watch:{$route:function(t,e){var a=this,i=t.query;i.hasOwnProperty("step")&&(a.step=i.step),a.$store.dispatch("loadInitResource").then((function(t){if(a.initData=t,null!==a.initData){var e=a.$refs.tiepnhanhosodetail,i=a.$refs.hoanthienbosunghosodetail,o=a.$refs.traketquadetail,n=a.$refs.chuyenphatketquadetail,s=a.$refs.xemchitiethosodetailcanbo,r=a.$refs.xemchitiethosotinhtrangxulylienthong,c=a.$refs.xemchitiethosolienthong;null!==e&&void 0!==e&&"undefined"!==e?a.$refs.tiepnhanhosodetail.initData(a.id):null!==i&&void 0!==i&&"undefined"!==i?a.$refs.hoanthienbosunghosodetail.initData(a.id):null!==o&&void 0!==o&&"undefined"!==o?a.$refs.traketquadetail.initData(a.id):null!==n&&void 0!==n&&"undefined"!==n?a.$refs.chuyenphatketquadetail.initData(a.id):null!==s&&void 0!==s&&"undefined"!==s?a.$refs.xemchitiethosodetailcanbo.initData(a.id):null!==r&&void 0!==r&&"undefined"!==r?a.$refs.xemchitiethosotinhtrangxulylienthong.initData(a.id):null!==c&&void 0!==c&&"undefined"!==c&&a.$refs.xemchitiethosolienthong.initData(a.id)}}))}}},ga=ma,va=Object(p["a"])(ga,sa,ra,!1,null,null,null),fa=va.exports,_a=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",["0"===String(t.serviceCode)||t.hasVerify?t._e():a("div",{},[t.selectOption?a("v-dialog",{attrs:{scrollable:"",persistent:"","max-width":"1000px"},model:{value:t.dialog_selectOption,callback:function(e){t.dialog_selectOption=e},expression:"dialog_selectOption"}},[a("v-card",{staticStyle:{width:"100%"}},[a("v-toolbar",{attrs:{flat:"",dark:"",color:"primary"}},[a("v-toolbar-title",[t._v("Chọn dịch vụ")]),a("v-spacer"),a("v-btn",{attrs:{icon:"",dark:""},nativeOn:{click:function(e){t.closeSelectOption()}}},[a("v-icon",[t._v("close")])],1)],1),a("v-card-text",{staticClass:"pt-3"},t._l(t.serviceOptionsProcess,(function(e,i){return a("v-layout",{key:i,staticClass:"py-2",staticStyle:{"border-bottom":"1px solid #dedede"},attrs:{wrap:""}},[a("v-flex",{staticStyle:{width:"calc(100% - 110px)"}},[a("span",[t._v(t._s(e.optionName))])]),a("v-flex",{staticStyle:{width:"100px"}},[a("v-btn",{staticClass:"px-3 right",attrs:{color:"primary"},on:{click:function(a){t.selectServiceOptionCRD(e,t.govAgencyCodeSelect)}}},[t._v("\n                Chọn\n              ")])],1)],1)})),1)],1)],1):a("v-dialog",{attrs:{persistent:"",width:"300"},model:{value:t.dialogLoadingCreate,callback:function(e){t.dialogLoadingCreate=e},expression:"dialogLoadingCreate"}},[a("v-card",{attrs:{color:"primary",dark:""}},[a("v-card-text",[t._v("\n          Đang tạo hồ sơ\n          "),a("v-progress-linear",{staticClass:"mb-0",attrs:{indeterminate:"",color:"white"}})],1)],1)],1)],1),a("div",[a("div",{staticClass:"row-header no__hidden_class"},[null!==t.trangThaiHoSoList?a("div",{staticClass:"background-triangle-big"},[a("span",[t._v("DANH SÁCH THỦ TỤC HÀNH CHÍNH")])]):t._e(),t.isMobile?t._e():a("div",{staticClass:"layout row wrap header_tools row-blue"},[a("div",{staticClass:"flex pl-3 text-ellipsis text-bold",staticStyle:{position:"relative"}},[a("v-text-field",{attrs:{placeholder:"Tìm kiếm theo tên thủ tục, mã thủ tục",solo:"","content-class":"adv__search__select"},on:{keyup:function(e){return"button"in e||!t._k(e.keyCode,"enter",13,e.key,"Enter")?t.filterService(e):null}},model:{value:t.serviceNameKey,callback:function(e){t.serviceNameKey=e},expression:"serviceNameKey"}})],1),a("div",{staticClass:"flex text-right",staticStyle:{"margin-left":"auto","max-width":"50px"}},[a("v-btn",{staticClass:"my-0 mx-2",attrs:{icon:""},nativeOn:{click:function(e){return t.filterService(e)}}},[a("v-icon",{attrs:{size:"16"}},[t._v("search")])],1)],1)])]),a("v-layout",{attrs:{wrap:""}},[a("div",{staticClass:"adv_search xs12 flex"},[a("div",{staticClass:"searchAdvanced-content"},[a("v-layout",{staticClass:"white pt-3",attrs:{wrap:""}},[a("v-flex",{style:t.isMobile?"":"width:calc(100% - 220px)"},[a("v-layout",{attrs:{wrap:""}},[a("v-flex",{staticClass:"px-2",attrs:{xs12:"",sm6:""}},[a("v-autocomplete",{staticClass:"select-border",attrs:{items:t.domainList,label:"Chọn lĩnh vực","item-text":"domainName","item-value":"domainCode","hide-selected":!0,box:"","hide-no-data":"",clearable:""},on:{change:t.filterService},model:{value:t.domainFilter,callback:function(e){t.domainFilter=e},expression:"domainFilter"}})],1),a("v-flex",{staticClass:"px-2",attrs:{xs12:"",sm6:""}},[a("v-autocomplete",{staticClass:"select-border",attrs:{items:t.listLerver,label:"Chọn mức độ","item-text":"levelName","item-value":"level","hide-selected":!0,clearable:"","hide-no-data":"",box:""},on:{change:t.filterService},model:{value:t.leverFilter,callback:function(e){t.leverFilter=e},expression:"leverFilter"}})],1)],1)],1),t.isMobile?t._e():a("v-flex",{staticClass:"pl-2",staticStyle:{width:"210px"}},[a("v-chip",{staticClass:"my-0",staticStyle:{height:"48px","border-radius":"5px"},attrs:{label:"",color:"primary","text-color":"white"}},[a("v-checkbox",{staticClass:"mt-0",attrs:{color:"white","hide-details":""},model:{value:t.serviceLastest,callback:function(e){t.serviceLastest=e},expression:"serviceLastest"}},[a("template",{slot:"label"},[a("div",{staticClass:"white--text"},[t._v("THỦ TỤC NỘP GẦN ĐÂY")])])],2)],1)],1)],1)],1)])]),a("v-divider",{staticClass:"my-0 py-0"}),t.loading?a("content-placeholders",{staticClass:"mt-3"},[a("content-placeholders-text",{attrs:{lines:10}})],1):t._e(),!t.loading&&t.loaded?a("div",[t.activeFilterKey||t.serviceLastest?t._e():a("v-card",[t.serviceConfigListRender.length>0?a("div",t._l(t.serviceConfigListRender,(function(e,i){return a("v-card-text",{key:i,staticClass:"pl-3 py-1 pr-0",staticStyle:{"border-bottom":"1px solid #dedede"}},[a("v-layout",{attrs:{row:"",wrap:""}},[a("v-flex",{staticClass:"pt-0",style:t.isMobile?"":"width:calc(100% - 240px)"},[a("span",{staticStyle:{"font-weight":"bold"}},[t._v(t._s(t.agencyPage*t.numberPerPage-t.numberPerPage+i+1)+".")]),t._v("  \n                "),a("span",[t._v(t._s(e.serviceName))])]),a("v-flex",{staticStyle:{width:"190px"}},[a("v-btn",{staticClass:"mx-2 my-0 mt-0 white--text",staticStyle:{"pointer-events":"none","min-width":"90px"},attrs:{depressed:"",readonly:"",small:"",color:t.getColor(e.maxLevel)}},[t._v("Mức độ "+t._s(e.maxLevel)+"\n                ")]),e.serviceConfigs&&t.serviceConfigs(e.serviceConfigs).length>=1?a("v-btn",{staticClass:"mx-2 my-0 right",staticStyle:{"min-width":"90px"},attrs:{small:"",color:"primary"},on:{click:function(a){t.showSelectGov(e.serviceConfigs,e)}}},[t._v("\n                  Chọn\n                ")]):t._e()],1)],1)],1)})),1):a("div",{staticClass:"my-3 mx-2"},[a("v-alert",{attrs:{value:!0,color:"info",icon:"info",outline:""}},[t._v("\n              Không có thủ tục nào\n          ")])],1)]),t.serviceLastest?a("v-card",[t.serviceInfoLastestList.length>0?a("div",t._l(t.serviceInfoLastestList,(function(e,i){return a("v-card-text",{key:i,staticClass:"pl-3 py-1 pr-2",staticStyle:{"border-bottom":"1px solid #dedede"}},[a("v-layout",{attrs:{row:"",wrap:""}},[a("v-flex",{style:t.isMobile?"":"width:calc(100% - 240px)"},[a("span",{staticStyle:{"font-weight":"bold"}},[t._v(t._s(t.agencyPage*t.numberPerPage-t.numberPerPage+i+1)+".")]),t._v("  \n                "),a("span",[t._v(t._s(e.serviceName))])]),a("v-flex",{staticStyle:{width:"190px"}},[a("v-btn",{staticClass:"mx-0 my-0 mt-0 white--text",staticStyle:{"pointer-events":"none","min-width":"90px"},attrs:{depressed:"",readonly:"",small:"",color:t.getColor(e.maxLevel)}},[t._v("Mức độ "+t._s(e.maxLevel)+"\n                ")]),e.serviceConfigs&&t.serviceConfigs(e.serviceConfigs).length>=1?a("v-btn",{staticClass:"mx-0 my-0 right",staticStyle:{"min-width":"90px"},attrs:{small:"",color:"primary"},on:{click:function(a){t.showSelectGov(e.serviceConfigs,e)}}},[t._v("\n                  Chọn\n                ")]):t._e()],1)],1)],1)})),1):a("div",{staticClass:"my-3 mx-2"},[a("v-alert",{attrs:{value:!0,color:"info",icon:"info",outline:""}},[t._v("\n              Không có thủ tục nào\n          ")])],1)]):t._e(),t.serviceConfigListRender.length>0&&!t.serviceLastest?a("div",{staticClass:"my-2"},[a("div",{staticClass:"text-xs-right layout wrap",staticStyle:{position:"relative"}},[a("div",{staticClass:"flex pagging-table px-2"},[a("tiny-pagination",{attrs:{total:t.serviceTotal,page:t.agencyPage,numberPerPage:t.numberPerPage,nameRecord:"thủ tục","custom-class":"custom-tiny-class"},on:{"tiny:change-page":t.changePage}})],1)])]):t._e(),t.serviceInfoLastestList.length>0&&t.serviceLastest?a("div",{staticClass:"my-2"},[a("div",{staticClass:"text-xs-right layout wrap",staticStyle:{position:"relative"}},[a("div",{staticClass:"flex pagging-table px-2"},[a("tiny-pagination",{attrs:{total:t.serviceLastestTotal,page:t.serviceLastestPage,numberPerPage:t.numberPerPage,nameRecord:"thủ tục","custom-class":"custom-tiny-class"},on:{"tiny:change-page":t.changePageServiceLastest}})],1)])]):t._e()],1):t._e(),a("v-dialog",{attrs:{scrollable:"",persistent:"","max-width":"700px"},model:{value:t.dialog_captcha,callback:function(e){t.dialog_captcha=e},expression:"dialog_captcha"}},[a("v-card",[a("v-toolbar",{attrs:{flat:"",dark:"",color:"primary"}},[a("v-toolbar-title",[t._v("Xác thực người dùng")]),a("v-spacer"),a("v-btn",{attrs:{icon:"",dark:""},nativeOn:{click:function(e){t.dialog_captcha=!1}}},[a("v-icon",[t._v("close")])],1)],1),a("v-card-text",[a("v-form",{ref:"formCaptcha",attrs:{"lazy-validation":""},model:{value:t.validCaptcha,callback:function(e){t.validCaptcha=e},expression:"validCaptcha"}},[a("v-layout",{staticClass:"py-1 align-center row-list-style",attrs:{wrap:""}},[a("v-flex",{attrs:{xs12:""}},[a("captcha",{ref:"captcha"})],1)],1)],1)],1),a("v-card-actions",[a("v-spacer"),a("v-btn",{staticClass:"mr-3",attrs:{color:"primary",loading:t.loadingAction,disabled:t.loadingAction},on:{click:t.doCreateDossier}},[a("v-icon",[t._v("done")]),t._v("  \n            Đồng ý\n            "),a("span",{attrs:{slot:"loader"},slot:"loader"},[t._v("Loading...")])],1),a("v-btn",{staticClass:"mr-3",attrs:{color:"primary",loading:t.loadingAction,disabled:t.loadingAction},on:{click:function(e){t.dialog_captcha=!1}}},[a("v-icon",[t._v("clear")]),t._v("  \n            Hủy nộp hồ sơ\n            "),a("span",{attrs:{slot:"loader"},slot:"loader"},[t._v("Loading...")])],1)],1)],1)],1),a("v-dialog",{attrs:{"max-width":"350"},model:{value:t.dialogVerifycation,callback:function(e){t.dialogVerifycation=e},expression:"dialogVerifycation"}},[a("v-card",{staticClass:"px-0"},[a("v-card-title",{staticClass:"headline",attrs:{color:"primary"}},[t._v("Yêu cầu xác minh tài khoản")]),a("v-divider"),a("v-card-text",[t._v("Tài khoản chỉ được phép nộp tối đa 3 hồ sơ trực tuyến khi chưa được xác minh. Để tiếp tục nộp hồ sơ trực tuyến vui lòng mang chứng minh thư nhân dân/ thẻ căn cước đến Bộ phận tiếp nhận và trả kết quả để được xác minh.")]),a("v-card-actions",[a("v-spacer"),a("v-btn",{attrs:{color:"green darken-1",flat:""},on:{click:function(e){t.dialog=!1}}},[t._v("Đóng")])],1)],1)],1),a("v-dialog",{attrs:{scrollable:"",persistent:"","max-width":"700px"},model:{value:t.dialog_selectAgency,callback:function(e){t.dialog_selectAgency=e},expression:"dialog_selectAgency"}},[a("v-card",[a("v-toolbar",{attrs:{flat:"",dark:"",color:"primary"}},[a("v-toolbar-title",[t._v("Đơn vị tiếp nhận")]),a("v-spacer"),a("v-btn",{attrs:{icon:"",dark:""},nativeOn:{click:function(e){t.dialog_selectAgency=!1}}},[a("v-icon",[t._v("close")])],1)],1),a("v-card-text",[a("v-form",{ref:"formSelect",attrs:{"lazy-validation":""},model:{value:t.validFormSelectGov,callback:function(e){t.validFormSelectGov=e},expression:"validFormSelectGov"}},[a("v-autocomplete",{staticClass:"mt-3",attrs:{placeholder:"Chọn đơn vị",items:t.govAgencyListTiepNhan,"item-text":"govAgencyName","item-value":"govAgencyCode",rules:[function(t){return!!t||"Chọn đơn vị tiếp nhận"}],required:"","hide-no-data":"","return-object":""},on:{change:t.changeGovSelected},model:{value:t.govAgencyTiepNhanSelected,callback:function(e){t.govAgencyTiepNhanSelected=e},expression:"govAgencyTiepNhanSelected"}}),t.serviceOptions.length>1?a("v-autocomplete",{staticClass:"mt-3",attrs:{placeholder:"Chọn dịch vụ",items:t.serviceOptions,"item-text":"optionName","item-value":"processOptionId",clearable:"","hide-no-data":"",rules:[function(t){return!!t||"Chọn dịch vụ"}],required:"","return-object":""},model:{value:t.serviceOptionsSelect,callback:function(e){t.serviceOptionsSelect=e},expression:"serviceOptionsSelect"}}):t._e()],1)],1),a("v-card-actions",[a("v-spacer"),a("v-btn",{attrs:{color:"primary"},on:{click:t.submitSelectGov}},[a("v-icon",{attrs:{size:"20"}},[t._v("save")]),t._v("  Đồng ý\n          ")],1),a("v-btn",{staticClass:"white--text",attrs:{color:"primary"},on:{click:function(e){t.dialog_selectAgency=!1}}},[a("v-icon",{attrs:{size:"20"}},[t._v("clear")]),t._v("  Thoát\n          ")],1)],1)],1)],1)],1)])},ya=[],Ca=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-layout",{attrs:{row:"",wrap:""}},[a("v-flex",{staticClass:"py-2",staticStyle:{display:"flex","align-items":"center",background:"#dedede","justify-content":"center"},attrs:{xs12:""}},[a("img",{staticStyle:{"border-radius":"5px"},attrs:{src:t.chapchablob,alt:"capcha"}}),a("v-btn",{staticClass:"right ml-3 mx-0 my-0",attrs:{title:"refresh",flat:"",icon:""},nativeOn:{click:function(e){return t.makeImageCap(e)}}},[a("v-icon",{attrs:{color:"primary",size:"32"}},[t._v("refresh")])],1)],1),a("v-flex",{staticClass:"mt-2",attrs:{xs12:""}},[a("v-text-field",{attrs:{box:"",placeholder:"Nhập mã captcha",rules:[function(t){return!!t||"Vui lòng nhập mã captcha"}],required:""},model:{value:t.j_captcha_response,callback:function(e){t.j_captcha_response=e},expression:"j_captcha_response"}})],1)],1)},Da=[],Ta={props:["index"],components:{},data:function(){return{j_captcha_response:"",chapchablob:"",options:{},arrCaptcha:[],captcha:"",currentlyDragging:null,loggedEvent:"",images:[{name:"Image 1",src:"http://placehold.it/100/000000/ffffff"},{name:"Image 2",src:"http://placehold.it/100/C93742/ffffff"},{name:"Image 3",src:"http://placehold.it/100/6894D1/ffffff"}]}},computed:{loading:function(){return this.$store.getters.loading}},created:function(){var t=this;t.makeImageCap()},watch:{},methods:{makeImageCap:function(){var t=this;t.chapchablob="",t.$store.dispatch("makeImageCap").then((function(e){t.chapchablob=e})).catch((function(e){t.chapchablob=""}))},makeRandomString:function(){for(var t=this,e="",a="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",i=0;i<4;i++)e+=a.charAt(Math.floor(Math.random()*a.length));e&&(t.arrCaptcha=t.shuffleArrCaptcha(e.split(""))),t.captcha=e},shuffleArrCaptcha:function(t){var e=t.length,a=null,i=0;while(e>0)i=Math.floor(Math.random()*e),e--,a=t[e],t[e]=t[i],t[i]=a;return t},checkValidCaptcha:function(){var t=this,e="",a=d()("#captcha").children();console.log(a);for(var i=0;i<a.length;i++)e+=a[i].innerHTML;return t.captcha===e}},filters:{dateTimeView:function(t){if(t){var e=new Date(t);return"".concat(e.getDate().toString().padStart(2,"0"),"/").concat((e.getMonth()+1).toString().padStart(2,"0"),"/").concat(e.getFullYear())}return""}}},xa=Ta,ba=(a("6561"),Object(p["a"])(xa,Ca,Da,!1,null,null,null)),Sa=ba.exports;g()(ba,{VBtn:_["a"],VFlex:D["a"],VIcon:T["a"],VLayout:x["a"],VTextField:st["a"]}),L.a.options={closeButton:!0,timeOut:"3000"};var Na={props:["serviceCode"],components:{captcha:Sa,"tiny-pagination":B["a"]},data:function(){return{dialog_selectAgency:!1,validFormSelectGov:!1,govAgencyListTiepNhan:[],govAgencyTiepNhanSelected:"",loading:!1,loaded:!1,validFormSearch:!1,validSearch:!1,showFilter:!1,capCoQuanThucHien:"SBN",dialog_captcha:!1,validCaptcha:!1,govAgencyList:[],govAgencyFilter:"",domainList:[],domainListRender:[],domainFilter:"",serviceCodeFilter:"",administrationList:[],administrationFilter:"",leverFilter:"",panelAgency:[],panelDomain:[],govAgencies:[],govAgencyRender:[],serviceOptions:[],serviceOptionsSelect:"",serviceConfigSelect:"",serviceConfigList:[],serviceConfigListRender:[],serviceInfoIdSelect:"",serviceOptionsProcess:[],listQuanHuyen:[],listLerver:[],selectOption:!1,govAgencyCodeSelect:"",serviceNameKey:"",activeFilterKey:!1,loadingMutiple:!0,dataPostDossier:"",serviceLastest:!1,numberPerPage:10,agencyPage:1,serviceTotal:0,serviceLastestTotal:0,serviceLastestPage:1,dialogVerifycation:!1,verificationApplicantCreateDossier:!1,hasVerify:!1,dialogLoadingCreate:!0,dialog_selectOption:!0,serviceInfoLastestList:[]}},computed:{currentIndex:function(){return this.$store.getters.index},currentUser:function(){return this.$store.getters.loadingInitData.user},userLoginInfomation:function(){return this.$store.getters.getUserLogin},isMobile:function(){return this.$store.getters.getIsMobile}},created:function(){var t=this;try{t.verificationApplicantCreateDossier=hasVerificationCreateDossier}catch(o){}var e=t.$router.history.current,a=e.query;if(t.domainFilter=a["domain"]?a["domain"]:"",t.leverFilter=a["lever"]?Number(a["lever"]):"",t.serviceNameKey=a["keyword"]?a["keyword"]:"",t.serviceLastest="true"===String(a["lastest"]),t.filterAndSort(),"0"!==String(t.serviceCode)){var i={service:t.serviceCode};t.$store.dispatch("getServiceConfigs",i).then((function(e){t.pullServiceOptions(e.data[0])}))}t.getLevers(),t.getDomains()},updated:function(){},watch:{$route:function(t,e){var a=this,i=t.query;a.domainFilter=i["domain"]?i["domain"]:"",a.leverFilter=i["lever"]?Number(i["lever"]):"",a.serviceNameKey=i["keyword"]?i["keyword"]:"",a.serviceLastest="true"===String(i["lastest"]),a.filterAndSort()},serviceLastest:function(t){var e=this;e.filterService()},capCoQuanThucHien:function(t){var e=this;t&&e.getAgencys(t)}},methods:{changeFilterDomain:function(){},changeFilterLevel:function(){},filterServiceName:function(){},changePage:function(t){var e=this,a=e.$router.history.current,i=a.query,o="?";for(var n in e.agencyPage=t.page,i["page"]="",i)""!==i[n]&&"undefined"!==i[n]&&void 0!==i[n]&&null!==i[n]&&"null"!==i[n]&&(o+=n+"="+i[n]+"&");o+="page="+e.agencyPage,e.$router.push({path:a.path+o,query:{renew:Math.floor(100*Math.random())+1}})},changePageServiceLastest:function(t){var e=this,a=e.$router.history.current,i=a.query,o="?";for(var n in e.serviceLastestPage=t.page,i["page"]="",i)""!==i[n]&&"undefined"!==i[n]&&void 0!==i[n]&&null!==i[n]&&"null"!==i[n]&&(o+=n+"="+i[n]+"&");o+="page="+e.agencyPage,e.$router.push({path:a.path+o,query:{renew:Math.floor(100*Math.random())+1}})},filterService:function(){var t=this,e=t.$router.history.current,a=e.query;setTimeout((function(){var i="?";for(var o in a["domain"]=t.domainFilter,a["keyword"]=String(t.serviceNameKey).trim(),a["lever"]=t.leverFilter,a["page"]=1,t.serviceLastest?a["lastest"]=t.serviceLastest:a["lastest"]="",a)""!==a[o]&&"undefined"!==a[o]&&void 0!==a[o]&&null!==a[o]&&(i+=o+"="+a[o]+"&");t.$router.push({path:e.path+i,query:{renew:Math.floor(100*Math.random())+1}})}),100)},filterAndSort:function(){var t=this;t.loading=!0,t.loaded=!0;var e=t.$router.history.current,a=e.query;if(!a.hasOwnProperty("lastest")){t.agencyPage=a.hasOwnProperty("page")&&a["page"]?Number(a["page"]):1;var i={start:t.agencyPage*t.numberPerPage-t.numberPerPage,end:t.agencyPage*t.numberPerPage,level:a.hasOwnProperty("lever")&&a.lever?a.lever:"3,4",domain:a.hasOwnProperty("domain")&&a.domain?a.domain:"",keyword:a.hasOwnProperty("keyword")&&a.keyword?a.keyword:""};t.$store.dispatch("getServiceInfos",i).then((function(e){t.loading=!1,t.serviceTotal=e.total,e.data?t.serviceConfigListRender=e.data:t.serviceConfigListRender=[]})).catch((function(){t.loading=!1,t.serviceConfigListRender=[]}))}if(a.hasOwnProperty("lastest")&&a.lastest&&"false"!==String(a.lastest)){t.serviceLastestPage=a.hasOwnProperty("page")&&a["page"]?Number(a["page"]):1;var o={start:t.serviceLastestPage*t.numberPerPage-t.numberPerPage,end:t.serviceLastestPage*t.numberPerPage};t.$store.dispatch("getServiceRecently",o).then((function(e){t.loading=!1,e.hasOwnProperty("data")?(t.serviceLastestTotal=e.total,t.serviceInfoLastestList=e.data):(t.serviceInfoLastestList=[],t.serviceLastestTotal=0)})).catch((function(){t.loading=!1,t.serviceInfoLastestList=[],t.serviceLastestTotal=0}))}},pullServiceOptions:function(t,e){var a=this;a.verificationApplicantCreateDossier&&a.userLoginInfomation&&a.userLoginInfomation["verification"]&&"2"===String(a.userLoginInfomation["verification"])?(a.hasVerify=!0,setTimeout((function(){a.dialogVerifycation=!0}),300)):(a.serviceConfigSelect=t,a.govAgencyCodeSelect=t.govAgencyCode,a.serviceInfoIdSelect=e?e.serviceInfoId:t.serviceInfoId,a.$store.dispatch("getServiceOpionByProcess",t).then((function(e){e?(a.serviceOptions=e,"0"===String(a.serviceCode)?(a.selectOption=!1,1===e.length&&a.$store.dispatch("getServiceInfo",{serviceInfoId:a.serviceInfoIdSelect}).then((function(i){console.log("resultresultresult",e);var o={serviceCode:i.serviceCode,govAgencyCode:t.govAgencyCode,templateNo:e[0].templateNo,originality:a.getOriginality(),j_captcha_response:""};a.isOffLine?(a.dataPostDossier=o,a.$refs.captcha.makeImageCap(),a.dialog_captcha=!0):(a.trackingBTTT(i.serviceCode),a.$store.dispatch("postDossier",o).then((function(t){a.loadingAction=!1,a.indexAction=-1,a.$router.push({path:"/danh-sach-ho-so/0/ho-so/"+t.dossierId+"/NEW",query:a.$router.history.current.query})})))}))):1===e.length?a.$store.dispatch("getServiceInfo",{serviceInfoId:a.serviceInfoIdSelect}).then((function(i){console.log("resultresultresult",e);var o={serviceCode:i.serviceCode,govAgencyCode:t.govAgencyCode,templateNo:e[0].templateNo,originality:a.getOriginality(),j_captcha_response:""};a.isOffLine?(a.dataPostDossier=o,a.$refs.captcha.makeImageCap(),a.dialog_captcha=!0):(a.trackingBTTT(i.serviceCode),a.$store.dispatch("postDossier",o).then((function(t){a.loadingAction=!1,a.indexAction=-1,a.$router.push({path:"/danh-sach-ho-so/0/ho-so/"+t.dossierId+"/NEW",query:a.$router.history.current.query})})))})):(a.serviceOptionsProcess=e,a.selectOption=!0)):a.$store.dispatch("getServiceConfigDetail",t).then((function(t){t.hasOwnProperty("serviceUrl")&&t.serviceUrl&&(window.location.href=t.serviceUrl)})).catch((function(){}))})).catch((function(t){a.serviceOptions=[]})))},selectServiceOption:function(t,e,a){var i=this;a?(i.serviceConfigSelect=a,i.govAgencyCodeSelect=a.govAgencyCode):i.govAgencyCodeSelect=e.govAgencyCode,i.loadingMutiple=!0,i.$store.dispatch("getServiceInfo",{serviceInfoId:i.serviceInfoIdSelect}).then((function(o){var n={serviceCode:o.serviceCode,govAgencyCode:a?a.govAgencyCode:e.govAgencyCode,templateNo:t.templateNo,originality:i.getOriginality(),j_captcha_response:""};i.isOffLine?(i.dataPostDossier=n,i.$refs.captcha.makeImageCap(),i.dialog_captcha=!0):(i.trackingBTTT(o.serviceCode),i.$store.dispatch("postDossier",n).then((function(t){i.loadingAction=!1,i.indexAction=-1,i.$router.push({path:"/danh-sach-ho-so/0/ho-so/"+t.dossierId+"/NEW",query:i.$router.history.current.query})})))}))},pullServiceOptionsLastest:function(t){var e=this;e.$store.dispatch("getServiceOpionByProcess",t).then((function(t){t&&(e.serviceOptions=t)}))},doCreateDossier:function(){var t=this;t.$refs.formCaptcha.resetValidation();var e=t.$refs.captcha.j_captcha_response;t.$refs.formCaptcha.validate()&&(t.dataPostDossier["j_captcha_response"]=e,t.createDossier(t.dataPostDossier))},createDossier:function(t){var e=this;e.serviceConfigSelect.serviceUrl?window.location.href=e.serviceConfigSelect:(e.trackingBTTT(t.serviceCode),e.$store.dispatch("postDossier",t).then((function(t){void 0!==t["status"]&&203===t["status"]?(e.loadingAction=!1,L.a.clear(),L.a.error("Mã captcha không chính xác. Vui lòng thử lại"),e.$refs.captcha.makeImageCap()):(e.loadingAction=!1,e.dialog_captcha=!1,e.indexAction=-1,e.$router.push({path:"/danh-sach-ho-so/0/ho-so/"+t.data.dossierId+"/NEW",query:e.$router.history.current.query}))})).catch((function(t){L.a.error("Nộp hồ sơ không thành công"),e.$refs.captcha.makeImageCap()})))},serviceConfigs:function(t){return Array.isArray(t)?t:t.hasOwnProperty("serviceConfigId")?[t]:[]},getColor:function(t){return 2===t?"green":3===t?"orange darken-1":4===t?"red":void 0},goBack:function(){window.history.back()},getServiceAdminisTration:function(){var t=this,e=t.$router.history.current,a=e.query;t.$store.dispatch("getServiceAdminisTration",{}).then((function(e){t.administrationList=e,t.capCoQuanThucHien=a["administration"]?a["administration"]:e[0]["groupCode"],t.getAgencys(t.capCoQuanThucHien)})).catch((function(){}))},showSelectGov:function(t,e){var a=this;a.serviceInfoIdSelect=e.serviceInfoId,a.govAgencyTiepNhanSelected="",a.serviceOptionsSelect="",a.govAgencyListTiepNhan=a.serviceConfigs(t),1===a.govAgencyListTiepNhan.length&&(a.govAgencyTiepNhanSelected=a.govAgencyListTiepNhan[0],a.pullServiceOptionsLastest(a.govAgencyTiepNhanSelected)),a.dialog_selectAgency=!0},changeGovSelected:function(){var t=this;setTimeout((function(){t.pullServiceOptionsLastest(t.govAgencyTiepNhanSelected)}),100)},submitSelectGov:function(){var t=this;t.$refs.formSelect.validate()&&(t.govAgencyTiepNhanSelected.serviceInfoId=t.serviceInfoIdSelect,1===t.serviceOptions.length?t.selectServiceOption(t.serviceOptions[0],t.govAgencyTiepNhanSelected):t.selectServiceOption(t.serviceOptionsSelect,t.govAgencyTiepNhanSelected))},getLevers:function(){var t=this;t.$store.dispatch("getLevels").then((function(e){t.listLerver=e})).catch((function(){}))},getAgencys:function(t){var e=this,a=e.$router.history.current,i=(a.query,{administration:t||""});e.$store.dispatch("getAgencys",i).then((function(t){e.govAgencyList=t})).catch((function(){e.govAgencyList=[]}))},getDomains:function(t){var e=this,a={agency:t||""};e.$store.dispatch("getDomains",a).then((function(t){e.domainList=t})).catch((function(){e.domainList=[]}))},closeSelectOption:function(){var t=this;t.dialog_selectOption=!1},selectServiceOptionCRD:function(t,e){var a=this;a.$store.dispatch("getServiceInfo",{serviceInfoId:a.serviceInfoIdSelect}).then((function(i){a.trackingBTTT(i.serviceCode);var o={serviceCode:i.serviceCode,govAgencyCode:e,templateNo:t.templateNo,originality:a.getOriginality()};a.$store.dispatch("postDossier",o).then((function(t){a.loadingAction=!1,a.indexAction=-1,a.$router.push({path:"/danh-sach-ho-so/0/ho-so/"+t.dossierId+"/NEW",query:a.$router.history.current.query})}))}))},trackingBTTT:function(t){try{console.log("trackDVC serviceCode",t),_govaq&&_govaq.push(["trackDVC",t,"1",""])}catch(e){}}}},Pa=Na,Ia=a("ce7e"),Aa=Object(p["a"])(Pa,_a,ya,!1,null,null,null),wa=Aa.exports;g()(Aa,{VAlert:v["a"],VAutocomplete:it["a"],VBtn:_["a"],VCard:y["a"],VCardActions:_t["a"],VCardText:_t["b"],VCardTitle:qt["a"],VCheckbox:yt["a"],VChip:Ct["a"],VDialog:Tt["a"],VDivider:Ia["a"],VFlex:D["a"],VForm:xt["a"],VIcon:T["a"],VLayout:x["a"],VProgressLinear:Ut["a"],VSpacer:Nt["a"],VTextField:st["a"],VToolbar:It["a"],VToolbarTitle:At["b"]});var Ea=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",{staticClass:"row-header no__hidden_class"},[null!==t.trangThaiHoSoList?a("div",{staticClass:"background-triangle-big"},[a("span",[t._v("LĨNH VỰC THỦ TỤC HÀNH CHÍNH")])]):t._e(),a("div",{staticClass:"layout row wrap header_tools row-blue"})]),a("v-layout",{attrs:{wrap:""}},t._l(t.domains,(function(e,i){return a("v-flex",{key:i,staticClass:"px-2 my-2",attrs:{xs12:"",md3:""}},["BGTVT_DB"===e.domainCode?a("div",{staticStyle:{width:"100%",height:"215px",position:"relative",display:"flex",cursor:"pointer",background:"url(/o/kiemthuduongbo-theme/images/img-BGTVT-DB.png) center center no-repeat","background-size":"cover"},on:{click:function(a){t.redirectDVC(e)}}},[a("div",{staticStyle:{width:"100%",background:"#4d47479c",height:"50px",position:"absolute",bottom:"0px",display:"flex","align-items":"center","justify-content":"center"}},[a("span",{staticStyle:{color:"#fff","font-size":"20px"}},[t._v(t._s(e.domainName))])])]):"BGTVT_DS"===e.domainCode?a("div",{staticStyle:{width:"100%",height:"215px",position:"relative",display:"flex",cursor:"pointer",background:"url(/o/kiemthuduongbo-theme/images/img-BGTVT-DS.png) center center no-repeat","background-size":"cover"},on:{click:function(a){t.redirectDVC(e)}}},[a("div",{staticStyle:{width:"100%",background:"#4d47479c",height:"50px",position:"absolute",bottom:"0px",display:"flex","align-items":"center","justify-content":"center"}},[a("span",{staticStyle:{color:"#fff","font-size":"20px"}},[t._v(t._s(e.domainName))])])]):"BGTVT_HK"===e.domainCode?a("div",{staticStyle:{width:"100%",height:"215px",position:"relative",display:"flex",cursor:"pointer",background:"url(/o/kiemthuduongbo-theme/images/img-BGTVT-HK.png) center center no-repeat","background-size":"cover"},on:{click:function(a){t.redirectDVC(e)}}},[a("div",{staticStyle:{width:"100%",background:"#4d47479c",height:"50px",position:"absolute",bottom:"0px",display:"flex","align-items":"center","justify-content":"center"}},[a("span",{staticStyle:{color:"#fff","font-size":"20px"}},[t._v(t._s(e.domainName))])])]):"BGTVT_HH"===e.domainCode?a("div",{staticStyle:{width:"100%",height:"215px",position:"relative",display:"flex",cursor:"pointer",background:"url(/o/kiemthuduongbo-theme/images/img-BGTVT-HH.png) center center no-repeat","background-size":"cover"},on:{click:function(a){t.redirectDVC(e)}}},[a("div",{staticStyle:{width:"100%",background:"#4d47479c",height:"50px",position:"absolute",bottom:"0px",display:"flex","align-items":"center","justify-content":"center"}},[a("span",{staticStyle:{color:"#fff","font-size":"20px"}},[t._v(t._s(e.domainName))])])]):"BGTVT_DTND"===e.domainCode?a("div",{staticStyle:{width:"100%",height:"215px",position:"relative",display:"flex",cursor:"pointer",background:"url(/o/kiemthuduongbo-theme/images/img-BGTVT-CDTND.png) center center no-repeat","background-size":"cover"},on:{click:function(a){t.redirectDVC(e)}}},[a("div",{staticStyle:{width:"100%",background:"#4d47479c",height:"50px",position:"absolute",bottom:"0px",display:"flex","align-items":"center","justify-content":"center"}},[a("span",{staticStyle:{color:"#fff","font-size":"20px"}},[t._v(t._s(e.domainName))])])]):"BGTVT_DK"===e.domainCode?a("div",{staticStyle:{width:"100%",height:"215px",position:"relative",display:"flex",cursor:"pointer",background:"url(/o/kiemthuduongbo-theme/images/img-BGTVT-DK.png) center center no-repeat","background-size":"cover"},on:{click:function(a){t.redirectDVC(e)}}},[a("div",{staticStyle:{width:"100%",background:"#4d47479c",height:"50px",position:"absolute",bottom:"0px",display:"flex","align-items":"center","justify-content":"center"}},[a("span",{staticStyle:{color:"#fff","font-size":"20px"}},[t._v(t._s(e.domainName))])])]):(e.domainCode,a("div",{staticStyle:{width:"100%",height:"215px",position:"relative",display:"flex",cursor:"pointer",background:"url(/o/kiemthuduongbo-theme/images/img-BGTVT-LVK.jpg) center center no-repeat","background-size":"cover"},on:{click:function(a){t.redirectDVC(e)}}},[a("div",{staticStyle:{width:"100%",background:"#4d47479c",height:"50px",position:"absolute",bottom:"0px",display:"flex","align-items":"center","justify-content":"center"}},[a("span",{staticStyle:{color:"#fff","font-size":"20px"}},[t._v(t._s(e.domainName))])])]))])})),1)],1)},ka=[],Oa={data:function(){return{loading:!0,domains:[]}},created:function(){var t=this;t.$nextTick((function(){t.getDomains()}))},methods:{getDomains:function(){var t=this,e={};t.$store.dispatch("getDomains",e).then((function(e){console.log(e),t.domains=e}))},redirectDVC:function(t){var e=this,a={},i="?";for(var o in a["domain"]=t.domainCode,a)""!==a[o]&&"undefined"!==a[o]&&void 0!==a[o]&&null!==a[o]&&"null"!==a[o]&&(i+=o+"="+a[o]+"&");e.$router.push({path:"/add-dvc/0"+i,query:{renew:Math.floor(100*Math.random())+1}})}}},Fa=Oa,Ma=Object(p["a"])(Fa,Ea,ka,!1,null,null,null),Va=Ma.exports;g()(Ma,{VFlex:D["a"],VLayout:x["a"]});var La=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"form-chitiet",staticStyle:{"background-color":"#ffff"}},[a("v-layout",{attrs:{row:"",wrap:""}},[a("v-flex",{attrs:{xs12:"",sm12:""}},[a("div",{staticClass:"row-header"},[a("div",{staticClass:"background-triangle-big"},[a("span",[t._v("TÊN THỦ TỤC")])]),a("div",{staticClass:"layout row wrap header_tools row-blue"},[a("div",{staticClass:"flex xs8 sm10 pl-3 text-ellipsis text-bold",attrs:{title:t.thongTinChungHoSo.serviceName}},[t._v("\n              "+t._s(t.thongTinChungHoSo.serviceName)+"\n            ")]),a("div",{staticClass:"flex xs4 sm2 text-right",staticStyle:{"margin-left":"auto"}})])])]),a("v-flex",{staticClass:"text-xs-center mt-4",attrs:{xs12:"",sm12:""}},[a("h3",{staticClass:"text-xs-center"},[t._v("NỘP HỒ SƠ THÀNH CÔNG")])]),a("v-flex",{attrs:{xs12:""},domProps:{innerHTML:t._s(t.thongTinChungHoSo.submissionNote)}}),a("v-flex",{attrs:{xs12:"",sm12:""}},[a("v-btn",{attrs:{color:"primary"},on:{click:function(e){t.goBack()}}},[a("v-icon",{attrs:{size:"16"}},[t._v("reply")]),t._v("  Quay lại danh sách ")],1)],1)],1)],1)},Ha=[],$a={props:{id:{type:Number,default:function(){return 0}},index:{type:Number,default:function(){return 0}}},data:function(){return{thongTinChungHoSo:{},dossierTemplateItems:[],dossierFilesItems:[],dossierTemplateSendItems:[]}},created:function(){var t=this;t.$nextTick((function(){t.$store.dispatch("getDetailDossier",t.id).then((function(e){t.thongTinChungHoSo=e;var a=[];a.push(t.$store.dispatch("loadDossierTemplates",e)),a.push(t.$store.dispatch("loadDossierFiles",e.dossierId)),Promise.all(a).then((function(e){t.dossierTemplateItems=e[0]["dossierParts"],t.dossierFilesItems=e[1],t.dossierTemplateSendItems=t.filterDossierTemplateSend()})).catch((function(t){}))}))}))},computed:{loading:function(){return this.$store.getters.loading}},methods:{initData:function(t){var e=this;e.thongTinChungHoSo=t},goBack:function(){var t=this;t.$router.push({path:"/danh-sach-ho-so/0",query:{recount:Math.floor(100*Math.random())+1,renew:Math.floor(100*Math.random())+1,q:"/o/rest/v2/dossiers/todo?owner=true&order=true&step=110,130,510"}})},filterDossierTemplateSend:function(){var t=this,e=[];return t.dossierTemplateItems.length>0&&t.dossierFilesItems.length>0?(t.dossierTemplateItems.forEach((function(a){var i=t.dossierFilesItems.findIndex((function(t){return a.partNo===t.dossierPartNo}));-1!==i&&e.push(a)})),e):[]},back:function(){},dateTimeView:function(t){if(t){var e=new Date(t);return"".concat(e.getDate().toString().padStart(2,"0"),"/").concat((e.getMonth()+1).toString().padStart(2,"0"),"/").concat(e.getFullYear()," ").concat(e.getHours().toString().padStart(2,"0"),":").concat(e.getMinutes().toString().padStart(2,"0"))}},formatDateInput:function(t){return"".concat(t.getFullYear(),"-").concat((t.getMonth()+1).toString().padStart(2,"0"),"-").concat(t.getDate().toString().padStart(2,"0")," ").concat(t.getHours().toString().padStart(2,"0"),":").concat(t.getMinutes().toString().padStart(2,"0"))}},filters:{dateTimeView:function(t){if(t){var e=new Date(t);return"".concat(e.getDate().toString().padStart(2,"0"),"/").concat((e.getMonth()+1).toString().padStart(2,"0"),"/").concat(e.getFullYear()," ").concat(e.getHours().toString().padStart(2,"0"),":").concat(e.getMinutes().toString().padStart(2,"0"))}return""}}},Ra=$a,Ga=Object(p["a"])(Ra,La,Ha,!1,null,null,null),qa=Ga.exports;g()(Ga,{VBtn:_["a"],VFlex:D["a"],VIcon:T["a"],VLayout:x["a"]});var Ua=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("v-card",[a("div",{staticClass:"row-header"},[a("div",{staticClass:"background-triangle-big"},[a("span",[t._v("THÔNG TIN THANH TOÁN")])]),a("div",{staticClass:"layout row wrap header_tools row-blue"},[a("div",{staticClass:"flex xs4 sm2 text-right",staticStyle:{"margin-left":"auto"}},[a("v-btn",{staticClass:"my-0 mx-0 btn-border-left",attrs:{flat:"","active-class":"temp_active"},on:{click:t.goBack}},[t._v("\n            Quay lại  \n            "),a("v-icon",{attrs:{size:"16"}},[t._v("undo")])],1)],1)])]),a("div",[a("div",{staticClass:"mx-2 my-3"},[t.statusDeal?a("v-alert",{attrs:{outline:"",value:!0,type:"success"}},[t._v("\n          Giao dịch thanh toán thành công\n        ")]):a("v-alert",{attrs:{outline:"",value:!0,type:"error"}},[t._v("\n          Giao dịch thực hiện thất bại. "+t._s(t.keypayStatusText)+"\n        ")])],1),a("v-card",{staticClass:"mx-2"},[a("v-card-text",{staticClass:"px-0 py-0"},[a("div",{staticClass:"table-bordered",staticStyle:{"border-top":"1px solid #dedede"}},[a("div",{staticClass:"table__overflow"},[a("table",{staticClass:"datatable table"},[a("tbody",[a("tr",[a("td",{attrs:{width:"200"}},[a("span",{staticClass:"text-bold"},[t._v("Tên hồ sơ")])]),a("td",[a("span",[t._v(t._s(t.dossierDetail.serviceName))])])]),a("tr",[a("td",[a("span",{staticClass:"text-bold"},[t._v("Mã hồ sơ")])]),a("td",[a("span",[t._v(t._s(t.dossierDetail.dossierNo))])])]),a("tr",[a("td",[a("span",{staticClass:"text-bold"},[t._v("Cơ quan thực hiện")])]),a("td",[a("span",[t._v(t._s(t.dossierDetail.govAgencyName))])])]),a("tr",[a("td",[a("span",{staticClass:"text-bold"},[t._v("Tên phí, lệ phí")])]),a("td",[a("span",[t._v(t._s(t.dossierDetail.paymentFee))])])]),a("tr",[a("td",[a("span",{staticClass:"text-bold"},[t._v("Tổng tiền")])]),a("td",[a("span",[t._v(t._s(t.currency(t.dossierDetail.paymentAmount))+" VNĐ")])])]),t.statusDeal?a("tr",[a("td",[a("span",{staticClass:"text-bold"},[t._v("Mã giao dịch trực tuyến")])]),a("td",[a("span",[t._v(t._s(t.dossierDetail.transId))])])]):t._e(),t.statusDeal?a("tr",[a("td",[a("span",{staticClass:"text-bold"},[t._v("Mã hóa đơn")])]),a("td",[a("span",[t._v(t._s(t.dossierDetail.goodCode))])])]):t._e(),t.statusDeal?a("tr",[a("td",[a("span",{staticClass:"text-bold"},[t._v("Cổng thanh toán")])]),a("td",[a("span",[t._v(t._s(t.dossierDetail.paymentPortal))])])]):t._e()])])])])])],1)],1)])],1)},Ba=[],Ka={props:[],components:{},data:function(){return{loading:!0,loadingAction:!1,statusDeal:!1,keypayStatusText:"",dossierDetail:{serviceName:"",dossierNo:"",govAgencyName:"",paymentFee:"",paymentAmount:"",transId:"",goodCode:"",paymentPortal:""},keypayStatusCode:{"00":"Thành công","01":"Đại lý không tồn tại trong hệ thống","02":"Chuỗi mã hóa không hợp lệ","03":"Mã giao dịch đại lý không hợp lệ","04":"Không tìm thấy giao dịch trong hệ thống","05":"Mã dịch vụ không hợp lệ","06":"Lỗi xác nhận giao dịch: giao dịch đã được xác nhận (thành công/ không thành công trước đó và không thể xác nhận lại)","07":"Mã quốc gia không hợp lệ","08":"Không nhận được thông điệp trả về từ Ngân Hàng","09":"Mô tả đơn hàng không hợp lệ",10:"Mã đơn hàng không hợp lệ",11:"Số tiền không hợp lệ",12:"Phí vận chuyển không hợp lệ",13:"Thuế không hợp lệ",14:"Đại lý chưa được cấu hình phí",15:"Sai mã Ngân hàng",16:"Số tiền thanh toán của Đại lý không nằm trong khoảng cho phép",17:"Tài khoản không đủ tiền",18:"Khách hàng đã Hủy giao dịch",19:"Thời gian thanh toán không hợp lệ",20:"Kiểu nhận mã OTP không hợp lệ",21:"Mã OTP sai",25:"Nhập sai thông tin chủ thẻ lần 1",26:"Nhập sai thông tin chủ thẻ lần 2",27:"Nhập sai thông tin chủ thẻ lần 3",30:"Phiên bản không hợp lệ",31:"Mã lệnh không hợp lệ",32:"Loại tiền tệ không hợp lệ",33:"Ngôn ngữ không hợp lệ",34:"Thông tin thêm (desc 1) không hợp lệ",35:"Thông tin thêm (desc 2) không hợp lệ",36:"Thông tin thêm (desc 3) không hợp lệ",37:"Thông tin thêm (desc 4) không hợp lệ",38:"Thông tin thêm (desc 5) không hợp lệ",39:"Chuỗi trả về - Return URL không hợp lệ",40:"Loại thẻ không hợp lệ",41:"Thẻ nghi vấn (thẻ đánh mất, hot card)",54:"Thẻ hết hạn",57:"Chưa đăng ký dịch vụ thanh toán trực tuyến",61:"Quá hạn mức giao dịch trong ngày",62:"Thẻ bị khóa",65:"Quá hạn mức 1 lần giao dịch",97:"Ngân hàng chưa sẵn sàng",98:"Giao dịch không",99:"Lỗi hệ thống"}}},computed:{},created:function(){var t=this;t.$nextTick((function(){var t=this,e=t.$router.history.current.query,a=e.hasOwnProperty("response_code")?e.response_code:"",i=e.hasOwnProperty("dossierId")?e.dossierId:"",o=e.hasOwnProperty("referenceUid")?e.referenceUid:"",n=e.hasOwnProperty("actionCode")?e.actionCode:"";i&&("00"===a?t.statusDeal=!0:(t.statusDeal=!1,t.keypayStatusText=t.keypayStatusCode["responseCode"]?t.keypayStatusCode["responseCode"]:""),t.$store.dispatch("getDetailDossier",o).then((function(a){t.dossierDetail["serviceName"]=a.serviceName,t.dossierDetail["dossierNo"]=a.dossierNo,t.dossierDetail["govAgencyName"]=a.govAgencyName,t.dossierDetail["transId"]=e.transId,t.dossierDetail["goodCode"]=e.goodCode,t.dossierDetail["paymentPortal"]=e.paymentPortal,t.dossierDetail["paymentAmount"]=e.net_cost;var i={dossierId:a.dossierId,referenceUid:o||a.referenceUid},s={dossierId:o||a.referenceUid};!0===t.statusDeal?t.$store.dispatch("putPayments",i).then((function(e){if(t.$store.dispatch("loadDossierPayments",s).then((function(e){t.dossierDetail["paymentFee"]=t.getEPaymentProfile(e.epaymentProfile).paymentFee})).catch((function(t){})),n){var i={dossierId:o||a.referenceUid,actionCode:n};t.$store.dispatch("processDossierRouter",i).then((function(t){})).catch((function(){}))}})).catch((function(t){})):t.$store.dispatch("loadDossierPayments",s).then((function(e){t.dossierDetail["paymentFee"]=t.getEPaymentProfile(e.epaymentProfile).paymentFee})).catch((function(t){}))})))}))},watch:{},methods:{currency:function(t){return t&&t.toString().replace(/\B(?=(\d{3})+(?!\d))/g,".")?t.toString().replace(/\B(?=(\d{3})+(?!\d))/g,"."):0},goBack:function(){var t=window.themeDisplay.getLayoutRelativeURL().substring(0,window.themeDisplay.getLayoutRelativeURL().lastIndexOf("/")),e=t+"/dich-vu-cong#/";window.open(e,"_self")},getEPaymentProfile:function(t){if(!t)return"";try{return JSON.parse(t),JSON.parse(t)}catch(e){return""}}}},Wa=Ka,za=Object(p["a"])(Wa,Ua,Ba,!1,null,null,null),ja=za.exports;g()(za,{VAlert:v["a"],VBtn:_["a"],VCard:y["a"],VCardText:_t["b"],VIcon:T["a"]});var Qa=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-container",{attrs:{fluid:""}},[a("v-layout",{attrs:{row:"",wrap:""}},[a("v-flex",{staticClass:"text-xs-center",attrs:{xs12:"","mt-5":""}})],1)],1)},Ya=[],Ja={},Xa=Ja,Za=a("a523"),ti=Object(p["a"])(Xa,Qa,Ya,!1,null,null,null),ei=ti.exports;g()(ti,{VContainer:Za["a"],VFlex:D["a"],VLayout:x["a"]});var ai=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("v-form",{ref:"formImport",attrs:{"lazy-validation":""},model:{value:t.validTNHS,callback:function(e){t.validTNHS=e},expression:"validTNHS"}},[a("div",{staticClass:"row-header"},[a("div",{staticClass:"background-triangle-big"},[a("span",[t._v("IMPORT HỒ SƠ")])]),a("div",{staticClass:"layout row wrap header_tools row-blue"},[a("div",{staticClass:"flex xs8 sm10 pl-3 text-ellipsis text-bold",attrs:{title:t.thongTinChiTietHoSo.serviceName}},[t._v("\n        "+t._s(t.thongTinChiTietHoSo.serviceName)+"\n      ")]),a("div",{staticClass:"flex xs4 sm2 text-right",staticStyle:{"margin-left":"auto"}},[a("v-btn",{staticClass:"my-0 mx-0 btn-border-left",attrs:{flat:"","active-class":"temp_active"},on:{click:t.goBack}},[a("v-icon",{attrs:{size:"18"}},[t._v("reply")]),t._v("  \n          Quay lại\n        ")],1)],1)])]),a("div",{staticStyle:{position:"relative"}},[a("thong-tin-chu-ho-so",{ref:"thongtinchuhoso",attrs:{showApplicant:!0}})],1),a("div",{staticStyle:{position:"relative"}},[a("v-expansion-panel",{staticClass:"expansion-pl",attrs:{value:[!0],expand:""}},[a("v-expansion-panel-content",[a("div",{staticStyle:{display:"flex","align-items":"center"},attrs:{slot:"header"},slot:"header"},[a("div",{staticClass:"background-triangle-small"},[a("v-icon",{attrs:{size:"18",color:"white"}},[t._v("star_rate")])],1),t._v("\n          Thành phần hồ sơ     \n          "),t.stateEditSample||1===t.originality?1!==t.originality?a("v-text-field",{staticClass:"px-0 py-0",staticStyle:{width:"90px","max-width":"90px"},attrs:{type:"number"},model:{value:t.thongTinChiTietHoSo.sampleCount,callback:function(e){t.$set(t.thongTinChiTietHoSo,"sampleCount",e)},expression:"thongTinChiTietHoSo.sampleCount"}}):t._e():a("span",[t._v("("+t._s(0===t.thongTinChiTietHoSo.sampleCount?"?":t.thongTinChiTietHoSo.sampleCount)+" bộ hồ sơ)")]),t._v("  \n          "),t.stateEditSample||1===t.originality?1!==t.originality?a("v-icon",{staticStyle:{cursor:"pointer"},attrs:{size:"16",color:"primary"},on:{click:function(e){e.stopPropagation(),t.stateEditSample=!t.stateEditSample}}},[t._v("done")]):t._e():a("v-icon",{staticStyle:{cursor:"pointer"},attrs:{size:"16",color:"primary"},on:{click:function(e){e.stopPropagation(),t.stateEditSample=!t.stateEditSample}}},[t._v("edit")])],1),a("thanh-phan-ho-so",{ref:"thanhphanhoso",attrs:{onlyView:!1,id:"nm",partTypes:t.inputTypes}})],1)],1)],1),a("div",{staticStyle:{position:"relative"}},[a("v-expansion-panel",{staticClass:"expansion-pl",attrs:{value:[!0],expand:""}},[a("v-expansion-panel-content",{attrs:{"hide-actions":"",value:"2"}},[a("div",{attrs:{slot:"header"},slot:"header"},[a("div",{staticClass:"background-triangle-small"},[a("v-icon",{attrs:{size:"18",color:"white"}},[t._v("star_rate")])],1),t._v("Dịch vụ chuyển phát kết quả")]),a("dich-vu-chuyen-phat-ket-qua",{ref:"dichvuchuyenphatketqua"})],1)],1)],1),a("div",{staticClass:"py-2",staticStyle:{position:"relative"}},[a("div",{staticClass:"text-xs-center",staticStyle:{width:"100%"}},[a("input",{staticStyle:{display:"none"},attrs:{type:"file",id:"dossierImport"},on:{change:function(e){t.uploadfileDossierImport(e)}}}),a("span",{staticClass:"text-bold",staticStyle:{color:"#004b94!important"}},[t._v("Tải lên file thông tin chủ hồ sơ (Định dạng: .xlsx, .xls)")]),t.progressUploadFile?a("v-progress-circular",{attrs:{width:2,size:25,color:"green",indeterminate:""}}):a("v-tooltip",{staticClass:"ml-2",attrs:{top:""}},[a("v-btn",{staticClass:"mx-0 my-0",attrs:{slot:"activator",icon:""},on:{click:function(e){t.pickFile()}},slot:"activator"},[a("v-badge",[a("v-icon",{attrs:{size:"24",color:"#004b94"}},[t._v("cloud_upload")])],1)],1),a("span",[t._v("Tải file lên")])],1)],1)]),a("v-tabs",{staticClass:"mb-4",attrs:{"icons-and-text":"",centered:""}},[a("v-tabs-slider",{attrs:{color:"primary"}}),a("v-tab",{staticClass:"px-0 py-0",attrs:{href:"#tab-5"},on:{click:t.goBack}},[a("v-btn",{attrs:{flat:"",loading:t.loadingAction,disabled:t.loadingAction}},[a("v-icon",{attrs:{size:"18"}},[t._v("reply")]),t._v("  \n        Quay lại\n        "),a("span",{attrs:{slot:"loader"},slot:"loader"},[t._v("Loading...")])],1)],1)],1)],1),a("v-dialog",{attrs:{"max-width":"700",transition:"fade-transition"},model:{value:t.dialogImportDosier,callback:function(e){t.dialogImportDosier=e},expression:"dialogImportDosier"}},[a("v-card",[a("v-toolbar",{attrs:{flat:"",dark:"",color:"primary"}},[a("v-toolbar-title",[t._v("Import hồ sơ")]),a("v-spacer"),a("v-btn",{attrs:{icon:"",dark:""},nativeOn:{click:function(e){t.dialogImportDosier=!1}}},[a("v-icon",[t._v("close")])],1)],1),a("v-card-text",{staticClass:"pt-0 pb-0 px-0"},[a("v-flex",{staticClass:"text-xs-center"},[a("v-progress-circular",{staticClass:"my-2",attrs:{rotate:-90,size:70,width:10,value:t.valueProgress,color:"primary"}},[a("span",{staticStyle:{"font-size":"1.5em","font-weight":"bold"}},[t._v(t._s(t.countDossierProgress))])]),a("div",{staticClass:"pb-0",staticStyle:{margin:"0 auto"}},[a("v-card",{staticClass:"py-0"},[a("span",{staticStyle:{color:"green"}},[t._v("Thành công: "+t._s(t.countDossierSuccess)+" hồ sơ")]),a("p",{staticStyle:{color:"red"}},[t._v("Lỗi: "+t._s(t.dossierError.length)+" hồ sơ")])])],1)],1),t.dossierError.length&&!t.loadingImportDossier?a("div",{staticClass:"px-2",staticStyle:{margin:"0 auto"}},[a("span",{staticStyle:{"font-size":"1.2em","font-weight":"bold"}},[t._v("Danh sách hồ sơ bị lỗi:")]),a("v-data-table",{staticClass:"table-landing table-bordered mt-2",staticStyle:{"border-left":"1px solid #dedede"},attrs:{headers:t.headers,items:t.dossierError,"hide-actions":"","item-key":"dossierId"},scopedSlots:t._u([{key:"items",fn:function(e){return[a("tr",{staticStyle:{cursor:"pointer"}},[a("td",{staticClass:"text-xs-center",attrs:{width:""}},[a("span",[t._v(t._s(e.index+1))])]),a("td",{staticClass:"text-xs-left",attrs:{width:""}},[t._v("\n                  "+t._s(e.item.applicantName)+"\n                ")]),a("td",{staticClass:"text-xs-left"},[t._v("\n                  "+t._s(e.item.applicantIdNo)+"\n                ")]),a("td",{staticClass:"text-xs-left",attrs:{width:""}},[t._v("\n                  "+t._s(e.item.address)+"\n                ")])])]}}])})],1):t._e()],1),a("v-card-actions",[a("v-spacer"),t.dossierError.length?a("v-btn",{attrs:{color:"primary",loading:t.loadingImportDossier,disabled:t.loadingImportDossier},nativeOn:{click:function(e){t.addDossierAgain()}}},[a("v-icon",[t._v("send")]),t._v(" \n            Thực hiện lại\n            "),a("span",{attrs:{slot:"loader"},slot:"loader"},[t._v("Loading...")])],1):t._e(),a("v-btn",{staticStyle:{color:"#fff"},attrs:{color:"red",loading:t.loadingImportDossier,disabled:t.loadingImportDossier},nativeOn:{click:function(e){t.dialogImportDosier=!1}}},[a("v-icon",[t._v("reply")]),t._v(" \n          Quay lại\n          "),a("span",{attrs:{slot:"loader"},slot:"loader"},[t._v("Loading...")])],1)],1)],1)],1)],1)},ii=[];L.a.options={closeButton:!0,timeOut:"5000"};var oi={props:["index","id","formCode"],components:{"thong-tin-chu-ho-so":se["a"],"thanh-phan-ho-so":We["a"],"dich-vu-chuyen-phat-ket-qua":ve["a"]},data:function(){return{validTNHS:!1,dossierId:"",mark:!0,dossierFiles:"",stateEditSample:!1,tiepNhanState:!0,thongTinChiTietHoSo:{},payments:{},paymentProfile:{},briefNote:"",receiveDateEdit:"",editableDate:!1,dueDateEdit:"",viaPortalDetail:0,showThuPhi:!1,inputTypes:[1,3],outputTypes:[2],sampleCount:0,isMobile:!1,loadingAction:!1,countDossierProgress:0,dialogImportDosier:!1,listDossierImport:[],progressUploadFile:!1,loadingImportDossier:!1,dossierError:[],dossierSuccess:[],totalDossier:0,valueProgress:0,countDossierSuccess:0,headers:[{text:"STT",align:"center",sortable:!1},{text:"Chủ hồ sơ",align:"center",sortable:!1},{text:"Mã CMND/CCCD",align:"center",sortable:!1},{text:"Địa chỉ",align:"center",sortable:!1}]}},computed:{loading:function(){return this.$store.getters.loading},originality:function(){var t=this;return t.getOriginality()},dichVuChuyenPhatKetQua:function(){return this.$store.getters.dichVuChuyenPhatKetQua}},created:function(){var t=this;t.$nextTick((function(){t.listDossierImport=[],t.thongTinChiTietHoSo={},t.dossierId=t.id,t.initData(t.id)}))},beforeDestroy:function(){var t=d()('meta[name="viewport"]');t.attr("content","initial-scale=1.0, width=device-width"),"undefined"!==typeof window&&window.removeEventListener("resize",this.onResize,{passive:!0})},mounted:function(){this.onResize(),window.addEventListener("resize",this.onResize,{passive:!0})},watch:{isMobile:function(t){var e=d()('meta[name="viewport"]');t?e.attr("content",""):e.attr("content","initial-scale=1.0, width=device-width")}},methods:{uploadfileDossierImport:function(t){var e=this,a=e.$refs.thanhphanhoso.dossierTemplateItems;a=a.filter((function(t){return 1===t["partType"]})),e.$store.dispatch("loadDossierFiles",e.thongTinChiTietHoSo["dossierId"]).then((function(t){var a=[];for(var i in t)1===t[i]["dossierPartType"]&&a.push(t[i]["dossierFileId"]);e.dossierFiles=a?a.toString():"",e.progressUploadFile=!0;var o={};e.countDossierProgress=0,e.valueProgress=0,e.listDossierImport=[],e.dossierError=[],e.dossierSuccess=[],e.countDossierSuccess=0,o["dossierId"]=e.thongTinChiTietHoSo["dossierId"],o["referenceUid"]=e.thongTinChiTietHoSo["referenceUid"],o["selector"]="dossierImport",o["partTip"]={tip:"",maxSize:10,extensions:"xlsx,xls"};d()("#dossierImport")[0].files[0];e.$store.dispatch("uploadDossierFileImport",o).then((function(t){if(e.progressUploadFile=!1,e.totalDossier=t.total,t.total){var a=confirm("Bạn có chắc chắn thực hiện hành động này?");a&&(e.dialogImportDosier=!0,e.listDossierImport=t.data,console.log(t.data),setTimeout((function(){if(e.listDossierImport.length){e.loadingImportDossier=!0;var t=[];e.listDossierImport.forEach((function(a,i){setTimeout((function(){t.push(e.doCreateDossier(a,i)),t.length===e.listDossierImport.length&&Promise.all(t).then((function(t){e.loadingImportDossier=!1,0===e.dossierError.length&&(L.a.success("Import hồ sơ thành công"),setTimeout((function(){e.goBack()}),1e3))})).catch((function(t){e.loadingImportDossier=!1}))}),1e3*i)}))}}),300))}else e.listDossierImport=[],L.a.error("Dữ liệu bị lỗi, vui lòng kiểm tra lại!")})).catch((function(t){e.dialogImportDosier=!1,e.progressUploadFile=!1,L.a.error("Tải file lỗi, vui lòng thử lại!")}))})).catch((function(t){}))},addDossierAgain:function(){var t=this;if(console.log(t.dossierSuccess),t.countDossierProgress=t.dossierSuccess.length,t.valueProgress=100*t.countDossierProgress/t.totalDossier,console.log("valueProgress++++",t.valueProgress),t.countDossierSuccess=t.dossierSuccess.length,t.dossierError.length){t.loadingImportDossier=!0;var e=[];t.dossierError.forEach((function(a,i){setTimeout((function(){e.push(t.doCreateDossier(a,i)),e.length===t.dossierError.length&&Promise.all(e).then((function(e){t.loadingImportDossier=!1,0===t.dossierError.length&&(L.a.success("Import hồ sơ thành công"),setTimeout((function(){t.goBack()}),1e3))})).catch((function(e){t.loadingImportDossier=!1}))}),1e3*i)}))}},doCreateDossier:function(t,e){var a=this;return new Promise((function(i,o){var n=a,s=a.$refs.thanhphanhoso.dossierTemplateItems,r={},c=t,l="",d="",u=n.$refs.thongtinchuhoso;n.$refs.dichvuchuyenphatketqua;if(r["serviceCode"]=n.thongTinChiTietHoSo["serviceCode"],r["govAgencyCode"]=n.thongTinChiTietHoSo["govAgencyCode"],r["dossierTemplateNo"]=n.thongTinChiTietHoSo["dossierTemplateNo"],r["originality"]=n.originality,s&&s.length){var h=s.map((function(t){return{partNo:t.partNo,partName:t.partName,fileMark:t.fileMark}}));l=JSON.stringify(h)}else l="";if(r["dossierMarks"]=l,u&&u["thongTinNguoiNopHoSo"]){var p=u["thongTinNguoiNopHoSo"];c=Object.assign(c,p)}c=Object.assign(c,n.dichVuChuyenPhatKetQua),r["dossiers"]=c?JSON.stringify(c):"",r["dossierFiles"]=n.dossierFiles?n.dossierFiles:"",r["payment"]=d?JSON.stringify(d):"",n.$store.dispatch("importDossier",r).then((function(t){n.countDossierProgress++,n.valueProgress+=100/n.totalDossier,n.listDossierImport[e]["flagError"]=!1,n.countDossierSuccess<n.listDossierImport.length&&n.countDossierSuccess++,n.calDossierErrorSuccess(),i(!0)})).catch((function(t){console.log(t),n.countDossierProgress++,n.valueProgress+=100/n.totalDossier,n.listDossierImport[e]["flagError"]=!0,n.calDossierErrorSuccess(),o(t)}))}))},calDossierErrorSuccess:function(){var t=this;t.dossierError=t.listDossierImport.filter((function(t){return t["flagError"]})),t.dossierSuccess=t.listDossierImport.filter((function(t){return!t.hasOwnProperty("flagError")||!t["flagError"]}))},onResize:function(){var t=this,e=window.innerWidth<1024;t.isMobile=e},initData:function(t){var e=this;e.$store.dispatch("getDetailDossier",t).then((function(t){e.dossierId=t.dossierId,e.briefNote=t.dossierName?t.dossierName:"",t["editable"]=!1,e.thongTinChiTietHoSo=t,e.$refs.thanhphanhoso.initData(t),e.$refs.thongtinchuhoso.initData(t);var a={viaPostal:1,postalServiceCode:"VNPOST",postalAddress:"",postalCityCode:"",postalDistrictCode:"",postalWardCode:"",postalTelNo:""};e.$store.commit("setDichVuChuyenPhatKetQua",a)})).catch((function(t){console.log(t)}))},pickFile:function(){var t=this,e=t.$refs.thongtinchuhoso.showValid(),a=this.$refs.dichvuchuyenphatketqua?this.$refs.dichvuchuyenphatketqua.dichVuChuyenPhatKetQua:{};if(2===a.viaPostal){if(!t.$refs.dichvuchuyenphatketqua.validDichVuChuyenPhat()||!e["validForm"])return void L.a.error("Vui lòng kiểm tra lại các thông tin bắt buộc trước khi thực hiện!")}else if(!e["validForm"])return void L.a.error("Vui lòng kiểm tra lại các thông tin bắt buộc trước khi thực hiện!");document.getElementById("dossierImport").value="",document.getElementById("dossierImport").click()},goBack:function(){var t=this,e=(t.$router.history.current.params,t.$router.history.current.query);t.$router.push({path:"/danh-sach-ho-so/0",query:e})}}},ni=oi,si=Object(p["a"])(ni,ai,ii,!1,null,null,null),ri=si.exports;g()(si,{VBadge:ft["a"],VBtn:_["a"],VCard:y["a"],VCardActions:_t["a"],VCardText:_t["b"],VDataTable:Dt["a"],VDialog:Tt["a"],VExpansionPanel:Yt["a"],VExpansionPanelContent:Jt["a"],VFlex:D["a"],VForm:xt["a"],VIcon:T["a"],VProgressCircular:w["a"],VSpacer:Nt["a"],VTab:Xt["a"],VTabs:Zt["a"],VTabsSlider:te["a"],VTextField:st["a"],VToolbar:It["a"],VToolbarTitle:At["b"],VTooltip:wt["a"]});var ci=[{path:"/danh-sach-ho-so/:index",name:"Landing",component:kt,props:!0},{path:"/m/danh-sach-ho-so/:index",name:"LandingMobile",component:Kt,props:!0},{path:"/danh-sach-ho-so/:index/tiep-nhan-ho-so/:id/:formCode",name:"TiepNhanHoSoDetail",component:ae,props:!0},{path:"/danh-sach-ho-so/:index/nhom-ho-so/:formCode/:id",name:"TiepNhanNhomHoSo",component:Ne,props:!0},{path:"/danh-sach-ho-so/:index/chi-tiet-ho-so/:id",name:"XemChiTietHoSoDetailCanBo",component:Fe,props:!0},{path:"/danh-sach-ho-so/:index/xu-ly-ho-so",name:"XuLyHoSo",component:Ze,props:!0},{path:"/danh-sach-ho-so/:index/bo-sung-ho-so/:id",name:"HoanThienBoSungHoSoDetail",component:na,props:!0},{path:"/danh-sach-ho-so/:index/ho-so/:id/:formCode",name:"DetailForward",component:fa,props:!0},{path:"/add-dvc/:serviceCode",name:"DanhSachThuTuc",component:wa,props:!0},{path:"/danh-sach-ho-so/:index/nop-thanh-cong/:id",name:"NopThanhCong",component:qa,props:!0},{path:"/thanh-toan-thanh-cong",name:"ThanhToanThanhCong",component:ja,props:!0},{path:"/import-ho-so/:id",name:"ImportHoSo",component:ri,props:!0},{path:"/linh-vuc-thu-tuc",name:"LinhVucThuTuc",component:Va,props:!0},{path:"*",name:"NotFound",component:ei}];i["a"].use(O["a"]);var li=new O["a"]({routes:ci}),di=li,ui=a("4360"),hi=a("967d");a("d304"),a("a576"),a("470b");c.a.defaults.headers.common["Token"]=void 0!==window.Liferay?window.Liferay.authToken:"",i["a"].use(hi["default"]),i["a"].config.productionTip=!1,i["a"].mixin({methods:{getOriginality:function(){return 3}}}),new i["a"]({router:di,store:ui["a"],beforeCreate:function(){var t=this;t.$store.dispatch("loadInitResource")},render:function(t){return t(k)}}).$mount("#app")},"593e":function(t,e,a){"use strict";var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"form_vuejs"},[a("v-layout",{attrs:{wrap:""}},[a("v-flex",{staticClass:"px-2 my-2",attrs:{xs12:""}},[a("strong",[t._v("Thông tin người nộp")])]),a("v-flex",{staticClass:"px-2",attrs:{xs12:"",sm6:""}},[a("label",[t._v("Họ và tên"),a("span",{staticClass:"red--text"},[t._v("*")])]),a("v-text-field",{attrs:{rules:[t.rules.required,t.rules.varChar50],required:"",solo:""},on:{input:function(e){t.dossiers.delegateName=t.dossiers.delegateName.toUpperCase()},change:function(e){t.changeDossier()}},model:{value:t.dossiers.delegateName,callback:function(e){t.$set(t.dossiers,"delegateName",e)},expression:"dossiers.delegateName"}})],1),a("v-flex",{staticClass:"px-2 ",attrs:{xs12:"",sm6:""}},[a("label",[t._v("CMND/CCCD số")]),a("suggestions",{attrs:{options:t.searchOptions,onItemSelected:t.onSearchItemSelected,onInputChange:t.onInputChange},scopedSlots:t._u([{key:"item",fn:function(e){return a("div",{staticClass:"single-item"},[a("v-list-tile-content",[a("v-list-tile-title",{domProps:{innerHTML:t._s(e.item.applicantName)}}),a("v-list-tile-sub-title",{domProps:{innerHTML:t._s(e.item.applicantIdNo)}})],1)],1)}}]),model:{value:t.dossiers.delegateIdNo,callback:function(e){t.$set(t.dossiers,"delegateIdNo",e)},expression:"dossiers.delegateIdNo"}}),t.checkCMT?a("div",[a("span",{staticClass:"red--text"},[t._v(t._s(t.messengeCMT))])]):t._e()],1),a("v-flex",{staticClass:"px-2 ",attrs:{xs12:"",sm6:""}},[a("label",[t._v("Điện thoại")]),a("v-text-field",{attrs:{rules:[t.rules.telNo],solo:""},on:{change:function(e){t.changeDossier()}},model:{value:t.dossiers.delegateTelNo,callback:function(e){t.$set(t.dossiers,"delegateTelNo",e)},expression:"dossiers.delegateTelNo"}})],1),a("v-flex",{staticClass:"px-2 ",attrs:{xs12:"",sm6:""}},[a("label",[t._v("Email")]),a("v-text-field",{attrs:{solo:"",rules:[t.rules.varChar50]},on:{change:function(e){t.changeDossier()}},model:{value:t.dossiers.delegateEmail,callback:function(e){t.$set(t.dossiers,"delegateEmail",e)},expression:"dossiers.delegateEmail"}})],1),a("v-flex",{staticClass:"px-2 ",attrs:{xs12:"",sm3:""}},[a("label",{attrs:{for:""}},[t._v("Địa chỉ")]),a("v-text-field",{attrs:{solo:"",placeholder:"Không quá 100 ký tự"},on:{change:function(e){t.changeDossier()}},model:{value:t.dossiers.delegateAddress,callback:function(e){t.$set(t.dossiers,"delegateAddress",e)},expression:"dossiers.delegateAddress"}})],1),a("v-flex",{staticClass:"px-2 ",attrs:{xs12:"",sm3:""}},[a("label",[t._v("Tỉnh/thành")]),a("v-autocomplete",{attrs:{"hide-no-data":"",items:t.delegateCitys,"item-text":"itemName","item-value":"itemCode",clearable:"",solo:""},on:{change:function(e){t.changeDossier()}},model:{value:t.delegateCityCode,callback:function(e){t.delegateCityCode=e},expression:"delegateCityCode"}})],1),a("v-flex",{staticClass:"px-2 ",attrs:{xs12:"",sm3:""}},[a("label",[t._v("Quận/huyện")]),a("v-autocomplete",{attrs:{items:t.delegateDistricts,"item-text":"itemName","item-value":"itemCode","hide-no-data":"",clearable:"",solo:""},on:{change:function(e){t.changeDossier()}},model:{value:t.delegateDistrictCode,callback:function(e){t.delegateDistrictCode=e},expression:"delegateDistrictCode"}})],1),a("v-flex",{staticClass:"px-2 ",attrs:{xs12:"",sm3:""}},[a("label",[t._v("Xã/phường")]),a("v-autocomplete",{attrs:{items:t.delegateWards,"item-text":"itemName","item-value":"itemCode","hide-no-data":"",clearable:"",solo:""},on:{change:function(e){t.changeDossier()}},model:{value:t.delegateWardCode,callback:function(e){t.delegateWardCode=e},expression:"delegateWardCode"}})],1),a("v-flex",{staticClass:"px-2 ",attrs:{xs12:""}},[a("label",{attrs:{for:""}},[t._v("Thông tin đoàn "),a("span",{staticClass:"red--text"},[t._v("*")])]),a("v-text-field",{attrs:{rules:[t.rules.required],required:"",solo:""},on:{change:function(e){t.changeDossier()}},model:{value:t.dossiers.bookingName,callback:function(e){t.$set(t.dossiers,"bookingName",e)},expression:"dossiers.bookingName"}})],1),a("v-flex",{staticClass:"px-2 ",attrs:{xs12:"",sm6:""}},[a("label",{attrs:{for:""}},[t._v("Lấy mẫu tờ khai từ mã tờ khai trực tuyến")]),a("div",{staticStyle:{display:"flex","flex-wrap":"wrap","align-items":"center"}},[a("v-text-field",{attrs:{solo:""},on:{keyup:function(e){if(!("button"in e)&&t._k(e.keyCode,"enter",13,e.key,"Enter"))return null;t.getDataEform()}},model:{value:t.eFormCode,callback:function(e){t.eFormCode=e},expression:"eFormCode"}}),a("v-btn",{staticClass:"ml-2",attrs:{small:"",color:"primary"},on:{click:function(e){t.getDataEform()}}},[t._v("Lấy dữ liệu")])],1)]),a("v-flex",{staticClass:"px-2 ",attrs:{xs12:""}},[a("div",{staticStyle:{display:"flex","flex-wrap":"wrap","align-items":"center"}},[a("strong",[t._v("Thông tin văn bản (Quyết định) cử đi nước ngoài "),a("span",{staticClass:"red--text"},[t._v("*")])]),a("v-btn",{attrs:{small:"",color:"primary"},on:{click:function(e){e.stopPropagation(),t.openDialogThemVanBan()}}},[t._v("Thêm văn bản")])],1)]),a("v-flex",{staticClass:"px-2 my-2",attrs:{xs12:""}},[a("v-data-table",{staticClass:"table_vuejs",staticStyle:{"border-left":"0.5px solid #dedede"},attrs:{headers:t.headerVanBan,items:t.listVanBan,"hide-actions":"","no-data-text":"Không có thông tin văn bản quyết định nào"},scopedSlots:t._u([{key:"items",fn:function(e){return[a("tr",[a("td",[a("v-checkbox",{attrs:{primary:"","hide-details":"",value:e.item},model:{value:t.checkVanBan,callback:function(e){t.checkVanBan=e},expression:"checkVanBan"}})],1),a("td",[t._v(t._s(e.item.vb_so_hieu_van_ban))]),a("td",[t._v(t._s(e.item.vb_ngay_ky))]),a("td",[t._v(t._s(e.item.vb_co_quan_chu_quan))]),a("td",[t._v(t._s(e.item.ho_ten_nguoi_ky))]),a("td",[a("v-btn",{attrs:{flat:"",icon:"",color:"primary"},on:{click:function(a){t.openDialogUpdateVanBan(e.index,e.item)}}},[a("v-icon",[t._v("create")])],1)],1),a("td",[a("v-btn",{attrs:{flat:"",icon:"",color:"#F44336"},on:{click:function(a){t.deleteVanBan(e.index)}}},[a("v-icon",[t._v("delete")])],1)],1)])]}}])})],1),a("v-flex",{staticClass:"px-2 my-2",attrs:{xs12:"",sm6:""}},[a("div",{staticStyle:{display:"flex","flex-wrap":"wrap","align-items":"center"}},[a("strong",[t._v("Danh sách thành viên đoàn "),a("span",{staticClass:"red--text"},[t._v("*")])]),a("v-btn",{attrs:{small:"",color:"primary"},on:{click:function(e){e.stopPropagation(),t.openDialogThemThanhVien()}}},[t._v("Thêm thành viên")])],1)]),a("v-flex",{staticClass:"px-2 my-2",attrs:{xs12:""}},[a("v-data-table",{staticClass:"table_vuejs",staticStyle:{"border-left":"0.5px solid #dedede"},attrs:{headers:t.headerThanhVien,items:t.listThanhVien,"hide-actions":"","no-data-text":"Không có thành viên đoàn nào"},scopedSlots:t._u([{key:"items",fn:function(e){return[a("tr",[a("td",[t._v(t._s(e.index+1))]),a("td",[t._v(t._s(e.item.ho_ten))]),a("td",[t._v(t._s(e.item.so_cmt))]),a("td",[t._v(t._s(e.item.ngay_sinh)+"/"+t._s(e.item.thang_sinh)+"/"+t._s(e.item.nam_sinh))]),a("td",[t._v(t._s(e.item.noi_sinh_text))]),a("td",[t._v(t._s(e.item.vb_so_hieu_van_ban)+" - "+t._s(e.item.vb_ngay_ky)+" - "+t._s(e.item.co_quan_chu_quan_text))]),a("td",[a("v-btn",{attrs:{flat:"",icon:"",color:"primary"},on:{click:function(a){t.openDialogUpdateThanhVien(e.index,e.item)}}},[a("v-icon",[t._v("create")])],1)],1),a("td",[a("v-btn",{attrs:{flat:"",icon:"",color:"#F44336"},on:{click:function(a){t.deleteThanhVien(e.index)}}},[a("v-icon",[t._v("delete")])],1)],1)])]}}])})],1),a("v-flex",{staticClass:"px-2 my-2",attrs:{xs12:"",sm6:""}},[a("div",{staticStyle:{display:"flex","flex-wrap":"wrap"}},[a("strong",[t._v("Thành phần hồ sơ kèm theo")])])]),a("v-flex",{staticClass:"px-2 my-2",attrs:{xs12:""}},[a("v-data-table",{staticClass:"table_vuejs",staticStyle:{"border-left":"0.5px solid #dedede"},attrs:{headers:t.headerThanhPhanHoSo,items:t.dossierMarkArr,"hide-actions":"","no-data-text":"Không có thành phần hồ sơ nào"},scopedSlots:t._u([{key:"items",fn:function(e){return["TP01"!=e.item.dossierPartNo&&"TP02"!=e.item.dossierPartNo&&1===e.item.partType?a("tr",[a("td",[a("v-checkbox",{attrs:{primary:"","hide-details":"",value:e.item},on:{change:function(a){t.toggleCheckbox(e.item,e.index)}},model:{value:t.selected,callback:function(e){t.selected=e},expression:"selected"}},[t._v("\n                                >")])],1),a("td",[t._v(t._s(e.item.partName))]),a("td",[a("v-select",{attrs:{items:t.fileMarks,"item-text":"name","item-value":"value",solo:""},on:{change:function(a){t.changeThanhPhan(e.item,e.index)}},model:{value:e.item.fileMark,callback:function(a){t.$set(e.item,"fileMark",a)},expression:"props.item.fileMark"}})],1),a("td",[a("v-text-field",{attrs:{solo:""},on:{change:function(a){t.changeThanhPhan(e.item,e.index)}},model:{value:e.item.recordCount,callback:function(a){t.$set(e.item,"recordCount",a)},expression:"props.item.recordCount"}})],1)]):t._e()]}}])})],1),a("v-flex",{staticClass:"px-2",attrs:{xs12:"",sm4:""}},[a("label",{attrs:{for:""}},[t._v("Số người "),a("span",{staticClass:"red--text"},[t._v("*")])]),a("v-text-field",{attrs:{solo:"",type:"number"},model:{value:t.so_nguoi,callback:function(e){t.so_nguoi=e},expression:"so_nguoi"}})],1),a("v-flex",{staticClass:"px-2 ",attrs:{xs12:"",sm8:""}},[a("label",{attrs:{for:""}},[t._v("Nước đi "),a("span",{staticClass:"red--text"})]),a("v-autocomplete",{attrs:{items:t.listNuocDi,"item-text":"TEN","item-value":"ID",clearable:"","hide-no-data":"",multiple:"",solo:""},model:{value:t.nuoc_di,callback:function(e){t.nuoc_di=e},expression:"nuoc_di"}})],1),a("v-flex",{staticClass:"px-2 my-2",attrs:{xs12:"",sm4:""}},[a("label",[t._v("Hộ chiếu cũ")]),a("div",{staticStyle:{display:"flex","flex-wrap":"wrap","align-items":"center"}},[a("div",[a("v-text-field",{staticStyle:{width:"100px"},attrs:{solo:"",type:"number"},model:{value:t.ho_chieu_ngoai_giao_cu,callback:function(e){t.ho_chieu_ngoai_giao_cu=e},expression:"ho_chieu_ngoai_giao_cu"}}),a("label",{attrs:{for:""}},[t._v("(Ngoại giao)")])],1),a("div",{staticClass:"ml-2"},[a("v-text-field",{staticStyle:{width:"100px"},attrs:{solo:"",type:"number"},model:{value:t.ho_chieu_cong_vu_cu,callback:function(e){t.ho_chieu_cong_vu_cu=e},expression:"ho_chieu_cong_vu_cu"}}),a("label",{attrs:{for:""}},[t._v("(Công vụ)")])],1),a("div",{staticClass:"ml-2"},[a("v-text-field",{staticStyle:{width:"100px"},attrs:{solo:"",type:"number"},model:{value:t.ho_chieu_pho_thong_cu,callback:function(e){t.ho_chieu_pho_thong_cu=e},expression:"ho_chieu_pho_thong_cu"}}),a("label",{attrs:{for:""}},[t._v("(Phổ thông)")])],1)])]),a("v-flex",{staticClass:"px-2 my-2",attrs:{xs12:"",sm4:""}},[a("label",[t._v("Hộ chiếu cấp mới")]),a("div",{staticStyle:{display:"flex","flex-wrap":"wrap","align-items":"center"}},[a("div",[a("v-text-field",{staticStyle:{width:"100px"},attrs:{solo:"",type:"number"},model:{value:t.ho_chieu_ngoai_giao_moi,callback:function(e){t.ho_chieu_ngoai_giao_moi=e},expression:"ho_chieu_ngoai_giao_moi"}}),a("label",{attrs:{for:""}},[t._v("(Ngoại giao)")])],1),a("div",{staticClass:"ml-2"},[a("v-text-field",{staticStyle:{width:"100px"},attrs:{solo:"",type:"number"},model:{value:t.ho_chieu_cong_vu_moi,callback:function(e){t.ho_chieu_cong_vu_moi=e},expression:"ho_chieu_cong_vu_moi"}}),a("label",{attrs:{for:""}},[t._v("(Công vụ)")])],1)])]),a("v-flex",{staticClass:"px-2 my-2",attrs:{xs12:"",sm4:""}},[a("label",[t._v("Hộ chiếu")]),a("div",{staticStyle:{display:"flex","flex-wrap":"wrap","align-items":"center"}},[a("div",[a("v-text-field",{staticStyle:{width:"100px"},attrs:{solo:"",type:"number"},model:{value:t.ho_chieu_gia_han,callback:function(e){t.ho_chieu_gia_han=e},expression:"ho_chieu_gia_han"}}),a("label",{attrs:{for:""}},[t._v("(Gia hạn)")])],1),a("div",{staticClass:"ml-2"},[a("v-text-field",{staticStyle:{width:"100px"},attrs:{solo:"",type:"number"},model:{value:t.ho_chieu_hong,callback:function(e){t.ho_chieu_hong=e},expression:"ho_chieu_hong"}}),a("label",{attrs:{for:""}},[t._v("(Hỏng)")])],1),a("div",{staticClass:"ml-2"},[a("v-text-field",{staticStyle:{width:"100px"},attrs:{solo:"",type:"number"},model:{value:t.ho_chieu_mat,callback:function(e){t.ho_chieu_mat=e},expression:"ho_chieu_mat"}}),a("label",{attrs:{for:""}},[t._v("(Mất)")])],1)])]),a("v-flex",{staticClass:"px-2 my-2",attrs:{xs12:""}},[a("label",[t._v("Công hàm")]),a("div",{staticStyle:{display:"flex","flex-wrap":"wrap","align-items":"center"}},[a("div",[a("v-text-field",{staticStyle:{width:"100px"},attrs:{solo:"",type:"number"},model:{value:t.cong_ham_so_nuoc,callback:function(e){t.cong_ham_so_nuoc=e},expression:"cong_ham_so_nuoc"}}),a("label",{attrs:{for:""}},[t._v("(Số nước xin)")])],1),a("div",{staticClass:"ml-2"},[a("v-text-field",{staticStyle:{width:"100px"},attrs:{solo:"",type:"number"},model:{value:t.cong_ham_so_nguoi,callback:function(e){t.cong_ham_so_nguoi=e},expression:"cong_ham_so_nguoi"}}),a("label",{attrs:{for:""}},[t._v("(Số người xin CH)")])],1),a("div",{staticClass:"ml-2"},[a("v-text-field",{staticStyle:{width:"100px"},attrs:{solo:"",type:"number"},model:{value:t.cong_ham_nhap_canh,callback:function(e){t.cong_ham_nhap_canh=e},expression:"cong_ham_nhap_canh"}}),a("label",{attrs:{for:""}},[t._v("(Nhập cảnh)")])],1),a("div",{staticClass:"ml-2"},[a("v-text-field",{staticStyle:{width:"100px"},attrs:{solo:"",type:"number"},model:{value:t.cong_ham_qua_canh,callback:function(e){t.cong_ham_qua_canh=e},expression:"cong_ham_qua_canh"}}),a("label",{attrs:{for:""}},[t._v("(Quá cảnh)")])],1),a("div",{staticClass:"ml-2"},[a("v-text-field",{staticClass:"mx-2",staticStyle:{width:"100px"},attrs:{solo:"",type:"number"},model:{value:t.cong_ham_schengen,callback:function(e){t.cong_ham_schengen=e},expression:"cong_ham_schengen"}}),a("label",{attrs:{for:""}},[t._v("(Schengen)")])],1)])]),a("v-flex",{staticClass:"px-2 my-2",attrs:{xs12:"",sm4:""}},[a("label",{attrs:{for:""}},[t._v("Dự thu lệ phí")]),a("v-text-field",{attrs:{solo:"",type:"number"},on:{change:function(e){t.changLePhi()}},model:{value:t.le_phi_format,callback:function(e){t.le_phi_format=e},expression:"le_phi_format"}})],1),a("v-flex",{staticClass:"px-2 my-2",attrs:{xs12:"",sm4:""}},[a("label",{attrs:{for:""}},[t._v("Ngày hẹn trả "),a("span",{staticClass:"red--text"},[t._v("*")])]),a("br"),a("v-menu",{ref:"menu5",attrs:{"close-on-content-click":!1,transition:"scale-transition","offset-y":""},model:{value:t.menu5,callback:function(e){t.menu5=e},expression:"menu5"}},[a("v-text-field",{attrs:{slot:"activator","persistent-hint":"","append-icon":"event",hint:"DD/MM/YYYY",rules:[t.rules.required,t.rules.checkDateFuture]},on:{change:function(e){t.dateDueDate=t.parseDate(t.dateDueDateFormated)}},slot:"activator",model:{value:t.dateDueDateFormated,callback:function(e){t.dateDueDateFormated=e},expression:"dateDueDateFormated"}}),a("v-date-picker",{attrs:{"no-title":"",locale:"vi"},on:{input:function(e){t.menu5=!1}},model:{value:t.dateDueDate,callback:function(e){t.dateDueDate=e},expression:"dateDueDate"}})],1)],1),a("v-flex",{staticClass:"px-2 ",attrs:{xs12:"",sm4:""}},[a("v-checkbox",{attrs:{label:"Nhận kết quả qua bưu chính"},model:{value:t.viaPostal,callback:function(e){t.viaPostal=e},expression:"viaPostal"}})],1),a("v-flex",{staticClass:"px-2 ",attrs:{xs12:""}},[a("label",{attrs:{for:""}},[t._v("Ghi chú")]),a("v-textarea",{attrs:{name:"input-7-1",solo:""},model:{value:t.dossiers.dossierNote,callback:function(e){t.$set(t.dossiers,"dossierNote",e)},expression:"dossiers.dossierNote"}})],1)],1),a("v-dialog",{attrs:{"max-width":"800px",persistent:""},model:{value:t.dialogThemVanBan,callback:function(e){t.dialogThemVanBan=e},expression:"dialogThemVanBan"}},[a("v-card",[a("v-card-title",{staticClass:"headline lighten-2",staticStyle:{display:"flex","justify-content":"space-between"},attrs:{"primary-title":""}},[t._v("\n                Thông tin văn bản cử đi nước ngoài\n                "),a("v-btn",{attrs:{color:"#115ebe",fab:"",small:"",dark:""},on:{click:function(e){t.dialogThemVanBan=!1}}},[a("v-icon",[t._v("cancel")])],1)],1),a("v-card-text",{staticClass:"form_vuejs"},[a("v-form",{ref:"formVanBan",attrs:{"lazy-validation":""}},[a("v-layout",{attrs:{wrap:""}},[a("v-flex",{staticClass:"px-2",attrs:{xs6:""}},[a("v-layout",{attrs:{wrap:""}},[a("v-flex",{staticClass:"px-2 my-2",attrs:{xs12:""}},[a("label",{attrs:{for:""}},[t._v("Quyết định cử/cho phép đi nước ngoài số "),a("span",{staticClass:"red--text"},[t._v("*")])]),a("v-text-field",{attrs:{rules:[t.rules.required],required:"",solo:""},on:{input:function(e){t.vb_so_hieu_van_ban=t.vb_so_hieu_van_ban.toUpperCase()}},model:{value:t.vb_so_hieu_van_ban,callback:function(e){t.vb_so_hieu_van_ban=e},expression:"vb_so_hieu_van_ban"}})],1),a("v-flex",{staticClass:"px-2 my-2",attrs:{xs12:""}},[a("label",{attrs:{for:""}},[t._v("Ngày ký "),a("span",{staticClass:"red--text"},[t._v("*")])]),a("v-menu",{ref:"menu",attrs:{"close-on-content-click":!1,transition:"scale-transition","offset-y":""},model:{value:t.menu,callback:function(e){t.menu=e},expression:"menu"}},[a("v-text-field",{attrs:{slot:"activator","persistent-hint":"","append-icon":"event",hint:"DD/MM/YYYY",solo:"",rules:[t.rules.required,t.rules.checkDatePast],required:""},on:{change:function(e){t.changeNgayKy()},input:function(e){t.inputNgayKy()}},slot:"activator",model:{value:t.vb_ngay_ky,callback:function(e){t.vb_ngay_ky=e},expression:"vb_ngay_ky"}}),a("v-date-picker",{attrs:{"no-title":"",locale:"vi"},on:{input:function(e){t.menu=!1}},model:{value:t.dateNgayKy,callback:function(e){t.dateNgayKy=e},expression:"dateNgayKy"}})],1)],1),a("v-flex",{staticClass:"px-2 my-2",attrs:{xs12:""}},[a("label",{attrs:{for:""}},[t._v("Cơ quan chủ quản "),a("span",{staticClass:"red--text"},[t._v("*")])]),a("v-autocomplete",{attrs:{items:t.listCoQuanChuQuan,"item-text":"CQTen","item-value":"CQID",clearable:"","hide-no-data":"","return-object":"",rules:[t.rules.required],required:"",solo:""},model:{value:t.co_quan_chu_quan,callback:function(e){t.co_quan_chu_quan=e},expression:"co_quan_chu_quan"}})],1),a("v-flex",{staticClass:"px-2 my-2",attrs:{xs12:""}},[a("label",{attrs:{for:""}},[t._v("Cơ quan chủ quản(tiếng Anh)")]),a("v-text-field",{attrs:{solo:""},model:{value:t.vb_co_quan_tieng_anh,callback:function(e){t.vb_co_quan_tieng_anh=e},expression:"vb_co_quan_tieng_anh"}})],1),a("v-flex",{staticClass:"px-2 my-2",attrs:{xs12:""}},[a("label",{attrs:{for:""}},[t._v("Người ký Văn bản/Quyết định "),a("span",{staticClass:"red--text"},[t._v("*")])]),a("v-autocomplete",{attrs:{items:t.listVanBanNguoiKy,"item-text":"NguoiKy","item-value":"NguoiKy",clearable:"",rules:[t.rules.required],required:"","hide-no-data":"",solo:"","return-object":""},scopedSlots:t._u([{key:"selection",fn:function(e){var a=e.item;e.selected;return[t._v("\n                                            "+t._s(a.NguoiKy)+"- "+t._s(a.ChucVu)+"\n                                        ")]}},{key:"item",fn:function(e){var a=e.item;e.tile;return[t._v(t._s(a.NguoiKy)+" -"+t._s(a.ChucVu))]}}]),model:{value:t.vb_nguoi_ky,callback:function(e){t.vb_nguoi_ky=e},expression:"vb_nguoi_ky"}})],1)],1)],1),a("v-flex",{staticClass:"px-2",attrs:{xs6:""}},[a("v-layout",{attrs:{wrap:""}},[a("v-flex",{attrs:{xs12:""}},[a("label",[t._v("Mẫu chữ ký")])]),a("v-flex",{attrs:{xs12:""}},[t.srcMauChuKy?a("div",[a("img",{staticStyle:{width:"200px",height:"200px"},attrs:{src:t.srcMauChuKy,alt:""}})]):a("p",[a("span",[t._v("Không có chữ ký")])]),a("p",[a("span",[t._v("Ngày hết hiệu lực: "+t._s(t.ngayHetHieuLuc))])])])],1)],1),a("v-flex",{staticClass:"text-xs-right",attrs:{xs12:""}},[a("v-btn",{attrs:{small:"",color:"primary"},on:{click:function(e){t.updateCQCQ()}}},[t._v("Cập nhập")]),a("v-btn",{attrs:{small:"",color:"primary"},on:{click:function(e){t.dialogThemVanBan=!1}}},[t._v("Đóng")])],1)],1)],1)],1)],1)],1),a("v-dialog",{staticClass:"form_vuejs",attrs:{"max-width":"1000px",persistent:""},model:{value:t.dialogThemThanhVien,callback:function(e){t.dialogThemThanhVien=e},expression:"dialogThemThanhVien"}},[a("v-card",[a("v-card-title",{staticClass:"headline lighten-2",staticStyle:{display:"flex","justify-content":"space-between"},attrs:{"primary-title":""}},[t._v("\n                Thông tin thành viên\n                "),a("v-btn",{attrs:{color:"#115ebe",fab:"",small:"",dark:""},on:{click:function(e){t.dialogThemThanhVien=!1}}},[a("v-icon",[t._v("cancel")])],1)],1),a("v-card-text",{staticClass:"form_vuejs"},[a("v-form",{ref:"formThanhVien",attrs:{"lazy-validation":""}},[a("v-layout",{attrs:{wrap:""}},[a("v-flex",{staticClass:"px-2",attrs:{xs12:""}},[a("v-layout",{attrs:{wrap:""}},[a("v-flex",{staticClass:"px-2 my-2",attrs:{xs12:""}},[a("div",{staticStyle:{display:"flex"}},[a("v-checkbox",{attrs:{label:"CẤP HỘ CHIẾU NGOẠI GIAO",required:""},model:{value:t.ho_chieu_ngoai_giao,callback:function(e){t.ho_chieu_ngoai_giao=e},expression:"ho_chieu_ngoai_giao"}}),a("v-checkbox",{attrs:{label:"CẤP HỘ CHIẾU CÔNG VỤ",required:""},model:{value:t.ho_chieu_cong_vu,callback:function(e){t.ho_chieu_cong_vu=e},expression:"ho_chieu_cong_vu"}}),a("v-checkbox",{attrs:{label:"CẤP CÔNG HÀM XIN THỊ THỰC"},model:{value:t.cong_ham,callback:function(e){t.cong_ham=e},expression:"cong_ham"}})],1)]),a("v-flex",{staticClass:"px-2 my-2",attrs:{xs12:""}},[a("label",{attrs:{for:""}},[t._v("Văn bản cử đi nước ngoài "),a("span",{staticClass:"red--text"},[t._v("*")])]),a("v-autocomplete",{attrs:{items:t.co_quan_chu_quan_thanh_vien,"item-text":"name","item-value":"value","return-object":"",clearable:"","hide-no-data":"",rules:[t.rules.required],required:"",solo:""},model:{value:t.co_quan_chu_quan_thanh_vien_select,callback:function(e){t.co_quan_chu_quan_thanh_vien_select=e},expression:"co_quan_chu_quan_thanh_vien_select"}})],1),a("v-flex",{staticClass:"px-2 my-2",attrs:{xs12:"",sm6:""}},[a("label",{attrs:{for:""}},[t._v("Số hộ chiếu")]),a("div",{staticStyle:{display:"flex","flex-wrap":"wrap","align-items":"center"}},[a("v-text-field",{attrs:{solo:""},model:{value:t.so_ho_chieu,callback:function(e){t.so_ho_chieu=e},expression:"so_ho_chieu"}}),a("v-btn",{attrs:{small:"",color:"primary"},on:{click:function(e){t.getThongTinNhanThan()}}},[t._v("Kiểm tra thông tin")])],1)]),a("v-flex",{staticClass:"px-2 my-2",attrs:{xs12:"",sm6:""}},[a("label",{attrs:{for:""}},[t._v("Mã nhân thân")]),a("v-text-field",{attrs:{solo:"",readonly:""},model:{value:t.ma_nhan_than,callback:function(e){t.ma_nhan_than=e},expression:"ma_nhan_than"}})],1),a("v-flex",{staticClass:"px-2 my-2",attrs:{xs12:""}},[a("label",{attrs:{for:""}},[t._v("1. Họ và tên (Chữ in viết hoa) "),a("span",{staticClass:"red--text"},[t._v("*")])]),a("v-text-field",{attrs:{rules:[t.rules.required],required:"",solo:""},on:{input:function(e){t.ho_ten=t.ho_ten.toUpperCase()}},model:{value:t.ho_ten,callback:function(e){t.ho_ten=e},expression:"ho_ten"}})],1),a("v-flex",{staticClass:"px-2 my-2",attrs:{xs12:"",sm3:""}},[a("label",{attrs:{for:""}},[t._v("2.Ngày sinh")]),a("v-text-field",{attrs:{slot:"activator","persistent-hint":"","append-icon":"event",hint:"DD/MM/YYYY",rules:[t.rules.required,t.rules.checkDatePast]},on:{change:function(e){t.changeNgaySinh()},input:function(e){t.inputNgaySinh()}},slot:"activator",model:{value:t.birthdayFormated,callback:function(e){t.birthdayFormated=e},expression:"birthdayFormated"}})],1),a("v-flex",{staticClass:"px-2 my-2",attrs:{xs12:"",sm3:""}},[a("div",{staticStyle:{display:"flex","flex-wrap":"wrap","align-items":"center"}},[a("label",{attrs:{for:""}},[t._v("3. Giới tính "),a("span",{staticClass:"red--text"},[t._v("*")])]),a("v-autocomplete",{attrs:{items:t.listGioiTinh,"item-text":"name","item-value":"value",clearable:"","hide-no-data":"",rules:[t.rules.required],required:"",solo:""},model:{value:t.gioi_tinh,callback:function(e){t.gioi_tinh=e},expression:"gioi_tinh"}})],1)]),a("v-flex",{staticClass:"px-2 my-2",attrs:{xs12:""}},[a("label",{attrs:{for:""}},[t._v("4. Nơi sinh "),a("span",{staticClass:"red--text"},[t._v("*")])]),a("div",{staticStyle:{display:"flex","flex-wrap":"wrap","align-items":"center"}},[a("v-autocomplete",{attrs:{items:t.listNoiSinh,"item-text":"TEN","item-value":"ID",clearable:"","hide-no-data":"",rules:[t.rules.required],required:"",solo:"","return-object":""},model:{value:t.noi_sinh,callback:function(e){t.noi_sinh=e},expression:"noi_sinh"}}),a("v-btn",{attrs:{small:"",color:"primary"},on:{click:function(e){t.getNoiKhac()}}},[t._v("Nơi khác")])],1)]),a("v-flex",{staticClass:"px-2 my-2",attrs:{xs12:""}},[a("span",[a("i",[t._v('Chọn nơi sinh từ danh sách tỉnh thành. Trong trường hợp nơi sinh là nước ngoài, nhấp "Nơi khác" và chọn nước tương ứng trong danh sách.')])])]),a("v-flex",{staticClass:"px-2 my-2",attrs:{xs12:""}},[a("label",{attrs:{for:""}},[t._v("5. Hộ khẩu thường trú ")]),a("div",{staticStyle:{display:"flex","flex-wrap":"wrap","align-items":"center"}},[a("v-text-field",{attrs:{solo:""},model:{value:t.ho_khau,callback:function(e){t.ho_khau=e},expression:"ho_khau"}})],1)]),a("v-flex",{staticClass:"px-2 my-2",attrs:{xs12:"",sm6:""}},[a("label",{attrs:{for:""}},[t._v("6. Giấy CMND/Thẻ CCCD số ")]),a("div",{staticStyle:{display:"flex","flex-wrap":"wrap","align-items":"center"}},[a("v-text-field",{attrs:{solo:""},on:{change:function(e){t.checkCMND()}},model:{value:t.so_cmt,callback:function(e){t.so_cmt=e},expression:"so_cmt"}})],1)]),a("v-flex",{staticClass:"px-2 my-2",attrs:{xs12:"",sm3:""}},[a("label",{attrs:{for:""}},[t._v("Ngày cấp ")]),a("v-menu",{ref:"menu2",attrs:{"close-on-content-click":!1,transition:"scale-transition","offset-y":""},model:{value:t.menu2,callback:function(e){t.menu2=e},expression:"menu2"}},[a("v-text-field",{attrs:{slot:"activator",hint:"DD/MM/YYYY","persistent-hint":"","append-icon":"event",solo:""},on:{change:function(e){t.dateNgayCapCMND=t.parseDate(t.ngay_cap_cmt)}},slot:"activator",model:{value:t.ngay_cap_cmt,callback:function(e){t.ngay_cap_cmt=e},expression:"ngay_cap_cmt"}}),a("v-date-picker",{attrs:{"no-title":"",locale:"vi"},on:{input:function(e){t.menu2=!1}},model:{value:t.dateNgayCapCMND,callback:function(e){t.dateNgayCapCMND=e},expression:"dateNgayCapCMND"}})],1),t.errorNgayCapCMT?a("span",{staticClass:"red--text"},[t._v("Ngày cấp đã quá hạn")]):t._e()],1),a("v-flex",{staticClass:"px-2 my-2",attrs:{xs12:"",sm3:""}},[a("label",{attrs:{for:""}},[t._v("Tại ")]),a("v-text-field",{attrs:{solo:""},model:{value:t.noi_cap_cmt,callback:function(e){t.noi_cap_cmt=e},expression:"noi_cap_cmt"}})],1),a("v-flex",{staticClass:"px-2 my-2",attrs:{xs12:""}},[a("label",{attrs:{for:""}},[t._v("7.Cơ quan công tác  ")]),a("v-text-field",{attrs:{solo:""},model:{value:t.co_quan_cong_tac,callback:function(e){t.co_quan_cong_tac=e},expression:"co_quan_cong_tac"}})],1),a("v-flex",{staticClass:"px-2 my-2",attrs:{xs12:"",sm6:""}},[a("label",{attrs:{for:""}},[t._v("8.Chức vụ")]),a("v-text-field",{attrs:{solo:""},model:{value:t.chuc_vu,callback:function(e){t.chuc_vu=e},expression:"chuc_vu"}})],1),a("v-flex",{staticClass:"px-2 my-2",attrs:{xs12:"",sm6:""}},[a("label",{attrs:{for:""}},[t._v("Điện thoại")]),a("v-text-field",{attrs:{solo:""},model:{value:t.dien_thoai,callback:function(e){t.dien_thoai=e},expression:"dien_thoai"}})],1),a("v-flex",{attrs:{xs12:""}},[a("label",{attrs:{for:""}},[t._v("a. Công chức/viên chức quản lý")])]),a("v-flex",{staticClass:"px-2 my-2",attrs:{xs12:"",sm3:""}},[a("label",{attrs:{for:""}},[t._v("Loại")]),a("v-text-field",{attrs:{solo:""},model:{value:t.cong_chuc_loai,callback:function(e){t.cong_chuc_loai=e},expression:"cong_chuc_loai"}})],1),a("v-flex",{staticClass:"px-2 my-2",attrs:{xs12:"",sm3:""}},[a("label",{attrs:{for:""}},[t._v("Bậc")]),a("v-text-field",{attrs:{solo:""},model:{value:t.cong_chuc_bac,callback:function(e){t.cong_chuc_bac=e},expression:"cong_chuc_bac"}})],1),a("v-flex",{staticClass:"px-2 my-2",attrs:{xs12:"",sm3:""}},[a("label",{attrs:{for:""}},[t._v("Ngạch")]),a("v-text-field",{attrs:{solo:""},model:{value:t.cong_chuc_ngach,callback:function(e){t.cong_chuc_ngach=e},expression:"cong_chuc_ngach"}})],1),a("v-flex",{staticClass:"px-2 my-2",attrs:{xs12:""}},[a("label",{attrs:{for:""}},[t._v("b. Cán bộ (bầu cử, phê chuẩn, bổ nhiệm):")]),a("v-text-field",{attrs:{solo:""},model:{value:t.can_bo_bo_nhiem,callback:function(e){t.can_bo_bo_nhiem=e},expression:"can_bo_bo_nhiem"}})],1),a("v-flex",{staticClass:"px-2 my-2",attrs:{xs12:""}},[a("label",{attrs:{for:""}},[t._v("c. Cấp bậc,hàm(lực lượng vũ trang): ")]),a("v-text-field",{attrs:{solo:""},model:{value:t.cap_bac_ham,callback:function(e){t.cap_bac_ham=e},expression:"cap_bac_ham"}})],1),a("v-flex",{staticClass:"px-2 my-2",attrs:{xs12:"",sm6:""}},[a("label",{attrs:{for:""}},[t._v("9. Đã được cấp hộ chiếu ngoại giao số")]),a("v-text-field",{attrs:{solo:"",placeholder:"Gồm 1 chữ cái và 7 số"},on:{change:function(e){t.soHoChieuNgoaiGiaoChange()}},model:{value:t.so_ho_chieu_ngoai_giao,callback:function(e){t.so_ho_chieu_ngoai_giao=e},expression:"so_ho_chieu_ngoai_giao"}})],1),a("v-flex",{staticClass:"px-2 my-2",attrs:{xs12:"",sm3:""}},[a("label",{attrs:{for:""}},[t._v("Cấp ngày")]),a("v-menu",{ref:"menu3",attrs:{"close-on-content-click":!1,transition:"scale-transition","offset-y":""},model:{value:t.menu3,callback:function(e){t.menu3=e},expression:"menu3"}},[a("v-text-field",{attrs:{slot:"activator","persistent-hint":"",hint:"DD/MM/YYYY","append-icon":"event",solo:"",rules:[t.rules.checkDatePast]},on:{change:function(e){t.dateNgayCapHCNG=t.parseDate(t.ngay_ho_chieu_ngoai_giao)}},slot:"activator",model:{value:t.ngay_ho_chieu_ngoai_giao,callback:function(e){t.ngay_ho_chieu_ngoai_giao=e},expression:"ngay_ho_chieu_ngoai_giao"}}),a("v-date-picker",{attrs:{"no-title":"",locale:"vi"},on:{input:function(e){t.menu3=!1}},model:{value:t.dateNgayCapHCNG,callback:function(e){t.dateNgayCapHCNG=e},expression:"dateNgayCapHCNG"}})],1)],1),a("v-flex",{staticClass:"px-2 my-2",attrs:{xs12:"",sm3:""}},[a("label",{attrs:{for:""}},[t._v("Tại")]),a("v-autocomplete",{attrs:{items:t.listNoiCapHoChieu,"item-text":"itemName","item-value":"itemName",clearable:"","hide-no-data":"",solo:""},model:{value:t.noi_cap_ho_chieu_ngoai_giao,callback:function(e){t.noi_cap_ho_chieu_ngoai_giao=e},expression:"noi_cap_ho_chieu_ngoai_giao"}})],1),a("v-flex",{staticClass:"px-2 my-2",attrs:{xs12:"",sm6:""}},[a("label",[t._v("hoặc/và hộ chiếu công vụ số")]),a("v-text-field",{attrs:{solo:"",placeholder:"Gồm 1 chữ cái và 7 số"},on:{change:function(e){t.soHoChieuCongVuChange()}},model:{value:t.so_ho_chieu_cong_vu,callback:function(e){t.so_ho_chieu_cong_vu=e},expression:"so_ho_chieu_cong_vu"}})],1),a("v-flex",{staticClass:"px-2 my-2",attrs:{xs12:"",sm3:""}},[a("label",{attrs:{for:""}},[t._v("Cấp ngày")]),a("v-menu",{ref:"menu4",attrs:{"close-on-content-click":!1,transition:"scale-transition","offset-y":""},model:{value:t.menu4,callback:function(e){t.menu4=e},expression:"menu4"}},[a("v-text-field",{attrs:{slot:"activator","persistent-hint":"",hint:"DD/MM/YYYY","append-icon":"event",solo:"",rules:[t.rules.checkDatePast]},on:{change:function(e){t.dateNgayCapHCCV=t.parseDate(t.ngay_ho_chieu_cong_vu)}},slot:"activator",model:{value:t.ngay_ho_chieu_cong_vu,callback:function(e){t.ngay_ho_chieu_cong_vu=e},expression:"ngay_ho_chieu_cong_vu"}}),a("v-date-picker",{attrs:{"no-title":"",locale:"vi"},on:{input:function(e){t.menu4=!1}},model:{value:t.dateNgayCapHCCV,callback:function(e){t.dateNgayCapHCCV=e},expression:"dateNgayCapHCCV"}})],1)],1),a("v-flex",{staticClass:"px-2 my-2",attrs:{xs12:"",sm3:""}},[a("label",{attrs:{for:""}},[t._v("Tại")]),a("v-autocomplete",{attrs:{items:t.listNoiCapHoChieu,"item-text":"itemName","item-value":"itemName",clearable:"","hide-no-data":"",solo:""},model:{value:t.noi_cap_ho_chieu_cong_vu,callback:function(e){t.noi_cap_ho_chieu_cong_vu=e},expression:"noi_cap_ho_chieu_cong_vu"}})],1),a("v-flex",{staticClass:"px-2 my-2",attrs:{xs12:""}},[a("label",[t._v("10. Thông tin gia đình")])]),a("v-flex",{staticClass:"px-2 my-2",attrs:{xs12:""}},[a("v-layout",{attrs:{wrap:""}},[a("v-flex",{attrs:{xs1:""}},[a("strong",[t._v("Cha")])]),a("v-flex",{attrs:{xs11:""}},[a("div",{staticStyle:{display:"flex","align-items":"center"}},[a("v-text-field",{staticClass:"mx-2",attrs:{label:"Họ tên",solo:""},model:{value:t.gia_dinh[0].ho_ten,callback:function(e){t.$set(t.gia_dinh[0],"ho_ten",e)},expression:"gia_dinh[0].ho_ten"}}),a("v-text-field",{staticClass:"mx-2",attrs:{label:"Năm sinh",solo:""},model:{value:t.gia_dinh[0].nam_sinh,callback:function(e){t.$set(t.gia_dinh[0],"nam_sinh",e)},expression:"gia_dinh[0].nam_sinh"}}),a("v-text-field",{staticClass:"mx-2",attrs:{label:"Nghề nghiệp",solo:""},model:{value:t.gia_dinh[0].nghe_nghiep,callback:function(e){t.$set(t.gia_dinh[0],"nghe_nghiep",e)},expression:"gia_dinh[0].nghe_nghiep"}}),a("v-text-field",{staticClass:"mx-2",attrs:{label:"Địa chỉ",solo:""},model:{value:t.gia_dinh[0].dia_chi,callback:function(e){t.$set(t.gia_dinh[0],"dia_chi",e)},expression:"gia_dinh[0].dia_chi"}})],1)])],1)],1),a("v-flex",{staticClass:"px-2 my-2",attrs:{xs12:""}},[a("v-layout",{attrs:{wrap:""}},[a("v-flex",{attrs:{xs1:""}},[a("strong",[t._v("Mẹ")])]),a("v-flex",{attrs:{xs11:""}},[a("div",{staticStyle:{display:"flex","aligin-items":"center"}},[a("v-text-field",{staticClass:"mx-2",attrs:{label:"Họ tên",solo:""},model:{value:t.gia_dinh[1].ho_ten,callback:function(e){t.$set(t.gia_dinh[1],"ho_ten",e)},expression:"gia_dinh[1].ho_ten"}}),a("v-text-field",{staticClass:"mx-2",attrs:{label:"Năm sinh",solo:""},model:{value:t.gia_dinh[1].nam_sinh,callback:function(e){t.$set(t.gia_dinh[1],"nam_sinh",e)},expression:"gia_dinh[1].nam_sinh"}}),a("v-text-field",{staticClass:"mx-2",attrs:{label:"Nghề nghiệp",solo:""},model:{value:t.gia_dinh[1].nghe_nghiep,callback:function(e){t.$set(t.gia_dinh[1],"nghe_nghiep",e)},expression:"gia_dinh[1].nghe_nghiep"}}),a("v-text-field",{staticClass:"mx-2",attrs:{label:"Địa chỉ",solo:""},model:{value:t.gia_dinh[1].dia_chi,callback:function(e){t.$set(t.gia_dinh[1],"dia_chi",e)},expression:"gia_dinh[1].dia_chi"}})],1)])],1)],1),a("v-flex",{staticClass:"px-2 my-2",attrs:{xs12:""}},[a("v-layout",{attrs:{wrap:""}},[a("v-flex",{attrs:{xs1:""}},[a("strong",[t._v("Vợ/chồng")])]),a("v-flex",{attrs:{xs11:""}},[a("div",{staticStyle:{display:"flex","align-items":"center"}},[a("v-text-field",{staticClass:"mx-2",attrs:{label:"Họ tên",solo:""},model:{value:t.gia_dinh[2].ho_ten,callback:function(e){t.$set(t.gia_dinh[2],"ho_ten",e)},expression:"gia_dinh[2].ho_ten"}}),a("v-text-field",{staticClass:"mx-2",attrs:{label:"Năm sinh",solo:""},model:{value:t.gia_dinh[2].nam_sinh,callback:function(e){t.$set(t.gia_dinh[2],"nam_sinh",e)},expression:"gia_dinh[2].nam_sinh"}}),a("v-text-field",{staticClass:"mx-2",attrs:{label:"Nghề nghiệp",solo:""},model:{value:t.gia_dinh[2].nghe_nghiep,callback:function(e){t.$set(t.gia_dinh[2],"nghe_nghiep",e)},expression:"gia_dinh[2].nghe_nghiep"}}),a("v-text-field",{staticClass:"mx-2",attrs:{label:"Địa chỉ",solo:""},model:{value:t.gia_dinh[2].dia_chi,callback:function(e){t.$set(t.gia_dinh[2],"dia_chi",e)},expression:"gia_dinh[2].dia_chi"}})],1)])],1)],1),a("v-flex",{staticClass:"px-2 my-2",attrs:{xs12:""}},[a("v-layout",{attrs:{wrap:""}},[a("v-flex",{attrs:{xs1:""}},[a("strong",[t._v("Con")])]),a("v-flex",{attrs:{xs11:""}},[a("div",{staticStyle:{display:"flex","align-items":"center"}},[a("v-text-field",{staticClass:"mx-2",attrs:{label:"Họ tên",solo:""},model:{value:t.gia_dinh[3].ho_ten,callback:function(e){t.$set(t.gia_dinh[3],"ho_ten",e)},expression:"gia_dinh[3].ho_ten"}}),a("v-text-field",{staticClass:"mx-2",attrs:{label:"Năm sinh",solo:""},model:{value:t.gia_dinh[3].nam_sinh,callback:function(e){t.$set(t.gia_dinh[3],"nam_sinh",e)},expression:"gia_dinh[3].nam_sinh"}}),a("v-text-field",{staticClass:"mx-2",attrs:{label:"Nghề nghiệp",solo:""},model:{value:t.gia_dinh[3].nghe_nghiep,callback:function(e){t.$set(t.gia_dinh[3],"nghe_nghiep",e)},expression:"gia_dinh[3].nghe_nghiep"}}),a("v-text-field",{staticClass:"mx-2",attrs:{label:"Địa chỉ",solo:""},model:{value:t.gia_dinh[3].dia_chi,callback:function(e){t.$set(t.gia_dinh[3],"dia_chi",e)},expression:"gia_dinh[3].dia_chi"}})],1)])],1)],1),a("v-flex",{staticClass:"px-2 my-2",attrs:{xs12:""}},[a("v-layout",{attrs:{wrap:""}},[a("v-flex",{attrs:{xs1:""}},[a("strong",[t._v("Con")])]),a("v-flex",{attrs:{xs11:""}},[a("div",{staticStyle:{display:"flex","align-items":"center"}},[a("v-text-field",{staticClass:"mx-2",attrs:{label:"Họ tên",solo:""},model:{value:t.gia_dinh[4].ho_ten,callback:function(e){t.$set(t.gia_dinh[4],"ho_ten",e)},expression:"gia_dinh[4].ho_ten"}}),a("v-text-field",{staticClass:"mx-2",attrs:{label:"Năm sinh",solo:""},model:{value:t.gia_dinh[4].nam_sinh,callback:function(e){t.$set(t.gia_dinh[4],"nam_sinh",e)},expression:"gia_dinh[4].nam_sinh"}}),a("v-text-field",{staticClass:"mx-2",attrs:{label:"Nghề nghiệp",solo:""},model:{value:t.gia_dinh[4].nghe_nghiep,callback:function(e){t.$set(t.gia_dinh[4],"nghe_nghiep",e)},expression:"gia_dinh[4].nghe_nghiep"}}),a("v-text-field",{staticClass:"mx-2",attrs:{label:"Địa chỉ",solo:""},model:{value:t.gia_dinh[4].dia_chi,callback:function(e){t.$set(t.gia_dinh[4],"dia_chi",e)},expression:"gia_dinh[4].dia_chi"}})],1)])],1)],1),a("v-flex",{staticClass:"px-2 my-2",attrs:{xs12:""}},[a("v-layout",{attrs:{wrap:""}},[a("v-flex",{attrs:{xs1:""}},[a("strong",[t._v("Con")])]),a("v-flex",{attrs:{xs11:""}},[a("div",{staticStyle:{display:"flex","align-items":"center"}},[a("v-text-field",{staticClass:"mx-2",attrs:{label:"Họ tên",solo:""},model:{value:t.gia_dinh[5].ho_ten,callback:function(e){t.$set(t.gia_dinh[5],"ho_ten",e)},expression:"gia_dinh[5].ho_ten"}}),a("v-text-field",{staticClass:"mx-2",attrs:{label:"Năm sinh",solo:""},model:{value:t.gia_dinh[5].nam_sinh,callback:function(e){t.$set(t.gia_dinh[5],"nam_sinh",e)},expression:"gia_dinh[5].nam_sinh"}}),a("v-text-field",{staticClass:"mx-2",attrs:{label:"Nghề nghiệp",solo:""},model:{value:t.gia_dinh[5].nghe_nghiep,callback:function(e){t.$set(t.gia_dinh[5],"nghe_nghiep",e)},expression:"gia_dinh[5].nghe_nghiep"}}),a("v-text-field",{staticClass:"mx-2",attrs:{label:"Địa chỉ",solo:""},model:{value:t.gia_dinh[5].dia_chi,callback:function(e){t.$set(t.gia_dinh[5],"dia_chi",e)},expression:"gia_dinh[5].dia_chi"}})],1)])],1)],1)],1)],1),a("v-flex",{staticClass:"text-xs-right",attrs:{xs12:""}},[a("v-btn",{attrs:{small:"",color:"primary"},on:{click:function(e){t.updateThanhVien()}}},[t._v("Cập nhập")]),a("v-btn",{attrs:{small:"",color:"primary"},on:{click:function(e){t.dialogThemThanhVien=!1}}},[t._v("Đóng")])],1)],1)],1)],1)],1)],1),a("v-dialog",{staticClass:"form_vuejs",attrs:{"max-width":"800px",persistent:""},model:{value:t.dialogDanhSach,callback:function(e){t.dialogDanhSach=e},expression:"dialogDanhSach"}},[a("v-card",[a("v-card-title",{staticClass:"headline lighten-2",staticStyle:{display:"flex","justify-content":"space-between"},attrs:{"primary-title":""}},[t._v("\n                Danh sách thành viên\n                "),a("v-btn",{attrs:{color:"#115ebe",fab:"",small:"",dark:""},on:{click:function(e){t.dialogDanhSach=!1}}},[a("v-icon",[t._v("cancel")])],1)],1),a("v-card-text",{staticClass:"form_vuejs"},[a("v-data-table",{staticClass:"table_vuejs",staticStyle:{"border-left":"0.5px solid #dedede"},attrs:{headers:t.headerDanhSach,items:t.listDanhSach,"hide-actions":"","no-data-text":"Không có thông tin thành viên nào"},scopedSlots:t._u([{key:"items",fn:function(e){return[a("tr",{staticStyle:{cursor:"pointer"},on:{click:function(a){t.chonThanhVien(e.item)}}},[a("td",[t._v(t._s(e.item.NguoiID))]),a("td",[t._v(t._s(e.item.HoTen))]),a("td",[t._v(t._s(e.item.NgaySinhFormart))]),a("td",[t._v(t._s(e.item.NoiSinhText))]),a("td",[t._v(t._s(e.item.SoSeri))]),a("td",[t._v(t._s(e.item.HanDungFormart))]),a("td",[t._v(t._s(e.item.DaHuy?"Đã hủy":"Đang sử dụng"))])])]}}])})],1)],1)],1)],1)},o=[],n=a("854a"),s=a.n(n),r=a("bc3a"),c=a.n(r),l=a("1157"),d=a.n(l),u=a("c4f6"),h=a.n(u);function p(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{},i=Object.keys(a);"function"===typeof Object.getOwnPropertySymbols&&(i=i.concat(Object.getOwnPropertySymbols(a).filter((function(t){return Object.getOwnPropertyDescriptor(a,t).enumerable})))),i.forEach((function(e){m(t,e,a[e])}))}return t}function m(t,e,a){return e in t?Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}function g(t){return g="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},g(t)}function v(t,e){return y(t)||_(t,e)||f()}function f(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function _(t,e){var a=[],i=!0,o=!1,n=void 0;try{for(var s,r=t[Symbol.iterator]();!(i=(s=r.next()).done);i=!0)if(a.push(s.value),e&&a.length===e)break}catch(c){o=!0,n=c}finally{try{i||null==r["return"]||r["return"]()}finally{if(o)throw n}}return a}function y(t){if(Array.isArray(t))return t}s.a.options={closeButton:!0,timeOut:"5000"};var C={props:["id","formCode"],components:{suggestions:h.a},data:function(){return{menu:!0,menu2:!0,menu3:!0,menu4:!0,menu5:!0,menu6:!1,checkCMT:!1,errorNgayCapCMT:!1,dialogDanhSach:!1,messengeCMT:"",dateNgayKy:(new Date).toISOString().substr(0,10),dateNgayCapHCNG:(new Date).toISOString().substr(0,10),dateNgayCapHCCV:(new Date).toISOString().substr(0,10),dateNgayCapCMND:(new Date).toISOString().substr(0,10),dateNgayHenTra:(new Date).toISOString().substr(0,10),dateDueDate:(new Date).toISOString().substr(0,10),dateDueDateFormated:"",birthdayFormated:"",birthday:(new Date).toISOString().substr(0,10),eFormCode:"",tinhSelected:"",srcMauChuKy:"",update_cqcq:"",update_thanhvien:"",searchOptions:{inputClass:"input_vuejs"},ngayHetHieuLuc:"",eFormCodeArr:[],listTinh:[],checkVanBan:[],headerVanBan:[{text:"Đã KT",align:"center",sortable:!1},{text:"Số ký hiệu",align:"center",sortable:!1},{text:"Ngày ký",align:"center",sortable:!1},{text:"Cơ quan chủ quản",align:"center",sortable:!1},{text:"Người ký",align:"center",sortable:!1},{text:"Sửa",align:"center",sortable:!1},{text:"Xóa",align:"center",sortable:!1}],listVanBan:[],headerThanhVien:[{text:"STT",align:"center",sortable:!1},{text:"Họ tên",align:"center",sortable:!1},{text:"CMND/CCCD",align:"center",sortable:!1},{text:"Ngày sinh",align:"center",sortable:!1},{text:"Nơi sinh",align:"center",sortable:!1},{text:"Văn bản quyết định",align:"center",sortable:!1},{text:"Sửa",align:"center",sortable:!1},{text:"Xóa",align:"center",sortable:!1}],listThanhVien:[],headerThanhPhanHoSo:[{text:"Chọn",align:"center",sortable:!1},{text:"Tên thành phần",align:"center",sortable:!1},{text:"Loại",align:"center",sortable:!1},{text:"Số lượng",align:"center",sortable:!1}],listThanhPhanHoSo:[],headerDanhSach:[{text:"Mã nhân thân",align:"center",sortable:!1},{text:"Họ và tên",align:"center",sortable:!1},{text:"Ngày sinh",align:"center",sortable:!1},{text:"Nơi sinh",align:"center",sortable:!1},{text:"Số hộ chiếu",align:"center",sortable:!1},{text:"Ngày hết hạn",align:"center",sortable:!1},{text:"Trạng thái",align:"center",sortable:!1}],listDanhSach:[],listGioiTinh:[{name:"Nam",value:"Nam"},{name:"Nữ",value:"Nữ"}],fileMarks:[{value:1,name:"Bản chụp"},{value:2,name:"Bản sao"},{value:3,name:"Bản gốc"},{value:4,name:"Bản dịch"}],checkbox:!1,dialogThemVanBan:!1,dialogThemThanhVien:!1,isLoadingDelegateIdNo:!1,applicants:[],searchApplicants:null,dossierParts:[],delegateCitys:[],delegateCityCode:"",delegateDistricts:[],delegateDistrictCode:"",delegateWards:[],delegateWardCode:"",listNuocDi:[],listCoQuanChuQuan:[],listVanBanNguoiKy:[],serviceCode:d()("#serviceCode_hidden").val(),govAgencyCode:d()("#govAgencyCode_hidden").val(),dossierTemplateNo:"",originality:3,selected:[],dossierFileCustom:[],dossierMarkArr:[],dossierFileArr:[],dossiers:{applicantName:d()("#applicantName").val(),applicantIdType:"citizen",applicantIdNo:"",address:"",cityCode:"",districtCode:"",wardCode:"",contactName:"",contactTelNo:"",contactEmail:"",delegateName:"",delegateIdNo:"",delegateTelNo:"",delegateEmail:"",delegateAddress:"",delegateCityCode:"",delegateDistrictCode:"",delegateWardCode:"",applicantNote:"",dossierName:d()("#serviceName_hidden").val(),viaPostal:1,postalServiceCode:"VNPOST",postalAddress:"",postalCityCode:"",postalTelNo:"",sampleCount:1,dueDate:"",dossierNote:"",Doan_HCTN:"",dossierFilePayment:"",metaData:"{}"},bookingName:"",vb_so_thu_tu:"",so_nguoi:null,nuoc_di:[],ho_chieu_ngoai_giao_cu:0,ho_chieu_cong_vu_cu:0,ho_chieu_pho_thong_cu:0,ho_chieu_ngoai_giao_moi:0,ho_chieu_cong_vu_moi:0,ho_chieu_gia_han:0,ho_chieu_hong:0,ho_chieu_mat:0,cong_ham_so_nuoc:0,cong_ham_so_nguoi:0,cong_ham_nhap_canh:0,cong_ham_qua_canh:0,cong_ham_schengen:0,le_phi_format:null,dueDate:null,dossierNote:null,vb_so_hieu_van_ban:null,co_quan_chu_quan:null,vb_ngay_ky:null,vb_co_quan_tieng_anh:null,vb_nguoi_ky:null,ho_chieu_ngoai_giao:null,ho_chieu_cong_vu:null,cong_ham:null,co_quan_chu_quan_thanh_vien:[],co_quan_chu_quan_thanh_vien_select:null,so_ho_chieu:null,ma_nhan_than:null,ho_ten:null,ngay_sinh:null,thang_sinh:null,nam_sing:null,gioi_tinh:null,noi_sinh:{},dictCollection:"",listNoiSinh:[],listNoiSinhNuocNgoai:[],listNoiSinhTrongNuoc:[],listNoiCapHoChieu:[],ho_khau:null,so_cmt:null,ngay_cap_cmt:null,noi_cap_cmt:null,co_quan_cong_tac:null,chuc_vu:null,dien_thoai:null,cong_chuc_loai:null,cong_chuc_bac:null,cong_chuc_ngach:null,can_bo_bo_nhiem:null,cap_bac_ham:null,so_ho_chieu_ngoai_giao:null,ngay_ho_chieu_ngoai_giao:null,noi_cap_ho_chieu_ngoai_giao:null,so_ho_chieu_cong_vu:null,ngay_ho_chieu_cong_vu:null,noi_cap_ho_chieu_cong_vu:null,viaPostal:!1,gia_dinh:[{gia_dinh:"1",ho_ten:"",nam_sinh:"",nghe_nghiep:"",dia_chi:""},{gia_dinh:"2",ho_ten:"",nam_sinh:"",nghe_nghiep:"",dia_chi:""},{gia_dinh:"3",ho_ten:"",nam_sinh:"",nghe_nghiep:"",dia_chi:""},{gia_dinh:"4",ho_ten:"",nam_sinh:"",nghe_nghiep:"",dia_chi:""},{gia_dinh:"4",ho_ten:"",nam_sinh:"",nghe_nghiep:"",dia_chi:""},{gia_dinh:"4",ho_ten:"",nam_sinh:"",nghe_nghiep:"",dia_chi:""}],payment:{},rules:{required:function(t){return!!t||"Thông tin này là bắt buộc"},checkDatePast:function(t){if(t){var e=new Date,a=t.split("/"),i=v(a,3),o=i[0],n=i[1],s=i[2],r=new Date;return r.setFullYear(s,n-1,o),e>=r||"Ngày không được lớn hơn ngày hiện tại"}return!0},checkDateFuture:function(t){if(t){var e=new Date,a=t.split("/"),i=v(a,3),o=i[0],n=i[1],s=i[2],r=new Date;return r.setFullYear(s,n-1,o),e<=r||"Ngày không được nhỏ hơn ngày hiện tại"}return!0},checkYear:function(t){var e=new Date,a=new Date;return a.setFullYear(t),e>=a||"Năm không được lớn hơn năm hiện tại"},credit:function(t){if(t){if(9===t.length){var e=/^(([0-9]{9,9}))$/;return e.test(t)||"Số CMND gồm 9 hoặc 12 ký tự 0-9"}var a=/^(([0-9]{12,12}))$/;return a.test(t)||"Số CMND gồm 9 hoặc 12 ký tự 0-9"}},soHoChieu:function(t){var e=/^([A-Z])\d{7}$/;return!!e.test(t)||"Gồm 1 chữ cái và 7 số"},telNo:function(t){var e=/^0([1-9]{1}\d{8})$/;return t?e.test(t)||"Số điện thoại gồm 10 ký tự 0-9, eg: 0989123456, ...":[]},varChar50:function(t){return!t||(!(t.length>50)||"Thông tin không được quá 50 ký tự")}}}},created:function(){var t=this;t.$nextTick((function(){var e=t.$router.history.current.query;t.dossierTemplateNo=e.hasOwnProperty("template_no")&&e.template_no?e.template_no:"",t.eFormCode=e.hasOwnProperty("eformCode")&&e.eformCode?e.eformCode:"",t.getDelegateCity(),t.getCoQuanChuQuan(),t.getNoiCapHoChieu(),t.getNuocDi(),t.getNoiSinhTrongNuoc(),t.getNoiSinhNuocNgoai(),setTimeout((function(){"UPDATE"===t.formCode?t.getDetail():(t.dossiers["metaData"]=JSON.stringify({newFormTemplate:"true",dossierFileCustom:[],ma_to_khai:[],totalRecord:0,delegateIdNo:"",delegateName:"",delegateTelNo:"",Doan_HCTN:""}),t.getThanhPhan(),t.genDueDate(),t.eFormCode&&setTimeout((function(){t.getDataEform()}),500))}),500)}))},watch:{payment:{deep:!0,handler:function(t,e){d()("#payment_hidden").val(JSON.stringify(t))}},dossiers:{deep:!0,handler:function(t,e){d()("#dossiers_hidden").val(JSON.stringify(t))}},dossierFileArr:{deep:!0,handler:function(t,e){d()("#dossierFileArr_hidden").val(JSON.stringify(t))}},dossierMarkArr:{deep:!0,handler:function(t,e){var a=t.filter((function(t){return t.recordCount}));d()("#dossierMarkArr_hidden").val(JSON.stringify(a))}},delegateCityCode:function(t){this.dossiers.delegateCityCode=t,this.getDelegateDistrict()},delegateDistrictCode:function(t){this.dossiers.delegateDistrictCode=t,this.getDelegateWard()},delegateWardCode:function(t){this.dossiers.delegateWardCode=t},co_quan_chu_quan:function(t){this.vb_nguoi_ky="",this.getNguoiKyVB()},vb_nguoi_ky:function(t){this.srcMauChuKy="",this.ngayHetHieuLuc="",t&&(this.getImageCK(t),this.ngayHetHieuLuc=this.formatDate(t["ngayHL"].substr(0,10)))},dateNgayKy:function(t){this.vb_ngay_ky=this.formatDate(this.dateNgayKy)},dateNgayCapHCNG:function(t){this.ngay_ho_chieu_ngoai_giao=this.formatDate(this.dateNgayCapHCNG)},dateNgayCapHCCV:function(t){this.ngay_ho_chieu_cong_vu=this.formatDate(this.dateNgayCapHCCV)},dateNgayCapCMND:function(t){this.ngay_cap_cmt=this.formatDate(this.dateNgayCapCMND),this.changeNgayCapCMT()},birthday:function(t){this.birthdayFormated=this.formatDate(this.birthday)},dateDueDate:function(t){this.dateDueDateFormated=this.formatDate(this.dateDueDate);var e=this.dateDueDate.split("-"),a=v(e,3),i=(a[0],a[1],a[2],new Date(this.dateDueDate));this.dossiers.dueDate=i.getTime()},searchApplicants:function(t){var e=this;if(!e.isLoadingDelegateIdNo){e.isLoadingDelegateIdNo=!0;var a={url:"/o/rest/v2/applicants?start=0&end=5&idNo="+t};c.a.request(a).then((function(t){e.applicants=t.data.data,e.isLoadingDelegateIdNo=!1})).catch((function(t){e.isLoadingDelegateIdNo=!1}))}},viaPostal:function(t){this.dossiers.viaPostal=t?2:1},ho_chieu_cong_vu:function(t){},ho_chieu_ngoai_giao:function(t){},nuoc_di:function(t){this.genLePhi()},ho_chieu_hong:function(t){this.genLePhi()},ho_chieu_gia_han:function(t){this.genLePhi()},ho_chieu_mat:function(t){this.genLePhi()},ho_chieu_ngoai_giao_moi:function(){this.genLePhi()},ho_chieu_cong_vu_moi:function(){this.genLePhi()},cong_ham_so_nuoc:function(){this.genLePhi()},cong_ham_schengen:function(){this.genLePhi()},cong_ham_nhap_canh:function(){this.genLePhi()},cong_ham_qua_canh:function(){this.genLePhi()}},methods:{getDetail:function(){var t=this,e={url:"/o/rest/v2/dossiers/"+t.id,headers:{groupId:Liferay.ThemeDisplay.getScopeGroupId()}};c.a.request(e).then((function(e){var a=JSON.parse(e.data.metaData);a.dossierFileCustom&&(t.dossierFileCustom=a.dossierFileCustom),a.ma_to_khai&&(t.eFormCodeArr=a.ma_to_khai),t.dossiers=e.data,t.dossiers["bookingName"]=e.data["applicantName"],t.delegateCityCode=t.dossiers.delegateCityCode,t.delegateDistrictCode=t.dossiers.delegateDistrictCode,t.delegateWardCode=t.dossiers.delegateWardCode,t.dateDueDate=t.parseDate(t.dossiers.dueDate.substr(0,10)),t.viaPostal=2===t.dossiers.viaPostal,t.nuoc_di=a.Doan_HCTN.CacNuocDi_ma.split(","),t.ho_chieu_ngoai_giao_cu=a.Doan_HCTN.SoHCCu_NG?parseInt(a.Doan_HCTN.SoHCCu_NG):0,t.ho_chieu_cong_vu_cu=a.Doan_HCTN.SoHCCu_CV?parseInt(a.Doan_HCTN.SoHCCu_CV):0,t.ho_chieu_pho_thong_cu=a.Doan_HCTN.SoHCCu_PT?parseInt(a.Doan_HCTN.SoHCCu_PT):0,t.ho_chieu_cong_vu_moi=a.Doan_HCTN.SoHCCapMoi?parseInt(a.Doan_HCTN.SoHCCapMoi):0,t.cong_ham_so_nuoc=a.Doan_HCTN.SoNuocXinCH?parseInt(a.Doan_HCTN.SoNuocXinCH):0,t.ho_chieu_ngoai_giao_moi=a.Doan_HCTN.SoHCCapMoi_NG?parseInt(a.Doan_HCTN.SoHCCapMoi_NG):0,t.cong_ham_schengen=a.Doan_HCTN.SoNguoiMienCH?parseInt(a.Doan_HCTN.SoNguoiMienCH):0,t.cong_ham_nhap_canh=a.Doan_HCTN.SoCHNhapCanh?parseInt(a.Doan_HCTN.SoCHNhapCanh):0,t.cong_ham_qua_canh=a.Doan_HCTN.SoCHQuaCanh?parseInt(a.Doan_HCTN.SoCHQuaCanh):0,t.ho_chieu_gia_han=a.Doan_HCTN.SoHCGH?parseInt(a.Doan_HCTN.SoHCGH):0,t.ho_chieu_hong=a.Doan_HCTN.SoHCHong?parseInt(a.Doan_HCTN.SoHCHong):0,t.ho_chieu_mat=a.Doan_HCTN.SoHCMat?parseInt(a.Doan_HCTN.SoHCMat):0,t.so_nguoi=a.Doan_HCTN.SoNguoi?parseInt(a.Doan_HCTN.SoNguoi):0,t.dossierFileCustom.forEach((function(e){"TP01"!==e.partNo&&"TP02"!==e.partNo&&t.dossierFileArr.push(e)})),t.genLePhi(),t.getThanhPhan(),t.getDossierFile()})).catch((function(t){}))},getDossierFile:function(){var t=this,e={url:"/o/rest/v2/dossiers/"+t.id+"/files",headers:{groupId:Liferay.ThemeDisplay.getScopeGroupId()}};c.a.request(e).then((function(e){var a=e.data.data;if(a.length)for(var i=0;i<a.length;i++){var o={partNo:a[i]["dossierPartNo"],formData:a[i]["formData"],referenceUid:a[i]["referenceUid"],eform:"true"};if(t.dossierFileArr.push(o),"TP01"===a[i]["dossierPartNo"]){var n=JSON.parse(a[i]["formData"]);t.listThanhVien=n.thanh_vien_doan}if("TP02"===a[i]["dossierPartNo"]){var s=JSON.parse(a[i]["formData"]);t.listVanBan=s.van_ban,t.fillCheckBox(),t.genSelectCQCQ()}}})).catch((function(t){}))},getDelegateCity:function(){var t=this,e={url:"/o/rest/v2/dictcollections/ADMINISTRATIVE_REGION/dictitems?level=0&parent=0",headers:{groupId:Liferay.ThemeDisplay.getScopeGroupId()}};c.a.request(e).then((function(e){t.delegateCitys=t.sortArr(e.data.data,"itemName")})).catch((function(t){}))},getDelegateDistrict:function(){var t=this,e={url:"/o/rest/v2/dictcollections/ADMINISTRATIVE_REGION/dictitems?level=1&parent="+t.delegateCityCode,headers:{groupId:Liferay.ThemeDisplay.getScopeGroupId()}};c.a.request(e).then((function(e){t.delegateDistricts=t.sortArr(e.data.data,"itemName")})).catch((function(t){}))},getDelegateWard:function(){var t=this,e={url:"/o/rest/v2/dictcollections/ADMINISTRATIVE_REGION/dictitems?level=2&parent="+t.delegateDistrictCode,headers:{groupId:Liferay.ThemeDisplay.getScopeGroupId()}};c.a.request(e).then((function(e){t.delegateWards=t.sortArr(e.data.data,"itemName")})).catch((function(t){}))},getThanhPhan:function(){var t=this,e={url:"/o/rest/v2/dossiertemplates/"+t.dossierTemplateNo,headers:{groupId:Liferay.ThemeDisplay.getScopeGroupId()}};c.a.request(e).then((function(e){if(t.dossierParts=e.data.dossierParts,"UPDATE"===t.formCode)for(var a=function(e){var a=t.dossierFileCustom.find((function(a){return a.partNo===t.dossierParts[e]["partNo"]}));if(a){var i={dossierPartNo:t.dossierParts[e]["partNo"],fileMark:a.fileMark,partName:t.dossierParts[e]["partName"],partType:t.dossierParts[e]["partType"],fileCheck:0,fileComment:"",recordCount:a.recordCount};t.selected.push(i),t.dossierMarkArr.push(i)}else t.dossierMarkArr.push({dossierPartNo:t.dossierParts[e]["partNo"],fileMark:t.dossierParts[e]["fileMark"],partName:t.dossierParts[e]["partName"],partType:t.dossierParts[e]["partType"],fileCheck:0,fileComment:"",recordCount:""})},i=0;i<t.dossierParts.length;i++)a(i);else{var o=new Array,n=0;t.dossierFileArr=[];for(var s=0;s<t.dossierParts.length;s++)t.dossierMarkArr.push({dossierPartNo:t.dossierParts[s]["partNo"],fileMark:t.dossierParts[s]["fileMark"],partName:t.dossierParts[s]["partName"],partType:t.dossierParts[s]["partType"],fileCheck:0,fileComment:"",recordCount:""}),"TP01"!==t.dossierParts[s]["partNo"]&&"TP02"!==t.dossierParts[s]["partNo"]||1!==t.dossierParts[s].partType||(t.dossierFileArr[n]={formData:"",partNo:t.dossierParts[s]["partNo"],eform:!1},o[n]={partNo:t.dossierParts[s]["partNo"],partName:t.dossierParts[s]["partName"],fileMark:t.dossierParts[s]["fileMark"],recordCount:1},n++);for(var r=0,c=0;c<o.length;c++)r+=parseInt(o[c]["recordCount"]);var l=JSON.parse(t.dossiers["metaData"]);l["dossierFileCustom"]=o,l["totalRecord"]=r,t.dossiers["metaData"]=JSON.stringify(l)}})).catch((function(t){}))},getDataEform:function(){var t=this,e=t.eFormCodeArr.find((function(e){return e===t.eFormCode}));if(e)t.eFormCode="",s.a.error("Không hợp lệ. Mã tờ khai đã được lấy dữ liệu");else{var a={url:"/o/rest/v2/serverconfigs/SERVER_EFORM_DATA_DVC/protocols/API_CONNECT?eFormNo="+t.eFormCode,headers:{groupId:Liferay.ThemeDisplay.getScopeGroupId()}};c.a.request(a).then((function(e){if(0!==Object.keys(e.data).length&&e.data.constructor===Object){t.eFormCodeArr.push(t.eFormCode);var a=JSON.parse(t.dossiers["metaData"]);a["ma_to_khai"].push(t.eFormCode),t.dossiers["metaData"]=JSON.stringify(a),t.eFormCode="",t.dossiers.delegateName||e.data.delegateName&&(t.dossiers.delegateName=e.data.ho_ten),t.dossiers.delegateIdNo||e.data.delegateIdNo&&(t.dossiers.delegateIdNo=e.data.delegateIdNo),t.dossiers.delegateTelNo||e.data.delegateTelNo&&(t.dossiers.delegateTelNo=e.data.delegateTelNo),t.dossiers.delegateAddress||e.data.delegateAddress&&(t.dossiers.delegateAddress=e.data.delegateAddress.length<100?e.data.delegateAddress:""),t.dossiers.delegateEmail||e.data.delegateEmail&&(t.dossiers.delegateEmail=e.data.delegateEmail),t.dossiers.applicantName||e.data.vb_co_quan_chu_quan&&(t.dossiers.applicantName=e.data.vb_co_quan_chu_quan),t.dossiers.applicantIdNo||e.data.applicantIdNo&&(t.dossiers.applicantIdNo=e.data.applicantIdNo),t.dossiers.contactTelNo||e.data.contactTelNo&&(t.dossiers.contactTelNo=e.data.contactTelNo),t.dossiers.contactEmail||e.data.contactEmail&&(t.dossiers.contactEmail=e.data.contactEmail),t.dossiers.contactName||e.data.contactName&&(t.dossiers.contactName=e.data.contactName),t.dossiers.address||e.data.address&&(t.dossiers.address=e.data.address.length<100?e.data.address:""),t.dossiers.bookingName||e.data.vb_co_quan_chu_quan&&(t.dossiers.bookingName=e.data.vb_co_quan_chu_quan),t.changeDossier(),t.fillDataEform(e.data)}else t.eFormCode="",s.a.error("Mã tờ khai không tìm thấy")})).catch((function(e){t.eFormCode="",s.a.error("Mã tờ khai không tìm thấy")}))}},fillDataEform:function(t){var e=this;0!==Object.keys(t).length&&t.constructor===Object&&(e.fillTableVanBan(t),e.fillTableThanhVien(t))},fillTableVanBan:function(t){var e=this;if(t.vb_so_hieu_van_ban&&t.vb_co_quan_chu_quan&&t.vb_ma_co_quan_chu_quan){var a={vb_so_hieu_van_ban:t.vb_so_hieu_van_ban.toUpperCase(),vb_co_quan_chu_quan:t.vb_co_quan_chu_quan,vb_ma_co_quan_chu_quan:t.vb_ma_co_quan_chu_quan,vb_ngay_ky:t.vb_ngay_ky,vb_co_quan_tieng_anh:t.vb_co_quan_tieng_anh,vb_nguoi_ky:"",ho_ten_nguoi_ky:t.vb_nguoi_ky,chuc_vu_nguoi_ky:""},i=e.listVanBan.find((function(t){return t.vb_so_hieu_van_ban.toLowerCase()===a.vb_so_hieu_van_ban.toLowerCase()&&t.vb_ngay_ky===a.vb_ngay_ky&&t.vb_ma_co_quan_chu_quan===a.vb_ma_co_quan_chu_quan}));if(!i){e.listVanBan.push(a);for(var o=0;o<e.dossierFileArr.length;o++)"TP02"===e.dossierFileArr[o]["partNo"]&&(e.dossierFileArr[o]["formData"]=JSON.stringify({van_ban:e.listVanBan}),e.dossierFileArr[o]["eform"]="true");d()("#dossierFileArr_hidden").val(JSON.stringify(e.dossierFileArr)),e.genSelectCQCQ()}}},fillTableThanhVien:function(t){var e=this;if(e.vb_so_thu_tu=t.vb_so_thu_tu?t.vb_so_thu_tu:"",t.vb_so_hieu_van_ban&&t.vb_co_quan_chu_quan&&t.vb_ma_co_quan_chu_quan){var a={bookingName:t.bookingName?t.bookingName:"",applicantName:t.applicantName?t.applicantName:"",applicantIdNo:t.applicantIdNo?t.applicantIdNo:"",address:t.address?t.address:"",vb_so_thu_tu:t.vb_so_thu_tu?t.vb_so_thu_tu:"",vb_so_hieu_van_ban:t.vb_so_hieu_van_ban?t.vb_so_hieu_van_ban.toUpperCase():"",vb_ngay_ky:t.vb_ngay_ky?t.vb_ngay_ky:"",vb_co_quan_chu_quan:t.vb_co_quan_chu_quan?t.vb_co_quan_chu_quan:"",vb_ma_co_quan_chu_quan:t.vb_ma_co_quan_chu_quan?t.vb_ma_co_quan_chu_quan:"",vb_nguoi_ky:t.vb_nguoi_ky?t.vb_nguoi_ky:"",vb_co_quan_tieng_anh:t.vb_co_quan_tieng_anh?t.vb_co_quan_tieng_anh:"",ma_nhan_than:"",ho_chieu_ngoai_giao:!!t.ho_chieu_ngoai_giao&&t.ho_chieu_ngoai_giao,ho_chieu_cong_vu:!!t.ho_chieu_cong_vu&&t.ho_chieu_cong_vu,cong_ham:!!t.cong_ham&&t.cong_ham,so_ho_chieu:t.so_ho_chieu?t.so_ho_chieu:"",so_hieu_van_ban:t.vb_so_hieu_van_ban?t.vb_so_hieu_van_ban.toUpperCase():"",co_quan_chu_quan:t.vb_ma_co_quan_chu_quan?t.vb_ma_co_quan_chu_quan:"",co_quan_chu_quan_text:t.vb_co_quan_chu_quan?t.vb_co_quan_chu_quan:"",ho_ten:t.ho_ten?t.ho_ten:"",gioi_tinh:t.gioi_tinh?t.gioi_tinh:"",ngay_sinh:t.ngay_sinh?t.ngay_sinh:"",thang_sinh:t.thang_sinh?t.thang_sinh:"",nam_sinh:t.nam_sinh?t.nam_sinh:"",noi_sinh_khac:"",noi_sinh:t.noi_sinh?t.noi_sinh:"",noi_sinh_text:t.noi_sinh_text?t.noi_sinh_text:"",ho_khau:t.ho_khau?t.ho_khau:"",so_cmt:t.so_cmt?t.so_cmt:"",ngay_cap_cmt:t.ngay_cap_cmt?t.ngay_cap_cmt:"",noi_cap_cmt:t.noi_cap_cmt?t.noi_cap_cmt:"",co_quan_cong_tac:t.co_quan_cong_tac?t.co_quan_cong_tac:"",dien_thoai:t.dien_thoai?t.dien_thoai:"",chuc_vu:t.chuc_vu?t.chuc_vu:"",cap_bac_ham:t.cap_bac_ham?t.cap_bac_ham:"",chuc_vu_tieng_anh:"",cong_chuc_loai:t.cong_chuc_loai?t.cong_chuc_loai:"",cong_chuc_bac:t.cong_chuc_bac?t.cong_chuc_bac:"",cong_chuc_ngach:t.cong_chuc_ngach?t.cong_chuc_ngach:"",can_bo_bo_nhiem:t.can_bo_bo_nhiem?t.can_bo_bo_nhiem:"",so_ho_chieu_ngoai_giao:t.so_ho_chieu_ngoai_giao?t.so_ho_chieu_ngoai_giao:"",ngay_ho_chieu_ngoai_giao:t.ngay_ho_chieu_ngoai_giao?t.ngay_ho_chieu_ngoai_giao:"",noi_cap_ho_chieu_ngoai_giao:t.noi_cap_ho_chieu_ngoai_giao_text?t.noi_cap_ho_chieu_ngoai_giao_text:"",so_ho_chieu_cong_vu:t.so_ho_chieu_cong_vu?t.so_ho_chieu_cong_vu:"",ngay_ho_chieu_cong_vu:t.ngay_ho_chieu_cong_vu?t.ngay_ho_chieu_cong_vu:"",noi_cap_ho_chieu_cong_vu:t.noi_cap_ho_chieu_cong_vu_text?t.noi_cap_ho_chieu_cong_vu_text:"",gia_dinh:[],loai_ho_chieu:t.loai_ho_chieu?t.loai_ho_chieu:""};if(t.gia_dinh?a["gia_dinh"]=t.gia_dinh.map((function(t){return t["gia_dinh"]=t["gia_dinh"],t["ho_ten"]=t["ho_ten"]?t["ho_ten"]:"",t["nam_sinh"]=t["nam_sinh"]?t["nam_sinh"]:"",t["nghe_nghiep"]=t["nghe_nghiep"]?t["nghe_nghiep"]:"",t["dia_chi"]=t["dia_chi"]?t["dia_chi"]:"",t})):a["gia_dinh"]=e.gia_dinh,"BNG-270820"!==e.serviceCode&&"BNG-270816"!==e.serviceCode||("Công vụ"===a["loai_ho_chieu"]&&(a["ho_chieu_cong_vu"]=!0),"Ngoại giao"===a["loai_ho_chieu"]&&(a["ho_chieu_ngoai_giao"]=!0)),"BNG-270819"===e.serviceCode&&(a["cong_ham"]=!0),e.listThanhVien.push(a),e.so_nguoi=e.listThanhVien.length,t.di_den)for(var i=function(a){var i=e.listNuocDi.find((function(e){return e.ID===t.di_den[a]}));if(i){var o=e.nuoc_di.find((function(t){return t===i.ID}));o||e.nuoc_di.push(i.ID)}},o=0;o<t.di_den.length;o++)i(o);for(var n=0;n<e.dossierFileArr.length;n++)"TP01"===e.dossierFileArr[n]["partNo"]&&(e.dossierFileArr[n]["formData"]=JSON.stringify({thanh_vien_doan:e.listThanhVien}),e.dossierFileArr[n]["eform"]="true");d()("#dossierFileArr_hidden").val(JSON.stringify(e.dossierFileArr)),e.cong_ham_so_nguoi=e.listThanhVien.filter((function(t){return t.cong_ham})).length,t.nhap_canh&&e.cong_ham_nhap_canh++,t.qua_canh&&e.cong_ham_qua_canh++,t.schengen&&e.cong_ham_schengen++,(t.nhap_canh||t.qua_canh||t.schengen)&&t.di_den&&(e.cong_ham_so_nuoc+=t.di_den.length),e.countPassport(),e.genLePhi()}},getNuocDi:function(){var t=this,e={url:"/o/rest/v2/serverconfigs/HCTN_GET_DIA_DANH/protocols/API_CONNECT?loai=quoc_gia&ten=",headers:{groupId:Liferay.ThemeDisplay.getScopeGroupId()}};c.a.request(e).then((function(e){t.listNuocDi=t.sortArr(e.data.data,"TEN")})).catch((function(t){}))},getCoQuanChuQuan:function(){var t=this,e={url:"/o/rest/v2/serverconfigs/HCTN_GET_CQQC/protocols/API_CONNECT?cqTen=",headers:{groupId:Liferay.ThemeDisplay.getScopeGroupId()}};c.a.request(e).then((function(e){t.listCoQuanChuQuan=t.sortArr(e.data.data,"CQTen")})).catch((function(t){}))},getNguoiKyVB:function(){var t=this,e={url:"/o/rest/v2/serverconfigs/HCTN_GET_NGUOI_KY/protocols/API_CONNECT?cqId="+t.co_quan_chu_quan.CQID,headers:{groupId:Liferay.ThemeDisplay.getScopeGroupId()}};c.a.request(e).then((function(e){t.listVanBanNguoiKy=t.sortArr(e.data.data,"NguoiKy")})).catch((function(t){}))},getNoiSinh:function(t){var e=this,a={url:"/o/rest/v2/serverconfigs/HCTN_GET_DIA_DANH/protocols/API_CONNECT?loai="+t+"&ten=",headers:{groupId:Liferay.ThemeDisplay.getScopeGroupId()}};c.a.request(a).then((function(t){e.listNoiSinh=e.sortArr(t.data.data,"TEN")})).catch((function(t){}))},getNoiSinhNuocNgoai:function(){var t=this,e={url:"/o/rest/v2/serverconfigs/HCTN_GET_DIA_DANH/protocols/API_CONNECT?loai=quoc_gia&ten=",headers:{groupId:Liferay.ThemeDisplay.getScopeGroupId()}};c.a.request(e).then((function(e){t.listNoiSinhNuocNgoai=t.sortArr(e.data.data,"TEN")})).catch((function(t){}))},getNoiSinhTrongNuoc:function(){var t=this,e={url:"/o/rest/v2/serverconfigs/HCTN_GET_DIA_DANH/protocols/API_CONNECT?loai=tinh_thanh&ten=",headers:{groupId:Liferay.ThemeDisplay.getScopeGroupId()}};c.a.request(e).then((function(e){t.listNoiSinhTrongNuoc=t.sortArr(e.data.data,"TEN")})).catch((function(t){}))},getNoiCapHoChieu:function(){var t=this,e={url:"/o/rest/v2/dictcollections/NOI_CAP_HO_CHIEU/dictitems",headers:{groupId:Liferay.ThemeDisplay.getScopeGroupId()}};c.a.request(e).then((function(e){t.listNoiCapHoChieu=t.sortArr(e.data.data,"itemName")})).catch((function(t){}))},updateCQCQ:function(){var t=this;if(this.$refs.formVanBan.validate()){var e={vb_so_hieu_van_ban:t.vb_so_hieu_van_ban,vb_co_quan_chu_quan:t.co_quan_chu_quan.CQTen,vb_ma_co_quan_chu_quan:t.co_quan_chu_quan.CQID.toString(),vb_ngay_ky:t.vb_ngay_ky,vb_co_quan_tieng_anh:t.vb_co_quan_tieng_anh,vb_nguoi_ky:t.vb_nguoi_ky.ID,ho_ten_nguoi_ky:t.vb_nguoi_ky.NguoiKy,chuc_vu_nguoi_ky:t.vb_nguoi_ky.ChucVu};"add"===t.update_cqcq?(t.listVanBan.push(e),t.checkVanBan.push(e)):(t.$set(t.listVanBan,t.update_cqcq,e),t.$set(t.checkVanBan,t.update_cqcq,e)),t.changeCheckCKCD(),t.genSelectCQCQ();for(var a=0;a<t.dossierFileArr.length;a++)"TP02"===t.dossierFileArr[a]["partNo"]&&(t.dossierFileArr[a]["formData"]=JSON.stringify({van_ban:t.listVanBan}),t.dossierFileArr[a]["eform"]="true");d()("#dossierFileArr_hidden").val(JSON.stringify(t.dossierFileArr)),t.dialogThemVanBan=!1}else s.a.error("Vui lòng nhập đầy đủ thông tin bắt buộc")},updateThanhVien:function(){var t=this;if(this.$refs.formThanhVien.validate()&&(this.ho_chieu_ngoai_giao||this.ho_chieu_cong_vu||this.cong_ham)){var e=t.birthdayFormated.split("/"),a=v(e,3),i=a[0],o=a[1],n=a[2],r={bookingName:t.dossiers.delegateName,applicantName:t.dossiers.applicantName,applicantIdNo:t.dossiers.applicantIdNo,address:t.dossiers.address,vb_so_thu_tu:t.vb_so_thu_tu,vb_so_hieu_van_ban:t.co_quan_chu_quan_thanh_vien_select.vb_so_hieu_van_ban,vb_ngay_ky:t.co_quan_chu_quan_thanh_vien_select.vb_ngay_ky,vb_co_quan_chu_quan:t.co_quan_chu_quan_thanh_vien_select.vb_co_quan_chu_quan,vb_ma_co_quan_chu_quan:t.co_quan_chu_quan_thanh_vien_select.vb_ma_co_quan_chu_quan,vb_nguoi_ky:t.co_quan_chu_quan_thanh_vien_select.vb_nguoi_ky,vb_co_quan_tieng_anh:t.co_quan_chu_quan_thanh_vien_select.vb_co_quan_tieng_anh,ma_nhan_than:t.ma_nhan_than,ho_chieu_ngoai_giao:t.ho_chieu_ngoai_giao,ho_chieu_cong_vu:t.ho_chieu_cong_vu,cong_ham:t.cong_ham,so_ho_chieu:t.so_ho_chieu,so_hieu_van_ban:t.co_quan_chu_quan_thanh_vien_select.vb_so_hieu_van_ban,co_quan_chu_quan:t.co_quan_chu_quan_thanh_vien_select.vb_ma_co_quan_chu_quan,co_quan_chu_quan_text:t.co_quan_chu_quan_thanh_vien_select.vb_co_quan_chu_quan,ho_ten:t.ho_ten,gioi_tinh:t.gioi_tinh,ngay_sinh:i,thang_sinh:o,nam_sinh:n,noi_sinh_khac:t.noi_sinh_khac,noi_sinh:t.noi_sinh.ID,noi_sinh_text:t.noi_sinh.TEN,ho_khau:t.ho_khau,so_cmt:t.so_cmt,ngay_cap_cmt:t.ngay_cap_cmt,noi_cap_cmt:t.noi_cap_cmt,co_quan_cong_tac:t.co_quan_cong_tac,dien_thoai:t.dien_thoai,chuc_vu:t.chuc_vu,cap_bac_ham:t.cap_bac_ham,chuc_vu_tieng_anh:t.chuc_vu_tieng_anh,cong_chuc_loai:t.cong_chuc_loai,cong_chuc_bac:t.cong_chuc_bac,cong_chuc_ngach:t.cong_chuc_ngach,can_bo_bo_nhiem:t.can_bo_bo_nhiem,so_ho_chieu_ngoai_giao:t.so_ho_chieu_ngoai_giao,ngay_ho_chieu_ngoai_giao:t.ngay_ho_chieu_ngoai_giao,noi_cap_ho_chieu_ngoai_giao:t.noi_cap_ho_chieu_ngoai_giao,so_ho_chieu_cong_vu:t.so_ho_chieu_ngoai_giao,ngay_ho_chieu_cong_vu:t.ngay_ho_chieu_cong_vu,noi_cap_ho_chieu_cong_vu:t.noi_cap_ho_chieu_ngoai_giao,gia_dinh:t.gia_dinh};"BNG-270820"!==t.serviceCode&&"BNG-270816"!==t.serviceCode&&"BNG-270819"!==t.serviceCode||(t.ho_chieu_ngoai_giao&&(r["loai_ho_chieu"]="Ngoại giao"),t.ho_chieu_cong_vu&&(r["loai_ho_chieu"]="Công vụ")),"add"===t.update_thanhvien?t.listThanhVien.push(r):t.$set(t.listThanhVien,t.update_thanhvien,r),t.so_nguoi=t.listThanhVien.length;for(var c=0;c<t.dossierFileArr.length;c++)"TP01"==t.dossierFileArr[c]["partNo"]&&(t.dossierFileArr[c]["formData"]=JSON.stringify({thanh_vien_doan:t.listThanhVien}),t.dossierFileArr[c]["eform"]="true");d()("#dossierFileArr_hidden").val(JSON.stringify(t.dossierFileArr)),t.cong_ham_so_nguoi=t.listThanhVien.filter((function(t){return t.cong_ham})).length,t.countPassport(),t.genLePhi(),t.dialogThemThanhVien=!1}else s.a.error("Vui lòng nhập đầy đủ thông tin bắt buộc")},countPassport:function(){var t=this;t.ho_chieu_ngoai_giao_cu=0,t.ho_chieu_cong_vu_cu=0,t.ho_chieu_cong_vu_moi=0,t.ho_chieu_ngoai_giao_moi=0,t.listThanhVien.forEach((function(e){e.so_ho_chieu_ngoai_giao&&t.ho_chieu_ngoai_giao_cu++,e.so_ho_chieu_cong_vu&&t.ho_chieu_cong_vu_cu++,e.ho_chieu_cong_vu&&t.ho_chieu_cong_vu_moi++,e.ho_chieu_ngoai_giao&&t.ho_chieu_ngoai_giao_moi++}))},openDialogThemVanBan:function(){this.update_cqcq="add",this.dialogThemVanBan=!0,this.srcMauChuKy="",this.ngayHetHieuLuc="",this.$refs.formVanBan.reset()},openDialogThemThanhVien:function(){var t=this;this.update_thanhvien="add",t.dictCollection="tinh_thanh",t.getNoiSinh(t.dictCollection),this.dialogThemThanhVien=!0,this.$refs.formThanhVien.reset()},openDialogUpdateVanBan:function(t,e){var a=this;a.update_cqcq=t,a.vb_so_hieu_van_ban=e.vb_so_hieu_van_ban,a.co_quan_chu_quan=a.listCoQuanChuQuan.find((function(t){return t.CQTen===e.vb_co_quan_chu_quan})),a.vb_ngay_ky=e.vb_ngay_ky,a.vb_co_quan_tieng_anh=e.vb_co_quan_tieng_anh,setTimeout((function(){a.vb_nguoi_ky=a.listVanBanNguoiKy.find((function(t){return t.ID===e.vb_nguoi_ky}))}),1e3),a.dialogThemVanBan=!0},openDialogUpdateThanhVien:function(t,e){var a=this;this.update_thanhvien=t,this.dialogThemThanhVien=!0;var i="ma_nhan_than,ho_chieu_ngoai_giao,ho_chieu_cong_vu,cong_ham,so_ho_chieu,so_hieu_van_ban,ho_ten,gioi_tinh,ngay_sinh,thang_sinh,nam_sinh,noi_sinh_khac,noi_sinh,noi_sinh_text,ho_khau,so_cmt,ngay_cap_cmt,noi_cap_cmt,co_quan_cong_tac,dien_thoai,chuc_vu,cap_bac_ham,chuc_vu_tieng_anh,cong_chuc_loai,cong_chuc_bac,cong_chuc_ngach,can_bo_bo_nhiem,so_ho_chieu_ngoai_giao,ngay_ho_chieu_ngoai_giao,noi_cap_ho_chieu_ngoai_giao,so_ho_chieu_cong_vu,ngay_ho_chieu_cong_vu,noi_cap_ho_chieu_cong_vu,gia_dinh",o=i.split(",");console.log(e),console.log(a.co_quan_chu_quan_thanh_vien),o.forEach((function(t){"so_hieu_van_ban"===t?a.co_quan_chu_quan_thanh_vien_select=a.co_quan_chu_quan_thanh_vien.find((function(a){return a["vb_so_hieu_van_ban"].toLowerCase()===e[t].toLowerCase()&&a["vb_ngay_ky"]===e["vb_ngay_ky"]&&a["vb_ma_co_quan_chu_quan"]===e["vb_ma_co_quan_chu_quan"]})):"nam_sinh"===t||"thang_sinh"===t||"ngay_sinh"===t?a.birthday=a.parseDate(e["ngay_sinh"]+"/"+e["thang_sinh"]+"/"+e["nam_sinh"]):"noi_sinh"===t?(isNaN(e[t])?a.dictCollection="quoc_gia":a.dictCollection="tinh_thanh",a.getNoiSinh(a.dictCollection),setTimeout((function(){a.noi_sinh=a.listNoiSinh.find((function(a){return a.ID===e[t]}))}),1e3)):a[t]=e[t]}))},genSelectCQCQ:function(){var t=this;t.co_quan_chu_quan_thanh_vien=[],t.listVanBan.forEach((function(e){t.co_quan_chu_quan_thanh_vien.push({name:e.vb_so_hieu_van_ban+"-"+e.vb_ngay_ky+"-"+e.vb_co_quan_chu_quan,value:e.vb_so_hieu_van_ban+"-"+e.vb_ngay_ky+"-"+e.vb_co_quan_chu_quan,vb_ma_co_quan_chu_quan:e.vb_ma_co_quan_chu_quan,vb_co_quan_chu_quan:e.vb_co_quan_chu_quan,vb_so_hieu_van_ban:e.vb_so_hieu_van_ban,vb_ngay_ky:e.vb_ngay_ky,vb_co_quan_tieng_anh:e.vb_co_quan_tieng_anh,vb_nguoi_ky:e.vb_nguoi_ky,ho_ten_nguoi_ky:e.ho_ten_nguoi_ky,chuc_vu_nguoi_ky:e.chuc_vu_nguoi_ky})}))},deleteThanhVien:function(t){var e=this;e.listThanhVien.splice(t,1);for(var a=0;a<e.dossierFileArr.length;a++)"TP01"===e.dossierFileArr[a]["partNo"]&&(e.dossierFileArr[a]["formData"]=JSON.stringify({thanh_vien_doan:e.listThanhVien}),e.dossierFileArr[a]["eform"]="true");e.so_nguoi=e.listThanhVien.length,d()("#dossierFileArr_hidden").val(JSON.stringify(e.dossierFileArr))},checkThanhVien:function(t){var e=this;console.log(e.listVanBan[t]);var a=e.listThanhVien.find((function(a){return a.vb_so_hieu_van_ban===e.listVanBan[t].vb_so_hieu_van_ban&&a.vb_ngay_ky===e.listVanBan[t].vb_ngay_ky&&a.vb_ma_co_quan_chu_quan===e.listVanBan[t].vb_ma_co_quan_chu_quan}));return console.log(a),!!a},deleteVanBan:function(t){var e=this;if(e.checkThanhVien(t))s.a.error("Văn bản quyết định đã được sử dụng. Phải xóa thành viên sử dụng văn bản quyết định "+e.listVanBan[t].vb_so_hieu_van_ban+" - "+e.listVanBan[t].vb_ngay_ky+" - "+e.listVanBan[t].vb_co_quan_chu_quan);else{e.listVanBan.splice(t,1);for(var a=0;a<e.dossierFileArr.length;a++)"TP02"===e.dossierFileArr[a]["partNo"]&&(e.dossierFileArr[a]["formData"]=JSON.stringify({van_ban:e.listVanBan}),e.dossierFileArr[a]["eform"]="true");d()("#dossierFileArr_hidden").val(JSON.stringify(e.dossierFileArr)),this.genSelectCQCQ()}},genLePhi:function(){var t=this,e=""!=t.ho_chieu_ngoai_giao_moi?parseInt(t.ho_chieu_ngoai_giao_moi):0,a=""!=t.ho_chieu_cong_vu_moi?parseInt(t.ho_chieu_cong_vu_moi):0,i=""!=t.ho_chieu_gia_han?parseInt(t.ho_chieu_gia_han):0,o=""!=t.ho_chieu_hong?parseInt(t.ho_chieu_hong):0,n=""!=t.ho_chieu_mat?parseInt(t.ho_chieu_mat):0,s=""!=t.cong_ham_so_nuoc?parseInt(t.cong_ham_so_nuoc):0,r=""!=t.cong_ham_schengen?parseInt(t.cong_ham_schengen):0,c=""!=t.cong_ham_nhap_canh?parseInt(t.cong_ham_nhap_canh):0,l=""!=t.cong_ham_qua_canh?parseInt(t.cong_ham_qua_canh):0,d=16e4;"BNG-270820"===t.serviceCode&&(d=8e4);var u=(e+a)*d,h=1e5*i,p=32e4*(o+n),m=1e4*r,v=s*c*1e4,f=s*l*1e4,_=r+c+l,y=m+v+f,C=u+h+p+m+v+f,D=new Array;u>0&&(D[D.length]={partNo:"",serviceName:"Cấp hộ chiếu ngoại giao, hộ chiếu công vụ",partName:"Hộ chiếu cấp mới",fileMark:"-1",fileMarkName:"",recordCount:e+a,trang_thai:1,don_gia:"BNG-270820"===t.serviceCode?8e4:16e4,thanh_tien:u}),h>0&&(D[D.length]={partNo:"",serviceName:"Gia hạn hộ chiếu ngoại giao, hộ chiếu công vụ",partName:"Hộ chiếu gia hạn",fileMark:"-1",fileMarkName:"",recordCount:i,trang_thai:1,don_gia:1e5,thanh_tien:h}),p>0&&(D[D.length]={partNo:"",serviceName:"Cấp hộ chiếu ngoại giao, hộ chiếu công vụ (mất, hỏng)",partName:"Hộ chiếu hỏng",fileMark:"-1",fileMarkName:"",recordCount:o+n,trang_thai:1,don_gia:32e4,thanh_tien:p}),y>0&&(D[D.length]={partNo:"",serviceName:"Cấp công hàm đề nghị cấp thị thực",partName:"",fileMark:"-1",fileMarkName:"",recordCount:_,trang_thai:1,don_gia:1e4,thanh_tien:y}),2===D.length&&(D[D.length]={partNo:"empty",serviceName:"empty",partName:"empty",fileMark:"empty",fileMarkName:"empty",recordCount:"empty",trang_thai:"empty",don_gia:"empty",thanh_tien:"empty"},D[D.length]={partNo:"empty",serviceName:"empty",partName:"empty",fileMark:"empty",fileMarkName:"empty",recordCount:"empty",trang_thai:"empty",don_gia:"empty",thanh_tien:"empty"}),3===D.length&&(D[D.length]={partNo:"empty",serviceName:"empty",partName:"empty",fileMark:"empty",fileMarkName:"empty",recordCount:"empty",trang_thai:"empty",don_gia:"empty",thanh_tien:"empty"}),""!=C&&null!=C&&(t.le_phi_format=C.toString());var T=t.nuoc_di.join(),x="";t.nuoc_di.forEach((function(e){var a=t.listNuocDi.find((function(t){return t.ID===e}));a&&(x+=x?", "+a.TEN:a.TEN)})),t.payment={requestPayment:1,paymentNote:"",advanceAmount:0,feeAmount:C,serviceAmount:0,shipAmount:0},console.log(t.dossiers["metaData"],g(t.dossiers["metaData"]));var b=JSON.parse(t.dossiers["metaData"]);b["dossierFilePayment"]=D,b["Doan_HCTN"]={CQCuDi:t.dossiers.applicantName,QD_CV:"",SoNguoi:String(t.so_nguoi),MucDich:"",TaiChinh:"",CQChuQuan:0,SoNgay:"",CacNuocDi_ma:T,CacNuocDi:x,SoHCCu_NG:t.ho_chieu_ngoai_giao_cu.toString(),SoHCCu_CV:t.ho_chieu_cong_vu_cu.toString(),SoHCCu_PT:t.ho_chieu_pho_thong_cu.toString(),SoHCCapMoi:t.ho_chieu_cong_vu_moi.toString(),SoNuocXinCH:t.cong_ham_so_nuoc.toString(),SoNguoiMLP:"",SoHCCapMoi_NG:t.ho_chieu_ngoai_giao_moi.toString(),SoNguoiMienCH:t.cong_ham_schengen.toString(),SoCHNhapCanh:t.cong_ham_nhap_canh.toString(),SoCHQuaCanh:t.cong_ham_qua_canh.toString(),SoHCGH:t.ho_chieu_gia_han.toString(),SoHCHong:t.ho_chieu_hong.toString(),SoHCMat:t.ho_chieu_mat.toString()},t.dossiers["metaData"]=JSON.stringify(b)},addPeriod:function(t){return t.replace(/[^\d\.].+/,"").replace(/\D/g,"").replace(/\B(?=(\d{3})+(?!\d))/g,".")},formatDate:function(t){if(!t)return null;var e=t.split("-"),a=v(e,3),i=a[0],o=a[1],n=a[2];return"".concat(n,"/").concat(o,"/").concat(i)},parseDate:function(t){if(!t)return null;var e=t.split("/"),a=v(e,3),i=a[0],o=a[1],n=a[2];return"".concat(n,"-").concat(o.padStart(2,"0"),"-").concat(i.padStart(2,"0"))},genDueDate:function(){var t=this,e={url:"/o/rest/v2/dossiers/dueDate?service="+t.serviceCode+"&agency="+t.govAgencyCode+"&template="+t.dossierTemplateNo+"&fromReceiveDate=",headers:{groupId:Liferay.ThemeDisplay.getScopeGroupId()}};c.a.request(e).then((function(e){var a=new Date(parseInt(e.data["dueDate"]));t.dateDueDate=a.toISOString().substr(0,10)})).catch((function(t){}))},getThongTinNhanThan:function(){var t=this;t.listDanhSach=[];var e={};e["soHoChieu"]=t.so_ho_chieu?t.so_ho_chieu:"",e["hoTen"]=t.ho_ten?t.ho_ten:"",e["ngaySinh"]=t.birthdayFormated?t.birthdayFormated:"",t.noi_sinh&&0!==Object.keys(t.noi_sinh).length&&t.noi_sinh.constructor===Object&&(e["noiSinh"]=t.noi_sinh.ID?t.noi_sinh.ID:"");var a={url:"/o/rest/v2/serverconfigs/HCTN_GET_CA_NHAN/protocols/API_CONNECT",params:e,headers:{groupId:Liferay.ThemeDisplay.getScopeGroupId()}};c.a.request(a).then((function(e){if(e.data.data.length>0){var a=e.data.data.map((function(e){var a={};a=isNaN(e.NoiSinh)?t.listNoiSinhNuocNgoai.find((function(t){return t.ID===e.NoiSinh})):t.listNoiSinhTrongNuoc.find((function(t){return t.ID===e.NoiSinh}));var i=e.NgaySinh.substr(0,10).split("-"),o=v(i,3),n=o[0],s=o[1],r=o[2],c=e.HanDung.substr(0,10).split("-"),l=v(c,3),d=l[0],u=l[1],h=l[2],m="".concat(r,"/").concat(s,"/").concat(n),g="".concat(h,"/").concat(u,"/").concat(d);return p({},e,{NgaySinhFormart:m,NoiSinhText:a.TEN?a.TEN:"",HanDungFormart:g})}));t.listDanhSach=t.sortDate(a,"HanDung"),t.dialogDanhSach=!0}else s.a.error("Không tìm thấy thông tin")})).catch((function(t){s.a.error("Không tìm thấy thông tin")}))},chonThanhVien:function(t){var e=this,a=t;isNaN(a["NoiSinh"])?e.dictCollection="quoc_gia":e.dictCollection="tinh_thanh",e.getNoiSinh(e.dictCollection),setTimeout((function(){e.noi_sinh=e.listNoiSinh.find((function(t){return t.ID===a["NoiSinh"]}))}),1e3),e.so_ho_chieu=a["SoSeri"],e.ho_ten=a["HoTen"],e.ho_khau=a["NoiThuongTru"],e.so_cmt=a["SoGCM"],1==a["GioiTinh"]?e.gioi_tinh="Nam":e.gioi_tinh="Nữ",e.chuc_vu=a["ChucVuCaNhan"],e.co_quan_cong_tac=a["NoilamViec"],e.dien_thoai=a["NoiDangO"];var i=new Date(a["NgaySinh"]);e.ngay_sinh=i.getDate(),e.thang_sinh=i.getMonth()+1,e.nam_sinh=i.getFullYear(),e.birthday=e.parseDate(e.ngay_sinh+"/"+e.thang_sinh+"/"+e.nam_sinh),e.ma_nhan_than=a["NguoiID"],e.gia_dinh=[{gia_dinh:"1",ho_ten:a["HoTenBo"]},{gia_dinh:"2",ho_ten:a["HoTenMe"]},{gia_dinh:"3",ho_ten:a["HoTenV_C"]},{gia_dinh:"4"},{gia_dinh:"4"},{gia_dinh:"4"}],e.dialogDanhSach=!1},getNoiKhac:function(){this.dictCollection="tinh_thanh"===this.dictCollection?"quoc_gia":"tinh_thanh",this.getNoiSinh(this.dictCollection)},changeThanhPhan:function(t,e){var a=this;setTimeout((function(){for(var e=a,i=JSON.parse(e.dossiers["metaData"]),o=i["dossierFileCustom"],n=0;n<e.dossierFileArr.length;n++)if(e.dossierFileArr[n]["partNo"]===t.dossierPartNo){var s={partNo:t.dossierPartNo,partName:t.partName,fileMark:t["fileMark"],recordCount:t.recordCount};e.$set(e.dossierFileArr,n,s)}for(var r=0;r<o.length;r++)if(o[r]["partNo"]===t.dossierPartNo){var c={partNo:t.dossierPartNo,partName:t.partName,fileMark:t.fileMark,recordCount:t.recordCount};o[r]=c}for(var l=0,d=0;d<o.length;d++)l+=parseInt(o[d]["recordCount"]);i["totalRecord"]=l,i["dossierFileCustom"]=o,e.dossiers["metaData"]=JSON.stringify(i)}),200)},toggleCheckbox:function(t,e){var a=this;if(this.selected.includes(t)){var i=!0,o=JSON.parse(a.dossiers["metaData"]),n=o["dossierFileCustom"];a.dossierMarkArr[e]["recordCount"]=1,t["recordCount"]=1;for(var s=0;s<a.dossierFileArr.length;s++)if(a.dossierFileArr[s]["partNo"]===t.dossierPartNo){var r={partNo:t.dossierPartNo,partName:t.partName,fileMark:t.fileMark,recordCount:t.recordCount};a.$set(a.dossierFileArr,s,r),i=!1}if(i){var c={partNo:t.dossierPartNo,partName:t.partName,fileMark:t.fileMark,recordCount:t.recordCount};a.dossierFileArr.push(c)}for(var l=!0,d=0;d<n.length;d++)if(n[d]["partNo"]===t.dossierPartNo){var u={partNo:t.dossierPartNo,partName:t.partName,fileMark:t.fileMark,recordCount:t.recordCount};n[d]=u,l=!1}if(l){var h={partNo:t.dossierPartNo,partName:t.partName,fileMark:t.fileMark,recordCount:t.recordCount};n.push(h)}for(var p=0,m=0;m<n.length;m++)p+=parseInt(n[m]["recordCount"]);o["totalRecord"]=p,o["dossierFileCustom"]=n,a.dossiers["metaData"]=JSON.stringify(o)}else{var g=JSON.parse(a.dossiers["metaData"]),v=g["dossierFileCustom"];a.dossierMarkArr[e]["recordCount"]=0;for(var f=0;f<a.dossierFileArr.length;f++)a.dossierFileArr[f]["partNo"]!==t.dossierPartNo&&a.dossierFileArr[f]["dossierPartNo"]!==t.dossierPartNo||a.dossierFileArr.splice(f,1);for(var _=0;_<v.length;_++)if(v[_]["partNo"]===t.dossierPartNo||v[_]["dossierPartNo"]===t.dossierPartNo){var y={partNo:t.dossierPartNo,partName:t.partName,fileMark:t.fileMark,recordCount:t.recordCount};v[_]=y,v.splice(_,1)}for(var C=0,D=0;D<v.length;D++)C+=parseInt(v[D]["recordCount"]);g["totalRecord"]=C,g["dossierFileCustom"]=v,a.dossiers["metaData"]=JSON.stringify(g)}},checkCongHam:function(t){var e=this;t&&(e.ho_chieu_ngoai_giao||e.ho_chieu_cong_vu?e.cong_ham=e.cong_ham:(s.a.error("Bắt buộc phải chọn hộ chiếu ngoại giao hoặc hộ chiếu công vụ"),e.cong_ham=!e.cong_ham))},chooseAplicant:function(t){var e=this,a=e.applicants.find((function(e){return e.applicantIdNo===t}));e.dossiers.delegateName=a.applicantName.toUpperCase(),e.dossiers.delegateTelNo=a.contactTelNo,e.dossiers.delegateEmail=a.contactEmail,e.delegateCityCode=a.cityCode,e.delegateDistrictCode=a.districtCode,e.delegateWardCode=a.wardCode},sortArr:function(t,e){return t.sort((function(t,a){return t[e].localeCompare(a[e])}))},onSearchItemSelected:function(t){var e=this;e.selectedSearchItem=t,e.checkCMT=!1,e.dossiers["delegateIdNo"]=e.selectedSearchItem["applicantIdNo"],e.dossiers["delegateName"]=e.selectedSearchItem["applicantName"],e.dossiers["delegateTelNo"]=e.selectedSearchItem["contactTelNo"],e.dossiers["delegateEmail"]=e.selectedSearchItem["contactEmail"],e.delegateCityCode=e.selectedSearchItem["cityCode"],e.delegateDistrictCode=e.selectedSearchItem["districtCode"],e.delegateWardCode=e.selectedSearchItem["wardCode"],e.changeDossier()},onInputChange:function(t){var e=this;if(0===t.trim().length)return null;var a="/o/rest/v2/applicants?start=0&end=5&idNo=".concat(t);return new Promise((function(t){e.$store.dispatch("loadInitResource").then((function(i){var o={headers:{}};c.a.get(a,o).then((function(a){var i=[];a.data.hasOwnProperty("data")?(i=a.data.data,e.changeDossier()):e.changeDossier(),t(i)}))}))}))},soHoChieuNgoaiGiaoChange:function(){var t=this,e=t.so_ho_chieu_ngoai_giao,a=/^([A-Z])\d{7}$/;a.test(e)||(t.so_ho_chieu_ngoai_giao="")},soHoChieuCongVuChange:function(){var t=this,e=t.so_ho_chieu_cong_vu,a=/^([A-Z])\d{7}$/;a.test(e)||(t.so_ho_chieu_cong_vu="")},calculateYear:function(t){var e=Date.now()-t,a=new Date(e);return Math.abs(a.getUTCFullYear()-1970)},changeNgayCapCMT:function(){var t=this,e=new Date(t.dateNgayCapCMND);t.calculateYear(e)>=15?(t.errorNgayCapCMT=!0,t.ngay_cap_cmt=""):t.errorNgayCapCMT=!1},checkCMND:function(){},changeAdress:function(){var t=this;t.dossiers.delegateAddress.length>100?(t.dossiers.delegateAddress="",t.dossiers.address=""):t.dossiers.address=t.dossiers.delegateAddress},changeCheckCKCD:function(){var t=this;t.listVanBan.length===t.checkVanBan.length&&t.listVanBan.length>0?t.$emit("changeCheckCKCD",!0):t.$emit("changeCheckCKCD",!1)},fillCheckBox:function(){var t=this;t.checkVanBan=[];for(var e=0;e<t.listVanBan.length;e++)t.listVanBan[e]["vb_nguoi_ky"]&&t.listVanBan[e]["ho_ten_nguoi_ky"]&&t.checkVanBan.push(t.listVanBan[e]);t.changeCheckCKCD()},sortDate:function(t,e){return t.sort((function(t,a){var i=new Date(t[e]),o=new Date(a[e]);return i>o?-1:i<o?1:0}))},changeNgayKy:function(){var t=this;t.changeDate("vb_ngay_ky"),t.dateNgayKy=t.parseDate(t.vb_ngay_ky)},inputNgayKy:function(){var t=this;t.inputDate("vb_ngay_ky")},changeNgaySinh:function(){var t=this;t.changeDate("birthdayFormated"),t.birthday=t.parseDate(t.birthdayFormated)},inputNgaySinh:function(){var t=this;t.inputDate("birthdayFormated")},changeDate:function(t){var e=this,a=e[t],i=/^(0?[1-9]|[12][0-9]|3[01])[\/\-](0?[1-9]|1[012])[\/\-]\d{4}$/,o=/^(0?[1-9]|[12][0-9]|3[01])[\/\-](0?[1-9]|1[012])[\/\-]\d{2}$/;if(i.test(a)||o.test(a)){var n=e[t].split("/"),s=n[0],r=n[1];s>31?e[t]="":r>12?e[t]="":2==n[2].length&&("birthdayFormated"===t?n[2]<=20?e[t]=s+"/"+r+"/20"+n[2]:e[t]=s+"/"+r+"/19"+n[2]:e[t]=s+"/"+r+"/20"+n[2])}else e[t]=""},validateDate:function(t){return t.replace(/[^\d\/]/g,"")},inputDate:function(t){var e=this,a=e.validateDate(e[t]);null!==a.match(/^\d{2}$/)?e[t]=a+"/":null!==a.match(/^\d{2}\/\d{2}$/)?e[t]=a+"/":e[t]=a},changLePhi:function(){var t=this;t.payment={requestPayment:1,paymentNote:"",advanceAmount:0,feeAmount:parseInt(t.le_phi_format),serviceAmount:0,shipAmount:0}},getImageCK:function(t){var e=this;if(t.ImgFile){var a={url:"/o/rest/v2/serverconfigs/HCTN_GET_IMAGE/protocols/API_CONNECT?imageName="+t.ImgFile,headers:{groupId:Liferay.ThemeDisplay.getScopeGroupId()}};c.a.request(a).then((function(t){e.srcMauChuKy="data:image/png;base64,"+t.data.imageBase64})).catch((function(t){}))}},changeDossier:function(){var t=this;console.log(t.dossiers);var e=JSON.parse(t.dossiers.metaData);console.log(e),e["delegateIdNo"]=t.dossiers.delegateIdNo,console.log("1"),e["delegateName"]=t.dossiers.delegateName,console.log("2"),e["delegateTelNo"]=t.dossiers.delegateTelNo,console.log("3"),0===t.eFormCodeArr.length&&(console.log("4"),t.dossiers["contactTelNo"]=t.dossiers["delegateTelNo"],console.log("5"),t.dossiers["contactEmail"]=t.dossiers["delegateEmail"],console.log("6"),t.dossiers["contactName"]=t.dossiers["delegateName"],console.log("7"),t.dossiers["applicantIdNo"]=t.dossiers["delegateIdNo"],console.log("8"),t.dossiers["applicantName"]=t.dossiers["delegateName"],console.log("9"),t.dossiers["address"]=t.dossiers["delegateAddress"],console.log("10"),t.dossiers["cityCode"]=t.dossiers["delegateCityCode"],console.log("11"),t.dossiers["districtCode"]=t.dossiers["delegateDistrictCode"],console.log("12"),t.dossiers["wardCode"]=t.dossiers["delegateWardCode"],console.log("13"),t.dossiers["contactTelNo"]=t.dossiers["delegateTelNo"],console.log("14"),t.dossiers["contactEmail"]=t.dossiers["delegateEmail"],console.log("15")),t.dossiers["metaData"]=JSON.stringify(e),console.log("16"),d()("#dossiers_hidden").val(JSON.stringify(t.dossiers)),console.log("17")}}},D=C,T=a("2877"),x=a("6544"),b=a.n(x),S=a("c6a6"),N=a("8336"),P=a("b0af"),I=a("99d9"),A=a("12b2"),w=a("ac7c"),E=a("8fea"),k=a("2e4b"),O=a("169a"),F=a("0e8f"),M=a("4bd4"),V=a("132d"),L=a("a722"),H=a("5d23"),$=a("e449"),R=a("b56d"),G=a("2677"),q=a("a844"),U=Object(T["a"])(D,i,o,!1,null,null,null);e["a"]=U.exports;b()(U,{VAutocomplete:S["a"],VBtn:N["a"],VCard:P["a"],VCardText:I["b"],VCardTitle:A["a"],VCheckbox:w["a"],VDataTable:E["a"],VDatePicker:k["a"],VDialog:O["a"],VFlex:F["a"],VForm:M["a"],VIcon:V["a"],VLayout:L["a"],VListTileContent:H["a"],VListTileSubTitle:H["b"],VListTileTitle:H["c"],VMenu:$["a"],VSelect:R["a"],VTextField:G["a"],VTextarea:q["a"]})},"5c68":function(module,__webpack_exports__,__webpack_require__){"use strict";var jquery__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("1157"),jquery__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(jquery__WEBPACK_IMPORTED_MODULE_0__),toastr__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("854a"),toastr__WEBPACK_IMPORTED_MODULE_1___default=__webpack_require__.n(toastr__WEBPACK_IMPORTED_MODULE_1__);toastr__WEBPACK_IMPORTED_MODULE_1___default.a.options={closeButton:!0,timeOut:"2000"},__webpack_exports__["a"]={props:{onlyView:{type:Boolean,default:function(){return!1}},id:{type:String,default:function(){return"nm"}},partTypes:{type:Array,default:function(){return[1,3]}},checkInput:{type:Number,default:function(){return 0}},formCode:{type:String,default:function(){return""}}},data:function(){return{dossierTemplateItems:[],dossierMarksItems:[],dossierFilesItems:[],thongTinHoSo:{},valid:!0,stateView:!1,dialogAddOtherTemp:!1,loadingAddOther:!1,otherDossierTemplate:"",sheet:!1,partView:"",dossierFileIdView:"",stateEdit:!1,progressUploadPart:"",dialogPDF:!1,dialogPDFLoading:!0,stateAddFileOther:!1,dossierTemplatesItemSelect:{},fileViews:[],pdfEform:!1,sampleCount:0,serviceInfoId:0,fileMarkItems:[{text:"Không có",value:0},{text:"Bản chụp",value:1},{text:"Bản sao",value:2},{text:"Bản gốc",value:3},{text:"Bản dịch",value:4}],fileCheckItems:[{text:"Chưa kiểm tra",value:0},{text:"Đạt",value:1},{text:"Không đạt",value:2}],fileTemplateItems:[],fileTemplateNoString:"",dossierFilesApplicant:[],stateViewResult:!0,currentFormView:"",pstFixed:0,pstEl:0,endEl:0,applicantNoteDossier:"",doChange:""}},computed:{loading:function(){return this.$store.getters.loading},originality:function(){var t=this;return t.getOriginality()},initDataResource:function(){return this.$store.getters.loadingInitData},dossierTemplateItemsFilter:function(){var t=this,e=t.dossierTemplateItems;if(e.length>0){var a=e.filter((function(e){return t.partTypes.includes(e.partType)&&t.checkVisibleTemp(e,0)}));return a}},applicantBussinessExit:function(){return this.$store.getters.getApplicantBussinessExit},applicantId:function(){return this.$store.getters.getApplicantIdNo},applicantNote:function(){return this.$store.getters.getApplicantNote},dossierIntoGroup:function(){return this.$store.getters.getDossierIntoGroup}},mounted:function(){var t=this;t.page=1,t.$nextTick((function(){}))},watch:{applicantBussinessExit:function(t){var e=this;t&&e.fileTemplateNoString&&e.getDossierFileApplicants(t,e.fileTemplateNoString)},applicantId:function(t){var e=this;t&&e.fileTemplateNoString&&e.getDossierFileApplicants(t,e.fileTemplateNoString)}},methods:{resetCounterTemplate:function(t,e){t.commit,t.state;var a=this;a.dossierTemplateItems.forEach((function(t){t.partNo===e.partNo&&(t.hasForm?t.count=1:t.count=0)}))},recountFileTemplates:function(){var t=this;t.dossierTemplateItems.forEach((function(e){e.count=0,t.dossierFilesItems.forEach((function(t){e.partNo!==t.dossierPartNo||t.eForm||e.count++}))}))},initData:function(t){var e=this;e.$store.dispatch("getDocumentType").then((function(t){var a=function(t){function e(t,e){return t.itemCode<e.itemCode?-1:t.itemCode>e.itemCode?1:0}return t.sort(e)};if(t){var i=a(t);for(var o in e.fileMarkItems=[],i)e.fileMarkItems.push({text:i[o]["itemName"],value:i[o]["itemCode"]})}})),e.thongTinHoSo=t,e.applicantNoteDossier=t["applicantNote"]&&String(t["applicantNote"]).indexOf("<br>[")<0?t["applicantNote"]:"";var a=[];null!==t["sampleCount"]&&void 0!==t["sampleCount"]&&"undefined"!==t["sampleCount"]&&(e.sampleCount=t["sampleCount"]),a.push(e.$store.dispatch("loadDossierTemplates",t)),a.push(e.$store.dispatch("loadDossierMark",t)),a.push(e.$store.dispatch("loadDossierFiles",t.dossierId)),a.push(e.$store.dispatch("getServiceInfo",{serviceInfoId:t.serviceCode})),Promise.all(a).then((function(t){var a=t[0]["dossierParts"],i=t[1],o=t[2],n=[];t[3].hasOwnProperty("serviceInfoId")&&(e.serviceInfoId=t[3].serviceInfoId),t[3].fileTemplates&&(Array.isArray(t[3].fileTemplates)?n=t[3].fileTemplates:n.push(t[3].fileTemplates));var s=e.mergeDossierTemplateVsDossierFiles(a,o);if(s=e.mergeDossierTemplateVsDossierMark(s,i),s=e.mergeDossierTemplateVsFileTemplates(s,n),e.dossierFilesItems=o,e.dossierMarksItems=i,e.fileTemplateItems=n,e.dossierTemplateItems=s,e.partTypes.includes(2)&&e.dossierTemplateItems.length>0){var r=[];e.dossierTemplateItems.forEach((function(t){var a=e.dossierFilesItems.find((function(e){return t.partNo===e.dossierPartNo&&2===t.partType}));a&&r.push(t)})),e.dossierTemplateItems=r}e.changeStateViewResult(),setTimeout((function(t){e.genAllAlpacaForm(o,s),e.recountFileTemplates()}),500);var c=[];for(var l in e.dossierTemplateItems)e.dossierTemplateItems[l]["fileTemplateNo"]&&c.push(e.dossierTemplateItems[l]["fileTemplateNo"]);c.length>0&&(e.fileTemplateNoString=c.toString(),e.applicantId&&!e.onlyView&&e.getDossierFileApplicants(e.applicantId,e.fileTemplateNoString))})).catch((function(t){}))},genAllAlpacaForm:function(t,e){var a=this;if(t.length>0){var i=t.filter((function(t){return t.eForm})),o=e.filter((function(t){return t.hasForm&&a.partTypes.includes(t.partType)}));i.length>0?i.forEach((function(t){t.eForm&&a.$store.dispatch("loadAlpcaForm",t)})):e.forEach((function(t){t.hasForm&&a.partTypes.includes(t.partType)&&(t["templateFileNo"]=a.thongTinHoSo.dossierTemplateNo,a.showAlpacaJSFORM(t))})),o.length!==i.length&&o.forEach((function(t){var e=i.findIndex((function(e){return t.partNo===e.dossierPartNo}));-1===e&&(t["templateFileNo"]=a.thongTinHoSo.dossierTemplateNo,a.showAlpacaJSFORM(t))}))}else e.forEach((function(t){t.hasForm&&a.partTypes.includes(t.partType)&&(t["templateFileNo"]=a.thongTinHoSo.dossierTemplateNo,a.showAlpacaJSFORM(t))}))},postDossierMark:function(t,e){var a=this;t["dossierId"]=a.thongTinHoSo.dossierId,a.$store.dispatch("postDossierMark",t).then((function(t){})).catch((function(t){}))},mergeDossierTemplateVsDossierFiles:function(t,e){var a=this;return 0!==e.length?t.forEach((function(t){t["editForm"]=!0,t["daKhai"]=!1,t["passRequired"]=!1;var i=e.find((function(e){return t.partNo===e.dossierPartNo&&a.partTypes.includes(t.partType)&&e.eForm&&!e.removed&&0!==e.fileSize}));i&&(t["daKhai"]=!0,t["hasForm"]=!0,t["referenceUid"]=i["referenceUid"]),e.forEach((function(e){t.partNo===e.dossierPartNo&&(t["passRequired"]=!0)}))})):t.forEach((function(t){t.hasForm&&(t["daKhai"]=!1,t["passRequired"]=!1,t["editForm"]=!0)})),t},mergeDossierTemplateVsDossierMark:function(t,e){return 0!==e.length?t.map((function(t){t["count"]=0,t["stateEditFileCheck"]=!1;var a=e.find((function(e){return e.dossierPartNo===t.partNo}));return null!==a&&void 0!==a?(t["fileMark"]=a.fileMark,t["fileComment"]=a.fileComment,t["fileCheck"]=a.fileCheck,t["recordCount"]=a.recordCount):(t["fileMark"]=0,t["fileComment"]="",t["fileCheck"]=0,t["recordCount"]=""),t})):t&&t.forEach((function(t){t["stateEditFileCheck"]=!1,t["count"]=0,t["fileMark"]=0,t["fileComment"]="",t["fileCheck"]=0,t["stateEditFileCheck"]=!1})),t},mergeDossierTemplateVsFileTemplates:function(t,e){return 0!==e.length?t.map((function(t){var a=e.find((function(e){return e.fileTemplateNo===t.fileTemplateNo}));return t["hasFileTemp"]=null!==a&&void 0!==a?a.fileTemplateNo:"",t})):t&&t.forEach((function(t){t["hasFileTemp"]=""})),t},showAlpacaJSFORM:function showAlpacaJSFORM(item){var vm=this;item["dossierId"]=vm.thongTinHoSo.dossierId,vm.$store.dispatch("loadFormScript",item).then((function(resScript){vm.$store.dispatch("loadFormData",item).then((function(resData){var formScript,formData;window.$("#formAlpaca"+item.partNo+vm.id).empty(),formScript=resScript?eval("("+resScript+")"):{},resData?(formData=eval("("+resData+")"),item["loaded"]=!0):formData={},formScript.data=formData,window.$("#formAlpaca"+item.partNo+vm.id).alpaca(formScript)}))}))},saveAlpacaForm:function(t,e){var a=this,i=a.dossierFilesItems.find((function(e){return e.dossierPartNo===t.partNo&&e.eForm&&0!==e.fileSize}));i?(i["dossierId"]=a.thongTinHoSo.dossierId,i["id"]=a.id,a.$store.dispatch("putAlpacaForm",i).then((function(t){a.dossierIntoGroup.length>0&&a.$store.commit("setFilesAdd",[resPostEform]),a.$store.dispatch("loadDossierFiles",a.thongTinHoSo.dossierId).then((function(t){a.dossierFilesItems=t})).catch((function(t){})),a.dossierTemplateItems[e]["passRequired"]=!0})).catch((function(t){toastr__WEBPACK_IMPORTED_MODULE_1___default.a.clear(),toastr__WEBPACK_IMPORTED_MODULE_1___default.a.error("Yêu cầu của bạn thực hiện thất bại.")}))):(t["dossierId"]=a.thongTinHoSo.dossierId,t["id"]=a.id,a.$store.dispatch("postEform",t).then((function(t){a.dossierIntoGroup.length>0&&a.$store.commit("setFilesAdd",[t]),a.dossierTemplateItems[e].daKhai=!0,a.dossierTemplateItems[e]["passRequired"]=!0,a.$store.dispatch("loadDossierFiles",a.thongTinHoSo.dossierId).then((function(t){a.dossierFilesItems=t})).catch((function(t){toastr__WEBPACK_IMPORTED_MODULE_1___default.a.clear(),toastr__WEBPACK_IMPORTED_MODULE_1___default.a.error("Yêu cầu của bạn thực hiện thất bại.")}))})).catch((function(t){toastr__WEBPACK_IMPORTED_MODULE_1___default.a.clear(),toastr__WEBPACK_IMPORTED_MODULE_1___default.a.error("Yêu cầu của bạn thực hiện thất bại.")})))},onDeleteAttackFiles:function(t){var e=this;console.log("delete");var a=confirm("Bạn có muốn xóa toàn bộ file trong thành phần hồ sơ này?");a&&e.dossierFilesItems.forEach((function(a){a.dossierPartNo===t.partNo&&(a["dossierId"]=e.thongTinHoSo.dossierId,e.$store.dispatch("deleteAttackFiles",a).then((function(a){e.resetCounterTemplate(t),e.$store.dispatch("loadDossierFiles",e.thongTinHoSo.dossierId)})).catch((function(t){})))}))},changeApplicantNote:function(){var t=this;console.log("applicantNoteEdit",t.applicantNoteDossier),t.$store.commit("setApplicantNote",t.applicantNoteDossier)},pickFile:function(t){var e=this;e.stateAddFileOther=!1,document.getElementById("file"+t.partNo).value="",6===t["partType"]||t["partType"],document.getElementById("file"+t.partNo).click()},onUploadSingleFile:function(t,e,a){var i=this;if(i.dossierTemplatesItemSelect=e,i.progressUploadPart=e.partNo,e["dossierId"]=i.thongTinHoSo.dossierId,e["dossierTemplateNo"]=i.thongTinHoSo.dossierTemplateNo,3!==e.partType)i.$store.dispatch("uploadSingleFile",e).then((function(t){console.log("vm.dossierIntoGroup",i.dossierIntoGroup),i.dossierIntoGroup.length>0&&i.$store.commit("setFilesAdd",t),i.dossierTemplateItems[a]["passRequired"]=!0,i.progressUploadPart="",i.$store.dispatch("loadDossierFiles",i.thongTinHoSo.dossierId).then((function(t){i.dossierFilesItems=t,i.recountFileTemplates()}))})).catch((function(t){t.length>0&&(i.dossierTemplateItems[a]["passRequired"]=!0),i.progressUploadPart="",i.$store.dispatch("loadDossierFiles",i.thongTinHoSo.dossierId).then((function(t){i.dossierFilesItems=t,i.recountFileTemplates()}))}));else{if(0===window.$("#file"+e.partNo)[0].files.length)return void(i.progressUploadPart="");i.partView=e.partNo,i.stateView=!0,i.dialogAddOtherTemp=!0}},loadAlpcaForm:function(t){var e=this,a=e.dossierFilesItems.find((function(e){return e.dossierPartNo===t.partNo&&e.eForm}));a?(a["id"]=e.id,e.$store.dispatch("loadAlpcaForm",a)):e.dossierTemplateItems.forEach((function(a){a.hasForm&&t.partNo===a.partNo&&(a["templateFileNo"]=e.thongTinHoSo.dossierTemplateNo,e.showAlpacaJSFORM(a))}))},loadAlpcaFormClick:function(t){var e=this;e.currentFormView==="formAlpaca"+t.partNo+e.id?e.currentFormView="":e.currentFormView="formAlpaca"+t.partNo+e.id,e.pstEl=e.endEl=0,setTimeout((function(){jquery__WEBPACK_IMPORTED_MODULE_0___default()("#formAlpaca"+t.partNo+e.id).height()>200&&(e.pstEl=jquery__WEBPACK_IMPORTED_MODULE_0___default()("#wrapForm"+t.partNo+e.id).offset().top,e.endEl=jquery__WEBPACK_IMPORTED_MODULE_0___default()("#formAlpaca"+t.partNo+e.id).height(),jquery__WEBPACK_IMPORTED_MODULE_0___default()(window).scroll((function(){e.pstFixed=jquery__WEBPACK_IMPORTED_MODULE_0___default()(window).scrollTop()})))}),500);var a=e.dossierFilesItems.find((function(e){return e.dossierPartNo===t.partNo&&e.eForm&&e.fileSize}));a?(a["id"]=e.id,e.$store.dispatch("loadAlpcaForm",a),t["editForm"]=!1,e.$store.dispatch("viewFile",a).then((function(t){document.getElementById("displayPDF"+a.dossierPartNo+e.id).src=t}))):e.dossierTemplateItems.forEach((function(a){a.hasForm&&t.partNo===a.partNo&&(a["templateFileNo"]=e.thongTinHoSo.dossierTemplateNo,a["loaded"]||e.showAlpacaJSFORM(a))}))},editFormAlpaca:function(t){var e=this;t["editForm"]=!0,setTimeout((function(){var a=e.dossierFilesItems.find((function(e){return e.dossierPartNo===t.partNo&&e.eForm}));a["id"]=e.id,e.$store.dispatch("loadAlpcaForm",a)}),200)},deleteSingleFileEform:function(t,e){var a=this,i=confirm("Bạn có chắc chắn xóa file?");i&&a.dossierFilesItems.forEach((function(i){i.dossierPartNo===t.partNo&&i.eForm&&(i["dossierId"]=a.thongTinHoSo.dossierId,a.$store.dispatch("deleteDossierFile",i).then((function(i){console.log("success!"),a.dossierTemplateItems[e].daKhai=!1,a.$store.dispatch("loadDossierFiles",a.thongTinHoSo.dossierId).then((function(i){if(a.dossierFilesItems=i,a.recountFileTemplates(),t["editForm"]=!0,setTimeout((function(){console.log("item --1--",t),a.loadAlpcaForm(t)}),200),0!==a.dossierFilesItems.length){var o=a.dossierFilesItems.filter((function(e){return e.dossierPartNo===t.partNo}));a.dossierTemplateItems[e]["passRequired"]=!!o}else a.dossierTemplateItems[e]["passRequired"]=!1}))})))}))},previewFileEfom:function(t,e){var a=this;a.dossierFilesItems.forEach((function(e){e.dossierPartNo===t.partNo&&e.eForm&&!e.removed&&(e["dossierId"]=a.thongTinHoSo.dossierId,a.dialogPDFLoading=!0,a.dialogPDF=!0,a.onlyView?a.$store.dispatch("viewFile",e).then((function(t){a.dialogPDFLoading=!1,e["eForm"]?a.pdfEform=!0:a.pdfEform=!1,document.getElementById("dialogPDFPreview"+a.id).src=t})):(e["id"]=a.id,a.$store.dispatch("putAlpacaForm",e).then((function(t){setTimeout((function(){a.$store.dispatch("viewFile",e).then((function(t){a.dialogPDFLoading=!1,document.getElementById("dialogPDFPreview"+a.id).src=t}))}),1e3)})).catch((function(t){toastr__WEBPACK_IMPORTED_MODULE_1___default.a.clear(),toastr__WEBPACK_IMPORTED_MODULE_1___default.a.error("Yêu cầu của bạn thực hiện thất bại.")}))))}))},previewFormAlpaca:function(t,e){var a=this;a.dossierFilesItems.forEach((function(e){e.dossierPartNo===t.partNo&&e.eForm&&!e.removed&&(e["dossierId"]=a.thongTinHoSo.dossierId,a.onlyView?(t["editForm"]=!1,a.$store.dispatch("viewFile",e).then((function(i){e["eForm"]?a.pdfEform=!0:a.pdfEform=!1,document.getElementById("displayPDF"+t.dossierPartNo+a.id).src=i}))):(e["id"]=a.id,a.$store.dispatch("putAlpacaForm",e).then((function(i){t["editForm"]=!1,setTimeout((function(){a.$store.dispatch("viewFile",e).then((function(t){document.getElementById("displayPDF"+e.dossierPartNo+a.id).src=t}))}),500)})).catch((function(t){toastr__WEBPACK_IMPORTED_MODULE_1___default.a.clear(),toastr__WEBPACK_IMPORTED_MODULE_1___default.a.error("Yêu cầu của bạn thực hiện thất bại.")}))))}))},deleteSingleFile:function(t,e){var a=this,i=confirm("Bạn có chắc chắn xóa file đính kèm ?");i&&(t["dossierId"]=a.thongTinHoSo.dossierId,a.$store.dispatch("deleteDossierFile",t).then((function(i){a.fileViews.splice(e,1),a.stateView=!0,a.partView=t.dossierPartNo,a.$store.dispatch("loadDossierFiles",a.thongTinHoSo.dossierId).then((function(e){a.dossierFilesItems=e,a.setDaKhai(t)}))})).catch((function(t){toastr__WEBPACK_IMPORTED_MODULE_1___default.a.clear(),toastr__WEBPACK_IMPORTED_MODULE_1___default.a.error("Yêu cầu của bạn thực hiện thất bại.")})))},viewFile:function(t){var e=this,a=this;a.dossierFilesItems.forEach((function(i){i["dossierId"]=a.thongTinHoSo.dossierId,i.dossierPartNo===t.partNo&&e.$store.dispatch("viewFile",i)}))},setDaKhai:function(t){var e=this,a=e.dossierFilesItems.findIndex((function(e){return e.dossierPartNo===t.dossierPartNo}));if(-1===a){for(var i=0;i<e.dossierTemplateItems.length;i++)if(e.dossierTemplateItems[i].partNo===t.dossierPartNo){e.dossierTemplateItems[i]["passRequired"]=!1;break}}else for(i=0;i<e.dossierTemplateItems.length;i++)if(e.dossierTemplateItems[i].partNo===t.dossierPartNo){e.dossierTemplateItems[i]["passRequired"]=!0;break}},checkPartType3:function(){var t=this;if(0!==t.dossierTemplateItems.length)for(var e=0;e<t.dossierTemplateItems.length;e++)if(3===t.dossierTemplateItems[e].partType)return!0;return!1},viewFile2:function(t){var e=this;if(0!==t.fileSize)if(t["eForm"]?e.pdfEform=!0:e.pdfEform=!1,"doc"===t.fileType||"docx"===t.fileType||"xlsx"===t.fileType||"xls"===t.fileType||"zip"===t.fileType||"rar"===t.fileType||"txt"===t.fileType||"mp3"===t.fileType||"mp4"===t.fileType){var a=e.initDataResource.dossierApi+"/"+e.thongTinHoSo.dossierId+"/files/"+t.referenceUid;window.open(a)}else t["dossierId"]=e.thongTinHoSo.dossierId,t.referenceUid?(e.dialogPDFLoading=!0,e.dialogPDF=!0,e.$store.dispatch("viewFile",t).then((function(t){e.dialogPDFLoading=!1,document.getElementById("dialogPDFPreview"+e.id).src=t}))):(toastr__WEBPACK_IMPORTED_MODULE_1___default.a.clear(),toastr__WEBPACK_IMPORTED_MODULE_1___default.a.error("File dữ liệu không tồn tại"))},attachToDossier:function(t,e){var a=this;console.log(t,e),t["dossierId"]=a.thongTinHoSo.dossierId,3!==t.partType&&(a.progressUploadPart=t.dossierFileId,a.$store.dispatch("copyFile",t).then((function(t){a.progressUploadPart="",a.dossierTemplateItems[e]["passRequired"]=!0,a.$store.dispatch("loadDossierFiles",a.thongTinHoSo.dossierId).then((function(t){a.dossierFilesItems=t,a.recountFileTemplates()}))})).catch((function(t){a.progressUploadPart="",toastr__WEBPACK_IMPORTED_MODULE_1___default.a.error("Đính kèm tài liệu thất bại")})))},viewGiayToDaNop:function(t){var e=this;if(0!==t.fileSize)if(t["eForm"]?e.pdfEform=!0:e.pdfEform=!1,"doc"===t.fileType||"docx"===t.fileType||"xlsx"===t.fileType||"xls"===t.fileType||"zip"===t.fileType||"rar"===t.fileType||"txt"===t.fileType||"mp3"===t.fileType||"mp4"===t.fileType){var a=e.initDataResource.dossierApi+"/"+t.dossierId+"/files/"+t.referenceUid;window.open(a)}else t.referenceUid?(e.dialogPDFLoading=!0,e.dialogPDF=!0,e.$store.dispatch("viewFile",t).then((function(t){e.dialogPDFLoading=!1,document.getElementById("dialogPDFPreview"+e.id).src=t}))):(toastr__WEBPACK_IMPORTED_MODULE_1___default.a.clear(),toastr__WEBPACK_IMPORTED_MODULE_1___default.a.error("File dữ liệu không tồn tại"))},viewFileWithPartNo:function(t){var e=this;if(e.dossierFilesItems){var a=e.dossierFilesItems.filter((function(e){return e.dossierPartNo===t.partNo&&!e.eForm}));if(!a)return;e.fileViews=a,e.partView!==t.partNo?(e.stateView=!0,e.partView=t.partNo):(e.stateView=!e.stateView,e.partView=t.partNo)}},saveMark:function(){var t=this;t.dossierTemplateItems&&t.dossierTemplateItems.forEach((function(e,a){1===e.partType&&(e["dossierId"]=t.thongTinHoSo.dossierId,t.$store.dispatch("postDossierMark",e))}))},changeFileMark:function(t,e){var a=this;if(!a.onlyView){var i=a.dossierTemplateItems[e];i["dossierId"]=a.thongTinHoSo.dossierId,i["fileMark"]=t,i["checkInput"]=a.checkInput,a.$store.dispatch("postDossierMark",i),a.dossierTemplateItems[e].fileMark=t}},changeFileCheck:function(t,e){var a=this,i=a.dossierTemplateItems[e];i["dossierId"]=a.thongTinHoSo.dossierId,i["fileCheck"]=t,i["checkInput"]=a.checkInput,2!==t?(i["fileComment"]="",a.$store.dispatch("postDossierMark",i),a.dossierTemplateItems[e].fileCheck=t):i["stateEditFileCheck"]=!0},changeFileComment:function(t,e){var a=this;null!==t.fileComment&&void 0!==t.fileComment&&""!==t.fileComment&&(t["dossierId"]=a.thongTinHoSo.dossierId,t["fileComment"]=t.fileComment,t["checkInput"]=a.checkInput,t["stateEditFileCheck"]=!t["stateEditFileCheck"],a.$store.dispatch("postDossierMark",t),a.dossierTemplateItems[e].fileComment=t.fileComment)},checkStyle:function(t){var e=this;if(1===e.checkInput)return"calc(100% - 140px)";var a=0;return 1===e.originality||1!==t.partType||e.thongTinHoSo.online||1===e.checkInput||(e.onlyView?a+=140:a+=240),t.fileCheck>0&&!e.thongTinHoSo.online&&(a+=20),t.fileCheck>0&&e.thongTinHoSo.online&&(a+=40),e.onlyView||(a+=90),"calc(100% - "+a+"px)"},checkVisibleTemp:function(t,e){var a=this;if(!a.onlyView)return!0;if(3===t.partType){if(a.dossierFilesItems.length>0){var i=a.dossierFilesItems.findIndex((function(e){return e.dossierPartNo===t.partNo}));return-1!==i}return!1}return!0},changeStateViewResult:function(){var t=this;if(t.dossierFilesItems.length>0){var e=t.dossierFilesItems.findIndex((function(t){return 2===t.dossierPartType||7===t.dossierPartType}));-1!==e?t.$emit("tp:change-state-view-result",!0):t.$emit("tp:change-state-view-result",!1)}else(t.partTypes.includes(2)||t.partTypes.includes(7))&&t.$emit("tp:change-state-view-result",!1)},changeOtherDossierTemp:function(t){var e=this;if(3===e.originality&&e.stateAddFileOther)e.loadingAddOther=!0,e.$store.dispatch("uploadSingleOtherFile",{dossierId:e.thongTinHoSo.dossierId,displayName:t,partNo:e.dossierTemplatesItemSelect.partNo}).then((function(t){e.loadingAddOther=!1,e.dialogAddOtherTemp=!1,e.$store.dispatch("loadDossierFiles",e.thongTinHoSo.dossierId).then((function(t){e.dossierFilesItems=t}))})).catch((function(t){e.loadingAddOther=!1}));else{var a=e.dossierTemplatesItemSelect;a["dossierId"]=e.thongTinHoSo.dossierId,a["displayName"]=t,a["dossierTemplateNo"]=e.thongTinHoSo.dossierTemplateNo,e.$store.dispatch("uploadSingleFile",a).then((function(t){e.progressUploadPart="",e.dialogAddOtherTemp=!1,e.$store.dispatch("loadDossierFiles",e.thongTinHoSo.dossierId).then((function(t){if(e.dossierFilesItems=t,e.recountFileTemplates(),e.stateView&&e.dossierFilesItems){var a=e.dossierFilesItems.filter((function(t){return t.dossierPartNo===e.dossierTemplatesItemSelect.partNo&&!t.eForm}));a&&(e.fileViews=a)}}))})).catch((function(t){e.progressUploadPart=""}))}},downloadFileTemplate:function(t,e){var a=this;if(a.fileTemplateItems.length>0){var i=a.fileTemplateItems.find((function(e){return t.fileTemplateNo===e.fileTemplateNo}));if(i){var o=a.initDataResource.serviceInfoApi+"/"+a.serviceInfoId+"/filetemplates/"+i.fileTemplateNo;window.open(o)}else console.log("ko thay file")}},addOtherTemplate:function(){var t=this;t.$refs.form.validate()&&t.changeOtherDossierTemp(t.otherDossierTemplate)},editDisplayName:function(t,e){var a=this;a.dossierFileIdView!==t.dossierFileId?(a.dossierFileIdView=t.dossierFileId,a.stateEdit=!0):(a.dossierFileIdView=t.dossierFileId,a.stateEdit=!a.stateEdit)},cancelDialog:function(){var t=this;t.dialogAddOtherTemp=!1,t.progressUploadPart=""},addFileOther:function(t){var e=this;e.dialogAddOtherTemp=!0,e.stateAddFileOther=!0,e.dossierTemplatesItemSelect=t},validDossierTemplate:function(){var t=this;if(t.dossierTemplateItems.length>0){for(var e=0;e<t.dossierTemplateItems.length;e++)if(t.dossierTemplateItems[e]["required"]&&!t.dossierTemplateItems[e]["passRequired"]&&t.partTypes.includes(t.dossierTemplateItems[e].partType)){var a="Chú ý :"+t.dossierTemplateItems[e].partName+" là thành phần bắt buộc!";return toastr__WEBPACK_IMPORTED_MODULE_1___default.a.clear(),toastr__WEBPACK_IMPORTED_MODULE_1___default.a.error(a),!1}return!0}return!0},changeDisplayName:function(t,e){var a=this,i={dossierId:a.thongTinHoSo.dossierId,value:value};a.$store.dispatch("changeDisplayNameFile",i).then((function(t){a.fileViews[e].displayName=t.displayName,a.stateEdit=!1})).catch((function(t){console.log("error")}))},getDossierFileApplicants:function(t,e){var a=this,i={dossierId:a.thongTinHoSo.dossierId,applicantIdNo:t,fileTemplateNo:e};a.$store.dispatch("getDossierFilesApplicants",i).then((function(t){a.dossierFilesApplicant=t})).catch((function(t){console.log("error")}))},showFilesApplicant:function(t){jquery__WEBPACK_IMPORTED_MODULE_0___default()("#fileApplicant-"+t).is(":visible")?jquery__WEBPACK_IMPORTED_MODULE_0___default()("#fileApplicant-"+t).hide():jquery__WEBPACK_IMPORTED_MODULE_0___default()("#fileApplicant-"+t).show()},checkKQhasFile:function(t){var e=this;if(e.partTypes.includes(2)){var a=e.dossierFilesItems.find((function(e){return t.partNo===e.dossierPartNo}));return!!a}return!0},partNoApplicantHasFile:function(t){var e=this,a=e.dossierFilesApplicant.find((function(a){return a.dossierTemplateNo===e.thongTinHoSo["dossierTemplateNo"]&&a.dossierPartNo===t}));return!!a},changeRecordCount:function(t){var e=this;if(!e.onlyView){var a=function(){e.doChange=setTimeout((function(){if(!e.onlyView&&Number(e.dossierTemplateItems[t]["recordCount"])>=0){var a=Object.assign({},e.dossierTemplateItems[t],{dossierId:e.thongTinHoSo.dossierId});e.$store.dispatch("postDossierMark",a)}}),3e3)};e.dossierTemplateItems[t].recordCount=e.dossierTemplateItems[t]["recordCount"]?e.dossierTemplateItems[t]["recordCount"]:"",clearTimeout(e.doChange),a()}},increaseCounter:function(t){var e=this;function a(){e.doChange=setTimeout((function(){if(!e.onlyView&&Number(e.dossierTemplateItems[t]["recordCount"])>=0){var a=Object.assign({},e.dossierTemplateItems[t],{dossierId:e.thongTinHoSo.dossierId});e.$store.dispatch("postDossierMark",a)}}),3e3)}e.dossierTemplateItems[t].recordCount=e.dossierTemplateItems[t]["recordCount"]?e.dossierTemplateItems[t]["recordCount"]:"",e.dossierTemplateItems[t]["recordCount"]=Number(e.dossierTemplateItems[t]["recordCount"])+1,clearTimeout(e.doChange),a()},decreaseCounter:function(t){var e=this;function a(){e.doChange=setTimeout((function(){if(!e.onlyView&&Number(e.dossierTemplateItems[t]["recordCount"])>=0){var a=Object.assign({},e.dossierTemplateItems[t],{dossierId:e.thongTinHoSo.dossierId});e.$store.dispatch("postDossierMark",a)}}),3e3)}e.dossierTemplateItems[t].recordCount=e.dossierTemplateItems[t]["recordCount"]?e.dossierTemplateItems[t]["recordCount"]:"",e.dossierTemplateItems[t]["recordCount"]=Number(e.dossierTemplateItems[t]["recordCount"])-1,clearTimeout(e.doChange),a()},getFilesGroupDossier:function(){var t=this;return t.dossierFilesItems},getDocumentTypeIcon:function(t){var e="doc,docx",a="xls,xlsx",i="png,jpg,jpeg";return t?e.indexOf(t.toLowerCase())>=0?{icon:"fas fa fa-file-word-o",color:"blue",size:14}:a.indexOf(t.toLowerCase())>=0?{icon:"fas fa fa-file-excel-o",color:"green",size:14}:"pdf"===t.toLowerCase()?{icon:"fa fa-file-pdf-o",color:"red",size:14}:i.indexOf(t.toLowerCase())>=0?{icon:"fas fa fa-file-image-o",color:"primary",size:14}:{icon:"fas fa fa-paperclip",color:"",size:14}:""}}}},"610f":function(t,e,a){"use strict";var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("label",{class:t.className,style:t.maxWidth,attrs:{role:"checkbox",title:t.toggled?t.title_checked:t.title_unchecked,"aria-checked":t.ariaChecked}},[a("input",{staticClass:"v-switch-input",attrs:{type:"checkbox"},on:{change:function(e){return e.stopPropagation(),t.toggle(e)}}}),a("div",{staticClass:"v-switch-core",style:t.coreStyle},[a("div",{staticClass:"v-switch-button",style:t.buttonStyle})]),t.labels?[t.toggled?a("span",{staticClass:"v-switch-label v-left",style:t.labelStyle,domProps:{innerHTML:t._s(t.labelChecked)}}):a("span",{staticClass:"v-switch-label v-right",style:t.labelStyle,domProps:{innerHTML:t._s(t.labelUnchecked)}})]:t._e()],2)},o=[];function n(t){return n="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},n(t)}var s={colorChecked:"#75C791",colorUnchecked:"#bfcbd9",cssColors:!1,labelChecked:"on",labelUnchecked:"off",width:50,height:22,margin:3},r=function(t,e){return"object"===n(t)&&t.hasOwnProperty(e)},c=function(t){return t+"px"},l={name:"toggle-button",props:{title_checked:"",title_unchecked:"",value:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1},sync:{type:Boolean,default:!1},speed:{type:Number,default:300},color:{type:[String,Object],validator:function(t){return"object"===n(t)?t.checked||t.unchecked:"string"===typeof t}},cssColors:{type:Boolean,default:!1},labels:{type:[Boolean,Object],default:!1,validator:function(t){return"object"===n(t)?t.checked||t.unchecked:"boolean"===typeof t}},height:{type:Number,default:s.height},width:{type:Number,default:s.width}},computed:{className:function(){var t=this.toggled,e=this.disabled;return["vue-js-switch",{toggled:t,disabled:e}]},ariaChecked:function(){return this.toggled.toString()},coreStyle:function(){return{width:c(this.width),height:c(this.height),backgroundColor:this.cssColors?null:this.colorCurrent,borderRadius:c(Math.round(this.height/2))}},maxWidth:function(){return{width:c(this.width)+"!important"}},buttonRadius:function(){return this.height-2*s.margin},distance:function(){return c(this.width-this.height+s.margin)},buttonStyle:function(){return{width:c(this.buttonRadius),height:c(this.buttonRadius),transition:"transform ".concat(this.speed,"ms"),transform:this.toggled?"translate3d(".concat(this.distance,", 3px, 0px)"):null}},labelStyle:function(){return{lineHeight:c(this.height)}},colorChecked:function(){var t=this.color;return"object"!==n(t)?t||s.colorChecked:r(t,"checked")?t.checked:s.colorChecked},colorUnchecked:function(){var t=this.color;return r(t,"unchecked")?t.unchecked:s.colorUnchecked},colorCurrent:function(){return this.toggled?this.colorChecked:this.colorUnchecked},labelChecked:function(){return r(this.labels,"checked")?this.labels.checked:s.labelChecked},labelUnchecked:function(){return r(this.labels,"unchecked")?this.labels.unchecked:s.labelUnchecked}},watch:{value:function(t){this.sync&&(this.toggled=!!t)}},data:function(){return{toggled:!!this.value}},methods:{toggle:function(t){this.toggled=!this.toggled,this.$emit("input",this.toggled),this.$emit("change",{value:this.toggled,srcEvent:t})}}},d=l,u=a("2877"),h=Object(u["a"])(d,i,o,!1,null,null,null);e["a"]=h.exports},6561:function(t,e,a){"use strict";var i=a("dbf2"),o=a.n(i);o.a},6611:function(module,__webpack_exports__,__webpack_require__){"use strict";var vue__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("a026");__webpack_exports__["a"]={props:{item:{type:Object,default:function(){return{dossierId:0}}},layout_view:{type:Object}},created:function created(){var vm=this;null!==vm.layout_view&&void 0!==vm.layout_view&&"undefined"!==vm.layout_view&&vue__WEBPACK_IMPORTED_MODULE_0__["a"].component("my-dynamic-view",{template:vm.layout_view["template"],data:eval(" ( "+vm.layout_view["data"]+" ) "),created:eval(" ( "+vm.layout_view["created"]+" ) "),updated:eval(" ( "+vm.layout_view["updated"]+" ) "),methods:vm.layout_view["methods"]})}}},"6e92":function(t,e,a){"use strict";var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("v-card",{attrs:{flat:""}},[1===t.checkInput?a("div",{staticClass:"d-inline-block",staticStyle:{position:"absolute",right:"10px",top:"-50px"}},[a("v-radio-group",{attrs:{row:""},on:{change:t.markAll},model:{value:t.markCheck,callback:function(e){t.markCheck=e},expression:"markCheck"}},[a("v-radio",{attrs:{label:"Tất cả đạt",color:"success",value:1}}),a("v-radio",{attrs:{label:"Tất cả không đạt",color:"error",value:2}}),a("v-radio",{attrs:{label:"Tất cả chưa kiểm tra",color:"warning",value:0}})],1)],1):t._e(),t._l(t.dossierTemplateItemsFilter,(function(e,i){return a("div",{key:e.partNo,staticClass:"form_alpaca",staticStyle:{position:"relative",overflow:"hidden"}},[a("v-expansion-panel",{staticClass:"expaned__list__data",attrs:{expand:"",value:t.currentFormView==="formAlpaca"+e.partNo+t.id?[!0]:[!1]}},[a("v-expansion-panel-content",{attrs:{"hide-actions":""}},[a("div",{staticStyle:{"background-color":"#fff"},attrs:{slot:"header"},on:{click:function(e){t.stateView=!1}},slot:"header"},[a("div",{staticStyle:{"align-items":"center",background:"#fff","padding-left":"25px"},style:{width:t.checkStyle(e)}},[a("div",{staticClass:"mr-2",staticStyle:{"min-width":"20px",display:"flex"},on:{click:function(a){e.hasForm&&t.loadAlpcaFormClick(e,i)}}},[3!==t.originality||"NEW"!==t.formCodeInput&&"NEW_GROUP"!==t.formCodeInput?t._e():a("div",{staticClass:"header__tphs check-template mr-2",staticStyle:{width:"20px","margin-left":"-15px"},on:{click:function(t){t.stopPropagation()}}},[a("v-checkbox",{staticClass:"my-0 py-0",on:{change:function(a){t.changeHasTemplate(i,e)}},model:{value:e["hasTemplate"],callback:function(a){t.$set(e,"hasTemplate",a)},expression:"item['hasTemplate']"}})],1),3===t.originality&&t.tempLienThong?a("div",{staticClass:"header__tphs check-template mr-2",staticStyle:{width:"20px","margin-left":"-15px"},on:{click:function(t){t.stopPropagation()}}},[a("v-checkbox",{staticClass:"my-0 py-0",on:{change:function(a){t.changeHasTemplateLienThong(i,e)}},model:{value:e["hasTemplateLienThong"],callback:function(a){t.$set(e,"hasTemplateLienThong",a)},expression:"item['hasTemplateLienThong']"}})],1):t._e(),a("div",{staticClass:"header__tphs",staticStyle:{"min-width":"20px"}},[a("span",{staticClass:"text-bold"},[t._v(t._s(i+1)+".")]),t._v("  ")]),a("div",{staticClass:"header__tphs",staticStyle:{"text-align":"justify"}},[e.partTip&&e.partTip["tip"]?a("v-tooltip",{staticStyle:{"max-width":"100% !important"},attrs:{top:""}},[a("span",{attrs:{slot:"activator"},slot:"activator"},[t._v("\n                      "+t._s(e.partName)+"\n                      "),e.required?a("span",{staticStyle:{color:"red"}},[t._v("   (*) ")]):t._e(),e.hasForm?a("span",{staticStyle:{color:"#004b94"}},[t._v("(Bản khai trực tuyến)")]):t._e()]),e.partTip["tip"]?a("span",[t._v(t._s(e.partTip["tip"]))]):t._e()]):a("span",[t._v("\n                    "+t._s(e.partName)+" "),e.required?a("span",{staticStyle:{color:"red"}},[t._v("   (*) ")]):t._e(),e.hasForm?a("span",{staticStyle:{color:"#004b94"}},[t._v("(Bản khai trực tuyến)")]):t._e()]),t._v("\n                    \n                  "),!e.hasForm&&e.hasFileTemp?a("v-tooltip",{attrs:{top:""}},[a("v-icon",{staticStyle:{color:"#0d71bb"},attrs:{slot:"activator",size:"16",color:"primary"},on:{click:function(a){a.stopPropagation(),t.downloadFileTemplate(e,i)}},slot:"activator"},[t._v("save_alt")]),a("span",[t._v("Biểu mẫu điền thủ công")])],1):t._e()],1)]),a("div",{staticStyle:{display:"flex"}},[1===t.checkInput&&2===e.fileCheck&&e.stateEditFileCheck?a("v-text-field",{staticClass:"ml-3",attrs:{placeholder:"Nhập lý do",rules:[function(t){return!!t||"Bạn phải nhập lý do trước khi gửi"}],required:""},on:{keyup:function(a){if(!("button"in a)&&t._k(a.keyCode,"enter",13,a.key,"Enter"))return null;t.changeFileComment(e,i)},click:function(t){t.stopPropagation()}},model:{value:e.fileComment,callback:function(a){t.$set(e,"fileComment",a)},expression:"item.fileComment"}}):t._e(),1===t.checkInput&&2===e.fileCheck&&e.stateEditFileCheck?a("v-tooltip",{attrs:{top:""}},[a("v-btn",{staticClass:"mx-0 my-0",attrs:{slot:"activator",icon:""},on:{click:function(a){a.stopPropagation(),t.changeFileComment(e,i)}},slot:"activator"},[a("v-icon",{staticClass:"mx-0",attrs:{size:"16",color:"primary"}},[t._v("send")])],1),a("span",[t._v("Gửi")])],1):t._e()],1),e.fileComment&&!e.stateEditFileCheck?a("i",{staticClass:"pl-3",staticStyle:{"font-size":"12px",color:"#0d71bb"}},[t._v("Lý do không đạt: "+t._s(e.fileComment))]):t._e(),e.fileComment&&!e.stateEditFileCheck&&1===t.checkInput?a("v-tooltip",{attrs:{top:""}},[a("v-icon",{staticStyle:{"font-size":"13px",color:"#0d71bb","margin-left":"10px",cursor:"pointer"},attrs:{slot:"activator"},on:{click:function(t){t.stopPropagation(),e.stateEditFileCheck=!e.stateEditFileCheck}},slot:"activator"},[t._v("edit")]),a("span",[t._v("Chỉnh sửa lý do")])],1):t._e(),t._l(t.dossierFilesItems,(function(i,o){return e.partNo===i.dossierPartNo?a("div",{key:o,staticClass:"mt-0"},[i.eForm?t._e():a("div",{style:{width:"calc(100% - 0px)",display:"flex","align-items":"center",background:"#fff","padding-left":"15px","font-size":"12px","margin-bottom":t.onlyView?"5px":"0px"}},[a("span",{staticClass:"ml-1",staticStyle:{cursor:"pointer"},on:{click:function(e){e.stopPropagation(),t.viewFile2(i)}}},[0!==i.fileSize?a("v-icon",{staticClass:"mr-1",attrs:{color:t.getDocumentTypeIcon(i.fileType)["color"],size:t.getDocumentTypeIcon(i.fileType)["size"]}},[t._v("\n                      "+t._s(t.getDocumentTypeIcon(i.fileType)["icon"])+"\n                    ")]):t._e(),t._v("\n                    "+t._s(i.displayName)+" - \n                    "),a("i",[t._v(t._s(i.modifiedDate))])],1),t.onlyView||1===t.checkInput?t._e():a("v-btn",{staticClass:"mx-0 my-0",attrs:{icon:"",ripple:""},on:{click:function(e){e.stopPropagation(),t.deleteSingleFile(i,o)}}},[a("v-icon",{staticStyle:{color:"red"}},[t._v("delete_outline")])],1),a("v-btn",{staticClass:"mx-0 my-0",attrs:{icon:"",ripple:""},on:{click:function(e){e.stopPropagation(),t.downloadSingleFile(i)}}},[a("v-icon",{attrs:{size:"14",color:"primary"}},[t._v("fas fa fa-download")])],1)],1)]):t._e()})),a("div",{staticClass:"mr-3 my-2 py-2",staticStyle:{display:"none","max-height":"250px",overflow:"auto",border:"1px dashed #f3ae75","border-radius":"5px",position:"relative"},attrs:{id:"fileApplicant-"+e.partNo}},[t._l(t.dossierFilesApplicant,(function(o,n){return o.dossierTemplateNo===t.thongTinHoSo["dossierTemplateNo"]&&e.partNo===o.dossierPartNo?a("div",{key:n},[o.eForm&&0!==o.fileSize?a("div",{style:{width:"calc(100% - 0px)",display:"flex","align-items":"center","padding-left":"15px","font-size":"12px","margin-bottom":t.onlyView?"5px":"3px"}},[a("v-tooltip",{staticStyle:{"max-width":"100%"},attrs:{top:""}},[a("span",{staticStyle:{cursor:"pointer"},attrs:{slot:"activator"},on:{click:function(e){e.stopPropagation(),t.viewGiayToDaNop(o)}},slot:"activator"},[a("i",{staticClass:"ml-1 fa fa-file-o",staticStyle:{color:"#0d71bb","font-size":"13px"}}),t._v("  \n                        "+t._s(o.dossierTemplateNo?o.dossierTemplateNo:o.referenceUid)+"."+t._s(o.fileType)+" - \n                        "),a("i",[t._v(t._s(o.modifiedDate))])]),a("span",[t._v("Bản khai trực tuyến")])]),t.progressUploadPart===o.dossierFileId?a("v-progress-circular",{attrs:{width:2,size:25,color:"green",indeterminate:""}}):t._e(),t.onlyView||t.progressUploadPart?t._e():a("v-tooltip",{staticClass:"ml-2",attrs:{top:""}},[a("v-btn",{staticClass:"mx-0 my-0",attrs:{slot:"activator",icon:""},on:{click:function(e){t.attachToDossier(o,i)}},slot:"activator"},[a("v-badge",[a("v-icon",{attrs:{size:"16",color:"orange darken-3"}},[t._v("cloud_download")])],1)],1),a("span",[t._v("Sử dụng giấy tờ này")])],1)],1):a("div",{style:{width:"calc(100% - 0px)",display:"flex","align-items":"center","padding-left":"15px","font-size":"12px","margin-bottom":t.onlyView?"5px":"3px"}},[a("v-tooltip",{staticStyle:{"max-width":"100%"},attrs:{top:""}},[a("span",{staticStyle:{cursor:"pointer"},attrs:{slot:"activator"},on:{click:function(e){e.stopPropagation(),t.viewGiayToDaNop(o)}},slot:"activator"},[0!==o.fileSize?a("v-icon",{staticStyle:{color:"#0d71bb"}},[t._v("attach_file")]):t._e(),t._v("\n                        "+t._s(o.displayName)+" - \n                        "),a("i",[t._v(t._s(o.modifiedDate))])],1),a("span",[t._v("Đính kèm")])]),t.progressUploadPart===o.dossierFileId?a("v-progress-circular",{attrs:{width:2,size:25,color:"green",indeterminate:""}}):t._e(),t.onlyView||t.progressUploadPart?t._e():a("v-tooltip",{staticClass:"ml-2",attrs:{top:""}},[a("v-btn",{staticClass:"mx-0 my-0",attrs:{slot:"activator",icon:""},on:{click:function(e){t.attachToDossier(o,i)}},slot:"activator"},[a("v-badge",[a("v-icon",{attrs:{size:"16",color:"orange darken-3"}},[t._v("cloud_download")])],1)],1),a("span",[t._v("Sử dụng giấy tờ này")])],1)],1)]):t._e()})),a("v-btn",{staticClass:"mx-0 my-0",staticStyle:{position:"absolute",right:"0px",top:"0px"},attrs:{flat:"",icon:"",color:"red"},on:{click:function(a){a.stopPropagation(),t.showFilesApplicant(e.partNo)}}},[a("v-icon",[t._v("clear")])],1)],2)],2)]),e.hasForm?a("v-card",{attrs:{flat:""}},[a("v-card-text",{staticStyle:{"background-color":"rgba(244, 247, 213, 0.19)"}},[a("v-layout",{attrs:{wrap:""}},[t.stateView?t._e():a("v-flex",{staticClass:"text-xs-right",attrs:{xs12:""}},[a("div",{style:t.pstFixed>t.pstEl&&t.pstFixed<t.endEl+t.pstEl?"position:fixed;top:5px;z-index:101":"",attrs:{id:"wrapForm"+e.partNo+t.id}},[e["editForm"]&&e.hasForm&&!t.onlyView&&1!==t.checkInput&&!e.embed?a("v-btn",{attrs:{color:"primary",disabled:t.loadingApacal},on:{click:function(a){a.stopPropagation(),t.saveAlpacaForm(e,i)}}},[t.loadingApacal?a("i",{staticClass:"fa fa-spinner",attrs:{"aria-hidden":"true"}}):a("v-icon",{attrs:{color:"white"}},[t._v("save")]),t._v(" \n                      Lưu lại\n                    ")],1):t._e(),e["editForm"]&&e.daKhai&&e.hasForm?a("v-btn",{attrs:{color:"primary",disabled:t.loadingApacal},on:{click:function(a){a.stopPropagation(),t.previewFormAlpaca(e,i)}}},[t.loadingApacal?a("i",{staticClass:"fa fa-spinner",attrs:{"aria-hidden":"true"}}):a("v-icon",{attrs:{color:"white"}},[t._v("print")]),t._v(" \n                      Xem\n                    ")],1):t._e(),e["editForm"]||!e.hasForm||t.onlyView?t._e():a("v-btn",{attrs:{color:"primary"},on:{click:function(a){a.stopPropagation(),t.editFormAlpaca(e)}}},[a("v-icon",{attrs:{color:"white"}},[t._v("edit")]),t._v(" \n                      Sửa\n                    ")],1),e.daKhai&&e.hasForm&&!t.onlyView&&1!==t.checkInput?a("v-btn",{attrs:{color:"primary",disabled:t.loadingApacal},on:{click:function(a){a.stopPropagation(),t.deleteSingleFileEform(e,i)}}},[t.loadingApacal?a("i",{staticClass:"fa fa-spinner",attrs:{"aria-hidden":"true"}}):a("v-icon",{attrs:{color:"white"}},[t._v("delete")]),t._v(" \n                      Xóa\n                    ")],1):t._e()],1),e["editForm"]&&!e.embed?a("div",{style:{"pointer-events: none":t.onlyView},attrs:{id:"formAlpaca"+e.partNo+t.id}}):t._e(),e["editForm"]&&e.embed?a("div",{style:{"pointer-events: none":t.onlyView}},[a("iframe",{attrs:{id:"formAlpaca"+e.partNo+t.id,width:"100%",height:"500px",frameborder:"0",src:""}})]):t._e(),e["editForm"]?t._e():a("iframe",{staticStyle:{overflow:"auto","min-height":"600px"},attrs:{id:"displayPDF"+e.partNo+t.id,src:"",type:"application/pdf",width:"100%",height:"100%",frameborder:"0"}})])],1)],1)],1):t._e()],1)],1),a("div",{staticClass:"absolute__btn group__thanh_phan mr-1",style:1!==t.originality?"top: 3px":""},[t.loading?a("content-placeholders",{staticClass:"mt-1"},[a("content-placeholders-text",{attrs:{lines:1}})],1):a("v-layout",{attrs:{row:"",wrap:""}},[1===t.originality||t.onlyView?t._e():a("v-flex",{staticClass:"layout wrap mr-2",staticStyle:{width:"100px"}},[a("v-text-field",{staticClass:"counter-up-down text-xs-center",staticStyle:{width:"100px"},style:t.onlyView?"pointer-events: none":"",attrs:{title:"Số lượng","append-icon":"add","prepend-inner-icon":"remove","clear-icon":"mdi-close-circle",type:"number",solo:"",flat:"",height:"32"},on:{"click:append":function(e){t.increaseCounter(i)},"click:prepend-inner":function(e){t.decreaseCounter(i)},input:function(e){t.changeRecordCount(i)}},model:{value:t.dossierTemplateItemsFilter[i]["recordCount"],callback:function(e){t.$set(t.dossierTemplateItemsFilter[i],"recordCount",e)},expression:"dossierTemplateItemsFilter[index]['recordCount']"}})],1),1===t.originality||1!==e.partType&&3!==e.partType||t.thongTinHoSo.online||1===t.checkInput?t._e():a("v-flex",{staticClass:"layout wrap",staticStyle:{width:"100px"}},[a("v-autocomplete",{style:t.onlyView?"pointer-events: none":"",attrs:{items:t.fileMarkItems,"hide-no-data":""},on:{change:function(e){t.changeFileMark(e,i)}},model:{value:t.dossierTemplateItemsFilter[i].fileMark,callback:function(e){t.$set(t.dossierTemplateItemsFilter[i],"fileMark",e)},expression:"dossierTemplateItemsFilter[index].fileMark"}})],1),1===t.checkInput?a("v-flex",{staticClass:"layout wrap",staticStyle:{width:"130px"}},[a("v-select",{attrs:{items:t.fileCheckItems,"item-text":"text","item-value":"value"},on:{change:function(e){t.changeFileCheck(e,i)}},model:{value:t.dossierTemplateItemsFilter[i].fileCheck,callback:function(e){t.$set(t.dossierTemplateItemsFilter[i],"fileCheck",e)},expression:"dossierTemplateItemsFilter[index].fileCheck"}})],1):e.fileCheck>0?a("v-flex",{staticClass:"layout wrap",style:{width:"40px","align-items":"center","margin-left":"10px","margin-top":t.thongTinHoSo.online?"10px":"0px"}},[1===e.fileCheck?a("v-tooltip",{attrs:{top:""}},[a("v-icon",{staticClass:"mx-0",attrs:{slot:"activator",size:"24",color:"primary"},slot:"activator"},[t._v("done")]),a("span",[t._v("Đạt")])],1):2===e.fileCheck?a("v-tooltip",{attrs:{top:""}},[a("v-icon",{staticClass:"mx-0",attrs:{slot:"activator",size:"24",color:"primary"},slot:"activator"},[t._v("close")]),a("span",[t._v("Không đạt")])],1):t._e()],1):t._e(),1!==t.checkInput?a("v-flex",{class:{"text-xs-right":t.onlyView},style:{width:t.onlyView?"auto":"120px"}},[e["multiple"]?a("input",{staticStyle:{display:"none"},attrs:{type:"file",multiple:"",id:"file"+e.partNo},on:{change:function(a){t.onUploadSingleFile(a,e,i)}}}):a("input",{staticStyle:{display:"none"},attrs:{type:"file",id:"file"+e.partNo},on:{change:function(a){t.onUploadSingleFile(a,e,i)}}}),3!==e.partType||3!==t.originality||t.onlyView?t._e():a("v-tooltip",{attrs:{top:""}},[a("v-btn",{staticClass:"mx-0 my-0",attrs:{slot:"activator",icon:""},on:{click:function(a){t.addFileOther(e)}},slot:"activator"},[a("v-icon",{staticClass:"mx-0",attrs:{size:"16",color:"primary"}},[t._v("add")])],1),a("span",[t._v("Thêm giấy tờ khác")])],1),t.progressUploadPart===e.partNo?a("v-progress-circular",{attrs:{width:2,size:25,color:"green",indeterminate:""}}):t._e(),t.progressUploadPart!==e.partNo&&!t.onlyView&e.hasForm?a("v-tooltip",{attrs:{top:""}},[a("v-btn",{staticClass:"mx-0 my-0",attrs:{slot:"activator",icon:""},on:{click:function(a){a.stopPropagation(),t.loadAlpcaFormClick(e)}},slot:"activator"},[a("v-badge",[a("v-icon",{attrs:{size:"24",color:"#004b94"}},[t._v("edit")])],1)],1),a("span",[t._v("Khai trực tuyến")])],1):t._e(),t.progressUploadPart!==e.partNo&&t.onlyView&e.hasForm?a("v-tooltip",{attrs:{top:""}},[a("v-btn",{staticClass:"mx-1 my-0",staticStyle:{height:"25px",width:"25px"},attrs:{slot:"activator",fab:"",dark:"",small:"",color:"primary"},on:{click:function(a){t.loadAlpcaFormClick(e)}},slot:"activator"},[a("v-icon",{staticStyle:{"font-size":"14px"}},[t._v("visibility")])],1),a("span",[t._v("Xem")])],1):t._e(),t.progressUploadPart===e.partNo||t.onlyView?t._e():a("v-tooltip",{attrs:{left:""}},[a("v-btn",{staticClass:"mx-0 my-0",attrs:{slot:"activator",icon:""},on:{click:function(a){t.pickFile(e)}},slot:"activator"},[a("v-badge",[a("v-icon",{attrs:{size:"24",color:"#004b94"}},[t._v("cloud_upload")])],1)],1),e.partTip["extensions"]||e.partTip["maxSize"]?a("span",[t._v("Tải giấy tờ lên (Chấp nhận tải lên các định dạng: "+t._s(e.partTip["extensions"])+". Tối đa "+t._s(e.partTip["maxSize"])+" MB)")]):a("span",[t._v("Tải giấy tờ lên")])],1),t.partNoApplicantHasFile(e.partNo)&&!t.onlyView?a("v-tooltip",{attrs:{top:""}},[a("v-btn",{staticClass:"mx-0 my-0",attrs:{slot:"activator",icon:""},on:{click:function(a){t.showFilesApplicant(e.partNo)}},slot:"activator"},[a("v-badge",[a("v-icon",{attrs:{size:"24",color:"orange darken-3"}},[t._v("folder")])],1)],1),a("span",[t._v("Giấy tờ đã nộp")])],1):t._e()],1):t._e()],1)],1)],1)})),t.partTypes.includes(2)||3!==t.originality||t.partTypes.includes(6)||t.partTypes.includes(7)?t._e():a("div",[a("v-card",{attrs:{flat:""}},[a("v-card-text",{staticClass:"py-0 px-3 pl-4",attrs:{flat:""}},[a("v-form",{ref:"formGhiChuThanhPhan",attrs:{"lazy-validation":""},model:{value:t.valid_ghichu,callback:function(e){t.valid_ghichu=e},expression:"valid_ghichu"}},[t.onlyView?t._e():a("div",{staticClass:"my-2"},[a("v-textarea",{staticClass:"py-0",attrs:{box:"",rows:"3",rules:[t.rules.varchar5000],label:"Ghi chú"},on:{input:t.changeApplicantNote},model:{value:t.applicantNoteDossier,callback:function(e){t.applicantNoteDossier=e},expression:"applicantNoteDossier"}})],1),t.onlyView&&t.applicantNoteDossier?a("v-text-field",{staticClass:"my-2",attrs:{label:"Ghi chú",readonly:"",box:""},model:{value:t.applicantNoteDossier,callback:function(e){t.applicantNoteDossier=e},expression:"applicantNoteDossier"}}):t._e()],1)],1)],1)],1),a("v-dialog",{attrs:{"max-width":"400",transition:"fade-transition",persistent:""},model:{value:t.dialogAddOtherTemp,callback:function(e){t.dialogAddOtherTemp=e},expression:"dialogAddOtherTemp"}},[a("v-card",[a("v-form",{ref:"form",attrs:{"lazy-validation":""},model:{value:t.valid,callback:function(e){t.valid=e},expression:"valid"}},[a("v-toolbar",{attrs:{dark:"",color:"primary"}},[a("v-toolbar-title",[t._v("Tên giấy tờ")]),a("v-spacer"),a("v-btn",{attrs:{icon:"",dark:""},nativeOn:{click:function(e){return t.cancelDialog(e)}}},[a("v-icon",[t._v("close")])],1)],1),a("v-card-text",{staticClass:"pb-0 pt-4"},[a("v-layout",{attrs:{wrap:""}},[a("v-flex",{staticClass:"px-2 pb-3 fix__label",attrs:{xs12:""}},[a("v-text-field",{attrs:{label:"Tên giấy tờ:",rules:[function(t){return!!t||"Bạn phải điền tên giấy tờ."}],required:""},model:{value:t.otherDossierTemplate,callback:function(e){t.otherDossierTemplate=e},expression:"otherDossierTemplate"}})],1)],1)],1),a("v-card-actions",[a("v-spacer"),a("v-btn",{attrs:{color:"red darken-3",flat:"flat",loading:t.loadingAddOther},nativeOn:{click:function(e){return t.cancelDialog(e)}}},[t._v("\n              Quay lại\n              "),a("span",{attrs:{slot:"loader"},slot:"loader"},[t._v("Loading...")])]),a("v-btn",{attrs:{color:"primary",flat:"flat",loading:t.loadingAddOther},nativeOn:{click:function(e){return t.addOtherTemplate(e)}}},[t._v("\n              Đồng ý\n              "),a("span",{attrs:{slot:"loader"},slot:"loader"},[t._v("Loading...")])])],1)],1)],1)],1)],2),a("v-dialog",{staticStyle:{overflow:"hidden"},attrs:{"max-width":"900",transition:"fade-transition"},model:{value:t.dialogPDF,callback:function(e){t.dialogPDF=e},expression:"dialogPDF"}},[a("v-card",[a("v-toolbar",{attrs:{dark:"",color:"primary"}},[a("v-toolbar-title",[t.pdfEform?a("span",[t._v("Bản in đã khai trực tuyến")]):a("span",[t._v("Tài liệu đính kèm")])]),a("v-spacer"),a("v-btn",{attrs:{icon:"",dark:""},nativeOn:{click:function(e){t.dialogPDF=!1}}},[a("v-icon",[t._v("close")])],1)],1),t.dialogPDFLoading?a("div",{staticStyle:{"min-height":"600px","text-align":"center",margin:"auto",padding:"25%"}},[a("v-progress-circular",{attrs:{size:100,width:1,color:"primary",indeterminate:""}})],1):t._e(),a("iframe",{directives:[{name:"show",rawName:"v-show",value:!t.dialogPDFLoading,expression:"!dialogPDFLoading"}],staticStyle:{overflow:"auto","min-height":"600px"},attrs:{id:"dialogPDFPreview"+t.id,src:"",type:"application/pdf",width:"100%",height:"100%",frameborder:"0"}})],1)],1),a("v-dialog",{attrs:{scrollable:"",persistent:"","max-width":"1300px"},model:{value:t.dialog_documentApplicant,callback:function(e){t.dialog_documentApplicant=e},expression:"dialog_documentApplicant"}},[a("v-card",[a("v-toolbar",{attrs:{dark:"",color:"primary"}},[a("v-toolbar-title",[t._v("Kho tài liệu công dân, tổ chức, doanh nghiệp")]),a("v-spacer"),a("v-btn",{attrs:{icon:"",dark:""},nativeOn:{click:function(e){t.dialog_documentApplicant=!1}}},[a("v-icon",[t._v("close")])],1)],1),a("v-card-text",{staticClass:"py-1"},[a("kho-tai-lieu",{ref:"khotailieu",attrs:{index:t.applicantId},on:{"trigger-attach":t.attachFileFromStorage}})],1)],1)],1)],1)},o=[],n=a("92fe"),s=n["a"],r=a("2877"),c=a("6544"),l=a.n(c),d=a("c6a6"),u=a("4ca6"),h=a("8336"),p=a("b0af"),m=a("99d9"),g=a("ac7c"),v=a("169a"),f=a("cd55"),_=a("49e2"),y=a("0e8f"),C=a("4bd4"),D=a("132d"),T=a("a722"),x=a("490a"),b=a("67b6"),S=a("43a6"),N=a("b56d"),P=a("9910"),I=a("2677"),A=a("a844"),w=a("71d9"),E=a("2a7f"),k=a("3a2f"),O=Object(r["a"])(s,i,o,!1,null,null,null);e["a"]=O.exports;l()(O,{VAutocomplete:d["a"],VBadge:u["a"],VBtn:h["a"],VCard:p["a"],VCardActions:m["a"],VCardText:m["b"],VCheckbox:g["a"],VDialog:v["a"],VExpansionPanel:f["a"],VExpansionPanelContent:_["a"],VFlex:y["a"],VForm:C["a"],VIcon:D["a"],VLayout:T["a"],VProgressCircular:x["a"],VRadio:b["a"],VRadioGroup:S["a"],VSelect:N["a"],VSpacer:P["a"],VTextField:I["a"],VTextarea:A["a"],VToolbar:w["a"],VToolbarTitle:E["b"],VTooltip:k["a"]})},7121:function(t,e,a){"use strict";var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"phancong",staticStyle:{"background-color":"white",width:"100%"}},[3===t.type||4===t.type?a("v-expansion-panel",{staticClass:"expansion-pl",attrs:{value:[!0],expand:""}},[a("v-expansion-panel-content",[a("div",{attrs:{slot:"header"},slot:"header"},[a("div",{staticClass:"background-triangle-small"},[a("v-icon",{attrs:{size:"18",color:"white"}},[t._v("star_rate")])],1),t._v("Phân công chỉ đạo\n      ")]),a("v-card",[a("div",{staticClass:"px-4 py-1"},[a("v-layout",{attrs:{wrap:""}},t._l(t.data_uyquyen,(function(e,i){return a("v-checkbox",{key:e.userId,staticStyle:{display:"inline-block","min-width":"190px","max-width":"190px"},attrs:{slot:"activator",title:e.userName},on:{change:function(e){t.changeDelegacy(e,i)}},slot:"activator",model:{value:e.assigned,callback:function(a){t.$set(e,"assigned",a)},expression:"item.assigned"}},[a("template",{slot:"label"},[a("span",{staticClass:"black--text"},[t._v(t._s(e.userName))])])],2)})),1)],1)])],1)],1):t._e(),a("v-expansion-panel",{staticClass:"expansion-pl",attrs:{value:[!0],expand:""}},[a("v-expansion-panel-content",[a("div",{attrs:{slot:"header"},slot:"header"},[a("div",{staticClass:"background-triangle-small"},[a("v-icon",{attrs:{size:"18",color:"white"}},[t._v("star_rate")])],1),6===t.type||7===t.type||8===t.type||9===t.type?a("span",[t._v("Chọn phòng ban thực hiện")]):a("span",[t._v("Chọn người thực hiện")])]),a("v-card",[1===t.type||3===t.type||5===t.type?a("div",{staticClass:"px-4 py-1"},[a("v-layout",{attrs:{wrap:""}},t._l(t.data_phancong,(function(e,i){return a("v-checkbox",{key:e.userId,staticStyle:{display:"inline-block","min-width":"190px","max-width":"190px"},attrs:{slot:"activator",title:e.userName},on:{change:function(e){t.changeAssigned(e,i)}},slot:"activator",model:{value:e.assigned,callback:function(a){t.$set(e,"assigned",a)},expression:"item.assigned"}},[a("template",{slot:"label"},[a("span",{staticClass:"black--text"},[t._v(t._s(e.userName))])])],2)})),1)],1):t._e(),6===t.type||7===t.type||8===t.type||9===t.type?a("v-card-text",{staticClass:"px-4 py-1"},[t.reRender?a("v-layout",{staticClass:"my-1",attrs:{wrap:""}},t._l(t.data_rolegroup,(function(e,i){return a("div",{key:e.roleId,staticClass:"ml-3"},[a("v-layout",{attrs:{wrap:""}},[a("v-tooltip",{attrs:{top:""}},[a("v-checkbox",{staticStyle:{"min-width":"150px"},attrs:{slot:"activator",label:e.roleName},on:{change:function(e){t.checkAssignedRoleGroup(e,i)}},slot:"activator",model:{value:e.assigned,callback:function(a){t.$set(e,"assigned",a)},expression:"item.assigned"}}),a("span",{staticClass:"pl-0"},[t._v(" "+t._s(e.roleName)+" ")])],1)],1)],1)})),0):t._e()],1):t._e(),2===t.type||4===t.type?a("v-card-text",{staticClass:"px-4 py-1"},[a("v-layout",{staticClass:"my-1",attrs:{wrap:""}},t._l(t.data_phancong,(function(e,i){return a("div",{key:e.userId,staticClass:"ml-3"},[a("v-layout",{attrs:{wrap:""}},[a("v-tooltip",{attrs:{top:""}},[a("v-checkbox",{staticStyle:{"min-width":"150px"},attrs:{slot:"activator",label:e.userName},on:{change:function(e){t.checkAsign(e,i)}},slot:"activator",model:{value:e.assigned,callback:function(a){t.$set(e,"assigned",a)},expression:"item.assigned"}}),a("span",{staticClass:"pl-0"},[t._v(" "+t._s(e.userName)+" ")])],1)],1)],1)})),0)],1):t._e()],1)],1)],1)],1)},o=[],n=a("854a"),s=a.n(n),r=a("610f");s.a.options={closeButton:!0,timeOut:"2000"};var c={components:{"toggle-button":r["a"]},props:{assign_items:{type:Array,default:function(){return[]}},data_rolegroup:{type:Array,default:function(){return[]}},data_uyquyen:{type:Array,default:function(){return[]}},type:{type:Number,default:function(){return 1}},configNote:{type:Object,default:function(){}},detailDossier:{type:Object,default:function(){}}},model:{prop:"assign_items"},watch:{},data:function(){return{reRender:!0,toUsersExport:[],data_phancong:[],assignedtype_items:{2:[{text:"Không có phân công",value:0},{text:"Thực hiện chính",value:1},{text:"Thực hiện phối hợp",value:2}],3:[{text:"Không có phân công",value:0},{text:"Thực hiện chính",value:1},{text:"Thực hiện phối hợp",value:2},{text:"Theo dõi",value:3}]},title_asign:{1:"PHÂN CÔNG NGƯỜI THỰC HIỆN",2:"PHÂN CÔNG THỰC HIỆN, PHỐI HỢP",3:"PHÂN CÔNG THỰC HIỆN, PHỐI HỢP VÀ THEO DÕI"},presenterAddGroup:!0,assignValidate:!0}},created:function(){setTimeout((function(){window.$(".btn-tgl").addClass("btn-hidden")}),200)},mounted:function(){var t=this;console.log("userRoles",t.$store.getters.getUser.role),t.data_phancong=t.assign_items,8!==t.type&&9!==t.type||(t.data_rolegroup=t.data_rolegroup.filter((function(e){return!t.checkUserRole(e.roleCode)}))),console.log("this.data_rolegroup",t.data_rolegroup)},methods:{changeAssigned:function(t,e){var a=this;if(0!==a.type)if(!0===t)if(5===a.type){for(var i in a.assign_items)a.assign_items[i].assigned=0;a.assign_items[e].assigned=1}else a.assign_items[e].assigned=1;else a.assign_items[e].assigned=0;console.log("assign_itemsChange",a.assign_items)},checkAssignedRoleGroup:function(t,e){var a=this;if(0!==a.type)if(!0===t)if(7===a.type||9===a.type){for(var i in a.data_rolegroup)a.data_rolegroup[i].assigned=0;a.data_rolegroup[e].assigned=1}else 6!==a.type&&8!==a.type||(a.data_rolegroup[e].assigned=1);else a.data_rolegroup[e].assigned=0;console.log("data_rolegroupChange2222",a.data_rolegroup);var o=[];for(var n in a.data_rolegroup)if(1===a.data_rolegroup[n].assigned){var s=a.data_rolegroup[n].hasOwnProperty("lstUser")&&a.data_rolegroup[n]["lstUser"]?a.data_rolegroup[n]["lstUser"]:[];Array.isArray(s)||(s=[s]),s=s.map((function(t){return t=Object.assign(t,{assigned:1}),t})),o=o.concat(s)}a.toUsersExport=o,console.log("toUsersGroup",a.toUsersExport),a.reRender=!1,a.$nextTick((function(){a.reRender=!0}))},changeDelegacy:function(t,e){var a=this;3!==a.type&&4!==a.type||(a.data_uyquyen[e].assigned=!0===t?1:0)},checkAsign:function(t,e){var a=this;t?(a.assign_items[e].assigned=1,window.$("#btn-".concat(e)).removeClass("btn-hidden")):(a.assign_items[e].assigned=0,window.$("#btn-".concat(e)).addClass("btn-hidden"))},changeTypeAssign:function(t,e){var a=this;t.value?(a.assign_items[e].assigned=1,window.$("#btn-".concat(e)).removeClass("btn-hidden")):(a.assign_items[e].assigned=2,window.$("#btn-".concat(e)).addClass("btn-hidden"))},doReAsign:function(){var t=this,e={dossierId:t.detailDossier.dossierId,users:t.data_uyquyen};t.$store.dispatch("postDossierUserAsign",e).then((function(t){s.a.success("Yêu cầu của bạn thực hiện thành công")})).catch((function(t){}))},doExport:function(){var t,e=this;return t=6===e.type||7===e.type||8===e.type||9===e.type?e.toUsersExport.filter((function(t){return Number(t.assigned)>0})):e.assign_items.filter((function(t){return Number(t.assigned)>0})),0===t.length?(e.assignValidate=!1,e.assignValidate):(e.assignValidate=!0,e.assignValidate)},getToUsersExport:function(){var t=this;return t.toUsersExport},getDataDelegacy:function(){var t=this;return t.data_uyquyen},checkUserRole:function(t){var e=this,a=e.$store.getters.getUser.role;if(!a)return!1;var i=a.findIndex((function(e){return e===t}));return i>=0}}},l=c,d=a("2877"),u=a("6544"),h=a.n(u),p=a("b0af"),m=a("99d9"),g=a("ac7c"),v=a("cd55"),f=a("49e2"),_=a("132d"),y=a("a722"),C=a("3a2f"),D=Object(d["a"])(l,i,o,!1,null,null,null);e["a"]=D.exports;h()(D,{VCard:p["a"],VCardText:m["b"],VCheckbox:g["a"],VExpansionPanel:v["a"],VExpansionPanelContent:f["a"],VIcon:_["a"],VLayout:y["a"],VTooltip:C["a"]})},"74ef":function(t,e,a){},"826a":function(t,e,a){"use strict";var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("v-form",{ref:"formChuHoSo",attrs:{"lazy-validation":""},model:{value:t.valid_thongtinchuhoso,callback:function(e){t.valid_thongtinchuhoso=e},expression:"valid_thongtinchuhoso"}},[a("div",[a("div",{staticStyle:{position:"relative"}},[t.showApplicant?t._e():a("v-expansion-panel",{staticClass:"expansion-pl",attrs:{value:[!0],expand:""}},[a("v-expansion-panel-content",[a("div",{attrs:{slot:"header"},slot:"header"},[a("div",{staticClass:"background-triangle-small"},[a("v-icon",{attrs:{size:"18",color:"white"}},[t._v("star_rate")])],1),t._v(" Thông tin chủ hồ sơ")]),a("v-card",[("2"===t.thongTinChuHoSo.userType||1===t.originality&&"business"===t.thongTinChuHoSo.applicantIdType)&&t.bussinessExits?a("v-tooltip",{staticStyle:{position:"absolute",right:"5px","z-index":"101"},attrs:{left:""}},[a("v-btn",{staticClass:"my-0 mt-1",staticStyle:{width:"32px!important",height:"32px!important"},attrs:{slot:"activator",fab:"",icon:"",small:"",dark:"",color:"primary"},nativeOn:{click:function(e){t.getApplicantInfos()}},slot:"activator"},[a("v-icon",{attrs:{dark:""}},[t._v("account_balance")])],1),a("span",[t._v("Đối chiếu thông tin doanh nghiệp")])],1):t._e(),a("v-card-text",{staticClass:"pt-3"},[a("v-layout",{attrs:{wrap:""}},[a("v-flex",{attrs:{xs12:"",sm2:""}},[t.loading?a("content-placeholders",{staticClass:"mt-1"},[a("content-placeholders-text",{attrs:{lines:1}})],1):a("v-subheader",{staticClass:"pl-0"},[t._v(" "+t._s(t.labelSwitch[t.thongTinChuHoSo.userType].cmtnd)+" "),t.requiredOptions["applicantIdNo"]?a("span",{staticStyle:{color:"red"}},[t._v(" *")]):t._e(),t._v(": ")])],1),a("v-flex",{staticStyle:{position:"relative"},attrs:{xs12:"",sm2:""}},[1===t.originality||"1"===t.originality?a("v-text-field",{attrs:{disabled:t.loadingVerify,rules:[t.rules.required,t.rules.varchar100],required:""},on:{input:t.changeApplicantInfos,change:function(e){t.thongTinChuHoSo.applicantIdNo=String(t.thongTinChuHoSo.applicantIdNo).trim()}},model:{value:t.thongTinChuHoSo.applicantIdNo,callback:function(e){t.$set(t.thongTinChuHoSo,"applicantIdNo",e)},expression:"thongTinChuHoSo.applicantIdNo"}}):t._e(),3===t.originality||"3"===t.originality?a("suggestions",{class:t.loadingVerify?"input-group--disabled":"",style:t.loadingVerify?"color:#00000061":"",attrs:{options:t.searchOptions,onItemSelected:t.onSearchItemSelected,onInputChange:t.onInputChange},scopedSlots:t._u([{key:"item",fn:function(e){return a("div",{staticClass:"single-item"},[a("v-list-tile-content",[a("v-list-tile-title",{domProps:{innerHTML:t._s(e.item.applicantName)}}),a("v-list-tile-sub-title",{domProps:{innerHTML:t._s(e.item.applicantIdNo)}})],1)],1)}}]),model:{value:t.thongTinChuHoSo.applicantIdNo,callback:function(e){t.$set(t.thongTinChuHoSo,"applicantIdNo",e)},expression:"thongTinChuHoSo.applicantIdNo"}}):t._e(),3!==t.originality&&"3"!==t.originality||t.applicantIdRequired||t.thongTinChuHoSo.applicantIdNo?t._e():a("span",{staticStyle:{color:"#ff5252","font-size":"12px"}},[t._v("Thông tin bắt buộc")]),3!==t.originality&&"3"!==t.originality||!t.applicantConfig?t._e():a("v-tooltip",{attrs:{top:""}},[a("v-btn",{staticClass:"mx-0 my-0",staticStyle:{position:"absolute",top:"0",right:"-5px"},attrs:{slot:"activator",flat:"",icon:"",color:"primary"},on:{click:function(e){t.showDialogApplicantList("ChuHoSo")}},slot:"activator"},[a("v-icon",{attrs:{size:"14"}},[t._v("fas fa fa-address-card")])],1),a("span",[t._v("Danh sách công dân, tổ chức, doanh nghiệp")])],1)],1),a("v-flex",{attrs:{xs12:"",sm2:""}},[t.loading?a("content-placeholders",{staticClass:"mt-1"},[a("content-placeholders-text",{attrs:{lines:1}})],1):a("v-subheader",{staticClass:"pl-0"},[t._v(" "+t._s(t.labelSwitch[t.thongTinChuHoSo.userType].nguoi_nop)),t.requiredOptions["applicantName"]?a("span",{staticStyle:{color:"red"}},[t._v("  *")]):t._e(),t._v(": ")])],1),a("v-flex",{attrs:{xs12:"",sm6:""}},[t.loading?a("content-placeholders",{staticClass:"mt-1"},[a("content-placeholders-text",{attrs:{lines:1}})],1):a("v-text-field",{attrs:{disabled:t.loadingVerify,rules:t.requiredOptions["applicantName"]?[t.rules.required,t.rules.varchar500]:"",required:t.requiredOptions["applicantName"]},on:{input:t.changeApplicantInfos,change:function(e){t.thongTinChuHoSo.applicantName=String(t.thongTinChuHoSo.applicantName).trim()}},model:{value:t.thongTinChuHoSo.applicantName,callback:function(e){t.$set(t.thongTinChuHoSo,"applicantName",e)},expression:"thongTinChuHoSo.applicantName"}})],1),a("v-flex",{attrs:{xs12:"",sm2:""}},[t.loading?a("content-placeholders",{staticClass:"mt-1"},[a("content-placeholders-text",{attrs:{lines:1}})],1):a("v-subheader",{staticClass:"pl-0"},[t._v("Địa chỉ "),t.requiredOptions["address"]?a("span",{staticStyle:{color:"red"}},[t._v(" *")]):t._e(),t._v(": ")])],1),a("v-flex",{attrs:{xs12:"",sm10:""}},[t.loading?a("content-placeholders",{staticClass:"mt-1"},[a("content-placeholders-text",{attrs:{lines:1}})],1):a("v-textarea",{attrs:{rows:"2",rules:t.requiredOptions["address"]?[t.rules.required,t.rules.varchar500]:"",required:t.requiredOptions["address"]},on:{change:function(e){t.thongTinChuHoSo.address=String(t.thongTinChuHoSo.address).trim()}},model:{value:t.thongTinChuHoSo.address,callback:function(e){t.$set(t.thongTinChuHoSo,"address",e)},expression:"thongTinChuHoSo.address"}})],1),a("v-flex",{attrs:{xs12:"",sm2:""}},[t.loading?a("content-placeholders",{staticClass:"mt-1"},[a("content-placeholders-text",{attrs:{lines:1}})],1):a("v-subheader",{staticClass:"pl-0"},[t._v("Tỉnh/Thành phố "),t.requiredOptions["cityCode"]?a("span",{staticStyle:{color:"red"}},[t._v(" *")]):t._e(),t._v(": ")])],1),a("v-flex",{attrs:{xs12:"",sm2:""}},[t.loading?a("content-placeholders",{staticClass:"mt-1"},[a("content-placeholders-text",{attrs:{lines:1}})],1):a("v-autocomplete",{attrs:{items:t.citys,"item-text":"itemName","item-value":"itemCode","hide-no-data":"",rules:t.requiredOptions["cityCode"]?[t.rules.required]:"",required:t.requiredOptions["cityCode"]},on:{change:t.onChangeCity},model:{value:t.thongTinChuHoSo.cityCode,callback:function(e){t.$set(t.thongTinChuHoSo,"cityCode",e)},expression:"thongTinChuHoSo.cityCode"}})],1),a("v-flex",{attrs:{xs12:"",sm2:""}},[t.loading?a("content-placeholders",{staticClass:"mt-1"},[a("content-placeholders-text",{attrs:{lines:1}})],1):a("v-subheader",{staticClass:"pl-0"},[t._v("Quận/Huyện "),t.requiredOptions["districtCode"]?a("span",{staticStyle:{color:"red"}},[t._v(" *")]):t._e(),t._v(": ")])],1),a("v-flex",{attrs:{xs12:"",sm2:""}},[t.loading?a("content-placeholders",{staticClass:"mt-1"},[a("content-placeholders-text",{attrs:{lines:1}})],1):a("v-autocomplete",{attrs:{items:t.districts,"item-text":"itemName","item-value":"itemCode",rules:t.requiredOptions["districtCode"]?[t.rules.required]:"",required:t.requiredOptions["districtCode"],"hide-no-data":""},on:{change:t.onChangeDistrict},model:{value:t.thongTinChuHoSo.districtCode,callback:function(e){t.$set(t.thongTinChuHoSo,"districtCode",e)},expression:"thongTinChuHoSo.districtCode"}})],1),a("v-flex",{attrs:{xs12:"",sm2:""}},[t.loading?a("content-placeholders",{staticClass:"mt-1"},[a("content-placeholders-text",{attrs:{lines:1}})],1):a("v-subheader",{staticClass:"pl-0"},[t._v("Xã/Phường "),t.requiredOptions["wardCode"]?a("span",{staticStyle:{color:"red"}},[t._v(" *")]):t._e(),t._v(": ")])],1),a("v-flex",{attrs:{xs12:"",sm2:""}},[t.loading?a("content-placeholders",{staticClass:"mt-1"},[a("content-placeholders-text",{attrs:{lines:1}})],1):a("v-autocomplete",{attrs:{items:t.wards,"item-text":"itemName","item-value":"itemCode",rules:t.requiredOptions["wardCode"]?[t.rules.required]:"",required:t.requiredOptions["wardCode"],"hide-no-data":""},on:{change:t.onChangeWard},model:{value:t.thongTinChuHoSo.wardCode,callback:function(e){t.$set(t.thongTinChuHoSo,"wardCode",e)},expression:"thongTinChuHoSo.wardCode"}})],1),a("v-flex",{attrs:{xs12:"",sm2:""}},[t.loading?a("content-placeholders",{staticClass:"mt-1"},[a("content-placeholders-text",{attrs:{lines:1}})],1):a("v-subheader",{staticClass:"pl-0"},[t._v("Số điện thoại "),t.requiredOptions["contactTelNo"]?a("span",{staticStyle:{color:"red"}},[t._v(" *")]):t._e(),t._v(": ")])],1),a("v-flex",{attrs:{xs12:"",sm2:""}},[t.loading?a("content-placeholders",{staticClass:"mt-1"},[a("content-placeholders-text",{attrs:{lines:1}})],1):a("v-text-field",{attrs:{"append-icon":"phone",rules:t.requiredOptions["contactTelNo"]?[t.rules.telNo,t.rules.required]:[t.rules.telNo],required:t.requiredOptions["contactTelNo"]},on:{change:function(e){t.thongTinChuHoSo.contactTelNo=String(t.thongTinChuHoSo.contactTelNo).trim()}},model:{value:t.thongTinChuHoSo.contactTelNo,callback:function(e){t.$set(t.thongTinChuHoSo,"contactTelNo",e)},expression:"thongTinChuHoSo.contactTelNo"}})],1),a("v-flex",{attrs:{xs12:"",sm2:""}},[t.loading?a("content-placeholders",{staticClass:"mt-1"},[a("content-placeholders-text",{attrs:{lines:1}})],1):a("v-subheader",{staticClass:"pl-0"},[t._v("Địa chỉ email "),t.requiredOptions["contactEmail"]?a("span",{staticStyle:{color:"red"}},[t._v(" *")]):t._e(),t._v(": ")])],1),a("v-flex",{attrs:{xs12:"",sm6:""}},[t.loading?a("content-placeholders",{staticClass:"mt-1"},[a("content-placeholders-text",{attrs:{lines:1}})],1):a("v-text-field",{attrs:{rules:t.requiredOptions["contactEmail"]?[t.rules.email,t.rules.required,t.rules.varchar100]:t.thongTinChuHoSo.contactEmail?[t.rules.email,t.rules.varchar100]:"",required:t.requiredOptions["contactEmail"]},on:{change:function(e){t.thongTinChuHoSo.contactEmail=String(t.thongTinChuHoSo.contactEmail).trim()}},model:{value:t.thongTinChuHoSo.contactEmail,callback:function(e){t.$set(t.thongTinChuHoSo,"contactEmail",e)},expression:"thongTinChuHoSo.contactEmail"}})],1)],1)],1)],1)],1)],1),1!==t.originality?a("div",{staticClass:"absolute__btn",style:t.hasOrganization?"width: 420px;":"width: 350px;"},[t.loading?a("content-placeholders",{staticClass:"mt-1"},[a("content-placeholders-text",{attrs:{lines:1}})],1):t._e(),t.loading||t.hasOrganization?t._e():a("v-radio-group",{staticClass:"mt-2",attrs:{row:""},on:{change:t.checkUserType},model:{value:t.thongTinChuHoSo.userType,callback:function(e){t.$set(t.thongTinChuHoSo,"userType",e)},expression:"thongTinChuHoSo.userType"}},[a("v-radio",{attrs:{label:"Công dân",value:"1"}}),a("v-radio",{attrs:{label:"Tổ chức, doanh nghiệp",value:"2"}})],1),!t.loading&&t.hasOrganization?a("v-radio-group",{staticClass:"mt-2",attrs:{row:""},on:{change:t.checkUserType},model:{value:t.thongTinChuHoSo.userType,callback:function(e){t.$set(t.thongTinChuHoSo,"userType",e)},expression:"thongTinChuHoSo.userType"}},[a("v-radio",{attrs:{label:"Công dân",value:"1"}}),a("v-radio",{attrs:{label:"Doanh nghiệp",value:"2"}}),a("v-radio",{attrs:{label:"Cơ quan, tổ chức",value:"3"}})],1):t._e()],1):t._e(),1===t.originality||t.showDelegate?t._e():a("div",{staticStyle:{position:"relative"}},[a("v-expansion-panel",{staticClass:"expansion-pl",attrs:{value:[!0],expand:""}},[a("v-expansion-panel-content",[a("div",{attrs:{slot:"header"},slot:"header"},[a("div",{staticClass:"background-triangle-small"},[a("v-icon",{attrs:{size:"18",color:"white"}},[t._v("star_rate")])],1),t._v(" Thông tin người nộp hồ sơ")]),a("v-card",[a("v-card-text",[a("v-layout",{attrs:{wrap:""}},[a("v-flex",{attrs:{xs12:"",sm2:""}},[t.loading?a("content-placeholders",{staticClass:"mt-1"},[a("content-placeholders-text",{attrs:{lines:1}})],1):a("v-subheader",{staticClass:"pl-0"},[t._v("CMND/Hộ chiếu "),t.requiredOptions["delegateIdNo"]?a("span",{staticStyle:{color:"red"}},[t._v(" *")]):t._e(),t._v(": ")])],1),a("v-flex",{staticStyle:{position:"relative"},attrs:{xs12:"",sm2:""}},[t.loading?a("content-placeholders",{staticClass:"mt-1"},[a("content-placeholders-text",{attrs:{lines:1}})],1):t._e(),1===t.originality||"1"===t.originality?a("v-text-field",{attrs:{rules:[t.rules.required,t.rules.varchar100],required:"",disabled:t.thongTinNguoiNopHoSo.sameUser},on:{change:function(e){t.thongTinNguoiNopHoSo.delegateIdNo=String(t.thongTinNguoiNopHoSo.delegateIdNo).trim()}},model:{value:t.thongTinNguoiNopHoSo.delegateIdNo,callback:function(e){t.$set(t.thongTinNguoiNopHoSo,"delegateIdNo",e)},expression:"thongTinNguoiNopHoSo.delegateIdNo"}}):t._e(),3===t.originality||"3"===t.originality?a("suggestions",{style:t.thongTinNguoiNopHoSo.sameUser?"pointer-events: none;opacity: 0.7":"",attrs:{options:t.searchOptions,onItemSelected:t.onSearchItemSelected1,onInputChange:t.onInputChange1},scopedSlots:t._u([{key:"item",fn:function(e){return a("div",{staticClass:"single-item"},[a("v-list-tile-content",[a("v-list-tile-title",{domProps:{innerHTML:t._s(e.item.applicantName)}}),a("v-list-tile-sub-title",{domProps:{innerHTML:t._s(e.item.applicantIdNo)}})],1)],1)}}]),model:{value:t.thongTinNguoiNopHoSo.delegateIdNo,callback:function(e){t.$set(t.thongTinNguoiNopHoSo,"delegateIdNo",e)},expression:"thongTinNguoiNopHoSo.delegateIdNo"}}):t._e(),3!==t.originality&&"3"!==t.originality||t.applicantIdRequired||t.thongTinNguoiNopHoSo.delegateIdNo?t._e():a("span",{staticStyle:{color:"#ff5252","font-size":"12px"}},[t._v("Thông tin bắt buộc")]),3!==t.originality&&"3"!==t.originality||!t.applicantConfig?t._e():a("v-tooltip",{attrs:{top:""}},[a("v-btn",{staticClass:"mx-0 my-0",staticStyle:{position:"absolute",top:"0",right:"-5px"},attrs:{slot:"activator",flat:"",icon:"",color:"primary"},on:{click:function(e){t.showDialogApplicantList("NguoiNop")}},slot:"activator"},[a("v-icon",{attrs:{size:"14"}},[t._v("fas fa fa-address-card")])],1),a("span",[t._v("Danh sách công dân, tổ chức, doanh nghiệp")])],1)],1),a("v-flex",{attrs:{xs12:"",sm2:""}},[t.loading?a("content-placeholders",{staticClass:"mt-1"},[a("content-placeholders-text",{attrs:{lines:1}})],1):a("v-subheader",{staticClass:"pl-0"},[t._v("Họ và tên "),t.requiredOptions["delegateName"]?a("span",{staticStyle:{color:"red"}},[t._v(" *")]):t._e(),t._v(": ")])],1),a("v-flex",{attrs:{xs12:"",sm6:""}},[t.loading?a("content-placeholders",{staticClass:"mt-1"},[a("content-placeholders-text",{attrs:{lines:1}})],1):a("v-text-field",{attrs:{rules:t.requiredOptions["delegateName"]?[t.rules.required,t.rules.varchar500]:"",required:t.requiredOptions["delegateName"],disabled:t.thongTinNguoiNopHoSo.sameUser},on:{change:function(e){t.thongTinNguoiNopHoSo.delegateName=String(t.thongTinNguoiNopHoSo.delegateName).trim()}},model:{value:t.thongTinNguoiNopHoSo.delegateName,callback:function(e){t.$set(t.thongTinNguoiNopHoSo,"delegateName",e)},expression:"thongTinNguoiNopHoSo.delegateName"}})],1),a("v-flex",{attrs:{xs12:"",sm2:""}},[t.loading?a("content-placeholders",{staticClass:"mt-1"},[a("content-placeholders-text",{attrs:{lines:1}})],1):a("v-subheader",{staticClass:"pl-0"},[t._v("Địa chỉ "),t.requiredOptions["delegateAddress"]?a("span",{staticStyle:{color:"red"}},[t._v(" *")]):t._e(),t._v(": ")])],1),a("v-flex",{attrs:{xs12:"",sm10:""}},[t.loading?a("content-placeholders",{staticClass:"mt-1"},[a("content-placeholders-text",{attrs:{lines:1}})],1):a("v-textarea",{attrs:{rows:"2",rules:t.requiredOptions["delegateAddress"]?[t.rules.required,t.rules.varchar500]:"",required:t.requiredOptions["delegateAddress"],disabled:t.thongTinNguoiNopHoSo.sameUser},on:{change:function(e){t.thongTinNguoiNopHoSo.delegateAddress=String(t.thongTinNguoiNopHoSo.delegateAddress).trim()}},model:{value:t.thongTinNguoiNopHoSo.delegateAddress,callback:function(e){t.$set(t.thongTinNguoiNopHoSo,"delegateAddress",e)},expression:"thongTinNguoiNopHoSo.delegateAddress"}})],1),a("v-flex",{attrs:{xs12:"",sm2:""}},[t.loading?a("content-placeholders",{staticClass:"mt-1"},[a("content-placeholders-text",{attrs:{lines:1}})],1):a("v-subheader",{staticClass:"pl-0"},[t._v("Tỉnh/Thành phố "),t.requiredOptions["delegateCityCode"]?a("span",{staticStyle:{color:"red"}},[t._v(" *")]):t._e(),t._v(": ")])],1),a("v-flex",{attrs:{xs12:"",sm2:""}},[t.loading?a("content-placeholders",{staticClass:"mt-1"},[a("content-placeholders-text",{attrs:{lines:1}})],1):a("v-autocomplete",{attrs:{items:t.citys,"item-text":"itemName","item-value":"itemCode",rules:t.requiredOptions["delegateCityCode"]?[t.rules.required]:"",required:t.requiredOptions["delegateCityCode"],disabled:t.thongTinNguoiNopHoSo.sameUser,"hide-no-data":""},on:{change:t.onChangeDelegateCity},model:{value:t.thongTinNguoiNopHoSo.delegateCityCode,callback:function(e){t.$set(t.thongTinNguoiNopHoSo,"delegateCityCode",e)},expression:"thongTinNguoiNopHoSo.delegateCityCode"}})],1),a("v-flex",{attrs:{xs12:"",sm2:""}},[t.loading?a("content-placeholders",{staticClass:"mt-1"},[a("content-placeholders-text",{attrs:{lines:1}})],1):a("v-subheader",{staticClass:"pl-0"},[t._v("Quận/Huyện "),t.requiredOptions["delegateDistrictCode"]?a("span",{staticStyle:{color:"red"}},[t._v(" *")]):t._e(),t._v(": ")])],1),a("v-flex",{attrs:{xs12:"",sm2:""}},[t.loading?a("content-placeholders",{staticClass:"mt-1"},[a("content-placeholders-text",{attrs:{lines:1}})],1):a("v-autocomplete",{attrs:{items:t.delegateDistricts,"item-text":"itemName","item-value":"itemCode",rules:t.requiredOptions["delegateDistrictCode"]?[t.rules.required]:"",required:t.requiredOptions["delegateDistrictCode"],disabled:t.thongTinNguoiNopHoSo.sameUser,"hide-no-data":""},on:{change:t.onChangeDelegateDistrict},model:{value:t.thongTinNguoiNopHoSo.delegateDistrictCode,callback:function(e){t.$set(t.thongTinNguoiNopHoSo,"delegateDistrictCode",e)},expression:"thongTinNguoiNopHoSo.delegateDistrictCode"}})],1),a("v-flex",{attrs:{xs12:"",sm2:""}},[t.loading?a("content-placeholders",{staticClass:"mt-1"},[a("content-placeholders-text",{attrs:{lines:1}})],1):a("v-subheader",{staticClass:"pl-0"},[t._v("Xã/Phường "),t.requiredOptions["delegateWardCode"]?a("span",{staticStyle:{color:"red"}},[t._v(" *")]):t._e(),t._v(": ")])],1),a("v-flex",{attrs:{xs12:"",sm2:""}},[t.loading?a("content-placeholders",{staticClass:"mt-1"},[a("content-placeholders-text",{attrs:{lines:1}})],1):a("v-autocomplete",{attrs:{items:t.delegateWards,"item-text":"itemName","item-value":"itemCode",rules:t.requiredOptions["delegateWardCode"]?[t.rules.required]:"",required:t.requiredOptions["delegateWardCode"],disabled:t.thongTinNguoiNopHoSo.sameUser,"hide-no-data":""},model:{value:t.thongTinNguoiNopHoSo.delegateWardCode,callback:function(e){t.$set(t.thongTinNguoiNopHoSo,"delegateWardCode",e)},expression:"thongTinNguoiNopHoSo.delegateWardCode"}})],1),a("v-flex",{attrs:{xs12:"",sm2:""}},[t.loading?a("content-placeholders",{staticClass:"mt-1"},[a("content-placeholders-text",{attrs:{lines:1}})],1):a("v-subheader",{staticClass:"pl-0"},[t._v("Số điện thoại "),t.requiredOptions["delegateTelNo"]?a("span",{staticStyle:{color:"red"}},[t._v(" *")]):t._e(),t._v(": ")])],1),a("v-flex",{attrs:{xs12:"",sm2:""}},[t.loading?a("content-placeholders",{staticClass:"mt-1"},[a("content-placeholders-text",{attrs:{lines:1}})],1):a("v-text-field",{attrs:{"append-icon":"phone",rules:t.requiredOptions["delegateTelNo"]?[t.rules.telNo,t.rules.required]:[t.rules.telNo],required:t.requiredOptions["delegateTelNo"],disabled:t.thongTinNguoiNopHoSo.sameUser},on:{change:function(e){t.thongTinNguoiNopHoSo.delegateName=String(t.thongTinNguoiNopHoSo.delegateName).trim()}},model:{value:t.thongTinNguoiNopHoSo.delegateTelNo,callback:function(e){t.$set(t.thongTinNguoiNopHoSo,"delegateTelNo",e)},expression:"thongTinNguoiNopHoSo.delegateTelNo"}})],1),a("v-flex",{attrs:{xs12:"",sm2:""}},[t.loading?a("content-placeholders",{staticClass:"mt-1"},[a("content-placeholders-text",{attrs:{lines:1}})],1):a("v-subheader",{staticClass:"pl-0"},[t._v("Địa chỉ email "),t.requiredOptions["delegateEmail"]?a("span",{staticStyle:{color:"red"}},[t._v(" *")]):t._e(),t._v(": ")])],1),a("v-flex",{attrs:{xs12:"",sm6:""}},[t.loading?a("content-placeholders",{staticClass:"mt-1"},[a("content-placeholders-text",{attrs:{lines:1}})],1):a("v-text-field",{attrs:{rules:t.requiredOptions["delegateEmail"]?[t.rules.email,t.rules.required]:t.thongTinNguoiNopHoSo.delegateEmail?[t.rules.email]:"",required:t.requiredOptions["delegateEmail"],disabled:t.thongTinNguoiNopHoSo.sameUser},on:{change:function(e){t.thongTinNguoiNopHoSo.delegateEmail=String(t.thongTinNguoiNopHoSo.delegateEmail).trim()}},model:{value:t.thongTinNguoiNopHoSo.delegateEmail,callback:function(e){t.$set(t.thongTinNguoiNopHoSo,"delegateEmail",e)},expression:"thongTinNguoiNopHoSo.delegateEmail"}})],1)],1)],1)],1)],1)],1),t.showApplicant?t._e():a("div",{staticClass:"absolute__btn",staticStyle:{width:"200px","margin-top":"4px"}},[t.loading?a("content-placeholders",{staticClass:"mt-1"},[a("content-placeholders-text",{attrs:{lines:1}})],1):a("v-checkbox",{staticClass:"mt-1",attrs:{label:"Là chủ hồ sơ"},model:{value:t.thongTinNguoiNopHoSo.sameUser,callback:function(e){t.$set(t.thongTinNguoiNopHoSo,"sameUser",e)},expression:"thongTinNguoiNopHoSo.sameUser"}})],1)],1)],1)])]),a("v-dialog",{attrs:{scrollable:"",persistent:"","max-width":"700px"},model:{value:t.dialog_applicantInfos,callback:function(e){t.dialog_applicantInfos=e},expression:"dialog_applicantInfos"}},[a("v-card",[a("v-toolbar",{attrs:{dark:"",color:"primary"}},[a("v-toolbar-title",[t._v("Thông tin doanh nghiệp")]),a("v-spacer"),a("v-btn",{attrs:{icon:"",dark:""},nativeOn:{click:function(e){t.dialog_applicantInfos=!1}}},[a("v-icon",[t._v("close")])],1)],1),a("v-card-text",{staticClass:"py-1"},[a("v-layout",{staticClass:"py-1 align-center",attrs:{wrap:""}},[a("v-flex",{staticClass:"px-2",attrs:{xs12:""}},[a("div",{staticClass:"my-2"},[a("span",{staticClass:"text-bold"},[t._v("Tên tổ chức, doanh nghiệp: ")]),a("span",[t._v(t._s(t.applicantInfos.applicantName))])])]),a("v-flex",{staticClass:"px-2",attrs:{xs12:""}},[a("div",{staticClass:"my-2"},[a("span",{staticClass:"text-bold"},[t._v("Mã số thuế: ")]),a("span",[t._v(t._s(t.applicantInfos.applicantIdNo))])])]),a("v-flex",{staticClass:"px-2",attrs:{xs12:""}},[a("div",{staticClass:"my-2"},[a("span",{staticClass:"text-bold"},[t._v("Loại hình doanh nghiệp: ")]),a("span",[t._v(t._s(t.applicantInfos.companyType))])])]),a("v-flex",{staticClass:"px-2",attrs:{xs12:""}},[a("div",{staticClass:"my-2"},[a("span",{staticClass:"text-bold"},[t._v("Địa chỉ:")]),a("span",[t._v(t._s(t.applicantInfos.address))])])]),a("v-flex",{staticClass:"px-2",attrs:{xs12:""}},[a("div",{staticClass:"my-2"},[a("span",{staticClass:"text-bold"},[t._v("Người đại diện: ")]),a("span",[t._v(t._s(t.applicantInfos.representatives))])])]),a("v-flex",{staticClass:"px-2",attrs:{xs12:""}},[a("div",{staticClass:"my-2"},[a("span",{staticClass:"text-bold"},[t._v("Tình trạng: ")]),a("span",[t._v(t._s(t.applicantInfos.companyStatus))])])])],1)],1),a("v-card-actions",[a("v-spacer"),a("v-btn",{staticClass:"mr-3",attrs:{color:"primary"},nativeOn:{click:function(e){t.dialog_applicantInfos=!1}}},[a("v-icon",[t._v("clear")]),t._v("  \n          Thoát\n        ")],1)],1)],1)],1),a("v-dialog",{attrs:{scrollable:"",persistent:"","max-width":"1200px"},model:{value:t.dialog_applicantList,callback:function(e){t.dialog_applicantList=e},expression:"dialog_applicantList"}},[a("v-card",[a("v-toolbar",{attrs:{dark:"",color:"primary"}},[a("v-toolbar-title",[t._v("Danh sách công dân, tổ chức, doanh nghiệp")]),a("v-spacer"),a("v-btn",{attrs:{icon:"",dark:""},nativeOn:{click:function(e){t.dialog_applicantList=!1}}},[a("v-icon",[t._v("close")])],1)],1),a("v-card-text",{staticClass:"py-1"},[a("v-layout",{staticClass:"mt-3",attrs:{wrap:""}},[a("v-flex",{staticClass:"pr-2 input-group--text-field-box",attrs:{xs12:"",sm7:""}},[a("v-text-field",{attrs:{label:"Tìm kiếm theo tên người dùng","append-icon":"search",box:"","clear-icon":"clear",clearable:""},on:{keyup:function(e){return"button"in e||!t._k(e.keyCode,"enter",13,e.key,"Enter")?t.searchKeyword(e):null},"click:clear":t.clearKeySearch,"click:append":t.searchKeyword},model:{value:t.keySearch,callback:function(e){t.keySearch=e},expression:"keySearch"}})],1),a("v-flex",{staticClass:"pl-2 pr-2",attrs:{xs12:"",sm5:""}},[a("div",{staticStyle:{position:"relative"}},[a("v-radio-group",{staticClass:"mt-1",attrs:{row:""},on:{change:t.changeTypeSearch},model:{value:t.typeSearch,callback:function(e){t.typeSearch=e},expression:"typeSearch"}},[a("v-radio",{attrs:{label:"Tất cả",value:""}}),a("v-radio",{attrs:{label:"Công dân",value:"citizen"}}),a("v-radio",{attrs:{label:"Doanh nghiệp",value:"business"}}),a("v-radio",{attrs:{label:"Cơ quan, tổ chức",value:"organization"}})],1)],1)])],1),a("v-data-table",{staticClass:"table-landing table-bordered",staticStyle:{"border-left":"1px solid #dedede"},attrs:{headers:t.applicantListHeader,items:t.applicantLists,"hide-actions":""},scopedSlots:t._u([{key:"items",fn:function(e){return[a("tr",{class:{active:e.index%2==1},staticStyle:{cursor:"pointer"}},[a("td",{staticClass:"text-xs-center",staticStyle:{width:"50px",height:"36px"}},[t.loadingTable?a("content-placeholders",[a("content-placeholders-text",{attrs:{lines:1}})],1):a("div",[a("span",[t._v(t._s(t.applicantPage*t.numberPerPage-t.numberPerPage+e.index+1))])])],1),a("td",{staticClass:"text-xs-left",staticStyle:{height:"36px"}},[t.loadingTable?a("content-placeholders",[a("content-placeholders-text",{attrs:{lines:1}})],1):a("div",[a("span",[t._v(t._s(e.item.applicantName))])])],1),a("td",{staticClass:"text-xs-left",staticStyle:{height:"36px"}},[t.loadingTable?a("content-placeholders",[a("content-placeholders-text",{attrs:{lines:1}})],1):a("div",[a("span",[t._v(t._s("citizen"===e.item.applicantIdType?"Công dân":"business"===e.item.applicantIdType?"Doanh nghiệp":"Cơ quan, tổ chức"))])])],1),a("td",{staticClass:"text-xs-left",staticStyle:{height:"36px"}},[t.loadingTable?a("content-placeholders",[a("content-placeholders-text",{attrs:{lines:1}})],1):a("div",[a("span",[t._v(t._s(e.item.applicantIdNo))])])],1),a("td",{staticClass:"text-xs-left",staticStyle:{height:"36px","min-width":"200px"}},[t.loadingTable?a("content-placeholders",[a("content-placeholders-text",{attrs:{lines:1}})],1):a("div",[a("span",[t._v(t._s(t.fullAddress(e.item["address"],e.item["cityName"],e.item["districtName"],e.item["wardName"])))])])],1),a("td",{staticClass:"text-xs-center",staticStyle:{height:"36px",width:"100px"}},[t.loadingTable?a("content-placeholders",[a("content-placeholders-text",{attrs:{lines:1}})],1):t._e(),t.loadingTable?t._e():a("v-tooltip",{attrs:{top:""}},[a("v-btn",{staticClass:"mx-0 my-0",attrs:{slot:"activator",color:"green",flat:"",icon:""},on:{click:function(a){t.showEditApplicant(e.item)}},slot:"activator"},[a("v-icon",[t._v("edit")])],1),a("span",[t._v("Sửa thông tin")])],1),t.loadingTable?t._e():a("v-tooltip",{attrs:{top:""}},[a("v-btn",{staticClass:"mx-0 my-0",attrs:{slot:"activator",color:"blue",flat:"",icon:""},on:{click:function(a){t.bindInfoApplicant(e.item)}},slot:"activator"},[a("v-icon",[t._v("beenhere")])],1),a("span",[t._v("Sử dụng")])],1)],1)])]}}])}),t.totalApplicantSearch>t.numberPerPage?a("div",{staticClass:"my-2"},[a("div",{staticClass:"text-xs-right layout wrap",staticStyle:{position:"relative"}},[a("div",{staticClass:"flex pagging-table px-2"},[a("tiny-pagination",{attrs:{total:t.totalApplicantSearch,page:t.applicantPage,numberPerPage:t.numberPerPage,nameRecord:"người dùng","custom-class":"custom-tiny-class"},on:{"tiny:change-page":t.changePage}})],1)])]):t._e()],1),a("v-card-actions",[a("v-spacer"),a("v-btn",{staticClass:"mr-4",attrs:{color:"primary"},nativeOn:{click:function(e){t.dialog_applicantList=!1}}},[a("v-icon",[t._v("clear")]),t._v("  \n          Thoát\n        ")],1)],1)],1)],1),a("v-dialog",{attrs:{scrollable:"",persistent:"","max-width":"700px"},model:{value:t.dialog_editApplicant,callback:function(e){t.dialog_editApplicant=e},expression:"dialog_editApplicant"}},[a("v-card",[a("v-toolbar",{attrs:{dark:"",color:"primary"}},[a("v-toolbar-title",[t._v(t._s(t.titleEdit))]),a("v-spacer"),a("v-btn",{attrs:{icon:"",dark:""},nativeOn:{click:function(e){t.dialog_editApplicant=!1}}},[a("v-icon",[t._v("close")])],1)],1),a("v-card-text",{staticClass:"py-1"},[a("v-form",{ref:"form",staticClass:"py-3 px-0 grid-list",attrs:{"lazy-validation":""},model:{value:t.valid,callback:function(e){t.valid=e},expression:"valid"}},[a("v-layout",{staticClass:"px-0 py-3",attrs:{row:"",wrap:""}},[a("v-flex",{attrs:{xs12:"",sm12:""}},[a("v-text-field",{attrs:{box:"",rules:[function(t){return!!t||"Trường dữ liệu bắt buộc"}],required:""},on:{change:function(e){t.applicantEdit["applicantName"]=String(t.applicantEdit["applicantName"]).trim()}},model:{value:t.applicantEdit["applicantName"],callback:function(e){t.$set(t.applicantEdit,"applicantName",e)},expression:"applicantEdit['applicantName']"}},[a("template",{slot:"label"},["business"===t.applicantEdit["applicantIdType"]?a("span",[t._v("Tên doanh nghiệp")]):t._e(),"citizen"===t.applicantEdit["applicantIdType"]?a("span",[t._v("Họ tên")]):t._e(),"organization"===t.applicantEdit["applicantIdType"]?a("span",[t._v("Tên cơ quan, tổ chức")]):t._e(),a("span",{staticClass:"red--text darken-3"},[t._v(" *")])])],2)],1),a("v-flex",{attrs:{xs12:"",sm6:""}},[a("v-text-field",{staticStyle:{"pointer-events":"none"},attrs:{box:"",rules:[function(t){return!!t||"Trường dữ liệu bắt buộc"}],required:"",disabled:""},on:{change:function(e){t.applicantEdit["applicantIdNo"]=t.applicantEdit["applicantIdNo"].trim()}},model:{value:t.applicantEdit["applicantIdNo"],callback:function(e){t.$set(t.applicantEdit,"applicantIdNo",e)},expression:"applicantEdit['applicantIdNo']"}},[a("template",{slot:"label"},["business"===t.applicantEdit["applicantIdType"]?a("span",[t._v("Mã số thuế")]):t._e(),"citizen"===t.applicantEdit["applicantIdType"]?a("span",[t._v("Số CMND/ Căn cước")]):t._e(),"organization"===t.applicantEdit["applicantIdType"]?a("span",[t._v("Mã cơ quan, tổ chức")]):t._e(),a("span",{staticClass:"red--text darken-3"},[t._v(" *")])])],2)],1),a("v-flex",{attrs:{xs12:"",sm6:""}},[a("v-menu",{ref:"menuBirthDate",attrs:{"close-on-content-click":!1,"nudge-right":40,lazy:"",transition:"fade-transition","offset-y":"","full-width":"","max-width":"290px","min-width":"290px"},model:{value:t.menuBirthDate,callback:function(e){t.menuBirthDate=e},expression:"menuBirthDate"}},[a("v-text-field",{attrs:{slot:"activator",box:"","append-icon":"event",label:"Ngày cấp"},on:{change:function(e){t.applicantEdit["applicantIdDate"]=String(t.applicantEdit["applicantIdDate"]).trim()},blur:function(e){t.ngayCap=t.parseDate(t.applicantEdit["applicantIdDate"])}},slot:"activator",model:{value:t.applicantEdit["applicantIdDate"],callback:function(e){t.$set(t.applicantEdit,"applicantIdDate",e)},expression:"applicantEdit['applicantIdDate']"}}),a("v-date-picker",{ref:"picker",attrs:{min:"1950-01-01",max:t.getMaxdate(),"first-day-of-week":1,locale:"vi","no-title":""},on:{input:t.changeBirthDate},model:{value:t.ngayCap,callback:function(e){t.ngayCap=e},expression:"ngayCap"}})],1)],1),a("v-flex",{attrs:{xs12:"",sm6:""}},[a("v-text-field",{attrs:{label:"Số điện thoại",box:""},on:{change:function(e){t.applicantEdit["contactTelNo"]=String(t.applicantEdit["contactTelNo"]).trim()}},model:{value:t.applicantEdit["contactTelNo"],callback:function(e){t.$set(t.applicantEdit,"contactTelNo",e)},expression:"applicantEdit['contactTelNo']"}})],1),a("v-flex",{attrs:{xs12:"",sm6:""}},[a("v-text-field",{attrs:{label:"Thư điện tử",box:"",disabled:""},on:{change:function(e){t.applicantEdit["contactEmail"]=String(t.applicantEdit["contactEmail"]).trim()}},model:{value:t.applicantEdit["contactEmail"],callback:function(e){t.$set(t.applicantEdit,"contactEmail",e)},expression:"applicantEdit['contactEmail']"}})],1),a("v-flex",{attrs:{xs12:"",sm12:""}},[a("v-text-field",{attrs:{label:"Địa chỉ",box:"",clearable:""},on:{change:function(e){t.applicantEdit["address"]=String(t.applicantEdit["address"]).trim()}},model:{value:t.applicantEdit["address"],callback:function(e){t.$set(t.applicantEdit,"address",e)},expression:"applicantEdit['address']"}})],1),a("v-flex",{attrs:{xs12:"",sm4:""}},[a("v-autocomplete",{attrs:{items:t.cityItems,"hide-no-data":"",label:"Tỉnh/thành phố","item-text":"itemName","item-value":"itemCode","hide-selected":!0,box:""},on:{change:function(e){t.onChangeCityEditApplicant(e)}},model:{value:t.applicantEdit["cityCode"],callback:function(e){t.$set(t.applicantEdit,"cityCode",e)},expression:"applicantEdit['cityCode']"}})],1),a("v-flex",{attrs:{xs12:"",sm4:""}},[a("v-autocomplete",{attrs:{items:t.districtItems,"hide-no-data":"",label:"Quận/huyện","item-text":"itemName","item-value":"itemCode","hide-selected":!0,box:""},on:{change:function(e){t.onChangeDistrictEditApplicant(e)}},model:{value:t.applicantEdit["districtCode"],callback:function(e){t.$set(t.applicantEdit,"districtCode",e)},expression:"applicantEdit['districtCode']"}})],1),a("v-flex",{attrs:{xs12:"",sm4:""}},[a("v-autocomplete",{attrs:{label:"Xã/phường","hide-no-data":"",items:t.wardItems,"item-text":"itemName","item-value":"itemCode","hide-selected":!0,box:""},on:{change:function(e){t.onChangeWardEditApplicant(e)}},model:{value:t.applicantEdit["wardCode"],callback:function(e){t.$set(t.applicantEdit,"wardCode",e)},expression:"applicantEdit['wardCode']"}})],1)],1)],1)],1),a("v-card-actions",[a("v-spacer"),a("v-btn",{staticClass:"mr-2",attrs:{color:"primary"},nativeOn:{click:function(e){return t.exitDialogEditApplicant(e)}}},[a("v-icon",[t._v("clear")]),t._v("  \n          Thoát\n        ")],1),a("v-btn",{staticClass:"mr-3",attrs:{color:"primary"},nativeOn:{click:function(e){return t.updateApplicant(e)}}},[a("v-icon",[t._v("save")]),t._v("  \n          Cập nhật\n        ")],1)],1)],1)],1)],1)},o=[],n=a("bc3a"),s=a.n(n),r=a("c4f6"),c=a.n(r),l=a("854a"),d=a.n(l),u=a("e722");function h(t,e){return g(t)||m(t,e)||p()}function p(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function m(t,e){var a=[],i=!0,o=!1,n=void 0;try{for(var s,r=t[Symbol.iterator]();!(i=(s=r.next()).done);i=!0)if(a.push(s.value),e&&a.length===e)break}catch(c){o=!0,n=c}finally{try{i||null==r["return"]||r["return"]()}finally{if(o)throw n}}return a}function g(t){if(Array.isArray(t))return t}d.a.options={closeButton:!0,timeOut:"5000"};var v={components:{suggestions:c.a,"tiny-pagination":u["a"]},props:["requiredConfig","showApplicant","showDelegate","formCode","applicantIdRequired"],data:function(){return{checkDelegateIdNo:!1,checkApplicantId:!1,requiredOptions:{applicantIdNo:!0,applicantName:!0,address:!0,cityCode:!0,districtCode:!0,wardCode:!0,contactTelNo:!0,contactEmail:!1,delegateIdNo:!0,delegateName:!0,delegateAddress:!0,delegateCityCode:!0,delegateDistrictCode:!0,delegateWardCode:!0,delegateTelNo:!0,delegateEmail:!1},valid_thongtinchuhoso:!1,loadingVerify:!1,citys:[],delegateDistricts:[],districts:[],delegateWards:[],wards:[],applicantItems:[],applicantItems2:[],applicantIdNo:"",applicantLists:[],applicantListHeader:[{text:"STT",align:"center",sortable:!1},{text:"Tên công dân, tổ chức, doanh nghiệp",align:"center",sortable:!1},{text:"Loại thông tin người dùng",align:"center",sortable:!1},{text:"Số CMND/ căn cước, mã tổ chức, doanh nghiệp",align:"center",sortable:!1},{text:"Địa chỉ",align:"center",sortable:!1},{text:"Thao tác",align:"center",sortable:!1}],labelSwitch:{1:{cmtnd:"CMND/ Hộ chiếu",nguoi_nop:"Họ và tên"},2:{cmtnd:"Mã số thuế",nguoi_nop:"Tên tổ chức, doanh nghiệp"}},thongTinChuHoSo:{userType:"1",cityCode:"",districtCode:"",wardCode:"",applicantIdNo:"",applicantIdType:"",contactEmail:"",contactTelNo:"",contactName:"",address:"",applicantName:""},thongTinNguoiNopHoSo:{sameUser:!1,delegateName:"",delegateCityCode:"",delegateAddress:"",delegateDistrictCode:"",delegateWardCode:"",delegateEmail:"",delegateTelNo:"",delegateIdNo:""},applicantInfos:{applicantName:"",applicantIdNo:"",companyType:"",companyStatus:"",address:"",representatives:""},numberPerPage:10,applicantPage:1,totalApplicantSearch:0,bussinessExits:!1,validBussinessInfos:!0,messageCheckApplicant:"",search:null,search2:null,searchQuery:"",selectedSearchItem:null,searchOptions:{},functionTimeOut:null,dialog_applicantInfos:!1,dialog_applicantList:!1,applicantConfig:!1,titleEdit:"Thông tin công dân, tổ chức, doanh nghiệp",applicantEdit:"",dialog_editApplicant:!1,rules:{required:function(t){return!!t||"Thông tin bắt buộc"},cmndHoChieu:function(t){var e=/^(?![0-9]{4,12})[0-9a-zA-Z]{4,12}$/;return e.test(t)||"Gồm các ký tự 0-9, a-z và ít nhất 4-12 ký tự"},email:function(t){t=t.trim();var e=/^(([^<>()[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/;return e.test(t)||"Địa chỉ Email không hợp lệ"},passWord:function(t){var e=/^(?![0-9]{6,})[0-9a-zA-Z]{6,}$/;return e.test(t)||"Gồm các ký tự 0-9, a-z và ít nhất 6 ký tự"},telNo:function(t){var e=/^([0-9]{0,})$/;return"string"===typeof t&&(t=t.trim()),e.test(t)||"Gồm các ký tự 0-9"},varchar50:function(t){return!t||(t=String(t).trim(),t.length<=50||"Không được nhập quá 50 ký tự")},varchar100:function(t){return!t||(t=String(t).trim(),t.length<=100||"Không được nhập quá 100 ký tự")},varchar255:function(t){return!t||(t=String(t).trim(),t.length<=255||"Không được nhập quá 255 ký tự")},varchar500:function(t){return!t||(t=String(t).trim(),t.length<=500||"Không được nhập quá 500 ký tự")},varchar5000:function(t){return!t||(t=String(t).trim(),t.length<=5e3||"Không được nhập quá 5000 ký tự")}},typeSearch:"",keySearch:"",menuBirthDate:!1,ngayCap:null,toDateFormatted:null,cityItems:[],districtItems:[],wardItems:[],valid:!1,loadingTable:!1,hasOrganization:!1}},computed:{loading:function(){return this.$store.getters.loading},forGroupDossier:function(){return this.$store.getters.getForGroupDossier},originality:function(){var t=this;return console.log("originality",t.getOriginality()),t.getOriginality()},viaPostal:function(){return this.$store.getters.viaPostal},dichVuChuyenPhatKetQua:function(){return this.$store.getters.dichVuChuyenPhatKetQua},ThongTinChuHoSoBindChuyenPhat:function(){var t={cityCode:this.thongTinChuHoSo.cityCode,address:this.thongTinChuHoSo.address,districtCode:this.thongTinChuHoSo.districtCode,wardCode:this.thongTinChuHoSo.wardCode,contactTelNo:this.thongTinChuHoSo.contactTelNo};return t}},created:function(){var t=this;t.formCode,t.hasOrganization&&(t.labelSwitch={1:{cmtnd:"CMND/ Hộ chiếu",nguoi_nop:"Họ và tên"},2:{cmtnd:"Mã số thuế",nguoi_nop:"Tên doanh nghiệp"},3:{cmtnd:"Mã cơ quan, tổ chức",nguoi_nop:"Tên cơ quan, tổ chức"}}),t.requiredConfig&&t.requiredConfig["applicant"]&&(t.requiredOptions=Object.assign(t.requiredOptions,t.requiredConfig["applicant"]))},watch:{thongTinChuHoSo:{handler:function(t){var e=this;t["applicantIdNo"]=String(t["applicantIdNo"]).trim(),t.applicantIdNo||(e.checkApplicantId=!0),e.$store.commit("setThongTinChuHoSo",t);var a={delegateName:t.applicantName,delegateCityCode:t.cityCode,delegateAddress:t.address,delegateDistrictCode:t.districtCode,delegateWardCode:t.wardCode,delegateEmail:t.contactEmail,delegateTelNo:t.contactTelNo,delegateIdNo:t.applicantIdNo};e.thongTinNguoiNopHoSo.sameUser&&(t.cityCode&&t.cityCode!==e.thongTinNguoiNopHoSo["delegateCityCode"]&&e.onChangeDelegateCity(t.cityCode),t.districtCode&&t.districtCode!==e.thongTinNguoiNopHoSo["delegateDistrictCode"]&&e.onChangeDelegateDistrict(t.districtCode),e.thongTinNguoiNopHoSo=Object.assign(e.thongTinNguoiNopHoSo,a))},deep:!0},thongTinNguoiNopHoSo:{handler:function(t){var e=this,a=e.thongTinChuHoSo;if(t["delegateIdNo"]=String(t["delegateIdNo"]).trim(),t.delegateIdNo||(e.checkDelegateIdNo=!0),t.sameUser){var i={delegateName:a.applicantName,delegateCityCode:a.cityCode,delegateAddress:a.address,delegateDistrictCode:a.districtCode,delegateWardCode:a.wardCode,delegateEmail:a.contactEmail,delegateTelNo:a.contactTelNo,delegateIdNo:a.applicantIdNo};a.cityCode&&a.cityCode!==e.thongTinNguoiNopHoSo["delegateCityCode"]&&e.onChangeDelegateCity(a.cityCode),a.districtCode&&a.districtCode!==e.thongTinNguoiNopHoSo["delegateDistrictCode"]&&e.onChangeDelegateDistrict(a.districtCode),e.thongTinNguoiNopHoSo=Object.assign(e.thongTinNguoiNopHoSo,i)}else this.$store.dispatch("resetThongTinNguoiNopHoSo")},deep:!0},ThongTinChuHoSoBindChuyenPhat:function(t){this.$store.commit("setThongTinChuHoSoBindChuyenPhat",t)},search:function(t){t&&this.querySelections(t)},search2:function(t){t&&this.querySelections2(t)},typeSearch:function(t){var e=this;""===t?(e.applicantListHeader[1].text="Tên công dân, tổ chức, doanh nghiệp",e.applicantListHeader[3].text="Số CMND/ căn cước, mã số thuế doanh nghiệp"):"citizen"===t?(e.applicantListHeader[1].text="Tên công dân",e.applicantListHeader[3].text="Số CMND/ căn cước"):"business"===t?(e.applicantListHeader[1].text="Tên doanh nghiệp",e.applicantListHeader[3].text="Mã số thuế doanh nghiệp"):(e.applicantListHeader[1].text="Tên cơ quan, tổ chức",e.applicantListHeader[3].text="Mã cơ quan, tổ chức")},ngayCap:function(t){this.toDateFormatted=this.formatDate(t),this.applicantEdit["applicantIdDate"]=this.toDateFormatted}},methods:{initData:function(t){var e=this;e.$store.commit("setApplicantId",t.applicantIdNo);var a={delegateName:t.delegateName,delegateCityCode:t.delegateCityCode,delegateAddress:t.delegateAddress,delegateDistrictCode:t.delegateDistrictCode,delegateWardCode:t.delegateWardCode,delegateEmail:t.delegateEmail,delegateTelNo:t.delegateTelNo,delegateIdNo:t.delegateIdNo},i=Object.assign(e.thongTinNguoiNopHoSo,a);e.thongTinNguoiNopHoSo=i;var o="1";"business"===t.applicantIdType?o="2":"organization"===t.applicantIdType&&(o="3");var n={userType:o,cityCode:t.cityCode,districtCode:t.districtCode,wardCode:t.wardCode,applicantIdNo:t.applicantIdNo,applicantIdType:t.applicantIdType,contactEmail:t.contactEmail,contactName:t.contactName,contactTelNo:t.contactTelNo,address:t.address,applicantName:t.applicantName,cityName:t.cityName,districtName:t.districtName,wardName:t.wardName},s=Object.assign(e.thongTinChuHoSo,n);e.thongTinChuHoSo=s,e.checkApplicantInfos(),e.$nextTick((function(){var a={collectionCode:"ADMINISTRATIVE_REGION",level:0,parent:0};e.$store.getters.getDictItems(a).then((function(t){e.citys=t.data})),setTimeout((function(){t.cityCode&&e.$store.getters.getDictItems({collectionCode:"ADMINISTRATIVE_REGION",level:1,parent:t.cityCode}).then((function(t){e.districts=t.data})),t.districtCode&&e.$store.getters.getDictItems({collectionCode:"ADMINISTRATIVE_REGION",level:1,parent:t.districtCode}).then((function(t){e.wards=t.data})),t.delegateCityCode&&e.$store.getters.getDictItems({collectionCode:"ADMINISTRATIVE_REGION",level:1,parent:t.delegateCityCode}).then((function(t){e.delegateDistricts=t.data})),t.delegateDistrictCode&&e.$store.getters.getDictItems({collectionCode:"ADMINISTRATIVE_REGION",level:1,parent:t.delegateDistrictCode}).then((function(t){e.delegateWards=t.data}))}),200)})),e.$refs.formChuHoSo.resetValidation()},onChangeCity:function(t,e){var a=this,i={collectionCode:"ADMINISTRATIVE_REGION",level:1,parent:t};e||(a.thongTinChuHoSo.districtCode="",a.thongTinChuHoSo.wardCode="",a.$store.commit("setCityVal",t)),a.$store.getters.getDictItems(i).then((function(t){e||(a.districts=t.data,a.wards=[]),(e||a.thongTinNguoiNopHoSo.sameUser||!a.thongTinNguoiNopHoSo.sameUser&&a.showApplicant&&!a.showDelegate)&&(a.delegateDistricts=t.data,a.delegateWards=[])}))},onChangeDistrict:function(t,e){var a=this,i={collectionCode:"ADMINISTRATIVE_REGION",level:1,parent:t};e||(a.thongTinChuHoSo.wardCode="",a.$store.commit("setDistrictVal",t)),a.$store.getters.getDictItems(i).then((function(t){e||(a.wards=t.data),(e||a.thongTinNguoiNopHoSo.sameUser||!a.thongTinNguoiNopHoSo.sameUser&&a.showApplicant&&!a.showDelegate)&&(a.delegateWards=t.data)}))},onChangeWard:function(t){this.$store.commit("setWardVal",t)},querySelections:function(t){var e=this,a={idNo:t};e.$store.dispatch("getUserInfoFromApplicantIdNo",a).then((function(t){e.applicantItems=t})).catch((function(t){}))},querySelections2:function(t){var e=this,a={idNo:t};e.$store.dispatch("getUserInfoFromApplicantIdNo",a).then((function(t){e.applicantItems2=t})).catch((function(t){}))},onChangeDelegateCity:function(t){var e=this;e.thongTinNguoiNopHoSo.delegateDistrictCode="",e.thongTinNguoiNopHoSo.delegateWardCode="";var a={collectionCode:"ADMINISTRATIVE_REGION",level:1,parent:t};e.$store.getters.getDictItems(a).then((function(t){e.delegateDistricts=t.data,e.thongTinNguoiNopHoSo.sameUser&&(e.districts=t.data)}))},showValid:function(){var t=this,e=!0;t.requiredOptions["applicantIdNo"]&&!t.thongTinChuHoSo.applicantIdNo&&(e=!1),1===t.originality||t.showDelegate||!t.requiredOptions["delegateIdNo"]||t.thongTinNguoiNopHoSo.delegateIdNo||(e=!1);var a={validForm:t.$refs.formChuHoSo.validate()&&e,message:t.messageCheckApplicant,validApplicant:t.validBussinessInfos,applicantIdRequired:e};return a},onChangeDelegateDistrict:function(t){var e=this;e.thongTinNguoiNopHoSo.delegateWardCode="";var a={collectionCode:"ADMINISTRATIVE_REGION",level:1,parent:t};e.$store.getters.getDictItems(a).then((function(t){e.delegateWards=t.data,e.thongTinNguoiNopHoSo.sameUser&&(e.wards=t.data)}))},onInputChange:function(t){var e=this;if(e.thongTinChuHoSo.applicantIdNo=t.trim(),e.functionTimeOut&&clearTimeout(e.functionTimeOut),e.functionTimeOut=setTimeout((function(){(3===e.originality&&"2"===e.thongTinChuHoSo.userType||1===e.originality&&"business"===e.thongTinChuHoSo.applicantIdType)&&(e.checkApplicantInfos(),e.thongTinChuHoSo.applicantIdNo=t.trim()),e.$store.commit("setApplicantId",t)}),2e3),console.log(t),0===t.trim().length)return e.thongTinChuHoSo.applicantIdNo="",console.log(e.thongTinChuHoSo.applicantIdNo),null;var a="/o/rest/v2/applicants?start=0&end=5&idNo=".concat(t);return new Promise((function(i){e.$store.dispatch("loadInitResource").then((function(o){var n={headers:{}};s.a.get(a,n).then((function(a){var o=[];if(a.data.hasOwnProperty("data")){if(o=a.data.data,t.trim().length>100)return d.a.error(e.labelSwitch[e.thongTinChuHoSo.userType].cmtnd+" phải ít hơn 100 kí tự"),e.thongTinChuHoSo.applicantIdNo="",null;e.thongTinChuHoSo.applicantIdNo=t.trim()}else{if(t.trim().length>100)return d.a.error(e.labelSwitch[e.thongTinChuHoSo.userType].cmtnd+" phải ít hơn 100 kí tự"),e.thongTinChuHoSo.applicantIdNo="",null;e.thongTinChuHoSo.applicantIdNo=t.trim()}i(o)}))}))}))},onInputChange1:function(t){var e=this;if(e.thongTinNguoiNopHoSo.delegateIdNo=t.trim(),0===t.trim().length)return e.thongTinNguoiNopHoSo.delegateIdNo="",null;var a="/o/rest/v2/applicants?start=0&end=5&idNo=".concat(t);return new Promise((function(i){e.$store.dispatch("loadInitResource").then((function(o){var n={headers:{}};s.a.get(a,n).then((function(a){var o=[];if(a.data.hasOwnProperty("data")){if(o=a.data.data,t.trim().length>100)return d.a.error(e.labelSwitch[e.thongTinChuHoSo.userType].cmtnd+" phải ít hơn 100 kí tự"),e.thongTinNguoiNopHoSo.delegateIdNo="",null;e.thongTinNguoiNopHoSo.delegateIdNo=t.trim()}else{if(t.trim().length>100)return d.a.error(e.labelSwitch[e.thongTinChuHoSo.userType].cmtnd+" phải ít hơn 100 kí tự"),e.thongTinNguoiNopHoSo.delegateIdNo="",null;e.thongTinNguoiNopHoSo.delegateIdNo=t.trim()}i(o)}))}))}))},onSearchItemSelected:function(t){var e=this;function a(t){return new Promise((function(a,i){setTimeout((function(){e.onChangeCity(t),a()}),Math.floor(100*Math.random())+1)}))}function i(t){return new Promise((function(a,i){setTimeout((function(){e.onChangeDistrict(t),a()}),Math.floor(100*Math.random())+1)}))}e.selectedSearchItem=t,"business"===t["applicantIdType"]?e.thongTinChuHoSo.userType="2":"citizen"===t["applicantIdType"]?e.thongTinChuHoSo.userType="1":e.thongTinChuHoSo.userType="3",e.thongTinChuHoSo["applicantIdNo"]=t.applicantIdNo.toString(),e.thongTinChuHoSo["applicantName"]=t["applicantName"]?t["applicantName"]:"",e.thongTinChuHoSo["address"]=t["address"]?t["address"]:"",e.thongTinChuHoSo["contactTelNo"]=t["contactTelNo"]?t["contactTelNo"]:"",e.thongTinChuHoSo["contactEmail"]=t["contactEmail"]?t["contactEmail"]:"",e.thongTinChuHoSo.cityCode=t["cityCode"]?t["cityCode"]:"",setTimeout((function(){e.$store.commit("setApplicantId",e.thongTinChuHoSo["applicantIdNo"]),e.checkApplicantInfos()}),2100),""!==e.thongTinChuHoSo["cityCode"]&&null!==e.thongTinChuHoSo["cityCode"]&&void 0!==e.thongTinChuHoSo["cityCode"]&&0!==e.thongTinChuHoSo["cityCode"]&&"0"!==e.thongTinChuHoSo["cityCode"]&&a(e.thongTinChuHoSo["cityCode"]).then((function(){e.thongTinChuHoSo.districtCode=t["districtCode"]?t["districtCode"]:"",""!==e.thongTinChuHoSo["districtCode"]&&null!==e.thongTinChuHoSo["districtCode"]&&void 0!==e.thongTinChuHoSo["districtCode"]&&0!==e.thongTinChuHoSo["districtCode"]&&"0"!==e.thongTinChuHoSo["districtCode"]&&i(e.thongTinChuHoSo["districtCode"]).then((function(){e.thongTinChuHoSo.wardCode=t["wardCode"]?t["wardCode"]:""}))}))},onSearchItemSelected1:function(t){var e=this;function a(t){return new Promise((function(a,i){setTimeout((function(){e.onChangeCity(t,"true"),a()}),Math.floor(100*Math.random())+1)}))}function i(t){return new Promise((function(a,i){setTimeout((function(){e.onChangeDistrict(t,"true"),a()}),Math.floor(100*Math.random())+1)}))}e.selectedSearchItem=t,console.log("selectedSearchItem1",t),e.thongTinNguoiNopHoSo["delegateIdNo"]=t.applicantIdNo.toString(),e.thongTinNguoiNopHoSo["delegateName"]=t["applicantName"]?t["applicantName"]:"",e.thongTinNguoiNopHoSo["delegateAddress"]=t["address"]?t["address"]:"",e.thongTinNguoiNopHoSo["delegateTelNo"]=t["contactTelNo"]?t["contactTelNo"]:"",e.thongTinNguoiNopHoSo["delegateEmail"]=t["contactEmail"]?t["contactEmail"]:"",e.thongTinNguoiNopHoSo["delegateCityCode"]=t["cityCode"]?t["cityCode"]:"",console.log("thongTinNguoiNopHoSo",e.thongTinNguoiNopHoSo),e.thongTinNguoiNopHoSo["delegateCityCode"]&&"0"!==e.thongTinNguoiNopHoSo["delegateCityCode"]&&a(e.thongTinNguoiNopHoSo["delegateCityCode"]).then((function(){e.thongTinNguoiNopHoSo["delegateDistrictCode"]=t["districtCode"]?t["districtCode"]:"",e.thongTinNguoiNopHoSo["delegateDistrictCode"]&&"0"!==e.thongTinNguoiNopHoSo["delegateDistrictCode"]&&i(e.thongTinNguoiNopHoSo["delegateDistrictCode"]).then((function(){e.thongTinNguoiNopHoSo["delegateWardCode"]=t["wardCode"]?t["wardCode"]:""}))}))},getThongTinChuHoSo:function(){return this.thongTinChuHoSo},getThongTinNguoiNopHoSo:function(){return this.thongTinNguoiNopHoSo},changeApplicantInfos:function(){var t=this;t.functionTimeOut&&clearTimeout(t.functionTimeOut),t.functionTimeOut=setTimeout((function(){(3===t.originality&&"2"===t.thongTinChuHoSo.userType||1===t.originality&&"business"===t.thongTinChuHoSo.applicantIdType)&&t.checkApplicantInfos(),t.$store.commit("setApplicantId",t.thongTinChuHoSo.applicantIdNo)}),2e3)},checkApplicantInfos:function(){var t=this;if(3===t.originality&&"2"===t.thongTinChuHoSo.userType&&t.thongTinChuHoSo.applicantIdNo||1===t.originality&&"business"===t.thongTinChuHoSo.applicantIdType){var e={applicantIdNo:t.thongTinChuHoSo.applicantIdNo,applicantName:t.thongTinChuHoSo.applicantName};t.$store.dispatch("checkApplicantInfos",e).then((function(e){e&&e.hasOwnProperty("error")&&!0===e.error?(t.bussinessExits=!1,t.validBussinessInfos=!1,t.messageCheckApplicant=e.message):e&&e.hasOwnProperty("warning")&&!0===e.warning?(t.bussinessExits=!0,t.validBussinessInfos=!1,t.messageCheckApplicant=e.message):!e||e.hasOwnProperty("error")||e.hasOwnProperty("warning")||(t.bussinessExits=!0,t.validBussinessInfos=!0)})).catch((function(){t.loadingVerify=!1}))}},getApplicantInfos:function(){var t=this,e={applicantIdNo:t.thongTinChuHoSo.applicantIdNo};t.$store.dispatch("getApplicantInfos",e).then((function(e){t.applicantInfos["applicantName"]=e["MainInformation"]["NAME"],t.applicantInfos["applicantIdNo"]=e["MainInformation"]["ENTERPRISE_GDT_CODE"],t.applicantInfos["address"]=e["HOAdress"]["AddressFullText"],t.applicantInfos["representatives"]=e["Representatives"]["FULL_NAME"],t.applicantInfos["companyType"]=e["MainInformation"]["ENTERPRISE_TYPE_NAME"],t.applicantInfos["companyStatus"]=e["MainInformation"]["ENTERPRISE_STATUS_NAME"],t.dialog_applicantInfos=!0}))},getApplicantList:function(){var t=this,e="/o/rest/v2/applicants";return t.loadingTable=!0,new Promise((function(a){t.$store.dispatch("loadInitResource").then((function(i){var o={headers:{},params:{start:t.applicantPage*t.numberPerPage-t.numberPerPage,end:t.applicantPage*t.numberPerPage,type:t.typeSearch,applicantName:t.keySearch}};s.a.get(e,o).then((function(e){var i=[];e.data.hasOwnProperty("data")&&(i=e.data.data);var o={data:i,total:e.data["total"]};t.loadingTable=!1,a(o)})).catch((function(){t.loadingTable=!1}))}))}))},showDialogApplicantList:function(t){var e=this;e.typeApplicantBind=t,e.applicantPage=1,e.getApplicantList().then((function(t){e.totalApplicantSearch=t["total"],e.applicantLists=t["data"],e.dialog_applicantList=!0})).catch((function(){d.a.error("Không lấy được danh sách công dân, tổ chức, doanh nghiệp")}))},searchKeyword:function(){var t=this;setTimeout((function(){String(t.keySearch).length>=3&&(t.applicantPage=1,t.getApplicantList().then((function(e){t.totalApplicantSearch=e["total"],t.applicantLists=e["data"]})).catch((function(){})))}),200)},clearKeySearch:function(){var t=this;t.keySearch="",setTimeout((function(){t.applicantPage=1,t.getApplicantList().then((function(e){t.totalApplicantSearch=e["total"],t.applicantLists=e["data"]})).catch((function(){}))}),200)},changeTypeSearch:function(){var t=this;setTimeout((function(){t.applicantPage=1,t.getApplicantList().then((function(e){t.totalApplicantSearch=e["total"],t.applicantLists=e["data"]})).catch((function(){}))}),200)},changePage:function(t){var e=this;e.applicantPage=t.page,e.getApplicantList().then((function(t){e.totalApplicantSearch=t["total"],e.applicantLists=t["data"]})).catch((function(){}))},bindInfoApplicant:function(t){var e=this;"ChuHoSo"===e.typeApplicantBind?e.onSearchItemSelected(t):"NguoiNop"===e.typeApplicantBind&&e.onSearchItemSelected1(t),e.dialog_applicantList=!1},showEditApplicant:function(t){var e=this;if(e.applicantEdit=t,0===e.cityItems.length){var a={collectionCode:"ADMINISTRATIVE_REGION",level:0,parent:0,commit:""};e.$store.dispatch("loadDictItems",a).then((function(t){e.cityItems=t.data}))}e.applicantEdit["cityCode"]&&e.$store.dispatch("loadDictItems",{collectionCode:"ADMINISTRATIVE_REGION",level:1,parent:e.applicantEdit["cityCode"]}).then((function(t){e.districtItems=t.data})),e.applicantEdit["districtCode"]&&e.$store.dispatch("loadDictItems",{collectionCode:"ADMINISTRATIVE_REGION",level:1,parent:e.applicantEdit["districtCode"]}).then((function(t){e.wardItems=t.data})),"citizen"===e.applicantEdit["applicantIdType"]?e.titleEdit="Thông tin công dân":"business"===e.applicantEdit["applicantIdType"]&&(e.titleEdit="Thông tin tổ chức, doanh nghiệp"),e.dialog_editApplicant=!0,e.$refs.form.resetValidation()},changeBirthDate:function(){var t=this;t.menuBirthDate=!1,t.applicantEdit["applicantIdDate"]=t.formatDate(t.ngayCap)},formatDate:function(t){if(!t)return null;var e=t.split("-"),a=h(e,3),i=a[0],o=a[1],n=a[2];return"".concat(n,"/").concat(o,"/").concat(i)},getMaxdate:function(){var t=new Date;return"".concat(t.getFullYear(),"-").concat((t.getMonth()+1).toString().padStart(2,"0"),"-").concat(t.getDate().toString().padStart(2,"0"))},parseDateInput:function(t){if(t){var e="";e=isNaN(t)?new Date(t):new Date(Number(t));var a="".concat(e.getDate().toString().padStart(2,"0"),"/").concat((e.getMonth()+1).toString().padStart(2,"0"),"/").concat(e.getFullYear());return a}},parseDate:function(t){if(!t)return null;var e=t.split("/"),a=h(e,3),i=a[0],o=a[1],n=a[2];return"".concat(n,"-").concat(o.padStart(2,"0"),"-").concat(i.padStart(2,"0"))},onChangeCityEditApplicant:function(t){var e=this;e.applicantEdit["cityName"]=e.cityItems.filter((function(e){return e["itemCode"]===t}))[0]["itemName"];var a={collectionCode:"ADMINISTRATIVE_REGION",level:1,parent:t};e.$store.dispatch("loadDictItems",a).then((function(t){e.districtItems=t.data,e.wardItems=[]}))},onChangeDistrictEditApplicant:function(t){var e=this;e.applicantEdit["districtName"]=e.districtItems.filter((function(e){return e["itemCode"]===t}))[0]["itemName"];var a={collectionCode:"ADMINISTRATIVE_REGION",level:1,parent:t};e.$store.dispatch("loadDictItems",a).then((function(t){e.wardItems=t.data}))},onChangeWardEditApplicant:function(t){var e=this;e.applicantEdit["wardName"]=e.wardItems.filter((function(e){return e["itemCode"]===t}))[0]["itemName"]},updateApplicant:function(){var t=this;t.$refs.form.validate()&&(t.loading=!0,t.$store.dispatch("putUser",t.applicantEdit).then((function(){d.a.clear(),d.a.success("Yêu cầu thực hiện thành công"),t.dialog_editApplicant=!1})).catch((function(){d.a.clear(),d.a.error("Yêu cầu thực hiện thất bại")})))},exitDialogEditApplicant:function(){var t=this;t.dialog_editApplicant=!1,t.getApplicantList().then((function(e){t.totalApplicantSearch=e["total"],t.applicantLists=e["data"]})).catch((function(){d.a.error("Không lấy được danh sách công dân, tổ chức, doanh nghiệp")}))},fullAddress:function(t,e,a,i){var o="";return t&&(o+=t+", "),i&&(o+=i+" - "),a&&(o+=a+" - "),e&&(o+=e),o},checkUserType:function(){var t=this;t.thongTinChuHoSo["cityCode"]="",t.thongTinChuHoSo["districtCode"]="",t.thongTinChuHoSo["wardCode"]="",t.thongTinChuHoSo["applicantIdNo"]="",t.thongTinChuHoSo["applicantIdType"]="",t.thongTinChuHoSo["contactEmail"]="",t.thongTinChuHoSo["contactTelNo"]="",t.thongTinChuHoSo["contactName"]="",t.thongTinChuHoSo["address"]="",t.thongTinChuHoSo["applicantName"]=""}}},f=v,_=a("2877"),y=a("6544"),C=a.n(y),D=a("c6a6"),T=a("8336"),x=a("b0af"),b=a("99d9"),S=a("ac7c"),N=a("8fea"),P=a("2e4b"),I=a("169a"),A=a("cd55"),w=a("49e2"),E=a("0e8f"),k=a("4bd4"),O=a("132d"),F=a("a722"),M=a("5d23"),V=a("e449"),L=a("67b6"),H=a("43a6"),$=a("9910"),R=a("e0c7"),G=a("2677"),q=a("a844"),U=a("71d9"),B=a("2a7f"),K=a("3a2f"),W=Object(_["a"])(f,i,o,!1,null,null,null);e["a"]=W.exports;C()(W,{VAutocomplete:D["a"],VBtn:T["a"],VCard:x["a"],VCardActions:b["a"],VCardText:b["b"],VCheckbox:S["a"],VDataTable:N["a"],VDatePicker:P["a"],VDialog:I["a"],VExpansionPanel:A["a"],VExpansionPanelContent:w["a"],VFlex:E["a"],VForm:k["a"],VIcon:O["a"],VLayout:F["a"],VListTileContent:M["a"],VListTileSubTitle:M["b"],VListTileTitle:M["c"],VMenu:V["a"],VRadio:L["a"],VRadioGroup:H["a"],VSpacer:$["a"],VSubheader:R["a"],VTextField:G["a"],VTextarea:q["a"],VToolbar:U["a"],VToolbarTitle:B["b"],VTooltip:K["a"]})},"87c1":function(t,e,a){"use strict";var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-expansion-panel",{staticClass:"expansion-pl ext__form",attrs:{value:[!0],expand:""}},[a("v-expansion-panel-content",[a("div",{attrs:{slot:"header"},slot:"header"},[a("div",{staticClass:"background-triangle-small"},[a("v-icon",{attrs:{size:"18",color:"white"}},[t._v("star_rate")])],1),a("span",[t._v("Ý kiến của cán bộ")]),2===t.user_note?a("span",{staticClass:"red--text"},[t._v("  *")]):t._e()]),a("v-card",[a("v-card-text",{staticClass:"py-2 px-4"},[a("v-layout",{attrs:{wrap:""}},[a("v-flex",{attrs:{xs12:""}},[a("v-form",{ref:"userNoteForm",model:{value:t.valid,callback:function(e){t.valid=e},expression:"valid"}},[a("v-text-field",{attrs:{"multi-line":"",rows:4,rules:2===t.user_note?[function(){return""!==t.noteYkien||"Trường dữ liệu bắt buộc"}]:[],box:"",label:"Nhập ý kiến"},model:{value:t.noteYkien,callback:function(e){t.noteYkien=e},expression:"noteYkien"}})],1)],1)],1)],1)],1)],1)],1)},o=[],n={props:{user_note:{type:Number,required:!0},configNote:{type:Object,required:!1}},data:function(){return{noteYkien:"",valid:!1}},methods:{initData:function(t){var e=this;e.$store.dispatch("getDetailDossier",t).then((function(t){e.thongTinChiTietHoSo=t}))},doExport:function(){var t=this,e={text:t.noteYkien,valid:t.$refs.userNoteForm.validate()};return e}}},s=n,r=a("2877"),c=a("6544"),l=a.n(c),d=a("b0af"),u=a("99d9"),h=a("cd55"),p=a("49e2"),m=a("0e8f"),g=a("4bd4"),v=a("132d"),f=a("a722"),_=a("2677"),y=Object(r["a"])(s,i,o,!1,null,null,null);e["a"]=y.exports;l()(y,{VCard:d["a"],VCardText:u["b"],VExpansionPanel:h["a"],VExpansionPanelContent:p["a"],VFlex:m["a"],VForm:g["a"],VIcon:v["a"],VLayout:f["a"],VTextField:_["a"]})},"885b":function(t,e,a){"use strict";var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"phancong",staticStyle:{"background-color":"white",width:"100%"}},[t.type>0?a("div",[a("v-layout",{attrs:{wrap:""}},t._l(t.data_phancong,(function(e,i){return a("v-flex",{key:i,staticStyle:{"max-width":"190px"}},[a("v-list-tile",[a("v-list-tile-action",{class:e.jobPosTitle?"pt-2":"",staticStyle:{"min-width":"30px"}},[a("v-checkbox",{on:{change:function(e){t.changeAssigned(e,i)}},model:{value:e.assigned,callback:function(a){t.$set(e,"assigned",a)},expression:"item.assigned"}})],1),a("v-list-tile-content",[a("v-list-tile-title",[a("span",{staticClass:"black--text",staticStyle:{"font-size":"13px"}},[t._v(t._s(e.userName))])]),e.jobPosTitle?a("v-list-tile-sub-title",[a("span",{staticStyle:{"font-size":"13px",color:"#0000008a"}},[t._v(t._s(e.jobPosTitle))])]):t._e()],1)],1)],1)})),1),t.assignValidate?t._e():a("span",{staticClass:"ml-3",staticStyle:{color:"#f44336"}},[t._v("* Yêu cầu chọn người để thực hiện")])],1):a("v-card-text",[a("v-layout",{staticClass:"my-1",attrs:{wrap:""}},t._l(t.data_phancong,(function(e,i){return a("div",{key:e.userId,staticClass:"ml-3"},[a("v-layout",{attrs:{wrap:""}},[a("v-tooltip",{attrs:{top:""}},[a("v-checkbox",{staticStyle:{"min-width":"150px"},attrs:{slot:"activator",label:e.userName?e.userName:e["fullName"]},on:{change:function(e){t.checkAsign(e,i)}},slot:"activator",model:{value:e.assigned,callback:function(a){t.$set(e,"assigned",a)},expression:"item.assigned"}}),a("span",{staticClass:"pl-0"},[t._v(" "+t._s(e.userName?e.userName:e["fullName"])+" ")])],1),a("toggle-button",{staticClass:"mx-1 btn-tgl",attrs:{id:"btn-"+i,title_checked:"Thực hiện",title_unchecked:"Phối hợp",labels:{checked:"TH",unchecked:"PH"},color:{checked:"#7DCE94",unchecked:"#82C7EB"},width:50},on:{change:function(e){t.changeTypeAssign(e,i)}},model:{value:t.presenterAddGroup,callback:function(e){t.presenterAddGroup=e},expression:"presenterAddGroup"}})],1)],1)})),0),t.assignValidate?t._e():a("span",{staticClass:"ml-3",staticStyle:{color:"#f44336"}},[t._v("* Yêu cầu chọn người thực hiện")])],1)],1)},o=[],n=a("610f"),s={components:{"toggle-button":n["a"]},props:{reAsignUsers:{type:Array,default:function(){return[]}},type:{type:Number,default:function(){return 1}},configNote:{type:Object,default:function(){}}},model:{prop:"reAsignUsers"},data:function(){return{data_phancong:[],assignedtype_items:{2:[{text:"Không có phân công",value:0},{text:"Thực hiện chính",value:1},{text:"Thực hiện phối hợp",value:2}],3:[{text:"Không có phân công",value:0},{text:"Thực hiện chính",value:1},{text:"Thực hiện phối hợp",value:2},{text:"Theo dõi",value:3}]},title_asign:{1:"PHÂN CÔNG NGƯỜI THỰC HIỆN",2:"PHÂN CÔNG THỰC HIỆN, PHỐI HỢP",3:"PHÂN CÔNG THỰC HIỆN, PHỐI HỢP VÀ THEO DÕI"},presenterAddGroup:!0,assignValidate:!0}},created:function(){setTimeout((function(){window.$(".btn-tgl").addClass("btn-hidden")}),200)},mounted:function(){this.data_phancong=this.reAsignUsers},watch:{reAsignUsers:function(t){this.data_phancong=t}},methods:{changeAssigned:function(t,e){var a=this;1===a.type&&(a.reAsignUsers[e].assigned=!0===t?1:0)},checkAsign:function(t,e){var a=this;t?(a.reAsignUsers[e].assigned=1,window.$("#btn-".concat(e)).removeClass("btn-hidden")):(a.reAsignUsers[e].assigned=0,window.$("#btn-".concat(e)).addClass("btn-hidden"))},changeTypeAssign:function(t,e){var a=this;t.value?(a.reAsignUsers[e].assigned=1,window.$("#btn-".concat(e)).removeClass("btn-hidden")):(a.reAsignUsers[e].assigned=2,window.$("#btn-".concat(e)).addClass("btn-hidden"))},doExport:function(){var t=this,e=t.reAsignUsers.filter((function(t){return Number(t.assigned)>0}));return 0===e.length?(t.assignValidate=!1,t.assignValidate):(t.assignValidate=!0,t.assignValidate)}}},r=s,c=a("2877"),l=a("6544"),d=a.n(l),u=a("99d9"),h=a("ac7c"),p=a("0e8f"),m=a("a722"),g=a("ba95"),v=a("40fe"),f=a("5d23"),_=a("3a2f"),y=Object(c["a"])(r,i,o,!1,null,null,null);e["a"]=y.exports;d()(y,{VCardText:u["b"],VCheckbox:h["a"],VFlex:p["a"],VLayout:m["a"],VListTile:g["a"],VListTileAction:v["a"],VListTileContent:f["a"],VListTileSubTitle:f["b"],VListTileTitle:f["c"],VTooltip:_["a"]})},"8bf2":function(t,e,a){"use strict";var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-expansion-panel",{staticClass:"expansion-pl",attrs:{value:[!0],expand:""}},[a("v-expansion-panel-content",[a("div",{attrs:{slot:"header"},slot:"header"},[a("div",{staticClass:"background-triangle-small"},[a("v-icon",{attrs:{size:"18",color:"white"}},[t._v("star_rate")])],1),t._v("Thông tin gửi bưu chính\n    ")]),a("v-card",[a("v-layout",{staticClass:"my-2",attrs:{wrap:""}},[a("v-flex",{attrs:{xs12:"",sm2:""}},[a("v-subheader",{staticClass:"pl-0"},[t._v("Dịch vụ đăng ký: ")])],1),a("v-flex",{attrs:{xs12:"",sm4:""}},[a("p",{staticClass:"mb-0",staticStyle:{"padding-top":"9px"}},[t._v("VNPOST")])]),a("v-flex",{attrs:{xs12:"",sm2:""}},[a("v-subheader",{staticClass:"pl-0"},[t._v("Bưu cục: ")])],1),a("v-flex",{attrs:{xs12:"",sm4:""}},[a("p",{staticClass:"mb-0",staticStyle:{"padding-top":"9px"}},[t._v(t._s(t.postName))])]),a("v-flex",{attrs:{xs12:"",sm2:""}},[a("v-subheader",{staticClass:"pl-0"},[t._v("Tên người nhận: ")])],1),a("v-flex",{attrs:{xs12:"",sm4:""}},[a("p",{staticClass:"mb-0",staticStyle:{"padding-top":"9px"}},[t._v(t._s(t.postalService.applicantName))])]),a("v-flex",{attrs:{xs12:"",sm2:""}},[a("v-subheader",{staticClass:"pl-0"},[t._v("Số điện thoại: ")])],1),a("v-flex",{attrs:{xs12:"",sm4:""}},[a("p",{staticClass:"mb-0",staticStyle:{"padding-top":"9px"}},[t._v(t._s(t.postalService.postalTelNo))])]),a("v-flex",{attrs:{xs12:"",sm2:""}},[a("v-subheader",{staticClass:"pl-0"},[t._v("Địa chỉ: ")])],1),a("v-flex",{attrs:{xs12:"",sm10:""}},[a("p",{staticClass:"mb-0",staticStyle:{"padding-top":"9px"}},[t._v(t._s(t.postalService.postalAddress))])])],1)],1)],1)],1)},o=[],n={props:{postalService:{type:Object,default:function(){}}},data:function(){return{postName:""}},computed:{},created:function(){var t=this;t.$nextTick((function(){var t=this;t.$store.dispatch("getVNPOSTcode").then((function(e){var a=e.filter((function(e){return Number(e.itemCode)===Number(t.postalService.postalCityCode)}));a.length>0&&(t.postName=a[0].itemName)}))}))},methods:{}},s=n,r=a("2877"),c=a("6544"),l=a.n(c),d=a("b0af"),u=a("cd55"),h=a("49e2"),p=a("0e8f"),m=a("132d"),g=a("a722"),v=a("e0c7"),f=Object(r["a"])(s,i,o,!1,null,null,null);e["a"]=f.exports;l()(f,{VCard:d["a"],VExpansionPanel:u["a"],VExpansionPanelContent:h["a"],VFlex:p["a"],VIcon:m["a"],VLayout:g["a"],VSubheader:v["a"]})},"92fe":function(module,__webpack_exports__,__webpack_require__){"use strict";var jquery__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("1157"),jquery__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(jquery__WEBPACK_IMPORTED_MODULE_0__),toastr__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("854a"),toastr__WEBPACK_IMPORTED_MODULE_1___default=__webpack_require__.n(toastr__WEBPACK_IMPORTED_MODULE_1__),_TiepNhan_KhoTaiLieu__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("a29c");toastr__WEBPACK_IMPORTED_MODULE_1___default.a.options={closeButton:!0,timeOut:"5000"},__webpack_exports__["a"]={props:{onlyView:{type:Boolean,default:function(){return!1}},id:{type:String,default:function(){return"nm"}},partTypes:{type:Array,default:function(){return[1,3]}},checkInput:{type:Number,default:function(){return 0}},formCodeInput:{type:String,default:function(){return""}},tempLienThong:{type:Boolean,default:function(){return!1}}},components:{"kho-tai-lieu":_TiepNhan_KhoTaiLieu__WEBPACK_IMPORTED_MODULE_2__["a"]},data:function(){return{valid_ghichu:!1,dossierTemplateItems:[],dossierMarksItems:[],dossierFilesItems:[],thongTinHoSo:{},valid:!0,stateView:!1,dialogAddOtherTemp:!1,loadingAddOther:!1,loadingApacal:!1,otherDossierTemplate:"",sheet:!1,partView:"",dossierFileIdView:"",stateEdit:!1,progressUploadPart:"",dialogPDF:!1,dialogPDFLoading:!0,stateAddFileOther:!1,dossierTemplatesItemSelect:{},fileViews:[],pdfEform:!1,sampleCount:0,serviceInfoId:0,fileMarkItems:[{text:"Không có",value:0},{text:"Bản chụp",value:1},{text:"Bản sao",value:2},{text:"Bản gốc",value:3},{text:"Bản dịch",value:4}],markCheck:"",fileCheckItems:[{text:"Chưa kiểm tra",value:0},{text:"Đạt",value:1},{text:"Không đạt",value:2}],fileTemplateItems:[],fileTemplateNoString:"",dossierFilesApplicant:[],stateViewResult:!0,currentFormView:"",pstFixed:0,pstEl:0,endEl:0,applicantNoteDossier:"",doChange:{},dossierTemplateLienThong:[],receiveMessage:"",dialog_documentApplicant:!1,dossierPartAttach:"",indexPart:"",rules:{required:function(t){return!!t||"Thông tin bắt buộc"},cmndHoChieu:function(t){var e=/^(?![0-9]{4,12})[0-9a-zA-Z]{4,12}$/;return e.test(t)||"Gồm các ký tự 0-9, a-z và ít nhất 4-12 ký tự"},email:function(t){t=t.trim();var e=/^(([^<>()[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/;return e.test(t)||"Địa chỉ Email không hợp lệ"},passWord:function(t){var e=/^(?![0-9]{6,})[0-9a-zA-Z]{6,}$/;return e.test(t)||"Gồm các ký tự 0-9, a-z và ít nhất 6 ký tự"},telNo:function(t){var e=/^([0-9]{0,})$/;return"string"===typeof t&&(t=t.trim()),e.test(t)||"Gồm các ký tự 0-9"},varchar50:function(t){return!t||(t=String(t).trim(),t.length<=50||"Không được nhập quá 50 ký tự")},varchar100:function(t){return!t||(t=String(t).trim(),t.length<=100||"Không được nhập quá 100 ký tự")},varchar255:function(t){return!t||(t=String(t).trim(),t.length<=255||"Không được nhập quá 255 ký tự")},varchar500:function(t){return!t||(t=String(t).trim(),t.length<=500||"Không được nhập quá 500 ký tự")},varchar5000:function(t){return!t||(t=String(t).trim(),t.length<=5e3||"Không được nhập quá 5000 ký tự")}}}},created:function(){var t=this;t.receiveMessage=function(e){t.saveAlpacaFormCallBack(e)}},computed:{loading:function(){return this.$store.getters.loading},originality:function(){var t=this;return t.getOriginality()},initDataResource:function(){return this.$store.getters.loadingInitData},dossierTemplateItemsFilter:function(){var t=this,e=t.dossierTemplateItems;if(e.length>0){var a=e.filter((function(e){return t.partTypes.includes(e.partType)&&t.checkVisibleTemp(e,0)})),i=a;return"1"===String(t.checkInput)&&(i=a.filter((function(t){return 0!==t["fileMark"]}))),console.log("dossierTemplateItemsFilter111",i),i}},applicantBussinessExit:function(){return this.$store.getters.getApplicantBussinessExit},applicantId:function(){return this.$store.getters.getApplicantIdNo},applicantNote:function(){return this.$store.getters.getApplicantNote},userLoginInfomation:function(){return this.$store.getters.getUserLogin}},mounted:function(){var t=this;t.page=1,t.$nextTick((function(){}))},watch:{applicantBussinessExit:function(t){var e=this;t&&e.fileTemplateNoString&&e.getDossierFileApplicants(t,e.fileTemplateNoString)},applicantId:function(t){var e=this;t&&e.fileTemplateNoString&&e.getDossierFileApplicants(t,e.fileTemplateNoString)},dossierTemplateItemsFilter:function(){var t=this;for(var e in t.dossierTemplateItemsFilter)t.doChange[e]="";console.log("dossierTemplateItemsFilter222",t.dossierTemplateItemsFilter)}},methods:{showValid:function(){var t=this,e={validForm:t.$refs.formGhiChuThanhPhan.validate()};return e},markAll:function(){var t=this;t.dossierTemplateItemsFilter&&""!==t.markCheck&&t.dossierTemplateItemsFilter.forEach((function(e,a){1===e.partType&&e.fileMark&&!e.recordCountDefault&&(e["dossierId"]=t.thongTinHoSo.dossierId,e["fileCheck"]=t.markCheck,e["fileComment"]="",e["checkInput"]=t.checkInput,t.$store.dispatch("postDossierMark",e))}))},resetCounterTemplate:function(t,e){t.commit,t.state;var a=this;a.dossierTemplateItems.forEach((function(t){t.partNo===e.partNo&&(t.hasForm?t.count=1:t.count=0)}))},recountFileTemplates:function(){var t=this;t.dossierTemplateItems.forEach((function(e){e.count=0,t.dossierFilesItems.forEach((function(t){e.partNo!==t.dossierPartNo||t.eForm||e.count++}))}))},initData:function(t){var e=this;e.$store.dispatch("getDocumentType").then((function(t){var a=function(t){function e(t,e){return t.itemCode<e.itemCode?-1:t.itemCode>e.itemCode?1:0}return t.sort(e)};if(t){var i=a(t);for(var o in e.fileMarkItems=[],i)e.fileMarkItems.push({text:i[o]["itemName"],value:i[o]["itemCode"]})}})),e.thongTinHoSo=t,e.applicantNoteDossier=t["applicantNote"]&&String(t["applicantNote"]).indexOf("<br>[")<0?t["applicantNote"]:"";var a=[];null!==t["sampleCount"]&&void 0!==t["sampleCount"]&&"undefined"!==t["sampleCount"]&&(e.sampleCount=t["sampleCount"]),a.push(e.$store.dispatch("loadDossierTemplates",t)),a.push(e.$store.dispatch("loadDossierMark",t)),a.push(e.$store.dispatch("loadDossierFiles",t.dossierId)),a.push(e.$store.dispatch("getServiceInfo",{serviceInfoId:t.serviceCode})),Promise.all(a).then((function(t){var a=t[0]["dossierParts"],i=t[1],o=t[2],n=[];t[3].hasOwnProperty("serviceInfoId")&&(e.serviceInfoId=t[3].serviceInfoId),t[3].fileTemplates&&(Array.isArray(t[3].fileTemplates)?n=t[3].fileTemplates:n.push(t[3].fileTemplates));var s=e.mergeDossierTemplateVsDossierFiles(a,o);if(s=e.mergeDossierTemplateVsDossierMark(s,i),s=e.mergeDossierTemplateVsFileTemplates(s,n),e.dossierFilesItems=o,e.dossierMarksItems=i,e.fileTemplateItems=n,e.dossierTemplateItems=s,console.log("dossierTemplateItems555",e.dossierTemplateItems),e.saveMark(),(e.partTypes.includes(2)||e.partTypes.includes(7))&&e.dossierTemplateItems.length>0&&!e.tempLienThong){var r=[];e.dossierTemplateItems.forEach((function(t){var a=e.dossierFilesItems.find((function(e){return t.partNo===e.dossierPartNo&&(2===t.partType||7===t.partType)}));a&&r.push(t)})),e.dossierTemplateItems=r}e.changeStateViewResult(),setTimeout((function(t){e.genAllAlpacaForm(o,s),e.recountFileTemplates()}),500);var c=[];for(var l in e.dossierTemplateLienThong=[],e.dossierTemplateItems)e.dossierTemplateItems[l]["fileTemplateNo"]&&c.push(e.dossierTemplateItems[l]["fileTemplateNo"]),e.tempLienThong&&e.dossierTemplateItems[l]["hasTemplateLienThong"]&&e.dossierTemplateLienThong.push(e.dossierTemplateItems[l]["partNo"]);e.$store.commit("setDossierTemplateLienThong",e.dossierTemplateLienThong),c.length>0&&(e.fileTemplateNoString=c.toString(),e.applicantId&&!e.onlyView&&e.getDossierFileApplicants(e.applicantId,e.fileTemplateNoString))})).catch((function(t){})),console.log("onlyView,checkInput",e.onlyView,e.checkInput,e.progressUploadPart)},genAllAlpacaForm:function(t,e){var a=this;if(t.length>0&&t.filter((function(t){return t.eForm&&t.size})).length>0){var i=t.filter((function(t){return t.eForm})),o=e.filter((function(t){return t.hasForm&&a.partTypes.includes(t.partType)}));i.length>0||e.forEach((function(t){t.hasForm&&a.partTypes.includes(t.partType)&&(t["templateFileNo"]=a.thongTinHoSo.dossierTemplateNo,a.showAlpacaJSFORM(t))})),o.length!==i.length&&o.forEach((function(t){var e=i.findIndex((function(e){return t.partNo===e.dossierPartNo}));-1===e&&(t["templateFileNo"]=a.thongTinHoSo.dossierTemplateNo,a.showAlpacaJSFORM(t))}))}else e.forEach((function(t){t.hasForm&&a.partTypes.includes(t.partType)&&(t["templateFileNo"]=a.thongTinHoSo.dossierTemplateNo,a.showAlpacaJSFORM(t))}))},postDossierMark:function(t,e){var a=this;t["dossierId"]=a.thongTinHoSo.dossierId,a.$store.dispatch("postDossierMark",t).then((function(t){})).catch((function(t){}))},mergeDossierTemplateVsDossierFiles:function(t,e){var a=this;return 0!==e.length?t.forEach((function(t){t["editForm"]=!0,t["daKhai"]=!1,t["passRequired"]=!1;var i=e.find((function(e){return t.partNo===e.dossierPartNo&&a.partTypes.includes(t.partType)&&e.eForm&&!e.removed&&0!==e.fileSize}));i&&(t["daKhai"]=!0,t["hasForm"]=!0,t["referenceUid"]=i["referenceUid"]),e.forEach((function(e){t.partNo===e.dossierPartNo&&(t["passRequired"]=!0)}))})):t.forEach((function(t){t.hasForm&&(t["daKhai"]=!1,t["passRequired"]=!1,t["editForm"]=!0)})),t},mergeDossierTemplateVsDossierMark:function(t,e){return 0!==e.length?t.map((function(t){t["count"]=0,t["stateEditFileCheck"]=!1;var a=e.find((function(e){return e.dossierPartNo===t.partNo}));return null!==a&&void 0!==a?(t["fileMark"]=a.fileMark,t["fileComment"]=a.fileComment,t["fileCheck"]=a.fileCheck,t["recordCount"]=a.recordCount,t["fileMarkDefault"]=a.fileMark,t["hasTemplate"]="0"!==String(a.fileMark),t["hasTemplate"]&&!t["recordCount"]?t["recordCount"]=1:t["hasTemplate"]||(t["recordCount"]=0),t["hasTemplateLienThong"]=t["hasTemplate"]):(t["fileMark"]=0,t["fileComment"]="",t["fileCheck"]=0,t["recordCount"]=0,t["hasTemplate"]=!1,t["hasTemplateLienThong"]=t["hasTemplate"]),t})):t&&t.forEach((function(t){t["stateEditFileCheck"]=!1,t["count"]=0,t["fileMark"]=0,t["fileComment"]="",t["fileCheck"]=0,t["stateEditFileCheck"]=!1})),t},mergeDossierTemplateVsFileTemplates:function(t,e){return 0!==e.length?t.map((function(t){var a=e.find((function(e){return e.fileTemplateNo===t.fileTemplateNo}));return t["hasFileTemp"]=null!==a&&void 0!==a?a.fileTemplateNo:"",t})):t&&t.forEach((function(t){t["hasFileTemp"]=""})),t},showAlpacaJSFORM:function showAlpacaJSFORM(item,isPending){console.log("showAlpacaJSFORM",item);var vm=this;item["dossierId"]=vm.thongTinHoSo.dossierId,item["editForm"]=!0,vm.$store.dispatch("loadFormScript",item).then((function(resScript){var eformScript="";try{eformScript=eval("("+resScript+")")}catch(error){}if(eformScript&&eformScript.hasOwnProperty("eformEmbed")&&eformScript.eformEmbed){item.embed=!0;var userId=window.themeDisplay.getUserId(),userEmail=1===vm.originality?vm.userLoginInfomation.applicantContactEmail:vm.userLoginInfomation.employeeEmail,referenceUid=vm.thongTinHoSo.referenceUid,dossierStatus=vm.thongTinHoSo.dossierStatus,dossierSubStatus=vm.thongTinHoSo.dossierSubStatus,templateNo=item.partNo,deliverableType=item.deliverableType?item.deliverableType:"",token=localStorage.getItem("jwt_token"),urlEmbed=eformScript.eformEmbed+"/"+item.fileTemplateNo+"/referenceUid/"+referenceUid+"/"+token+"/"+encodeURIComponent(document.location.origin)+"?userId="+userId+"&userEmail="+userEmail+"&code="+referenceUid+"&dossierStatus="+dossierStatus+"&dossierSubStatus="+dossierSubStatus+"&tp="+templateNo;setTimeout((function(){console.log("urlEmbed123123123",urlEmbed),document.getElementById("formAlpaca"+item.partNo+vm.id).src="",setTimeout((function(){document.getElementById("formAlpaca"+item.partNo+vm.id).src=urlEmbed}),50)}),300)}else item.embed=!1,vm.$store.dispatch("loadFormData",item).then((function(resData){var formScript,formData;isPending&&(resData=item.formData),window.$('div[id="formAlpaca'+item.partNo+vm.id+'"]').empty(),formScript=resScript?eval("("+resScript+")"):{},resData?(formData=eval("("+resData+")"),item["loaded"]=!0):formData={},formData.templateNo_hidden=item.partNo,formData.dossierId_hidden=vm.thongTinHoSo.dossierId,formData.dossierStatus_hidden=vm.thongTinHoSo.dossierStatus,formData.dossierSubStatus_hidden=vm.thongTinHoSo.dossierSubStatus,formData.fileTemplateNo_hidden=item.fileTemplateNo,formData.deliverableType_hidden=item.deliverableType?item.deliverableType:"",formData.userEmailAddress_hidden=1===vm.originality?vm.userLoginInfomation.applicantContactEmail:vm.userLoginInfomation.employeeEmail,formData.referenceUid=vm.thongTinHoSo.referenceUid,console.log("data_input postMessage",formScript),formScript.data=formData,window.$('div[id="formAlpaca'+item.partNo+vm.id+'"]').alpaca(formScript)}))}))},saveAlpacaForm:function(t,e){var a=this,i=a.dossierFilesItems.find((function(e){return e.dossierPartNo===t.partNo&&e.eForm}));i?(i["dossierId"]=a.thongTinHoSo.dossierId,i["id"]=a.id,a.loadingApacal=!0,a.$store.dispatch("putAlpacaForm",i).then((function(t){setTimeout((function(){a.loadingApacal=!1,toastr__WEBPACK_IMPORTED_MODULE_1___default.a.clear(),toastr__WEBPACK_IMPORTED_MODULE_1___default.a.success("Thực hiện thành công")}),3e3),a.$store.dispatch("loadDossierFiles",a.thongTinHoSo.dossierId).then((function(t){a.dossierFilesItems=t})).catch((function(t){})),a.dossierTemplateItemsFilter[e]["passRequired"]=!0})).catch((function(t){a.loadingApacal=!1}))):(t["dossierId"]=a.thongTinHoSo.dossierId,t["id"]=a.id,a.loadingApacal=!0,a.$store.dispatch("postEform",t).then((function(t){console.log("resole",t),setTimeout((function(){a.loadingApacal=!1,toastr__WEBPACK_IMPORTED_MODULE_1___default.a.clear(),toastr__WEBPACK_IMPORTED_MODULE_1___default.a.success("Thực hiện thành công"),a.dossierTemplateItemsFilter[e].daKhai=!0}),3e3),a.dossierTemplateItemsFilter[e]["passRequired"]=!0,a.$store.dispatch("loadDossierFiles",a.thongTinHoSo.dossierId).then((function(t){a.dossierFilesItems=t})).catch((function(t){toastr__WEBPACK_IMPORTED_MODULE_1___default.a.clear(),toastr__WEBPACK_IMPORTED_MODULE_1___default.a.error("Yêu cầu của bạn thực hiện thất bại.")}))})).catch((function(t){a.loadingApacal=!1})))},saveAlpacaFormCallBack:function(t){var e=this,a=t.data?t.data:"";if(console.log("data_output new_eform_2",a),a.hasOwnProperty("tp")&&a.tp){var i=e.dossierFilesItems.find((function(t){return t.dossierPartNo===a.tp&&t.eForm}));i?(i["dossierId"]=e.thongTinHoSo.dossierId,i["id"]=e.id,e.loadingApacal=!0,console.log("item put",i),e.$store.dispatch("putAlpacaFormCallBack",i).then((function(t){var i=e.dossierTemplateItemsFilter.findIndex((function(t){return t.partNo===a.tp}));e.dossierTemplateItemsFilter[i]["passRequired"]=!0,setTimeout((function(){e.loadingApacal=!1,toastr__WEBPACK_IMPORTED_MODULE_1___default.a.clear(),toastr__WEBPACK_IMPORTED_MODULE_1___default.a.success("Thực hiện thành công"),e.dossierTemplateItemsFilter[i].daKhai=!0,e.showAlpacaJSFORM(e.dossierTemplateItemsFilter[i])}),3e3),e.$store.dispatch("loadDossierFiles",e.thongTinHoSo.dossierId).then((function(t){e.dossierFilesItems=t})).catch((function(t){}))})).catch((function(t){e.loadingApacal=!1,toastr__WEBPACK_IMPORTED_MODULE_1___default.a.clear(),toastr__WEBPACK_IMPORTED_MODULE_1___default.a.error("Yêu cầu của bạn thực hiện thất bại")}))):(a["dossierId"]=e.thongTinHoSo.dossierId,a["id"]=e.id,e.loadingApacal=!0,console.log("item post",a),e.$store.dispatch("postEformCallBack",a).then((function(t){var i=e.dossierTemplateItemsFilter.findIndex((function(t){return t.partNo===a.tp}));setTimeout((function(){e.loadingApacal=!1,toastr__WEBPACK_IMPORTED_MODULE_1___default.a.clear(),toastr__WEBPACK_IMPORTED_MODULE_1___default.a.success("Thực hiện thành công"),e.dossierTemplateItemsFilter[i].daKhai=!0,console.log("dossierTemplateItemsFilter-1",e.dossierTemplateItemsFilter[i]),e.showAlpacaJSFORM(e.dossierTemplateItemsFilter[i])}),3e3),e.dossierTemplateItemsFilter[i]["passRequired"]=!0,e.$store.dispatch("loadDossierFiles",e.thongTinHoSo.dossierId).then((function(t){e.dossierFilesItems=t})).catch((function(t){}))})).catch((function(t){e.loadingApacal=!1,toastr__WEBPACK_IMPORTED_MODULE_1___default.a.clear(),toastr__WEBPACK_IMPORTED_MODULE_1___default.a.error("Yêu cầu của bạn thực hiện thất bại.")})))}},onDeleteAttackFiles:function(t){var e=this;console.log("delete");var a=confirm("Bạn có muốn xóa toàn bộ file trong thành phần hồ sơ này?");a&&e.dossierTemplateItemsFilter.forEach((function(a){a.dossierPartNo===t.partNo&&(a["dossierId"]=e.thongTinHoSo.dossierId,e.$store.dispatch("deleteAttackFiles",a).then((function(a){e.resetCounterTemplate(t),e.$store.dispatch("loadDossierFiles",e.thongTinHoSo.dossierId)})).catch((function(t){})))}))},changeApplicantNote:function(){var t=this;console.log("applicantNoteEdit",t.applicantNoteDossier),t.$store.commit("setApplicantNote",t.applicantNoteDossier)},pickFile:function(t){var e=this;e.stateAddFileOther=!1,document.getElementById("file"+t.partNo).value="",document.getElementById("file"+t.partNo).click()},onUploadSingleFile:function(t,e,a){var i=this;if(i.dossierTemplatesItemSelect=e,i.progressUploadPart=e.partNo,e["dossierId"]=i.thongTinHoSo.dossierId,e["dossierTemplateNo"]=i.thongTinHoSo.dossierTemplateNo,3!==e.partType)i.$store.dispatch("uploadSingleFile",e).then((function(t){i.dossierTemplateItemsFilter[a]["passRequired"]=!0,i.progressUploadPart="",i.$store.dispatch("loadDossierFiles",i.thongTinHoSo.dossierId).then((function(t){i.dossierFilesItems=t,i.recountFileTemplates()}))})).catch((function(t){t.length>0&&(i.dossierTemplateItemsFilter[a]["passRequired"]=!0),i.progressUploadPart="",i.$store.dispatch("loadDossierFiles",i.thongTinHoSo.dossierId).then((function(t){i.dossierFilesItems=t,i.recountFileTemplates()}))}));else{if(0===window.$('input[id="file'+e.partNo+'"]')[0].files.length)return void(i.progressUploadPart="");i.partView=e.partNo,i.stateView=!0,i.dialogAddOtherTemp=!0}},loadAlpcaForm:function(t){var e=this,a=e.dossierFilesItems.find((function(e){return e.dossierPartNo===t.partNo&&e.eForm}));a?(a["id"]=e.id,e.$store.dispatch("loadAlpcaForm",a)):e.dossierTemplateItemsFilter.forEach((function(a){a.hasForm&&t.partNo===a.partNo&&(a["templateFileNo"]=e.thongTinHoSo.dossierTemplateNo,e.showAlpacaJSFORM(a))}))},loadAlpcaFormClick:function(t){var e=this;window.removeEventListener("message",e.receiveMessage),window.addEventListener("message",e.receiveMessage),e.currentFormView==="formAlpaca"+t.partNo+e.id?e.currentFormView="":e.currentFormView="formAlpaca"+t.partNo+e.id,e.pstEl=e.endEl=0,setTimeout((function(){window.$('div[id="formAlpaca'+t.partNo+e.id+'"]').height()>200&&(e.pstEl=window.$('div[id="wrapForm'+t.partNo+e.id+'"]').offset().top,e.endEl=window.$('div[id="formAlpaca'+t.partNo+e.id+'"]').height(),jquery__WEBPACK_IMPORTED_MODULE_0___default()(window).scroll((function(){e.pstFixed=jquery__WEBPACK_IMPORTED_MODULE_0___default()(window).scrollTop()})))}),500);var a=e.dossierFilesItems.find((function(e){return e.dossierPartNo===t.partNo&&e.eForm}));a?(console.log("fileFind",a),a.fileSize?(a["id"]=e.id,t["editForm"]=!1,e.$store.dispatch("viewFile",a).then((function(t){document.getElementById("displayPDF"+a.dossierPartNo+e.id).src=t}))):(t["editForm"]=!1,t.formData=a.formData,t["editForm"]=!0,t["templateFileNo"]=e.thongTinHoSo.dossierTemplateNo,e.showAlpacaJSFORM(t,!0))):e.dossierTemplateItemsFilter.forEach((function(a){a.hasForm&&t.partNo===a.partNo&&(a["templateFileNo"]=e.thongTinHoSo.dossierTemplateNo,e.showAlpacaJSFORM(a))}))},editFormAlpaca:function editFormAlpaca(item){var vm=this;item["editForm"]=!0;var fileFind=vm.dossierFilesItems.find((function(t){return t.dossierPartNo===item.partNo&&t.eForm})),eformScript=eval("("+fileFind.formScript+")");if(console.log("eformScript",eformScript),eformScript&&eformScript.hasOwnProperty("eformEmbed")&&eformScript.eformEmbed){item.embed=!0;var userId=window.themeDisplay.getUserId(),userEmail=1===vm.originality?vm.userLoginInfomation.applicantContactEmail:vm.userLoginInfomation.employeeEmail,referenceUid=vm.thongTinHoSo.referenceUid,dossierStatus=vm.thongTinHoSo.dossierStatus,dossierSubStatus=vm.thongTinHoSo.dossierSubStatus,templateNo=item.partNo,deliverableType=item.deliverableType?item.deliverableType:"",token=localStorage.getItem("jwt_token"),urlEmbed=eformScript.eformEmbed+"/"+item.fileTemplateNo+"/referenceUid/"+referenceUid+"/"+token+"/"+encodeURIComponent(document.location.origin)+"?userId="+userId+"&userEmail="+userEmail+"&code="+referenceUid+"&dossierStatus="+dossierStatus+"&dossierSubStatus="+dossierSubStatus+"&tp="+templateNo;setTimeout((function(){document.getElementById("formAlpaca"+item.partNo+vm.id).src=urlEmbed}),300)}else item.embed=!1,setTimeout((function(){var t=vm.dossierFilesItems.find((function(t){return t.dossierPartNo===item.partNo&&t.eForm}));t["id"]=vm.id,vm.$store.dispatch("loadAlpcaForm",t)}),200)},deleteSingleFileEform:function(t,e){var a=this,i=confirm("Bạn có chắc chắn xóa file?");i&&a.dossierFilesItems.forEach((function(i){i.dossierPartNo===t.partNo&&i.eForm&&(i["dossierId"]=a.thongTinHoSo.dossierId,a.$store.dispatch("deleteDossierFile",i).then((function(i){a.dossierTemplateItemsFilter[e].daKhai=!1,a.$store.dispatch("loadDossierFiles",a.thongTinHoSo.dossierId).then((function(i){if(a.dossierFilesItems=i,a.recountFileTemplates(),t["editForm"]=!0,setTimeout((function(){a.loadAlpcaForm(t)}),200),0!==a.dossierFilesItems.length){var o=a.dossierFilesItems.filter((function(e){return e.dossierPartNo===t.partNo}));a.dossierTemplateItemsFilter[e]["passRequired"]=!!o}else a.dossierTemplateItemsFilter[e]["passRequired"]=!1}))})))}))},previewFileEfom:function(t,e){var a=this;a.dossierFilesItems.forEach((function(e){e.dossierPartNo===t.partNo&&e.eForm&&!e.removed&&(e["dossierId"]=a.thongTinHoSo.dossierId,a.dialogPDFLoading=!0,a.dialogPDF=!0,a.onlyView?a.$store.dispatch("viewFile",e).then((function(t){a.dialogPDFLoading=!1,e["eForm"]?a.pdfEform=!0:a.pdfEform=!1,document.getElementById("dialogPDFPreview"+a.id).src=t})):(e["id"]=a.id,a.$store.dispatch("putAlpacaForm",e).then((function(t){setTimeout((function(){a.$store.dispatch("viewFile",e).then((function(t){a.dialogPDFLoading=!1,document.getElementById("dialogPDFPreview"+a.id).src=t}))}),1e3)})).catch((function(t){toastr__WEBPACK_IMPORTED_MODULE_1___default.a.clear(),toastr__WEBPACK_IMPORTED_MODULE_1___default.a.error("Yêu cầu của bạn thực hiện thất bại.")}))))}))},previewFormAlpaca:function previewFormAlpaca(item,index){var vm=this;vm.dossierFilesItems.forEach((function(file){if(file.dossierPartNo===item.partNo&&file.eForm&&!file.removed)if(file["dossierId"]=vm.thongTinHoSo.dossierId,vm.onlyView)item["editForm"]=!1,vm.$store.dispatch("viewFile",file).then((function(t){file["eForm"]?vm.pdfEform=!0:vm.pdfEform=!1,document.getElementById("displayPDF"+item.dossierPartNo+vm.id).src=t}));else{var eformScript=eval("("+file.formScript+")");eformScript&&eformScript.hasOwnProperty("eformEmbed")&&eformScript.eformEmbed?(item["editForm"]=!1,setTimeout((function(){vm.$store.dispatch("viewFile",file).then((function(t){document.getElementById("displayPDF"+file.dossierPartNo+vm.id).src=t}))}),500)):(file["id"]=vm.id,vm.$store.dispatch("putAlpacaForm",file).then((function(t){item["editForm"]=!1,setTimeout((function(){vm.$store.dispatch("viewFile",file).then((function(t){document.getElementById("displayPDF"+file.dossierPartNo+vm.id).src=t}))}),500)})).catch((function(t){toastr__WEBPACK_IMPORTED_MODULE_1___default.a.clear(),toastr__WEBPACK_IMPORTED_MODULE_1___default.a.error("Yêu cầu của bạn thực hiện thất bại.")})))}}))},deleteSingleFile:function(t,e){var a=this,i=confirm("Bạn có chắc chắn xóa file đính kèm ?");i&&(t["dossierId"]=a.thongTinHoSo.dossierId,a.$store.dispatch("deleteDossierFile",t).then((function(i){a.fileViews.splice(e,1),a.partView=t.dossierPartNo,a.$store.dispatch("loadDossierFiles",a.thongTinHoSo.dossierId).then((function(e){a.dossierFilesItems=e,a.setDaKhai(t)}))})).catch((function(t){toastr__WEBPACK_IMPORTED_MODULE_1___default.a.clear(),toastr__WEBPACK_IMPORTED_MODULE_1___default.a.error("Yêu cầu của bạn thực hiện thất bại.")})))},downloadSingleFile:function(t){var e=this,a=e.initDataResource.dossierApi+"/"+e.thongTinHoSo.dossierId+"/files/"+t.referenceUid;window.location.assign(a)},viewFile:function(t){var e=this,a=this;a.dossierFilesItems.forEach((function(i){i["dossierId"]=a.thongTinHoSo.dossierId,i.dossierPartNo===t.partNo&&e.$store.dispatch("viewFile",i)}))},viewFileAlpaca:function(t){var e=this,a=0;e.loadingApacal=!0;var i=function i(){setTimeout((function(){e.$store.dispatch("viewFile",t).then((function(o){"pending"===o&&a<=10?(a+=1,i()):a>10?e.loadingApacal=!1:(e.loadingApacal=!1,setTimeout((function(){document.getElementById("displayPDF"+t.dossierPartNo+e.id).src=o}),100))})).catch((function(){e.loadingApacal=!1}))}),1e3)};i()},setDaKhai:function(t){var e=this,a=e.dossierFilesItems.findIndex((function(e){return e.dossierPartNo===t.dossierPartNo}));if(-1===a){for(var i=0;i<e.dossierTemplateItemsFilter.length;i++)if(e.dossierTemplateItemsFilter[i].partNo===t.dossierPartNo){e.dossierTemplateItemsFilter[i]["passRequired"]=!1;break}}else for(i=0;i<e.dossierTemplateItemsFilter.length;i++)if(e.dossierTemplateItemsFilter[i].partNo===t.dossierPartNo){e.dossierTemplateItemsFilter[i]["passRequired"]=!0;break}},checkPartType3:function(){var t=this;if(0!==t.dossierTemplateItems.length)for(var e=0;e<t.dossierTemplateItems.length;e++)if(3===t.dossierTemplateItems[e].partType)return!0;return!1},viewFile2:function(t){var e=this;if(0!==t.fileSize)if(t["eForm"]?e.pdfEform=!0:e.pdfEform=!1,"doc"===t.fileType||"docx"===t.fileType||"xlsx"===t.fileType||"xls"===t.fileType||"zip"===t.fileType||"rar"===t.fileType||"txt"===t.fileType||"mp3"===t.fileType||"mp4"===t.fileType){var a=e.initDataResource.dossierApi+"/"+e.thongTinHoSo.dossierId+"/files/"+t.referenceUid;window.location.assign(a)}else t["dossierId"]=e.thongTinHoSo.dossierId,t.referenceUid?(e.dialogPDFLoading=!0,e.dialogPDF=!0,e.$store.dispatch("viewFile",t).then((function(t){e.dialogPDFLoading=!1,document.getElementById("dialogPDFPreview"+e.id).src=t}))):(toastr__WEBPACK_IMPORTED_MODULE_1___default.a.clear(),toastr__WEBPACK_IMPORTED_MODULE_1___default.a.error("File dữ liệu không tồn tại"))},attachToDossier:function(t,e){var a=this;console.log(t,e),t["dossierId"]=a.thongTinHoSo.dossierId,3!==t.partType&&(a.progressUploadPart=t.dossierFileId,a.$store.dispatch("copyFile",t).then((function(t){a.progressUploadPart="",a.dossierTemplateItemsFilter[e]["passRequired"]=!0,a.$store.dispatch("loadDossierFiles",a.thongTinHoSo.dossierId).then((function(t){a.dossierFilesItems=t,a.recountFileTemplates()}))})).catch((function(t){a.progressUploadPart="",toastr__WEBPACK_IMPORTED_MODULE_1___default.a.error("Đính kèm tài liệu thất bại")})))},viewGiayToDaNop:function(t){var e=this;if(0!==t.fileSize)if(t["eForm"]?e.pdfEform=!0:e.pdfEform=!1,"doc"===t.fileType||"docx"===t.fileType||"xlsx"===t.fileType||"xls"===t.fileType||"zip"===t.fileType||"rar"===t.fileType||"txt"===t.fileType||"mp3"===t.fileType||"mp4"===t.fileType){var a=e.initDataResource.dossierApi+"/"+t.dossierId+"/files/"+t.referenceUid;window.location.assign(a)}else t.referenceUid?(e.dialogPDFLoading=!0,e.dialogPDF=!0,e.$store.dispatch("viewFile",t).then((function(t){e.dialogPDFLoading=!1,document.getElementById("dialogPDFPreview"+e.id).src=t}))):(toastr__WEBPACK_IMPORTED_MODULE_1___default.a.clear(),toastr__WEBPACK_IMPORTED_MODULE_1___default.a.error("File dữ liệu không tồn tại"))},viewFileWithPartNo:function(t){var e=this;if(e.dossierFilesItems){var a=e.dossierFilesItems.filter((function(e){return e.dossierPartNo===t.partNo&&!e.eForm}));if(!a)return;e.fileViews=a,e.partView!==t.partNo?(e.stateView=!0,e.partView=t.partNo):(e.stateView=!e.stateView,e.partView=t.partNo)}},saveMark:function(){var t=this;t.dossierTemplateItemsFilter&&t.dossierTemplateItemsFilter.forEach((function(e,a){1===e.partType&&e.fileMark&&!e.recordCountDefault&&(e["dossierId"]=t.thongTinHoSo.dossierId,t.$store.dispatch("postDossierMark",e))}))},changeFileMark:function(t,e){var a=this;if(!a.onlyView){var i=a.dossierTemplateItemsFilter[e];i["dossierId"]=a.thongTinHoSo.dossierId,i["fileMark"]=t,i["checkInput"]=a.checkInput,a.$store.dispatch("postDossierMark",i),a.dossierTemplateItemsFilter[e].fileMark=t,a.dossierTemplateItemsFilter[e].hasTemplate="0"!==String(a.dossierTemplateItemsFilter[e].fileMark),0===t&&(a.dossierTemplateItemsFilter[e].recordCount=0)}},changeHasTemplate:function(t,e){var a=this;e["dossierId"]=a.thongTinHoSo.dossierId,setTimeout((function(){e["hasTemplate"]?(e.fileMark=e.fileMarkDefault,e.recordCount=1):(e.fileMark=0,e.recordCount=0),a.$store.dispatch("postDossierMark",e)}),100)},changeHasTemplateLienThong:function(t,e){var a=this;setTimeout((function(){if(e["hasTemplateLienThong"])a.dossierTemplateLienThong.push(e.partNo),a.$store.commit("setDossierTemplateLienThong",a.dossierTemplateLienThong);else{var t=a.dossierTemplateLienThong.filter((function(t){return t!==e.partNo}));a.dossierTemplateLienThong=t,a.$store.commit("setDossierTemplateLienThong",a.dossierTemplateLienThong)}}),100)},changeFileCheck:function(t,e){var a=this,i=a.dossierTemplateItemsFilter[e];i["dossierId"]=a.thongTinHoSo.dossierId,i["fileCheck"]=t,i["checkInput"]=a.checkInput,2!==t?(i["fileComment"]="",a.$store.dispatch("postDossierMark",i),a.dossierTemplateItemsFilter[e].fileCheck=t):i["stateEditFileCheck"]=!0},changeFileComment:function(t,e){var a=this;null!==t.fileComment&&void 0!==t.fileComment&&""!==t.fileComment&&(t["dossierId"]=a.thongTinHoSo.dossierId,t["fileComment"]=t.fileComment,t["checkInput"]=a.checkInput,t["stateEditFileCheck"]=!t["stateEditFileCheck"],a.$store.dispatch("postDossierMark",t),a.dossierTemplateItemsFilter[e].fileComment=t.fileComment)},checkStyle:function(t){var e=this;if(1===e.checkInput)return"calc(100% - 140px)";var a=0;return 1===e.originality||1!==t.partType||e.thongTinHoSo.online||1===e.checkInput||(e.onlyView?a+=140:a+=240),t.fileCheck>0&&!e.thongTinHoSo.online&&(a+=20),t.fileCheck>0&&e.thongTinHoSo.online&&(a+=40),e.onlyView||(a+=90),"calc(100% - "+a+"px)"},checkVisibleTemp:function(t,e){var a=this;if(!a.onlyView)return!0;if(3===t.partType){if(a.dossierFilesItems.length>0){var i=a.dossierFilesItems.findIndex((function(e){return e.dossierPartNo===t.partNo}));return-1!==i}return!1}return!0},changeStateViewResult:function(){var t=this;if(t.dossierFilesItems.length>0){var e=t.dossierFilesItems.findIndex((function(t){return 2===t.dossierPartType||7===t.dossierPartType}));-1!==e?t.$emit("tp:change-state-view-result",!0):t.$emit("tp:change-state-view-result",!1)}else(t.partTypes.includes(2)||t.partTypes.includes(7))&&t.$emit("tp:change-state-view-result",!1)},changeOtherDossierTemp:function(t){var e=this;if(3===e.originality&&e.stateAddFileOther)e.loadingAddOther=!0,e.$store.dispatch("uploadSingleOtherFile",{dossierId:e.thongTinHoSo.dossierId,displayName:t,partNo:e.dossierTemplatesItemSelect.partNo}).then((function(t){e.loadingAddOther=!1,e.dialogAddOtherTemp=!1,e.$store.dispatch("loadDossierFiles",e.thongTinHoSo.dossierId).then((function(t){e.dossierFilesItems=t}))})).catch((function(t){e.loadingAddOther=!1}));else{var a=e.dossierTemplatesItemSelect;a["dossierId"]=e.thongTinHoSo.dossierId,a["displayName"]=t,a["dossierTemplateNo"]=e.thongTinHoSo.dossierTemplateNo,e.$store.dispatch("uploadSingleFile",a).then((function(t){e.progressUploadPart="",e.dialogAddOtherTemp=!1,e.$store.dispatch("loadDossierFiles",e.thongTinHoSo.dossierId).then((function(t){if(e.dossierFilesItems=t,e.recountFileTemplates(),e.stateView&&e.dossierFilesItems){var a=e.dossierFilesItems.filter((function(t){return t.dossierPartNo===e.dossierTemplatesItemSelect.partNo&&!t.eForm}));a&&(e.fileViews=a)}}))})).catch((function(t){e.progressUploadPart=""}))}},downloadFileTemplate:function(t,e){var a=this;if(a.fileTemplateItems.length>0){var i=a.fileTemplateItems.find((function(e){return t.fileTemplateNo===e.fileTemplateNo}));if(i){var o=a.initDataResource.serviceInfoApi+"/"+a.serviceInfoId+"/filetemplates/"+i.fileTemplateNo;window.location.assign(o)}else console.log("ko thay file")}},addOtherTemplate:function(){var t=this;t.$refs.form.validate()&&t.changeOtherDossierTemp(t.otherDossierTemplate)},editDisplayName:function(t,e){var a=this;a.dossierFileIdView!==t.dossierFileId?(a.dossierFileIdView=t.dossierFileId,a.stateEdit=!0):(a.dossierFileIdView=t.dossierFileId,a.stateEdit=!a.stateEdit)},cancelDialog:function(){var t=this;t.dialogAddOtherTemp=!1,t.progressUploadPart=""},addFileOther:function(t){var e=this;e.dialogAddOtherTemp=!0,e.stateAddFileOther=!0,e.dossierTemplatesItemSelect=t},validDossierTemplate:function(){var t=this;if(t.dossierTemplateItemsFilter.length>0){for(var e=0;e<t.dossierTemplateItemsFilter.length;e++)if(t.dossierTemplateItemsFilter[e]["required"]&&!t.dossierTemplateItemsFilter[e]["passRequired"]&&t.partTypes.includes(t.dossierTemplateItemsFilter[e].partType)){var a="Chú ý :"+t.dossierTemplateItemsFilter[e].partName+" là thành phần bắt buộc!";return toastr__WEBPACK_IMPORTED_MODULE_1___default.a.clear(),toastr__WEBPACK_IMPORTED_MODULE_1___default.a.error(a),!1}return!0}return!0},changeDisplayName:function(t,e){var a=this,i={dossierId:a.thongTinHoSo.dossierId,value:value};a.$store.dispatch("changeDisplayNameFile",i).then((function(t){a.fileViews[e].displayName=t.displayName,a.stateEdit=!1})).catch((function(t){console.log("error")}))},getDossierFileApplicants:function(t,e){var a=this,i={dossierId:a.thongTinHoSo.dossierId,applicantIdNo:t,fileTemplateNo:e};a.$store.dispatch("getDossierFilesApplicants",i).then((function(t){a.dossierFilesApplicant=t})).catch((function(t){console.log("error")}))},showFilesApplicant:function(t){jquery__WEBPACK_IMPORTED_MODULE_0___default()("#fileApplicant-"+t).is(":visible")?jquery__WEBPACK_IMPORTED_MODULE_0___default()("#fileApplicant-"+t).hide():jquery__WEBPACK_IMPORTED_MODULE_0___default()("#fileApplicant-"+t).show()},checkKQhasFile:function(t){var e=this;if(e.partTypes.includes(2)){var a=e.dossierFilesItems.find((function(e){return t.partNo===e.dossierPartNo}));return!!a}return!0},partNoApplicantHasFile:function(t){var e=this,a=e.dossierFilesApplicant.find((function(a){return a.dossierTemplateNo===e.thongTinHoSo["dossierTemplateNo"]&&a.dossierPartNo===t}));return!!a},changeRecordCount:function(t){var e=this;if(!e.onlyView){var a=function(){e.doChange[t]=setTimeout((function(){if(!e.onlyView&&Number(e.dossierTemplateItemsFilter[t]["recordCount"])>=0){var a=Object.assign({},e.dossierTemplateItemsFilter[t],{dossierId:e.thongTinHoSo.dossierId});e.$store.dispatch("postDossierMark",a)}}),1e3)};e.dossierTemplateItemsFilter[t].recordCount=e.dossierTemplateItemsFilter[t]["recordCount"]?e.dossierTemplateItemsFilter[t]["recordCount"]:"",clearTimeout(e.doChange[t]),a()}},increaseCounter:function(t){var e=this;function a(){e.doChange[t]=setTimeout((function(){if(!e.onlyView&&Number(e.dossierTemplateItemsFilter[t]["recordCount"])>=0){var a=Object.assign({},e.dossierTemplateItemsFilter[t],{dossierId:e.thongTinHoSo.dossierId});e.$store.dispatch("postDossierMark",a)}}),1e3)}e.dossierTemplateItemsFilter[t].recordCount=e.dossierTemplateItemsFilter[t]["recordCount"]?e.dossierTemplateItemsFilter[t]["recordCount"]:"",e.dossierTemplateItemsFilter[t]["recordCount"]=Number(e.dossierTemplateItemsFilter[t]["recordCount"])+1,clearTimeout(e.doChange[t]),a()},decreaseCounter:function(t){var e=this;function a(){e.doChange[t]=setTimeout((function(){if(!e.onlyView&&Number(e.dossierTemplateItemsFilter[t]["recordCount"])>=0){var a=Object.assign({},e.dossierTemplateItemsFilter[t],{dossierId:e.thongTinHoSo.dossierId});e.$store.dispatch("postDossierMark",a)}}),1e3)}e.dossierTemplateItemsFilter[t].recordCount=e.dossierTemplateItemsFilter[t]["recordCount"]?e.dossierTemplateItemsFilter[t]["recordCount"]:"",e.dossierTemplateItemsFilter[t]["recordCount"]=e.dossierTemplateItemsFilter[t]["recordCount"]?Number(e.dossierTemplateItemsFilter[t]["recordCount"])-1:e.dossierTemplateItemsFilter[t]["recordCount"],clearTimeout(e.doChange[t]),a()},attachFileFromStorage:function(t){var e=this,a={dossierId:e.thongTinHoSo.dossierId,dossierTemplateNo:e.thongTinHoSo.dossierTemplateNo,partNo:e.dossierPartAttach.partNo,filePath:t.filePath,fileName:t.fileName,fileType:t.fileExtension};console.log("data storage",a),3!==e.dossierPartAttach.partType&&e.$store.dispatch("copyFileFromStorage",a).then((function(t){e.dialog_documentApplicant=!1,e.dossierTemplateItemsFilter[e.indexPart]["passRequired"]=!0,e.$store.dispatch("loadDossierFiles",e.thongTinHoSo.dossierId).then((function(t){e.dossierFilesItems=t,e.recountFileTemplates()}))})).catch((function(t){e.dialog_documentApplicant=!1,toastr__WEBPACK_IMPORTED_MODULE_1___default.a.error("Đính kèm tài liệu thất bại")}))},getDocumentTypeIcon:function(t){var e="doc,docx",a="xls,xlsx",i="png,jpg,jpeg";return t?e.indexOf(t.toLowerCase())>=0?{icon:"fas fa fa-file-word-o",color:"blue",size:14}:a.indexOf(t.toLowerCase())>=0?{icon:"fas fa fa-file-excel-o",color:"green",size:14}:"pdf"===t.toLowerCase()?{icon:"fa fa-file-pdf-o",color:"red",size:14}:i.indexOf(t.toLowerCase())>=0?{icon:"fas fa fa-file-image-o",color:"primary",size:14}:{icon:"fas fa fa-paperclip",color:"",size:14}:""},showDocumentApplicant:function(t,e){var a=this;a.dossierPartAttach=t,a.indexPart=e,a.$refs.khotailieu.initData(),a.dialog_documentApplicant=!0}}}},"96b0":function(t,e,a){"use strict";var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("v-form",{ref:"formChuHoSo",attrs:{"lazy-validation":""},model:{value:t.valid_thongtinchuhoso,callback:function(e){t.valid_thongtinchuhoso=e},expression:"valid_thongtinchuhoso"}},[a("div",[a("div",{staticStyle:{position:"relative"}},[a("v-expansion-panel",{staticClass:"expansion-pl",attrs:{value:[!0],expand:""}},[a("v-expansion-panel-content",[a("div",{attrs:{slot:"header"},slot:"header"},[a("div",{staticClass:"background-triangle-small"},[a("v-icon",{attrs:{size:"18",color:"white"}},[t._v("star_rate")])],1),t._v(" Thông tin chủ hồ sơ")]),a("v-card",[a("v-card-text",{staticClass:"pt-3"},[a("v-layout",{attrs:{wrap:""}},[a("v-flex",{staticClass:"mb-2",attrs:{xs12:"",sm2:""}},[a("v-subheader",{staticClass:"pl-0"},[t._v(" Họ và tên"),t.requiredOptions["applicantName"]?a("span",{staticStyle:{color:"red"}},[t._v("  *")]):t._e(),t._v(": ")])],1),a("v-flex",{staticClass:"mb-2",attrs:{xs12:"",sm4:""}},[a("v-text-field",{attrs:{disabled:t.loadingVerify,rules:t.requiredOptions["applicantName"]?[t.rules.required,t.rules.varchar500]:"",required:t.requiredOptions["applicantName"]},on:{change:function(e){t.applicantName=String(t.applicantName).trim()}},model:{value:t.applicantName,callback:function(e){t.applicantName=e},expression:"applicantName"}})],1),a("v-flex",{staticClass:"mb-2",attrs:{xs12:"",sm2:""}},[a("v-subheader",{staticClass:"pl-0"},[t._v("Giới tính "),a("span",{staticStyle:{color:"red"}},[t._v(" *")]),t._v(": ")])],1),a("v-flex",{staticClass:"mb-2",staticStyle:{position:"relative"},attrs:{xs12:"",sm4:""}},[a("v-radio-group",{staticClass:"mt-0",attrs:{row:""},model:{value:t.gender,callback:function(e){t.gender=e},expression:"gender"}},[a("v-radio",{staticClass:"mr-4",attrs:{label:"Nam",value:0}}),a("v-radio",{attrs:{label:"Nữ",value:1}})],1)],1),a("v-flex",{staticClass:"mb-2",attrs:{xs12:"",sm2:""}},[a("v-subheader",{staticClass:"pl-0"},[t._v("Ngày tháng năm sinh"),a("span",{staticStyle:{color:"red"}},[t._v(" *")]),t._v(": ")])],1),a("v-flex",{staticClass:"mb-2",staticStyle:{position:"relative"},attrs:{xs12:"",sm4:""}},[a("v-layout",{attrs:{wrap:""}},[a("v-flex",{staticClass:"pr-2",attrs:{xs12:"",sm4:""}},[a("v-autocomplete",{attrs:{"hide-no-data":"",items:t.days,placeholder:"Ngày","hide-selected":!0},on:{change:function(e){t.changeDate()}},model:{value:t.birthDateDay,callback:function(e){t.birthDateDay=e},expression:"birthDateDay"}})],1),a("v-flex",{staticClass:"pr-2",attrs:{xs12:"",sm4:""}},[a("v-layout",{attrs:{wrap:""}},[a("v-flex",{staticClass:"pt-2",staticStyle:{width:"17px","max-width":"17px","font-size":"18px"}},[a("span",[t._v("/")])]),a("v-flex",{staticStyle:{width:"calc(100% - 20px)"}},[a("v-autocomplete",{attrs:{"hide-no-data":"",items:t.months,placeholder:"Tháng"},on:{change:function(e){t.changeDate()}},model:{value:t.birthDateMonth,callback:function(e){t.birthDateMonth=e},expression:"birthDateMonth"}})],1)],1)],1),a("v-flex",{attrs:{xs12:"",sm4:""}},[a("v-layout",{attrs:{wrap:""}},[a("v-flex",{staticClass:"pt-2",staticStyle:{width:"17px","max-width":"17px","font-size":"18px"}},[a("span",[t._v("/")])]),a("v-flex",{staticStyle:{width:"calc(100% - 20px)"}},[a("v-autocomplete",{attrs:{"hide-no-data":"",placeholder:"Năm",items:t.years,rules:[t.rules.required],required:""},on:{change:function(e){t.changeDate()}},model:{value:t.birthDateYear,callback:function(e){t.birthDateYear=e},expression:"birthDateYear"}})],1)],1)],1)],1)],1),a("v-flex",{staticClass:"mb-2",attrs:{xs12:"",sm2:""}},[a("v-subheader",{staticClass:"pl-0"},[t._v("CMND/ hộ chiếu"),t.requiredOptions["applicantIdNo"]?a("span",{staticStyle:{color:"red"}},[t._v(" *")]):t._e(),t._v(": ")])],1),a("v-flex",{staticClass:"mb-2",staticStyle:{position:"relative"},attrs:{xs12:"",sm4:""}},[a("v-text-field",{attrs:{rules:t.requiredOptions["applicantIdNo"]?[t.rules.required,t.rules.varchar100]:[t.rules.varchar100],required:t.requiredOptions["applicantIdNo"]},on:{change:function(e){t.applicantIdNo=String(t.applicantIdNo).trim()}},model:{value:t.applicantIdNo,callback:function(e){t.applicantIdNo=e},expression:"applicantIdNo"}})],1),a("v-flex",{staticClass:"mb-2",attrs:{xs12:"",sm2:""}},[a("v-subheader",{staticClass:"pl-0"},[t._v(" Quê quán"),a("span",{staticStyle:{color:"red"}},[t._v("  *")]),t._v(": ")])],1),a("v-flex",{staticClass:"mb-2",attrs:{xs12:"",sm10:""}},[a("v-layout",{attrs:{wrap:""}},[a("v-flex",{staticClass:"pr-3",attrs:{xs12:"",sm4:""}},[a("v-autocomplete",{attrs:{"hide-no-data":"",items:t.cityItems,placeholder:"Tỉnh/thành phố",rules:[t.rules.required],required:"","item-text":"itemName","item-value":"itemCode","hide-selected":!0},on:{change:function(e){t.onChangeCity(e,"districtNativeItems","wardNativeItems")}},model:{value:t.cityNativeCode,callback:function(e){t.cityNativeCode=e},expression:"cityNativeCode"}})],1),a("v-flex",{staticClass:"px-3",attrs:{xs12:"",sm4:""}},[a("v-autocomplete",{attrs:{"hide-no-data":"",items:t.districtNativeItems,placeholder:"Quận/huyện",rules:[t.rules.required],required:"","item-text":"itemName","item-value":"itemCode","hide-selected":!0},on:{change:function(e){t.onChangeDistrict(e,"wardNativeItems")}},model:{value:t.districtNativeCode,callback:function(e){t.districtNativeCode=e},expression:"districtNativeCode"}})],1),a("v-flex",{staticClass:"pl-3",attrs:{xs12:"",sm4:""}},[a("v-autocomplete",{attrs:{"hide-no-data":"",placeholder:"Xã/phường",items:t.wardNativeItems,rules:[t.rules.required],required:"","item-text":"itemName","item-value":"itemCode","hide-selected":!0},on:{change:function(e){t.onChangeWard(e,"wardNative")}},model:{value:t.wardNativeCode,callback:function(e){t.wardNativeCode=e},expression:"wardNativeCode"}})],1)],1)],1),a("v-flex",{staticClass:"mb-2",attrs:{xs12:"",sm2:""}},[a("v-subheader",{staticClass:"pl-0"},[t._v(" Tình trạng"),a("span",{staticStyle:{color:"red"}},[t._v("  *")]),t._v(": ")])],1),a("v-flex",{staticClass:"mb-2",attrs:{xs12:"",sm10:""}},[a("div",[a("v-radio-group",{staticClass:"mt-0",attrs:{row:""},model:{value:t.state,callback:function(e){t.state=e},expression:"state"}},[a("v-radio",{staticClass:"mr-4",attrs:{label:"Còn sống",value:0}}),a("v-radio",{attrs:{label:"Đã chết",value:1}})],1)],1)]),a("v-flex",{staticClass:"mb-2",attrs:{xs12:"",sm2:""}},[a("v-subheader",{staticClass:"pl-0"},[t._v(" Nơi đăng ký HKTT"),a("span",{staticStyle:{color:"red"}},[t._v("  *")]),t._v(": ")])],1),a("v-flex",{staticClass:"mb-2",attrs:{xs12:"",sm10:""}},[a("v-text-field",{attrs:{clearable:"",rules:[t.rules.required,t.rules.varchar500],required:""},on:{change:function(e){t.address=String(t.address).trim()}},model:{value:t.address,callback:function(e){t.address=e},expression:"address"}})],1),a("v-flex",{staticClass:"mb-2",attrs:{xs12:"",sm2:""}}),a("v-flex",{staticClass:"mb-2",attrs:{xs12:"",sm10:""}},[a("v-layout",{attrs:{wrap:""}},[a("v-flex",{staticClass:"pr-3",attrs:{xs12:"",sm4:""}},[a("v-autocomplete",{attrs:{"hide-no-data":"",items:t.cityItems,placeholder:"Tỉnh/thành phố",rules:[t.rules.required],required:"","item-text":"itemName","item-value":"itemCode","hide-selected":!0},on:{change:function(e){t.onChangeCity(e,"districtItems","wardItems")}},model:{value:t.cityCode,callback:function(e){t.cityCode=e},expression:"cityCode"}})],1),a("v-flex",{staticClass:"px-3",attrs:{xs12:"",sm4:""}},[a("v-autocomplete",{attrs:{"hide-no-data":"",items:t.districtItems,placeholder:"Quận/huyện",rules:[t.rules.required],required:"","item-text":"itemName","item-value":"itemCode","hide-selected":!0},on:{change:function(e){t.onChangeDistrict(e,"wardItems")}},model:{value:t.districtCode,callback:function(e){t.districtCode=e},expression:"districtCode"}})],1),a("v-flex",{staticClass:"pl-3",attrs:{xs12:"",sm4:""}},[a("v-autocomplete",{attrs:{"hide-no-data":"",placeholder:"Xã/phường",items:t.wardItems,rules:[t.rules.required],required:"","item-text":"itemName","item-value":"itemCode","hide-selected":!0},model:{value:t.wardCode,callback:function(e){t.wardCode=e},expression:"wardCode"}})],1)],1)],1),a("v-flex",{staticClass:"mb-2",attrs:{xs12:"",sm2:""}},[a("v-subheader",{staticClass:"pl-0"},[t._v(" Số tháng được hưởng"),a("span",{staticStyle:{color:"red"}},[t._v("  *")]),t._v(": ")])],1),a("v-flex",{staticClass:"mb-2",attrs:{xs12:"",sm4:""}},[a("v-text-field",{attrs:{rules:[t.rules.required,t.rules.varchar50],required:""},on:{keyup:function(e){t.formatCurrentYearPayment(e)},change:function(e){t.yearPayment=String(t.yearPayment).trim()}},model:{value:t.yearPayment,callback:function(e){t.yearPayment=e},expression:"yearPayment"}})],1),a("v-flex",{staticClass:"mb-2",attrs:{xs12:"",sm2:""}},[a("v-subheader",{staticClass:"pl-0"},[t._v(" Mức trợ cấp"),a("span",{staticStyle:{color:"red"}},[t._v("  *")]),t._v(": ")])],1),a("v-flex",{staticClass:"mb-2",attrs:{xs12:"",sm4:""}},[a("v-text-field",{attrs:{rules:[t.rules.required,t.rules.varchar100],required:""},on:{keyup:function(e){t.formatCurrent(e)},change:function(e){t.subsidy=String(t.subsidy).trim()}},model:{value:t.subsidy,callback:function(e){t.subsidy=e},expression:"subsidy"}})],1),a("v-flex",{staticClass:"mb-2",attrs:{xs12:"",sm2:""}},[a("v-subheader",{staticClass:"pl-0"},[t._v("Số điện thoại : ")])],1),a("v-flex",{staticClass:"mb-2",attrs:{xs12:"",sm4:""}},[a("v-text-field",{attrs:{"append-icon":"phone",rules:[t.rules.telNo,t.rules.varchar100]},on:{change:function(e){t.contactTelNo=String(t.contactTelNo).trim()}},model:{value:t.contactTelNo,callback:function(e){t.contactTelNo=e},expression:"contactTelNo"}})],1),a("v-flex",{staticClass:"mb-2",attrs:{xs12:"",sm2:""}},[a("v-subheader",{staticClass:"pl-0"},[t._v("Địa chỉ email "),t.requiredOptions["contactEmail"]?a("span",{staticStyle:{color:"red"}},[t._v(" *")]):t._e(),t._v(": ")])],1),a("v-flex",{staticClass:"mb-2",attrs:{xs12:"",sm4:""}},[a("v-text-field",{attrs:{rules:t.requiredOptions["contactEmail"]?[t.rules.email,t.rules.required]:t.contactEmail?[t.rules.email]:"",required:t.requiredOptions["contactEmail"]},on:{change:function(e){t.contactEmail=String(t.contactEmail).trim()}},model:{value:t.contactEmail,callback:function(e){t.contactEmail=e},expression:"contactEmail"}})],1),a("v-flex",{staticClass:"mb-2",attrs:{xs12:"",sm2:""}},[a("v-subheader",{staticClass:"pl-0"},[t._v(" Bí danh"),t.requiredOptions["anonymName"]?a("span",{staticStyle:{color:"red"}},[t._v("  *")]):t._e(),t._v(": ")])],1),a("v-flex",{staticClass:"mb-2",attrs:{xs12:"",sm4:""}},[a("v-text-field",{attrs:{rules:t.requiredOptions["anonymName"]?[t.rules.required,t.rules.varchar500]:[t.rules.varchar500],required:t.requiredOptions["anonymName"]},on:{change:function(e){t.anonymName=String(t.anonymName).trim()}},model:{value:t.anonymName,callback:function(e){t.anonymName=e},expression:"anonymName"}})],1),a("v-flex",{staticClass:"mb-2 pt-1",attrs:{xs12:"",sm2:""}},[a("v-subheader",{staticClass:"pl-0"},[t._v(" Là đối tượng"),t.requiredOptions["incidence"]?a("span",{staticStyle:{color:"red"}},[t._v("  *")]):t._e(),t._v(": ")])],1),a("v-flex",{staticClass:"mb-2 pt-1",staticStyle:{position:"relative"},attrs:{xs12:"",sm4:""}},[a("v-radio-group",{staticClass:"mt-0",attrs:{row:""},model:{value:t.incidence,callback:function(e){t.incidence=e},expression:"incidence"}},[a("v-radio",{staticClass:"mr-4",attrs:{label:"Quân nhân",value:0}}),a("v-radio",{attrs:{label:"Cơ yếu",value:1}})],1)],1),a("v-flex",{staticClass:"mb-2",attrs:{xs12:"",sm2:""}},[a("v-subheader",{staticClass:"pl-0"},[t._v("Nhập ngũ, tuyển dụng "),t.requiredOptions["recruitment"]?a("span",{staticStyle:{color:"red"}},[t._v("  *")]):t._e(),t._v(": ")])],1),a("v-flex",{staticClass:"mb-2",attrs:{xs12:"",sm4:""}},[a("v-text-field",{attrs:{rules:t.requiredOptions["recruitment"]?[t.rules.required,t.rules.varchar500]:[t.rules.varchar500],required:t.requiredOptions["recruitment"]},on:{change:function(e){t.recruitment=String(t.recruitment).trim()}},model:{value:t.recruitment,callback:function(e){t.recruitment=e},expression:"recruitment"}})],1),a("v-flex",{staticClass:"mb-2",attrs:{xs12:"",sm2:""}},[a("v-subheader",{staticClass:"pl-0"},[t._v("Phục viên, xuất ngũ, thôi việc "),t.requiredOptions["retire"]?a("span",{staticStyle:{color:"red"}},[t._v("  *")]):t._e(),t._v(": ")])],1),a("v-flex",{staticClass:"mb-2",attrs:{xs12:"",sm4:""}},[a("v-text-field",{attrs:{rules:t.requiredOptions["retire"]?[t.rules.required,t.rules.varchar500]:[t.rules.varchar500],required:t.requiredOptions["retire"]},on:{change:function(e){t.retire=String(t.retire).trim()}},model:{value:t.retire,callback:function(e){t.retire=e},expression:"retire"}})],1),a("v-flex",{staticClass:"mb-2",attrs:{xs12:"",sm2:""}},[a("v-subheader",{staticClass:"pl-0"},[t._v("Tái ngũ "),t.requiredOptions["reactivated"]?a("span",{staticStyle:{color:"red"}},[t._v("  *")]):t._e(),t._v(": ")])],1),a("v-flex",{staticClass:"mb-2",attrs:{xs12:"",sm4:""}},[a("v-text-field",{attrs:{rules:t.requiredOptions["reactivated"]?[t.rules.required,t.rules.varchar500]:[t.rules.varchar500],required:t.requiredOptions["reactivated"]},on:{change:function(e){t.reactivated=String(t.reactivated).trim()}},model:{value:t.reactivated,callback:function(e){t.reactivated=e},expression:"reactivated"}})],1),a("v-flex",{staticClass:"mb-2",attrs:{xs12:"",sm2:""}},[a("v-subheader",{staticClass:"pl-0"},[t._v("Phục viên, xuất ngũ "),t.requiredOptions["published"]?a("span",{staticStyle:{color:"red"}},[t._v("  *")]):t._e(),t._v(": ")])],1),a("v-flex",{staticClass:"mb-2",attrs:{xs12:"",sm4:""}},[a("v-text-field",{attrs:{rules:t.requiredOptions["published"]?[t.rules.required,t.rules.varchar500]:[t.rules.varchar500],required:t.requiredOptions["published"]},on:{change:function(e){t.published=String(t.published).trim()}},model:{value:t.published,callback:function(e){t.published=e},expression:"published"}})],1)],1)],1)],1)],1)],1),a("div",{staticStyle:{position:"relative"}},[a("v-expansion-panel",{staticClass:"expansion-pl",attrs:{value:[!0],expand:""}},[a("v-expansion-panel-content",[a("div",{attrs:{slot:"header"},slot:"header"},[a("div",{staticClass:"background-triangle-small"},[a("v-icon",{attrs:{size:"18",color:"white"}},[t._v("star_rate")])],1),t._v(" Thông tin người nộp hồ sơ")]),a("v-card",[a("v-card-text",[a("v-layout",{attrs:{wrap:""}},[a("v-flex",{attrs:{xs12:"",sm2:""}},[a("v-subheader",{staticClass:"pl-0"},[t._v("CMND/Hộ chiếu "),t.requiredOptions["delegateIdNo"]?a("span",{staticStyle:{color:"red"}},[t._v(" *")]):t._e(),t._v(": ")])],1),a("v-flex",{staticStyle:{position:"relative"},attrs:{xs12:"",sm2:""}},[a("v-text-field",{attrs:{rules:t.requiredOptions["delegateIdNo"]?[t.rules.required,t.rules.varchar100]:[t.rules.varchar100],required:t.requiredOptions["delegateIdNo"]},on:{change:function(e){t.delegateIdNo=String(t.delegateIdNo).trim()}},model:{value:t.delegateIdNo,callback:function(e){t.delegateIdNo=e},expression:"delegateIdNo"}})],1),a("v-flex",{attrs:{xs12:"",sm2:""}},[a("v-subheader",{staticClass:"pl-0"},[t._v("Họ và tên "),t.requiredOptions["delegateName"]?a("span",{staticStyle:{color:"red"}},[t._v(" *")]):t._e(),t._v(": ")])],1),a("v-flex",{attrs:{xs12:"",sm6:""}},[a("v-text-field",{attrs:{rules:t.requiredOptions["delegateName"]?[t.rules.required,t.rules.varchar500]:[t.rules.varchar500],required:t.requiredOptions["delegateName"]},on:{change:function(e){t.delegateName=String(t.delegateName).trim()}},model:{value:t.delegateName,callback:function(e){t.delegateName=e},expression:"delegateName"}})],1),a("v-flex",{attrs:{xs12:"",sm2:""}},[a("v-subheader",{staticClass:"pl-0"},[t._v("Địa chỉ "),t.requiredOptions["delegateAddress"]?a("span",{staticStyle:{color:"red"}},[t._v(" *")]):t._e(),t._v(": ")])],1),a("v-flex",{attrs:{xs12:"",sm10:""}},[a("v-textarea",{attrs:{rows:"2",rules:t.requiredOptions["delegateAddress"]?[t.rules.required,t.rules.varchar500]:[t.rules.varchar500],required:t.requiredOptions["delegateAddress"]},on:{change:function(e){t.delegateAddress=String(t.delegateAddress).trim()}},model:{value:t.delegateAddress,callback:function(e){t.delegateAddress=e},expression:"delegateAddress"}})],1),a("v-flex",{attrs:{xs12:"",sm2:""}},[a("v-subheader",{staticClass:"pl-0"},[t._v("Tỉnh/Thành phố "),t.requiredOptions["delegateCityCode"]?a("span",{staticStyle:{color:"red"}},[t._v(" *")]):t._e(),t._v(": ")])],1),a("v-flex",{attrs:{xs12:"",sm2:""}},[a("v-autocomplete",{attrs:{"hide-no-data":"",items:t.cityItems,"item-text":"itemName","item-value":"itemCode",rules:t.requiredOptions["delegateCityCode"]?[t.rules.required]:"",required:t.requiredOptions["delegateCityCode"]},on:{change:function(e){t.onChangeCity(e,"delegateDistricts","delegateWards")}},model:{value:t.delegateCityCode,callback:function(e){t.delegateCityCode=e},expression:"delegateCityCode"}})],1),a("v-flex",{attrs:{xs12:"",sm2:""}},[a("v-subheader",{staticClass:"pl-0"},[t._v("Quận/Huyện "),t.requiredOptions["delegateDistrictCode"]?a("span",{staticStyle:{color:"red"}},[t._v(" *")]):t._e(),t._v(": ")])],1),a("v-flex",{attrs:{xs12:"",sm2:""}},[a("v-autocomplete",{attrs:{"hide-no-data":"",items:t.delegateDistricts,"item-text":"itemName","item-value":"itemCode",rules:t.requiredOptions["delegateDistrictCode"]?[t.rules.required]:"",required:t.requiredOptions["delegateDistrictCode"]},on:{change:function(e){t.onChangeDistrict(e,"delegateWards")}},model:{value:t.delegateDistrictCode,callback:function(e){t.delegateDistrictCode=e},expression:"delegateDistrictCode"}})],1),a("v-flex",{attrs:{xs12:"",sm2:""}},[a("v-subheader",{staticClass:"pl-0"},[t._v("Xã/Phường "),t.requiredOptions["delegateWardCode"]?a("span",{staticStyle:{color:"red"}},[t._v(" *")]):t._e(),t._v(": ")])],1),a("v-flex",{attrs:{xs12:"",sm2:""}},[a("v-autocomplete",{attrs:{"hide-no-data":"",items:t.delegateWards,"item-text":"itemName","item-value":"itemCode",rules:t.requiredOptions["delegateWardCode"]?[t.rules.required]:"",required:t.requiredOptions["delegateWardCode"]},model:{value:t.delegateWardCode,callback:function(e){t.delegateWardCode=e},expression:"delegateWardCode"}})],1),a("v-flex",{attrs:{xs12:"",sm2:""}},[a("v-subheader",{staticClass:"pl-0"},[t._v("Số điện thoại "),t.requiredOptions["delegateTelNo"]?a("span",{staticStyle:{color:"red"}},[t._v(" *")]):t._e(),t._v(": ")])],1),a("v-flex",{attrs:{xs12:"",sm2:""}},[a("v-text-field",{attrs:{"append-icon":"phone",rules:t.requiredOptions["delegateTelNo"]?[t.rules.telNo,t.rules.required,t.rules.varchar100]:[t.rules.telNo,t.rules.varchar100],required:t.requiredOptions["delegateTelNo"]},on:{change:function(e){t.delegateTelNo=String(t.delegateTelNo).trim()}},model:{value:t.delegateTelNo,callback:function(e){t.delegateTelNo=e},expression:"delegateTelNo"}})],1),a("v-flex",{attrs:{xs12:"",sm2:""}},[a("v-subheader",{staticClass:"pl-0"},[t._v("Địa chỉ email "),t.requiredOptions["delegateEmail"]?a("span",{staticStyle:{color:"red"}},[t._v(" *")]):t._e(),t._v(": ")])],1),a("v-flex",{attrs:{xs12:"",sm6:""}},[a("v-text-field",{attrs:{rules:t.requiredOptions["delegateEmail"]?[t.rules.email,t.rules.required,t.rules.varchar100]:t.delegateEmail?[t.rules.email,t.rules.varchar100]:[t.rules.varchar100],required:t.requiredOptions["delegateEmail"]},on:{change:function(e){t.delegateEmail=String(t.delegateEmail).trim()}},model:{value:t.delegateEmail,callback:function(e){t.delegateEmail=e},expression:"delegateEmail"}})],1)],1)],1)],1)],1)],1),a("div",{staticClass:"absolute__btn",staticStyle:{width:"200px","margin-top":"4px"}},[a("v-checkbox",{staticClass:"mt-1",attrs:{label:"Là chủ hồ sơ"},model:{value:t.sameUser,callback:function(e){t.sameUser=e},expression:"sameUser"}})],1)],1)],1)])])],1)},o=[],n=a("bc3a"),s=a.n(n),r=a("c4f6"),c=a.n(r),l=a("854a"),d=a.n(l),u=a("e722"),h=a("716b");function p(t,e){return v(t)||g(t,e)||m()}function m(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function g(t,e){var a=[],i=!0,o=!1,n=void 0;try{for(var s,r=t[Symbol.iterator]();!(i=(s=r.next()).done);i=!0)if(a.push(s.value),e&&a.length===e)break}catch(c){o=!0,n=c}finally{try{i||null==r["return"]||r["return"]()}finally{if(o)throw n}}return a}function v(t){if(Array.isArray(t))return t}function f(t,e,a){return e in t?Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}d.a.options={closeButton:!0,timeOut:"5000"};var _={components:{suggestions:c.a,"tiny-pagination":u["a"]},props:["requiredConfig","showApplicant","showDelegate","formCode","mauCongVan"],data:function(){var t;return t={applicantName:"",birthDate:"",birthDateDay:"",birthDateMonth:"",birthDateYear:"",applicantIdNo:"",cityItems:[],districtNativeItems:[],wardNativeItems:[],wardNativeCode:"",wardNativeName:"",districtNativeCode:"",districtNativeName:"",cityNativeCode:"",cityNativeName:"",gender:0,state:0,address:"",districtItems:[],wardItems:[],wardCode:"",districtCode:"",cityCode:"",yearPayment:"",subsidy:0,contactTelNo:"",contactEmail:"",anonymName:"",incidence:0,recruitmentItems:"",recruitment:"",retireItems:"",retire:"",reactivatedItems:"",reactivated:"",publishedItems:"",published:"",delegateName:"",delegateIdNo:"",delegateAddress:"",delegateWardCode:"",delegateDistrictCode:"",delegateCityCode:"",delegateTelNo:"",delegateEmail:"",requiredOptions:{applicantIdNo:!1,applicantName:!0,address:!0,cityCode:!0,districtCode:!0,wardCode:!0,contactTelNo:!0,contactEmail:!1,delegateIdNo:!0,delegateName:!0,delegateAddress:!0,delegateCityCode:!1,delegateDistrictCode:!1,delegateWardCode:!1,delegateTelNo:!0,delegateEmail:!1},valid_thongtinchuhoso:!1,loadingVerify:!1,citys:[],delegateDistricts:[],districts:[],delegateWards:[],wards:[]},f(t,"applicantIdNo",""),f(t,"numberPerPage",10),f(t,"applicantPage",1),f(t,"totalApplicantSearch",0),f(t,"bussinessExits",!1),f(t,"validBussinessInfos",!0),f(t,"messageCheckApplicant",""),f(t,"search",null),f(t,"search2",null),f(t,"searchQuery",""),f(t,"selectedSearchItem",null),f(t,"searchOptions",{}),f(t,"functionTimeOut",null),f(t,"rules",{required:function(t){return!!t||"Thông tin bắt buộc"},email:function(t){t=t.trim();var e=/^(([^<>()[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/;return e.test(t)||"Địa chỉ Email không hợp lệ"},passWord:function(t){var e=/^(?![0-9]{6,})[0-9a-zA-Z]{6,}$/;return e.test(t)||"Gồm các ký tự 0-9, a-z và ít nhất 6 ký tự"},telNo:function(t){var e=/^([0-9]{0,})$/;return"string"===typeof t&&(t=t.trim()),e.test(t)||"Gồm các ký tự 0-9"},varchar50:function(t){return!t||(t=String(t).trim(),t.length<=50||"Không được nhập quá 50 ký tự")},varchar100:function(t){return!t||(t=String(t).trim(),t.length<=100||"Không được nhập quá 100 ký tự")},varchar255:function(t){return!t||(t=String(t).trim(),t.length<=255||"Không được nhập quá 255 ký tự")},varchar500:function(t){return!t||(t=String(t).trim(),t.length<=500||"Không được nhập quá 500 ký tự")},varchar5000:function(t){return!t||(t=String(t).trim(),t.length<=5e3||"Không được nhập quá 5000 ký tự")}}),f(t,"valid",!1),f(t,"loadingTable",!1),f(t,"hasOrganization",!1),f(t,"sameUser",!1),f(t,"years",[]),f(t,"months",[1,2,3,4,5,6,7,8,9,10,11,12]),f(t,"days",[]),f(t,"money",{decimal:"",thousands:".",prefix:"",suffix:"",precision:0,masked:!1}),t},computed:{loading:function(){return this.$store.getters.loading},forGroupDossier:function(){return this.$store.getters.getForGroupDossier},originality:function(){var t=this;return console.log("originality",t.getOriginality()),t.getOriginality()},viaPostal:function(){return this.$store.getters.viaPostal},dichVuChuyenPhatKetQua:function(){return this.$store.getters.dichVuChuyenPhatKetQua}},directives:{money:h["VMoney"]},created:function(){var t=this;t.requiredConfig&&t.requiredConfig["applicant"]&&(t.requiredOptions=Object.assign(t.requiredOptions,t.requiredConfig["applicant"]))},watch:{birthDateDay:function(t){var e=this;31===parseInt(t)?e.months=[1,3,5,7,8,10,12]:30===parseInt(t)?e.months=[4,6,9,11]:e.months=[1,2,3,4,5,6,7,8,9,10,11,12]},birthDateMonth:function(t){var e=this;switch(parseInt(t)){case 1:case 3:case 5:case 7:case 8:case 10:case 12:e.days=[];for(var a=1;a<=31;a++)e.days.push(a);break;case 4:case 6:case 9:case 11:e.days=[];for(var i=1;i<=30;i++)e.days.push(i);break;case 2:e.days=[];for(var o=1;o<=29;o++)e.days.push(o);break}},ThongTinChuHoSoBindChuyenPhat:function(t){this.$store.commit("setThongTinChuHoSoBindChuyenPhat",t)},search:function(t){t&&this.querySelections(t)},search2:function(t){t&&this.querySelections2(t)},sameUser:function(t){var e=this;e.delegateIdNo=e.applicantIdNo,e.delegateName=e.applicantName,e.delegateAddress=e.address,e.delegateTelNo=e.contactTelNo,e.delegateEmail=e.contactEmail,e.delegateCityCode=e.cityCode,e.delegateDistrictCode=e.districtCode,e.delegateWardCode=e.wardCode,e.onChangeDelegateCity(e.delegateCityCode),e.onChangeDelegateDistrict(e.delegateDistrictCode)}},methods:{initData:function(t){var e=this;e.$nextTick((function(){e.days=[],e.years=[];for(var a=(new Date).getFullYear(),i=1;i<=31;i++)e.days.push(i);for(var o=a;o>=1900;o--)e.years.push(o);e.mappingData(t);var n={collectionCode:"ADMINISTRATIVE_REGION",level:0,parent:0};e.$store.getters.getDictItems(n).then((function(t){e.cityItems=t.data})),setTimeout((function(){e.cityNativeCode&&(e.cityNativeName=e.cityItems.filter((function(t){return t.itemCode==e.cityNativeCode}))[0]["itemName"],e.$store.getters.getDictItems({collectionCode:"ADMINISTRATIVE_REGION",level:1,parent:e.cityNativeCode}).then((function(t){e.districtNativeItems=t.data,e.districtNativeCode&&(e.districtNativeName=e.districtNativeItems.filter((function(t){return t.itemCode==e.districtNativeCode}))[0]["itemName"])}))),e.districtNativeCode&&e.$store.getters.getDictItems({collectionCode:"ADMINISTRATIVE_REGION",level:1,parent:e.districtNativeCode}).then((function(t){e.wardNativeItems=t.data,e.wardNativeCode&&(e.wardNativeName=e.wardNativeItems.filter((function(t){return t.itemCode==e.wardNativeCode}))[0]["itemName"])})),t.cityCode&&e.$store.getters.getDictItems({collectionCode:"ADMINISTRATIVE_REGION",level:1,parent:t.cityCode}).then((function(t){e.districtItems=t.data})),t.districtCode&&e.$store.getters.getDictItems({collectionCode:"ADMINISTRATIVE_REGION",level:1,parent:t.districtCode}).then((function(t){e.wardItems=t.data})),t.delegateCityCode&&e.$store.getters.getDictItems({collectionCode:"ADMINISTRATIVE_REGION",level:1,parent:t.delegateCityCode}).then((function(t){e.delegateDistricts=t.data})),t.delegateDistrictCode&&e.$store.getters.getDictItems({collectionCode:"ADMINISTRATIVE_REGION",level:1,parent:t.delegateDistrictCode}).then((function(t){e.delegateWards=t.data}))}),200)})),e.$refs.formChuHoSo.resetValidation()},getThongTinChuHoSo:function(){var t=this,e={gender:t.gender,genderText:1===t.gender?"Nữ":"Nam",birthDate:t.birthDateDay+"/"+t.birthDateMonth+"/"+t.birthDateYear,birthDateDay:t.birthDateDay,birthDateMonth:t.birthDateMonth,birthDateYear:t.birthDateYear,wardNativeCode:t.wardNativeCode,wardNativeName:t.wardNativeName,districtNativeCode:t.districtNativeCode,districtNativeName:t.districtNativeName,cityNativeCode:t.cityNativeCode,cityNativeName:t.cityNativeName,state:t.state,stateText:1===t.state?"Đã chết":"Còn sống",yearPayment:t.yearPayment,subsidy:Number(String(t.subsidy).replace(/\./g,"")),anonymName:t.anonymName,incidence:t.incidence,incidenceText:1===t.incidence?"Cơ yếu":"Quân nhân",recruitment:t.recruitment,retire:t.retire,reactivated:t.reactivated,published:t.published,trocapmotlan:"MAU_CV_TRO_CAP_MOT_LAN"===t.mauCongVan},a={applicantName:t.applicantName,gender:t.gender,genderText:1===t.gender?"Nữ":"Nam",birthDate:t.birthDateDay+"/"+t.birthDateMonth+"/"+t.birthDateYear,applicantIdNo:t.applicantIdNo,wardNativeCode:t.wardNativeCode,wardNativeName:t.wardNativeName,districtNativeCode:t.districtNativeCode,districtNativeName:t.districtNativeName,cityNativeCode:t.cityNativeCode,cityNativeName:t.cityNativeName,state:t.state,address:t.address,wardCode:t.wardCode,districtCode:t.districtCode,cityCode:t.cityCode,yearPayment:t.yearPayment,subsidy:Number(String(t.subsidy).replace(/\./g,"")),contactTelNo:t.contactTelNo,contactEmail:t.contactEmail,anonymName:t.anonymName,incidence:t.incidence,recruitment:t.recruitment,retire:t.retire,reactivated:t.reactivated,published:t.published,delegateName:t.delegateName,delegateIdNo:t.delegateIdNo,delegateAddress:t.delegateAddress,delegateWardCode:t.delegateWardCode,delegateDistrictCode:t.delegateDistrictCode,delegateCityCode:t.delegateCityCode,delegateTelNo:t.delegateTelNo,delegateEmail:t.delegateEmail,formMeta:JSON.stringify(e),validation:t.$refs.formChuHoSo.validate()};return a},mappingData:function(t){var e=this,a="";try{a=JSON.parse(t.metaData)}catch(i){}e.applicantName=t.applicantName,e.applicantIdNo=t.applicantIdNo,e.address=t.address,e.wardCode=t.wardCode,e.districtCode=t.districtCode,e.cityCode=t.cityCode,e.contactTelNo=t.contactTelNo,e.contactEmail=t.contactEmail,e.delegateName=t.delegateName,e.delegateIdNo=t.delegateIdNo,e.delegateAddress=t.delegateAddress,e.delegateWardCode=t.delegateWardCode,e.delegateDistrictCode=t.delegateDistrictCode,e.delegateCityCode=t.delegateCityCode,e.delegateTelNo=t.delegateTelNo,e.delegateEmail=t.delegateEmail,a&&(e.gender=a.hasOwnProperty("gender")?a.gender:"",e.birthDateDay=a.hasOwnProperty("birthDateDay")?a.birthDateDay:"",e.birthDateMonth=a.hasOwnProperty("birthDateMonth")?a.birthDateMonth:"",e.birthDateYear=a.hasOwnProperty("birthDateYear")?a.birthDateYear:"",e.wardNativeCode=a.hasOwnProperty("wardNativeCode")?a.wardNativeCode:"",e.districtNativeCode=a.hasOwnProperty("districtNativeCode")?a.districtNativeCode:"",e.cityNativeCode=a.hasOwnProperty("cityNativeCode")?a.cityNativeCode:"",e.state=a.hasOwnProperty("state")?a.state:"",e.yearPayment=a.hasOwnProperty("yearPayment")?a.yearPayment:"",e.subsidy=a.hasOwnProperty("subsidy")?e.currency(a.subsidy):"",e.anonymName=a.hasOwnProperty("anonymName")?a.anonymName:"",e.incidence=a.hasOwnProperty("incidence")?a.incidence:"",e.recruitment=a.hasOwnProperty("recruitment")?a.recruitment:"",e.retire=a.hasOwnProperty("retire")?a.retire:"",e.reactivated=a.hasOwnProperty("reactivated")?a.reactivated:"",e.published=a.hasOwnProperty("published")?a.published:"")},formatCurrent:function(t){var e=this;e.subsidy=e.currency(String(e.subsidy).replace(/\D/g,""))},formatCurrentYearPayment:function(t){var e=this;e.yearPayment=e.currency(String(e.yearPayment).replace(/\D/g,""))},currency:function(t){if(t){var e=(t/1).toFixed(0).replace(".",",");return e.toString().replace(/\B(?=(\d{3})+(?!\d))/g,".")}return""},onChangeCity:function(t,e,a){var i=this,o={collectionCode:"ADMINISTRATIVE_REGION",level:1,parent:t};i.$store.dispatch("loadDictItems",o).then((function(o){i[e]=o.data,i[a]=[],"districtNativeItems"===e&&(i.cityNativeName=i.cityItems.filter((function(e){return e.itemCode==t}))[0]["itemName"])}))},onChangeDistrict:function(t,e){var a=this,i={collectionCode:"ADMINISTRATIVE_REGION",level:1,parent:t};a.$store.dispatch("loadDictItems",i).then((function(i){a[e]=i.data,"wardNativeItems"===e&&(a.districtNativeName=a.districtNativeItems.filter((function(e){return e.itemCode==t}))[0]["itemName"])}))},onChangeWard:function(t,e){var a=this;"wardNative"===e&&(a.wardNativeName=a.wardNativeItems.filter((function(e){return e.itemCode==t}))[0]["itemName"])},onChangeDelegateCity:function(t){var e=this,a={collectionCode:"ADMINISTRATIVE_REGION",level:1,parent:t};e.$store.getters.getDictItems(a).then((function(t){e.delegateDistricts=t.data}))},onChangeDelegateDistrict:function(t){var e=this,a={collectionCode:"ADMINISTRATIVE_REGION",level:1,parent:t};e.$store.getters.getDictItems(a).then((function(t){e.delegateWards=t.data}))},querySelections:function(t){var e=this,a={idNo:t};e.$store.dispatch("getUserInfoFromApplicantIdNo",a).then((function(t){e.applicantItems=t})).catch((function(t){}))},querySelections2:function(t){var e=this,a={idNo:t};e.$store.dispatch("getUserInfoFromApplicantIdNo",a).then((function(t){e.applicantItems2=t})).catch((function(t){}))},showValid:function(){var t=this,e=!0;t.requiredOptions["applicantIdNo"]&&!t.thongTinChuHoSo.applicantIdNo&&(e=!1),1===t.originality||t.showDelegate||!t.requiredOptions["delegateIdNo"]||t.thongTinNguoiNopHoSo.delegateIdNo||(e=!1);var a={validForm:t.$refs.formChuHoSo.validate()&&e,message:t.messageCheckApplicant,validApplicant:t.validBussinessInfos};return a},onInputChange:function(t){var e=this;if(e.functionTimeOut&&clearTimeout(e.functionTimeOut),e.functionTimeOut=setTimeout((function(){(3===e.originality&&"2"===e.thongTinChuHoSo.userType||1===e.originality&&"business"===e.thongTinChuHoSo.applicantIdType)&&e.checkApplicantInfos(),e.$store.commit("setApplicantId",t)}),2e3),0===t.trim().length)return null;var a="/o/rest/v2/applicants?start=0&end=5&idNo=".concat(t);return new Promise((function(t){e.$store.dispatch("loadInitResource").then((function(e){var i={headers:{}};s.a.get(a,i).then((function(e){var a=[];e.data.hasOwnProperty("data")&&(a=e.data.data),t(a)}))}))}))},onInputChange1:function(t){var e=this;if(0===t.trim().length)return null;var a="/o/rest/v2/applicants?start=0&end=5&idNo=".concat(t);return new Promise((function(t){e.$store.dispatch("loadInitResource").then((function(e){var i={headers:{}};s.a.get(a,i).then((function(e){var a=[];e.data.hasOwnProperty("data")&&(a=e.data.data),t(a)}))}))}))},onSearchItemSelected:function(t){var e=this;function a(t){return new Promise((function(a,i){setTimeout((function(){e.onChangeCity(t),a()}),Math.floor(100*Math.random())+1)}))}function i(t){return new Promise((function(a,i){setTimeout((function(){e.onChangeDistrict(t),a()}),Math.floor(100*Math.random())+1)}))}e.selectedSearchItem=t,"business"===t["applicantIdType"]?e.thongTinChuHoSo.userType="2":"citizen"===t["applicantIdType"]?e.thongTinChuHoSo.userType="1":e.thongTinChuHoSo.userType="3",e.thongTinChuHoSo["applicantIdNo"]=t.applicantIdNo.toString(),e.thongTinChuHoSo["applicantName"]=t["applicantName"]?t["applicantName"]:"",e.thongTinChuHoSo["address"]=t["address"]?t["address"]:"",e.thongTinChuHoSo["contactTelNo"]=t["contactTelNo"]?t["contactTelNo"]:"",e.thongTinChuHoSo["contactEmail"]=t["contactEmail"]?t["contactEmail"]:"",e.thongTinChuHoSo.cityCode=t["cityCode"]?t["cityCode"]:"",setTimeout((function(){e.$store.commit("setApplicantId",e.thongTinChuHoSo["applicantIdNo"]),e.checkApplicantInfos()}),2100),""!==e.thongTinChuHoSo["cityCode"]&&null!==e.thongTinChuHoSo["cityCode"]&&void 0!==e.thongTinChuHoSo["cityCode"]&&0!==e.thongTinChuHoSo["cityCode"]&&"0"!==e.thongTinChuHoSo["cityCode"]&&a(e.thongTinChuHoSo["cityCode"]).then((function(){e.thongTinChuHoSo.districtCode=t["districtCode"]?t["districtCode"]:"",""!==e.thongTinChuHoSo["districtCode"]&&null!==e.thongTinChuHoSo["districtCode"]&&void 0!==e.thongTinChuHoSo["districtCode"]&&0!==e.thongTinChuHoSo["districtCode"]&&"0"!==e.thongTinChuHoSo["districtCode"]&&i(e.thongTinChuHoSo["districtCode"]).then((function(){e.thongTinChuHoSo.wardCode=t["wardCode"]?t["wardCode"]:""}))}))},onSearchItemSelected1:function(t){var e=this;function a(t){return new Promise((function(a,i){setTimeout((function(){e.onChangeCity(t,"true"),a()}),Math.floor(100*Math.random())+1)}))}function i(t){return new Promise((function(a,i){setTimeout((function(){e.onChangeDistrict(t,"true"),a()}),Math.floor(100*Math.random())+1)}))}e.selectedSearchItem=t,console.log("selectedSearchItem1",t),e.thongTinNguoiNopHoSo["delegateIdNo"]=t.applicantIdNo.toString(),e.thongTinNguoiNopHoSo["delegateName"]=t["applicantName"]?t["applicantName"]:"",e.thongTinNguoiNopHoSo["delegateAddress"]=t["address"]?t["address"]:"",e.thongTinNguoiNopHoSo["delegateTelNo"]=t["contactTelNo"]?t["contactTelNo"]:"",e.thongTinNguoiNopHoSo["delegateEmail"]=t["contactEmail"]?t["contactEmail"]:"",e.thongTinNguoiNopHoSo["delegateCityCode"]=t["cityCode"]?t["cityCode"]:"",console.log("thongTinNguoiNopHoSo",e.thongTinNguoiNopHoSo),e.thongTinNguoiNopHoSo["delegateCityCode"]&&"0"!==e.thongTinNguoiNopHoSo["delegateCityCode"]&&a(e.thongTinNguoiNopHoSo["delegateCityCode"]).then((function(){e.thongTinNguoiNopHoSo["delegateDistrictCode"]=t["districtCode"]?t["districtCode"]:"",e.thongTinNguoiNopHoSo["delegateDistrictCode"]&&"0"!==e.thongTinNguoiNopHoSo["delegateDistrictCode"]&&i(e.thongTinNguoiNopHoSo["delegateDistrictCode"]).then((function(){e.thongTinNguoiNopHoSo["delegateWardCode"]=t["wardCode"]?t["wardCode"]:""}))}))},checkApplicantInfos:function(){var t=this;if(3===t.originality&&"2"===t.thongTinChuHoSo.userType&&t.thongTinChuHoSo.applicantIdNo||1===t.originality&&"business"===t.thongTinChuHoSo.applicantIdType){var e={applicantIdNo:t.thongTinChuHoSo.applicantIdNo,applicantName:t.thongTinChuHoSo.applicantName};t.$store.dispatch("checkApplicantInfos",e).then((function(e){e&&e.hasOwnProperty("error")&&!0===e.error?(t.bussinessExits=!1,t.validBussinessInfos=!1,t.messageCheckApplicant=e.message):e&&e.hasOwnProperty("warning")&&!0===e.warning?(t.bussinessExits=!0,t.validBussinessInfos=!1,t.messageCheckApplicant=e.message):!e||e.hasOwnProperty("error")||e.hasOwnProperty("warning")||(t.bussinessExits=!0,t.validBussinessInfos=!0)})).catch((function(){t.loadingVerify=!1}))}},getApplicantInfos:function(){var t=this,e={applicantIdNo:t.thongTinChuHoSo.applicantIdNo};t.$store.dispatch("getApplicantInfos",e).then((function(e){t.applicantInfos["applicantName"]=e["MainInformation"]["NAME"],t.applicantInfos["applicantIdNo"]=e["MainInformation"]["ENTERPRISE_GDT_CODE"],t.applicantInfos["address"]=e["HOAdress"]["AddressFullText"],t.applicantInfos["representatives"]=e["Representatives"]["FULL_NAME"],t.applicantInfos["companyType"]=e["MainInformation"]["ENTERPRISE_TYPE_NAME"],t.applicantInfos["companyStatus"]=e["MainInformation"]["ENTERPRISE_STATUS_NAME"],t.dialog_applicantInfos=!0}))},clearKeySearch:function(){var t=this;t.keySearch="",setTimeout((function(){t.applicantPage=1,t.getApplicantList().then((function(e){t.totalApplicantSearch=e["total"],t.applicantLists=e["data"]})).catch((function(){}))}),200)},changeTypeSearch:function(){var t=this;setTimeout((function(){t.applicantPage=1,t.getApplicantList().then((function(e){t.totalApplicantSearch=e["total"],t.applicantLists=e["data"]})).catch((function(){}))}),200)},changePage:function(t){var e=this;e.applicantPage=t.page,e.getApplicantList().then((function(t){e.totalApplicantSearch=t["total"],e.applicantLists=t["data"]})).catch((function(){}))},bindInfoApplicant:function(t){var e=this;"ChuHoSo"===e.typeApplicantBind?e.onSearchItemSelected(t):"NguoiNop"===e.typeApplicantBind&&e.onSearchItemSelected1(t),e.dialog_applicantList=!1},showEditApplicant:function(t){var e=this;if(e.applicantEdit=t,0===e.cityItems.length){var a={collectionCode:"ADMINISTRATIVE_REGION",level:0,parent:0,commit:""};e.$store.dispatch("loadDictItems",a).then((function(t){e.cityItems=t.data}))}e.applicantEdit["cityCode"]&&e.$store.dispatch("loadDictItems",{collectionCode:"ADMINISTRATIVE_REGION",level:1,parent:e.applicantEdit["cityCode"]}).then((function(t){e.districtItems=t.data})),e.applicantEdit["districtCode"]&&e.$store.dispatch("loadDictItems",{collectionCode:"ADMINISTRATIVE_REGION",level:1,parent:e.applicantEdit["districtCode"]}).then((function(t){e.wardItems=t.data})),"citizen"===e.applicantEdit["applicantIdType"]?e.titleEdit="Thông tin công dân":"business"===e.applicantEdit["applicantIdType"]&&(e.titleEdit="Thông tin tổ chức, doanh nghiệp"),e.dialog_editApplicant=!0,e.$refs.form.resetValidation()},changeBirthDate:function(){var t=this;t.menuBirthDate=!1,t.applicantEdit["applicantIdDate"]=t.formatDate(t.ngayCap)},formatDate:function(t){if(!t)return null;var e=t.split("-"),a=p(e,3),i=a[0],o=a[1],n=a[2];return"".concat(n,"/").concat(o,"/").concat(i)},getMaxdate:function(){var t=new Date;return"".concat(t.getFullYear(),"-").concat((t.getMonth()+1).toString().padStart(2,"0"),"-").concat(t.getDate().toString().padStart(2,"0"))},parseDateInput:function(t){if(t){var e="";e=isNaN(t)?new Date(t):new Date(Number(t));var a="".concat(e.getDate().toString().padStart(2,"0"),"/").concat((e.getMonth()+1).toString().padStart(2,"0"),"/").concat(e.getFullYear());return a}},parseDate:function(t){if(!t)return null;var e=t.split("/"),a=p(e,3),i=a[0],o=a[1],n=a[2];return"".concat(n,"-").concat(o.padStart(2,"0"),"-").concat(i.padStart(2,"0"))},onChangeCityEditApplicant:function(t){var e=this;e.applicantEdit["cityName"]=e.cityItems.filter((function(e){return e["itemCode"]===t}))[0]["itemName"];var a={collectionCode:"ADMINISTRATIVE_REGION",level:1,parent:t};e.$store.dispatch("loadDictItems",a).then((function(t){e.districtItems=t.data,e.wardItems=[]}))},onChangeDistrictEditApplicant:function(t){var e=this;e.applicantEdit["districtName"]=e.districtItems.filter((function(e){return e["itemCode"]===t}))[0]["itemName"];var a={collectionCode:"ADMINISTRATIVE_REGION",level:1,parent:t};e.$store.dispatch("loadDictItems",a).then((function(t){e.wardItems=t.data}))},updateApplicant:function(){var t=this;t.$refs.form.validate()&&(t.loading=!0,t.$store.dispatch("putUser",t.applicantEdit).then((function(){d.a.clear(),d.a.success("Yêu cầu thực hiện thành công"),t.dialog_editApplicant=!1})).catch((function(){d.a.clear(),d.a.error("Yêu cầu thực hiện thất bại")})))},exitDialogEditApplicant:function(){var t=this;t.dialog_editApplicant=!1,t.getApplicantList().then((function(e){t.totalApplicantSearch=e["total"],t.applicantLists=e["data"]})).catch((function(){d.a.error("Không lấy được danh sách công dân, tổ chức, doanh nghiệp")}))},fullAddress:function(t,e,a,i){var o="";return t&&(o+=t+", "),i&&(o+=i+" - "),a&&(o+=a+" - "),e&&(o+=e),o},changeDate:function(){var t=this;setTimeout((function(){if(console.log(t.birthDateDay,t.birthDateMonth,t.birthDateYear),t.birthDateDay&&t.birthDateMonth&&t.birthDateYear){var e=new Date,a=new Date;a.setFullYear(t.birthDateYear,t.birthDateMonth-1,t.birthDateDay),e<=a&&(t.birthDateDay="",t.birthDateMonth="",t.birthDateYear="",d.a.error("Ngày sinh không được lớn hơn ngày hiện tại"))}else if(t.birthDateMonth&&t.birthDateYear){var i=new Date,o=new Date;o.setFullYear(t.birthDateYear,t.birthDateMonth-1,1),i<o&&(t.birthDateDay="",t.birthDateMonth="",t.birthDateYear="",d.a.error("Ngày sinh không được lớn hơn ngày hiện tại"))}}),200)}}},y=_,C=a("2877"),D=a("6544"),T=a.n(D),x=a("c6a6"),b=a("b0af"),S=a("99d9"),N=a("ac7c"),P=a("cd55"),I=a("49e2"),A=a("0e8f"),w=a("4bd4"),E=a("132d"),k=a("a722"),O=a("67b6"),F=a("43a6"),M=a("e0c7"),V=a("2677"),L=a("a844"),H=Object(C["a"])(y,i,o,!1,null,null,null);e["a"]=H.exports;T()(H,{VAutocomplete:x["a"],VCard:b["a"],VCardText:S["b"],VCheckbox:N["a"],VExpansionPanel:P["a"],VExpansionPanelContent:I["a"],VFlex:A["a"],VForm:w["a"],VIcon:E["a"],VLayout:k["a"],VRadio:O["a"],VRadioGroup:F["a"],VSubheader:M["a"],VTextField:V["a"],VTextarea:L["a"]})},9724:function(t,e,a){"use strict";var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return t.active?a("div",{staticClass:"taotailieuketqua",staticStyle:{"background-color":"white",width:"100%"}},[a("v-expansion-panel",{staticClass:"expansion-pl",attrs:{value:[!0],expand:""}},[a("v-expansion-panel-content",[a("div",{attrs:{slot:"header"},slot:"header"},[a("div",{staticClass:"background-triangle-small"},[a("v-icon",{attrs:{size:"18",color:"white"}},[t._v("star_rate")])],1),t._v(" Kết quả xử lý\n      ")]),a("v-card",t._l(t.createFiles,(function(e,i){return a("div",{key:e.partNo+"cr",staticClass:"form_alpaca",staticStyle:{position:"relative"}},[a("v-expansion-panel",{staticClass:"expaned__list__data",attrs:{expand:"",value:[!0]}},[a("v-expansion-panel-content",{attrs:{"hide-actions":""}},[a("div",{staticStyle:{"background-color":"#fff"},attrs:{slot:"header"},on:{click:function(e){t.stateView=!1}},slot:"header"},[a("div",{staticStyle:{"align-items":"center",background:"#fff","padding-left":"25px"},style:{width:t.checkStyle(e)}},[a("div",{staticClass:"mr-2",staticStyle:{"min-width":"20px",display:"flex"},on:{click:function(a){t.loadAlpcaFormClick(e)}}},[a("div",{staticClass:"header__tphs",staticStyle:{"min-width":"20px"}},[a("span",{staticClass:"text-bold"},[t._v(t._s(i+1)+".")]),t._v("  ")]),a("div",{staticClass:"header__tphs"},[t._v("\n                      "+t._s(e.partName)+" "),e.required?a("span",{staticStyle:{color:"red"}},[t._v(" (*)")]):t._e(),t._v("\n                        \n\n                      "),e.hasForm?a("span",{staticStyle:{color:"#004b94"}},[t._v("(Bản khai trực tuyến)")]):t._e(),t._v("\n                        \n\n                    ")])]),t._l(t.dossierFilesItems,(function(o,n){return e.partNo+t.id!==o.dossierPartNo+t.id||o.eForm?t._e():a("div",{key:n+"cr"},[a("div",{staticStyle:{width:"calc(100% - 370px)",display:"flex","align-items":"center",background:"#fff","padding-left":"25px","font-size":"12px"}},[a("span",{staticClass:"ml-3",staticStyle:{cursor:"pointer"},on:{click:function(e){e.stopPropagation(),t.viewFile2(o,n)}}},[a("v-icon",{staticClass:"mr-1",attrs:{color:t.getDocumentTypeIcon(o.fileType)["color"],size:t.getDocumentTypeIcon(o.fileType)["size"]}},[t._v("\n                          "+t._s(t.getDocumentTypeIcon(o.fileType)["icon"])+"\n                        ")]),t._v("\n                        "+t._s(o.displayName)+" - \n                        "),a("i",[t._v(t._s(o.modifiedDate))])],1),a("v-btn",{staticClass:"mx-0 my-0",attrs:{title:"Xóa",icon:"",ripple:""},on:{click:function(e){e.stopPropagation(),t.deleteSingleFile(o,n,i)}}},[a("v-icon",{staticStyle:{color:"red"}},[t._v("delete_outline")])],1),"plugin"===t.esignType&&"pdf"===o.fileType.toLowerCase()?a("v-tooltip",{attrs:{top:""}},[a("v-btn",{staticClass:"my-0",attrs:{slot:"activator",flat:"",icon:"",color:"indigo"},on:{click:function(e){e.stopPropagation(),t.signAction(o,n)}},slot:"activator"},[a("v-icon",{attrs:{size:"18"}},[t._v("fa fa-pencil-square-o")])],1),a("span",[t._v("Ký duyệt")])],1):t._e()],1)])}))],2)]),e.eForm?a("v-card",[a("v-card-text",{staticStyle:{overflow:"hidden","background-color":"rgba(244, 247, 213, 0.19)"}},[a("v-layout",{attrs:{wrap:""}},[a("v-flex",{staticClass:"text-xs-right",attrs:{xs12:""}},[a("div",{style:t.pstFixed>t.pstEl&&t.pstFixed<t.endEl+t.pstEl?"position:fixed;top:5px;z-index:101":"",attrs:{id:"wrapForm"+e.partNo+t.id}},[e.eForm&&e["editForm"]&&!e.embed?a("v-btn",{attrs:{disabled:t.loadingApacal,color:"primary",id:"saveBtn"+e.partNo+e.templateNo},on:{click:function(a){a.stopPropagation(),t.saveAlpacaForm(e,i)}}},[t.loadingApacal?a("i",{staticClass:"fa fa-spinner",attrs:{"aria-hidden":"true"}}):a("v-icon",{attrs:{color:"white"}},[t._v("save")]),t._v(" \n                          Lưu lại\n                        ")],1):t._e()],1),t.createFiles[i]["editForm"]&&!t.createFiles[i].embed?a("div",{attrs:{id:"formAlpaca"+e.partNo+t.id}}):t._e(),t.createFiles[i]["editForm"]&&t.createFiles[i].embed?a("div",[a("iframe",{attrs:{id:"formAlpaca"+e.partNo+t.id+"embed",width:"100%",height:"500px",frameborder:"0",src:""}})]):t._e(),t.createFiles[i]["editForm"]?t._e():a("iframe",{staticStyle:{overflow:"auto","min-height":"600px"},attrs:{id:"displayPDF"+e.partNo+t.id,src:"",type:"application/pdf",width:"100%",height:"100%",frameborder:"0"}})])],1)],1)],1):t._e()],1)],1),a("div",{staticClass:"absolute__btn group__thanh_phan pr-3 mr-1"},[t.loading?a("content-placeholders",{staticClass:"mt-1"},[a("content-placeholders-text",{attrs:{lines:1}})],1):a("v-layout",{attrs:{row:"",wrap:""}},[a("v-flex",{style:"plugin"===t.esignType?"width: 120px":"width: 100px"},[a("input",{staticStyle:{display:"none"},attrs:{type:"file",id:"file"+e.partNo},on:{change:function(a){t.onUploadSingleFile(a,e,i)}}}),t.progressUploadPart+t.id===e.partNo+t.id?a("v-progress-circular",{attrs:{width:2,size:25,color:"green",indeterminate:""}}):t._e(),t.progressUploadPart+t.id!==e.partNo+t.id?a("v-tooltip",{attrs:{top:""}},[a("v-btn",{staticClass:"mx-0 my-0",attrs:{slot:"activator",icon:""},on:{click:function(a){t.pickFile(e)}},slot:"activator"},[a("v-badge",[a("v-icon",{attrs:{size:"24",color:"#004b94"}},[t._v("cloud_upload")])],1)],1),e.partTip["extensions"]||e.partTip["maxSize"]?a("span",[t._v("Tải giấy tờ lên (Chấp nhận tải lên các định dạng: "+t._s(e.partTip["extensions"])+". Tối đa "+t._s(e.partTip["maxSize"])+" MB)")]):a("span",[t._v("Tải giấy tờ lên")])],1):t._e(),"plugin"===t.esignType&&e["eForm"]?a("v-tooltip",{attrs:{top:""}},[a("v-btn",{staticClass:"ml-2 my-0",attrs:{slot:"activator",flat:"",icon:"",color:"indigo"},on:{click:function(a){a.stopPropagation(),t.signAction(e,i,e.partNo)}},slot:"activator"},[a("v-icon",{attrs:{size:"22"}},[t._v("fa fa-pencil-square-o")])],1),a("span",[t._v("Ký duyệt")])],1):t._e()],1)],1)],1)],1)})),0),a("v-dialog",{staticStyle:{overflow:"hidden"},attrs:{"max-width":"1000",transition:"fade-transition"},model:{value:t.dialogPDF,callback:function(e){t.dialogPDF=e},expression:"dialogPDF"}},[a("v-card",[a("v-toolbar",{attrs:{dark:"",color:"primary"}},[a("v-toolbar-title",[t._v(t._s(t.documentType))]),a("v-spacer"),a("v-btn",{attrs:{icon:"",dark:""},nativeOn:{click:function(e){t.dialogPDF=!1}}},[a("v-icon",[t._v("close")])],1)],1),t.dialogPDFLoading?a("div",{staticStyle:{"min-height":"600px","text-align":"center",margin:"auto",padding:"25%"}},[a("v-progress-circular",{attrs:{size:100,width:1,color:"primary",indeterminate:""}})],1):t._e(),a("iframe",{directives:[{name:"show",rawName:"v-show",value:!t.dialogPDFLoading,expression:"!dialogPDFLoading"}],staticStyle:{overflow:"auto","min-height":"600px"},attrs:{id:"dialogPDFPreview"+t.id,src:"",type:"application/pdf",width:"100%",height:"100%",frameborder:"0"}})],1)],1)],1)],1),a("v-dialog",{attrs:{"hide-overlay":"",persistent:"","max-width":"350",transition:"fade-transition"},model:{value:t.dialogConfirm,callback:function(e){t.dialogConfirm=e},expression:"dialogConfirm"}},[a("v-card",{attrs:{flat:""}},[a("v-toolbar",{attrs:{flat:"",dark:"",color:"#1867c0"}},[a("v-toolbar-title",{staticStyle:{"font-size":"16px"}},[t._v(t._s(t.labelConfirm))]),a("v-spacer")],1),a("v-card-actions",{staticClass:"mt-3"},[a("v-flex",{staticClass:"text-xs-center"},[a("v-btn",{staticClass:"mr-2",attrs:{color:"primary"},nativeOn:{click:function(e){return t.confirmAction(e)}}},[a("v-icon",[t._v("send")]),t._v(" \n            Đồng ý\n          ")],1),a("v-btn",{staticClass:"ml-2",staticStyle:{color:"#fff"},attrs:{color:"red"},nativeOn:{click:function(e){t.dialogConfirm=!1}}},[a("v-icon",[t._v("close")]),t._v(" \n            Bỏ qua\n          ")],1)],1)],1)],1)],1),a("v-dialog",{attrs:{"max-width":"1000",transition:"fade-transition"},model:{value:t.dialogSelectDosier,callback:function(e){t.dialogSelectDosier=e},expression:"dialogSelectDosier"}},[a("v-card",{attrs:{flat:""}},[a("v-toolbar",{attrs:{flat:"",dark:"",color:"primary"}},[a("v-toolbar-title",[t._v("Chọn hồ sơ")]),a("v-spacer"),a("v-btn",{attrs:{icon:"",dark:""},nativeOn:{click:function(e){return t.cancelAddFile(e)}}},[a("v-icon",[t._v("close")])],1)],1),a("v-card-text",{staticClass:"pt-0 pb-0 px-0"},[a("ho-so-nhom",{attrs:{dossiersgroup:t.dossierIntoGroup}})],1),a("v-card-actions",[a("v-spacer"),a("v-btn",{attrs:{color:"primary"},nativeOn:{click:function(e){t.addFileToDossier()}}},[a("v-icon",[t._v("send")]),t._v(" \n          Xác nhận\n        ")],1),a("v-btn",{staticStyle:{color:"#fff"},attrs:{color:"red"},nativeOn:{click:function(e){return t.cancelAddFile(e)}}},[a("v-icon",[t._v("close")]),t._v(" \n          Bỏ qua\n        ")],1)],1)],1)],1)],1):t._e()},o=[],n=a("b8a4"),s=n["a"],r=a("2877"),c=a("6544"),l=a.n(c),d=a("4ca6"),u=a("8336"),h=a("b0af"),p=a("99d9"),m=a("169a"),g=a("cd55"),v=a("49e2"),f=a("0e8f"),_=a("132d"),y=a("a722"),C=a("490a"),D=a("9910"),T=a("71d9"),x=a("2a7f"),b=a("3a2f"),S=Object(r["a"])(s,i,o,!1,null,null,null);e["a"]=S.exports;l()(S,{VBadge:d["a"],VBtn:u["a"],VCard:h["a"],VCardActions:p["a"],VCardText:p["b"],VDialog:m["a"],VExpansionPanel:g["a"],VExpansionPanelContent:v["a"],VFlex:f["a"],VIcon:_["a"],VLayout:y["a"],VProgressCircular:C["a"],VSpacer:D["a"],VToolbar:T["a"],VToolbarTitle:x["b"],VTooltip:b["a"]})},"9f67":function(module,__webpack_exports__,__webpack_require__){"use strict";var toastr__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("854a"),toastr__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(toastr__WEBPACK_IMPORTED_MODULE_0__),jquery__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("1157"),jquery__WEBPACK_IMPORTED_MODULE_1___default=__webpack_require__.n(jquery__WEBPACK_IMPORTED_MODULE_1__),_TiepNhan_TiepNhanHoSo_ThongTinChuHoSo_vue__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("826a"),_TiepNhan_TiepNhanHoSo_ThanhPhanHoSoNew_vue__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("6e92"),_TiepNhan_TaiLieuChungThuc_vue__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("4626"),_TiepNhan_TiepNhanHoSo_ThongTinChung_vue__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("c199"),_form_xu_ly_FeeDetail_vue__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("f374"),_TiepNhan_TiepNhanHoSo_DichVuChuyenPhatKetQua_vue__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__("a9a9"),_TiepNhan_TiepNhanHoSo_DichVuChuyenPhatHoSo_vue__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__("f82c"),_TiepNhan_TiepNhanHoSo_ThongTinCongVan_vue__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__("b799"),_TiepNhan_TiepNhanHoSo_ThongTinChuHoSoCongVan_vue__WEBPACK_IMPORTED_MODULE_10__=__webpack_require__("96b0"),_pagging_opencps_pagination_vue__WEBPACK_IMPORTED_MODULE_11__=__webpack_require__("e722");function _slicedToArray(t,e){return _arrayWithHoles(t)||_iterableToArrayLimit(t,e)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function _iterableToArrayLimit(t,e){var a=[],i=!0,o=!1,n=void 0;try{for(var s,r=t[Symbol.iterator]();!(i=(s=r.next()).done);i=!0)if(a.push(s.value),e&&a.length===e)break}catch(c){o=!0,n=c}finally{try{i||null==r["return"]||r["return"]()}finally{if(o)throw n}}return a}function _arrayWithHoles(t){if(Array.isArray(t))return t}toastr__WEBPACK_IMPORTED_MODULE_0___default.a.options={closeButton:!0,timeOut:"5000"},__webpack_exports__["a"]={props:["index","id","formCode"],components:{"thong-tin-chu-ho-so":_TiepNhan_TiepNhanHoSo_ThongTinChuHoSo_vue__WEBPACK_IMPORTED_MODULE_2__["a"],"thong-tin-chu-ho-so-cong-van":_TiepNhan_TiepNhanHoSo_ThongTinChuHoSoCongVan_vue__WEBPACK_IMPORTED_MODULE_10__["a"],"thanh-phan-ho-so":_TiepNhan_TiepNhanHoSo_ThanhPhanHoSoNew_vue__WEBPACK_IMPORTED_MODULE_3__["a"],"tai-lieu-chung-thuc":_TiepNhan_TaiLieuChungThuc_vue__WEBPACK_IMPORTED_MODULE_4__["a"],"thong-tin-chung":_TiepNhan_TiepNhanHoSo_ThongTinChung_vue__WEBPACK_IMPORTED_MODULE_5__["a"],"thu-phi":_form_xu_ly_FeeDetail_vue__WEBPACK_IMPORTED_MODULE_6__["a"],"dich-vu-chuyen-phat-ho-so":_TiepNhan_TiepNhanHoSo_DichVuChuyenPhatHoSo_vue__WEBPACK_IMPORTED_MODULE_8__["a"],"dich-vu-chuyen-phat-ket-qua":_TiepNhan_TiepNhanHoSo_DichVuChuyenPhatKetQua_vue__WEBPACK_IMPORTED_MODULE_7__["a"],"thong-tin-cong-van":_TiepNhan_TiepNhanHoSo_ThongTinCongVan_vue__WEBPACK_IMPORTED_MODULE_9__["a"],"tiny-pagination":_pagging_opencps_pagination_vue__WEBPACK_IMPORTED_MODULE_11__["a"]},data:function(){return{valid_tenHoSo:!1,isNotarization:!1,templateName:"",formTemplate:"",data_form_template:"",serviceCode_hidden:"",serviceName_hidden:"",govAgencyCode_hidden:"",govAgencyName_hidden:"",dossierTemplateNo_hidden:"",eformCode_hidden:"",validTNHS:!1,dossierId:"",mark:!0,stateEditSample:!1,tiepNhanState:!0,thongTinChiTietHoSo:{},payments:{},paymentProfile:{},briefNote:"",receiveDateEdit:"",editableDate:!1,dueDateEdit:"",durationPhase:"",viaPortalDetail:0,showThuPhi:!1,inputTypes:[1,3],inputTypesGroup:[6],outputTypes:[2],sampleCount:0,isMobile:!1,loadingAction:!1,loadingForm:!1,notifyConfig:!1,fromViaPostal:!1,fromViaPostalConfig:!1,smsNotify:!0,emailNotify:!0,dialog_printGuide:!1,dialog_denied:!1,validGuide:!1,validDenied:!1,listThuTucHanhChinh:[],thuTucHanhChinhSelectedGuide:"",listDichVuGuide:[],dichVuSelectedGuide:"",applicantNameGuide:"",applicantTypeGuide:"",applicantEmailGuide:"",applicantNoteGuide:"",tphsGuide:[],headersTphsGuide:[{text:"TT",align:"center",sortable:!1},{text:"Tên thành phần",align:"center",sortable:!1},{text:"Đã có",align:"center",sortable:!1}],dialogPDF:!1,dialogPDFLoading:!0,tiltleDialog:"",requiredConfigData:!1,templateDescription:"",actionDetail:"",mauCongVan:"",tphsCV:"",dossiersIntoGroupRenderTemp:[],headersCV:[{text:"STT",align:"center",sortable:!1,class:"text-xs-center"},{text:"Mã hồ sơ",align:"center",sortable:!1,class:"text-xs-center"},{text:"Họ và tên",align:"center",sortable:!1,class:"text-xs-center"},{text:"Năm sinh",align:"center",sortable:!1,class:"text-xs-center"},{text:"Nơi đăng ký HKTT",align:"center",sortable:!1,class:"text-xs-center"},{text:"Số tháng được hưởng",align:"center",sortable:!1,class:"text-xs-center"},{text:"Mức trợ cấp (đồng/tháng)",align:"center",sortable:!1,class:"text-xs-center"},{text:"Trạng thái",align:"center",sortable:!1,class:"text-xs-center"},{text:"Ghi chú",align:"center",sortable:!1,class:"text-xs-center"},{text:"Thao tác",align:"center",sortable:!1,class:"text-xs-center"}],pagination:{rowsPerPage:30,page:1},totalFee:0,createFileCongVan:"",postStepCodeCongVan:"",donvinhanCollection:"",requiredCVDenGovCode:"",requiredCVDenGroupId:"",formActionGroup:"",hasTaoQuyetDinh:!1,rules:{required:function(t){return!!t||"Thông tin bắt buộc"},email:function(t){var e=/^(([^<>()[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/;return e.test(t)||"Địa chỉ Email không hợp lệ"},passWord:function(t){var e=/^(?![0-9]{6,})[0-9a-zA-Z]{6,}$/;return e.test(t)||"Gồm các ký tự 0-9, a-z và ít nhất 6 ký tự"},telNo:function(t){var e=/^([0-9]{0,})$/;return e.test(t)||"Gồm các ký tự 0-9"},varchar100:function(t){return!t||(t=String(t).trim(),t.length<=100||"Không được nhập quá 100 ký tự")},varchar255:function(t){return!t||(t=String(t).trim(),t.length<=255||"Không được nhập quá 255 ký tự")},varchar500:function(t){return!t||(t=String(t).trim(),t.length<=500||"Không được nhập quá 500 ký tự")},varchar5000:function(t){return!t||(t=String(t).trim(),t.length<=5e3||"Không được nhập quá 5000 ký tự")}},applicantIdRequired:!0}},computed:{loading:function(){return this.$store.getters.loading},originality:function(){return this.getOriginality()},dichVuChuyenPhatKetQua:function(){return this.$store.getters.dichVuChuyenPhatKetQua},dichVuChuyenPhatHoSo:function(){return this.$store.getters.dichVuChuyenPhatHoSo},thongTinChuHoSo:function(){return this.$store.getters.thongTinChuHoSo},menuConfigsToDo:function(){return this.$store.getters.getMenuConfigsTodo},dossiersIntoGroupRender:function(){return this.$store.getters.dossierSelectedDoAction}},created:function(){var t=this;t.$nextTick((function(){var e=t.$router.history.current.query;e.hasOwnProperty("formActionGroup")&&e.formActionGroup&&(t.formActionGroup=JSON.parse(e.formActionGroup)),console.log("currentQueryTiepNhanHoSoDetail_created",t.formActionGroup),t.dossierId=t.id,t.donvinhanCollection=t.formActionGroup.hasOwnProperty("donvinhan")?t.formActionGroup.donvinhan:"",t.requiredCVDenGroupId=t.formActionGroup.hasOwnProperty("requiredCVDenGroupId")?t.formActionGroup.requiredCVDenGroupId:"",t.requiredCVDenGovCode=t.formActionGroup.hasOwnProperty("requiredCVDenGovCode")?t.formActionGroup.requiredCVDenGovCode:"",t.hasTaoQuyetDinh=!!t.formActionGroup.hasOwnProperty("taoQuyetDinh")&&t.formActionGroup.taoQuyetDinh}))},beforeDestroy:function(){var t=jquery__WEBPACK_IMPORTED_MODULE_1___default()('meta[name="viewport"]');t.attr("content","initial-scale=1.0, width=device-width"),"undefined"!==typeof window&&window.removeEventListener("resize",this.onResize,{passive:!0})},mounted:function(){this.onResize(),window.addEventListener("resize",this.onResize,{passive:!0})},watch:{$route:function(t,e){var a=this,i=t.query;i.hasOwnProperty("formActionGroup")&&i.formActionGroup&&(a.formActionGroup=JSON.parse(i.formActionGroup)),console.log("currentQueryTiepNhanHoSoDetail_watch",a.formActionGroup)},isMobile:function(t){var e=jquery__WEBPACK_IMPORTED_MODULE_1___default()('meta[name="viewport"]');t?e.attr("content",""):e.attr("content","initial-scale=1.0, width=device-width")},thongTinChuHoSo:function(){var t=this;t.briefNote=t.thongTinChiTietHoSo.serviceName?t.thongTinChiTietHoSo.serviceName:"",t.thongTinChiTietHoSo.serviceName&&!t.thongTinChuHoSo["userType"]&&t.thongTinChuHoSo["applicantName"]?t.briefNote=t.briefNote+" cho "+t.thongTinChuHoSo["applicantName"]:t.thongTinChiTietHoSo.serviceName&&t.thongTinChuHoSo["userType"]&&t.thongTinChuHoSo["applicantName"]&&(t.briefNote=t.briefNote+" cho ông/bà/tổ chức "+t.thongTinChuHoSo["applicantName"]),"UPDATE"===t.formCode&&(t.briefNote=t.thongTinChiTietHoSo.dossierName?t.thongTinChiTietHoSo.dossierName:t.thongTinChiTietHoSo.serviceName)},dossiersIntoGroupRender:function(t){var e=this,a=0;if(t&&t.length>0){for(var i=0;i<t.length;i++){var o=e.getMetaData(t[i]),n=0;if(o){var s=!(!o.hasOwnProperty("trocapmotlan")||!o["trocapmotlan"]);n=s?Number(o["subsidy"]):Number(o["yearPayment"])*Number(o["subsidy"]),a+=n}}e.dossiersIntoGroupRenderTemp=t.slice(0,e.pagination.rowsPerPage),e.totalFee=a}},formActionGroup:function(t){var e=this;e.donvinhanCollection=t.hasOwnProperty("donvinhan")?t.donvinhan:"",e.requiredCVDenGroupId=t.hasOwnProperty("requiredCVDenGroupId")?t.requiredCVDenGroupId:"",e.requiredCVDenGovCode=t.hasOwnProperty("requiredCVDenGovCode")?t.requiredCVDenGovCode:"",e.hasTaoQuyetDinh=!!t.hasOwnProperty("taoQuyetDinh")&&t.taoQuyetDinh}},methods:{onResize:function(){var t=this,e=window.innerWidth<1024;t.isMobile=e},initData:function initData(data){var vm=this,currentQuery=vm.$router.history.current.query;if("NEW_GROUP_CV_DI"===vm.formCode){console.log("vm.dossiersIntoGroupRender",vm.dossiersIntoGroupRender),vm.donvinhanCollection=vm.formActionGroup.hasOwnProperty("donvinhan")?vm.formActionGroup.donvinhan:"",vm.requiredCVDenGroupId=vm.formActionGroup.hasOwnProperty("requiredCVDenGroupId")?vm.formActionGroup.requiredCVDenGroupId:"",vm.requiredCVDenGovCode=vm.formActionGroup.hasOwnProperty("requiredCVDenGovCode")?vm.formActionGroup.requiredCVDenGovCode:"",vm.hasTaoQuyetDinh=!!vm.formActionGroup.hasOwnProperty("taoQuyetDinh")&&vm.formActionGroup.taoQuyetDinh;var totalFee=0,arr=vm.dossiersIntoGroupRender;if(arr&&arr.length>0){for(var i=0;i<arr.length;i++){var metaData=vm.getMetaData(arr[i]),fee=0;if(metaData){var trocapmotlan=!(!metaData.hasOwnProperty("trocapmotlan")||!metaData["trocapmotlan"]);fee=trocapmotlan?Number(metaData["subsidy"]):Number(metaData["yearPayment"])*Number(metaData["subsidy"]),totalFee+=fee}}vm.dossiersIntoGroupRenderTemp=arr.slice(0,vm.pagination.rowsPerPage),vm.totalFee=totalFee}}var filter={dossierTemplateNo:currentQuery.hasOwnProperty("template_no")&&currentQuery.template_no?currentQuery.template_no:""};vm.$store.dispatch("loadDossierFormTemplates",filter).then((function(result){try{vm.requiredConfigData=!!result["formMeta"]&&JSON.parse(result["formMeta"])}catch(error){}if(vm.templateName=result["templateName"],vm.templateDescription=result["description"],vm.tphsCV=result["dossierParts"],vm.mauCongVan=!(!result["newFormScript"]||!result["newFormScript"].startsWith("MAU_CV_"))&&result["newFormScript"],result["newFormScript"]&&!vm.mauCongVan){vm.data_form_template=eval("( "+result["newFormScript"]+" ) "),vm.formTemplate="version_2.0",vm.loadingForm=!0;var filterServiceConfig={serviceConfigId:currentQuery.hasOwnProperty("service_config")&&currentQuery.service_config?currentQuery.service_config:""};vm.$store.dispatch("getServiceConfigDetail",filterServiceConfig).then((function(t){vm.loadingForm=!1,vm.serviceName_hidden=t.serviceName,vm.serviceCode_hidden=t.serviceCode,vm.govAgencyCode_hidden=t.govAgencyCode,vm.govAgencyName_hidden=t.govAgencyName,vm.dossierTemplateNo_hidden=currentQuery.hasOwnProperty("template_no")&&currentQuery.template_no?currentQuery.template_no:"",vm.eformCode_hidden=currentQuery.hasOwnProperty("eformCode")&&currentQuery.eformCode?currentQuery.eformCode:"",setTimeout((function(){var t,e;vm.data_form_template&&(t=vm.data_form_template?vm.data_form_template:{},e={},t.data=e,window.$("#formAlpacaNewTemplate").alpaca(t))}),200);var e={dossierTemplateNo:vm.dossierTemplateNo_hidden};vm.$store.dispatch("loadDossierTemplates",e).then((function(t){for(var e in t["dossierParts"])t["dossierParts"][e].fileMark=!0;vm.tphsGuide=t["dossierParts"].filter((function(t){return 1===t["partType"]}))})).catch((function(){}))}))}else vm.formTemplate="version_1.0",vm.$store.dispatch("getDetailDossier",data).then((function(t){if(vm.dossierId=t.dossierId,vm.briefNote=t.serviceName?t.serviceName:"","UPDATE"===vm.formCode&&(vm.fromViaPostal="1"===String(t.fromViaPostal)),t["editable"]=!1,""===t.dossierStatus?vm.$store.dispatch("pullNextactions",t).then((function(e){if(e){var a=e.filter((function(t){return"1"===String(t.enable)&&"listener"!==t.autoEvent}));a.length>1?vm.actionDetail=a.filter((function(t){return 1100===t.actionCode||"1100"===t.actionCode}))[0]:vm.actionDetail=a[0],vm.$store.dispatch("processPullBtnDetail",{dossierId:t.dossierId,actionId:vm.actionDetail?vm.actionDetail.processActionId:""}).then((function(e){t["editable"]=!(!e||!e.receiving)&&e.receiving.editable,t["receivingDuedate"]=e&&e.receiving&&e.receiving.dueDate?e.receiving.dueDate:null,t["receivingDate"]=e&&e.receiving?e.receiving.receiveDate:"",t["allowAssignUser"]=String(e["allowAssignUser"]),vm.editableDate=!(!e||!e.receiving)&&e.receiving.editable,vm.dueDateEdit=e&&e.receiving&&e.receiving.dueDate?e.receiving.dueDate:"",vm.receiveDateEdit=e&&e.receiving?e.receiving.receiveDate:"",vm.durationPhase=e&&e.receiving&&e.receiving.hasOwnProperty("durationPhase")?e.receiving.durationPhase:"",e&&e.payment&&e.payment.requestPayment>0&&(vm.showThuPhi=!0,vm.payments=e.payment),vm.$refs.thongtinchunghoso&&vm.$refs.thongtinchunghoso.initData(t),vm.$refs.thongtincongvan&&vm.$refs.thongtincongvan.initData(t)})).catch((function(){}))}else vm.$refs.thongtinchunghoso&&vm.$refs.thongtinchunghoso.initData(t)})):vm.$refs.thongtinchunghoso&&vm.$refs.thongtinchunghoso.initData(t),vm.thongTinChiTietHoSo=t,vm.mauCongVan||vm.$refs.thongtinchuhoso.initData(t),"UPDATE"===vm.formCode&&vm.mauCongVan&&vm.$refs.thongtinchuhosocongvan.initData(t),vm.viaPortalDetail=t.viaPostal,t.viaPostal>0){var e={vnpostalStatus:0,postalServiceName:"",postalServiceCode:"",postalAddress:"",postalCityCode:"",postalCityName:"",postalDistrictCode:"",postalDistrictName:"",postalWardCode:"",postalWardName:"",postalTelNo:""},a=t.address?t.address+", "+t.wardName+" - "+t.districtName+" - "+t.cityName:"";1===vm.originality&&(t["postalAddress"]=a,t["postalTelNo"]=vm.thongTinChuHoSo["contactTelNo"],e["vnpostalStatus"]=t.vnpostalStatus,e["postalAddress"]=t.address,e["postalCityCode"]=t.cityCode,e["postalCityName"]=t.cityName,e["postalDistrictCode"]=t.districtCode,e["postalDistrictName"]=t.districtName,e["postalWardCode"]=t.wardCode,e["postalWardName"]=t.wardName,e["postalTelNo"]=vm.thongTinChuHoSo["contactTelNo"]),vm.$store.commit("setDichVuChuyenPhatKetQua",t),vm.$store.commit("setDichVuChuyenPhatHoSo",e)}vm.getNotifyConfig(vm.dossierId),vm.$store.dispatch("getServiceInfo",{serviceInfoId:t.serviceCode}).then((function(e){e.hasOwnProperty("isNotarization")&&"true"===String(e.isNotarization)?vm.isNotarization=!0:(vm.isNotarization=!1,vm.mauCongVan&&"UPDATE"!==vm.formCode||vm.$refs.thanhphanhoso.initData(t))})),"NEW_GROUP_CV_DI"===vm.formCode&&vm.getDetailActionCongVan()})).catch((function(t){}))}))},luuHoSo:function(){var t=this;t.$store.commit("setPrintPH",!1);var e=this.$refs.thongtinchunghoso?this.$refs.thongtinchunghoso.getthongtinchunghoso():{},a=this.$refs.thongtinchuhoso.thongTinChuHoSo,i=this.$refs.thongtinchuhoso?this.$refs.thongtinchuhoso.thongTinNguoiNopHoSo:{},o=(this.$refs.thanhphanhoso.dossierTemplateItems,this.$refs.dichvuchuyenphatketqua?this.$refs.dichvuchuyenphatketqua.dichVuChuyenPhatKetQua:{}),n=this.$refs.dichvuchuyenphathoso?this.$refs.dichvuchuyenphathoso.dichVuChuyenPhatHoSo:"",s=t.$refs.thongtinchuhoso.showValid();if(s["validForm"]){var r=!1;if(s["validApplicant"])r=!0;else{var c=confirm(s["message"]+" Bạn có muốn tiếp tục?");c&&(r=!0)}if(r){if(!t.$refs.thanhphanhoso.validDossierTemplate())return;if(2===o.viaPostal&&!t.$refs.dichvuchuyenphatketqua.validDichVuChuyenPhat())return;if(n&&1===n.vnpostalStatus&&!t.$refs.dichvuchuyenphathoso.validDichVuChuyenPhat())return;var l=t.$refs.thanhphanhoso.dossierFilesItems,d=[];l&&l.forEach((function(e,a){e.eForm&&(e["dossierId"]=t.dossierId,d.push(t.$store.dispatch("putAlpacaForm",e)))}));var u=Object.assign(a,i,o,e);if(u["dossierId"]=t.dossierId,u["sampleCount"]=t.thongTinChiTietHoSo.sampleCount,u["originality"]=t.originality,u["dossierName"]=t.briefNote,n){var h={postalServiceName:n.postalServiceCode,postalAddress:n.postalAddress,postalCityCode:n.postalCityCode,postalCityName:n.postalCityName,postalDistrictCode:n.postalDistrictCode,postalDistrictName:n.postalDistrictName,postalWardCode:n.postalWardCode,postalWardName:n.postalWardName,postalTelNo:n.postalTelNo};u["vnpostalStatus"]=n.vnpostalStatus,u["vnpostalProfile"]=h}setTimeout((function(){t.$store.dispatch("putDossier",u).then((function(e){if("UPDATE"===t.formCode)window.history.back();else{var a=t.$store.getters.loadingInitData,i=a.user.userName?a.user.userName:"",o=t.actionDetail.actionCode,n={dossierId:t.dossierId,actionCode:o,actionNote:"",actionUser:i,payload:"",security:"",assignUsers:"",payment:t.payments,createDossiers:"",dueDate:u.dueDate};t.$store.dispatch("postAction",n).then((function(e){t.$router.history.current.query;t.$router.push({path:"/danh-sach-ho-so/4/chi-tiet-ho-so/"+e.dossierId,query:{activeTab:"tabs-1"}}),t.tiepNhanState=!1}))}})).catch((function(t){toastr__WEBPACK_IMPORTED_MODULE_0___default.a.clear(),toastr__WEBPACK_IMPORTED_MODULE_0___default.a.error("Yêu cầu của bạn thực hiện thất bại.")})),t.updateNotifyConfig()}),500)}}},tiepNhanHoSo:function(t){var e=this;e.$store.commit("setPrintPH",!1);var a=this.$refs.thongtinchunghoso?this.$refs.thongtinchunghoso.getthongtinchunghoso():{},i=this.$refs.thongtinchuhoso?this.$refs.thongtinchuhoso.getThongTinChuHoSo():{},o=this.$refs.thongtinchuhoso?this.$refs.thongtinchuhoso.getThongTinNguoiNopHoSo():[],n=(this.$refs.thanhphanhoso&&this.$refs.thanhphanhoso.dossierTemplateItems,this.$refs.thanhphanhoso?e.$refs.thanhphanhoso.showValid():{validForm:!0}),s=e.dichVuChuyenPhatKetQua,r=e.$refs.thongtinchuhoso?e.$refs.thongtinchuhoso.showValid():{validForm:!0,validApplicant:!0},c=e.$refs.thongtinchuhosocongvan?e.$refs.thongtinchuhosocongvan.getThongTinChuHoSo():{validation:!0};if(r["validForm"]&&c["validation"]&&e.$refs.formTenHoSo.validate()&&n["validForm"]){var l=!1;if(r["validApplicant"])l=!0;else{var d=confirm(r["message"]+" Bạn có muốn tiếp tục?");d&&(l=!0)}if(l){if(e.loadingAction=!0,e.$refs.thanhphanhoso&&!e.$refs.thanhphanhoso.validDossierTemplate())return void(e.loadingAction=!1);if(2===s.viaPostal&&!e.$refs.dichvuchuyenphatketqua.validDichVuChuyenPhat())return void(e.loadingAction=!1);var u=e.$refs.thanhphanhoso?e.$refs.thanhphanhoso.dossierFilesItems:"",h=[];u&&u.forEach((function(t,a){t.eForm&&(t["dossierId"]=e.dossierId,h.push(e.$store.dispatch("putAlpacaForm",t)))}));var p="";p=e.mauCongVan?Object.assign(c,s,a):Object.assign(i,o,s,a),p["dossierId"]=e.dossierId,p["sampleCount"]=e.thongTinChiTietHoSo.sampleCount,p["dossierName"]=e.briefNote,p["originality"]=e.originality,p["fromViaPostal"]=e.fromViaPostal?1:0;var m=function(){e.$store.dispatch("putDossier",p).then((function(a){if(e.loadingAction=!1,"UPDATE"===e.formCode)window.history.back();else{var i=e.$store.getters.loadingInitData,o=i.user.userName?i.user.userName:"",n={};if(e.showThuPhi&&(n={requestPayment:e.payments["requestPayment"],paymentNote:e.payments["paymentNote"],advanceAmount:Number(e.payments["advanceAmount"].toString().replace(/\./g,"")),feeAmount:Number(e.payments["feeAmount"].toString().replace(/\./g,"")),serviceAmount:Number(e.payments["serviceAmount"].toString().replace(/\./g,"")),shipAmount:Number(e.payments["shipAmount"].toString().replace(/\./g,""))},e.isNotarization)){var s=e.$refs.tailieuchungthuc.dataExport();n.feeAmount=s.feeTotal}var r={dueDate:e.editableDate&&p.dueDate?p.dueDate:e.dueDateEdit,receiveDate:e.receiveDateEdit};e.durationPhase&&(r=Object.assign(r,{durationPhase:e.durationPhase})),r=Object.assign(p,r);var c=e.actionDetail.actionCode,l={dossierId:e.dossierId,actionCode:c,actionNote:"",actionUser:o,payload:r,security:"",assignUsers:"",payment:n,createDossiers:""};e.thongTinChiTietHoSo.hasOwnProperty("allowAssignUser")&&"1"===e.thongTinChiTietHoSo.allowAssignUser&&(l.assignUsers=[{userId:i.user.userId,userName:o,assigned:1}]),e.loadingAction=!0,e.$store.dispatch("postAction",l).then((function(a){if(e.loadingAction=!1,t){var i=e.$router.history.current,o=i.query,n=e.$store.getters.getDataCreateDossier;e.loadingAction=!0,e.$store.dispatch("postDossier",n).then((function(t){e.loadingAction=!1,e.dossierId=t.dossierId,e.$refs.thongtinchunghoso.changeDossierNo(t.dossierNo);var a="?";for(var i in o)""!==o[i]&&"undefined"!==o[i]&&void 0!==o[i]&&(a+=i+"="+o[i]+"&");e.$router.push({path:"/danh-sach-ho-so/0/ho-so/"+t.dossierId+"/NEW"+a,query:{renew:Math.floor(100*Math.random())+1}})})).catch((function(t){e.loadingAction=!1}))}else e.goBack(),e.tiepNhanState=!1})).catch((function(t){e.loadingAction=!1}))}})).catch((function(t){e.loadingAction=!1,toastr__WEBPACK_IMPORTED_MODULE_0___default.a.clear(),toastr__WEBPACK_IMPORTED_MODULE_0___default.a.error("Yêu cầu của bạn thực hiện thất bại.")})),e.updateNotifyConfig()};if(e.mauCongVan){var g={formDataKey:{hoten:c.applicantName}};e.$store.dispatch("checkDaCapPhep",g).then((function(t){var a=!1,i=[],o=t.hasOwnProperty("data")?t.data:[];if(o=o.filter((function(t){return t.hasOwnProperty("hoten_data")&&t.hasOwnProperty("ngaysinh_data")})),o.length>0)try{var n=e.parseDate(c.birthDate);i=o.filter((function(t){return String(t.hoten_data).toLocaleLowerCase()===String(c.applicantName).toLocaleLowerCase()&&e.parseDate(t.ngaysinh_data)===n})),i&&i.length>0&&(a=!0)}catch(r){}if(a){var s=confirm("Đối tượng đã cấp phép. Bạn có muốn tiếp tục?");s?m():e.loadingAction=!1}else m()})).catch((function(t){m()}))}else m()}}else toastr__WEBPACK_IMPORTED_MODULE_0___default.a.error("Dữ liệu không hợp lệ"),console.log(r),e.applicantIdRequired=r["applicantIdRequired"],console.log(r["applicantIdRequired"])},tiepNhanCongVan:function(t,e){var a=this;a.loadingAction=!0;var i=this.$refs.thongtincongvan.getThongTinCongVan(),o=i;o.dueDate=a.dateTimeView(i.dueDate),o=Object.assign(o,{typeAction:t||""}),console.log("data put congvan --\x3e",o);var n=!0;"NEW_GROUP_CV"===a.formCode&&(n=i.validation),n=(a.formCode,i.validation),n?a.$store.dispatch("putDossierCongVan",o).then((function(t){var o;if("NEW_GROUP_CV"===a.formCode)o=i.metaData;else{var n=a.currentcyToString(String(a.totalFee));if("save"===e){var s={congvandagui:!1,donvinhan:"",tendonvinhan:"",donvinhandraf:i.metaData.donvinhan,tendonvinhandraf:i.metaData.tendonvinhan,actioncode:a.formActionGroup.action,postStepCode:a.postStepCodeCongVan,stepcode:a.formActionGroup.hasOwnProperty("stepCode")?a.formActionGroup.stepCode:"",donvinhancollection:a.formActionGroup.hasOwnProperty("donvinhan")?a.formActionGroup.donvinhan:"",requiredCVDenGovCode:a.formActionGroup.hasOwnProperty("requiredCVDenGovCode")?a.formActionGroup.requiredCVDenGovCode:"",requiredCVDenGroupId:a.formActionGroup.hasOwnProperty("requiredCVDenGroupId")?a.formActionGroup.requiredCVDenGroupId:"",totalSubsidy:a.totalFee,totalSubsidyText:n};o=Object.assign(i.metaData,s)}else{var r={congvandagui:!0,actioncode:a.formActionGroup.action,postStepCode:a.postStepCodeCongVan,stepcode:a.formActionGroup.hasOwnProperty("stepCode")?a.formActionGroup.stepCode:"",donvinhancollection:a.formActionGroup.hasOwnProperty("donvinhan")?a.formActionGroup.donvinhan:"",requiredCVDenGovCode:a.formActionGroup.hasOwnProperty("requiredCVDenGovCode")?a.formActionGroup.requiredCVDenGovCode:"",requiredCVDenGroupId:a.formActionGroup.hasOwnProperty("requiredCVDenGroupId")?a.formActionGroup.requiredCVDenGroupId:"",totalSubsidy:a.totalFee,totalSubsidyText:n};o=Object.assign(i.metaData,r)}}var c={id:a.dossierId,data:JSON.stringify(o)};"NEW_GROUP_CV"===a.formCode?a.$store.dispatch("putMetaData",c).then((function(){a.loadingAction=!1,a.$router.push({path:"/danh-sach-ho-so/"+a.index+"/nhom-ho-so/"+a.formCode+"/"+t.dossierId,query:a.$router.history.current.query})})).catch((function(){a.loadingAction=!1,toastr__WEBPACK_IMPORTED_MODULE_0___default.a.clear(),toastr__WEBPACK_IMPORTED_MODULE_0___default.a.error("Yêu cầu của bạn thực hiện thất bại")})):a.$store.dispatch("putMetaData",c).then((function(){var t={groupDossierId:i.dossierId,dossierId:""},o=[];for(var n in a.dossiersIntoGroupRender)o.push(a.dossiersIntoGroupRender[n]["dossierId"]);t["dossierId"]=o.toString(),a.$store.dispatch("postDossierIntoGroup",t).then((function(t){if(a.createFileCongVan){var o={dossierId:a.dossierId,partNo:a.createFileCongVan};a.$store.dispatch("loadFormData",o).then((function(t){var o=JSON.parse(t);Object.assign(o,{tp:a.createFileCongVan,dossierId:a.dossierId});a.$store.dispatch("postEformCallBack",o).then((function(t){"save"===e?(a.loadingAction=!1,toastr__WEBPACK_IMPORTED_MODULE_0___default.a.success("Lưu công văn thành công"),a.$router.push({path:"/danh-sach-ho-so/"+a.index+"/nhom-ho-so/"+a.formCode+"/"+i.dossierId,query:a.$router.history.current.query})):a.processAction()}))})).catch((function(t){}))}else"save"===e?(a.loadingAction=!1,toastr__WEBPACK_IMPORTED_MODULE_0___default.a.success("Lưu công văn thành công"),a.$router.push({path:"/danh-sach-ho-so/"+a.index+"/nhom-ho-so/"+a.formCode+"/"+i.dossierId,query:a.$router.history.current.query})):a.processAction()}))})).catch((function(){a.loadingAction=!1,toastr__WEBPACK_IMPORTED_MODULE_0___default.a.clear(),toastr__WEBPACK_IMPORTED_MODULE_0___default.a.error("Yêu cầu của bạn thực hiện thất bại")}))})).catch((function(t){a.loadingAction=!1,toastr__WEBPACK_IMPORTED_MODULE_0___default.a.clear(),toastr__WEBPACK_IMPORTED_MODULE_0___default.a.error("Yêu cầu của bạn thực hiện thất bại")})):(a.loadingAction=!1,toastr__WEBPACK_IMPORTED_MODULE_0___default.a.clear(),toastr__WEBPACK_IMPORTED_MODULE_0___default.a.error("Dữ liệu không hợp lệ"))},boSungHoSo:function(){var t=this;t.$store.commit("setPrintPH",!1);var e=this.$refs.thongtinchunghoso.getthongtinchunghoso(),a=this.$refs.thongtinchuhoso.thongTinChuHoSo,i=this.$refs.thongtinchuhoso.thongTinNguoiNopHoSo,o=this.$refs.thanhphanhoso.dossierTemplateItems,n=this.$refs.lephi.lePhi,s=this.$refs.dichvuchuyenphatketqua.dichVuChuyenPhatKetQua;if(t.$refs.thongtinchuhoso.showValid()){var r=t.$refs.thanhphanhoso.dossierFilesItems,c=o,l=[],d=[];c&&(c.forEach((function(e,a){1===e.partType&&(e["dossierId"]=t.dossierId,d.push(t.$store.dispatch("postDossierMark",e)))})),r.forEach((function(e,a){e.eForm&&(e["dossierId"]=t.dossierId,l.push(t.$store.dispatch("putAlpacaForm",e)))}))),Promise.all(d).then((function(t){})).catch((function(t){})),Promise.all(l).then((function(r){var c=Object.assign(a,i,o,n,s,e);c["dossierId"]=t.dossierId,t.$store.dispatch("putDossier",c).then((function(e){var a={dossierId:t.dossierId,actionCode:7100,payload:"",security:"",assignUsers:{},payment:{},createDossiers:{},dueDate:c.dueDate};t.$store.dispatch("postAction",a).then((function(t){}))})),t.updateNotifyConfig()})).catch((function(t){}))}},changeViapostal:function(t){this.viaPortalDetail=t?2:1},tiepNhanNhomHoSo:function(t){var e=this;e.$store.commit("setPrintPH",!1);var a=this.$refs.thongtinchuhoso.getThongTinNguoiNopHoSo(),i=(this.$refs.thanhphanhoso.dossierTemplateItems,e.dichVuChuyenPhatKetQua);if(e.loadingAction=!0,2!==i.viaPostal||e.$refs.dichvuchuyenphatketqua.validDichVuChuyenPhat()){var o=e.$refs.thanhphanhoso.dossierFilesItems,n=[];o&&o.forEach((function(t,a){t.eForm&&(t["dossierId"]=e.dossierId,n.push(e.$store.dispatch("putAlpacaForm",t)))}));var s=Object.assign(a,i);s["sampleCount"]=e.thongTinChiTietHoSo.sampleCount,s["dossierName"]=e.briefNote,console.log("data put dossier --\x3e",s);var r={serviceCode:e.thongTinChiTietHoSo.serviceCode,govAgencyCode:e.thongTinChiTietHoSo.govAgencyCode,templateNo:e.thongTinChiTietHoSo.dossierTemplateNo,originality:9};e.$store.dispatch("postDossier",r).then((function(t){s["dossierId"]=t.dossierId,e.$store.dispatch("putDossier",s).then((function(t){e.loadingAction=!1,e.$router.push({path:"/danh-sach-ho-so/0/nhom-ho-so/"+e.formCode+"/"+t.dossierId,query:e.$router.history.current.query})})).catch((function(t){e.loadingAction=!1,toastr__WEBPACK_IMPORTED_MODULE_0___default.a.clear(),toastr__WEBPACK_IMPORTED_MODULE_0___default.a.error("Yêu cầu của bạn thực hiện thất bại")})),e.updateNotifyConfig()}))}else e.loadingAction=!1},tiepNhanHoSoNewTemplate:function(t){var e=this,a={originality:e.getOriginality(),serviceCode:jquery__WEBPACK_IMPORTED_MODULE_1___default()("#serviceCode_hidden").val(),govAgencyCode:jquery__WEBPACK_IMPORTED_MODULE_1___default()("#govAgencyCode_hidden").val(),templateNo:jquery__WEBPACK_IMPORTED_MODULE_1___default()("#dossierTemplateNo_hidden").val(),dossiers:""},i=window.$("#formAlpacaNewTemplate").alpaca("get").getValue(),o=i;for(var n in o)String(n).indexOf("_")>=0&&delete o[n];a["dossiers"]=JSON.stringify(o["dossiers"]),a["dossierFileArr"]=JSON.stringify(o["dossierFileArr"]),a["dossierMarkArr"]=JSON.stringify(o["dossierMarkArr"]),a["payment"]=JSON.stringify(o["payment"]),"true"===String(jquery__WEBPACK_IMPORTED_MODULE_1___default()("#validate_required").val())?(e.loadingAction=!0,e.$store.dispatch("postDossierNewVersion",a).then((function(t){e.loadingAction=!1,e.$store.commit("setActivePrintBienNhan",t.dossierId),e.goBack()})).catch((function(t){e.loadingAction=!1}))):toastr__WEBPACK_IMPORTED_MODULE_0___default.a.error("Vui lòng nhập đầy đủ thông tin bắt buộc")},getDetailActionCongVan:function(){var t=this,e={dossierId:t.dossierId,stepCode:t.formActionGroup.stepCode,actionCode:t.formActionGroup.action};t.$store.dispatch("getDetailActionCongVan",e).then((function(e){var a;if(e.createDossierFiles)for(var i=e.createDossierFiles.split(","),o=function(e){var o=i.filter((function(a){return a===t.tphsCV[e]["partNo"]}));o.length>0&&7===t.tphsCV[e]["partType"]&&t.tphsCV[e]["hasForm"]&&(a=t.tphsCV[e]["partNo"])},n=0;n<t.tphsCV.length;n++)o(n);t.createFileCongVan=a,t.postStepCodeCongVan=e.postStepCode}))},getNotifyConfig:function(t){var e=this;if(e.notifyConfig&&3===e.originality){var a={dossierId:t,key:"smsNotify"};e.$store.dispatch("getNotifyConfig",a).then((function(t){"true"===String(t)?e.smsNotify=!0:e.smsNotify=!1}));var i={dossierId:t,key:"emailNotify"};e.$store.dispatch("getNotifyConfig",i).then((function(t){e.emailNotify=t,"true"===String(t)?e.emailNotify=!0:e.emailNotify=!1}))}},updateNotifyConfig:function(){var t=this;if(t.notifyConfig&&3===t.originality){var e={dossierId:t.dossierId,smsNotify:t.smsNotify,emailNotify:t.emailNotify};t.$store.dispatch("putNotifyConfig",e).then((function(t){}))}},showHDTT:function(){var t=this;t.applicantNameGuide=jquery__WEBPACK_IMPORTED_MODULE_1___default()("#delegateName").val(),t.applicantAddressGuide=jquery__WEBPACK_IMPORTED_MODULE_1___default()("#delegateAddress").val(),jquery__WEBPACK_IMPORTED_MODULE_1___default()("#select2-delegateWardCode-container").text()&&jquery__WEBPACK_IMPORTED_MODULE_1___default()("#select2-delegateWardCode-container").text().indexOf("/")<0&&(t.applicantAddressGuide+=", "+jquery__WEBPACK_IMPORTED_MODULE_1___default()("#select2-delegateWardCode-container").text(),jquery__WEBPACK_IMPORTED_MODULE_1___default()("#delegateAddress").val()||t.applicantAddressGuide.replace(/,/g,"")),jquery__WEBPACK_IMPORTED_MODULE_1___default()("#select2-delegateDistrictCode-container").text()&&jquery__WEBPACK_IMPORTED_MODULE_1___default()("#select2-delegateDistrictCode-container").text().indexOf("/")<0&&(t.applicantAddressGuide+=", "+jquery__WEBPACK_IMPORTED_MODULE_1___default()("#select2-delegateDistrictCode-container").text()),jquery__WEBPACK_IMPORTED_MODULE_1___default()("#select2-delegateCityCode-container").text()&&jquery__WEBPACK_IMPORTED_MODULE_1___default()("#select2-delegateCityCode-container").text().indexOf("/")<0&&(t.applicantAddressGuide+=", "+jquery__WEBPACK_IMPORTED_MODULE_1___default()("#select2-delegateCityCode-container").text()),t.applicantTelNoGuide=jquery__WEBPACK_IMPORTED_MODULE_1___default()("#delegateTelNo").val(),t.applicantEmailGuide=jquery__WEBPACK_IMPORTED_MODULE_1___default()("#delegateEmail").val(),t.dialog_printGuide=!0,t.$refs.formDenied.resetValidation()},showTCTN:function(){var t=this;t.applicantNameGuide=jquery__WEBPACK_IMPORTED_MODULE_1___default()("#delegateName").val(),t.applicantAddressGuide=jquery__WEBPACK_IMPORTED_MODULE_1___default()("#delegateAddress").val(),jquery__WEBPACK_IMPORTED_MODULE_1___default()("#select2-delegateWardCode-container").text()&&jquery__WEBPACK_IMPORTED_MODULE_1___default()("#select2-delegateWardCode-container").text().indexOf("/")<0&&(t.applicantAddressGuide+=", "+jquery__WEBPACK_IMPORTED_MODULE_1___default()("#select2-delegateWardCode-container").text(),jquery__WEBPACK_IMPORTED_MODULE_1___default()("#delegateAddress").val()||t.applicantAddressGuide.replace(/,/g,"")),jquery__WEBPACK_IMPORTED_MODULE_1___default()("#select2-delegateDistrictCode-container").text()&&jquery__WEBPACK_IMPORTED_MODULE_1___default()("#select2-delegateDistrictCode-container").text().indexOf("/")<0&&(t.applicantAddressGuide+=", "+jquery__WEBPACK_IMPORTED_MODULE_1___default()("#select2-delegateDistrictCode-container").text()),jquery__WEBPACK_IMPORTED_MODULE_1___default()("#select2-delegateCityCode-container").text()&&jquery__WEBPACK_IMPORTED_MODULE_1___default()("#select2-delegateCityCode-container").text().indexOf("/")<0&&(t.applicantAddressGuide+=", "+jquery__WEBPACK_IMPORTED_MODULE_1___default()("#select2-delegateCityCode-container").text()),t.applicantTelNoGuide=jquery__WEBPACK_IMPORTED_MODULE_1___default()("#delegateTelNo").val(),t.applicantEmailGuide=jquery__WEBPACK_IMPORTED_MODULE_1___default()("#delegateEmail").val(),t.dialog_denied=!0,t.$refs.formDenied.resetValidation()},doGuiding:function(t){var e=this,a=e.$router.history.current.query;if(e.$refs.formGuide.validate()){e.loadingAction=!0;var i=[];for(var o in e.tphsGuide)e.tphsGuide[o]["fileMark"]||i.push(e.tphsGuide[o]["partNo"]);var n={serviceConfigId:a.hasOwnProperty("service_config")&&a.service_config?a.service_config:"",serviceCode:e.serviceCode_hidden,serviceName:e.serviceName_hidden,templateNo:e.dossierTemplateNo_hidden,applicantName:e.applicantNameGuide,applicantAddress:e.applicantAddressGuide,applicantEmail:e.applicantEmailGuide,applicantTelNo:e.applicantTelNoGuide,govAgencyCode:e.govAgencyCode_hidden,govAgencyName:e.govAgencyName_hidden,typeCode:"DOC_03",partNo:i.toString(),applicantNote:e.applicantNoteGuide,type:"completed",applicantType:e.applicantTypeGuide?"citizen":"business"};"doc"===t&&(n["reportType"]="word"),"doc"!==t&&(e.tiltleDialog="Phiếu hướng dẫn hoàn thiện hồ sơ",e.dialogPDFLoading=!0,e.dialogPDF=!0),e.$store.dispatch("doGuiding",n).then((function(a){e.loadingAction=!1,e.dialog_printGuide=!1,e.dialogPDFLoading=!1,"doc"!==t&&(document.getElementById("dialogPDFPreview").src=a)})).catch((function(){e.loadingAction=!1}))}},doDenied:function(t){var e=this,a=e.$router.history.current.query;if(e.$refs.formDenied.validate()){e.loadingAction=!0;var i={serviceConfigId:a.hasOwnProperty("service_config")&&a.service_config?a.service_config:"",serviceCode:e.serviceCode_hidden,serviceName:e.serviceName_hidden,templateNo:e.dossierTemplateNo_hidden,applicantName:e.applicantNameGuide,applicantAddress:e.applicantAddressGuide,applicantEmail:e.applicantEmailGuide,applicantTelNo:e.applicantTelNoGuide,govAgencyCode:e.govAgencyCode_hidden,govAgencyName:e.govAgencyName_hidden,typeCode:"DOC_03",applicantNote:e.applicantNoteGuide,type:"denied",applicantType:e.applicantTypeGuide?"citizen":"business"};"doc"===t&&(i["reportType"]="word"),"doc"!==t&&(e.tiltleDialog="Phiếu từ chối tiếp nhận",e.dialogPDFLoading=!0,e.dialogPDF=!0),e.$store.dispatch("doGuiding",i).then((function(a){e.loadingAction=!1,e.dialog_denied=!1,e.dialogPDFLoading=!1,"doc"!==t&&(document.getElementById("dialogPDFPreview").src=a)})).catch((function(){e.loadingAction=!1}))}},viewDetail:function(t,e){var a=this;a.$router.history.current.query;a.$router.push("/danh-sach-ho-so/0/chi-tiet-ho-so/"+t["dossierId"])},removeDossierFromGroup:function(t){var e=this,a=e.dossiersIntoGroupRender.filter((function(e){return e.dossierId!==t.dossierId}));console.log("itemRemove555",a),e.$store.commit("setDossierSelectedDoAction",a)},processAction:function(){var t=this;t.loadingAction=!0;var e=t.$store.getters.loadingInitData,a=e.user.userName?e.user.userName:"",i={dossierId:t.dossierId,actionCode:t.formActionGroup.action,actionUser:a};t.dossiersIntoGroupRender.length>0?t.$store.dispatch("doActionDossierIntoGroup",i).then((function(e){t.loadingAction=!1,toastr__WEBPACK_IMPORTED_MODULE_0___default.a.success("Lưu và gửi công văn thành công"),t.$router.push({path:"/danh-sach-ho-so/"+t.index,query:{renew:Math.floor(100*Math.random())+1,q:t.menuConfigsToDo[t.index]["queryParams"]}})})).catch((function(e){t.loadingAction=!1})):t.loadingAction=!1},createFileKqCongVan:function(){var t=this,e={dossierId:t.dossierId,partNo:t.createFileCongVan};t.$store.dispatch("loadFormData",e).then((function(e){var a=JSON.parse(e);Object.assign(a,{tp:t.createFileCongVan,dossierId:t.dossierId});t.$store.dispatch("postEformCallBack",a).then((function(t){}))})).catch((function(t){}))},copyFileDossierIntoGroup:function(){var t=this,e=t.dossiersIntoGroupRender.map((function(t){return t.dossierId})).toString(),a=(t.$refs.thongtincongvan.getFileCongVan(),t.filesKq.filter((function(e){return 7===e["dossierPartType"]&&e["dossierPartNo"]===t.createFileCongVan})));if(a.length>0&&e.length>0){var i=a.map((function(t){return t.dossierFileId})).toString(),o={dossierIds:e,dossierFileId:i};t.$store.dispatch("uploadFileDossierGroup",o).then((function(t){}))}},getMetaData:function(t){var e="";try{e=JSON.parse(t.metaData)}catch(a){}return e},currency:function(t){if(t){var e=(t/1).toFixed(0).replace(".",",");return e.toString().replace(/\B(?=(\d{3})+(?!\d))/g,".")}return""},paggingData:function(t){var e=this;e.pagination.page=t.page;var a=e.pagination.page*e.pagination.rowsPerPage-e.pagination.rowsPerPage,i=e.pagination.page*e.pagination.rowsPerPage;e.dossiersIntoGroupRenderTemp=e.dossiersIntoGroupRender.slice(a,i)},formatDate:function(t){if(!t)return null;var e=t.split("-"),a=_slicedToArray(e,3),i=a[0],o=a[1],n=a[2];return"".concat(n,"/").concat(o,"/").concat(i)},parseDateToTimestamp:function(t){if(!t)return null;var e="".concat(t).split("/"),a=_slicedToArray(e,3),i=a[0],o=a[1],n=a[2],s="".concat(n,"-").concat(o.padStart(2,"0"),"-").concat(i.padStart(2,"0"));return"Invalid Date"==new Date(s)?"":new Date(s).getTime()},parseDate:function(t){try{var e=t.split("/"),a=_slicedToArray(e,3),i=a[0],o=a[1],n=a[2];return"".concat(n,"-").concat(o.padStart(2,"0"),"-").concat(i.padStart(2,"0"))}catch(s){return""}},dateTimeView:function(t){if(t){var e=new Date(t);return"".concat(e.getDate().toString().padStart(2,"0"),"/").concat((e.getMonth()+1).toString().padStart(2,"0"),"/").concat(e.getFullYear()," | ").concat(e.getHours().toString().padStart(2,"0"),":").concat(e.getMinutes().toString().padStart(2,"0"))}return""},goBack:function(){var t=this,e=t.$router.history.current.params,a=t.$router.history.current.query;t.isOffLine?t.$router.push({path:"/add-dvc/0"}):t.$router.push({path:"/danh-sach-ho-so/"+e.index,query:a})},goBackHistory:function(){window.history.back()},currentcyToString:function(t){var e,a,i,o="",n=!1,s=new Array(32);while(t.length>0&&"0"==t.charAt(0))t=t.substring(1,t.length);if(a=t.length,a>28)return"So khong hop le";for(var r=1;r<=a;r++)t=t.replace(",","");a=t.length;for(r=1;r<=a;r++)s[r]=parseInt(t.charAt(r-1));for(r=1;r<=a;r++){if((a-r)%3==2&&0==s[r]&&a-r>=2&&(0==s[r+1]&&0==s[r+2]||(o+="không ")),2==s[r]&&(o+="hai "),3==s[r]&&(o+="ba "),6==s[r]&&(o+="sáu "),7==s[r]&&(o+="bảy "),8==s[r]&&(o+="tám "),9==s[r]&&(o+="chín "),4==s[r]&&(r>1&&(a-r)%3==0&&s[r-1]>1?o+="tư ":o+="bốn "),5==s[r]&&(r>1&&(a-r)%3==0&&0!=s[r-1]?o+="lăm ":o+="năm "),1==s[r]&&((a-r)%3==1?o+="mười ":(a-r)%3==0&&r>1&&s[r-1]>1?o+="mốt ":o+="một "),(a-r)%3==1&&0!=s[r]&&1!=s[r]&&(o+="mươi "),(a-r)%3==1&&0==s[r]&&0!=s[r+1]&&(o+="linh "),(a-r)%3!=2||0==s[r+1]&&0==s[r+2]||(o+="trăm "),r+2<=a&&0!=s[r]&&(a-r)%3==2&&0==s[r+1]&&0==s[r+2]&&(o+="trăm "),a-r==3&&(o+="nghìn "),a-r==6&&(o+="triệu "),a-r==9&&(o+="tỷ "),a-r==12){for(n=!0,e=r+1;r<a;r++)0!=s[r+1]&&(n=!1);o+=0==n?"nghìn ":"nghìn tỷ "}if(a-r==15&&(o+="triệu tỷ "),a-r==18&&(o+="tỷ tỷ "),a-r==21&&(o+="nghìn tỷ tỷ "),a-r==24&&(o+="triệu tỷ tỷ "),a-r==27&&(o+="tỷ tỷ tỷ "),a-r==30&&(o+="nghìn tỷ tỷ "),(a-r)%3==2&&0==s[r]&&0==s[r+1]&&0==s[r+2]&&(r+=2),(a-r)%3==0)for(i=1,e=r+1;e<=a;e++)0!=s[e]&&(i=0);if(1==i)break}""==o&&(o="không ");while(","==o.charAt(o.length))o=o.substring(0,o.length-1);return o=o.charAt(0).toUpperCase()+o.substring(1,o.length),"So khong hop le"!=o?o+="đồng chẵn":o=o,o}}}},a29c:function(t,e,a){"use strict";var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("v-card",[a("v-card-text",{staticClass:"px-0 pt-0 mt-3"},[a("v-layout",{staticClass:"mt-0",attrs:{wrap:""}},[3===t.originality?a("v-flex",{staticClass:"pr-2",attrs:{xs12:"",sm6:""}},[a("v-text-field",{attrs:{label:"Số CMND/ căn cước công dân, mã số thuế doanh nghiệp, mã tổ chức","append-icon":"search",box:"","clear-icon":"clear",clearable:""},on:{keyup:function(e){return"button"in e||!t._k(e.keyCode,"enter",13,e.key,"Enter")?t.changeFilterSearch(e):null},"click:clear":t.changeFilterSearch,"click:append":t.changeFilterSearch},model:{value:t.applicantIdNo,callback:function(e){t.applicantIdNo=e},expression:"applicantIdNo"}})],1):t._e(),3===t.originality?a("v-flex",{attrs:{xs12:"",sm6:""}},[a("v-text-field",{attrs:{label:"Tìm theo mã tài liệu","append-icon":"search",box:"","clear-icon":"clear",clearable:""},on:{keyup:function(e){return"button"in e||!t._k(e.keyCode,"enter",13,e.key,"Enter")?t.changeFilterSearch(e):null},"click:clear":t.changeFilterSearch,"click:append":t.changeFilterSearch},model:{value:t.fileNoSearch,callback:function(e){t.fileNoSearch=e},expression:"fileNoSearch"}})],1):t._e(),a("v-flex",{staticClass:"pr-2",attrs:{xs12:"",sm4:""}},[a("v-autocomplete",{attrs:{items:t.fileTemplateList,label:"Chọn loại tài liệu","item-text":"name","item-value":"fileTemplateNo","hide-selected":!0,clearable:"",box:""},on:{change:t.changeFilterSearch},model:{value:t.fileTemplateNo,callback:function(e){t.fileTemplateNo=e},expression:"fileTemplateNo"}})],1),3===t.originality?a("v-flex",{staticClass:"pr-2",attrs:{xs12:"",sm4:""}},[a("v-autocomplete",{attrs:{items:t.statusList,label:"Chọn tình trạng","item-text":"text","item-value":"value","hide-selected":!0,clearable:"",box:""},on:{change:t.changeFilterSearch},model:{value:t.status,callback:function(e){t.status=e},expression:"status"}})],1):t._e(),1===t.originality?a("v-flex",{attrs:{xs12:"",sm4:""}},[a("v-text-field",{attrs:{label:"Tìm theo mã tài liệu","append-icon":"search",box:"","clear-icon":"clear",clearable:""},on:{keyup:function(e){return"button"in e||!t._k(e.keyCode,"enter",13,e.key,"Enter")?t.changeFilterSearch(e):null},"click:clear":t.changeFilterSearch,"click:append":t.changeFilterSearch},model:{value:t.fileNoSearch,callback:function(e){t.fileNoSearch=e},expression:"fileNoSearch"}})],1):t._e(),a("v-flex",{attrs:{xs12:"",sm4:""}},[a("v-text-field",{attrs:{label:"Tìm theo tên tài liệu","append-icon":"search",box:"","clear-icon":"clear",clearable:""},on:{keyup:function(e){return"button"in e||!t._k(e.keyCode,"enter",13,e.key,"Enter")?t.changeFilterSearch(e):null},"click:clear":t.changeFilterSearch,"click:append":t.changeFilterSearch},model:{value:t.keySearch,callback:function(e){t.keySearch=e},expression:"keySearch"}})],1)],1),a("v-data-table",{staticClass:"table-landing table-bordered mt-2",staticStyle:{"border-left":"1px solid #dedede"},attrs:{headers:t.documentListHeader,items:t.documentApplicantList,"hide-actions":""},scopedSlots:t._u([{key:"items",fn:function(e){return[a("tr",{class:{active:e.index%2==1},staticStyle:{cursor:"pointer"}},[a("td",{staticClass:"text-xs-center",staticStyle:{width:"50px",height:"36px"}},[t.loadingTable?a("content-placeholders",[a("content-placeholders-text",{attrs:{lines:1}})],1):a("div",[a("span",[t._v(t._s(t.documentPage*t.numberPerPage-t.numberPerPage+e.index+1))])])],1),a("td",{staticClass:"text-xs-left",staticStyle:{height:"36px","min-width":"450px"}},[t.loadingTable?a("content-placeholders",[a("content-placeholders-text",{attrs:{lines:1}})],1):a("div",[a("span",[t._v(t._s(e.item.hasOwnProperty("fileName")?e.item.fileName:""))])])],1),a("td",{staticClass:"text-xs-left",staticStyle:{height:"36px","min-width":"150px"}},[t.loadingTable?a("content-placeholders",[a("content-placeholders-text",{attrs:{lines:1}})],1):a("div",[a("span",[t._v(t._s(e.item.hasOwnProperty("fileNo")?e.item.fileNo:""))])])],1),a("td",{staticClass:"text-xs-left",staticStyle:{height:"36px","min-width":"200px"}},[t.loadingTable?a("content-placeholders",[a("content-placeholders-text",{attrs:{lines:1}})],1):a("div",[a("span",[t._v(t._s(e.item.hasOwnProperty("dossierNo")?e.item.dossierNo:""))])])],1),a("td",{staticClass:"text-xs-center",staticStyle:{height:"36px",width:"135px"}},[t.loadingTable?a("content-placeholders",[a("content-placeholders-text",{attrs:{lines:1}})],1):a("div",[a("span",{style:1===e.item.status?"color: green":2===e.item.status?"color: red":"color: orange"},[t._v("\n                  "+t._s(e.item.hasOwnProperty("status")?t.getStatus(e.item.status):"")+"\n                ")])])],1),a("td",{staticClass:"text-xs-center",staticStyle:{height:"36px",width:"100px"}},[t.loadingTable?a("content-placeholders",[a("content-placeholders-text",{attrs:{lines:1}})],1):t._e(),t.loadingTable?t._e():a("v-tooltip",{staticClass:"mr-2",attrs:{top:""}},[a("v-btn",{staticClass:"mx-0 my-0",attrs:{slot:"activator",color:"blue",flat:"",icon:""},on:{click:function(a){t.viewDocument(e.item)}},slot:"activator"},[a("v-icon",[t._v("visibility")])],1),a("span",[t._v("Xem trước")])],1),t.loadingTable?t._e():a("v-tooltip",{staticClass:"mr-2",attrs:{top:""}},[a("v-btn",{staticClass:"mx-0 my-0",attrs:{slot:"activator",color:"blue",flat:"",icon:""},on:{click:function(a){t.$emit("trigger-attach",e.item)}},slot:"activator"},[a("v-icon",[t._v("fas fa fa-download")])],1),a("span",[t._v("Sử dụng")])],1)],1)])]}}])},[a("template",{slot:"no-data"},[t.loadingTable?a("v-progress-linear",{attrs:{indeterminate:!0}}):a("div",{staticClass:"text-xs-center mt-2"},[t._v("\n            Không có tài liệu\n          ")])],1)],2),t.totalDocument>t.numberPerPage?a("div",{staticClass:"my-2"},[a("div",{staticClass:"text-xs-right layout wrap",staticStyle:{position:"relative"}},[a("div",{staticClass:"flex pagging-table"},[a("tiny-pagination",{attrs:{total:t.totalDocument,page:t.documentPage,numberPerPage:t.numberPerPage,nameRecord:"tài liệu","custom-class":"custom-tiny-class"},on:{"tiny:change-page":t.changePage}})],1)])]):t._e()],1)],1),a("v-dialog",{attrs:{"max-width":"1200",transition:"fade-transition"},model:{value:t.dialogPDF,callback:function(e){t.dialogPDF=e},expression:"dialogPDF"}},[a("v-card",[a("v-toolbar",{attrs:{flat:"",dark:"",color:"primary"}},[a("v-toolbar-title",[t._v("Tài liệu đính kèm")]),a("v-spacer"),a("v-btn",{attrs:{icon:"",dark:""},nativeOn:{click:function(e){t.dialogPDF=!1}}},[a("v-icon",[t._v("close")])],1)],1),a("iframe",{staticStyle:{overflow:"auto","min-height":"600px"},attrs:{id:"dialogPDFPreview",src:"",type:"application/pdf",width:"100%",height:"100%",frameborder:"0"}})],1)],1),a("div",{staticStyle:{display:"none"}},[a("a",{attrs:{id:"downloadFile",href:t.srcDownload,download:""}})])],1)},o=[],n=a("a026"),s=a("854a"),r=a.n(s),c=(a("bc3a"),a("1157"),a("e722"));n["a"].use(r.a);var l={props:["index"],components:{"tiny-pagination":c["a"]},data:function(){return{applicantInfos:"",nameTitle:"",creditTitle:"",documentApplicantList:"",totalDocument:0,documentPage:1,numberPerPage:15,statusList:[{text:"Chưa duyệt",value:0},{text:"Có hiệu lực",value:1},{text:"Hết hiệu lực",value:2}],status:"",statusCreate:"",fileTemplateNoCreate:"",fileTemplateList:[],fileTemplateNo:"",fileName:"",fileNo:"",fileUpdate:"",fileNameUpdate:"",fileNoSearch:"",keySearch:"",dialog_createDocument:!1,updateFile:!1,loadingAction:!1,loadingTable:!1,dialogPDF:!1,valid:!1,documentListHeader:[{text:"STT",align:"center",sortable:!1},{text:"Tên tài liệu",align:"center",sortable:!1},{text:"Mã số",align:"center",sortable:!1},{text:"Hồ sơ gốc",align:"center",sortable:!1},{text:"Tình trạng",align:"center",sortable:!1},{text:"Thao tác",align:"center",sortable:!1}],maxFileSize:100,typeCreate:"create",documentSelect:"",fileNameView:"",srcDownload:"",applicantIdNo:""}},computed:{originality:function(){var t=this;return t.getOriginality()}},watch:{$route:function(t,e){t.params,t.query},index:function(t){this.applicantIdNo=t}},created:function(){var t=this;t.$nextTick((function(){t.$router.history.current,t.$router.history.current.query;t.applicantIdNo=t.index}))},mounted:function(){var t=this;t.applicantIdNo=t.index},methods:{initData:function(){var t=this;t.getApplicantDocument(),t.getFileItems()},getApplicantInfos:function(){var t=this,e={applicantId:t.index};t.$store.dispatch("getApplicantInfos",e).then((function(e){t.applicantInfos=e,t.getApplicantType(t.applicantInfos)})).catch((function(){}))},getApplicantDocument:function(){var t=this,e={start:t.documentPage*t.numberPerPage-t.numberPerPage,end:t.documentPage*t.numberPerPage,applicantIdNo:t.applicantIdNo,fileTemplateNo:t.fileTemplateNo,status:1===t.originality?1:t.status,keywordSearch:t.keySearch,fileNoSearch:t.fileNoSearch,applicantDataType:""};t.loadingTable=!0,t.$store.dispatch("getApplicantDocument",e).then((function(e){e.hasOwnProperty("data")?t.documentApplicantList=e.data:t.documentApplicantList=[],t.totalDocument=e["total"],t.loadingTable=!1})).catch((function(){t.loadingTable=!1,t.documentApplicantList=[],t.totalDocument=0}))},getFileItems:function(){var t=this,e={status:1};t.$store.dispatch("getFileItems",e).then((function(e){e.hasOwnProperty("data")?t.fileTemplateList=e.data:t.fileTemplateList=[]})).catch((function(){}))},showCreatedocument:function(){var t=this;t.typeCreate="create",t.dialog_createDocument=!0,t.$refs.form.reset(),t.$refs.form.resetValidation(),t.fileNameView=""},getDocumentTypeIcon:function(t){var e="doc,docx",a="xls,xlsx",i="png,jpg,jpeg";return t?e.indexOf(t.toLowerCase())>=0?{icon:"fas fa fa-file-word-o",color:"blue",size:14}:a.indexOf(t.toLowerCase())>=0?{icon:"fas fa fa-file-excel-o",color:"green",size:14}:"pdf"===t.toLowerCase()?{icon:"fa fa-file-pdf-o",color:"red",size:14}:i.indexOf(t.toLowerCase())>=0?{icon:"fas fa fa-file-image-o",color:"primary",size:14}:{icon:"fas fa fa-paperclip",color:"",size:14}:""},changeFilterSearch:function(){var t=this;t.documentPage=1,setTimeout((function(){t.getApplicantDocument()}),200)},changePage:function(t){var e=this;e.documentPage=t.page,e.getApplicantDocument()},showEditDocument:function(t){var e=this;e.documentSelect=t,e.typeCreate="update",e.fileNameView=t.filePath,e.fileTemplateNoCreate=e.fileTemplateList.filter((function(e){return e.fileTemplateNo===t.fileTemplateNo}))[0],e.statusCreate=t.status,e.fileName=t.fileName,e.fileNo=t.fileNo,e.dialog_createDocument=!0},validFileUpload:function(t){var e=this,a=!0,i=t.name?t.name.split("."):"",o=i?i[i.length-1]:"",n=e.fileTemplateNoCreate&&e.fileTemplateNoCreate.fileType?e.fileTemplateNoCreate.fileType.toUpperCase().split(","):"",s=e.fileTemplateNoCreate&&e.fileTemplateNoCreate.size?e.fileTemplateNoCreate.size:e.maxFileSize,c=n?n.filter((function(t){return t===o.toUpperCase()})):"";return c&&c.length>0||!n?Number(t.size)<=1048576*s||!s?a=!0:(a=!1,r.a.clear(),r.a.error("Tài liệu tải lên dung lượng tối đa là "+s+"MB")):(a=!1,r.a.clear(),r.a.error("Tài liệu tải lên chỉ chấp nhận các định dạng "+e.fileTemplateNoCreate.fileType)),a},attachDocument:function(){},downloadDocument:function(t){var e=this;e.srcDownload="";t.filePath;var a={applicantDataId:t.applicantDataId};e.$store.dispatch("getFileAttach",a).then((function(t){e.srcDownload=t,setTimeout((function(){document.getElementById("downloadFile").click()}),100)})).catch((function(){}))},viewDocument:function(t){var e=this;e.srcDownload="";t.filePath;var a={applicantDataId:t.applicantDataId};e.$store.dispatch("getFileAttach",a).then((function(a){var i=t.fileExtension.toLowerCase();"png"===i||"jpg"===i||"jpeg"===i||"pdf"===i||"gif"===i||"tif"===i||"tiff"===i?(e.dialogPDF=!0,document.getElementById("dialogPDFPreview").src=a):(e.srcDownload=a,setTimeout((function(){document.getElementById("downloadFile").click()}),100))})).catch((function(){}))},getApplicantType:function(t){var e=this;""===t.applicantIdType?(e.nameTitle="Tên công dân, tổ chức, doanh nghiệp",e.creditTitle="Số CMND/ căn cước, mã số thuế doanh nghiệp"):"citizen"===t.applicantIdType?(e.nameTitle="Tên công dân",e.creditTitle="Số CMND/ căn cước"):"business"===t.applicantIdType?(e.nameTitle="Tên doanh nghiệp",e.creditTitle="Mã số thuế doanh nghiệp"):(e.nameTitle="Tên cơ quan, tổ chức",e.creditTitle="Mã cơ quan, tổ chức")},getStatus:function(t){return"1"===String(t)?"Có hiệu lực":"2"===String(t)?"Hết hiệu lực":"Chưa duyệt"},goBack:function(){window.history.back()}}},d=l,u=a("2877"),h=a("6544"),p=a.n(h),m=a("c6a6"),g=a("8336"),v=a("b0af"),f=a("99d9"),_=a("8fea"),y=a("169a"),C=a("0e8f"),D=a("132d"),T=a("a722"),x=a("8e36"),b=a("9910"),S=a("2677"),N=a("71d9"),P=a("2a7f"),I=a("3a2f"),A=Object(u["a"])(d,i,o,!1,null,null,null);e["a"]=A.exports;p()(A,{VAutocomplete:m["a"],VBtn:g["a"],VCard:v["a"],VCardText:f["b"],VDataTable:_["a"],VDialog:y["a"],VFlex:C["a"],VIcon:D["a"],VLayout:T["a"],VProgressLinear:x["a"],VSpacer:b["a"],VTextField:S["a"],VToolbar:N["a"],VToolbarTitle:P["b"],VTooltip:I["a"]})},a9a9:function(t,e,a){"use strict";var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("v-card",[a("v-card-text",[a("v-slide-y-transition",[2===t.dichVuChuyenPhatKetQua.viaPostal?a("v-form",{ref:"formDichVuChuyenPhat",attrs:{"lazy-validation":""},model:{value:t.valid_dichvuchuyenphat,callback:function(e){t.valid_dichvuchuyenphat=e},expression:"valid_dichvuchuyenphat"}},[a("v-layout",{attrs:{wrap:""}},[a("v-flex",{attrs:{xs12:"",sm2:""}},[t.loading?a("content-placeholders",{staticClass:"mt-1"},[a("content-placeholders-text",{attrs:{lines:1}})],1):a("v-subheader",{staticClass:"pl-0"},[t._v("Dịch vụ đăng ký "),a("span",{staticStyle:{color:"red"}},[t._v(" * ")]),t._v(": ")])],1),a("v-flex",{attrs:{xs12:"",sm10:""}},[t.loading?a("content-placeholders",{staticClass:"mt-1"},[a("content-placeholders-text",{attrs:{lines:1}})],1):a("v-autocomplete",{attrs:{items:t.postalServiceItems,"item-text":"itemName","item-value":"itemCode",rules:[function(t){return!!t||"Trường dữ liệu bắt buộc"}],required:"","hide-no-data":""},model:{value:t.dichVuChuyenPhatKetQua.postalServiceCode,callback:function(e){t.$set(t.dichVuChuyenPhatKetQua,"postalServiceCode",e)},expression:"dichVuChuyenPhatKetQua.postalServiceCode"}})],1),a("v-flex",{attrs:{xs12:""}}),a("v-flex",{attrs:{xs12:"",sm2:""}},[t.loading?a("content-placeholders",{staticClass:"mt-1"},[a("content-placeholders-text",{attrs:{lines:1}})],1):a("v-subheader",{staticClass:"pl-0"},[t._v("Địa chỉ trả kết quả"),a("span",{staticStyle:{color:"red"}},[t._v(" * ")]),t._v(": ")])],1),a("v-flex",{attrs:{xs12:"",sm10:""}},[t.loading?a("content-placeholders",{staticClass:"mt-1"},[a("content-placeholders-text",{attrs:{lines:1}})],1):a("v-text-field",{attrs:{rules:[function(t){return!!t||"Trường dữ liệu bắt buộc"}],required:""},model:{value:t.dichVuChuyenPhatKetQua.postalAddress,callback:function(e){t.$set(t.dichVuChuyenPhatKetQua,"postalAddress",e)},expression:"dichVuChuyenPhatKetQua.postalAddress"}})],1),a("v-flex",{attrs:{xs12:"",sm2:""}},[t.loading?a("content-placeholders",{staticClass:"mt-1"},[a("content-placeholders-text",{attrs:{lines:1}})],1):a("v-subheader",{staticClass:"pl-0"},[t._v("Tỉnh/Thành phố"),a("span",{staticStyle:{color:"red"}},[t._v(" * ")]),t._v(": ")])],1),a("v-flex",{attrs:{xs12:"",sm4:""}},[t.loading?a("content-placeholders",{staticClass:"mt-1"},[a("content-placeholders-text",{attrs:{lines:1}})],1):a("v-autocomplete",{attrs:{items:t.citys,"item-text":"itemName","item-value":"itemCode",rules:[function(t){return!!t||"Trường dữ liệu bắt buộc"}],required:"","hide-no-data":""},on:{change:t.onChangeResultCity},model:{value:t.dichVuChuyenPhatKetQua.postalCityCode,callback:function(e){t.$set(t.dichVuChuyenPhatKetQua,"postalCityCode",e)},expression:"dichVuChuyenPhatKetQua.postalCityCode"}})],1),a("v-flex",{attrs:{xs12:"",sm2:""}},[t.loading?a("content-placeholders",{staticClass:"mt-1"},[a("content-placeholders-text",{attrs:{lines:1}})],1):a("v-subheader",{staticClass:"pl-0"},[t._v("Quận/Huyện"),a("span",{staticStyle:{color:"red"}},[t._v(" * ")]),t._v(": ")])],1),a("v-flex",{attrs:{xs12:"",sm4:""}},[t.loading?a("content-placeholders",{staticClass:"mt-1"},[a("content-placeholders-text",{attrs:{lines:1}})],1):a("v-autocomplete",{attrs:{items:t.resultDistricts,"item-text":"itemName","item-value":"itemCode",rules:[function(t){return!!t||"Trường dữ liệu bắt buộc"}],required:"","hide-no-data":""},on:{change:t.onChangeResultDistrict},model:{value:t.dichVuChuyenPhatKetQua.postalDistrictCode,callback:function(e){t.$set(t.dichVuChuyenPhatKetQua,"postalDistrictCode",e)},expression:"dichVuChuyenPhatKetQua.postalDistrictCode"}})],1),a("v-flex",{attrs:{xs12:"",sm2:""}},[t.loading?a("content-placeholders",{staticClass:"mt-1"},[a("content-placeholders-text",{attrs:{lines:1}})],1):a("v-subheader",{staticClass:"pl-0"},[t._v("SĐT người nhận"),a("span",{staticStyle:{color:"red"}},[t._v(" * ")]),t._v(": ")])],1),a("v-flex",{attrs:{xs12:"",sm4:""}},[t.loading?a("content-placeholders",{staticClass:"mt-1"},[a("content-placeholders-text",{attrs:{lines:1}})],1):a("v-text-field",{attrs:{"append-icon":"phone",rules:[t.rules.telNo,t.rules.required],required:""},model:{value:t.dichVuChuyenPhatKetQua.postalTelNo,callback:function(e){t.$set(t.dichVuChuyenPhatKetQua,"postalTelNo",e)},expression:"dichVuChuyenPhatKetQua.postalTelNo"}})],1)],1)],1):t._e()],1)],1)],1),a("div",{staticClass:"absolute__btn",staticStyle:{width:"350px","margin-top":"4px"}},[t.loading?a("content-placeholders",{staticClass:"mt-1"},[a("content-placeholders-text",{attrs:{lines:1}})],1):t._e(),a("v-radio-group",{staticClass:"mt-1",attrs:{row:""},on:{change:function(e){t.changeViaPostal(e)}},model:{value:t.dichVuChuyenPhatKetQua.viaPostal,callback:function(e){t.$set(t.dichVuChuyenPhatKetQua,"viaPostal",e)},expression:"dichVuChuyenPhatKetQua.viaPostal"}},[a("v-radio",{attrs:{label:"Nhận kết quả trực tiếp",value:1}}),a("v-radio",{attrs:{label:"Nhận kết quả tại nhà",value:2}})],1)],1)],1)},o=[],n={data:function(){return{valid_dichvuchuyenphat:!1,citys:[],resultDistricts:[],resultWards:[],vnPostItems:[],postalServiceItems:[{itemName:"VIETTEL POST",itemCode:"VTPOST"}],rules:{required:function(t){return!!t||"Trường dữ liệu bắt buộc"},email:function(t){t=t.trim();var e=/^(([^<>()[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/;return e.test(t)||"Địa chỉ Email không hợp lệ"},telNo:function(t){var e=/^([0-9]{0,})$/;return"string"===typeof t&&(t=t.trim()),e.test(t)||"Gồm các ký tự 0-9"}}}},computed:{loading:function(){return this.$store.getters.loading},thongTinChuHoSoBindChuyenPhat:function(){return this.$store.getters.thongTinChuHoSoBindChuyenPhat},dichVuChuyenPhatKetQua:function(){return this.$store.getters.dichVuChuyenPhatKetQua}},created:function(){var t=this;t.$store.dispatch("getVNPOSTcode").then((function(e){t.vnPostItems=e})),this.postalServiceItems.length>0&&(this.dichVuChuyenPhatKetQua.postalServiceCode=this.postalServiceItems[0].itemCode)},watch:{thongTinChuHoSoBindChuyenPhat:function(t){}},mounted:function(){var t=this,e={collectionCode:"VNPOST_CITY_CODE",level:0,parent:0},a=t.dichVuChuyenPhatKetQua;t.$store.getters.getDictItems(e).then((function(e){t.citys=e.data})),a.postalCityCode&&(e.parent=a.postalCityCode,e.level=1,t.$store.getters.getDictItems(e).then((function(e){t.resultDistricts=e.data})))},methods:{initData:function(t){var e=this;e.$nextTick((function(){}))},onChangeResultCity:function(t){var e=this,a={collectionCode:"VNPOST_CITY_CODE",level:1,parent:t};console.log("onChangeResultCity",t),e.$store.getters.getDictItems(a).then((function(t){e.resultDistricts=t.data}))},onChangeResultDistrict:function(t){var e=this;e.dichVuChuyenPhatHoSo.postalDistrictName=e.resultDistricts.filter((function(e){return e.itemCode===t}))[0]["itemName"]},changeViaPostal:function(t){console.log("changeViaPostal",t),this.$store.commit("setViaPostal",t),this.$emit("changeViapostal",t);var e={viaPostal:t,postalServiceCode:this.dichVuChuyenPhatKetQua.postalServiceCode?this.dichVuChuyenPhatKetQua.postalServiceCode:"",postalAddress:this.dichVuChuyenPhatKetQua.postalAddress?this.dichVuChuyenPhatKetQua.postalAddress:"",postalCityCode:this.dichVuChuyenPhatKetQua.postalCityCode?this.dichVuChuyenPhatKetQua.postalCityCode:"",postalDistrictCode:this.dichVuChuyenPhatKetQua.postalDistrictCode?this.dichVuChuyenPhatKetQua.postalDistrictCode:"",postalWardCode:this.dichVuChuyenPhatKetQua.postalWardCode?this.dichVuChuyenPhatKetQua.postalWardCode:"",postalTelNo:this.dichVuChuyenPhatKetQua.postalTelNo?this.dichVuChuyenPhatKetQua.postalTelNo:""};this.$store.commit("setDichVuChuyenPhatKetQua",e),console.log("dichVuChuyenPhatKetQua",this.dichVuChuyenPhatKetQua)},validDichVuChuyenPhat:function(){var t=this;return t.$refs.formDichVuChuyenPhat.validate()}}},s=n,r=a("2877"),c=a("6544"),l=a.n(c),d=a("c6a6"),u=a("b0af"),h=a("99d9"),p=a("0e8f"),m=a("4bd4"),g=a("a722"),v=a("67b6"),f=a("43a6"),_=a("0789"),y=a("e0c7"),C=a("2677"),D=Object(r["a"])(s,i,o,!1,null,null,null);e["a"]=D.exports;l()(D,{VAutocomplete:d["a"],VCard:u["a"],VCardText:h["b"],VFlex:p["a"],VForm:m["a"],VLayout:g["a"],VRadio:v["a"],VRadioGroup:f["a"],VSlideYTransition:_["d"],VSubheader:y["a"],VTextField:C["a"]})},b799:function(t,e,a){"use strict";var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("v-form",{ref:"formThongTinCongVan",attrs:{"lazy-validation":""},model:{value:t.valid_thongtincongvan,callback:function(e){t.valid_thongtincongvan=e},expression:"valid_thongtincongvan"}},[a("div",[a("div",{staticStyle:{position:"relative"}},[a("v-expansion-panel",{staticClass:"expansion-pl",attrs:{value:[!0],expand:""}},[a("v-expansion-panel-content",[a("div",{attrs:{slot:"header"},slot:"header"},[a("div",{staticClass:"background-triangle-small"},[a("v-icon",{attrs:{size:"18",color:"white"}},[t._v("star_rate")])],1),t._v(" Thông tin công văn")]),a("v-card",[a("v-card-text",{staticClass:"pt-3"},[t.congVanDaGui?a("v-layout",{attrs:{wrap:""}},[a("v-flex",{staticClass:"pr-3",attrs:{xs12:"",sm4:""}},[a("div",{staticClass:"xs12 sm12 pb-2"},[a("span",{staticClass:"pr-2"},[t._v("Số công văn: ")]),a("span",{staticClass:"pl-0 text-bold"},[t._v(" "+t._s(t.thongTinCongVan.documentNo))])]),a("div",{staticClass:"xs12 sm12 pb-2"},[a("span",{staticClass:"pr-2"},[t._v("Ngày công văn: ")]),a("span",{staticClass:"pl-0 text-bold"},[t._v(" "+t._s(t.dateFormated))])]),a("div",{staticClass:"xs12 sm12 pb-2"},[a("span",{staticClass:"pr-2"},[t._v("Ngày hẹn trả lời: ")]),a("span",{staticClass:"pl-0 text-bold"},[t._v(" "+t._s(t.duedateFormated))])])]),a("v-flex",{staticClass:"pr-3",attrs:{xs12:"",sm4:""}},[a("div",{staticClass:"xs12 sm12 pb-2"},["NEW_GROUP_CV"===t.formCodeInput?a("span",{staticClass:"pr-2"},[t._v("Đơn vị gửi công văn: ")]):t._e(),"NEW_GROUP_CV_DI"===t.formCodeInput?a("span",{staticClass:"pr-2"},[t._v("Đơn vị nhận công văn: ")]):t._e(),a("span",{staticClass:"pl-0 text-bold"},[t._v(" "+t._s("NEW_GROUP_CV_DI"===t.formCodeInput?t.metaDataDossier.tendonvinhan:t.metaDataDossier.tendonvigui))])]),a("div",{staticClass:"xs12 sm12 pb-2"},[a("span",{staticClass:"pr-2"},[t._v("Chức vụ người ký: ")]),a("span",{staticClass:"pl-0 text-bold"},[t._v(" "+t._s(t.jobposSignerCongVan))])]),a("div",{staticClass:"xs12 sm12 pb-2"},[a("span",{staticClass:"pr-2"},[t._v("Người ký: ")]),a("span",{staticClass:"pl-0 text-bold"},[t._v(" "+t._s(t.signerCongVan))])])]),a("v-flex",{staticClass:"pr-3",attrs:{xs12:"",sm4:""}},[a("div",{staticClass:"xs12 sm12 pb-2"},[a("span",{staticClass:"pr-2"},[t._v("Số lượng hồ sơ đề nghị xét: ")]),a("span",{staticClass:"pl-0 text-bold"},[t._v(" "+t._s(t.lengthDossier))])]),a("div",{staticClass:"xs12 sm12 pb-2"},[a("span",{staticClass:"pr-2"},[t._v("Số điện thoại: ")]),a("span",{staticClass:"pl-0 text-bold"},[t._v(" "+t._s(t.thongTinCongVan.contactTelNo))])]),a("div",{staticClass:"xs12 sm12 pb-2"},[a("span",{staticClass:"pr-2"},[t._v("Địa chỉ email: ")]),a("span",{staticClass:"pl-0 text-bold"},[t._v(" "+t._s(t.thongTinCongVan.contactEmail))])])]),a("v-flex",{staticClass:"pr-3",attrs:{xs12:""}},[a("span",{staticClass:"pr-2"},[t._v("Nội dung tóm tắt: ")]),a("span",{staticClass:"pl-0 text-bold"},[t._v(" "+t._s(t.thongTinCongVan.briefNote))])])],1):a("v-layout",{attrs:{wrap:""}},[a("v-flex",{staticClass:"mb-2",attrs:{xs12:"",sm2:""}},[t.loading?a("content-placeholders",{staticClass:"mt-1"},[a("content-placeholders-text",{attrs:{lines:1}})],1):a("v-subheader",{staticClass:"pl-0"},[t._v("Số công văn "),t.congVanDaGui?t._e():a("span",{staticStyle:{color:"red"}},[t._v(" *")]),t._v(": ")])],1),a("v-flex",{staticClass:"mb-2",attrs:{xs12:"",sm4:""}},[t.loading?a("content-placeholders",{staticClass:"mt-1"},[a("content-placeholders-text",{attrs:{lines:1}})],1):t.loading||t.congVanDaGui?a("p",{staticClass:"pt-2"},[t._v(t._s(t.thongTinCongVan.documentNo))]):a("v-text-field",{attrs:{rules:[t.rules.required,t.rules.varchar100],required:""},on:{change:function(e){t.thongTinCongVan.documentNo=String(t.thongTinCongVan.documentNo).trim()}},model:{value:t.thongTinCongVan.documentNo,callback:function(e){t.$set(t.thongTinCongVan,"documentNo",e)},expression:"thongTinCongVan.documentNo"}})],1),a("v-flex",{staticClass:"mb-2",attrs:{xs12:"",sm2:""}},[t.loading?a("content-placeholders",{staticClass:"mt-1"},[a("content-placeholders-text",{attrs:{lines:1}})],1):a("v-subheader",{staticClass:"pl-0"},[t._v("Ngày công văn "),t.congVanDaGui?t._e():a("span",{staticStyle:{color:"red"}},[t._v(" *")]),t._v(": ")])],1),a("v-flex",{staticClass:"mb-2",attrs:{xs12:"",sm4:""}},[t.loading?a("content-placeholders",{staticClass:"mt-1"},[a("content-placeholders-text",{attrs:{lines:1}})],1):t.loading||t.congVanDaGui?a("p",{staticClass:"pt-2"},[t._v(t._s(t.dateFormated))]):a("v-menu",{ref:"menuDate",attrs:{"close-on-content-click":!1,"nudge-right":40,lazy:"",transition:"scale-transition","offset-y":"","full-width":"","max-width":"290px","min-width":"290px"},model:{value:t.menuDate,callback:function(e){t.menuDate=e},expression:"menuDate"}},[a("v-text-field",{attrs:{slot:"activator",rules:[t.rules.required],required:"","append-icon":"event",placeholder:"dd/mm/yyyy"},on:{input:function(e){t.inputDate("dateFormated")},change:function(e){t.changeDocumentDate()}},slot:"activator",model:{value:t.dateFormated,callback:function(e){t.dateFormated=e},expression:"dateFormated"}}),a("v-date-picker",{ref:"picker",attrs:{locale:"vi","first-day-of-week":1,"no-title":""},on:{input:function(e){t.menuDate=!1}},model:{value:t.documentDate,callback:function(e){t.documentDate=e},expression:"documentDate"}})],1)],1),a("v-flex",{staticClass:"mb-2",attrs:{xs12:"",sm2:""}},[t.loading?a("content-placeholders",{staticClass:"mt-1"},[a("content-placeholders-text",{attrs:{lines:1}})],1):a("v-subheader",{staticClass:"pl-0"},[t._v("Số lượng hồ sơ đề nghị xét"),t.congVanDaGui?t._e():a("span",{staticStyle:{color:"red"}},[t._v(" *")]),t._v(": ")])],1),a("v-flex",{staticClass:"mb-2 input-no-drop",attrs:{xs12:"",sm4:""}},[t.loading?a("content-placeholders",{staticClass:"mt-1"},[a("content-placeholders-text",{attrs:{lines:1}})],1):t.loading||t.congVanDaGui?a("p",{staticClass:"pt-2"},[t._v(t._s(t.lengthDossier))]):a("v-text-field",{attrs:{disabled:""},model:{value:t.lengthDossier,callback:function(e){t.lengthDossier=e},expression:"lengthDossier"}})],1),a("v-flex",{staticClass:"mb-2",attrs:{xs12:"",sm2:""}},[t.loading?a("content-placeholders",{staticClass:"mt-1"},[a("content-placeholders-text",{attrs:{lines:1}})],1):a("v-subheader",{staticClass:"pl-0"},[t._v("Ngày hẹn trả lời"),t.congVanDaGui?t._e():a("span",{staticStyle:{color:"red"}},[t._v(" *")]),t._v(": ")])],1),a("v-flex",{staticClass:"mb-2",attrs:{xs12:"",sm4:""}},[t.loading?a("content-placeholders",{staticClass:"mt-1"},[a("content-placeholders-text",{attrs:{lines:1}})],1):t.loading||t.congVanDaGui?a("p",{staticClass:"pt-2"},[t._v(t._s(t.duedateFormated))]):a("v-menu",{ref:"menuDueDate",attrs:{"close-on-content-click":!1,"nudge-right":40,lazy:"",transition:"scale-transition","offset-y":"","full-width":"","max-width":"290px","min-width":"290px"},model:{value:t.menuDueDate,callback:function(e){t.menuDueDate=e},expression:"menuDueDate"}},[a("v-text-field",{attrs:{slot:"activator",rules:[t.rules.required],required:"","append-icon":"event",placeholder:"dd/mm/yyyy"},on:{input:function(e){t.inputDate("duedateFormated")},change:function(e){t.changeDueDate()}},slot:"activator",model:{value:t.duedateFormated,callback:function(e){t.duedateFormated=e},expression:"duedateFormated"}}),a("v-date-picker",{ref:"picker",attrs:{min:t.getMindate(),locale:"vi","first-day-of-week":1,"no-title":""},on:{input:function(e){t.menuDueDate=!1}},model:{value:t.dueDate,callback:function(e){t.dueDate=e},expression:"dueDate"}})],1)],1),"NEW_GROUP_CV"!==t.formCodeInput?a("v-flex",{staticClass:"mb-2",attrs:{xs12:"",sm2:""}},[t.loading?a("content-placeholders",{staticClass:"mt-1"},[a("content-placeholders-text",{attrs:{lines:1}})],1):a("v-subheader",{staticClass:"pl-0"},["NEW_GROUP_CV"===t.formCodeInput?a("span",[t._v("Đơn vị gửi công văn ")]):t._e(),"NEW_GROUP_CV_DI"===t.formCodeInput?a("span",[t._v("Đơn vị nhận công văn ")]):t._e(),"NEW_GROUP_CV_DI"!==t.formCodeInput||0===t.lengthDossier||"undefined"===typeof t.lengthDossier||t.congVanDaGui?t._e():a("span",{staticStyle:{color:"red"}},[t._v(" *")]),t._v(": \n                    ")])],1):t._e(),"NEW_GROUP_CV"!==t.formCodeInput?a("v-flex",{staticClass:"mb-2",attrs:{xs12:"",sm10:""}},[t.loading?a("content-placeholders",{staticClass:"mt-1"},[a("content-placeholders-text",{attrs:{lines:1}})],1):t.loading||t.congVanDaGui?a("p",{staticClass:"pt-2"},[t._v(t._s("NEW_GROUP_CV_DI"===t.formCodeInput?t.metaDataDossier.tendonvinhan:t.metaDataDossier.tendonvigui))]):a("v-autocomplete",{attrs:{"hide-no-data":"",items:t.govAgencySubmitList,"item-text":"itemName","item-value":"itemCode",rules:"NEW_GROUP_CV_DI"===t.formCodeInput&&0!==t.lengthDossier&&"undefined"!==typeof t.lengthDossier?[t.rules.required]:[],required:"NEW_GROUP_CV_DI"===t.formCodeInput&&0!==t.lengthDossier&&"undefined"!==typeof t.lengthDossier,disabled:"NEW_GROUP_CV_DI"===t.formCodeInput&&(0===t.lengthDossier||"undefined"===typeof t.lengthDossier)},model:{value:t.donvi_gui_nhan,callback:function(e){t.donvi_gui_nhan=e},expression:"donvi_gui_nhan"}})],1):t._e(),a("v-flex",{staticClass:"mb-2",attrs:{xs12:"",sm2:""}},[t.loading?a("content-placeholders",{staticClass:"mt-1"},[a("content-placeholders-text",{attrs:{lines:1}})],1):a("v-subheader",{staticClass:"pl-0"},[t._v("Nội dung tóm tắt "),t.congVanDaGui?t._e():a("span",{staticStyle:{color:"red"}},[t._v(" *")]),t._v(": ")])],1),a("v-flex",{staticClass:"mb-2",attrs:{xs12:"",sm10:""}},[t.loading?a("content-placeholders",{staticClass:"mt-1"},[a("content-placeholders-text",{attrs:{lines:1}})],1):t.loading||t.congVanDaGui?a("p",{staticClass:"pt-2"},[t._v(t._s(t.thongTinCongVan.briefNote))]):a("v-textarea",{attrs:{rows:"3",rules:[t.rules.required,t.rules.varchar5000],required:""},on:{change:function(e){t.thongTinCongVan.briefNote=String(t.thongTinCongVan.briefNote).trim()}},model:{value:t.thongTinCongVan.briefNote,callback:function(e){t.$set(t.thongTinCongVan,"briefNote",e)},expression:"thongTinCongVan.briefNote"}})],1),a("v-flex",{staticClass:"mb-2",attrs:{xs12:"",sm2:""}},[t.loading?a("content-placeholders",{staticClass:"mt-1"},[a("content-placeholders-text",{attrs:{lines:1}})],1):a("v-subheader",{staticClass:"pl-0"},[t._v("Chức vụ người ký"),t.congVanDaGui?t._e():a("span",{staticStyle:{color:"red"}},[t._v(" *")]),t._v(": ")])],1),a("v-flex",{staticClass:"mb-2",attrs:{xs12:"",sm4:""}},[t.loading?a("content-placeholders",{staticClass:"mt-1"},[a("content-placeholders-text",{attrs:{lines:1}})],1):t.loading||t.congVanDaGui?a("p",{staticClass:"pt-2"},[t._v(t._s(t.jobposSignerCongVan))]):a("v-text-field",{attrs:{rules:[t.rules.required,t.rules.varchar100],required:""},on:{change:function(e){t.jobposSignerCongVan=String(t.jobposSignerCongVan).trim()}},model:{value:t.jobposSignerCongVan,callback:function(e){t.jobposSignerCongVan=e},expression:"jobposSignerCongVan"}})],1),a("v-flex",{staticClass:"mb-2",attrs:{xs12:"",sm2:""}},[t.loading?a("content-placeholders",{staticClass:"mt-1"},[a("content-placeholders-text",{attrs:{lines:1}})],1):a("v-subheader",{staticClass:"pl-0"},[t._v("Người ký"),t.congVanDaGui?t._e():a("span",{staticStyle:{color:"red"}},[t._v(" *")]),t._v(": ")])],1),a("v-flex",{staticClass:"mb-2",attrs:{xs12:"",sm4:""}},[t.loading?a("content-placeholders",{staticClass:"mt-1"},[a("content-placeholders-text",{attrs:{lines:1}})],1):t.loading||t.congVanDaGui?a("p",{staticClass:"pt-2"},[t._v(t._s(t.signerCongVan))]):a("v-text-field",{attrs:{rules:[t.rules.required,t.rules.varchar100],required:""},on:{change:function(e){t.signerCongVan=String(t.signerCongVan).trim()}},model:{value:t.signerCongVan,callback:function(e){t.signerCongVan=e},expression:"signerCongVan"}})],1),a("v-flex",{staticClass:"mb-2",attrs:{xs12:"",sm2:""}},[t.loading?a("content-placeholders",{staticClass:"mt-1"},[a("content-placeholders-text",{attrs:{lines:1}})],1):a("v-subheader",{staticClass:"pl-0"},[t._v("Số điện thoại : ")])],1),a("v-flex",{staticClass:"mb-2",attrs:{xs12:"",sm4:""}},[t.loading?a("content-placeholders",{staticClass:"mt-1"},[a("content-placeholders-text",{attrs:{lines:1}})],1):t.loading||t.congVanDaGui?a("p",{staticClass:"pt-2"},[t._v(t._s(t.thongTinCongVan.contactTelNo))]):a("v-text-field",{attrs:{rules:t.thongTinCongVan.contactTelNo?[t.rules.telNo,t.rules.varchar100]:[t.rules.varchar100]},on:{change:function(e){t.thongTinCongVan.contactTelNo=String(t.thongTinCongVan.contactTelNo).trim()}},model:{value:t.thongTinCongVan.contactTelNo,callback:function(e){t.$set(t.thongTinCongVan,"contactTelNo",e)},expression:"thongTinCongVan.contactTelNo"}})],1),a("v-flex",{staticClass:"mb-2",attrs:{xs12:"",sm2:""}},[t.loading?a("content-placeholders",{staticClass:"mt-1"},[a("content-placeholders-text",{attrs:{lines:1}})],1):a("v-subheader",{staticClass:"pl-0"},[t._v("Địa chỉ email : ")])],1),a("v-flex",{staticClass:"mb-2",attrs:{xs12:"",sm4:""}},[t.loading?a("content-placeholders",{staticClass:"mt-1"},[a("content-placeholders-text",{attrs:{lines:1}})],1):t.loading||t.congVanDaGui?a("p",{staticClass:"pt-2"},[t._v(t._s(t.thongTinCongVan.contactEmail))]):a("v-text-field",{attrs:{rules:t.thongTinCongVan.contactEmail?[t.rules.email,t.rules.varchar100]:[t.rules.varchar100]},on:{change:function(e){t.thongTinCongVan.contactEmail=String(t.thongTinCongVan.contactEmail).trim()}},model:{value:t.thongTinCongVan.contactEmail,callback:function(e){t.$set(t.thongTinCongVan,"contactEmail",e)},expression:"thongTinCongVan.contactEmail"}})],1),a("v-flex",{staticClass:"mt-2",attrs:{xs12:""}},[a("div",{staticClass:"mb-2"},[t._v("Tài liệu đính kèm: "),0===t.fileAttachCounter?a("i",[t._v("(Không có tài liệu đính kèm)")]):t._e()]),t._l(t.dossierFilesItems,(function(e,i){return a("div",{key:i},[e.eForm?t._e():a("div",[a("span",{staticClass:"ml-0",staticStyle:{cursor:"pointer"},on:{click:function(a){a.stopPropagation(),t.viewFile2(e)}}},[0!==e.fileSize?a("v-icon",{staticClass:"mr-1",attrs:{color:t.getDocumentTypeIcon(e.fileType)["color"],size:t.getDocumentTypeIcon(e.fileType)["size"]}},[t._v("\n                            "+t._s(t.getDocumentTypeIcon(e.fileType)["icon"])+"\n                          ")]):t._e(),t._v("\n                          "+t._s(e.displayName)+" - \n                          "),a("i",[t._v(t._s(e.modifiedDate))])],1),t.onlyView||1===t.checkInput?t._e():a("v-btn",{staticClass:"mx-0 my-0",attrs:{icon:"",ripple:""},on:{click:function(a){a.stopPropagation(),t.deleteSingleFile(e,i)}}},[a("v-icon",{staticStyle:{color:"red"}},[t._v("delete_outline")])],1)],1)])})),a("input",{staticStyle:{display:"none"},attrs:{type:"file",id:"documentFile"},on:{input:function(e){t.onUploadSingleFile(e)}}}),t.congVanDaGui?t._e():a("v-btn",{staticClass:"mx-0 mt-3",attrs:{small:"",color:"primary",dark:""},nativeOn:{click:function(e){return t.uploadFile(e)}}},[a("v-icon",[t._v("fas fa fa-upload")]),t._v("    \n                      Chọn tài liệu tải lên\n                    ")],1)],2)],1)],1)],1)],1)],1)],1)])]),t.taoQuyetDinh?a("thong-tin-quyet-dinh",{ref:"thongtinquyetdinh"}):t._e(),a("v-dialog",{staticStyle:{overflow:"hidden"},attrs:{"max-width":"900",transition:"fade-transition"},model:{value:t.dialogPDF,callback:function(e){t.dialogPDF=e},expression:"dialogPDF"}},[a("v-card",[a("v-toolbar",{attrs:{dark:"",color:"primary"}},[a("v-toolbar-title",[a("span",[t._v("Tài liệu đính kèm")])]),a("v-spacer"),a("v-btn",{attrs:{icon:"",dark:""},nativeOn:{click:function(e){t.dialogPDF=!1}}},[a("v-icon",[t._v("close")])],1)],1),t.dialogPDFLoading?a("div",{staticStyle:{"min-height":"600px","text-align":"center",margin:"auto",padding:"25%"}},[a("v-progress-circular",{attrs:{size:100,width:1,color:"primary",indeterminate:""}})],1):t._e(),a("iframe",{directives:[{name:"show",rawName:"v-show",value:!t.dialogPDFLoading,expression:"!dialogPDFLoading"}],staticStyle:{overflow:"auto","min-height":"600px"},attrs:{id:"dialogPDFPreviewCV",src:"",type:"application/pdf",width:"100%",height:"100%",frameborder:"0"}})],1)],1)],1)},o=[],n=(a("bc3a"),a("c4f6")),s=a.n(n),r=a("854a"),c=a.n(r),l=a("e722"),d=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("v-form",{ref:"formThongTinQuyetDinh",attrs:{"lazy-validation":""},model:{value:t.valid_thongtinquyetdinh,callback:function(e){t.valid_thongtinquyetdinh=e},expression:"valid_thongtinquyetdinh"}},[a("div",[a("div",{staticStyle:{position:"relative"}},[a("v-expansion-panel",{staticClass:"expansion-pl",attrs:{value:[!0],expand:""}},[a("v-expansion-panel-content",[a("div",{attrs:{slot:"header"},slot:"header"},[a("div",{staticClass:"background-triangle-small"},[a("v-icon",{attrs:{size:"18",color:"white"}},[t._v("star_rate")])],1),t._v(" Thông tin quyết định")]),a("v-card",[a("v-card-text",{staticClass:"pt-3"},[t.congVanDaGui?a("v-layout",{attrs:{wrap:""}},[a("v-flex",{staticClass:"pr-3",attrs:{xs12:"",sm4:""}},[a("div",{staticClass:"xs12 sm12 pb-2"},[a("span",{staticClass:"pr-2"},[t._v("Số quyết định: ")]),a("span",{staticClass:"pl-0 text-bold"},[t._v(" "+t._s(t.soQuyetDinh))])]),a("div",{staticClass:"xs12 sm12 pb-2"},[a("span",{staticClass:"pr-2"},[t._v("Ngày quyết định: ")]),a("span",{staticClass:"pl-0 text-bold"},[t._v(" "+t._s(t.dateFormated))])])]),a("v-flex",{staticClass:"pr-3",attrs:{xs12:"",sm4:""}},[a("div",{staticClass:"xs12 sm12 pb-2"},[a("span",{staticClass:"pr-2"},[t._v("Chức vụ người ký: ")]),a("span",{staticClass:"pl-0 text-bold"},[t._v(" "+t._s(t.jobposSignerQuyetDinh))])]),a("div",{staticClass:"xs12 sm12 pb-2"},[a("span",{staticClass:"pr-2"},[t._v("Người ký: ")]),a("span",{staticClass:"pl-0 text-bold"},[t._v(" "+t._s(t.signerQuyetDinh))])])]),a("v-flex",{staticClass:"pr-3",attrs:{xs12:"",sm4:""}})],1):a("v-layout",{attrs:{wrap:""}},[a("v-flex",{staticClass:"mb-2",attrs:{xs12:"",sm2:""}},[t.loading?a("content-placeholders",{staticClass:"mt-1"},[a("content-placeholders-text",{attrs:{lines:1}})],1):a("v-subheader",{staticClass:"pl-0"},[t._v("Số quyết định "),t.congVanDaGui?t._e():a("span",{staticStyle:{color:"red"}},[t._v(" *")]),t._v(": ")])],1),a("v-flex",{staticClass:"mb-2",attrs:{xs12:"",sm4:""}},[t.loading?a("content-placeholders",{staticClass:"mt-1"},[a("content-placeholders-text",{attrs:{lines:1}})],1):t.loading||t.congVanDaGui?a("p",{staticClass:"pt-2"},[t._v(t._s(t.soQuyetDinh))]):a("v-text-field",{attrs:{rules:[t.rules.required,t.rules.varchar100],required:""},on:{change:function(e){t.soQuyetDinh=String(t.soQuyetDinh).trim()}},model:{value:t.soQuyetDinh,callback:function(e){t.soQuyetDinh=e},expression:"soQuyetDinh"}})],1),a("v-flex",{staticClass:"mb-2",attrs:{xs12:"",sm2:""}},[t.loading?a("content-placeholders",{staticClass:"mt-1"},[a("content-placeholders-text",{attrs:{lines:1}})],1):a("v-subheader",{staticClass:"pl-0"},[t._v("Ngày quyết định "),t.congVanDaGui?t._e():a("span",{staticStyle:{color:"red"}},[t._v(" *")]),t._v(": ")])],1),a("v-flex",{staticClass:"mb-2",attrs:{xs12:"",sm4:""}},[t.loading?a("content-placeholders",{staticClass:"mt-1"},[a("content-placeholders-text",{attrs:{lines:1}})],1):t.loading||t.congVanDaGui?a("p",{staticClass:"pt-2"},[t._v(t._s(t.dateFormated))]):a("v-menu",{ref:"menuDate",attrs:{"close-on-content-click":!1,"nudge-right":40,lazy:"",transition:"scale-transition","offset-y":"","full-width":"","max-width":"290px","min-width":"290px"},model:{value:t.menuDate,callback:function(e){t.menuDate=e},expression:"menuDate"}},[a("v-text-field",{attrs:{slot:"activator",rules:[t.rules.required],required:"","append-icon":"event",placeholder:"dd/mm/yyyy"},on:{input:function(e){t.inputDate("dateFormated")},change:function(e){t.changeDocumentDate()}},slot:"activator",model:{value:t.dateFormated,callback:function(e){t.dateFormated=e},expression:"dateFormated"}}),a("v-date-picker",{ref:"picker",attrs:{locale:"vi",max:t.getMindate(),"first-day-of-week":1,"no-title":""},on:{input:function(e){t.menuDate=!1}},model:{value:t.documentDate,callback:function(e){t.documentDate=e},expression:"documentDate"}})],1)],1),a("v-flex",{staticClass:"mb-2",attrs:{xs12:"",sm2:""}},[t.loading?a("content-placeholders",{staticClass:"mt-1"},[a("content-placeholders-text",{attrs:{lines:1}})],1):a("v-subheader",{staticClass:"pl-0"},[t._v("Chức vụ người ký"),t.congVanDaGui?t._e():a("span",{staticStyle:{color:"red"}},[t._v(" *")]),t._v(": ")])],1),a("v-flex",{staticClass:"mb-2",attrs:{xs12:"",sm4:""}},[t.loading?a("content-placeholders",{staticClass:"mt-1"},[a("content-placeholders-text",{attrs:{lines:1}})],1):t.loading||t.congVanDaGui?a("p",{staticClass:"pt-2"},[t._v(t._s(t.jobposSignerQuyetDinh))]):a("v-text-field",{attrs:{rules:[t.rules.required,t.rules.varchar100],required:""},on:{change:function(e){t.jobposSignerQuyetDinh=String(t.jobposSignerQuyetDinh).trim()}},model:{value:t.jobposSignerQuyetDinh,callback:function(e){t.jobposSignerQuyetDinh=e},expression:"jobposSignerQuyetDinh"}})],1),a("v-flex",{staticClass:"mb-2",attrs:{xs12:"",sm2:""}},[t.loading?a("content-placeholders",{staticClass:"mt-1"},[a("content-placeholders-text",{attrs:{lines:1}})],1):a("v-subheader",{staticClass:"pl-0"},[t._v("Người ký"),t.congVanDaGui?t._e():a("span",{staticStyle:{color:"red"}},[t._v(" *")]),t._v(": ")])],1),a("v-flex",{staticClass:"mb-2",attrs:{xs12:"",sm4:""}},[t.loading?a("content-placeholders",{staticClass:"mt-1"},[a("content-placeholders-text",{attrs:{lines:1}})],1):t.loading||t.congVanDaGui?a("p",{staticClass:"pt-2"},[t._v(t._s(t.signerQuyetDinh))]):a("v-text-field",{attrs:{rules:[t.rules.required,t.rules.varchar100],required:""},on:{change:function(e){t.signerQuyetDinh=String(t.signerQuyetDinh).trim()}},model:{value:t.signerQuyetDinh,callback:function(e){t.signerQuyetDinh=e},expression:"signerQuyetDinh"}})],1)],1)],1)],1)],1)],1)],1)])])],1)},u=[];function h(t,e){return g(t)||m(t,e)||p()}function p(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function m(t,e){var a=[],i=!0,o=!1,n=void 0;try{for(var s,r=t[Symbol.iterator]();!(i=(s=r.next()).done);i=!0)if(a.push(s.value),e&&a.length===e)break}catch(c){o=!0,n=c}finally{try{i||null==r["return"]||r["return"]()}finally{if(o)throw n}}return a}function g(t){if(Array.isArray(t))return t}c.a.options={closeButton:!0,timeOut:"5000"};var v={components:{},props:["formCodeInput","detailDossier","donvinhanCollection","tphs","lengthDossier","createFileCongVan","requiredCVDenGroupId","requiredCVDenGovCode"],data:function(){return{loading:!1,dialogPDFLoading:!1,dialogPDF:!1,valid_thongtinquyetdinh:!0,thongTinCongVan:"",donvi_gui_nhan:"",dossierFilesItems:[],fileAttachCounter:0,menuDate:!1,menuDueDate:!1,documentDate:(new Date).toISOString().substr(0,10),dateFormated:null,dueDate:null,duedateFormated:null,agencySubmit:"",govAgencySubmitList:[],briefNote:"",sampleCount:"",contactTelNo:"",contactEmail:"",congVanDaGui:"",metaDataDossier:"",jobposSignerQuyetDinh:"",signerQuyetDinh:"",soQuyetDinh:"",rules:{required:function(t){return!!t||"Thông tin bắt buộc"},email:function(t){t=t.trim();var e=/^(([^<>()[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/;return e.test(t)||"Địa chỉ Email không hợp lệ"},passWord:function(t){var e=/^(?![0-9]{6,})[0-9a-zA-Z]{6,}$/;return e.test(t)||"Gồm các ký tự 0-9, a-z và ít nhất 6 ký tự"},telNo:function(t){var e=/^([0-9]{0,})$/;return"string"===typeof t&&(t=t.trim()),e.test(t)||"Gồm các ký tự 0-9"},varchar100:function(t){return!t||(t=String(t).trim(),t.length<=100||"Không được nhập quá 100 ký tự")},varchar255:function(t){return!t||(t=String(t).trim(),t.length<=255||"Không được nhập quá 255 ký tự")},varchar500:function(t){return!t||(t=String(t).trim(),t.length<=500||"Không được nhập quá 500 ký tự")},varchar5000:function(t){return!t||(t=String(t).trim(),t.length<=5e3||"Không được nhập quá 5000 ký tự")}}}},computed:{originality:function(){var t=this;return t.getOriginality()},userLoginInfomation:function(){return this.$store.getters.getUserLogin},employeeLoginInfomation:function(){return this.$store.getters.getEmployeeLogin}},created:function(){var t=this;t.documentDate=(new Date).toISOString().substr(0,10),t.dateFormated=t.formatDate(t.documentDate)},watch:{$route:function(t,e){t.params,t.query},documentDate:function(t){this.dateFormated=this.formatDate(this.documentDate),console.log(this.dateFormated)}},methods:{initData:function(t){var e=this;e.thongTinCongVan=t;try{var a=JSON.parse(e.thongTinCongVan.metaData);e.metaDataDossier=a,e.congVanDaGui=!(!a.hasOwnProperty("congvandagui")||!a.congvandagui),e.soQuyetDinh=a.hasOwnProperty("soquyetdinh")?a.soquyetdinh:"",e.jobposSignerQuyetDinh=a.hasOwnProperty("jobposSignerQuyetDinh")?a.jobposSignerQuyetDinh:"",e.signerQuyetDinh=a.hasOwnProperty("signerQuyetDinh")?a.signerQuyetDinh:"",e.documentDate=a.hasOwnProperty("ngayquyetdinh")?e.parseDate(a.ngayquyetdinh):(new Date).toISOString().substr(0,10),e.dateFormated=this.formatDate(e.documentDate)}catch(i){e.documentDate=(new Date).toISOString().substr(0,10),e.dateFormated=e.formatDate(this.documentDate)}e.$refs.formThongTinQuyetDinh.resetValidation(),console.log("thongtinquyetdinhInput",e.thongTinCongVan)},getThongTinQuyetDinh:function(){var t=this,e={soquyetdinh:t.soQuyetDinh,ngayquyetdinh:t.dateFormated,jobposSignerQuyetDinh:t.jobposSignerQuyetDinh,signerQuyetDinh:t.signerQuyetDinh,validation:t.$refs.formThongTinQuyetDinh.validate()};return e},formatDate:function(t){if(!t)return null;var e=t.split("-"),a=h(e,3),i=a[0],o=a[1],n=a[2];return"".concat(n,"/").concat(o,"/").concat(i)},parseDate:function(t){if(!t)return null;var e=t.split(" ")[0],a=e.split("/"),i=h(a,3),o=i[0],n=i[1],s=i[2];return"".concat(s,"-").concat(n.padStart(2,"0"),"-").concat(o.padStart(2,"0"))},getCurrentDate:function(){var t=new Date;return"".concat(t.getDate().toString().padStart(2,"0"),"/").concat((t.getMonth()+1).toString().padStart(2,"0"),"/").concat(t.getFullYear())},getMindate:function(){var t=new Date;return"".concat(t.getFullYear(),"-").concat((t.getMonth()+1).toString().padStart(2,"0"),"-").concat(t.getDate().toString().padStart(2,"0"))},parseDateToTimestamp:function(t){return t?"Invalid Date"==new Date(t)?"":new Date(t).getTime():null},validateDate:function(t){return t.replace(/[^\d\/]/g,"")},inputDate:function(t){var e=this,a=e.validateDate(e[t]);null!==a.match(/^\d{2}$/)?e[t]=a+"/":null!==a.match(/^\d{2}\/\d{2}$/)?e[t]=a+"/":e[t]=a},changeDocumentDate:function(){var t=this;t.changeDate("dateFormated"),t.documentDate=t.parseDate(t.dateFormated)},changeDate:function(t){var e=this,a=e[t],i=/^(0?[1-9]|[12][0-9]|3[01])[\/\-](0?[1-9]|1[012])[\/\-]\d{4}$/,o=/^(0?[1-9]|[12][0-9]|3[01])[\/\-](0?[1-9]|1[012])[\/\-]\d{2}$/;if(i.test(a)||o.test(a)){var n=e[t].split("/"),s=n[0],r=n[1];s>31?e[t]="":r>12?e[t]="":2==n[2].length&&("birthdayFormated"===t?n[2]<=20?e[t]=s+"/"+r+"/20"+n[2]:e[t]=s+"/"+r+"/19"+n[2]:e[t]=s+"/"+r+"/20"+n[2])}else e[t]=""}}},f=v,_=a("2877"),y=a("6544"),C=a.n(y),D=a("b0af"),T=a("99d9"),x=a("2e4b"),b=a("cd55"),S=a("49e2"),N=a("0e8f"),P=a("4bd4"),I=a("132d"),A=a("a722"),w=a("e449"),E=a("e0c7"),k=a("2677"),O=Object(_["a"])(f,d,u,!1,null,null,null),F=O.exports;function M(t,e){return H(t)||L(t,e)||V()}function V(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function L(t,e){var a=[],i=!0,o=!1,n=void 0;try{for(var s,r=t[Symbol.iterator]();!(i=(s=r.next()).done);i=!0)if(a.push(s.value),e&&a.length===e)break}catch(c){o=!0,n=c}finally{try{i||null==r["return"]||r["return"]()}finally{if(o)throw n}}return a}function H(t){if(Array.isArray(t))return t}C()(O,{VCard:D["a"],VCardText:T["b"],VDatePicker:x["a"],VExpansionPanel:b["a"],VExpansionPanelContent:S["a"],VFlex:N["a"],VForm:P["a"],VIcon:I["a"],VLayout:A["a"],VMenu:w["a"],VSubheader:E["a"],VTextField:k["a"]}),c.a.options={closeButton:!0,timeOut:"5000"};var $={components:{suggestions:s.a,"tiny-pagination":l["a"],"thong-tin-quyet-dinh":F},props:["formCodeInput","detailDossier","donvinhanCollection","taoQuyetDinh","tphs","lengthDossier","createFileCongVan","requiredCVDenGroupId","requiredCVDenGovCode"],data:function(){return{loading:!1,dialogPDFLoading:!1,dialogPDF:!1,valid_thongtincongvan:!0,thongTinCongVan:"",donvi_gui_nhan:"",dossierFilesItems:[],fileAttachCounter:0,menuDate:!1,menuDueDate:!1,documentDate:null,dateFormated:null,dueDate:null,duedateFormated:null,agencySubmit:"",govAgencySubmitList:[],briefNote:"",sampleCount:"",contactTelNo:"",contactEmail:"",congVanDaGui:"",metaDataDossier:"",jobposSignerCongVan:"",signerCongVan:"",rules:{required:function(t){return!!t||"Thông tin bắt buộc"},email:function(t){t=t.trim();var e=/^(([^<>()[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/;return e.test(t)||"Địa chỉ Email không hợp lệ"},passWord:function(t){var e=/^(?![0-9]{6,})[0-9a-zA-Z]{6,}$/;return e.test(t)||"Gồm các ký tự 0-9, a-z và ít nhất 6 ký tự"},telNo:function(t){var e=/^([0-9]{0,})$/;return"string"===typeof t&&(t=t.trim()),e.test(t)||"Gồm các ký tự 0-9"},varchar100:function(t){return!t||(t=String(t).trim(),t.length<=100||"Không được nhập quá 100 ký tự")},varchar255:function(t){return!t||(t=String(t).trim(),t.length<=255||"Không được nhập quá 255 ký tự")},varchar500:function(t){return!t||(t=String(t).trim(),t.length<=500||"Không được nhập quá 500 ký tự")},varchar5000:function(t){return!t||(t=String(t).trim(),t.length<=5e3||"Không được nhập quá 5000 ký tự")}}}},computed:{originality:function(){var t=this;return t.getOriginality()},userLoginInfomation:function(){return this.$store.getters.getUserLogin},employeeLoginInfomation:function(){return this.$store.getters.getEmployeeLogin}},created:function(){var t=this;t.documentDate=(new Date).toISOString().substr(0,10),t.getGovAgencyList()},watch:{$route:function(t,e){t.params,t.query},documentDate:function(t){this.dateFormated=this.formatDate(this.documentDate)},dueDate:function(t){this.duedateFormated=this.formatDate(this.dueDate)},employeeLoginInfomation:function(){var t=this;t.getGovAgencyList()},donvinhanCollection:function(){var t=this;t.employeeLoginInfomation&&t.getGovAgencyList()},requiredCVDenGovCode:function(){var t=this;t.getGovAgencyList()},createFileCongVan:function(t){var e=this;t&&e.dossierFilesItems&&(e.dossierFilesItems=e.dossierFilesItems.filter((function(e){return e.dossierPartNo==t})))},dossierFilesItems:function(t){var e=this;e.fileAttachCounter=t.filter((function(t){return!t.eForm})).length},taoQuyetDinh:function(t){var e=this;t&&setTimeout((function(){e.$refs.thongtinquyetdinh.initData(e.detailDossier)}),100)}},methods:{initData:function(t){var e=this;e.thongTinCongVan=t;try{var a=JSON.parse(e.thongTinCongVan.metaData);e.metaDataDossier=a,e.congVanDaGui=!(!a.hasOwnProperty("congvandagui")||!a.congvandagui),"NEW_GROUP_CV_DI"===e.formCodeInput?(e.getGovAgencyList(),e.donvi_gui_nhan=a.hasOwnProperty("congvandagui")&&a.congvandagui?a.donvinhan:a.donvinhandraf,e.jobposSignerCongVan=a.hasOwnProperty("jobposSignerCongVan")?a.jobposSignerCongVan:"",e.signerCongVan=a.hasOwnProperty("signerCongVan")?a.signerCongVan:""):(e.donvi_gui_nhan=a.donvigui,e.jobposSignerCongVan=a.hasOwnProperty("jobposSignerCongVan")?a.jobposSignerCongVan:"",e.signerCongVan=a.hasOwnProperty("signerCongVan")?a.signerCongVan:"")}catch(i){}e.documentDate=e.thongTinCongVan.hasOwnProperty("documentDate")?e.parseDate(e.thongTinCongVan.documentDate):(new Date).toISOString().substr(0,10),e.dueDate=e.thongTinCongVan.hasOwnProperty("dueDate")?e.parseDate(e.thongTinCongVan.dueDate):"",e.$store.dispatch("loadDossierFiles",e.thongTinCongVan.dossierId).then((function(t){e.dossierFilesItems=t,e.createFileCongVan&&(e.dossierFilesItems=e.dossierFilesItems.filter((function(t){return t.dossierPartNo==e.createFileCongVan})))})),e.$refs.formThongTinCongVan.resetValidation(),e.$refs.thongtinquyetdinh&&e.$refs.thongtinquyetdinh.initData(t),console.log("thongtincongvanInput",e.thongTinCongVan)},getThongTinCongVan:function(){var t=this,e=t.govAgencySubmitList.filter((function(e){return e.itemCode===t.donvi_gui_nhan})),a=e.length>0?e[0]["itemName"]:"";t.thongTinCongVan.dueDate=t.parseDateToTimestamp(t.dueDate),t.thongTinCongVan.documentDate=t.parseDateToTimestamp(t.documentDate);var i="";try{i=JSON.parse(t.thongTinCongVan.metaData)}catch(c){}var o=i||{donvigui:"",donvinhan:"",tendonvigui:"",tendonvinhan:""},n="";t.employeeLoginInfomation.hasOwnProperty("scope")&&t.employeeLoginInfomation.scope&&(n=String(t.employeeLoginInfomation.scope).split(",")[0]),"NEW_GROUP_CV"===t.formCodeInput?(o.tendonvigui=a,o.donvigui=t.donvi_gui_nhan,o.donvinhan=n||t.detailDossier.govAgencyCode,o.jobposSignerCongVan=t.jobposSignerCongVan,o.signerCongVan=t.signerCongVan):(o.donvigui=n||t.detailDossier.govAgencyCode,o.tendonvigui=t.detailDossier.govAgencyName,o.donvinhan=t.donvi_gui_nhan,o.tendonvinhan=a,o.jobposSignerCongVan=t.jobposSignerCongVan,o.signerCongVan=t.signerCongVan,o.taoQuyetDinh=t.taoQuyetDinh);var s={};if(t.$refs.thongtinquyetdinh&&(s=t.$refs.thongtinquyetdinh.getThongTinQuyetDinh()),t.thongTinCongVan.metaData=Object.assign(o,s),t.thongTinCongVan.sampleCount=t.lengthDossier,t.thongTinCongVan.validation=t.$refs.formThongTinCongVan.validate(),t.taoQuyetDinh){var r=t.$refs.thongtinquyetdinh.getThongTinQuyetDinh()["validation"];t.thongTinCongVan.validation=t.$refs.formThongTinCongVan.validate()&&r}return console.log("thongtincongvanOutput",t.thongTinCongVan),t.thongTinCongVan},uploadFile:function(){document.getElementById("documentFile").value="",document.getElementById("documentFile").click()},onUploadSingleFile:function(){var t,e=this;console.log("tphs",e.tphs),t=e.createFileCongVan?e.tphs.filter((function(t){return t.partNo==e.createFileCongVan}))[0]:e.tphs.filter((function(t){return 6==t.partType}))[0];var a=Object.assign(e.detailDossier,t);e.$store.dispatch("uploadSingleFileGroupCongVan",a).then((function(t){e.$store.dispatch("loadDossierFiles",a.dossierId).then((function(t){e.dossierFilesItems=t,e.createFileCongVan&&(e.dossierFilesItems=e.dossierFilesItems.filter((function(t){return t.dossierPartNo==e.createFileCongVan})))}))}))},deleteSingleFile:function(t,e){var a=this,i=confirm("Bạn có chắc chắn xóa file đính kèm ?");i&&(t["dossierId"]=a.detailDossier.dossierId,a.$store.dispatch("deleteDossierFile",t).then((function(t){a.$store.dispatch("loadDossierFiles",a.detailDossier.dossierId).then((function(t){a.dossierFilesItems=t,a.createFileCongVan&&(a.dossierFilesItems=a.dossierFilesItems.filter((function(t){return t.dossierPartNo==a.createFileCongVan})))}))})).catch((function(t){})))},viewFile2:function(t){var e=this;if(0!==t.fileSize)if(t["eForm"]?e.pdfEform=!0:e.pdfEform=!1,"doc"===t.fileType||"docx"===t.fileType||"xlsx"===t.fileType||"xls"===t.fileType||"zip"===t.fileType||"rar"===t.fileType||"txt"===t.fileType||"mp3"===t.fileType||"mp4"===t.fileType){var a="/o/rest/v2/dossier/"+e.detailDossier.dossierId+"/files/"+t.referenceUid;window.location.assign(a)}else t["dossierId"]=e.detailDossier.dossierId,t.referenceUid?(e.dialogPDFLoading=!0,e.dialogPDF=!0,e.$store.dispatch("viewFile",t).then((function(t){e.dialogPDFLoading=!1,document.getElementById("dialogPDFPreviewCV").src=t}))):(c.a.clear(),c.a.error("File dữ liệu không tồn tại"))},getGovAgencyList:function(){var t=this;if(console.log("employeeLoginInfomation",t.employeeLoginInfomation),"NEW_GROUP_CV"===t.formCodeInput){var e={collectionCode:"DON_VI_CONG_VAN",level:"",parent:""};t.getDictGovAgency(e)}else{var a;console.log("donvinhanCollection",t.donvinhanCollection);try{a=t.donvinhanCollection}catch(p){}if(a){if(console.log("collectionSearch",a),a.hasOwnProperty("parrentCode")){var i;if(a.parrentCode.startsWith("#")){var o="";t.employeeLoginInfomation.hasOwnProperty("scope")&&t.employeeLoginInfomation.scope&&(o=String(t.employeeLoginInfomation.scope).split(",")[0]),i="#scope"===a.parrentCode?o:t.requiredCVDenGovCode}else i=a.parrentCode;var n={collectionCode:a.collectionCode,level:"",parent:i};t.getDictGovAgency(n)}if(a.hasOwnProperty("isParrentCode")){var s;if(a.isParrentCode.startsWith("#")){var r="";t.employeeLoginInfomation.hasOwnProperty("scope")&&t.employeeLoginInfomation.scope&&(r=String(t.employeeLoginInfomation.scope).split(",")[0]),s="#scope"===a.isParrentCode?r:t.requiredCVDenGovCode}else s=a.isParrentCode;var c={collectionCode:a.collectionCode,level:"",itemCode:s};t.getDetailDictitem(c)}if(a.hasOwnProperty("itemCode")){var l;if(a.itemCode.startsWith("#")){var d="";t.employeeLoginInfomation.hasOwnProperty("scope")&&t.employeeLoginInfomation.scope&&(d=String(t.employeeLoginInfomation.scope).split(",")[0]),l="#scope"===a.itemCode?d:t.requiredCVDenGovCode}else l=a.itemCode;var u={collectionCode:a.collectionCode,level:"",itemCode:l,getCurrentItem:!0};t.getDetailDictitem(u)}if(a.hasOwnProperty("groupCode")){var h={collectionCode:a.collectionCode,level:"",groupCode:a.groupCode};t.getGroupDictitem(h)}}}},getDocumentTypeIcon:function(t){var e="doc,docx",a="xls,xlsx",i="png,jpg,jpeg";return t?e.indexOf(t.toLowerCase())>=0?{icon:"fas fa fa-file-word-o",color:"blue",size:14}:a.indexOf(t.toLowerCase())>=0?{icon:"fas fa fa-file-excel-o",color:"green",size:14}:"pdf"===t.toLowerCase()?{icon:"fa fa-file-pdf-o",color:"red",size:14}:i.indexOf(t.toLowerCase())>=0?{icon:"fas fa fa-file-image-o",color:"primary",size:14}:{icon:"fas fa fa-paperclip",color:"",size:14}:{icon:"attach_file",color:"primary",size:14}},getDictGovAgency:function(t){var e=this,a={collectionCode:t.hasOwnProperty("collectionCode")?t.collectionCode:"DON_VI_CONG_VAN",level:t.hasOwnProperty("level")?t.level:"",parent:t.hasOwnProperty("parent")?t.parent:""};e.$store.dispatch("loadDictItems",a).then((function(t){e.govAgencySubmitList=t.data,1===e.govAgencySubmitList.length&&"NEW_GROUP_CV_DI"===e.formCodeInput&&(e.donvi_gui_nhan=e.govAgencySubmitList[0]["itemCode"])}))},getDetailDictitem:function(t){var e=this,a={collectionCode:t.hasOwnProperty("collectionCode")?t.collectionCode:"DON_VI_CONG_VAN",level:t.hasOwnProperty("level")?t.level:"",itemCode:t.itemCode};e.$store.dispatch("loadDetailDictItems",a).then((function(a){if(t.hasOwnProperty("getCurrentItem"))e.govAgencySubmitList=[a];else{var i=a.parentItem?a.parentItem:[];e.govAgencySubmitList=Array.isArray(i)?i:[i]}1===e.govAgencySubmitList.length&&"NEW_GROUP_CV_DI"===e.formCodeInput&&(e.donvi_gui_nhan=e.govAgencySubmitList[0]["itemCode"])}))},getGroupDictitem:function(t){var e=this,a={collectionCode:t.hasOwnProperty("collectionCode")?t.collectionCode:"DON_VI_CONG_VAN",groupCode:t.groupCode};e.$store.dispatch("getGroupDictitem",a).then((function(t){e.govAgencySubmitList=Array.isArray(t)?t:[t],1===e.govAgencySubmitList.length&&"NEW_GROUP_CV_DI"===e.formCodeInput&&(e.donvi_gui_nhan=e.govAgencySubmitList[0]["itemCode"])}))},formatDate:function(t){if(!t)return null;var e=t.split("-"),a=M(e,3),i=a[0],o=a[1],n=a[2];return"".concat(n,"/").concat(o,"/").concat(i)},parseDate:function(t){if(!t)return null;var e=t.split(" ")[0],a=e.split("/"),i=M(a,3),o=i[0],n=i[1],s=i[2];return"".concat(s,"-").concat(n.padStart(2,"0"),"-").concat(o.padStart(2,"0"))},getCurrentDate:function(){var t=new Date;return"".concat(t.getDate().toString().padStart(2,"0"),"/").concat((t.getMonth()+1).toString().padStart(2,"0"),"/").concat(t.getFullYear())},getMindate:function(){var t=new Date;return"".concat(t.getFullYear(),"-").concat((t.getMonth()+1).toString().padStart(2,"0"),"-").concat(t.getDate().toString().padStart(2,"0"))},parseDateToTimestamp:function(t){return t?"Invalid Date"==new Date(t)?"":new Date(t).getTime():null},validateDate:function(t){return t.replace(/[^\d\/]/g,"")},inputDate:function(t){var e=this,a=e.validateDate(e[t]);null!==a.match(/^\d{2}$/)?e[t]=a+"/":null!==a.match(/^\d{2}\/\d{2}$/)?e[t]=a+"/":e[t]=a},changeDocumentDate:function(){var t=this;t.changeDate("dateFormated"),t.documentDate=t.parseDate(t.dateFormated)},changeDueDate:function(){var t=this;t.changeDate("duedateFormated"),t.dueDate=t.parseDate(t.duedateFormated)},changeDate:function(t){var e=this,a=e[t],i=/^(0?[1-9]|[12][0-9]|3[01])[\/\-](0?[1-9]|1[012])[\/\-]\d{4}$/,o=/^(0?[1-9]|[12][0-9]|3[01])[\/\-](0?[1-9]|1[012])[\/\-]\d{2}$/;if(i.test(a)||o.test(a)){var n=e[t].split("/"),s=n[0],r=n[1];s>31?e[t]="":r>12?e[t]="":2==n[2].length&&("birthdayFormated"===t?n[2]<=20?e[t]=s+"/"+r+"/20"+n[2]:e[t]=s+"/"+r+"/19"+n[2]:e[t]=s+"/"+r+"/20"+n[2])}else e[t]=""}}},R=$,G=a("c6a6"),q=a("8336"),U=a("169a"),B=a("490a"),K=a("9910"),W=a("a844"),z=a("71d9"),j=a("2a7f"),Q=Object(_["a"])(R,i,o,!1,null,null,null);e["a"]=Q.exports;C()(Q,{VAutocomplete:G["a"],VBtn:q["a"],VCard:D["a"],VCardText:T["b"],VDatePicker:x["a"],VDialog:U["a"],VExpansionPanel:b["a"],VExpansionPanelContent:S["a"],VFlex:N["a"],VForm:P["a"],VIcon:I["a"],VLayout:A["a"],VMenu:w["a"],VProgressCircular:B["a"],VSpacer:K["a"],VSubheader:E["a"],VTextField:k["a"],VTextarea:W["a"],VToolbar:z["a"],VToolbarTitle:j["b"]})},b8a4:function(module,__webpack_exports__,__webpack_require__){"use strict";var toastr__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("854a"),toastr__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(toastr__WEBPACK_IMPORTED_MODULE_0__),_TiepNhan_HoSoTrongNhom__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("335e");toastr__WEBPACK_IMPORTED_MODULE_0___default.a.options={closeButton:!0,timeOut:"5000"},__webpack_exports__["a"]={props:{id:{type:String,default:function(){return"nm"}},detailDossier:{type:Object,default:function(){}},createFiles:{type:Array,default:function(){return[]}},esignType:{type:String,default:function(){return""}}},components:{"ho-so-nhom":_TiepNhan_HoSoTrongNhom__WEBPACK_IMPORTED_MODULE_1__["a"]},data:function(){return{dialogConfirm:!1,labelConfirm:"",dossierTemplateItems:[],dossierMarksItems:[],dossierFilesItems:[],thongTinHoSo:{},valid:!0,stateView:!1,dialogAddOtherTemp:!1,loadingAddOther:!1,otherDossierTemplate:"",sheet:!1,partView:"",dossierFileIdView:"",stateEdit:!1,progressUploadPart:"",dialogPDF:!1,dialogPDFLoading:!0,stateAddFileOther:!1,dossierTemplatesItemSelect:{},fileViews:[],sampleCount:0,fileTemplateItems:[],currentFormView:"",pstFixed:0,pstEl:0,endEl:0,dialogSelectDosier:!1,dossierIntoGroup:[],filesAdd:[],documentType:"Tài liệu đính kèm",receiveMessage:"",active:!0,loadingApacal:!1,thaoTacGop:!1}},computed:{loading:function(){return this.$store.getters.loading},originality:function(){var t=this;return t.getOriginality()},initDataResource:function(){return this.$store.getters.loadingInitData},dossierIntoGroupSelect:function(){return this.$store.getters.getDossierIntoGroup},createFileSignedSync:function(){return this.$store.getters.getCreateFileSigned},userLoginInfomation:function(){return this.$store.getters.getUserLogin}},created:function(){var t=this,e=t.$router.history.current.query;e.hasOwnProperty("dossiers")&&(t.thaoTacGop=!0),t.receiveMessage=function(e){t.saveAlpacaFormCallBack(e)},t.page=1,t.$nextTick((function(){if(console.log("vm.detailDossier--TLKQ--",t.detailDossier),t.detailDossier["dossierId"])if(t.thaoTacGop)t.createFiles=t.createFiles.map((function(t){return Object.assign(t,{filesAttach:[]})}));else{var e=[];e.push(t.$store.dispatch("loadDossierFiles",t.detailDossier.dossierId)),e.push(t.$store.dispatch("loadDossierTemplates",t.detailDossier)),Promise.all(e).then((function(e){var a=e[1]["dossierParts"],i=e[0];t.dossierFilesItems=i,t.dossierFilesItems.forEach((function(e,a){t.detailDossier["dossierId"]===t.createFileSignedSync["dossierId"]?(e["isSigned"]=t.createFileSignedSync["createFiles"][a]["isSigned"],e["fileEntryId"]=t.createFileSignedSync["createFiles"][a]["fileEntryId"],e["pdfSigned"]=t.createFileSignedSync["createFiles"][a]["pdfSigned"]):(e["isSigned"]=!1,e["fileEntryId"]="",e["pdfSigned"]="")})),t.createFiles=t.mergeDossierTemplateVsDossierFiles(t.createFiles,i),0!==a.length&&t.createFiles.forEach((function(t){var e=a.find((function(e){return t.partNo===e.partNo}));e&&(t["required"]=e["required"],t["partTip"]=e["partTip"])}))})),t.detailDossier["groupDossierId"]&&t.getDossierIntoGroup(t.detailDossier["groupDossierId"])}}))},watch:{$route:function(t,e){}},mounted:function(){var t=this;t.$nextTick((function(){t.createFiles.length>0&&!t.thaoTacGop&&setTimeout((function(){t.genAllAlpacaForm(t.dossierFilesItems,t.createFiles)}),300)}))},methods:{genAllAlpacaForm:function(t,e){var a=this;if(t.length>0&&t.filter((function(t){return t.eForm&&t.size})).length>0){var i=t.filter((function(t){return t.eForm})),o=e.filter((function(t){return t.eForm}));i.length>0||e.forEach((function(t){t.eForm&&(t["templateNo"]=a.detailDossier.dossierTemplateNo,a.showAlpacaJSFORM(t))})),o.length!==i.length&&o.forEach((function(t){var e=i.findIndex((function(e){return t.partNo===e.dossierPartNo}));-1===e&&(t["templateNo"]=a.detailDossier.dossierTemplateNo,a.showAlpacaJSFORM(t))}))}else e.forEach((function(t){t.eForm&&(t["templateNo"]=a.detailDossier.dossierTemplateNo,a.showAlpacaJSFORM(t))}))},mergeDossierTemplateVsDossierFiles:function(t,e){return 0!==e.length?t.forEach((function(t,a){t["editForm"]=!0,t["embed"]=!1;var i=e.find((function(e){return t.partNo===e.dossierPartNo&&0!==e.fileSize&&e.eForm||t.partNo===e.dossierPartNo&&!e.eForm}));i?t["daKhai"]=!0:i||(t["daKhai"]=!1)})):t.forEach((function(t){t.eForm&&(t["daKhai"]=!1,t["editForm"]=!0,t["embed"]=!1)})),t},showAlpacaJSFORM:function showAlpacaJSFORM(item){var vm=this;item["dossierId"]=vm.detailDossier.dossierId,item["editForm"]=!0,item.templateNo=vm.detailDossier.dossierTemplateNo;var eformScript="";if(item.formScript){try{eformScript=eval("("+item.formScript+")")}catch(error){}if(eformScript&&eformScript.hasOwnProperty("eformEmbed")&&eformScript.eformEmbed){console.log("eformEmbed",item),item.embed=!0,vm.active=!1,vm.active=!0;var userId=window.themeDisplay.getUserId(),userEmail=1===vm.originality?vm.userLoginInfomation.applicantContactEmail:vm.userLoginInfomation.employeeEmail,referenceUid=vm.detailDossier.referenceUid,dossierStatus=vm.detailDossier.dossierStatus,dossierSubStatus=vm.detailDossier.dossierSubStatus,templateNo=item.partNo,deliverableType=item.deliverableType?item.deliverableType:"",token=localStorage.getItem("jwt_token"),urlEmbed=eformScript.eformEmbed+"/"+item.templateFileNo+"/referenceUid/"+referenceUid+"/"+token+"/"+encodeURIComponent(document.location.origin)+"?userId="+userId+"&userEmail="+userEmail+"&code="+referenceUid+"&dossierStatus="+dossierStatus+"&dossierSubStatus="+dossierSubStatus+"&tp="+templateNo;console.log("urlEmbed",urlEmbed),setTimeout((function(){document.getElementById("formAlpaca"+item.partNo+vm.id+"embed").src="",setTimeout((function(){document.getElementById("formAlpaca"+item.partNo+vm.id+"embed").src=urlEmbed}),50)}),300)}else item.embed=!1,vm.active=!1,vm.active=!0,vm.$store.dispatch("loadFormData",item).then((function(resData){var formScript,formData;window.$("#formAlpaca"+item.partNo+vm.id).empty(),formScript=item.formScript?eval("("+item.formScript+")"):{},formData=resData?eval("("+resData+")"):{};var hasFormDataFile=vm.dossierFilesItems.filter((function(t){return t.dossierPartNo==item.partNo&&t.eForm&&t.formData}));hasFormDataFile&&hasFormDataFile.length>0&&(formData=eval("("+hasFormDataFile[0]["formData"]+")")),formData.dossierId_hidden=vm.detailDossier.dossierId,formData.dossierStatus_hidden=vm.detailDossier.dossierStatus,formData.dossierSubStatus_hidden=vm.detailDossier.dossierSubStatus,formData.fileTemplateNo_hidden=item.templateFileNo,formData.deliverableType_hidden=item.deliverableType,formData.userEmailAddress_hidden=1===vm.originality?vm.userLoginInfomation.applicantContactEmail:vm.userLoginInfomation.employeeEmail,formData.referenceUid=vm.detailDossier.referenceUid,console.log("formDataMC",formData),formScript.data=formData,window.$('div[id="formAlpaca'+item.partNo+vm.id+'"]').alpaca(formScript)}))}else vm.$store.dispatch("loadFormScriptKQ",item).then((function(resScript){try{eformScript=eval("("+resScript+")")}catch(error){}if(eformScript&&eformScript.hasOwnProperty("eformEmbed")&&eformScript.eformEmbed){console.log("eformEmbed2",item),item.embed=!0,vm.active=!1,vm.active=!0;var _userId=window.themeDisplay.getUserId(),_userEmail=1===vm.originality?vm.userLoginInfomation.applicantContactEmail:vm.userLoginInfomation.employeeEmail,_referenceUid=vm.detailDossier.referenceUid,_dossierStatus=vm.detailDossier.dossierStatus,_dossierSubStatus=vm.detailDossier.dossierSubStatus,_templateNo=item.partNo,_deliverableType=item.deliverableType?item.deliverableType:"",_token=localStorage.getItem("jwt_token"),_urlEmbed=eformScript.eformEmbed+"/"+item.templateFileNo+"/referenceUid/"+_referenceUid+"/"+_token+"/"+encodeURIComponent(document.location.origin)+"?userId="+_userId+"&userEmail="+_userEmail+"&code="+_referenceUid+"&dossierStatus="+_dossierStatus+"&dossierSubStatus="+_dossierSubStatus+"&tp="+_templateNo;console.log("urlEmbed",_urlEmbed),setTimeout((function(){document.getElementById("formAlpaca"+item.partNo+vm.id+"embed").src=_urlEmbed}),300)}else item.embed=!1,vm.active=!1,vm.active=!0,vm.$store.dispatch("loadFormData",item).then((function(resData){var formScript,formData;window.$("#formAlpaca"+item.partNo+vm.id).empty(),formScript=eformScript,formData=resData?eval("("+resData+")"):{};var hasFormDataFile=vm.dossierFilesItems.filter((function(t){return t.dossierPartNo==item.partNo&&t.eForm&&t.formData}));hasFormDataFile&&hasFormDataFile.length>0&&(formData=eval("("+hasFormDataFile[0]["formData"]+")")),formData.dossierId_hidden=vm.detailDossier.dossierId,formData.dossierStatus_hidden=vm.detailDossier.dossierStatus,formData.dossierSubStatus_hidden=vm.detailDossier.dossierSubStatus,formData.fileTemplateNo_hidden=item.templateFileNo,formData.deliverableType_hidden=item.deliverableType,formData.userEmailAddress_hidden=1===vm.originality?vm.userLoginInfomation.applicantContactEmail:vm.userLoginInfomation.employeeEmail,formData.referenceUid=vm.detailDossier.referenceUid,console.log("formDataMC",formData),formScript.data=formData,window.$('div[id="formAlpaca'+item.partNo+vm.id+'"]').alpaca(formScript)}))}))},saveAlpacaForm:function(t,e){var a=this;console.log("itemSave",t);var i=a.dossierFilesItems.find((function(e){return e.dossierPartNo===t.partNo&&e.eForm}));i?(a.loadingApacal=!0,i["dossierId"]=a.detailDossier.dossierId,i["id"]=a.id,a.$store.dispatch("putAlpacaForm",i).then((function(t){a.loadingApacal=!1,toastr__WEBPACK_IMPORTED_MODULE_0___default.a.clear(),toastr__WEBPACK_IMPORTED_MODULE_0___default.a.success("Yêu cầu của bạn thực hiện thành công"),a.createFiles[e].daKhai=!0,a.$store.dispatch("loadDossierFiles",a.detailDossier.dossierId).then((function(t){a.dossierFilesItems=t,a.createFileSigned("update")})).catch((function(t){}))})).catch((function(t){a.loadingApacal=!1,toastr__WEBPACK_IMPORTED_MODULE_0___default.a.clear(),toastr__WEBPACK_IMPORTED_MODULE_0___default.a.error("Yêu cầu của bạn thực hiện thất bại.")}))):(a.loadingApacal=!0,t["dossierId"]=a.detailDossier.dossierId,t["id"]=a.id,a.$store.dispatch("postEform",t).then((function(t){setTimeout((function(){a.loadingApacal=!1,toastr__WEBPACK_IMPORTED_MODULE_0___default.a.success("Yêu cầu của bạn thực hiện thành công"),a.createFiles[e].daKhai=!0}),3e3),a.$store.dispatch("loadDossierFiles",a.detailDossier.dossierId).then((function(t){a.dossierFilesItems=t,a.createFileSigned("update")})).catch((function(t){toastr__WEBPACK_IMPORTED_MODULE_0___default.a.clear(),toastr__WEBPACK_IMPORTED_MODULE_0___default.a.error("Yêu cầu của bạn thực hiện thất bại.")}))})).catch((function(t){a.loadingApacal=!1,toastr__WEBPACK_IMPORTED_MODULE_0___default.a.clear(),toastr__WEBPACK_IMPORTED_MODULE_0___default.a.error("Yêu cầu của bạn thực hiện thất bại.")})))},saveAlpacaFormCallBack:function(t){var e=this,a=t.data?t.data:"";if(a.hasOwnProperty("tp")&&a.tp){var i=e.dossierFilesItems.find((function(t){return t.dossierPartNo===a.tp&&t.eForm&&0!==t.fileSize}));if(i){var o=e.createFiles.findIndex((function(t){return t.partNo===a.tp}));i["dossierId"]=e.detailDossier.dossierId,e.$store.dispatch("putAlpacaFormCallBack",i).then((function(t){setTimeout((function(){toastr__WEBPACK_IMPORTED_MODULE_0___default.a.clear(),toastr__WEBPACK_IMPORTED_MODULE_0___default.a.success("Thực hiện thành công"),e.createFiles[o].daKhai=!0,e.showAlpacaJSFORM(e.createFiles[o])}),3e3),e.$store.dispatch("loadDossierFiles",e.detailDossier.dossierId).then((function(t){e.dossierFilesItems=t})).catch((function(t){}))})).catch((function(t){toastr__WEBPACK_IMPORTED_MODULE_0___default.a.clear(),toastr__WEBPACK_IMPORTED_MODULE_0___default.a.error("Yêu cầu của bạn thực hiện thất bại.")}))}else a["dossierId"]=e.detailDossier.dossierId,console.log("item post",a),e.$store.dispatch("postEformCallBack",a).then((function(t){var i=e.createFiles.findIndex((function(t){return t.partNo===a.tp}));setTimeout((function(){toastr__WEBPACK_IMPORTED_MODULE_0___default.a.clear(),toastr__WEBPACK_IMPORTED_MODULE_0___default.a.success("Thực hiện thành công"),e.createFiles[i].daKhai=!0,e.createFiles[i].daKhai=!0,e.showAlpacaJSFORM(e.createFiles[i])}),3e3),e.$store.dispatch("loadDossierFiles",e.detailDossier.dossierId).then((function(t){e.dossierFilesItems=t})).catch((function(t){toastr__WEBPACK_IMPORTED_MODULE_0___default.a.clear(),toastr__WEBPACK_IMPORTED_MODULE_0___default.a.error("Yêu cầu của bạn thực hiện thất bại.")}))})).catch((function(t){toastr__WEBPACK_IMPORTED_MODULE_0___default.a.clear(),toastr__WEBPACK_IMPORTED_MODULE_0___default.a.error("Yêu cầu của bạn thực hiện thất bại.")}))}},pickFile:function(t){var e=this;e.stateAddFileOther=!1,document.getElementById("file"+t.partNo).value="",document.getElementById("file"+t.partNo).click()},onUploadSingleFile:function(t,e,a){var i=this;if(i.dossierTemplatesItemSelect=e,i.progressUploadPart=e.partNo,e["dossierId"]=i.detailDossier.dossierId,e["dossierTemplateNo"]=i.detailDossier.dossierTemplateNo,i.thaoTacGop){i.progressUploadPart="";var o=$('input[id="file'+e.partNo+'"]')[0].files,n=o.length;if(o)for(var s=0;s<n;s++){var r=o[s],c=r["name"];r["name"]&&(c=r["name"].replace(/\%/g,""),c=c.replace(/\//g,""),c=c.replace(/\\/g,"")),3===e.partType&&e["displayName"]&&(c=e["displayName"].replace(/\%/g,""),c=c.replace(/\//g,""),c=c.replace(/\\/g,""));var l={displayName:c,fileType:r.type,fileSize:r.size,isSync:!1,file:r,dossierPartNo:e.partNo,dossierTemplateNo:e.dossierTemplateNo,fileTemplateNo:e.templateFileNo,formData:"",referenceUid:"",modifiedDate:i.getCurentDateTime(),createDate:(new Date).getTime()};i.dossierFilesItems.push(l),console.log("dossierFilesItems",i.dossierFilesItems),i.createFiles[a]["filesAttach"].push(l),console.log("createFilesAttachThaoTacGop",i.createFiles)}}else i.$store.dispatch("uploadSingleFile",e).then((function(t){i.progressUploadPart="",i.$store.dispatch("loadDossierFiles",i.detailDossier.dossierId).then((function(t){i.dossierFilesItems=t,i.createFiles=i.mergeDossierTemplateVsDossierFiles(i.createFiles,i.dossierFilesItems),console.log("createFiles",i.createFiles),i.createFileSigned()})),console.log("vm.dossierIntoGroup",i.dossierIntoGroup)})).catch((function(t){i.progressUploadPart=""}))},loadAlpcaForm:function(t){var e=this,a=e.dossierFilesItems.find((function(e){return e.dossierPartNo===t.partNo&&e.eForm&&0!==e.fileSize}));a?(a["id"]=e.id,e.$store.dispatch("loadAlpcaForm",a)):e.createFiles.forEach((function(a){a.eForm&&t.partNo===a.partNo&&(a["templateNo"]=e.detailDossier.dossierTemplateNo,e.showAlpacaJSFORM(a))}))},loadAlpcaFormClick:function(t){var e=this;console.log("data alpaca-111",t),window.removeEventListener("message",e.receiveMessage),window.addEventListener("message",e.receiveMessage),e.currentFormView==="formAlpaca"+t.partNo+e.id?e.currentFormView="":e.currentFormView="formAlpaca"+t.partNo+e.id,e.pstEl=e.endEl=0,setTimeout((function(){$("#formAlpaca"+t.partNo+e.id).height()>200&&(e.pstEl=$("#wrapForm"+t.partNo+e.id).offset().top,e.endEl=$("#formAlpaca"+t.partNo+e.id).height(),$(window).scroll((function(){e.pstFixed=$(window).scrollTop()})))}),300);e.dossierFilesItems.find((function(e){return e.dossierPartNo===t.partNo&&e.eForm}));e.createFiles.forEach((function(a){a.eForm&&t.partNo===a.partNo&&(a["templateNo"]=e.detailDossier.dossierTemplateNo,e.showAlpacaJSFORM(a))}))},editFormAlpaca:function editFormAlpaca(item,index){var vm=this;vm.createFiles[index].editForm=!0,window.scrollBy(0,10),vm.active=!1,vm.active=!0;var fileFind=vm.dossierFilesItems.find((function(t){return t.dossierPartNo===item.partNo&&t.eForm})),eformScript="";try{eformScript=eval("("+fileFind.formScript+")")}catch(error){}if(eformScript&&eformScript.hasOwnProperty("eformEmbed")&&eformScript.eformEmbed){console.log("eformEmbed3",item),vm.createFiles[index].embed=!0;var userId=window.themeDisplay.getUserId(),userEmail=1===vm.originality?vm.userLoginInfomation.applicantContactEmail:vm.userLoginInfomation.employeeEmail,referenceUid=vm.detailDossier.referenceUid,dossierStatus=vm.detailDossier.dossierStatus,dossierSubStatus=vm.detailDossier.dossierSubStatus,templateNo=item.partNo,deliverableType=item.deliverableType?item.deliverableType:"",token=localStorage.getItem("jwt_token"),urlEmbed=eformScript.eformEmbed+"/"+item.templateFileNo+"/referenceUid/"+referenceUid+"/"+token+"/"+encodeURIComponent(document.location.origin)+"?userId="+userId+"&userEmail="+userEmail+"&code="+referenceUid+"&dossierStatus="+dossierStatus+"&dossierSubStatus="+dossierSubStatus+"&tp="+templateNo;setTimeout((function(){document.getElementById("formAlpaca"+item.partNo+vm.id+"embed").src=urlEmbed}),500)}else vm.createFiles[index].embed=!1,setTimeout((function(){var t=vm.dossierFilesItems.find((function(t){return t.dossierPartNo===item.partNo&&t.eForm}));t["id"]=vm.id,vm.$store.dispatch("loadAlpcaForm",t)}),200)},previewFormAlpaca:function previewFormAlpaca(item,index){var vm=this;vm.createFiles[index]["editForm"]=!1,window.scrollBy(0,10),vm.active=!1,vm.active=!0;for(var indexFile="",i=0;i<vm.dossierFilesItems.length;i++)if(vm.dossierFilesItems[i]["dossierPartNo"]===item["partNo"]&&vm.dossierFilesItems[i]["eForm"]){indexFile=i;break}vm.dossierFilesItems[indexFile]["isSigned"]?setTimeout((function(){document.getElementById("displayPDF"+item.partNo+vm.id).src=vm.dossierFilesItems[indexFile].pdfSigned}),200):vm.dossierFilesItems.forEach((function(file){if(file.dossierPartNo===item.partNo&&file.eForm&&!file.removed)if(file["dossierId"]=vm.detailDossier.dossierId,vm.onlyView)item["editForm"]=!1,vm.$store.dispatch("viewFile",file).then((function(t){file["eForm"]?vm.pdfEform=!0:vm.pdfEform=!1,setTimeout((function(){document.getElementById("displayPDF"+item.partNo+vm.id).src=t}),200)}));else{var eformScript=eval("("+file.formScript+")");console.log("eformScript preview",eformScript),eformScript&&eformScript.hasOwnProperty("eformEmbed")&&eformScript.eformEmbed?(item["editForm"]=!1,setTimeout((function(){vm.$store.dispatch("viewFile",file).then((function(t){document.getElementById("displayPDF"+file.dossierPartNo+vm.id).src=t}))}),500)):(file["id"]=vm.id,vm.$store.dispatch("putAlpacaForm",file).then((function(t){item["editForm"]=!1,setTimeout((function(){vm.$store.dispatch("viewFile",file).then((function(t){document.getElementById("displayPDF"+file.dossierPartNo+vm.id).src=t}))}),200)})).catch((function(t){toastr__WEBPACK_IMPORTED_MODULE_0___default.a.clear(),toastr__WEBPACK_IMPORTED_MODULE_0___default.a.error("Yêu cầu của bạn thực hiện thất bại.")})))}}))},deleteSingleFileEform:function deleteSingleFileEform(item,index){var vm=this,x=confirm("Bạn có muốn xóa?");x&&(vm.dossierFilesItems.forEach((function(file){file.dossierPartNo===item.partNo&&file.eForm&&(file["dossierId"]=vm.detailDossier.dossierId,vm.$store.dispatch("deleteDossierFile",file).then((function(resFile){vm.$store.dispatch("loadDossierFiles",vm.detailDossier.dossierId).then((function(result){vm.dossierFilesItems=result,vm.createFileSigned("update"),item["editForm"]=!0;var fileViewsTemp=vm.dossierFilesItems.filter((function(t){return t.dossierPartNo===item.partNo&&!t.eForm}));fileViewsTemp&&(vm.fileViews=fileViewsTemp);var eformScript="";console.log("item1234",item,index),item.templateNo=vm.detailDossier.dossierTemplateNo,vm.$store.dispatch("loadFormScriptKQ",item).then((function(resScript){try{eformScript=eval("("+resScript+")")}catch(error){}if(eformScript&&eformScript.hasOwnProperty("eformEmbed")&&eformScript.eformEmbed){item.embed=!0,vm.active=!1,vm.active=!0;var userId=window.themeDisplay.getUserId(),userEmail=1===vm.originality?vm.userLoginInfomation.applicantContactEmail:vm.userLoginInfomation.employeeEmail,referenceUid=vm.detailDossier.referenceUid,dossierStatus=vm.detailDossier.dossierStatus,dossierSubStatus=vm.detailDossier.dossierSubStatus,templateNo=item.partNo,deliverableType=item.deliverableType?item.deliverableType:"",urlEmbed=eformScript.eformEmbed+"/"+item.templateFileNo+"___"+deliverableType+"?userId="+userId+"&userEmail="+userEmail+"&code="+referenceUid+"&dossierStatus="+dossierStatus+"&dossierSubStatus="+dossierSubStatus+"&tp="+templateNo;console.log("urlEmbed",urlEmbed),setTimeout((function(){document.getElementById("formAlpaca"+item.partNo+vm.id+"embed").src=urlEmbed}),300)}else item.embed=!1,vm.active=!1,vm.active=!0,vm.$store.dispatch("loadFormData",item).then((function(resData){var formScript,formData;window.$("#formAlpaca"+item.partNo+vm.id).empty(),formScript=item.formScript?eval("("+item.formScript+")"):{},formData=resData?eval("("+resData+")"):{};var hasFormDataFile=vm.dossierFilesItems.filter((function(t){return itemFile.dossierPartNo==t.partNo&&itemFile.eForm&&itemFile.formData}));hasFormDataFile&&hasFormDataFile.length>0&&(formData=eval("("+hasFormDataFile[0]["formData"]+")")),formData.dossierId_hidden=vm.detailDossier.dossierId,formData.dossierStatus_hidden=vm.detailDossier.dossierStatus,formData.dossierSubStatus_hidden=vm.detailDossier.dossierSubStatus,formData.fileTemplateNo_hidden=item.templateFileNo,formData.deliverableType_hidden=item.deliverableType,formData.userEmailAddress_hidden=1===vm.originality?vm.userLoginInfomation.applicantContactEmail:vm.userLoginInfomation.employeeEmail,formData.referenceUid=vm.detailDossier.referenceUid,console.log("formDataMC",formData),formScript.data=formData,window.$('div[id="formAlpaca'+item.partNo+vm.id+'"]').alpaca(formScript)}))}))}))})))})),vm.createFiles[index].daKhai=!1)},previewFileEfom:function(t,e){var a=this;a.dossierFilesItems.forEach((function(e){e.dossierPartNo===t.partNo&&e.eForm&&(e["dossierId"]=a.detailDossier.dossierId,a.dialogPDFLoading=!0,a.documentType="Tài liệu khai trực tuyến",a.dialogPDF=!0,e["id"]=a.id,a.$store.dispatch("putAlpacaForm",e).then((function(t){setTimeout((function(){a.$store.dispatch("viewFile",e).then((function(t){a.dialogPDFLoading=!1,document.getElementById("dialogPDFPreview"+a.id).src=t}))}),1e3)})).catch((function(t){toastr__WEBPACK_IMPORTED_MODULE_0___default.a.clear(),toastr__WEBPACK_IMPORTED_MODULE_0___default.a.error("Yêu cầu của bạn thực hiện thất bại.")})))}))},showConfigSignService:function(){vgca_show_config()},viewFileKySo:function(t,e){},signAction:function(t,e,a){var i=this;if(console.log("file ký duyệt",t),t["eForm"]&&t["daKhai"]||!t["eForm"]){var o=function(t){var o=JSON.parse(t);if(0===o.Status){var n;try{n=JSON.parse(o.FileServer)}catch(h){}if(console.log("dataSigned",n),toastr__WEBPACK_IMPORTED_MODULE_0___default.a.clear(),toastr__WEBPACK_IMPORTED_MODULE_0___default.a.success("Tài liệu đã được ký duyệt"),a){for(var s="",r=0;r<i.dossierFilesItems.length;r++)if(i.dossierFilesItems[r]["dossierPartNo"]===a&&i.dossierFilesItems[r]["eForm"]){s=r;break}i.dossierFilesItems[s].isSigned=!0,i.dossierFilesItems[s].pdfSigned=n?n.url:"",i.dossierFilesItems[s].fileEntryId=n?n.fileEntryId:"",i.createFiles[e]["editForm"]?(i.createFiles[e]["editForm"]=!1,setTimeout((function(){document.getElementById("displayPDF"+a+i.id).src=n.url}),200)):setTimeout((function(){document.getElementById("displayPDF"+a+i.id).src=n.url}),200),console.log("indexFile",i.dossierFilesItems)}else i.dossierFilesItems[e].isSigned=!0,i.dossierFilesItems[e].pdfSigned=n?n.url:"",i.dossierFilesItems[e].fileEntryId=n?n.fileEntryId:"";var c=[];if(i.dossierFilesItems.length>0)for(var l=function(t){var e=i.createFiles.filter((function(e){return String(e.partNo)===String(i.dossierFilesItems[t]["dossierPartNo"])}));e&&e.length>0&&c.push(i.dossierFilesItems[t])},d=0;d<i.dossierFilesItems.length;d++)l(d);var u={dossierId:i.detailDossier["dossierId"],createFiles:c};i.$store.commit("setCreateFileSigned",u)}else o.Message?(toastr__WEBPACK_IMPORTED_MODULE_0___default.a.clear(),toastr__WEBPACK_IMPORTED_MODULE_0___default.a.error(o.Message)):(toastr__WEBPACK_IMPORTED_MODULE_0___default.a.clear(),toastr__WEBPACK_IMPORTED_MODULE_0___default.a.error("Ký duyệt không thành công"))},n={};n["FileUploadHandler"]=window.themeDisplay.getPortalURL()+"/o/rest/v2/vgca/fileupload",n["SessionId"]="",n["FileName"]=window.themeDisplay.getPortalURL()+"/o/rest/v2/dossiers/"+i.detailDossier["dossierId"]+"/files/"+t["referenceUid"]+"/preview.pdf";var s=JSON.stringify(n);vgca_sign_approved(s,o)}else toastr__WEBPACK_IMPORTED_MODULE_0___default.a.clear(),toastr__WEBPACK_IMPORTED_MODULE_0___default.a.error("Chưa có tài liệu ký duyệt")},deleteSingleFile:function(t,e,a){var i=this,o=confirm("Bạn có muốn xóa?");o&&(i.thaoTacGop?(i.dossierFilesItems=i.dossierFilesItems.filter((function(e){return e.createDate!==t.createDate})),i.createFiles[a]["filesAttach"]=i.createFiles[a]["filesAttach"].filter((function(e){return e.createDate!==t.createDate})),console.log("createFilesAttachThaoTacGop123",i.createFiles)):(t["dossierId"]=i.detailDossier.dossierId,i.$store.dispatch("deleteDossierFile",t).then((function(a){i.fileViews.splice(e,1),i.partView=t.dossierPartNo,i.$store.dispatch("loadDossierFiles",i.detailDossier.dossierId).then((function(t){i.dossierFilesItems=t,i.createFileSigned(),i.createFiles=i.mergeDossierTemplateVsDossierFiles(i.createFiles,i.dossierFilesItems)}))})).catch((function(t){toastr__WEBPACK_IMPORTED_MODULE_0___default.a.clear(),toastr__WEBPACK_IMPORTED_MODULE_0___default.a.error("Yêu cầu của bạn thực hiện thất bại.")}))))},viewFile:function(t){var e=this,a=this;a.dossierFilesItems.forEach((function(i){i["dossierId"]=a.detailDossier.dossierId,i.dossierPartNo===t.partNo&&e.$store.dispatch("viewFile",i)}))},viewFileAlpaca:function(t){var e=this,a=0;e.loadingApacal=!0;var i=function i(){setTimeout((function(){e.$store.dispatch("viewFile",t).then((function(o){"pending"===o&&a<=10?(a+=1,i()):a>10?e.loadingApacal=!1:(e.loadingApacal=!1,setTimeout((function(){document.getElementById("displayPDF"+t.dossierPartNo+e.id).src=o}),100))})).catch((function(){e.loadingApacal=!1}))}),1e3)};i()},viewFile2:function(t,e){var a=this;if(console.log("fileView",a.dossierFilesItems[e]),"doc"===t.fileType||"docx"===t.fileType||"xlsx"===t.fileType||"xls"===t.fileType||"zip"===t.fileType||"rar"===t.fileType||"txt"===t.fileType){var i=a.initDataResource.dossierApi+"/"+a.detailDossier.dossierId+"/files/"+t.referenceUid;window.location.assign(i)}else a.dialogPDFLoading=!0,a.documentType="Tài liệu đính kèm",a.dialogPDF=!0,t["dossierId"]=a.detailDossier.dossierId,"plugin"===a.esignType&&a.dossierFilesItems[e]["isSigned"]?(a.dialogPDFLoading=!1,document.getElementById("dialogPDFPreview"+a.id).src=a.dossierFilesItems[e]["pdfSigned"]):a.$store.dispatch("viewFile",t).then((function(t){a.dialogPDFLoading=!1,document.getElementById("dialogPDFPreview"+a.id).src=t}))},viewFileWithPartNo:function(t){var e=this;if(e.dossierFilesItems){var a=e.dossierFilesItems.filter((function(e){return e.dossierPartNo===t.partNo&&!e.eForm}));if(!a)return;e.fileViews=a,e.partView!==t.partNo?(e.stateView=!0,e.partView=t.partNo):(e.stateView=!e.stateView,e.partView=t.partNo)}},checkStyle:function(t){return"calc(100% - 140px)"},cancelDialog:function(){var t=this;t.dialogAddOtherTemp=!1,t.progressUploadPart=""},addFileOther:function(t){var e=this;e.dialogAddOtherTemp=!0,e.stateAddFileOther=!0,e.dossierTemplatesItemSelect=t},changeDisplayName:function(t,e){var a=this,i={dossierId:a.detailDossier.dossierId,value:value};a.$store.dispatch("changeDisplayNameFile",i).then((function(t){a.fileViews[e].displayName=t.displayName,a.stateEdit=!1})).catch((function(t){console.log("error")}))},validCreateFileTemplate:function(){var t=this;if(t.createFiles.length>0){for(var e=0;e<t.createFiles.length;e++){var a=t.dossierFilesItems.filter((function(a){return a.dossierPartNo===t.createFiles[e].partNo&&a.eForm&&(0!==a.fileSize||0===a.fileSize&&a.modifiedDate!=a.createDate)})).length,i=t.dossierFilesItems.filter((function(a){return a.dossierPartNo===t.createFiles[e].partNo&&!a.eForm})).length;if(t.createFiles[e]["required"]&&t.createFiles[e]["eForm"]&&0===a){var o="Thông tin "+t.createFiles[e].partName+" chưa được lưu!";return toastr__WEBPACK_IMPORTED_MODULE_0___default.a.error(o),!1}if(t.createFiles[e]["required"]&&t.createFiles[e]["eForm"]&&0===i){var n=t.createFiles[e].partName+" chưa có tài liệu đính kèm!";return toastr__WEBPACK_IMPORTED_MODULE_0___default.a.error(n),!1}if(t.createFiles[e]["required"]&&!t.createFiles[e]["eForm"]&&0===i){var s=t.createFiles[e].partName+" chưa có tài liệu đính kèm!";return toastr__WEBPACK_IMPORTED_MODULE_0___default.a.error(s),!1}}return!0}return!0},getDossierIntoGroup:function(t){var e=this,a={groupDossierId:t};e.dossierIntoGroup=[],e.$store.dispatch("getDossiersIntoGroup",a).then((function(t){e.dossierIntoGroup=t,e.dossierIntoGroup=e.dossierIntoGroup.filter((function(t){return String(t["stepCode"])===String(e.detailDossier["stepCode"])&&String(t["dossierId"])!==String(e.detailDossier["dossierId"])}))}))},checkIsSigned:function(t){var e=this;if(e.createFileSignedSync){var a=e.createFileSignedSync["createFiles"].filter((function(e){return e.dossierFileId===t}));return a.length>0&&a[0]}return!1},createFileSigned:function(t){var e=this;e.dossierFilesItems.forEach((function(a,i){if(e.createFileSignedSync&&e.detailDossier["dossierId"]===e.createFileSignedSync["dossierId"]){var o=e.checkIsSigned(a["dossierFileId"]);o&&"update"!==t?(e.dossierFilesItems[i]["isSigned"]=o["isSigned"],e.dossierFilesItems[i]["fileEntryId"]=o["fileEntryId"],e.dossierFilesItems[i]["pdfSigned"]=o["pdfSigned"]):(e.dossierFilesItems[i]["isSigned"]=!1,e.dossierFilesItems[i]["fileEntryId"]="",e.dossierFilesItems[i]["pdfSigned"]="")}else e.dossierFilesItems[i]["isSigned"]=!1,e.dossierFilesItems[i]["fileEntryId"]="",e.dossierFilesItems[i]["pdfSigned"]=""}));var a=[];if(e.dossierFilesItems.length>0)for(var i=function(t){var i=e.createFiles.filter((function(a){return String(a.partNo)===String(e.dossierFilesItems[t]["dossierPartNo"])}));i&&i.length>0&&a.push(e.dossierFilesItems[t])},o=0;o<e.dossierFilesItems.length;o++)i(o);var n={dossierId:e.detailDossier["dossierId"],createFiles:a};console.log("fileSignedSync",n),e.$store.commit("setCreateFileSigned",n)},addFileToDossier:function(){var t=this,e=t.dossierIntoGroupSelect.map((function(t){return t.dossierId})).toString(),a=t.filesAdd.map((function(t){return t.dossierFileId})).toString(),i={dossierIds:e,dossierFileId:a};t.$store.dispatch("uploadFileDossierGroup",i).then((function(e){toastr__WEBPACK_IMPORTED_MODULE_0___default.a.success("Đính kèm tài liệu thành công"),t.dialogSelectDosier=!1,t.filesAdd=[],t.$store.commit("setSelectDossierGroup",[])}))},attachOtherDossier:function(t){var e=this;e.filesAdd=[t],e.dialogSelectDosier=!0},cancelAddFile:function(){var t=this;t.dialogSelectDosier=!1,t.filesAdd=[],t.$store.commit("setSelectDossierGroup",[])},confirmAction:function(t){var e=this;e.dialogConfirm=!1,e.dialogSelectDosier=!0},getCreateFileAttach:function(){var t=this;return t.createFiles},getCurentDateTime:function(){var t=new Date;return"".concat(t.getDate().toString().padStart(2,"0"),"/").concat((t.getMonth()+1).toString().padStart(2,"0"),"/").concat(t.getFullYear()," | ").concat(t.getHours().toString().padStart(2,"0"),":").concat(t.getMinutes().toString().padStart(2,"0"))},getDocumentTypeIcon:function(t){var e="doc,docx",a="xls,xlsx",i="png,jpg,jpeg";return t?e.indexOf(t.toLowerCase())>=0?{icon:"fas fa fa-file-word-o",color:"blue",size:14}:a.indexOf(t.toLowerCase())>=0?{icon:"fas fa fa-file-excel-o",color:"green",size:14}:"pdf"===t.toLowerCase()?{icon:"fa fa-file-pdf-o",color:"red",size:14}:i.indexOf(t.toLowerCase())>=0?{icon:"fas fa fa-file-image-o",color:"primary",size:14}:{icon:"fas fa fa-paperclip",color:"",size:14}:{icon:"attach_file",color:"primary",size:14}}}}},bbd0:function(t){t.exports=JSON.parse('{"initData":{"menuConfigToDo":"/o/rest/v2_1/menuconfigs/todo","counterMenuStep":"/o/rest/v2/statistics/dossiers/todo","getListThuTucHanhChinh":"/o/rest/v2/onegate/serviceconfigs/processes","serviceInfoApi":"/o/rest/v2/serviceinfos","regionApi":"/o/rest/v2/dictcollections","postDossierApi":"/o/rest/v2/dossiers","dossierTemplatesApi":"/o/rest/v2/dossiertemplates","applicantApi":"/o/rest/v2/applicants","dossierlogsApi":"/o/rest/v2/dossierlogs","dossierApi":"/o/rest/v2/dossiers","serviceProcessesApi":"/o/rest/v2/serviceprocesses","serviceConfigApi":"/o/rest/v2/serviceconfigs","serviceConfigByGovApi":"/o/rest/v2/serviceconfigs/govagencies","getNextAction":"/o/rest/v2/dossiers","documentApi":"/o/rest/v2_1/dossiers","stepConfigApi":"/o/rest/v2_1/stepconfigs","getServiceConfigs":"/o/rest/v2/serviceconfigs","commentApi":"/o/rest/v2/comments"},"renderURLInit":"?p_p_id=OneGate&p_p_lifecycle=2&p_p_state=exclusive&p_p_mode=view&p_p_resource_id=renderURLInit","dossierTemplates":[],"advSearchTools":[{"index":0,"value":"adv_0","text":"Ngày, tháng, năm","type":"select","dataSource":"data","spec":"year_month_day","display":false,"disabled":false},{"index":1,"value":"adv_1","text":"Hồ sơ theo top","type":"select","dataSource":"data","spec":"top","display":false,"disabled":false},{"index":2,"value":"adv_2","text":"Trạng thái hồ sơ","type":"select","dataSource":"getStatusLists","spec":"status","display":false,"disabled":false},{"index":3,"value":"adv_3","text":"Trạng thái con","type":"select","dataSource":"getSubstatusLists","spec":"substatus","display":false,"disabled":false},{"index":4,"value":"adv_4","text":"Đơn vị","type":"select","dataSource":"getAgencyLists","spec":"agency","display":false,"disabled":false},{"index":5,"value":"adv_5","text":"Thủ tục","type":"select","dataSource":"getServiceLists","spec":"service","display":false,"disabled":false},{"index":6,"value":"adv_6","text":"Lĩnh vực","type":"select","dataSource":"getDomainLists","spec":"domain","display":false,"disabled":false},{"index":7,"value":"adv_7","text":"Mã sổ theo dõi","type":"text","spec":"register","display":false,"disabled":false}]}')},c199:function(t,e,a){"use strict";var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("v-card",[a("v-card-text",[a("v-layout",{attrs:{wrap:""}},[a("v-flex",{attrs:{xs12:"",sm2:""}},[t.loading?a("content-placeholders",{staticClass:"mt-1"},[a("content-placeholders-text",{attrs:{lines:1}})],1):a("v-subheader",{staticClass:"pl-0"},[t._v("\n            Mã hồ sơ: \n          ")])],1),a("v-flex",{attrs:{xs12:"",sm4:""}},[t.loading?a("content-placeholders",{staticClass:"mt-1"},[a("content-placeholders-text",{attrs:{lines:1}})],1):a("v-subheader",{staticClass:"text-bold",staticStyle:{float:"left"}},[a("span",{staticClass:"text-bold"},[t._v("\n              "+t._s(t.thongTinChungHoSo.dossierNo)+"\n            ")])])],1),a("v-flex",{attrs:{xs12:"",sm2:""}},[t.loading?a("content-placeholders",{staticClass:"mt-1"},[a("content-placeholders-text",{attrs:{lines:1}})],1):a("v-subheader",{staticClass:"pl-0"},[t._v("Thời gian giải quyết: ")])],1),a("v-flex",{attrs:{xs12:"",sm4:""}},[t.loading?a("content-placeholders",{staticClass:"mt-1"},[a("content-placeholders-text",{attrs:{lines:1}})],1):t._e(),!t.loading&&t.thongTinChungHoSo.durationCount?a("v-subheader",{staticStyle:{float:"left"}},[a("span",{staticClass:"text-bold"},[t._v("\n              "+t._s(t.durationText(t.thongTinChungHoSo.durationUnit,t.thongTinChungHoSo.durationCount))+" làm việc\n            ")])]):t._e()],1),a("v-flex",{attrs:{xs12:""}}),a("v-flex",{attrs:{xs12:"",sm2:""}},[t.loading?a("content-placeholders",{staticClass:"mt-1"},[a("content-placeholders-text",{attrs:{lines:1}})],1):a("v-subheader",{staticClass:"pl-0"},[t._v("Ngày tiếp nhận: ")])],1),a("v-flex",{attrs:{xs12:"",sm4:""}},[t.loading?a("content-placeholders",{staticClass:"mt-1"},[a("content-placeholders-text",{attrs:{lines:1}})],1):a("v-subheader",{staticStyle:{float:"left"}},[a("span",{staticClass:"text-bold"},[t._v(t._s(t.thongTinChungHoSo.receiveDate))])])],1),a("v-flex",{attrs:{xs12:"",sm2:""}},[t.loading?a("content-placeholders",{staticClass:"mt-1"},[a("content-placeholders-text",{attrs:{lines:1}})],1):a("v-subheader",{staticClass:"pl-0"},[t._v("Ngày hẹn trả: ")])],1),a("v-flex",{attrs:{xs12:"",sm4:""}},[t.loading?a("content-placeholders",{staticClass:"mt-1"},[a("content-placeholders-text",{attrs:{lines:1}})],1):t._e(),t.loading||!1!==t.editable&&null!==t.editable&&void 0!==t.editable&&"undefined"!==t.editable?t._e():a("v-subheader",{staticStyle:{float:"left",height:"100%"}},[a("span",{staticClass:"text-bold"},[t._v("\n              "+t._s(t.thongTinChungHoSo.dueDate)+"\n            ")])]),t.loading||!0!==t.editable?t._e():a("v-subheader",{staticStyle:{float:"left",height:"100%"}},[a("vue-ctk-date-time-picker",{ref:"datepicker",attrs:{format:"YYYY-MM-DDTHH:mm",formatted:"DD/MM/YYYY HH:mm","time-format":"HH:mm","without-header":!0,label:t.dueDateInput?"":"Chọn ngày","min-date":t.minDate,"max-date":t.maxDate,locale:"vi"},model:{value:t.dueDateInput,callback:function(e){t.dueDateInput=e},expression:"dueDateInput"}}),a("v-icon",{staticClass:"hover-pointer",on:{click:t.showDatePicker}},[t._v("event")])],1)],1)],1)],1)],1)],1)},o=[],n=window.VueCtkDateTimePicker?window.VueCtkDateTimePicker.default:window["vue-ctk-date-time-picker"],s={components:{"vue-ctk-date-time-picker":n},data:function(){return{minDate:null,maxDate:null,editable:!1,dueDateInput:null,dataPostDossier:{serviceCode:"",govAgencyCode:"",processOptionId:""},thongTinChungHoSo:{serviceName:"",dossierTemplateName:"",serviceConfig:"",serviceOption:"",dossierNo:"",receiveDate:"",dueDate:"",durationDate:"",dossierId:"",dossierIdCTN:"",dossierStatus:"",dossierStatusText:"",durationUnit:"",durationCount:""}}},created:function(){var t=this;t.$nextTick((function(){t.minDate=t.getCurentDateTime("date")}))},computed:{loading:function(){return this.$store.getters.loading},isDetail:function(){return this.$store.getters.isDetail}},watch:{dueDateInput:function(t){this.thongTinChungHoSo["dueDate"]=this.getDuedateF(t)}},methods:{initData:function(t){var e=this,a={serviceName:t.serviceName,dossierTemplateName:t.dossierTemplateName,dossierNo:t.dossierNo?t.dossierNo:"",dueDate:null,receiveDate:t.receivingDate?e.dateTimeView(t.receivingDate):t.receiveDate,durationDate:t.durationDate,dossierId:t.dossierId,dossierIdCTN:t.dossierIdCTN,dossierStatus:t.dossierStatus,dossierStatusText:t.dossierStatusText,durationUnit:t.durationUnit,durationCount:t.durationCount};t.receivingDuedate&&t.editable?a.dueDate=t.receivingDuedate:t.receivingDuedate&&!t.editable?a.dueDate=t.receivingDuedate?e.dateTimeView(t.receivingDuedate):t.dueDate:a.dueDate=t.dueDate,e.thongTinChungHoSo=a,e.editable=t.editable,e.thongTinChungHoSo["editable"]=e.editable,e.editable&&(e.dueDateInput=e.thongTinChungHoSo.dueDate?e.formatDateInput(new Date(Number(e.thongTinChungHoSo.dueDate))):null,e.maxDate=e.thongTinChungHoSo.dueDate?e.formatDateInput(new Date(Number(e.thongTinChungHoSo.dueDate))):null),e.minDate=e.getCurentDateTime("date")},getthongtinchunghoso:function(){return this.thongTinChungHoSo},getCurentDateTime:function(t){var e=new Date;return"datetime"===t?"".concat(e.getDate().toString().padStart(2,"0"),"/").concat((e.getMonth()+1).toString().padStart(2,"0"),"/").concat(e.getFullYear()," | ").concat(e.getHours().toString().padStart(2,"0"),":").concat(e.getMinutes().toString().padStart(2,"0")):"date"===t?"".concat(e.getFullYear(),"-").concat((e.getMonth()+1).toString().padStart(2,"0"),"-").concat(e.getDate()):void 0},changeDate:function(){this.thongTinChungHoSo["dueDate"]=this.getDuedate()},changeDossierNo:function(t){this.thongTinChungHoSo["dossierNo"]=t},getDuedate:function(){var t=this.dueDateInput?new Date(this.dueDateInput).getTime():"";return t},getDuedateF:function(t){var e=new Date(t).getTime();return e},durationText:function(t,e){var a;if(1===t&&e>8){var i,o=Math.floor(e/8)+" ngày";i=e%8!==0?8*(e/8-Math.floor(e/8))+" giờ":"",a="".concat(o," ").concat(i)}else 0===t?a=e+" ngày":1===t&&e<=8&&(a=e+" giờ");return a},goBack:function(){var t=this,e=t.$router.history.current.params,a=t.$router.history.current.query;t.$router.push({path:"/danh-sach-ho-so/"+e.index,query:a})},dateTimeView:function(t){if(t){var e=new Date(t);return"".concat(e.getDate().toString().padStart(2,"0"),"/").concat((e.getMonth()+1).toString().padStart(2,"0"),"/").concat(e.getFullYear()," ").concat(e.getHours().toString().padStart(2,"0"),":").concat(e.getMinutes().toString().padStart(2,"0"))}},formatDateInput:function(t){return"".concat(t.getFullYear(),"-").concat((t.getMonth()+1).toString().padStart(2,"0"),"-").concat(t.getDate().toString().padStart(2,"0")," ").concat(t.getHours().toString().padStart(2,"0"),":").concat(t.getMinutes().toString().padStart(2,"0"))},showDatePicker:function(){this.$refs.datepicker.showDatePicker()}},filters:{dateTimeView:function(t){if(t){var e=new Date(t);return"".concat(e.getDate().toString().padStart(2,"0"),"/").concat((e.getMonth()+1).toString().padStart(2,"0"),"/").concat(e.getFullYear()," ").concat(e.getHours().toString().padStart(2,"0"),":").concat(e.getMinutes().toString().padStart(2,"0"))}return""}}},r=s,c=a("2877"),l=a("6544"),d=a.n(l),u=a("b0af"),h=a("99d9"),p=a("0e8f"),m=a("132d"),g=a("a722"),v=a("e0c7"),f=Object(c["a"])(r,i,o,!1,null,null,null);e["a"]=f.exports;d()(f,{VCard:u["a"],VCardText:h["b"],VFlex:p["a"],VIcon:m["a"],VLayout:g["a"],VSubheader:v["a"]})},c23d:function(t,e,a){"use strict";var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"taotailieuketqua",staticStyle:{"background-color":"white",width:"100%"}},[a("v-expansion-panel",{staticClass:"expansion-pl",attrs:{value:[!0],expand:""}},[a("v-expansion-panel-content",[a("div",{attrs:{slot:"header"},slot:"header"},[a("div",{staticClass:"background-triangle-small"},[a("v-icon",{attrs:{size:"18",color:"white"}},[t._v("star_rate")])],1),t._v(" Tài liệu kết quả\n      ")]),a("v-card",t._l(t.createFiles,(function(e,i){return a("div",{key:e.partNo+"cr",staticClass:"form_alpaca",staticStyle:{position:"relative"}},[a("v-expansion-panel",{staticClass:"expaned__list__data",attrs:{value:[!0],expand:""}},[a("v-expansion-panel-content",{attrs:{"hide-actions":"",value:!1}},[a("div",{staticStyle:{"background-color":"#fff"},attrs:{slot:"header"},on:{click:function(e){t.stateView=!1}},slot:"header"},[a("div",{staticStyle:{"align-items":"center",background:"#fff","padding-left":"25px"},style:{width:t.checkStyle(e)}},t._l(t.dossierFilesItems,(function(i,o){return e.dossierPartNo+t.id===i.dossierPartNo+t.id?a("div",{key:o+"cr"},[a("div",{staticStyle:{width:"calc(100% - 370px)",display:"flex","align-items":"center",background:"#fff","padding-left":"25px","font-size":"12px"}},[a("span",{staticClass:"text-bold"},[t._v(t._s(o+1)+". ")]),a("span",{staticClass:"ml-3",staticStyle:{cursor:"pointer"},on:{click:function(e){e.stopPropagation(),t.viewFile2(i)}}},[i.eForm?a("v-icon",[t._v("border_color")]):a("v-icon",[t._v("attach_file")]),t._v("\n                        "+t._s(i.displayName)+" - \n                        "),a("i",[t._v(t._s(i.modifiedDate))])],1)])]):t._e()})),0)]),e.eForm?a("v-card",[a("v-card-text",{staticStyle:{"background-color":"rgba(244, 247, 213, 0.19)"}},[a("v-layout",{attrs:{wrap:""}},[a("v-flex",{staticClass:"text-xs-right",attrs:{xs12:""}},[e.daKhai&&e.eForm?a("v-btn",{attrs:{color:"primary"},on:{click:function(a){t.previewFileEfom(e,i)}}},[t._v("In")]):t._e(),a("div",{attrs:{id:"formAlpaca"+e.partNo+t.id}})],1)],1)],1)],1):t._e()],1)],1)],1)})),0),a("v-dialog",{staticStyle:{overflow:"hidden"},attrs:{"max-width":"900",transition:"fade-transition"},model:{value:t.dialogPDF,callback:function(e){t.dialogPDF=e},expression:"dialogPDF"}},[a("v-card",[a("v-toolbar",{attrs:{dark:"",color:"primary"}},[a("v-toolbar-title",[t._v("File đính kèm")]),a("v-spacer"),a("v-btn",{attrs:{icon:"",dark:""},nativeOn:{click:function(e){t.dialogPDF=!1}}},[a("v-icon",[t._v("close")])],1)],1),t.dialogPDFLoading?a("div",{staticStyle:{"min-height":"600px","text-align":"center",margin:"auto",padding:"25%"}},[a("v-progress-circular",{attrs:{size:100,width:1,color:"primary",indeterminate:""}})],1):t._e(),a("iframe",{directives:[{name:"show",rawName:"v-show",value:!t.dialogPDFLoading,expression:"!dialogPDFLoading"}],staticStyle:{overflow:"auto","min-height":"600px"},attrs:{id:"dialogPDFPreview"+t.id,src:"",type:"application/pdf",width:"100%",height:"100%",frameborder:"0"}})],1)],1)],1)],1)],1)},o=[],n=a("f716"),s=n["a"],r=a("2877"),c=a("6544"),l=a.n(c),d=a("8336"),u=a("b0af"),h=a("99d9"),p=a("169a"),m=a("cd55"),g=a("49e2"),v=a("0e8f"),f=a("132d"),_=a("a722"),y=a("490a"),C=a("9910"),D=a("71d9"),T=a("2a7f"),x=Object(r["a"])(s,i,o,!1,null,null,null);e["a"]=x.exports;l()(x,{VBtn:d["a"],VCard:u["a"],VCardText:h["b"],VDialog:p["a"],VExpansionPanel:m["a"],VExpansionPanelContent:g["a"],VFlex:v["a"],VIcon:f["a"],VLayout:_["a"],VProgressCircular:y["a"],VSpacer:C["a"],VToolbar:D["a"],VToolbarTitle:T["b"]})},cb0a:function(t,e,a){"use strict";var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("v-card",[a("v-expansion-panel",{staticClass:"expansion-pl",attrs:{value:[!0],expand:""}},[a("v-expansion-panel-content",[a("div",{attrs:{slot:"header"},slot:"header"},[a("div",{staticClass:"background-triangle-small"},[a("v-icon",{attrs:{size:"18",color:"white"}},[t._v("star_rate")])],1),a("span",[t._v("Thông tin thanh toán")])]),a("v-card",{},[a("v-card-text",{staticClass:"px-0 py-0"},[a("v-layout",{attrs:{wrap:""}},[a("v-flex",{attrs:{xs12:"",sm2:""}},[a("v-subheader",{staticClass:"pl-0 text-right"},[t._v("Lệ phí: ")])],1),a("v-flex",{attrs:{xs12:"",sm2:""}},[a("p",{staticClass:"pt-2 mb-0"},[t._v(t._s(t.payments.feeAmount?t.currency(t.payments.feeAmount.toString().replace(/\./g,"")):0)+"    vnđ")])]),a("v-flex",{staticClass:"pt-1",attrs:{xs12:"",sm2:""}},[a("v-subheader",{staticClass:"pl-0 text-right"},[t._v("Phí: ")])],1),a("v-flex",{staticClass:"pt-1",attrs:{xs12:"",sm3:""}},[a("p",{staticClass:"pt-2 mb-0"},[t._v(t._s(t.payments.serviceAmount?t.currency(t.payments.serviceAmount.toString().replace(/\./g,"")):0)+"    vnđ")])]),a("v-flex",{attrs:{xs12:"",sm3:""}}),2!==t.dossierDetail.viaPortal&&"2"!==t.dossierDetail.viaPortal||0===t.payments.shipAmount?t._e():a("v-flex",{attrs:{xs12:"",sm2:""}},[a("v-subheader",{staticClass:"pl-0 text-right"},[t._v("Phí chuyển phát: ")])],1),2!==t.dossierDetail.viaPortal&&"2"!==t.dossierDetail.viaPortal||0===t.payments.shipAmount?t._e():a("v-flex",{attrs:{xs12:"",sm2:""}},[a("p",{staticClass:"pt-2 mb-0"},[t._v(t._s(t.payments.shipAmount?t.currency(t.payments.shipAmount.toString().replace(/\./g,"")):0)+"    vnđ")])]),2!==t.dossierDetail.viaPortal&&"2"!==t.dossierDetail.viaPortal||0===t.payments.shipAmount?t._e():a("v-flex",{attrs:{xs12:"",sm8:""}}),a("v-flex",{attrs:{xs12:"",sm2:""}},[a("v-subheader",{staticClass:"pl-0 text-right"},[a("span",{staticClass:"text-bold"},[t._v("Tổng: ")])])],1),a("v-flex",{staticStyle:{"padding-top":"7px"},attrs:{xs12:"",sm3:""}},[a("span",[t._v(t._s(t.payments.paymentAmount?t.currency(t.payments.paymentAmount.toString().replace(/\./g,"")):0)+"    vnđ")])]),a("v-flex",{attrs:{xs12:"",sm7:""}}),a("v-flex",{staticClass:"my-0 pl-3 py-1",staticStyle:{width:"100px"}},[a("span",{staticClass:"red--text"},[t._v("* ")]),t._v(" Ghi chú:")]),a("v-flex",{staticStyle:{width:"calc(100% - 100px)"}},[a("p",{staticClass:"px-2 my-0 py-1"},[t._v("\n                  "+t._s(t.ePaymentProfile["paymentNote"]?t.ePaymentProfile["paymentNote"]:"")+"   \n                ")])])],1)],1)],1)],1)],1),a("v-expansion-panel",{staticClass:"expansion-pl",attrs:{value:[!0],expand:""}},[a("v-expansion-panel-content",[a("div",{attrs:{slot:"header"},slot:"header"},[a("div",{staticClass:"background-triangle-small"},[a("v-icon",{attrs:{size:"18",color:"white"}},[t._v("star_rate")])],1),a("span",[t._v("Tình trạng thanh toán")])]),a("v-card",{},[a("v-card-text",{staticClass:"px-0 py-0"},[a("v-layout",{attrs:{wrap:""}},[a("v-flex",{attrs:{xs12:"",sm2:""}},[a("v-subheader",{staticClass:"pl-0 text-right"},[t._v("Trạng thái: ")])],1),a("v-flex",{attrs:{xs12:"",sm3:""}},[a("p",{staticClass:"pt-2 mb-0"},[t._v(t._s(t.getPaymentStatus(t.payments.paymentStatus)))])]),a("v-flex",{attrs:{xs12:"",sm7:""}}),t.doneVTpay?a("v-layout",{attrs:{wrap:""}},[a("v-flex",{attrs:{xs12:"",sm2:""}},[a("v-subheader",{staticClass:"pl-0 text-right"},[t._v("Người làm thủ tục thanh toán: ")])],1),a("v-flex",{attrs:{xs12:"",sm3:""}},[a("p",{staticClass:"pt-2 mb-0"},[t._v("Đã thanh toán qua ViettelPay\n                    "),a("a",{staticClass:"ml-2",staticStyle:{color:"#001fff","text-decoration":"underline","font-style":"italic"},attrs:{href:"javascript:;"},on:{click:function(t){}}},[t._v("\n                      chi tiết\n                    ")])])]),a("v-flex",{attrs:{xs12:"",sm7:""}})],1):t._e(),Number(t.payments.paymentStatus)>=3?a("v-layout",{attrs:{wrap:""}},[a("v-flex",{attrs:{xs12:"",sm2:""}},[a("v-subheader",{staticClass:"pl-0 text-right"},[t._v("Hình thức thanh toán: ")])],1),a("v-flex",{attrs:{xs12:"",sm3:""}},[a("p",{staticClass:"pt-2 mb-0"},[t._v(t._s(t.payments["paymentMethod"]))])]),a("v-flex",{attrs:{xs12:"",sm7:""}}),t.paymentFile&&"Chuyển khoản"===t.payments["paymentMethod"]?a("v-flex",{attrs:{xs12:"",sm2:""}},[a("v-subheader",{staticClass:"pl-0 text-right"},[t._v("Chứng từ kèm theo: ")])],1):t._e(),t.paymentFile&&"Chuyển khoản"===t.payments["paymentMethod"]?a("v-flex",{attrs:{xs12:"",sm10:""}},[a("span",{staticStyle:{cursor:"pointer"},on:{click:function(e){e.stopPropagation(),t.viewFile()}}},[a("v-icon",[t._v("attach_file")]),t._v("\n                    "+t._s(t.paymentFileName)+"\n                  ")],1),a("v-tooltip",{attrs:{top:""}},[a("v-btn",{staticClass:"mx-0 my-0",attrs:{slot:"activator",icon:"",ripple:""},on:{click:function(e){e.stopPropagation(),t.downloadPaymentFile(t.item)}},slot:"activator"},[a("v-icon",{staticStyle:{color:"#0d71bb"},attrs:{size:"16",color:"primary"}},[t._v("save_alt")])],1),a("span",[t._v("Tải xuống")])],1)],1):t._e(),"Keypay"===t.payments["paymentMethod"]?a("v-flex",{attrs:{xs12:"",sm2:""}},[a("v-subheader",{staticClass:"pl-0 text-right"},[t._v("Mã giao dịch: ")])],1):t._e(),"Keypay"===t.payments["paymentMethod"]?a("v-flex",{attrs:{xs12:"",sm3:""}},[a("p",{staticClass:"pt-2 mb-0"},[t._v(t._s(t.transId))])]):t._e(),"Keypay"===t.payments["paymentMethod"]?a("v-flex",{attrs:{xs12:"",sm7:""}}):t._e(),"Keypay"===t.payments["paymentMethod"]?a("v-flex",{attrs:{xs12:"",sm2:""}},[a("v-subheader",{staticClass:"pl-0 text-right"},[t._v("Mã đơn hàng: ")])],1):t._e(),"Keypay"===t.payments["paymentMethod"]?a("v-flex",{attrs:{xs12:"",sm3:""}},[a("p",{staticClass:"pt-2 mb-0"},[t._v(t._s(t.goodCode))])]):t._e(),"Keypay"===t.payments["paymentMethod"]?a("v-flex",{attrs:{xs12:"",sm7:""}}):t._e(),"KeyPayDVCQG"===t.payments["paymentMethod"]?a("v-flex",{attrs:{xs12:""}}):t._e()],1):t._e()],1)],1)],1)],1)],1),Number(t.payments.paymentStatus)>=3?a("v-expansion-panel",{staticClass:"expansion-pl",attrs:{value:[!0],expand:""}},[a("v-expansion-panel-content",[a("div",{attrs:{slot:"header"},slot:"header"},[a("div",{staticClass:"background-triangle-small"},[a("v-icon",{attrs:{size:"18",color:"white"}},[t._v("star_rate")])],1),a("span",[t._v("Hóa đơn thanh toán")])]),a("v-card",{staticClass:"pl-2"},[a("v-card-text",{staticClass:"px-0 py-0"},[a("v-layout",{attrs:{wrap:""}},[a("v-flex",{attrs:{xs12:"",sm2:""}},[a("v-subheader",{staticClass:"pl-0 text-right"},[t._v("Mẫu số hóa đơn : ")])],1),a("v-flex",{attrs:{xs12:"",sm3:""}},[a("p",{staticClass:"pt-2 mb-0"},[t._v(t._s(t.eInvoiceInfo&&t.eInvoiceInfo["supplierTaxCode"]?t.eInvoiceInfo["invoiceTemplateNo"]:t.payments.invoiceTemplateNo))])]),a("v-flex",{attrs:{xs12:"",sm2:""}},[a("v-subheader",{staticClass:"pl-0 text-right"},[t._v("Số hóa đơn trên hệ thống : ")])],1),a("v-flex",{attrs:{xs12:"",sm3:""}},[a("p",{staticClass:"pt-2 mb-0"},[t._v(t._s(t.eInvoiceInfo&&t.eInvoiceInfo["supplierTaxCode"]?t.eInvoiceInfo["invoiceNo"]:t.payments.invoiceNo))])]),a("v-flex",{attrs:{xs12:"",sm2:""}}),t.eInvoiceInfo&&t.eInvoiceInfo["supplierTaxCode"]?a("v-flex",{attrs:{xs12:""}},[a("v-layout",{attrs:{wrap:""}},[a("v-flex",{attrs:{xs12:"",sm2:""}},[a("v-subheader",{staticClass:"pl-0 text-right"},[t._v("Mã số thuế: ")])],1),a("v-flex",{attrs:{xs12:"",sm3:""}},[a("p",{staticClass:"pt-2 mb-0"},[t._v(t._s(t.eInvoiceInfo["supplierTaxCode"]))])]),a("v-flex",{attrs:{xs12:"",sm2:""}},[a("v-subheader",{staticClass:"pl-0 text-right"},[t._v("Mã bí mật tra cứu hóa đơn: ")])],1),a("v-flex",{attrs:{xs12:"",sm3:""}},[a("p",{staticClass:"pt-2 mb-0"},[t._v(t._s(t.eInvoiceInfo["reservationCode"]))])]),a("v-flex",{attrs:{xs12:"",sm2:""}})],1)],1):a("v-flex",{attrs:{xs12:""}},[a("v-layout",{attrs:{wrap:""}},[a("v-flex",{attrs:{xs12:"",sm2:""}},[a("v-subheader",{staticClass:"pl-0 text-right"},[t._v("Mã tra cứu trên hệ thống : ")])],1),a("v-flex",{attrs:{xs12:"",sm3:""}},[a("p",{staticClass:"pt-2 mb-0"},[t._v(t._s(t.getEinvoiceCode(t.payments.einvoice)))])]),a("v-flex",{attrs:{xs12:"",sm7:""}})],1)],1),a("v-flex",{staticClass:"ml-3 mb-3",attrs:{xs12:"",sm12:""}},[a("v-btn",{attrs:{color:"primary"},on:{click:function(e){t.tracuuhoadon()}}},[a("v-icon",[t._v("search")]),t._v(" \n                  Tra cứu hóa đơn\n                ")],1),a("v-btn",{staticClass:"ml-3",attrs:{color:"primary"},on:{click:function(e){t.printPay()}}},[a("v-icon",[t._v("print")]),t._v("  \n                  In biên lai\n                ")],1)],1)],1)],1)],1)],1)],1):t._e()],1),a("v-dialog",{staticStyle:{overflow:"hidden"},attrs:{"max-width":"900",transition:"fade-transition"},model:{value:t.dialogPDF,callback:function(e){t.dialogPDF=e},expression:"dialogPDF"}},[a("v-card",[a("v-toolbar",{attrs:{dark:"",color:"primary"}},[t.activePrintPay?a("v-toolbar-title",[t._v("In biên lai thanh toán")]):a("v-toolbar-title",[t._v("File đính kèm")]),a("v-spacer"),a("v-btn",{attrs:{icon:"",dark:""},nativeOn:{click:function(e){t.dialogPDF=!1}}},[a("v-icon",[t._v("close")])],1)],1),t.dialogPDFLoading?a("div",{staticStyle:{"min-height":"600px","text-align":"center",margin:"auto",padding:"25%"}},[a("v-progress-circular",{attrs:{size:100,width:1,color:"primary",indeterminate:""}})],1):t._e(),a("iframe",{directives:[{name:"show",rawName:"v-show",value:!t.dialogPDFLoading,expression:"!dialogPDFLoading"}],staticStyle:{overflow:"auto","min-height":"600px"},attrs:{id:"dialogPaymentPreview",src:"",type:"application/pdf",width:"100%",height:"100%",frameborder:"0"}})],1)],1)],1)},o=[],n=(a("bc3a"),{props:{payments:{type:Object,default:function(){}},dossierDetail:{type:Object,default:function(){}}},components:{},data:function(){return{loading:!0,loadingAction:!1,paymentFile:"",dialogPDF:!1,dialogPDFLoading:!0,activePrintPay:!1,transId:"",goodCode:"",doneVTpay:!1}},computed:{paymentFileName:function(){return this.$store.getters.getPaymentFileName},originality:function(){var t=this;return t.getOriginality()},ePaymentProfile:function(){var t=this;return t.getEPaymentProfile(t.payments["epaymentProfile"])},eInvoiceInfo:function(){var t=this;try{return JSON.parse(t.payments["einvoice"])}catch(e){return console.log("Không có thông tin hóa đơn - einvoice"),""}}},created:function(){var t=this;t.$nextTick((function(){}))},watch:{dossierDetail:function(t){var e=this;e.getPaymentFiles()},payments:function(t){var e=this,a=e.getEPaymentProfile(t.epaymentProfile);if(a&&a["keypayUrl"]&&(e.transId=a["keypayUrl"].split("&").filter((function(t){return t.indexOf("merchant_trans_id")>=0}))[0].split("=")[1],e.goodCode=a["keypayUrl"].split("&").filter((function(t){return t.indexOf("good_code")>=0}))[0].split("=")[1]),a&&a.genQRCode&&"3"!==String(t.paymentStatus)&&"5"!==String(t.paymentStatus)){var i={billcode:a.genQRCode.BILLCODE,order_id:a.genQRCode.ORDER_ID};e.$store.dispatch("getVtPayStatus",i).then((function(t){})).catch((function(){}))}}},methods:{getPaymentFiles:function(){var t=this,e=t.dossierDetail;t.$store.dispatch("getPaymentFiles",e).then((function(e){t.paymentFile=e})).catch((function(){}))},currency:function(t){if(t){var e=(t/1).toFixed(0).replace(".",",");return e.toString().replace(/\B(?=(\d{3})+(?!\d))/g,".")}return""},viewFile:function(){var t=this;t.activePrintPay=!1,t.dialogPDFLoading=!0,t.dialogPDF=!0;var e={dossierId:t.dossierDetail.dossierId,referenceUid:t.dossierDetail.referenceUid};t.$store.dispatch("viewPaymentFile",e).then((function(e){t.dialogPDFLoading=!1,document.getElementById("dialogPaymentPreview").src=e})).catch((function(){}))},getEPaymentProfile:function(t){if(!t)return"";try{return JSON.parse(t),JSON.parse(t)}catch(e){return""}},downloadPaymentFile:function(t){var e=this,a="/o/rest/v2/dossiers/"+e.dossierDetail.dossierId+"/payments/"+e.dossierDetail.referenceUid+"/confirmfile";window.open(a)},printPay:function(){var t=this;t.activePrintPay=!0;var e={dossierId:t.dossierDetail.dossierId,referenceUid:t.payments.referenceUid};if(t.dialogPDFLoading=!0,t.dialogPDF=!0,"KeyPayDVCQG"===t.payments["paymentMethod"]){var a=t.payments.hasOwnProperty("confirmPayload")?t.getEPaymentProfile(t.payments["confirmPayload"]):"";t.dialogPDFLoading=!1;var i=a?a["url_invoice"]:"";i?window.open(i,"_blank"):alert("Không có biên lai")}else if("PayPlatDVCQG"===t.payments["paymentMethod"]){t.dialogPDFLoading=!1,t.dialogPDF=!1;var o="/o/rest/v2/dossiers/"+e.dossierId+"/payments/"+e.referenceUid+"/invoice";window.open(o,"_blank")}else t.$store.dispatch("printPay",e).then((function(e){t.dialogPDFLoading=!1,document.getElementById("dialogPaymentPreview").src=e})).catch((function(){}))},getEinvoiceNo:function(t){if(t&&t.indexOf("#")>=0){var e=t.split("#")[1]?t.split("#")[1]:"";return e.indexOf("}")<0&&e.indexOf('"')<0?e:""}return""},getEinvoiceCode:function(t){if(t&&t.indexOf("#")>=0){var e=t.split("#")[3]?t.split("#")[3].split(",")[0].replace('"',""):"";return e}return""},tracuuhoadon:function(){var t,e=this;t=e.eInvoiceInfo&&e.eInvoiceInfo["supplierTaxCode"]?e.eInvoiceInfo["sInvoiceUrl"]:"http://tracuu.cmcsoft.com",window.open(t,"_blank")},checkVTpay:function(){var t=this,e=t.getEPaymentProfile(t.payments.epaymentProfile),a={billcode:e.genQRCode.BILLCODE,order_id:e.genQRCode.ORDER_ID};t.$store.dispatch("getVtPayStatus",a).then((function(t){})).catch((function(){}))},getPaymentStatus:function(t){return 1===t||"1"===t?"Yêu cầu nộp tiền tạm ứng ":2===t||"2"===t?"Yêu cầu quyết toán phí":3===t||"3"===t?"Báo đã nộp phí trực tuyến":4===t||"4"===t?"Yêu cầu nộp lại phí trực tuyến":5===t||"5"===t?"Đã hoàn thành thu phí":""}}}),s=n,r=a("2877"),c=a("6544"),l=a.n(c),d=a("8336"),u=a("b0af"),h=a("99d9"),p=a("169a"),m=a("cd55"),g=a("49e2"),v=a("0e8f"),f=a("132d"),_=a("a722"),y=a("490a"),C=a("9910"),D=a("e0c7"),T=a("71d9"),x=a("2a7f"),b=a("3a2f"),S=Object(r["a"])(s,i,o,!1,null,null,null);e["a"]=S.exports;l()(S,{VBtn:d["a"],VCard:u["a"],VCardText:h["b"],VDialog:p["a"],VExpansionPanel:m["a"],VExpansionPanelContent:g["a"],VFlex:v["a"],VIcon:f["a"],VLayout:_["a"],VProgressCircular:y["a"],VSpacer:C["a"],VSubheader:D["a"],VToolbar:T["a"],VToolbarTitle:x["b"],VTooltip:b["a"]})},d80f:function(t,e,a){"use strict";var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticStyle:{width:"100%"}},["dieuchinhdulieu"!==t.type&&t.formBuilder.length>0?a("v-expansion-panel",{staticClass:"expansion-pl ext__form",attrs:{value:t.panel,expand:""}},t._l(t.formBuilder,(function(e,i){return a("v-expansion-panel-content",{key:i},[a("div",{attrs:{slot:"header"},slot:"header"},[a("div",{staticClass:"background-triangle-small"},[a("v-icon",{attrs:{size:"18",color:"white"}},[t._v("star_rate")])],1),t._v("\n      "+t._s(e.fieldLabel)+" "),!0===e.required||"true"===e.required?a("span",{staticStyle:{color:"red"}},[t._v(" *")]):t._e()]),a("v-card",[a("v-card-text",{staticClass:"py-2 px-2"},[a("v-form",{ref:"form1",refInFor:!0,attrs:{"lazy-validation":"",id:"form_"+e.fieldName},model:{value:t.valid1,callback:function(e){t.valid1=e},expression:"valid1"}},[a("v-layout",{attrs:{wrap:""}},[a("v-flex",{staticClass:"mx-3",attrs:{xs12:""}},["textarea"===e.fieldType?a("v-text-field",{attrs:{box:"",id:e.fieldName,value:e.value,placeholder:e.placeholder,"multi-line":"",rules:!0===e.required||"true"===e.required?[t.rules.required]:[],required:!0===e.required||"true"===e.required},on:{input:function(a){t.inputChangeValue(e)}}}):t._e(),"string"===e.fieldType?a("v-text-field",{attrs:{box:"",id:e.fieldName,value:e.value,placeholder:e.placeholder,rules:!0===e.required||"true"===e.required?[t.rules.required]:[],required:!0===e.required||"true"===e.required},on:{input:function(a){t.inputChangeValue(e)}}}):t._e(),"number"===e.fieldType?a("v-text-field",{attrs:{box:"",id:e.fieldName,value:e.value,placeholder:e.placeholder,rules:!0===e.required||"true"===e.required?[t.rules.required]:[t.rules.number],required:!0===e.required||"true"===e.required},on:{input:function(a){t.inputChangeValue(e)}}}):t._e(),e.fieldType.indexOf("select")>=0?a("v-autocomplete",{staticClass:"select-border",attrs:{items:t.validDatasourceSelect(e.fieldType)?JSON.parse(e.fieldType)["select"]:[],value:e.value,rules:!0===e.required||"true"===e.required?[t.rules.required]:[],required:!0===e.required||"true"===e.required,placeholder:e.placeholder,"item-text":"text","item-value":"value","hide-no-data":"","hide-selected":!0,box:""},on:{change:function(e){t.inputChangeValue(e,i)}}}):t._e(),"date"===e.fieldType?a("v-layout",{staticClass:"pl-2",attrs:{wrap:""}},[a("v-icon",{attrs:{color:"blue"}},[t._v("event")]),a("vue-ctk-date-time-picker",{ref:"datepicker",refInFor:!0,staticClass:"ml-2",staticStyle:{width:"auto!important"},attrs:{label:e.value?"":"Chọn ngày",id:e.fieldName,formatted:"DD/MM/YYYY HH:mm",format:"YYYY-MM-DDTHH:mm","time-format":"HH:mm","min-date":t.getCurentDateTime(),"without-header":!0,locale:"vi"},model:{value:e.value,callback:function(a){t.$set(e,"value",a)},expression:"item.value"}})],1):t._e(),e.fieldType.indexOf("options_group")>=0?a("v-layout",{staticClass:"mt-2",attrs:{wrap:""}},t._l(t.optionsGroup,(function(e,i){return a("v-flex",{key:i,staticClass:"pr-3",attrs:{xs4:""}},[a("v-autocomplete",{staticClass:"select-border",attrs:{items:t.optionsGroup[i]["datasource"],value:e.value,rules:!0===e.required||"true"===e.required?[t.rules.required]:[],required:!0===e.required||"true"===e.required,label:e.fieldLabel,"item-text":"itemName","item-value":"itemCode","hide-selected":!0,"hide-no-data":"",box:""},on:{change:function(e){t.inputChangeSelect(e,i)}}})],1)})),1):t._e()],1)],1)],1)],1),a("v-dialog",{attrs:{width:"500"},model:{value:t.dialog,callback:function(e){t.dialog=e},expression:"dialog"}},[a("v-date-picker",{attrs:{"full-width":"",landscape:""},model:{value:t.date,callback:function(e){t.date=e},expression:"date"}}),a("v-card-actions",{staticStyle:{background:"#fff"}},[a("v-spacer"),a("v-btn",{attrs:{color:"primary",flat:""},on:{click:t.pickDateCustom}},[t._v("\n              Xác nhận\n            ")])],1)],1)],1)],1)})),1):t._e(),"dieuchinhdulieu"===t.type?a("div",{staticClass:"ext__form px-3"},[t._l(t.formBuilder,(function(e,i){return t.formBuilder.length>0?a("div",{key:i,staticClass:"mb-2",attrs:{"hide-actions":""}},[a("div",{staticClass:"py-1",staticStyle:{"border-bottom":"1px solid #8a898942"}},[a("span",{staticClass:"text-bold"},[t._v(t._s(i+1)+". ")]),t._v(t._s(e.fieldLabel)+" "),!0===e.required||"true"===e.required?a("span",{staticStyle:{color:"red"}},[t._v(" *")]):t._e()]),a("v-form",{ref:"form",refInFor:!0,attrs:{"lazy-validation":""},model:{value:t.valid2,callback:function(e){t.valid2=e},expression:"valid2"}},[a("v-layout",{attrs:{wrap:""}},[a("v-flex",{staticClass:"px-3 mt-2",attrs:{xs12:""}},["textarea"===e.fieldType?a("v-text-field",{attrs:{box:"",id:e.fieldName,value:e.value,placeholder:e.placeholder,"multi-line":"",rules:!0===e.required||"true"===e.required?[t.rules.required,t.rules.varchar5000]:[t.rules.varchar5000],required:!0===e.required||"true"===e.required},on:{input:function(a){t.inputChangeValue(e)}}}):t._e()],1),a("v-flex",{staticClass:"px-3",attrs:{xs12:""}},["string"===e.fieldType?a("v-text-field",{attrs:{box:"",id:e.fieldName,value:e.value,placeholder:e.placeholder,rules:!0===e.required||"true"===e.required?[t.rules.required,t.rules.varchar5000]:[t.rules.varchar5000],required:!0===e.required||"true"===e.required},on:{input:function(a){t.inputChangeValue(e)}}}):t._e()],1),a("v-flex",{staticClass:"px-3",attrs:{xs12:""}},["number"===e.fieldType?a("v-text-field",{attrs:{box:"",id:e.fieldName,value:e.value,placeholder:e.placeholder,rules:!0===e.required||"true"===e.required?[t.rules.required]:[t.rules.number],required:!0===e.required||"true"===e.required},on:{input:function(a){t.inputChangeValue(e)}}}):t._e()],1),a("v-flex",{staticClass:"px-3",attrs:{xs12:""}},[e.fieldType.indexOf("select")>=0?a("v-autocomplete",{staticClass:"select-border",attrs:{items:t.validDatasourceSelect(e.fieldType)?JSON.parse(e.fieldType)["select"]:[],value:e.value,rules:!0===e.required||"true"===e.required?[t.rules.required]:[],required:!0===e.required||"true"===e.required,placeholder:e.placeholder,"item-text":"text","item-value":"value","hide-no-data":"","hide-selected":!0,box:""},on:{change:function(e){t.inputChangeValue(e,i)}}}):t._e()],1),a("v-flex",{staticClass:"px-3",attrs:{xs12:""}},["date"===e.fieldType?a("v-layout",{staticClass:"mt-2",attrs:{wrap:""}},[a("v-icon",{attrs:{color:"blue"}},[t._v("event")]),a("vue-ctk-date-time-picker",{ref:"datepicker",refInFor:!0,staticClass:"ml-2",staticStyle:{width:"auto!important"},attrs:{label:e.value?"":"Chọn ngày",id:e.fieldName,formatted:"DD/MM/YYYY HH:mm",format:"YYYY-MM-DDTHH:mm","time-format":"HH:mm","without-header":!0,locale:"vi"},model:{value:e.value,callback:function(a){t.$set(e,"value",a)},expression:"item.value"}})],1):t._e()],1),a("v-flex",{staticClass:"px-3",attrs:{xs12:""}},["status"===e.fieldType?a("v-text-field",{attrs:{box:"",id:e.fieldName,value:e.value,placeholder:e.placeholder,rules:!0===e.required||"true"===e.required?[t.rules.required]:[],required:!0===e.required||"true"===e.required},on:{input:function(a){t.inputChangeValue(e)}}}):t._e()],1)],1)],1),a("v-dialog",{attrs:{width:"500"},model:{value:t.dialog,callback:function(e){t.dialog=e},expression:"dialog"}},[a("v-date-picker",{attrs:{"full-width":"",landscape:""},model:{value:t.date,callback:function(e){t.date=e},expression:"date"}}),a("v-card-actions",{staticStyle:{background:"#fff"}},[a("v-spacer"),a("v-btn",{attrs:{color:"primary",flat:""},on:{click:t.pickDateCustom}},[t._v("\n            Xác nhận\n          ")])],1)],1)],1):t._e()})),0===t.formBuilder.length?a("div",[a("v-alert",{attrs:{outline:"",color:"warning",icon:"priority_high",value:!0}},[t._v("\n        Không có form điều chỉnh dữ liệu\n      ")])],1):t._e()],2):t._e()],1)},o=[],n=a("1157"),s=a.n(n),r=a("bc3a"),c=a.n(r);function l(t,e){return h(t)||u(t,e)||d()}function d(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function u(t,e){var a=[],i=!0,o=!1,n=void 0;try{for(var s,r=t[Symbol.iterator]();!(i=(s=r.next()).done);i=!0)if(a.push(s.value),e&&a.length===e)break}catch(c){o=!0,n=c}finally{try{i||null==r["return"]||r["return"]()}finally{if(o)throw n}}return a}function h(t){if(Array.isArray(t))return t}function p(t){return v(t)||g(t)||m()}function m(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function g(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}function v(t){if(Array.isArray(t)){for(var e=0,a=new Array(t.length);e<t.length;e++)a[e]=t[e];return a}}var f=window.VueCtkDateTimePicker?window.VueCtkDateTimePicker.default:window["vue-ctk-date-time-picker"],_={components:{"vue-ctk-date-time-picker":f},props:{dossier_id:{type:Number},action_id:{type:Number},type:{type:String,default:function(){return""}}},data:function(){return{optionsGroup:[],itemId:null,fieldNameID:"",date:null,dialog:!1,formBuilder:[],panel:[],valid:!1,valid1:!1,valid2:!1,rulesValid:{number:function(t){var e=/^\d+$/;return e.test(t)||"Kiểu dữ liệu sai định dạng"}},rules:{required:function(t){return!!t||"Trường dữ liệu bắt buộc"},number:function(t){var e=/^\d+$/;return e.test(t)||"Kiểu dữ liệu sai định dạng"},varchar50:function(t){return!t||(t=String(t).trim(),t.length<=50||"Không được nhập quá 50 ký tự")},varchar100:function(t){return!t||(t=String(t).trim(),t.length<=100||"Không được nhập quá 100 ký tự")},varchar255:function(t){return!t||(t=String(t).trim(),t.length<=255||"Không được nhập quá 255 ký tự")},varchar500:function(t){return!t||(t=String(t).trim(),t.length<=500||"Không được nhập quá 500 ký tự")},varchar5000:function(t){return!t||(t=String(t).trim(),t.length<=5e3||"Không được nhập quá 5000 ký tự")}}}},watch:{dossier_id:function(){var t=this,e={dossierId:t.dossier_id,actionId:t.action_id};t.$store.dispatch("getExtraForm",e).then((function(e){if(t.formBuilder=e,t.formBuilder.length>0)for(var a in t.formBuilder)"date"===t.formBuilder[a]["fieldType"]&&t.formBuilder[a]["value"]&&isNaN(new Date(t.formBuilder[a]["value"]).getTime())?t.formBuilder[a]["value"]="":"date"===t.formBuilder[a]["fieldType"]&&t.formBuilder[a]["value"]&&!isNaN(new Date(t.formBuilder[a]["value"]).getTime())&&(t.formBuilder[a]["value"]=new Date(t.formBuilder[a]["value"]))})).catch((function(){t.formBuilder=[]}))},formBuilder:function(){var t=this;t.allExpand(t.formBuilder)}},created:function(){var t=this;t.$nextTick((function(){var e={dossierId:t.dossier_id,actionId:t.action_id};e["dossierId"]&&e["actionId"]&&t.$store.dispatch("getExtraForm",e).then((function(e){if(t.formBuilder=e,t.formBuilder.length>0){for(var a in t.formBuilder)if("date"===t.formBuilder[a]["fieldType"]&&t.formBuilder[a]["value"]&&isNaN(new Date(t.formBuilder[a]["value"]).getTime()))t.formBuilder[a]["value"]="";else if("date"===t.formBuilder[a]["fieldType"]&&t.formBuilder[a]["value"]&&!isNaN(new Date(t.formBuilder[a]["value"]).getTime()))t.formBuilder[a]["value"]=new Date(t.formBuilder[a]["value"]);else if(t.formBuilder[a]["fieldType"].indexOf("options_group")>=0)for(var i in t.optionsGroup=JSON.parse(t.formBuilder[a]["fieldType"])["options_group"],t.optionsGroup)t.optionsGroup[i].hasOwnProperty("api")&&t.optionsGroup[i]["api"]&&t.getDataSource(t.optionsGroup[i]["api"],i,{});t.allExpand(t.formBuilder)}}))}))},methods:{allExpand:function(t){var e=this;e.panel=p(Array(t.length).keys()).map((function(t){return!0}))},openDialogCustom:function(t,e){var a=this;a.dialog=!0,a.fieldNameID=e,a.itemId=t},pickDateCustom:function(){var t=this;console.log(t.date),t.date&&(t.itemId.value=new Date(t.date)),t.dialog=!1},inputChangeValue:function(t,e){var a=this;void 0!==e&&null!==e&&"undefined"!==e&&"null"!==e?a.formBuilder[e]["value"]=t:t.value=document.getElementById(t.fieldName).value,console.log("formBuilder",a.formBuilder)},inputChangeSelect:function(t,e){console.log("inputChangeSelect",t,e);var a=this;a.optionsGroup.length>e+1&&(a.optionsGroup[e+1]["value"]="",a.getDataSource(a.optionsGroup[e+1]["api"],e+1,{parent:t}))},getDataSource:function(t,e,a){var i=this,o={headers:{groupId:window.themeDisplay.getScopeGroupId()},params:a||{}};c.a.get(t,o).then((function(t){t.data&&t.data["data"]?i.optionsGroup[e]["datasource"]=t.data["data"]:i.optionsGroup[e]["datasource"]=[]})).catch((function(t){i.optionsGroup[e]["datasource"]=[]}))},showDatePicker:function(){this.$refs.datepicker.showDatePicker()},dateTimeView:function(t){if(t){var e=new Date(t);return"".concat(e.getDate().toString().padStart(2,"0"),"/").concat((e.getMonth()+1).toString().padStart(2,"0"),"/").concat(e.getFullYear())}return""},parseCurrentDate:function(t){if(!t)return null;var e=t.split("/"),a=l(e,3),i=a[0],o=a[1],n=a[2];return"".concat(n,"-").concat(o.padStart(2,"0"),"-").concat(i.padStart(2,"0"))},validDatasourceSelect:function(t){if(!t)return!1;try{var e=JSON.parse(t);return!!e}catch(a){return!1}},checkValid:function(){var t=this,e=!0;if(t.formBuilder.length>0)for(var a in t.formBuilder)if(t.formBuilder[a].fieldType.indexOf("options_group")>=0){for(var i in t.optionsGroup)if((!0===t.optionsGroup[i]["required"]||"true"===t.optionsGroup[i]["required"])&&!t.optionsGroup[i]["value"])return e=!1,alert(t.formBuilder[a]["fieldLabel"]+" là bắt buộc!"),e}else if((!0===t.formBuilder[a]["required"]||"true"===t.formBuilder[a]["required"])&&!t.formBuilder[a]["value"])return e=!1,alert(t.formBuilder[a]["fieldLabel"]+" là bắt buộc!"),s()("#form_"+t.formBuilder[a].fieldName)[0].__vue__.validate(),e;return e},formSubmitData:function(){var t=this,e={};if(t.formBuilder.length>0){for(var a in t.formBuilder)if(t.formBuilder[a].fieldName){var i=t.formBuilder[a].value;"date"===t.formBuilder[a].fieldType&&(i=new Date(t.formBuilder[a].value).getTime()?new Date(t.formBuilder[a].value).getTime():""),e[t.formBuilder[a].fieldName]=i}else if(!t.formBuilder[a].fieldName&&t.formBuilder[a].fieldType.indexOf("options_group")>=0)for(var o in t.optionsGroup)e[t.optionsGroup[o].fieldName]=t.optionsGroup[o]["value"]}else e="";return console.log("form-thong-tin",e),e},getCurentDateTime:function(){var t=new Date;return"".concat(t.getFullYear(),"-").concat((t.getMonth()+1).toString().padStart(2,"0"),"-").concat(t.getDate().toString().padStart(2,"0"))}},filters:{parseDate:function(t){if(!t)return"";var e="";return e=isNaN(Number(t))?new Date(t):new Date(Number(t)),e?"".concat(e.getDate().toString().padStart(2,"0"),"/").concat((e.getMonth()+1).toString().padStart(2,"0"),"/").concat(e.getFullYear()," ").concat(e.getHours().toString().padStart(2,"0"),":").concat(e.getMinutes().toString().padStart(2,"0")):""}}},y=_,C=a("2877"),D=a("6544"),T=a.n(D),x=a("0798"),b=a("c6a6"),S=a("8336"),N=a("b0af"),P=a("99d9"),I=a("2e4b"),A=a("169a"),w=a("cd55"),E=a("49e2"),k=a("0e8f"),O=a("4bd4"),F=a("132d"),M=a("a722"),V=a("9910"),L=a("2677"),H=Object(C["a"])(y,i,o,!1,null,null,null);e["a"]=H.exports;T()(H,{VAlert:x["a"],VAutocomplete:b["a"],VBtn:S["a"],VCard:N["a"],VCardActions:P["a"],VCardText:P["b"],VDatePicker:I["a"],VDialog:A["a"],VExpansionPanel:w["a"],VExpansionPanelContent:E["a"],VFlex:k["a"],VForm:O["a"],VIcon:F["a"],VLayout:M["a"],VSpacer:V["a"],VTextField:L["a"]})},dbf2:function(t,e,a){},e211:function(module,__webpack_exports__,__webpack_require__){"use strict";var toastr__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("854a"),toastr__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(toastr__WEBPACK_IMPORTED_MODULE_0__),_TiepNhan_HoSoTrongNhom__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("335e");toastr__WEBPACK_IMPORTED_MODULE_0___default.a.options={closeButton:!0,timeOut:"5000"},__webpack_exports__["a"]={props:{id:{type:String,default:function(){return"nm"}},detailDossier:{type:Object,default:function(){}},createFiles:{type:Array,default:function(){return[]}},esignType:{type:String,default:function(){return""}}},components:{"ho-so-nhom":_TiepNhan_HoSoTrongNhom__WEBPACK_IMPORTED_MODULE_1__["a"]},data:function(){return{dialogConfirm:!1,labelConfirm:"",dossierTemplateItems:[],dossierMarksItems:[],dossierFilesItems:[],thongTinHoSo:{},valid:!0,stateView:!1,dialogAddOtherTemp:!1,loadingAddOther:!1,otherDossierTemplate:"",sheet:!1,partView:"",dossierFileIdView:"",stateEdit:!1,progressUploadPart:"",dialogPDF:!1,dialogPDFLoading:!0,stateAddFileOther:!1,dossierTemplatesItemSelect:{},fileViews:[],sampleCount:0,fileTemplateItems:[],currentFormView:"",pstFixed:0,pstEl:0,endEl:0,dialogSelectDosier:!1,dossierIntoGroup:[],filesAdd:[],documentType:"Tài liệu đính kèm",receiveMessage:"",active:!0,loadingApacal:!1,thaoTacGop:!1}},computed:{loading:function(){return this.$store.getters.loading},originality:function(){var t=this;return t.getOriginality()},initDataResource:function(){return this.$store.getters.loadingInitData},dossierIntoGroupSelect:function(){return this.$store.getters.getDossierIntoGroup},createFileSignedSync:function(){return this.$store.getters.getCreateFileSigned},userLoginInfomation:function(){return this.$store.getters.getUserLogin}},created:function(){var t=this,e=t.$router.history.current.query;e.hasOwnProperty("dossiers")&&(t.thaoTacGop=!0),t.receiveMessage=function(e){t.saveAlpacaFormCallBack(e)},t.page=1,t.$nextTick((function(){if(console.log("vm.detailDossier--TLKQ--",t.detailDossier),t.detailDossier["dossierId"])if(t.thaoTacGop)t.createFiles=t.createFiles.map((function(t){return Object.assign(t,{filesAttach:[]})}));else{var e=[];e.push(t.$store.dispatch("loadDossierFiles",t.detailDossier.dossierId)),e.push(t.$store.dispatch("loadDossierTemplates",t.detailDossier)),Promise.all(e).then((function(e){var a=e[1]["dossierParts"],i=e[0];t.dossierFilesItems=i,t.dossierFilesItems.forEach((function(e,a){t.detailDossier["dossierId"]===t.createFileSignedSync["dossierId"]?(e["isSigned"]=t.createFileSignedSync["createFiles"][a]["isSigned"],e["fileEntryId"]=t.createFileSignedSync["createFiles"][a]["fileEntryId"],e["pdfSigned"]=t.createFileSignedSync["createFiles"][a]["pdfSigned"]):(e["isSigned"]=!1,e["fileEntryId"]="",e["pdfSigned"]="")})),t.createFiles=t.mergeDossierTemplateVsDossierFiles(t.createFiles,i),0!==a.length&&t.createFiles.forEach((function(t){var e=a.find((function(e){return t.partNo===e.partNo}));e&&(t["required"]=e["required"],t["partTip"]=e["partTip"])}))})),t.detailDossier["groupDossierId"]&&t.getDossierIntoGroup(t.detailDossier["groupDossierId"])}}))},watch:{$route:function(t,e){}},mounted:function(){var t=this;t.$nextTick((function(){t.createFiles.length>0&&!t.thaoTacGop&&setTimeout((function(){t.genAllAlpacaForm(t.dossierFilesItems,t.createFiles)}),300)}))},methods:{genAllAlpacaForm:function(t,e){var a=this;if(t.length>0&&t.filter((function(t){return t.eForm&&t.size})).length>0){var i=t.filter((function(t){return t.eForm})),o=e.filter((function(t){return t.eForm}));i.length>0||e.forEach((function(t){t.eForm&&(t["templateNo"]=a.detailDossier.dossierTemplateNo,a.showAlpacaJSFORM(t))})),o.length!==i.length&&o.forEach((function(t){var e=i.findIndex((function(e){return t.partNo===e.dossierPartNo}));-1===e&&(t["templateNo"]=a.detailDossier.dossierTemplateNo,a.showAlpacaJSFORM(t))}))}else e.forEach((function(t){t.eForm&&(t["templateNo"]=a.detailDossier.dossierTemplateNo,a.showAlpacaJSFORM(t))}))},mergeDossierTemplateVsDossierFiles:function(t,e){return 0!==e.length?t.forEach((function(t,a){t["editForm"]=!0,t["embed"]=!1;var i=e.find((function(e){return t.partNo===e.dossierPartNo&&0!==e.fileSize&&e.eForm||t.partNo===e.dossierPartNo&&!e.eForm}));i?t["daKhai"]=!0:i||(t["daKhai"]=!1)})):t.forEach((function(t){t.eForm&&(t["daKhai"]=!1,t["editForm"]=!0,t["embed"]=!1)})),t},showAlpacaJSFORM:function showAlpacaJSFORM(item){var vm=this;item["dossierId"]=vm.detailDossier.dossierId,item["editForm"]=!0,item.templateNo=vm.detailDossier.dossierTemplateNo;var eformScript="";if(item.formScript){try{eformScript=eval("("+item.formScript+")")}catch(error){}if(eformScript&&eformScript.hasOwnProperty("eformEmbed")&&eformScript.eformEmbed){console.log("eformEmbed",item),item.embed=!0,vm.active=!1,vm.active=!0;var userId=window.themeDisplay.getUserId(),userEmail=1===vm.originality?vm.userLoginInfomation.applicantContactEmail:vm.userLoginInfomation.employeeEmail,referenceUid=vm.detailDossier.referenceUid,dossierStatus=vm.detailDossier.dossierStatus,dossierSubStatus=vm.detailDossier.dossierSubStatus,templateNo=item.partNo,deliverableType=item.deliverableType?item.deliverableType:"",token=localStorage.getItem("jwt_token"),urlEmbed=eformScript.eformEmbed+"/"+item.templateFileNo+"/referenceUid/"+referenceUid+"/"+token+"/"+encodeURIComponent(document.location.origin)+"?userId="+userId+"&userEmail="+userEmail+"&code="+referenceUid+"&dossierStatus="+dossierStatus+"&dossierSubStatus="+dossierSubStatus+"&tp="+templateNo;console.log("urlEmbed",urlEmbed),setTimeout((function(){document.getElementById("formAlpaca"+item.partNo+vm.id+"embed").src="",setTimeout((function(){document.getElementById("formAlpaca"+item.partNo+vm.id+"embed").src=urlEmbed}),50)}),300)}else item.embed=!1,vm.active=!1,vm.active=!0,vm.$store.dispatch("loadFormData",item).then((function(resData){var formScript,formData;window.$("#formAlpaca"+item.partNo+vm.id).empty(),formScript=item.formScript?eval("("+item.formScript+")"):{},formData=resData?eval("("+resData+")"):{},formData.dossierId_hidden=vm.detailDossier.dossierId,formData.dossierStatus_hidden=vm.detailDossier.dossierStatus,formData.dossierSubStatus_hidden=vm.detailDossier.dossierSubStatus,formData.fileTemplateNo_hidden=item.templateFileNo,formData.deliverableType_hidden=item.deliverableType,formData.userEmailAddress_hidden=1===vm.originality?vm.userLoginInfomation.applicantContactEmail:vm.userLoginInfomation.employeeEmail,formData.referenceUid=vm.detailDossier.referenceUid,console.log("formDataMC",formData),formScript.data=formData,window.$('div[id="formAlpaca'+item.partNo+vm.id+'"]').alpaca(formScript)}))}else vm.$store.dispatch("loadFormScriptKQ",item).then((function(resScript){try{eformScript=eval("("+resScript+")")}catch(error){}if(eformScript&&eformScript.hasOwnProperty("eformEmbed")&&eformScript.eformEmbed){console.log("eformEmbed2",item),item.embed=!0,vm.active=!1,vm.active=!0;var _userId=window.themeDisplay.getUserId(),_userEmail=1===vm.originality?vm.userLoginInfomation.applicantContactEmail:vm.userLoginInfomation.employeeEmail,_referenceUid=vm.detailDossier.referenceUid,_dossierStatus=vm.detailDossier.dossierStatus,_dossierSubStatus=vm.detailDossier.dossierSubStatus,_templateNo=item.partNo,_deliverableType=item.deliverableType?item.deliverableType:"",_token=localStorage.getItem("jwt_token"),_urlEmbed=eformScript.eformEmbed+"/"+item.templateFileNo+"/referenceUid/"+_referenceUid+"/"+_token+"/"+encodeURIComponent(document.location.origin)+"?userId="+_userId+"&userEmail="+_userEmail+"&code="+_referenceUid+"&dossierStatus="+_dossierStatus+"&dossierSubStatus="+_dossierSubStatus+"&tp="+_templateNo;console.log("urlEmbed",_urlEmbed),setTimeout((function(){document.getElementById("formAlpaca"+item.partNo+vm.id+"embed").src=_urlEmbed}),300)}else item.embed=!1,vm.active=!1,vm.active=!0,vm.$store.dispatch("loadFormData",item).then((function(resData){var formScript,formData;window.$("#formAlpaca"+item.partNo+vm.id).empty(),formScript=item.formScript?eval("("+item.formScript+")"):eformScript,formData=resData?eval("("+resData+")"):{},formData.dossierId_hidden=vm.detailDossier.dossierId,formData.dossierStatus_hidden=vm.detailDossier.dossierStatus,formData.dossierSubStatus_hidden=vm.detailDossier.dossierSubStatus,formData.fileTemplateNo_hidden=item.templateFileNo,formData.deliverableType_hidden=item.deliverableType,formData.userEmailAddress_hidden=1===vm.originality?vm.userLoginInfomation.applicantContactEmail:vm.userLoginInfomation.employeeEmail,formData.referenceUid=vm.detailDossier.referenceUid,console.log("formDataMC",formData),formScript.data=formData,window.$('div[id="formAlpaca'+item.partNo+vm.id+'"]').alpaca(formScript)}))}))},saveAlpacaForm:function(t,e){var a=this;console.log("itemSave",t);var i=a.dossierFilesItems.find((function(e){return e.dossierPartNo===t.partNo&&e.eForm}));i?(i["dossierId"]=a.detailDossier.dossierId,i["id"]=a.id,a.$store.dispatch("putAlpacaForm",i).then((function(t){toastr__WEBPACK_IMPORTED_MODULE_0___default.a.clear(),toastr__WEBPACK_IMPORTED_MODULE_0___default.a.success("Yêu cầu của bạn thực hiện thành công"),a.createFiles[e].daKhai=!0,a.$store.dispatch("loadDossierFiles",a.detailDossier.dossierId).then((function(t){a.dossierFilesItems=t,a.createFileSigned("update")})).catch((function(t){}))})).catch((function(t){console.log("run saveForm"),toastr__WEBPACK_IMPORTED_MODULE_0___default.a.clear(),toastr__WEBPACK_IMPORTED_MODULE_0___default.a.error("Yêu cầu của bạn thực hiện thất bại.")}))):(t["dossierId"]=a.detailDossier.dossierId,t["id"]=a.id,a.$store.dispatch("postEform",t).then((function(t){setTimeout((function(){toastr__WEBPACK_IMPORTED_MODULE_0___default.a.success("Yêu cầu của bạn thực hiện thành công"),a.createFiles[e].daKhai=!0}),3e3),a.$store.dispatch("loadDossierFiles",a.detailDossier.dossierId).then((function(t){a.dossierFilesItems=t,a.createFileSigned("update")})).catch((function(t){toastr__WEBPACK_IMPORTED_MODULE_0___default.a.clear(),toastr__WEBPACK_IMPORTED_MODULE_0___default.a.error("Yêu cầu của bạn thực hiện thất bại.")}))})).catch((function(t){toastr__WEBPACK_IMPORTED_MODULE_0___default.a.clear(),toastr__WEBPACK_IMPORTED_MODULE_0___default.a.error("Yêu cầu của bạn thực hiện thất bại.")})))},saveAlpacaFormCallBack:function(t){var e=this,a=t.data?t.data:"";if(a.hasOwnProperty("tp")&&a.tp){var i=e.dossierFilesItems.find((function(t){return t.dossierPartNo===a.tp&&t.eForm&&0!==t.fileSize}));if(i){var o=e.createFiles.findIndex((function(t){return t.partNo===a.tp}));i["dossierId"]=e.detailDossier.dossierId,e.$store.dispatch("putAlpacaFormCallBack",i).then((function(t){setTimeout((function(){toastr__WEBPACK_IMPORTED_MODULE_0___default.a.clear(),toastr__WEBPACK_IMPORTED_MODULE_0___default.a.success("Thực hiện thành công"),e.createFiles[o].daKhai=!0,e.showAlpacaJSFORM(e.createFiles[o])}),3e3),e.$store.dispatch("loadDossierFiles",e.detailDossier.dossierId).then((function(t){e.dossierFilesItems=t})).catch((function(t){}))})).catch((function(t){toastr__WEBPACK_IMPORTED_MODULE_0___default.a.clear(),toastr__WEBPACK_IMPORTED_MODULE_0___default.a.error("Yêu cầu của bạn thực hiện thất bại.")}))}else a["dossierId"]=e.detailDossier.dossierId,console.log("item post",a),e.$store.dispatch("postEformCallBack",a).then((function(t){var i=e.createFiles.findIndex((function(t){return t.partNo===a.tp}));setTimeout((function(){toastr__WEBPACK_IMPORTED_MODULE_0___default.a.clear(),toastr__WEBPACK_IMPORTED_MODULE_0___default.a.success("Thực hiện thành công"),e.createFiles[i].daKhai=!0,e.createFiles[i].daKhai=!0,e.showAlpacaJSFORM(e.createFiles[i])}),3e3),e.$store.dispatch("loadDossierFiles",e.detailDossier.dossierId).then((function(t){e.dossierFilesItems=t})).catch((function(t){toastr__WEBPACK_IMPORTED_MODULE_0___default.a.clear(),toastr__WEBPACK_IMPORTED_MODULE_0___default.a.error("Yêu cầu của bạn thực hiện thất bại.")}))})).catch((function(t){toastr__WEBPACK_IMPORTED_MODULE_0___default.a.clear(),toastr__WEBPACK_IMPORTED_MODULE_0___default.a.error("Yêu cầu của bạn thực hiện thất bại.")}))}},pickFile:function(t){var e=this;e.stateAddFileOther=!1,document.getElementById("file"+t.partNo).value="",document.getElementById("file"+t.partNo).click()},onUploadSingleFile:function(t,e,a){var i=this;if(i.dossierTemplatesItemSelect=e,i.progressUploadPart=e.partNo,e["dossierId"]=i.detailDossier.dossierId,e["dossierTemplateNo"]=i.detailDossier.dossierTemplateNo,i.thaoTacGop){i.progressUploadPart="";var o=$('input[id="file'+e.partNo+'"]')[0].files,n=o.length;if(o)for(var s=0;s<n;s++){var r=o[s],c=r["name"];r["name"]&&(c=r["name"].replace(/\%/g,""),c=c.replace(/\//g,""),c=c.replace(/\\/g,"")),3===e.partType&&e["displayName"]&&(c=e["displayName"].replace(/\%/g,""),c=c.replace(/\//g,""),c=c.replace(/\\/g,""));var l={displayName:c,fileType:r.type,fileSize:r.size,isSync:!1,file:r,dossierPartNo:e.partNo,dossierTemplateNo:e.dossierTemplateNo,fileTemplateNo:e.templateFileNo,formData:"",referenceUid:"",modifiedDate:i.getCurentDateTime(),createDate:(new Date).getTime()};i.dossierFilesItems.push(l),console.log("dossierFilesItems",i.dossierFilesItems),i.createFiles[a]["filesAttach"].push(l),console.log("createFilesAttachThaoTacGop",i.createFiles)}}else i.$store.dispatch("uploadSingleFile",e).then((function(t){i.progressUploadPart="",i.$store.dispatch("loadDossierFiles",i.detailDossier.dossierId).then((function(t){i.dossierFilesItems=t,i.createFiles=i.mergeDossierTemplateVsDossierFiles(i.createFiles,i.dossierFilesItems),console.log("createFiles",i.createFiles),i.createFileSigned()})),console.log("vm.dossierIntoGroup",i.dossierIntoGroup)})).catch((function(t){i.progressUploadPart=""}))},loadAlpcaForm:function(t){var e=this,a=e.dossierFilesItems.find((function(e){return e.dossierPartNo===t.partNo&&e.eForm&&0!==e.fileSize}));a?(a["id"]=e.id,e.$store.dispatch("loadAlpcaForm",a)):e.createFiles.forEach((function(a){a.eForm&&t.partNo===a.partNo&&(a["templateNo"]=e.detailDossier.dossierTemplateNo,e.showAlpacaJSFORM(a))}))},loadAlpcaFormClick:function(t){var e=this;console.log("data alpaca-111",t),window.removeEventListener("message",e.receiveMessage),window.addEventListener("message",e.receiveMessage),e.currentFormView==="formAlpaca"+t.partNo+e.id?e.currentFormView="":e.currentFormView="formAlpaca"+t.partNo+e.id,e.pstEl=e.endEl=0,setTimeout((function(){$("#formAlpaca"+t.partNo+e.id).height()>200&&(e.pstEl=$("#wrapForm"+t.partNo+e.id).offset().top,e.endEl=$("#formAlpaca"+t.partNo+e.id).height(),$(window).scroll((function(){e.pstFixed=$(window).scrollTop()})))}),300);var a=e.dossierFilesItems.find((function(e){return e.dossierPartNo===t.partNo&&e.eForm}));if(a)if(a.fileSize){a["id"]=e.id,t["editForm"]=!1;for(var i="",o=0;o<e.dossierFilesItems.length;o++)if(e.dossierFilesItems[o]["dossierPartNo"]===t["partNo"]&&e.dossierFilesItems[o]["eForm"]){i=o;break}console.log("capnhat eform",e.dossierFilesItems[i]),e.dossierFilesItems[i]["isSigned"]?setTimeout((function(){document.getElementById("displayPDF"+t.partNo+e.id).src=e.dossierFilesItems[i].pdfSigned}),200):e.$store.dispatch("viewFile",a).then((function(t){document.getElementById("displayPDF"+a.dossierPartNo+e.id).src=t}))}else e.createFiles.forEach((function(a){a.eForm&&t.partNo===a.partNo&&(a["templateNo"]=e.detailDossier.dossierTemplateNo,e.showAlpacaJSFORM(a))}));else e.createFiles.forEach((function(a){a.eForm&&t.partNo===a.partNo&&(a["templateNo"]=e.detailDossier.dossierTemplateNo,e.showAlpacaJSFORM(a))}))},editFormAlpaca:function editFormAlpaca(item,index){var vm=this;vm.createFiles[index].editForm=!0,window.scrollBy(0,10),vm.active=!1,vm.active=!0;var fileFind=vm.dossierFilesItems.find((function(t){return t.dossierPartNo===item.partNo&&t.eForm})),eformScript="";try{eformScript=eval("("+fileFind.formScript+")")}catch(error){}if(eformScript&&eformScript.hasOwnProperty("eformEmbed")&&eformScript.eformEmbed){console.log("eformEmbed3",item),vm.createFiles[index].embed=!0;var userId=window.themeDisplay.getUserId(),userEmail=1===vm.originality?vm.userLoginInfomation.applicantContactEmail:vm.userLoginInfomation.employeeEmail,referenceUid=vm.detailDossier.referenceUid,dossierStatus=vm.detailDossier.dossierStatus,dossierSubStatus=vm.detailDossier.dossierSubStatus,templateNo=item.partNo,deliverableType=item.deliverableType?item.deliverableType:"",token=localStorage.getItem("jwt_token"),urlEmbed=eformScript.eformEmbed+"/"+item.templateFileNo+"/referenceUid/"+referenceUid+"/"+token+"/"+encodeURIComponent(document.location.origin)+"?userId="+userId+"&userEmail="+userEmail+"&code="+referenceUid+"&dossierStatus="+dossierStatus+"&dossierSubStatus="+dossierSubStatus+"&tp="+templateNo;setTimeout((function(){document.getElementById("formAlpaca"+item.partNo+vm.id+"embed").src=urlEmbed}),500)}else vm.createFiles[index].embed=!1,setTimeout((function(){var t=vm.dossierFilesItems.find((function(t){return t.dossierPartNo===item.partNo&&t.eForm}));t["id"]=vm.id,vm.$store.dispatch("loadAlpcaForm",t)}),200)},previewFormAlpaca:function previewFormAlpaca(item,index){var vm=this;vm.createFiles[index]["editForm"]=!1,window.scrollBy(0,10),vm.active=!1,vm.active=!0;for(var indexFile="",i=0;i<vm.dossierFilesItems.length;i++)if(vm.dossierFilesItems[i]["dossierPartNo"]===item["partNo"]&&vm.dossierFilesItems[i]["eForm"]){indexFile=i;break}vm.dossierFilesItems[indexFile]["isSigned"]?setTimeout((function(){document.getElementById("displayPDF"+item.partNo+vm.id).src=vm.dossierFilesItems[indexFile].pdfSigned}),200):vm.dossierFilesItems.forEach((function(file){if(file.dossierPartNo===item.partNo&&file.eForm&&!file.removed)if(file["dossierId"]=vm.detailDossier.dossierId,vm.onlyView)item["editForm"]=!1,vm.$store.dispatch("viewFile",file).then((function(t){file["eForm"]?vm.pdfEform=!0:vm.pdfEform=!1,setTimeout((function(){document.getElementById("displayPDF"+item.partNo+vm.id).src=t}),200)}));else{var eformScript=eval("("+file.formScript+")");console.log("eformScript preview",eformScript),eformScript&&eformScript.hasOwnProperty("eformEmbed")&&eformScript.eformEmbed?(item["editForm"]=!1,setTimeout((function(){vm.$store.dispatch("viewFile",file).then((function(t){document.getElementById("displayPDF"+file.dossierPartNo+vm.id).src=t}))}),500)):(file["id"]=vm.id,vm.$store.dispatch("putAlpacaForm",file).then((function(t){item["editForm"]=!1,setTimeout((function(){vm.$store.dispatch("viewFile",file).then((function(t){document.getElementById("displayPDF"+file.dossierPartNo+vm.id).src=t}))}),200)})).catch((function(t){toastr__WEBPACK_IMPORTED_MODULE_0___default.a.clear(),toastr__WEBPACK_IMPORTED_MODULE_0___default.a.error("Yêu cầu của bạn thực hiện thất bại.")})))}}))},deleteSingleFileEform:function deleteSingleFileEform(item,index){var vm=this,x=confirm("Bạn có muốn xóa?");x&&(vm.dossierFilesItems.forEach((function(file){file.dossierPartNo===item.partNo&&file.eForm&&(file["dossierId"]=vm.detailDossier.dossierId,vm.$store.dispatch("deleteDossierFile",file).then((function(resFile){vm.$store.dispatch("loadDossierFiles",vm.detailDossier.dossierId).then((function(result){vm.dossierFilesItems=result,vm.createFileSigned("update"),item["editForm"]=!0;var fileViewsTemp=vm.dossierFilesItems.filter((function(t){return t.dossierPartNo===item.partNo&&!t.eForm}));fileViewsTemp&&(vm.fileViews=fileViewsTemp);var eformScript="";console.log("item1234",item,index),item.templateNo=vm.detailDossier.dossierTemplateNo,vm.$store.dispatch("loadFormScriptKQ",item).then((function(resScript){try{eformScript=eval("("+resScript+")")}catch(error){}if(eformScript&&eformScript.hasOwnProperty("eformEmbed")&&eformScript.eformEmbed){item.embed=!0,vm.active=!1,vm.active=!0;var userId=window.themeDisplay.getUserId(),userEmail=1===vm.originality?vm.userLoginInfomation.applicantContactEmail:vm.userLoginInfomation.employeeEmail,referenceUid=vm.detailDossier.referenceUid,dossierStatus=vm.detailDossier.dossierStatus,dossierSubStatus=vm.detailDossier.dossierSubStatus,templateNo=item.partNo,deliverableType=item.deliverableType?item.deliverableType:"",urlEmbed=eformScript.eformEmbed+"/"+item.templateFileNo+"___"+deliverableType+"?userId="+userId+"&userEmail="+userEmail+"&code="+referenceUid+"&dossierStatus="+dossierStatus+"&dossierSubStatus="+dossierSubStatus+"&tp="+templateNo;console.log("urlEmbed",urlEmbed),setTimeout((function(){document.getElementById("formAlpaca"+item.partNo+vm.id+"embed").src=urlEmbed}),300)}else item.embed=!1,vm.active=!1,vm.active=!0,vm.$store.dispatch("loadFormData",item).then((function(resData){var formScript,formData;window.$("#formAlpaca"+item.partNo+vm.id).empty(),formScript=item.formScript?eval("("+item.formScript+")"):{},formData=resData?eval("("+resData+")"):{},formData.dossierId_hidden=vm.detailDossier.dossierId,formData.dossierStatus_hidden=vm.detailDossier.dossierStatus,formData.dossierSubStatus_hidden=vm.detailDossier.dossierSubStatus,formData.fileTemplateNo_hidden=item.templateFileNo,formData.deliverableType_hidden=item.deliverableType,formData.userEmailAddress_hidden=1===vm.originality?vm.userLoginInfomation.applicantContactEmail:vm.userLoginInfomation.employeeEmail,formData.referenceUid=vm.detailDossier.referenceUid,console.log("formDataMC",formData),formScript.data=formData,window.$('div[id="formAlpaca'+item.partNo+vm.id+'"]').alpaca(formScript)}))}))}))})))})),vm.createFiles[index].daKhai=!1)},previewFileEfom:function(t,e){var a=this;a.dossierFilesItems.forEach((function(e){e.dossierPartNo===t.partNo&&e.eForm&&(e["dossierId"]=a.detailDossier.dossierId,a.dialogPDFLoading=!0,a.documentType="Tài liệu khai trực tuyến",a.dialogPDF=!0,e["id"]=a.id,a.$store.dispatch("putAlpacaForm",e).then((function(t){setTimeout((function(){a.$store.dispatch("viewFile",e).then((function(t){a.dialogPDFLoading=!1,document.getElementById("dialogPDFPreview"+a.id).src=t}))}),1e3)})).catch((function(t){toastr__WEBPACK_IMPORTED_MODULE_0___default.a.clear(),toastr__WEBPACK_IMPORTED_MODULE_0___default.a.error("Yêu cầu của bạn thực hiện thất bại.")})))}))},showConfigSignService:function(){vgca_show_config()},viewFileKySo:function(t,e){},signAction:function(t,e,a){var i=this;if(console.log("file ký duyệt",t),t["eForm"]&&t["daKhai"]||!t["eForm"]){var o=function(t){var o=JSON.parse(t);if(0===o.Status){var n;try{n=JSON.parse(o.FileServer)}catch(h){}if(console.log("dataSigned",n),toastr__WEBPACK_IMPORTED_MODULE_0___default.a.clear(),toastr__WEBPACK_IMPORTED_MODULE_0___default.a.success("Tài liệu đã được ký duyệt"),a){for(var s="",r=0;r<i.dossierFilesItems.length;r++)if(i.dossierFilesItems[r]["dossierPartNo"]===a&&i.dossierFilesItems[r]["eForm"]){s=r;break}i.dossierFilesItems[s].isSigned=!0,i.dossierFilesItems[s].pdfSigned=n?n.url:"",i.dossierFilesItems[s].fileEntryId=n?n.fileEntryId:"",i.createFiles[e]["editForm"]?(i.createFiles[e]["editForm"]=!1,setTimeout((function(){document.getElementById("displayPDF"+a+i.id).src=n.url}),200)):setTimeout((function(){document.getElementById("displayPDF"+a+i.id).src=n.url}),200),console.log("indexFile",i.dossierFilesItems)}else i.dossierFilesItems[e].isSigned=!0,i.dossierFilesItems[e].pdfSigned=n?n.url:"",i.dossierFilesItems[e].fileEntryId=n?n.fileEntryId:"";var c=[];if(i.dossierFilesItems.length>0)for(var l=function(t){var e=i.createFiles.filter((function(e){return String(e.partNo)===String(i.dossierFilesItems[t]["dossierPartNo"])}));e&&e.length>0&&c.push(i.dossierFilesItems[t])},d=0;d<i.dossierFilesItems.length;d++)l(d);var u={dossierId:i.detailDossier["dossierId"],createFiles:c};i.$store.commit("setCreateFileSigned",u)}else o.Message?(toastr__WEBPACK_IMPORTED_MODULE_0___default.a.clear(),toastr__WEBPACK_IMPORTED_MODULE_0___default.a.error(o.Message)):(toastr__WEBPACK_IMPORTED_MODULE_0___default.a.clear(),toastr__WEBPACK_IMPORTED_MODULE_0___default.a.error("Ký duyệt không thành công"))},n={};n["FileUploadHandler"]=window.themeDisplay.getPortalURL()+"/o/rest/v2/vgca/fileupload",n["SessionId"]="",n["FileName"]=window.themeDisplay.getPortalURL()+"/o/rest/v2/dossiers/"+i.detailDossier["dossierId"]+"/files/"+t["referenceUid"]+"/preview.pdf";var s=JSON.stringify(n);vgca_sign_approved(s,o)}else toastr__WEBPACK_IMPORTED_MODULE_0___default.a.clear(),toastr__WEBPACK_IMPORTED_MODULE_0___default.a.error("Chưa có tài liệu ký duyệt")},deleteSingleFile:function(t,e,a){var i=this,o=confirm("Bạn có muốn xóa?");o&&(i.thaoTacGop?(i.dossierFilesItems=i.dossierFilesItems.filter((function(e){return e.createDate!==t.createDate})),i.createFiles[a]["filesAttach"]=i.createFiles[a]["filesAttach"].filter((function(e){return e.createDate!==t.createDate})),console.log("createFilesAttachThaoTacGop123",i.createFiles)):(t["dossierId"]=i.detailDossier.dossierId,i.$store.dispatch("deleteDossierFile",t).then((function(a){i.fileViews.splice(e,1),i.partView=t.dossierPartNo,i.$store.dispatch("loadDossierFiles",i.detailDossier.dossierId).then((function(t){i.dossierFilesItems=t,i.createFileSigned(),i.createFiles=i.mergeDossierTemplateVsDossierFiles(i.createFiles,i.dossierFilesItems)}))})).catch((function(t){toastr__WEBPACK_IMPORTED_MODULE_0___default.a.clear(),toastr__WEBPACK_IMPORTED_MODULE_0___default.a.error("Yêu cầu của bạn thực hiện thất bại.")}))))},viewFile:function(t){var e=this,a=this;a.dossierFilesItems.forEach((function(i){i["dossierId"]=a.detailDossier.dossierId,i.dossierPartNo===t.partNo&&e.$store.dispatch("viewFile",i)}))},viewFileAlpaca:function(t){var e=this,a=0;e.loadingApacal=!0;var i=function i(){setTimeout((function(){e.$store.dispatch("viewFile",t).then((function(o){"pending"===o&&a<=10?(a+=1,i()):a>10?e.loadingApacal=!1:(e.loadingApacal=!1,setTimeout((function(){document.getElementById("displayPDF"+t.dossierPartNo+e.id).src=o}),100))})).catch((function(){e.loadingApacal=!1}))}),1e3)};i()},viewFile2:function(t,e){var a=this;if(console.log("fileView",a.dossierFilesItems[e]),"doc"===t.fileType||"docx"===t.fileType||"xlsx"===t.fileType||"xls"===t.fileType||"zip"===t.fileType||"rar"===t.fileType||"txt"===t.fileType){var i=a.initDataResource.dossierApi+"/"+a.detailDossier.dossierId+"/files/"+t.referenceUid;window.location.assign(i)}else a.dialogPDFLoading=!0,a.documentType="Tài liệu đính kèm",a.dialogPDF=!0,t["dossierId"]=a.detailDossier.dossierId,"plugin"===a.esignType&&a.dossierFilesItems[e]["isSigned"]?(a.dialogPDFLoading=!1,document.getElementById("dialogPDFPreview"+a.id).src=a.dossierFilesItems[e]["pdfSigned"]):a.$store.dispatch("viewFile",t).then((function(t){a.dialogPDFLoading=!1,document.getElementById("dialogPDFPreview"+a.id).src=t}))},viewFileWithPartNo:function(t){var e=this;if(e.dossierFilesItems){var a=e.dossierFilesItems.filter((function(e){return e.dossierPartNo===t.partNo&&!e.eForm}));if(!a)return;e.fileViews=a,e.partView!==t.partNo?(e.stateView=!0,e.partView=t.partNo):(e.stateView=!e.stateView,e.partView=t.partNo)}},checkStyle:function(t){return"calc(100% - 140px)"},cancelDialog:function(){var t=this;t.dialogAddOtherTemp=!1,t.progressUploadPart=""},addFileOther:function(t){var e=this;e.dialogAddOtherTemp=!0,e.stateAddFileOther=!0,e.dossierTemplatesItemSelect=t},changeDisplayName:function(t,e){var a=this,i={dossierId:a.detailDossier.dossierId,value:value};a.$store.dispatch("changeDisplayNameFile",i).then((function(t){a.fileViews[e].displayName=t.displayName,a.stateEdit=!1})).catch((function(t){console.log("error")}))},validCreateFileTemplate:function(){var t=this;if(t.createFiles.length>0){for(var e=0;e<t.createFiles.length;e++)if(t.createFiles[e]["required"]&&!t.createFiles[e]["daKhai"]){var a="Chú ý :"+t.createFiles[e].partName+" là thành phần bắt buộc!";return toastr__WEBPACK_IMPORTED_MODULE_0___default.a.error(a),!1}return!0}return!0},getDossierIntoGroup:function(t){var e=this,a={groupDossierId:t};e.dossierIntoGroup=[],e.$store.dispatch("getDossiersIntoGroup",a).then((function(t){e.dossierIntoGroup=t,e.dossierIntoGroup=e.dossierIntoGroup.filter((function(t){return String(t["stepCode"])===String(e.detailDossier["stepCode"])&&String(t["dossierId"])!==String(e.detailDossier["dossierId"])}))}))},checkIsSigned:function(t){var e=this;if(e.createFileSignedSync){var a=e.createFileSignedSync["createFiles"].filter((function(e){return e.dossierFileId===t}));return a.length>0&&a[0]}return!1},createFileSigned:function(t){var e=this;e.dossierFilesItems.forEach((function(a,i){if(e.createFileSignedSync&&e.detailDossier["dossierId"]===e.createFileSignedSync["dossierId"]){var o=e.checkIsSigned(a["dossierFileId"]);o&&"update"!==t?(e.dossierFilesItems[i]["isSigned"]=o["isSigned"],e.dossierFilesItems[i]["fileEntryId"]=o["fileEntryId"],e.dossierFilesItems[i]["pdfSigned"]=o["pdfSigned"]):(e.dossierFilesItems[i]["isSigned"]=!1,e.dossierFilesItems[i]["fileEntryId"]="",e.dossierFilesItems[i]["pdfSigned"]="")}else e.dossierFilesItems[i]["isSigned"]=!1,e.dossierFilesItems[i]["fileEntryId"]="",e.dossierFilesItems[i]["pdfSigned"]=""}));var a=[];if(e.dossierFilesItems.length>0)for(var i=function(t){var i=e.createFiles.filter((function(a){return String(a.partNo)===String(e.dossierFilesItems[t]["dossierPartNo"])}));i&&i.length>0&&a.push(e.dossierFilesItems[t])},o=0;o<e.dossierFilesItems.length;o++)i(o);var n={dossierId:e.detailDossier["dossierId"],createFiles:a};console.log("fileSignedSync",n),e.$store.commit("setCreateFileSigned",n)},addFileToDossier:function(){var t=this,e=t.dossierIntoGroupSelect.map((function(t){return t.dossierId})).toString(),a=t.filesAdd.map((function(t){return t.dossierFileId})).toString(),i={dossierIds:e,dossierFileId:a};t.$store.dispatch("uploadFileDossierGroup",i).then((function(e){toastr__WEBPACK_IMPORTED_MODULE_0___default.a.success("Đính kèm tài liệu thành công"),t.dialogSelectDosier=!1,t.filesAdd=[],t.$store.commit("setSelectDossierGroup",[])}))},attachOtherDossier:function(t){var e=this;e.filesAdd=[t],e.dialogSelectDosier=!0},cancelAddFile:function(){var t=this;t.dialogSelectDosier=!1,t.filesAdd=[],t.$store.commit("setSelectDossierGroup",[])},confirmAction:function(t){var e=this;e.dialogConfirm=!1,e.dialogSelectDosier=!0},getCreateFileAttach:function(){var t=this;return t.createFiles},getCurentDateTime:function(){var t=new Date;return"".concat(t.getDate().toString().padStart(2,"0"),"/").concat((t.getMonth()+1).toString().padStart(2,"0"),"/").concat(t.getFullYear()," | ").concat(t.getHours().toString().padStart(2,"0"),":").concat(t.getMinutes().toString().padStart(2,"0"))},getDocumentTypeIcon:function(t){var e="doc,docx",a="xls,xlsx",i="png,jpg,jpeg";return t?e.indexOf(t.toLowerCase())>=0?{icon:"fas fa fa-file-word-o",color:"blue",size:14}:a.indexOf(t.toLowerCase())>=0?{icon:"fas fa fa-file-excel-o",color:"green",size:14}:"pdf"===t.toLowerCase()?{icon:"fa fa-file-pdf-o",color:"red",size:14}:i.indexOf(t.toLowerCase())>=0?{icon:"fas fa fa-file-image-o",color:"primary",size:14}:{icon:"fas fa fa-paperclip",color:"",size:14}:{icon:"attach_file",color:"primary",size:14}}}}},e722:function(t,e,a){"use strict";var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[t.showTotal?a("div",{style:t.viewMobile?"":"text-align: left;position: absolute;line-height: 46px;"},[t._v("Tổng số "),a("span",{staticClass:"text-bold primary--text"},[t._v(t._s(t.total))]),t._v(" "+t._s(t.nameRecord)+". ")]):t._e(),t.total>0?a("div",{staticClass:"vue-tiny-pagination pagination layout",style:t.viewMobile?"":"justify-content: flex-end; -webkit-justify-content: flex-end;"},[t.showLimit?a("div",{staticClass:"pr-2 flex",staticStyle:{width:"120px"}},[t._v("\n      Số hồ sơ mỗi trang:\n    ")]):t._e(),t.showLimit?a("div",{staticClass:"pr-3 xs4 sm2 flex",staticStyle:{"max-width":"70px !important"}},[a("v-autocomplete",{attrs:{items:t.limits},on:{input:t.onLimitChange},model:{value:t.numberPerPage,callback:function(e){t.numberPerPage=e},expression:"numberPerPage"}})],1):t._e(),a("div",{staticClass:"pr-3 xs4 sm2 flex"},[a("v-autocomplete",{attrs:{items:t.totalPagesData,"item-text":"text","item-value":"value"},on:{input:t.goToPage},model:{value:t.currentPage,callback:function(e){t.currentPage=e},expression:"currentPage"}})],1),a("ul",{staticClass:"tiny-pagination",class:t.customClass},[a("li",{staticClass:"page-item",class:t.classFirstPage},[a("button",{staticClass:"pagination__navigation",class:t.classFirstPage,on:{click:function(e){return e.preventDefault(),t.lastPageLast(e)}}},[a("i",{staticClass:"material-icons icon",attrs:{"aria-hidden":"true"}},[t._v("first_page")])])]),a("li",{staticClass:"page-item",class:t.classFirstPage},[a("button",{staticClass:"pagination__navigation",class:t.classFirstPage,staticStyle:{"border-left":"0"},on:{click:function(e){return e.preventDefault(),t.lastPage(e)}}},[a("i",{staticClass:"material-icons icon",attrs:{"aria-hidden":"true"}},[t._v("chevron_left")])])]),a("li",{staticClass:"page-item",staticStyle:{"margin-right":"0"}},[a("button",{staticClass:"pagination__navigation pagination__navigation--disabled text-bold primary--text",staticStyle:{"border-right":"0","border-left":"0"}},[t._v("\n          "+t._s(t.titlePage)+"\n        ")])]),a("li",{staticClass:"page-item",class:t.classLastPage,staticStyle:{"margin-right":"0"}},[a("button",{staticClass:"pagination__navigation",class:t.classLastPage,staticStyle:{"border-left":"0"},on:{click:function(e){return e.preventDefault(),t.nextPage(e)}}},[a("i",{staticClass:"material-icons icon",attrs:{"aria-hidden":"true"}},[t._v("chevron_right")])])]),a("li",{staticClass:"page-item",class:t.classLastPage},[a("button",{staticClass:"pagination__navigation",class:t.classLastPage,on:{click:function(e){return e.preventDefault(),t.nextPageLast(e)}}},[a("i",{staticClass:"material-icons icon",attrs:{"aria-hidden":"true"}},[t._v("last_page")])])])])]):t._e()])},o=[],n=a("9029"),s="TinyPagination",r={name:s,props:{total:{type:Number,required:!0},nameRecord:{type:String,default:"hồ sơ"},page:{type:Number,default:1},numberPerPage:{type:Number,default:15},lang:{type:String,default:"en"},customClass:{type:String},limits:{type:Array,default:function(){return[15,30,50,100]}},showLimit:{type:Boolean,default:!1},showTotal:{type:Boolean,default:!0}},data:function(){return{version:"0.2.1",currentPage:1,translations:{en:{prev:"Previous",title:"Page",next:"Next"}},availableLanguages:["en"]}},created:function(){this.currentPage=this.page},watch:{page:function(t){this.currentPage=parseInt(t)}},computed:{translation:function(){return this.availableLanguages.includes(this.lang)?this.translations[this.lang]:this.translations["en"]},totalPages:function(){return Math.ceil(this.total/this.numberPerPage)},totalPagesData:function(){for(var t=[],e={},a=1;a<=this.totalPages;++a)e={value:a,text:"Trang "+a},t.push(e);return t},titlePage:function(){return"".concat(this.currentPage)},classFirstPage:function(){return{"c-not-allowed pagination__navigation--disabled":1===this.currentPage}},classLastPage:function(){return{"c-not-allowed pagination__navigation--disabled":this.currentPage===this.totalPages}},viewMobile:function(){return n["isMobile"]}},methods:{nextPage:function(){this.currentPage!==this.totalPages&&(this.currentPage+=1,this.$emit("tiny:change-page",{page:this.currentPage,numberPerPage:this.numberPerPage}))},lastPage:function(){this.currentPage>1&&(this.currentPage-=1,this.$emit("tiny:change-page",{page:this.currentPage,numberPerPage:this.numberPerPage}))},nextPageLast:function(){this.currentPage=this.totalPages,this.$emit("tiny:change-page",{page:this.totalPages,numberPerPage:this.numberPerPage})},lastPageLast:function(){this.currentPage=1,this.$emit("tiny:change-page",{page:1,numberPerPage:this.numberPerPage})},goToPage:function(){this.$emit("tiny:change-page",{page:this.currentPage,numberPerPage:this.numberPerPage})},onLimitChange:function(){this.currentPage=1,this.$emit("tiny:change-page",{page:1,numberPerPage:this.numberPerPage})}}},c=r,l=a("2877"),d=a("6544"),u=a.n(d),h=a("c6a6"),p=Object(l["a"])(c,i,o,!1,null,null,null);e["a"]=p.exports;u()(p,{VAutocomplete:h["a"]})},eff4:function(module,__webpack_exports__,__webpack_require__){"use strict";var jquery__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("1157"),jquery__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(jquery__WEBPACK_IMPORTED_MODULE_0__),toastr__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("854a"),toastr__WEBPACK_IMPORTED_MODULE_1___default=__webpack_require__.n(toastr__WEBPACK_IMPORTED_MODULE_1__),_Comment_vue__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("4ea3"),_form_xu_ly_ThongTinCoBanHoSo_vue__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("1136"),_form_xu_ly_PhanCongNguoiThucHien_vue__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("7121"),_form_xu_ly_TraKetQua_vue__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("c23d"),_form_xu_ly_FeeDetail_vue__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("f374"),_ChiTietThanhToan_vue__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__("cb0a"),_form_xu_ly_ThucHienThanhToanDienTu_vue__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__("fc7b"),_form_xu_ly_KyPheDuyetTaiLieu_vue__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__("4a3a"),_form_xu_ly_YkienCanBoThucHien_vue__WEBPACK_IMPORTED_MODULE_10__=__webpack_require__("87c1"),_form_xu_ly_TaoTaiLieuKetQuaBQP_vue__WEBPACK_IMPORTED_MODULE_11__=__webpack_require__("9724"),_form_xu_ly_FormBoSungThongTinNgan_vue__WEBPACK_IMPORTED_MODULE_12__=__webpack_require__("d80f"),_TiepNhan_TiepNhanHoSo_ThanhPhanHoSoNew_vue__WEBPACK_IMPORTED_MODULE_13__=__webpack_require__("6e92"),_TiepNhan_TaiLieuChungThuc_vue__WEBPACK_IMPORTED_MODULE_14__=__webpack_require__("4626"),_form_xu_ly_EditDate_vue__WEBPACK_IMPORTED_MODULE_15__=__webpack_require__("0838"),_form_xu_ly_ExtendDateEdit_vue__WEBPACK_IMPORTED_MODULE_16__=__webpack_require__("26ed"),_HoSoLienThong_vue__WEBPACK_IMPORTED_MODULE_17__=__webpack_require__("3677"),_form_xu_ly_PhanCongLai_vue__WEBPACK_IMPORTED_MODULE_18__=__webpack_require__("885b"),_form_xu_ly_ThongTinGuiBuuChinh_vue__WEBPACK_IMPORTED_MODULE_19__=__webpack_require__("8bf2"),_props$components$dat;function _defineProperty(t,e,a){return e in t?Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}mermaid.initialize({theme:"forest",startOnLoad:!1}),__webpack_exports__["a"]=(_props$components$dat={props:["index","id"],components:{comment:_Comment_vue__WEBPACK_IMPORTED_MODULE_2__["a"],"thong-tin-co-ban-ho-so":_form_xu_ly_ThongTinCoBanHoSo_vue__WEBPACK_IMPORTED_MODULE_3__["a"],"phan-cong":_form_xu_ly_PhanCongNguoiThucHien_vue__WEBPACK_IMPORTED_MODULE_4__["a"],"tra-ket-qua":_form_xu_ly_TraKetQua_vue__WEBPACK_IMPORTED_MODULE_5__["a"],"thu-phi":_form_xu_ly_FeeDetail_vue__WEBPACK_IMPORTED_MODULE_6__["a"],"thanh-toan-dien-tu":_form_xu_ly_ThucHienThanhToanDienTu_vue__WEBPACK_IMPORTED_MODULE_8__["a"],"ky-duyet":_form_xu_ly_KyPheDuyetTaiLieu_vue__WEBPACK_IMPORTED_MODULE_9__["a"],"y-kien-can-bo":_form_xu_ly_YkienCanBoThucHien_vue__WEBPACK_IMPORTED_MODULE_10__["a"],"tai-lieu-ket-qua":_form_xu_ly_TaoTaiLieuKetQuaBQP_vue__WEBPACK_IMPORTED_MODULE_11__["a"],"form-bo-sung-thong-tin":_form_xu_ly_FormBoSungThongTinNgan_vue__WEBPACK_IMPORTED_MODULE_12__["a"],"thanh-phan-ho-so":_TiepNhan_TiepNhanHoSo_ThanhPhanHoSoNew_vue__WEBPACK_IMPORTED_MODULE_13__["a"],"tai-lieu-chung-thuc":_TiepNhan_TaiLieuChungThuc_vue__WEBPACK_IMPORTED_MODULE_14__["a"],"ngay-hen-tra":_form_xu_ly_EditDate_vue__WEBPACK_IMPORTED_MODULE_15__["a"],"thong-tin-buu-chinh":_form_xu_ly_ThongTinGuiBuuChinh_vue__WEBPACK_IMPORTED_MODULE_19__["a"],"ngay-gia-han":_form_xu_ly_ExtendDateEdit_vue__WEBPACK_IMPORTED_MODULE_16__["a"],"chi-tiet-thanh-toan":_ChiTietThanhToan_vue__WEBPACK_IMPORTED_MODULE_7__["a"],"ho-so-lien-thong":_HoSoLienThong_vue__WEBPACK_IMPORTED_MODULE_17__["a"],"phan-cong-lai":_form_xu_ly_PhanCongLai_vue__WEBPACK_IMPORTED_MODULE_18__["a"]},data:function(){return{validTraoDoi:!1,isMobile:!1,inputTypes:[1,3,6],inputTypesLienThong:[1,2,3,6,7],outputTypes:[2,7],actionIdCurrent:0,validateAction:!0,btnIndex:-1,processActionCurrent:0,activeTab:"tabs-1",activeTab2:"",btnDossierDynamics:[],btnStepsDynamics:[],loadingAction:!1,indexAction:-1,indexActionStep:-1,dossierId:"",className:"org.opencps.dossiermgt.model.Dossier",dossierFilesItems:[],dossierTemplatesItems:[],fileViews:[],showContactDetail:!1,listHistoryProcessing:[],dossierTemplatesTN:[],dossierTemplatesKQ:[],thongTinChiTietHoSo:{},dialogPDF:!1,dialogPDFLoading:!1,loadingAlpacajsForm:!1,nextActions:[],createFiles:[],returnFiles:[],processSteps:[],documents:[],payments:"",dossierActions:[],dossierImportActions:[],reAsignUsers:[],showReasign:!1,thaoTacUyQuyen:!1,thaoTacPhanCongLai:!1,itemselect:"",dossierSyncs:[],stepModel:null,actionNote:"",actionsSubmitLoading:!1,showThongTinCoBanHoSo:!1,showYkienCanBoThucHien:!1,showFormBoSungThongTinNgan:!1,showPhanCongNguoiThucHien:!1,showTaoTaiLieuKetQua:!1,showKyPheDuyetTaiLieu:!1,dataEsign:"",filesPdfSign:[{fileName:"Tài liệu ký duyệt 001",time:"20/08/2019 11:20:30",url:"http://103.101.163.17:8080/documents/35166/0/testKS.pdf",fileSigned:!1},{fileName:"Tài liệu ký duyệt 002",time:"21/08/2019 10:10:13",url:"http://103.101.163.17:8080/documents/35166/0/testKS.pdf",fileSigned:!1}],typeEsign:"",showTraKetQua:!1,showThanhPhanLienThong:!1,showThuPhi:!1,showPostalService:!1,showThanhToanDienTu:!1,showEditDate:!1,showExtendDateEdit:!1,checkInput:0,viaPortalDetail:0,showThucHienThanhToanDienTu:!1,dossierItemDialogPick:"",itemDialogPick:"",resultDialogPick:"",indexDialogPick:"",userNote:0,partView:"",stateView:!1,paymentDetail:"",paymentProfile:"",payment_type:0,type_assign:0,assign_items:[],roleGroupPhanCong:[],btnStateVisible:!0,extendDateEdit:"",typeExtendDate:"",dueDateEdit:"",receiveDateEdit:"",dialogActionProcess:!1,rollbackable:!1,configNote:null,actionSpecial:!1,btnPlugins:[],loadingPlugin:!1,listDossierFiles:[],detailPreAction:"",showMenuActionKhac:!0,headers:[{text:"#",align:"center",sortable:!1},{text:"Vai trò",align:"center",sortable:!1,class:"vaitro_column"},{text:"Công việc",align:"center",sortable:!1,class:"congviec_column"},{text:"Thời hạn quy định",align:"center",sortable:!1,class:"thoihanquydinh_column"},{text:"Ngày bắt đầu",align:"center",sortable:!1,class:"ngaybatdau_column"},{text:"Người thực hiện",align:"center",sortable:!1,class:"nguoithuchien_column"},{text:"Kết quả",align:"center",sortable:!1,class:"ketqua_column"}],headersSequencyImport:[{text:"#",align:"center",sortable:!1},{text:"Công việc",align:"center",sortable:!1,class:"congviec_column"},{text:"Người thực hiện",align:"center",sortable:!1,class:"nguoithuchien_column"},{text:"Ngày bắt đầu",align:"center",sortable:!1,class:"ngaybatdau_column"},{text:"Ngày kết thúc",align:"center",sortable:!1,class:"ngayketthuc_column"},{text:"Ghi chú",align:"center",sortable:!1,class:"ghichu_column"}],headerSyncs:[{text:"Nhật kí hồ sơ",align:"center",sortable:!1,class:"nhatki_column"},{text:"Trao đổi trực tuyến",align:"center",sortable:!1,class:"traodoitructuyen_column"}],filterDossierActionItems:[{text:"Tất cả",value:""},{text:"Có thao tác thực hiện",value:"1"},{text:"Không thao tác thực hiện",value:"2"}],filterDossierAction:null,filterDossierSyncItems:[{text:"Tất cả",value:"1,2"},{text:"Thông tin trao đổi",value:"2"}],filterDossierSync:null,messageChat:"",isCallBack:!0,printDocument:!1,printInvoicefilePayment:!1,alertObj:{icon:"check_circle",color:"success",message:"Thực hiện thành công!"},stateViewResult:!0,stateViewDocument:!0,listLienThong:[],modelPlugin:null,dialogPlugin:!1,dialog_reAsign:!1,loadingMermaidgraph:!1,typeTienTrinh:1,votingItems:[],loadingVoting:!1,titleDialogPdf:"Tài liệu đính kèm",viewScript:!1,loadingForm:!1,hasPreviewSync:!1,isNotarization:!1,sequencyDossierImport:!1,mauCongVan:"",reRender:!0,activeReload:!1,rules:{required:function(t){return!!t||"Thông tin bắt buộc"},email:function(t){t=t.trim();var e=/^(([^<>()[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/;return e.test(t)||"Địa chỉ Email không hợp lệ"},passWord:function(t){var e=/^(?![0-9]{6,})[0-9a-zA-Z]{6,}$/;return e.test(t)||"Gồm các ký tự 0-9, a-z và ít nhất 6 ký tự"},telNo:function(t){var e=/^([0-9]{0,})$/;return"string"===typeof t&&(t=t.trim()),e.test(t)||"Gồm các ký tự 0-9"},varchar100:function(t){return!t||(t=String(t).trim(),t.length<=100||"Không được nhập quá 100 ký tự")},varchar255:function(t){return!t||(t=String(t).trim(),t.length<=255||"Không được nhập quá 255 ký tự")},varchar500:function(t){return!t||(t=String(t).trim(),t.length<=500||"Không được nhập quá 500 ký tự")},varchar5000:function(t){return!t||(t=String(t).trim(),t.length<=5e3||"Không được nhập quá 5000 ký tự")}}}},computed:{loading:function(){return this.$store.getters.loading},visibleDoAction:function(){return this.$store.getters.getVisibleDoAction},originality:function(){var t=this;return t.getOriginality()},dataCreateFile:function(){return this.$store.getters.getDataCreateFile},getCheckInput:function(){return this.$store.getters.getCheckInput},usersNextAction:function(){return this.$store.getters.getUsersNextAction},stepOverdueNextAction:function(){return this.$store.getters.getStepOverdueNextAction},currentUser:function(){return this.$store.getters.loadingInitData.user},kysoSuccess:function(){return this.$store.getters.kysoSuccess},menuConfigs:function(){return this.$store.getters.getMenuConfigsTodo},dossierTemplateLienThong:function(){return this.$store.getters.getDossierTemplateLienThong},createFileSignedSync:function(){return this.$store.getters.getCreateFileSigned}},beforeDestroy:function(){"undefined"!==typeof window&&window.removeEventListener("resize",this.onResize,{passive:!0})},mounted:function(){this.onResize(),window.addEventListener("resize",this.onResize,{passive:!0}),jquery__WEBPACK_IMPORTED_MODULE_0___default()("#m-navigation").css("display","none")},created:function created(){var vm=this;window.toastr=toastr__WEBPACK_IMPORTED_MODULE_1___default.a,vm.$nextTick((function(){if(jquery__WEBPACK_IMPORTED_MODULE_0___default()("#m-navigation").css("display","none"),vm.menuConfigs&&vm.menuConfigs[vm.index]["hasViewText"]){vm.viewScript=!0,vm.loadingForm=!0;var filter={menuGroup:vm.menuConfigs[vm.index]["id"]};vm.$store.dispatch("getScriptViewDetail",filter).then((function(data){var formScript,formData;vm.loadingForm=!1,formScript=eval("("+data+")"),vm.$store.dispatch("getDetailDossier",vm.id).then((function(t){vm.thongTinChiTietHoSo=t,formData=t,formScript.data=formData,window.$("#formScriptTemplate").alpaca(formScript)})).catch((function(){window.$("#formScriptTemplate").alpaca(formScript)}))})).catch((function(){vm.loadingForm=!1}))}else{vm.viewScript=!1,vm.initData(vm.id),vm.btnIndex=-1;var currentQuery=vm.$router.history.current.query;currentQuery.hasOwnProperty("activeTab")&&(vm.activeTab=currentQuery.activeTab,vm.btnIndex=currentQuery["btnIndex"],currentQuery.hasOwnProperty("actionSpecial")&&null!==currentQuery["actionSpecial"]&&void 0!==currentQuery["actionSpecial"]&&"undefined"!==currentQuery["actionSpecial"]&&(vm.actionSpecial=currentQuery["actionSpecial"]),vm.thongTinChiTietHoSo["dossierId"]=vm.id,vm.btnStateVisible=!0),vm.$store.commit("setKysoSuccess",!1)}}))},updated:function(){var t=this;t.$nextTick((function(){}))}},_defineProperty(_props$components$dat,"beforeDestroy",(function(){var t=jquery__WEBPACK_IMPORTED_MODULE_0___default()('meta[name="viewport"]');t.attr("content","initial-scale=1.0, width=device-width")})),_defineProperty(_props$components$dat,"watch",{$route:function(t,e){t.query},menuConfigs:function menuConfigs(val){var vm=this;if(console.log("menuconfig watch 123",vm.menuConfigs,vm.index),val)if(vm.menuConfigs&&vm.menuConfigs[vm.index]["hasViewText"]){vm.viewScript=!0,vm.loadingForm=!0;var filter={menuGroup:vm.menuConfigs[vm.index]["id"]};vm.$store.dispatch("getScriptViewDetail",filter).then((function(data){var formScript,formData;vm.loadingForm=!1,formScript=eval("("+data+")"),vm.$store.dispatch("getDetailDossier",vm.id).then((function(t){vm.thongTinChiTietHoSo=t,formData=t,formScript.data=formData,window.$("#formScriptTemplate").alpaca(formScript)})).catch((function(){window.$("#formScriptTemplate").alpaca(formScript)}))})).catch((function(){vm.loadingForm=!1}))}else{vm.initData(vm.id),vm.btnIndex=-1;var currentQuery=vm.$router.history.current.query;currentQuery.hasOwnProperty("activeTab")&&(vm.activeTab=currentQuery.activeTab,vm.btnIndex=currentQuery["btnIndex"],currentQuery.hasOwnProperty("actionSpecial")&&null!==currentQuery["actionSpecial"]&&void 0!==currentQuery["actionSpecial"]&&"undefined"!==currentQuery["actionSpecial"]&&(vm.actionSpecial=currentQuery["actionSpecial"]),vm.thongTinChiTietHoSo["dossierId"]=vm.id,vm.btnStateVisible=!0),vm.$store.commit("setKysoSuccess",!1)}},isMobile:function(t){var e=jquery__WEBPACK_IMPORTED_MODULE_0___default()('meta[name="viewport"]');t?e.attr("content",""):e.attr("content","initial-scale=1.0, width=device-width")},kysoSuccess:function(t){var e=this;t&&(e.loadingAction=!1,e.dialogActionProcess=!1,e.loadingActionProcess=!1,e.alertObj={icon:"check_circle",color:"success",message:"Thực hiện thành công!"},e.btnStateVisible=!1)},visibleDoAction:function(t){this.loadingActionProcess=!1}}),_defineProperty(_props$components$dat,"methods",{onResize:function(){var t=this,e=window.innerWidth<1264;t.isMobile=e},initData:function(t){var e=this;e.dossierId=t,e.activeTab2="tabs-2b",e.$store.dispatch("getDetailDossier",t).then((function(a){e.thongTinChiTietHoSo=a,e.thongTinChiTietHoSo.hasOwnProperty("dossierSyncState")&&"1"===String(e.thongTinChiTietHoSo.dossierSyncState)?(e.activeReload=!0,e.reloadDetailDossier()):e.activeReload=!1,e.loadDetailTempalte(),e.loadThanhToan(),e.loadHoSoLienThong(),e.getNextActions(),e.getPreAction(),a["dossierSubStatus"]&&e.$store.dispatch("pullBtnConfigStep",a).then((function(t){e.btnStepsDynamics=t,e.btnStepsDynamics.length>0&&(e.btnStepsDynamics=e.btnStepsDynamics.filter((function(t){return!t.hasOwnProperty("roleCode")||t.hasOwnProperty("roleCode")&&e.getUser(t.roleCode)}))),0!==e.btnStepsDynamics.filter((function(t){return"UPDATE"!==t.form})).length&&(e.showMenuActionKhac=!0)})),1===e.originality&&"done"===a["dossierStatus"]&&(e.activeTab2="tabs-1b",e.loadVoting()),1===e.originality&&"new"===a["dossierStatus"]&&(e.activeTab2="tabs-3b",e.loadDossierLogs()),3===e.originality&&e.runComment(),e.$store.dispatch("getListDossierFiles",t).then((function(t){e.listDossierFiles=t})),e.$store.dispatch("getServiceInfo",{serviceInfoId:a.serviceCode}).then((function(t){"TEST-CHUNG-THUC"===a.serviceCode?e.isNotarization=!0:(e.isNotarization=!1,e.$refs.thanhphanhoso&&e.$refs.thanhphanhoso.initData(a))}))}))},loadDetailTempalte:function(){var t=this,e={dossierTemplateNo:t.thongTinChiTietHoSo.dossierTemplateNo};t.$store.dispatch("loadDossierFormTemplates",e).then((function(e){t.mauCongVan=e["newFormScript"]&&e["newFormScript"].startsWith("MAU_CV_")?e["newFormScript"]:""}))},recountFileTemplates:function(){var t=this;t.dossierTemplatesItems.forEach((function(e){e.count=0,t.dossierFilesItems.forEach((function(t){e.partNo===t.dossierPartNo&&e.count++}))}))},runComment:function(){var t=this;t.$refs.comment&&t.$refs.comment.runComment()},goBack:function(){window.history.back()},viewFile:function(t){var e=this,a=this;a.dossierFilesItems.forEach((function(i){i["dossierId"]=a.thongTinChiTietHoSo.dossierId,i.dossierPartNo===t.partNo&&e.$store.dispatch("viewFile",i)}))},downloadFileLogs:function(t){var e=this,a={fileAttachId:t,dossierId:e.id};this.$store.dispatch("downloadFile",a).then((function(t){t&&(e.dialogPDFLoading=!1,e.dialogPDF=!0,document.getElementById("dialogPDFPreviewXl").src=t)}))},downloadFileDocument:function(t){var e=this,a={referenceUid:t,dossierId:e.id};e.$store.dispatch("downloadFileDocument",a).then((function(t){t&&(e.dialogPDFLoading=!1,e.dialogPDF=!0,document.getElementById("dialogPDFPreviewXl").src=t)}))},loadDossierActions:function(t){var e=this,a="";try{a=e.thongTinChiTietHoSo["submissionNote"]?JSON.parse(e.thongTinChiTietHoSo["submissionNote"]):""}catch(o){}if(a&&a.hasOwnProperty("dossierImport")&&a.dossierImport)e.sequencyDossierImport=!0,e.dossierImportActions=a["data"];else if(e.sequencyDossierImport=!1,e.thongTinChiTietHoSo.dossierId){var i={dossierId:e.thongTinChiTietHoSo.dossierId,stepType:t};e.$store.dispatch("loadDossierActions",i).then((function(t){if(t.data&&0!==t.data.length){for(var a=t.data,i=0;i<a.length;i++)if(a[i].hasOwnProperty("actions")&&null!==a[i]["actions"]&&void 0!==a[i]["actions"]&&!Array.isArray(a[i]["actions"])){var o=[];o.push(a[i]["actions"]),a[i]["actions"]=o}e.dossierActions=a}else if(e.thongTinChiTietHoSo["submissionNote"])try{JSON.parse(e.thongTinChiTietHoSo["submissionNote"]);var n=JSON.parse(e.thongTinChiTietHoSo["submissionNote"]).data;for(i=0;i<n.length;i++)if(n[i].hasOwnProperty("actions")&&null!==n[i]["actions"]&&void 0!==n[i]["actions"]&&!Array.isArray(n[i]["actions"])){var s=[];s.push(n[i]["actions"]),n[i]["actions"]=s}e.dossierActions=n}catch(r){}})).catch((function(){if(e.thongTinChiTietHoSo["submissionNote"])try{JSON.parse(e.thongTinChiTietHoSo["submissionNote"]);for(var t=JSON.parse(e.thongTinChiTietHoSo["submissionNote"]).data,a=0;a<t.length;a++)if(t[a].hasOwnProperty("actions")&&null!==t[a]["actions"]&&void 0!==t[a]["actions"]&&!Array.isArray(t[a]["actions"])){var i=[];i.push(t[a]["actions"]),t[a]["actions"]=i}e.dossierActions=t}catch(o){}}))}},loadMermaidgraph:function(t){var e=this;if(document.getElementById("mermaid_dossier").innerHTML="",e.thongTinChiTietHoSo.dossierId){var a={dossierId:e.thongTinChiTietHoSo.dossierId};e.loadingMermaidgraph=!0,e.$store.dispatch("loadMermaidgraph",a).then((function(t){e.loadingMermaidgraph=!1,mermaid.render("theGraph",t,(function(t){document.getElementById("mermaid_dossier").innerHTML=t})),setTimeout((function(){window.svgPanZoom("#theGraph",{zoomEnabled:!0,controlIconsEnabled:!0,fit:!0,center:!0,minZoom:.1})}),500)})).catch((function(){e.loadingMermaidgraph=!1}))}},loadDossierSyncs:function(t){var e=this;if(e.thongTinChiTietHoSo.dossierId){var a={dossierId:e.thongTinChiTietHoSo.dossierId,info:"1,2"};e.$store.dispatch("loadDossierSyncs",a).then((function(t){null!==t&&void 0!==t&&"undefined"!==t?Array.isArray(t)?e.dossierSyncs=t:e.dossierSyncs=[t]:e.dossierSyncs=[]}))}},changeTypeTienTrinh:function(t){var e=this;2===t&&setTimeout((function(){e.loadMermaidgraph()}),200)},previewTienTrinh:function(){var t=this,e={dossierId:t.thongTinChiTietHoSo.dossierId};t.dialogPDFLoading=!0,t.$store.dispatch("previewTienTrinh",e).then((function(e){t.dialogPDFLoading=!1,t.titleDialogPdf="Tiến trình thụ lý",t.dialogPDF=!0,document.getElementById("dialogPDFPreviewXl").src=e})).catch((function(){t.dialogPDFLoading=!1}))},loadDossierLogs:function(t){var e=this,a={dossierId:e.thongTinChiTietHoSo.dossierId},i=e.$store.dispatch("getListHistoryProcessingItems",a);i.then((function(t){e.listHistoryProcessing=[],e.listHistoryProcessing=t}))},deleteDossierFileVersion:function(t){var e=this;t["dossierId"]=e.thongTinChiTietHoSo.dossierId,e.$store.dispatch("deleteAttackFiles",t).then((function(t){}))},pickFile:function(t){document.getElementById("file"+t.partNo).click()},postChat:function(){var t=this;if(t.$refs.formTraoDoi.validate())if(t.messageChat){var e={dossierId:t.thongTinChiTietHoSo.dossierId,actionCode:3===t.originality?"8200":"8100",actionNote:t.messageChat,actionUser:""};t.$store.dispatch("postAction",e).then((function(e){t.loadDossierSyncs()})),t.messageChat=""}else toastr__WEBPACK_IMPORTED_MODULE_1___default.a.error("Chưa nhập dữ liệu trao đổi");else toastr__WEBPACK_IMPORTED_MODULE_1___default.a.error("Dữ liệu trao đổi không hợp lệ")},getNextAction:function(t){var e=this;if(e.actionIdCurrent=t.processActionId,1===t.type){var a={dossierId:e.thongTinChiTietHoSo.dossierId,actionId:t.processActionId};e.$store.dispatch("getNextAction",a).then((function(t){e.stepModel=t})).catch((function(t){e.stepModel=null}))}else{var i={dossierId:e.thongTinChiTietHoSo.dossierId,actionId:t.processActionId};e.$store.dispatch("loadPlugin",i).then((function(t){e.stepModel=t})).catch((function(t){e.stepModel=null}))}},processPullBtnplugin:function(t,e){var a=this,i={dossierId:a.thongTinChiTietHoSo.dossierId,processPluginId:t.processPluginId};a.dialogPlugin=!0,a.loadingPlugin=!0,a.$store.dispatch("loadPlugin",i).then((function(e){a.modelPlugin=e,a.modelPlugin["pluginName"]=t.pluginName,a.loadingPlugin=!1})).catch((function(t){a.modelPlugin=null,a.loadingPlugin=!1}))},processPullBtnDetailRouter:function(t,e,a,i){var o=this,n=!1;if(o.dossierId=t.dossierId,o.showYkienCanBoThucHien=!1,o.showFormBoSungThongTinNgan=!1,o.showPhanCongNguoiThucHien=!1,o.showTaoTaiLieuKetQua=!1,o.showKyPheDuyetTaiLieu=!1,o.showTraKetQua=!1,o.showThanhPhanLienThong=!1,o.showThuPhi=!1,o.showPostalService=!1,o.showThanhToanDienTu=!1,o.showEditDate=!1,o.showExtendDateEdit=!1,o.showThucHienThanhToanDienTu=!1,o.dossierItemDialogPick=t,o.itemDialogPick=e,o.resultDialogPick=a,o.indexDialogPick=i,o.userNote=0,a.hasOwnProperty("configNote")&&a.configNote&&null!==a.configNote&&void 0!==a.configNote&&"undefined"!==a.configNote)try{o.configNote=JSON.parse(a.configNote),o.configNote.confirm&&(n=!0)}catch(r){}if(null!==a&&void 0!==a&&"undefined"!==a&&(a.hasOwnProperty("userNote")||a.hasOwnProperty("extraForm")||a.hasOwnProperty("allowAssignUser")||a.hasOwnProperty("createFiles")||a.hasOwnProperty("eSignature")||a.hasOwnProperty("returnFiles")||a.hasOwnProperty("payment")||a.hasOwnProperty("checkInput")||a.hasOwnProperty("overdue")||a.hasOwnProperty("betimes")||a.hasOwnProperty("preoverdue"))){if(!a.hasOwnProperty("userNote")||1!==a.userNote&&"1"!==a.userNote&&2!==a.userNote&&"2"!==a.userNote||(n=!0,o.showYkienCanBoThucHien=!0,o.userNote=a.userNote),a.hasOwnProperty("extraForm")&&a.extraForm&&(n=!0,o.showFormBoSungThongTinNgan=!0),a.hasOwnProperty("allowAssignUser")&&0!==a.allowAssignUser&&(Array.isArray(a.toUsers)?o.assign_items=a.toUsers:o.assign_items=[a.toUsers],a.hasOwnProperty("postProcessStepRole")&&a.postProcessStepRole&&(Array.isArray(a.postProcessStepRole)?o.roleGroupPhanCong=a.postProcessStepRole:o.roleGroupPhanCong=[a.postProcessStepRole],o.roleGroupPhanCong=o.roleGroupPhanCong.map((function(t){return t=Object.assign(t,{assigned:0}),t}))),o.type_assign=a.allowAssignUser,n=!0,o.showPhanCongNguoiThucHien=!0),a.hasOwnProperty("createFiles")&&null!==a.createFiles&&void 0!==a.createFiles&&"undefined"!==a.createFiles&&(n=!0,Array.isArray(a.createFiles)?o.createFiles=a.createFiles:o.createFiles=[a.createFiles],o.showTaoTaiLieuKetQua=!0,a.hasOwnProperty("signatureType")&&"plugin"===a.signatureType&&(o.typeEsign=a.signatureType)),a.hasOwnProperty("eSignature")&&a.eSignature&&"plugin"!==a.signatureType&&(n=!0,o.showKyPheDuyetTaiLieu=!0,o.dataEsign=a,o.typeEsign=a.signatureType),a.hasOwnProperty("returnFiles")&&null!==a.returnFiles&&void 0!==a.returnFiles&&"undefined"!==a.returnFiles&&(n=!0,Array.isArray(a.returnFiles)?o.returnFiles=a.returnFiles:o.returnFiles=[a.returnFiles],o.showTraKetQua=!0),a.hasOwnProperty("dossierParts")&&null!==a.dossierParts&&void 0!==a.dossierParts&&"undefined"!==a.dossierParts&&(n=!0,Array.isArray(a.dossierParts)?o.dossierParts=a.dossierParts:o.dossierParts=[a.dossierParts],o.showThanhPhanLienThong=!0,setTimeout((function(){o.$refs.thanhphanhoso.initData(o.thongTinChiTietHoSo)}),200)),a.hasOwnProperty("preCondition")&&null!==a.preCondition&&void 0!==a.preCondition&&"undefined"!==a.preCondition&&a.preCondition.indexOf("sendViaPostal=1")>=0&&(n=!0,o.showPostalService=!0),a.hasOwnProperty("payment")&&null!==a.payment&&void 0!==a.payment&&"undefined"!==a.payment&&a.payment.requestPayment>0)if(3===a.payment.requestPayment||"3"===a.payment.requestPayment){n=!0,o.showThanhToanDienTu=!0;var s={dossierId:o.dossierId,referenceUid:t.referenceUid};o.$store.dispatch("loadDossierPayments",s).then((function(t){o.paymentProfile=t})).catch((function(t){}))}else n=!0,o.showThuPhi=!0,o.payments=a.payment,o.viaPortalDetail=t.viaPostal;a.hasOwnProperty("receiving")&&null!==a.receiving&&void 0!==a.receiving&&"undefined"!==a.receiving&&!0===a.receiving.editable&&(n=!0,o.showEditDate=!0,o.dueDateEdit=""!==a.receiving.dueDate&&0!==a.receiving.dueDate?new Date(a.receiving.dueDate):"",o.receiveDateEdit=a.receiving.receiveDate),a.hasOwnProperty("overdue")&&(n=!0,o.showExtendDateEdit=!0,o.extendDateEdit=a.overdue,o.typeExtendDate="overdue"),a.hasOwnProperty("preoverdue")&&(n=!0,o.showExtendDateEdit=!0,o.extendDateEdit=a.preoverdue,o.typeExtendDate="preoverdue"),a.hasOwnProperty("betimes")&&(n=!0,o.showExtendDateEdit=!0,o.extendDateEdit=a.betimes,o.typeExtendDate="betimes")}n?(o.loadingAction=!1,o.dialogActionProcess=!0,o.loadingActionProcess=!1):(o.loadingAction=!0,o.processAction(o.thongTinChiTietHoSo,e,a,i,!1))},processPullBtnDetail:function(t,e){var a=this;a.btnIndex=e,a.itemAction=t,a.actionIdCurrent=t.processActionId,a.processActionCurrent=t.processActionId;var i={dossierId:a.thongTinChiTietHoSo.dossierId,actionId:t.processActionId};a.dossierId=a.thongTinChiTietHoSo.dossierId,a.loadingAction=!0,a.dialogActionProcess=!1,a.loadingActionProcess=!0,a.$store.dispatch("processPullBtnDetail",i).then((function(i){a.loadingActionProcess=!1,a.processPullBtnDetailRouter(a.thongTinChiTietHoSo,t,i,e)})).catch((function(t){a.loadingAction=!1,a.loadingActionProcess=!1}))},btnActionEvent:function(t,e){var a=this;if(a.btnIndex=-1,a.itemAction=t,a.indexAction=e,t&&t.title?a.titleDialogPdf=t.title:a.titleDialogPdf="Tài liệu đính kèm",console.log("vm.titleDialogPdf++++++++++",a.titleDialogPdf),"UPDATE"===String(t.form)){var i=a.$router.history.current.query;i["template_no"]=a.thongTinChiTietHoSo.dossierTemplateNo,i["serviceCode"]=a.thongTinChiTietHoSo.serviceCode,a.$router.push({path:"/danh-sach-ho-so/"+a.index+"/ho-so/"+a.thongTinChiTietHoSo.dossierId+"/"+a.itemAction.form,query:i})}else if("ADD"===String(t.form))a.$router.push({path:"/danh-sach-ho-so/"+a.index+"/bo-sung-ho-so/"+a.thongTinChiTietHoSo.dossierId,query:a.$router.history.current.query});else if("COPY"===String(t.form))a.doCopy(a.thongTinChiTietHoSo,t,e);else if("CANCEL"===String(t.form))a.doCancel(a.thongTinChiTietHoSo,t,e);else if("PRINT_01"===String(t.form))a.doPrint01(a.thongTinChiTietHoSo,t,e);else if("PRINT_02"===String(t.form))a.doPrint02(a.thongTinChiTietHoSo,t,e);else if("PRINT_03"===String(t.form))a.doPrint03(a.thongTinChiTietHoSo,t,e);else if("GUIDE"===String(t.form));else if("PREVIEW"===String(t.form))a.doPreview(a.thongTinChiTietHoSo,t,e);else if("ACTIONS"===String(t.form));else if("DELETE"===String(t.form))a.doDeleteDossier(a.thongTinChiTietHoSo,t,e);else if("ROLLBACK_01"===String(t.form)){var o={dossierId:a.thongTinChiTietHoSo.dossierId,actionCode:9e3};a.doActionSpecial(o)}else if("ROLLBACK_02"===String(t.form)){var n={dossierId:a.thongTinChiTietHoSo.dossierId,actionCode:9e3};a.doActionSpecial(n)}else if("OVERDUE"===String(t.form)){a.btnIndex=8500;var s={actionCode:8500,dossierId:a.thongTinChiTietHoSo.dossierId,overdue:a.thongTinChiTietHoSo["extendDate"]?a.thongTinChiTietHoSo["extendDate"]:""};a.processPullBtnDetailRouter(a.thongTinChiTietHoSo,null,s,null)}else if("PREOVERDUE"===String(t.form)){a.btnIndex=8501;var r={actionCode:8501,dossierId:a.thongTinChiTietHoSo.dossierId,preoverdue:a.thongTinChiTietHoSo["extendDate"]?a.thongTinChiTietHoSo["extendDate"]:""};a.processPullBtnDetailRouter(a.thongTinChiTietHoSo,null,r,null)}else if("BETIMES"===String(t.form)){a.btnIndex=8400;var c={actionCode:8400,dossierId:a.thongTinChiTietHoSo.dossierId,betimes:a.thongTinChiTietHoSo["extendDate"]?a.thongTinChiTietHoSo["extendDate"]:""};a.processPullBtnDetailRouter(a.thongTinChiTietHoSo,null,c,null)}},doPrint01:function(t,e,a){var i=this;i.dialogPDFLoading=!0,i.dialogPDF=!0;var o={dossierId:t.dossierId,document:e.document};i.$store.dispatch("doPrint01",o).then((function(t){i.dialogPDFLoading=!1,document.getElementById("dialogPDFPreviewXl").src=t}))},doPreview:function(t,e,a){var i=this;i.dialogPDFLoading=!0;var o={dossierId:t.dossierId,document:e.document};i.$store.dispatch("doPrint03",o).then((function(t){i.dialogPDFLoading=!1,"pending"!==t&&(i.dialogPDF=!0,document.getElementById("dialogPDFPreviewXl").src=t)})).catch((function(){i.dialogPDFLoading=!1}))},doCopy:function(t,e,a){var i=this,o={dossierId:t.dossierId};i.loadingAction=!0,i.$store.dispatch("doCopy",o).then((function(t){i.loadingAction=!1,i.$router.push({path:"/danh-sach-ho-so/"+i.index+"/ho-so/"+t.dossierId+"/"+i.itemAction.form,query:i.$router.history.current.query})})).catch((function(t){i.loadingAction=!1}))},doDeleteDossier:function(t,e,a){var i=this,o=confirm("Bạn có muốn thực hiện hành động này?");if(!o)return!1;var n={dossierId:t.dossierId};i.$router.history.current.query;i.$store.dispatch("deleteDossier",n).then((function(t){i.dialogActionProcess=!1,i.loadingActionProcess=!1,i.goBack()}))},doCancel:function(t,e,a){var i=this;i.loadingAction=!0;var o={dossierId:t.dossierId};i.$store.dispatch("doCancel",o).then((function(t){i.loadingAction=!1,i.indexAction=-1,i.$router.push({path:"/danh-sach-ho-so/"+i.index+"/ho-so/"+t.dossierId+"/"+i.itemAction.form,query:i.$router.history.current.query})})).catch((function(t){i.loadingAction=!1}))},doCreateDossier:function(){var t=this,e={serviceCode:t.serviceCode,govAgencyCode:t.govAgencyCode,templateNo:t.templateNo,originality:t.getOriginality()};t.loadingAction=!0,t.$store.dispatch("postDossier",e).then((function(e){t.loadingAction=!1,t.indexAction=-1,t.$router.push({path:"/danh-sach-ho-so/"+t.index+"/ho-so/"+e.dossierId+"/"+t.itemAction.form,query:t.$router.history.current.query})})).catch((function(e){t.loadingAction=!1}))},rollBack:function(){var t=this,e={dossierId:t.thongTinChiTietHoSo.dossierId};t.loadingAction=!0,t.$store.dispatch("rollBack",e).then((function(e){setTimeout((function(){t.loadingAction=!1,t.getNextActions(),t.rollbackable=!1,t.dialogActionProcess=!1,t.btnStateVisible=!0}),500)})).catch((function(e){t.loadingAction=!1,t.alertObj={icon:"error",color:"error",message:"Trả lại bước trước không thành công!"},t.btnStateVisible=!1}))},rollBackDossier:function(t){var e=this,a={dossierId:e.thongTinChiTietHoSo.dossierId,actionCode:9e3};if(t)e.doActionSpecial(a);else{var i=confirm("Bạn có chắc chắn thực hiện hành động này?");if(i){var o={dossierId:e.thongTinChiTietHoSo.dossierId};e.$store.dispatch("rollBack",o).then((function(t){})).catch((function(){}))}}},processAction:function(t,e,a,i,o){var n=this,s=!0,r=!0,c=!0,l=!0,d=!0,u=!0,h=!1,p=n.$store.getters.loadingInitData,m=p.user.userName?p.user.userName:"",g={dossierId:t.dossierId,actionCode:a.actionCode,actionUser:m};if(n.showPhanCongNguoiThucHien){6===n.type_assign||7===n.type_assign||8===n.type_assign||9===n.type_assign?g["toUsers"]=n.$refs.phancong.getToUsersExport():g["toUsers"]=n.assign_items;var v=n.$refs.phancong.doExport();if(s=!!v||(3===n.type_assign||4===n.type_assign)&&n.reAsignUsers.filter((function(t){return Number(t.assigned)>0})).length>0,!s){var f=6===n.type_assign||7===n.type_assign||8===n.type_assign||9===n.type_assign?"Vui lòng chọn phòng ban thực hiện":"Vui lòng chọn người thực hiện";toastr__WEBPACK_IMPORTED_MODULE_1___default.a.error(f)}}var _=null;if(n.payments&&(_={requestPayment:n.payments["requestPayment"],paymentNote:n.payments["paymentNote"],advanceAmount:Number(n.payments["advanceAmount"].toString().replace(/\./g,"")),feeAmount:Number(n.payments["feeAmount"].toString().replace(/\./g,"")),serviceAmount:Number(n.payments["serviceAmount"].toString().replace(/\./g,"")),shipAmount:Number(n.payments["shipAmount"].toString().replace(/\./g,""))}),n.showThuPhi){g["payment"]=_;var y=_["feeAmount"]+_["serviceAmount"]+_["shipAmount"]-_["advanceAmount"];if(0===y&&3===n.originality){var C=confirm("Tổng phí còn phải nộp: 0 đồng. Bạn có muốn tiếp tục?");if(!C)return void(n.loadingActionProcess=!1)}}if(n.showThanhToanDienTu){n.$refs.epayment.validPayment();var D=n.$refs.epayment.validPayment(),T=n.$store.getters.getPaymentProfile;if(T&&T["paymentFile"]&&D){d=!0,g["payment"]={requestPayment:3,advanceAmount:T.advanceAmount?T.advanceAmount:0,feeAmount:T.feeAmount?T.feeAmount:0,paymentAmount:T.paymentAmount?T.paymentAmount:0,paymentNote:T.paymentNote?T.paymentNote:"",serviceAmount:T.serviceAmount?T.serviceAmount:0,shipAmount:T.shipAmount?T.shipAmount:0,paymentMethod:T.paymentMethod?T.paymentMethod:"Chuyển khoản"};var x=g["payment"],b=x["feeAmount"]+x["serviceAmount"]+x["shipAmount"]-x["advanceAmount"];if(0===b&&3===n.originality){var S=confirm("Tổng phí còn phải nộp: 0 đồng. Bạn có muốn tiếp tục?");if(!S)return void(n.loadingActionProcess=!1)}}else d=!1}if(n.showEditDate){var N=n.$refs.ngayhentra.getDateInput(),P={dueDate:N,receiveDate:n.receiveDateEdit};g.hasOwnProperty("payload")?g["payload"]=Object.assign(g["payload"],P):g["payload"]=P}if(n.showExtendDateEdit){var I=n.$refs.ngaygiahan.doExport();c=!!I.valid;var A={extendDate:I.extendDate};"overdue"===n.typeExtendDate?A={extendDate:I.extendDate,delayNote:I.text,lockState:""}:"preoverdue"===n.typeExtendDate&&(A={extendDate:I.extendDate,delayNote:I.text,lockState:"CONFIRM"}),g.hasOwnProperty("payload")?g["payload"]=Object.assign(g["payload"],A):g["payload"]=A}if(n.showFormBoSungThongTinNgan){var w=n.$refs.formBoSungThongTinNgan.formSubmitData();g.hasOwnProperty("payload")?g["payload"]=Object.assign(g["payload"],w):g["payload"]=w;var E=n.$refs.formBoSungThongTinNgan.checkValid();if(!E)return u=!1,void(n.loadingAction=!1);u=!0}if(n.showYkienCanBoThucHien){var k=n.$refs.ykiencanbo.doExport(),O="";k.valid?(r=!0,O=k.text):r=!1,g["userNote"]=O}if(!n.showTaoTaiLieuKetQua||(l=n.$refs.tailieuketqua.validCreateFileTemplate(),l)){if(n.showKyPheDuyetTaiLieu){n.loadingActionProcess=!1;var F=n.$refs.kypheduyettailieu.doExport();F.required?h=!0:(h=!1,"digital"!==n.dataEsign.signatureType&&alert("Yêu cầu xác thực ký duyệt"))}if(n.showThanhPhanLienThong){var M={dossierParts:n.dossierTemplateLienThong.toString()};g.hasOwnProperty("payload")?g["payload"]=Object.assign(g["payload"],M):g["payload"]=M}n.validateAction=!!(s&&r&&c&&d&&u&&l),n.dossierId=t.dossierId;var V=n.$router.history.current.query;if(n.loadingActionProcess=!0,o){var L=confirm("Bạn có muốn thực hiện hành động này?");if(!L||!n.validateAction)return!1;n.loadingActionProcess=!0,n.$store.dispatch("processDossierRouter",g).then((function(t){n.loadingAction=!1,n.dialogActionProcess=!1,n.loadingActionProcess=!1,n.alertObj={icon:"check_circle",color:"success",message:"Thực hiện thành công!"},n.btnStateVisible=!1,t.hasOwnProperty("rollbackable")&&null!==t["rollbackable"]&&void 0!==t["rollbackable"]&&(n.rollbackable=t.rollbackable),t.hasOwnProperty("dossierDocumentId")&&null!==t["dossierDocumentId"]&&void 0!==t["dossierDocumentId"]&&0!==t["dossierDocumentId"]&&"0"!==t["dossierDocumentId"]&&(n.printDocument=!0),n.$router.push({path:n.$router.history.current.path,query:{recount:Math.floor(100*Math.random())+1,renew:Math.floor(100*Math.random())+1,q:V["q"]}})})).catch((function(t){n.loadingAction=!1,n.loadingActionProcess=!1}))}else if(n.validateAction){if(2===n.checkInput&&null!==n.$refs.thanhphanhoso&&void 0!==n.$refs.thanhphanhoso&&"undefined"!==n.$refs.thanhphanhoso){var H=n.$refs.thanhphanhoso.validDossierTemplate();if(!H)return n.loadingAction=!1,void(n.loadingActionProcess=!1)}if(n.loadingActionProcess=!0,n.showKyPheDuyetTaiLieu){if(h){var $={dossierId:n.thongTinChiTietHoSo.dossierId,actionId:n.processActionCurrent};n.$store.dispatch("processPullBtnDetail",$).then((function(t){n.dataEsign=t;var e=n.$refs.kypheduyettailieu.checkCreateFile(n.dataEsign);if(e){var a,i;if(n.dataEsign.createFiles)if(a=Array.isArray(n.dataEsign.createFiles)?n.dataEsign.createFiles:[n.dataEsign.createFiles],a=a.filter((function(t){return!0===t.eForm})),a.length>0)(function(){for(var t=a.length,e=0,o=function(o){var s=a[o];i=n.listDossierFiles.find((function(t){return t.dossierPartNo===s.partNo})),i?(i["dossierId"]=n.thongTinChiTietHoSo.dossierId,n.$store.dispatch("putAlpacaForm",i).then((function(a){e+=1,e===t&&(n.loadingAction=!1,n.loadingActionProcess=!1,n.doAction())})).catch((function(t){}))):(s["dossierId"]=n.thongTinChiTietHoSo.dossierId,n.$store.dispatch("postEformEsignature",s).then((function(a){e+=1,e===t&&(n.loadingAction=!1,n.loadingActionProcess=!1,n.doAction())})).catch((function(t){})))},s=0;s<t;s++)o(s)})();else n.loadingAction=!1,n.loadingActionProcess=!1,alert("Chưa có tài liệu ký duyệt")}else{var o="";if(n.showThuPhi){o={requestPayment:n.payments["requestPayment"],paymentNote:n.payments["paymentNote"],advanceAmount:Number(n.payments["advanceAmount"].toString().replace(/\./g,"")),feeAmount:Number(n.payments["feeAmount"].toString().replace(/\./g,"")),serviceAmount:Number(n.payments["serviceAmount"].toString().replace(/\./g,"")),shipAmount:Number(n.payments["shipAmount"].toString().replace(/\./g,""))},t["payment"]=o;var s=o["feeAmount"]+o["serviceAmount"]+o["shipAmount"]-o["advanceAmount"];if(0===s&&3===n.originality){var c=confirm("Tổng phí còn phải nộp: 0 đồng. Bạn có muốn tiếp tục?");if(!c)return void(n.loadingActionProcess=!1)}}if(n.showYkienCanBoThucHien){var l=n.$refs.ykiencanbo.doExport(),d="";l.valid?(r=!0,d=l.text):r=!1,t["userNote"]=d}n.loadingAction=!1,n.loadingActionProcess=!1,n.$refs.kypheduyettailieu.kySo(t)}})).catch((function(t){n.loadingAction=!1,n.loadingActionProcess=!1}))}}else if(!n.showPhanCongNguoiThucHien||3!==n.type_assign&&4!==n.type_assign)if("plugin"===a.signatureType){console.log("file ký số",n.createFileSignedSync);var R=!0;if(n.createFileSignedSync){var G=n.createFileSignedSync.createFiles,q=[],U=[];for(var B in G){if(!G[B]["isSigned"]&&G[B]["fileSize"])return toastr__WEBPACK_IMPORTED_MODULE_1___default.a.clear(),toastr__WEBPACK_IMPORTED_MODULE_1___default.a.error(G[B]["displayName"]+" chưa được ký duyệt"),void(R=!1);q.push(G[B]["fileEntryId"]),U.push(G[B]["dossierFileId"])}if(console.log("fileEntries 12312",q,U),!R)return;var K={dossierId:n.thongTinChiTietHoSo["dossierId"],fileEntries:q.toString(),dossierFiles:U.toString()};n.$store.dispatch("updateFileKySoPlugin",K).then((function(){n.$store.dispatch("processDossierRouter",g).then((function(t){n.getDetailDossier(),3!==n.originality||2!==n.checkInput&&"2"!==n.checkInput||n.$store.dispatch("updateApplicantNote",n.thongTinChiTietHoSo).then((function(t){})),g["payment"]&&n.loadThanhToan(),n.loadingAction=!1,n.dialogActionProcess=!1,n.loadingActionProcess=!1,n.alertObj={icon:"check_circle",color:"success",message:"Thực hiện thành công!"},n.btnStateVisible=!1,t.hasOwnProperty("rollbackable")&&null!==t["rollbackable"]&&void 0!==t["rollbackable"]&&(n.rollbackable=t.rollbackable),t.hasOwnProperty("dossierDocumentId")&&null!==t["dossierDocumentId"]&&void 0!==t["dossierDocumentId"]&&0!==t["dossierDocumentId"]&&"0"!==t["dossierDocumentId"]&&(n.printDocument=!0),n.showThuPhi&&"5"===String(g["payment"]["requestPayment"])&&(n.printInvoicefilePayment=!0,n.printPay()),"new"===n.thongTinChiTietHoSo.dossierStatus&&1===n.originality&&n.$router.push("/danh-sach-ho-so/"+n.index+"/nop-thanh-cong/"+n.thongTinChiTietHoSo.dossierId),n.checkInput=0,n.$store.commit("setCheckInput",0),"ACTIONS"===String(e.form)||n.$router.push({path:n.$router.history.current.path,query:{recount:Math.floor(100*Math.random())+1,renew:Math.floor(100*Math.random())+1,q:V["q"]}}),jquery__WEBPACK_IMPORTED_MODULE_0___default()("html, body").animate({scrollTop:0},500,"linear")})).catch((function(t){n.loadingAction=!1,n.loadingActionProcess=!1}))})).catch((function(){toastr__WEBPACK_IMPORTED_MODULE_1___default.a.error("Cập nhật kết quả xử lý thất bại"),n.loadingAction=!1,n.loadingActionProcess=!1}))}else toastr__WEBPACK_IMPORTED_MODULE_1___default.a.clear(),toastr__WEBPACK_IMPORTED_MODULE_1___default.a.error("Chưa có tài liệu nào được ký duyệt"),n.loadingAction=!1,n.loadingActionProcess=!1}else n.$store.dispatch("processDossierRouter",g).then((function(t){n.getDetailDossier(),3!==n.originality||2!==n.checkInput&&"2"!==n.checkInput||n.$store.dispatch("updateApplicantNote",n.thongTinChiTietHoSo).then((function(t){})),g["payment"]&&n.loadThanhToan(),n.loadingAction=!1,n.dialogActionProcess=!1,n.loadingActionProcess=!1,n.alertObj={icon:"check_circle",color:"success",message:"Thực hiện thành công!"},n.btnStateVisible=!1,t.hasOwnProperty("rollbackable")&&null!==t["rollbackable"]&&void 0!==t["rollbackable"]&&(n.rollbackable=t.rollbackable),t.hasOwnProperty("dossierDocumentId")&&null!==t["dossierDocumentId"]&&void 0!==t["dossierDocumentId"]&&0!==t["dossierDocumentId"]&&"0"!==t["dossierDocumentId"]&&(n.printDocument=!0),n.showThuPhi&&"5"===String(g["payment"]["requestPayment"])&&(n.printInvoicefilePayment=!0,n.printPay()),"new"===n.thongTinChiTietHoSo.dossierStatus&&1===n.originality&&n.$router.push("/danh-sach-ho-so/"+n.index+"/nop-thanh-cong/"+n.thongTinChiTietHoSo.dossierId),n.checkInput=0,n.$store.commit("setCheckInput",0),"ACTIONS"===String(e.form)||n.$router.push({path:n.$router.history.current.path,query:{recount:Math.floor(100*Math.random())+1,renew:Math.floor(100*Math.random())+1,q:V["q"]}}),jquery__WEBPACK_IMPORTED_MODULE_0___default()("html, body").animate({scrollTop:0},500,"linear")})).catch((function(t){n.loadingAction=!1,n.loadingActionProcess=!1}));else{var W=n.$refs.phancong.getDataDelegacy();console.log("data_delegacy",W);var z={dossierId:n.thongTinChiTietHoSo.dossierId,users:W,delegacy:1};n.$store.dispatch("postDossierUserAsign",z).then((function(t){g["toUsers"]&&g["toUsers"].filter((function(t){return Number(t.assigned)>0})).length>0?n.$store.dispatch("processDossierRouter",g).then((function(t){n.getDetailDossier(),3!==n.originality||2!==n.checkInput&&"2"!==n.checkInput||n.$store.dispatch("updateApplicantNote",n.thongTinChiTietHoSo).then((function(t){})),g["payment"]&&n.loadThanhToan(),n.loadingAction=!1,n.dialogActionProcess=!1,n.loadingActionProcess=!1,n.alertObj={icon:"check_circle",color:"success",message:"Thực hiện thành công!"},n.btnStateVisible=!1,t.hasOwnProperty("rollbackable")&&null!==t["rollbackable"]&&void 0!==t["rollbackable"]&&(n.rollbackable=t.rollbackable),t.hasOwnProperty("dossierDocumentId")&&null!==t["dossierDocumentId"]&&void 0!==t["dossierDocumentId"]&&0!==t["dossierDocumentId"]&&"0"!==t["dossierDocumentId"]&&(n.printDocument=!0),n.showThuPhi&&"5"===String(g["payment"]["requestPayment"])&&(n.printInvoicefilePayment=!0,n.printPay()),"new"===n.thongTinChiTietHoSo.dossierStatus&&1===n.originality&&n.$router.push("/danh-sach-ho-so/"+n.index+"/nop-thanh-cong/"+n.thongTinChiTietHoSo.dossierId),n.checkInput=0,n.$store.commit("setCheckInput",0),"ACTIONS"===String(e.form)||n.$router.push({path:n.$router.history.current.path,query:{recount:Math.floor(100*Math.random())+1,renew:Math.floor(100*Math.random())+1,q:V["q"]}}),jquery__WEBPACK_IMPORTED_MODULE_0___default()("html, body").animate({scrollTop:0},500,"linear")})).catch((function(t){n.loadingAction=!1,n.loadingActionProcess=!1})):(toastr__WEBPACK_IMPORTED_MODULE_1___default.a.success("Yêu cầu thực hiện thành công"),setTimeout((function(){n.goBack()}),300))})).catch((function(t){}))}}else n.validateAction||(n.loadingActionProcess=!1)}else n.loadingAction=!1},kyDuyetPlugin:function(){var t=this;if(console.log("file ký số",t.createFileSignedSync),!t.createFileSignedSync)return toastr__WEBPACK_IMPORTED_MODULE_1___default.a.clear(),toastr__WEBPACK_IMPORTED_MODULE_1___default.a.error("Chưa có tài liệu nào được ký duyệt"),!1;var e=t.createFileSignedSync.createFiles,a=[],i=[];for(var o in e){if(!e[o]["isSigned"])return toastr__WEBPACK_IMPORTED_MODULE_1___default.a.clear(),toastr__WEBPACK_IMPORTED_MODULE_1___default.a.error(e[o]["displayName"]+" chưa được ký duyệt"),!1;a.push(e[o]["fileEntryId"]),i.push(e[o]["dossierFileId"])}console.log("fileEntries 12312",a,i);var n={dossierId:t.thongTinChiTietHoSo["dossierId"],fileEntries:a.toString(),dossierFiles:i.toString()};t.$store.dispatch("updateFileKySoPlugin",n)},doPrint02:function(t,e,a,i){var o=this;if(null===o.thuTucHanhChinhSelected||void 0===o.thuTucHanhChinhSelected||"undefined"===o.thuTucHanhChinhSelected)alert("Loại thủ tục bắt buộc phải chọn");else{var n={document:e.document,serviceCode:o.thuTucHanhChinhSelected.serviceCode,govAgencyCode:o.thuTucHanhChinhSelected.govAgencyCode,dossiers:JSON.stringify(o.selected)};o.dialogPDFLoading=!0,o.dialogPDF=!0,o.$store.dispatch("doPrint02",n).then((function(t){o.dialogPDFLoading=!1,document.getElementById("dialogPDFPreviewXl").src=t}))}},doPrint03:function(t,e,a,i){var o=this;o.dialogPDFLoading=!0;var n={dossierId:t.dossierId,document:e.document};o.$store.dispatch("doPrint03",n).then((function(t){o.dialogPDFLoading=!1,"pending"!==t&&(o.dialogPDF=!0,document.getElementById("dialogPDFPreviewXl").src=t)})).catch((function(){o.dialogPDFLoading=!1}))},doGuiding:function(t,e,a,i){var o=this;if(null===o.thuTucHanhChinhSelected||void 0===o.thuTucHanhChinhSelected||"undefined"===o.thuTucHanhChinhSelected)alert("Loại thủ tục bắt buộc phải chọn");else{var n={serviceConfigId:o.thuTucHanhChinhSelected.serviceConfigId};o.dialogPDFLoading=!0,o.dialogPDF=!0,o.$store.dispatch("doGuiding",n).then((function(t){o.dialogPDFLoading=!1,document.getElementById("dialogPDFPreviewXl").src=t}))}},doActionSpecial:function(t){var e=this,a=e.$router.history.current.query;e.loadingAction=!0,e.$store.dispatch("postAction",t).then((function(t){e.loadingAction=!1,e.dialogActionProcess=!1,e.loadingActionProcess=!1,e.btnStateVisible=!1,t.hasOwnProperty("rollbackable")&&null!==t["rollbackable"]&&void 0!==t["rollbackable"]&&(e.rollbackable=t.rollbackable),t.hasOwnProperty("dossierDocumentId")&&null!==t["dossierDocumentId"]&&void 0!==t["dossierDocumentId"]&&0!==t["dossierDocumentId"]&&"0"!==t["dossierDocumentId"]&&(e.printDocument=!0),e.checkInput=0,e.$store.commit("setCheckInput",0),e.$router.push({path:e.$router.history.current.path,query:{recount:Math.floor(100*Math.random())+1,renew:Math.floor(100*Math.random())+1,q:a["q"]}})})).catch((function(t){e.loadingActionProcess=!1,e.loadingAction=!1}))},getNextActions:function(){var t=this,e=(t.$router.history.current.query,{dossierId:t.thongTinChiTietHoSo.dossierId}),a=t.$router.history.current.query;t.dossierId=t.thongTinChiTietHoSo.dossierId,t.$store.dispatch("pullNextactions",e).then((function(e){t.btnDossierDynamics=e;var i=t.btnDossierDynamics.filter((function(t){return 1===t.enable}));if(console.log(i),1===i.length&&a.hasOwnProperty("activeAction")&&"true"===a.activeAction&&t.processPullBtnDetail(i[0],0),a.hasOwnProperty("btnIndex")&&null!==a.btnIndex&&""!==a.btnIndex)if(t.btnStateVisible=!0,t.dialogActionProcess=!0,"8500"===a.btnIndex.toString()){var o={actionCode:8500,dossierId:t.thongTinChiTietHoSo.dossierId,overdue:t.thongTinChiTietHoSo["extendDate"]};t.processPullBtnDetailRouter(t.thongTinChiTietHoSo,null,o,null)}else if("8501"===a.btnIndex.toString()){var n={actionCode:8501,dossierId:t.thongTinChiTietHoSo.dossierId,preoverdue:t.thongTinChiTietHoSo["extendDate"]};t.processPullBtnDetailRouter(t.thongTinChiTietHoSo,null,n,null)}else if("8400"===a.btnIndex.toString()){var s={actionCode:8400,dossierId:t.thongTinChiTietHoSo.dossierId,betimes:t.thongTinChiTietHoSo["extendDate"]};t.processPullBtnDetailRouter(t.thongTinChiTietHoSo,null,s,null)}else 1===t.btnDossierDynamics[a.btnIndex].enable||2===t.btnDossierDynamics[a.btnIndex].enable?t.processPullBtnDetail(t.btnDossierDynamics[a.btnIndex],a.btnIndex):t.dialogActionProcess=!1;t.checkInput=t.getCheckInput,null!==t.getCheckInput&&void 0!==t.getCheckInput&&0!==t.checkInput&&setTimeout((function(){t.$refs.thanhphanhoso.initData(t.thongTinChiTietHoSo)}),300),t.loadUserReAsign()})),t.$store.dispatch("loadPlugins",{dossierId:t.thongTinChiTietHoSo.dossierId}).then((function(e){t.btnPlugins=e})).catch((function(e){t.btnPlugins=[]})),t.thongTinChiTietHoSo.online&&!t.thongTinChiTietHoSo.originDossierNo&&(1===t.originality&&"new"!==t.thongTinChiTietHoSo["dossierStatus"]||3===t.originality)&&t.loadDossierSyncs(t.thongTinChiTietHoSo.dossierId)},showAlpacaJSFORM:function showAlpacaJSFORM(item){var vm=this;item.eform&&vm.$store.dispatch("loadFormScript",item).then((function(resScript){vm.$store.dispatch("loadFormData",item).then((function(resData){var formScript,formData;formScript=resScript?eval("("+resScript+")"):{},formData=resData?eval("("+resData+")"):{},formScript.data=formData,window.$("#formAlpaca"+item.partNo).alpaca(formScript)}))}))},onUploadSingleFile:function(t,e,a){var i=this;t.dataItem=e,t["dossierId"]=i.thongTinChiTietHoSo.dossierId,t["dossierTemplateNo"]=i.thongTinChiTietHoSo.dossierTemplateNo,i.$store.dispatch("uploadSingleFile",t).then((function(t){})).catch((function(t){}))},submitAlpacajsForm:function(t){var e=this,a={dossierId:e.thongTinChiTietHoSo.dossierId,dossierPartNo:t.partNo};e.$store.dispatch("putAlpacaForm",a)},postNextActions:function(t){var e=this;if(t["dossierId"]=e.thongTinChiTietHoSo.dossierId,t.allowAssignUser>0)e.$store.dispatch("reassignDossier",t).then((function(a){var i={dossierId:e.dossierId,actionCode:t.actionCode,actionNote:e.actionNote,actionUser:"",payload:"",security:"",assignUsers:"",payment:"",createDossiers:""};e.$store.dispatch("postAction",i).then((function(t){}))}));else{var a={dossierId:e.dossierId,actionCode:t.actionCode,actionNote:e.actionNote,actionUser:"",payload:"",security:"",assignUsers:"",payment:"",createDossiers:""};e.$store.dispatch("postAction",a).then((function(t){}))}},viewFileWithPartNo:function(t){var e=this;if(e.dossierFilesItems){var a=e.dossierFilesItems.filter((function(e){return e.dossierPartNo===t.partNo}));if(!a)return;e.fileViews=a,e.partView!==t.partNo?(e.stateView=!0,e.partView=t.partNo):(e.stateView=!e.stateView,e.partView=t.partNo)}},viewFile2:function(t){var e=this;e.dialogPDFLoading=!0,e.dialogPDF=!0,t["dossierId"]=e.thongTinChiTietHoSo.dossierId,e.$store.dispatch("viewFile",t).then((function(t){e.dialogPDFLoading=!1,document.getElementById("dialogPDFPreviewXl").src=t}))},viewFileDocument:function(t){var e=this;e.dialogPDFLoading=!0,e.titleDialogPdf="Văn bản hành chính",e.dialogPDF=!0,t["dossierId"]=e.thongTinChiTietHoSo.dossierId,e.$store.dispatch("viewDocument",t).then((function(t){e.dialogPDFLoading=!1,document.getElementById("dialogPDFPreviewXl").src=t}))},loadTPHS:function(){var t=this;t.$refs.thanhphanhoso1&&setTimeout((function(){t.$refs.thanhphanhoso1.initData(t.thongTinChiTietHoSo)}),150),t.$refs.thanhphanhoso2&&setTimeout((function(){t.$refs.thanhphanhoso2.initData(t.thongTinChiTietHoSo)}),150),t.$store.dispatch("loadDossierDocuments",t.thongTinChiTietHoSo).then((function(e){Array.isArray(e)?t.documents=e:t.documents.push(e)}))},loadThanhToan:function(){var t=this,e={dossierId:t.thongTinChiTietHoSo.referenceUid};t.$store.dispatch("loadDossierPayments",e).then((function(e){t.paymentDetail=e})).catch((function(t){}))},loadPaymentFile:function(){var t=this;t.loadThanhToan(),t.$refs.thongtinthanhtoan&&t.$refs.thongtinthanhtoan.getPaymentFiles()},loadHoSoLienThong:function(){var t=this,e=t.thongTinChiTietHoSo.dossierId;t.$store.dispatch("loadDossierLienThong",e).then((function(e){t.listLienThong=e})).catch((function(t){console.log(t)}))},loadVoting:function(){var t=this,e={className:"dossier",dossierDetail:t.thongTinChiTietHoSo};t.$store.dispatch("loadVotingMC",e).then((function(e){t.votingItems=e,console.log("votingItems",t.votingItems)})).catch((function(t){}))},getPreAction:function(){var t=this,e={dossierId:t.id};t.$store.dispatch("getPreAction",e).then((function(e){t.detailPreAction=e})).catch((function(t){}))},submitVoting:function(){var t=this,e=[];if(t.votingItems.length>0){for(var a in t.loadingVoting=!0,t.votingItems)t.votingItems[a]["className"]="dossier",t.votingItems[a]["classPk"]=t.id,t.votingItems[a]["serverCode"]="SERVER_"+t.thongTinChiTietHoSo["govAgencyCode"],e.push(t.$store.dispatch("submitVoting",t.votingItems[a]));Promise.all(e).then((function(e){t.loadingVoting=!1,t.loadVoting(),toastr__WEBPACK_IMPORTED_MODULE_1___default.a.clear(),toastr__WEBPACK_IMPORTED_MODULE_1___default.a.success("Đánh giá của bạn được gửi thành công")})).catch((function(e){t.loadingVoting=!1,toastr__WEBPACK_IMPORTED_MODULE_1___default.a.clear(),toastr__WEBPACK_IMPORTED_MODULE_1___default.a.error("Gửi đánh giá không thành công")}))}},doAction:function(){var t=this,e={dossierId:t.thongTinChiTietHoSo.dossierId,actionId:t.processActionCurrent};t.$store.dispatch("processPullBtnDetail",e).then((function(e){var a="";if(t.showThuPhi&&(a={requestPayment:t.payments["requestPayment"],paymentNote:t.payments["paymentNote"],advanceAmount:Number(t.payments["advanceAmount"].toString().replace(/\./g,"")),feeAmount:Number(t.payments["feeAmount"].toString().replace(/\./g,"")),serviceAmount:Number(t.payments["serviceAmount"].toString().replace(/\./g,"")),shipAmount:Number(t.payments["shipAmount"].toString().replace(/\./g,""))},e["payment"]=a),t.showYkienCanBoThucHien){var i=t.$refs.ykiencanbo.doExport();e["userNote"]=i.text}t.$refs.kypheduyettailieu.kySo(e),t.getDetailDossier()})).catch((function(e){t.loadingAction=!1,t.loadingActionProcess=!1}))},printViewDocument:function(){var t=this;t.dialogPDFLoading=!0;var e={dossierId:t.thongTinChiTietHoSo.dossierId},a=0,i=function i(){setTimeout((function(){t.$store.dispatch("doPrint03",e).then((function(e){"pending"===e&&a<=5?(a+=1,i()):a>5?t.dialogPDFLoading=!1:(t.dialogPDFLoading=!1,t.dialogPDF=!0,setTimeout((function(){document.getElementById("dialogPDFPreviewXl").src=e}),100))}))}),1e3)};i()},printPay:function(){var t=this,e={dossierId:t.thongTinChiTietHoSo.dossierId,referenceUid:t.thongTinChiTietHoSo.referenceUid};t.dialogPDFLoading=!0,t.$store.dispatch("printPay",e).then((function(e){t.dialogPDFLoading=!1,t.titleDialogPdf="Biên lai thanh toán",t.dialogPDF=!0,setTimeout((function(){document.getElementById("dialogPDFPreviewXl").src=e}),200)})).catch((function(){t.dialogPDFLoading=!1}))},filterNextActionEnable:function(t){var e=!1;if(t&&Array.isArray(t))for(var a in t)0!==t[a]["enable"]&&(e=!0);return e},checkPemissionSpecialAction:function(t,e,a){var i=this,o=!0;if("PRINT_01"!==t&&"PRINT_02"!==t&&"PRINT_03"!==t&&"GUIDE"!==t&&"PREVIEW"!==t&&"BETIMES"!==t){var n=i.$store.getters.getUsersNextAction;if(n.length>0){var s=n.filter((function(t){if(void 0!==t&&void 0!==e)return t["userId"].toString()===e["userId"].toString()}));o=s.length>0}else o=!1}return"ROLLBACK_01"!==t&&"ROLLBACK_02"!==t&&"ROLLBACK_03"!==t||(o=!1),o},checkPemissionPhanCongLai:function(t){var e=this,a=!0,i=e.$store.getters.getUsersNextAction,o=(e.thongTinChiTietHoSo.lastActionUserId&&e.thongTinChiTietHoSo.lastActionUserId,i);if(o.length>0){var n=o.filter((function(e){if(void 0!==e&&void 0!==t)return e["userId"].toString()===t["userId"].toString()}));a=n.length>0}else a=!1;return a},reAsign:function(){var t=this;t.dialog_reAsign=!0},loadUserReAsign:function(){var t=this;t.$store.dispatch("getDossierUserAsign",t.thongTinChiTietHoSo.dossierId).then((function(e){e.length>0&&(t.reAsignUsers=e.filter((function(e){return Number(e["userId"])!==Number(t.currentUser["userId"])}))),t.showReasign=!0,0===t.reAsignUsers.length&&(t.showReasign=!1),1===t.usersNextAction.length&&1===t.reAsignUsers.length&&Number(t.reAsignUsers[0]["userId"])===Number(t.usersNextAction[0]["userId"])&&(t.showReasign=!1)}))},phanCongLai:function(){var t=this;t.dialog_reAsign=!0,t.reAsignUsers=t.detailPreAction["toUsers"]},doReAsign:function(){var t=this,e={dossierId:t.thongTinChiTietHoSo.dossierId,users:t.reAsignUsers,delegacy:0},a=t.$refs.phanconglai.doExport();a?(t.loadingAction=!0,t.$store.dispatch("postDossierUserAsign",e).then((function(e){toastr__WEBPACK_IMPORTED_MODULE_1___default.a.success("Thực hiện thành công"),setTimeout((function(){t.getNextActions()}),300),t.dialog_reAsign=!1,t.loadingAction=!1})).catch((function(e){t.loadingAction=!1,console.log(e)}))):toastr__WEBPACK_IMPORTED_MODULE_1___default.a.error("Vui lòng chọn người thực hiện")},getDetailDossier:function(){var t=this;t.$store.dispatch("getDetailDossier",t.id).then((function(e){t.reRender=!1,t.thongTinChiTietHoSo=e,t.reRender=!0}))},reloadDetailDossier:function(){var t=this,e=setInterval(a,3500);function a(){0==t.activeReload?clearInterval(e):(console.log("RUN setInterval2"),t.$store.dispatch("getDetailDossier",t.thongTinChiTietHoSo.dossierId).then((function(e){t.thongTinChiTietHoSo=e,t.thongTinChiTietHoSo.hasOwnProperty("dossierSyncState")&&"1"===String(t.thongTinChiTietHoSo.dossierSyncState)?t.activeReload=!0:t.activeReload=!1;var a={dossierId:t.thongTinChiTietHoSo.dossierId};t.$store.dispatch("pullNextactions",a).then((function(a){t.btnDossierDynamics=a,t.$store.dispatch("pullBtnConfigStep",e).then((function(e){t.btnStepsDynamics=e,t.btnStepsDynamics.length>0&&(t.btnStepsDynamics=t.btnStepsDynamics.filter((function(e){return!e.hasOwnProperty("roleCode")||e.hasOwnProperty("roleCode")&&t.getUser(e.roleCode)}))),0!==t.btnStepsDynamics.filter((function(t){t.form})).length&&(t.showMenuActionKhac=!0)}))})).catch((function(){t.activeReload=!1}))})).catch((function(){t.activeReload=!1})))}},changeStateViewResult:function(t){var e=this;e.stateViewResult=t},getUser:function(t){var e=this,a=e.$store.getters.getUser.role;if(!a)return!1;var i=a.findIndex((function(e){return e===t}));return i>=0},checkActionSpecial:function(t){var e=this;if(Array.isArray(t)){var a=0;return jquery__WEBPACK_IMPORTED_MODULE_0___default()(t).each((function(t,i){if("PRINT_01"!==i.form&&"PRINT_02"!==i.form&&"PRINT_03"!==i.form&&"GUIDE"!==i.form&&"PREVIEW"!==i.form&&"BETIMES"!==i.form){var o=e.$store.getters.getUsersNextAction;if(o.length>0){var n=o.filter((function(t){if(void 0!==t&&void 0!==currentUser)return t["userId"].toString()===currentUser["userId"].toString()}));n.length>0&&(a+=1)}}})),a>0}return!1}}),_defineProperty(_props$components$dat,"filters",{dateTimeView:function(t){if(t){var e=new Date(Number(t));return"".concat(e.getDate().toString().padStart(2,"0"),"/").concat((e.getMonth()+1).toString().padStart(2,"0"),"/").concat(e.getFullYear()," ").concat(e.getHours().toString().padStart(2,"0"),":").concat(e.getMinutes().toString().padStart(2,"0"))}return""},dateTimeViewSequency:function(t){if(t){var e=new Date(t);return"".concat(e.getDate().toString().padStart(2,"0"),"/").concat((e.getMonth()+1).toString().padStart(2,"0"),"/").concat(e.getFullYear()," ").concat(e.getHours().toString().padStart(2,"0"),":").concat(e.getMinutes().toString().padStart(2,"0"))}return""},getMaxDueDate:function(t){var e=Math.max.apply(Math,t.map((function(t){return t.actionOverdue})));return e},getThoiHanQuyDinh:function(t){return t>0?t+" ngày":""}}),_props$components$dat),window.showSuccess=function(t){toastr__WEBPACK_IMPORTED_MODULE_1___default.a.success(t)},window.showError=function(t){toastr__WEBPACK_IMPORTED_MODULE_1___default.a.error(t)}},f374:function(t,e,a){"use strict";var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"payment-info",staticStyle:{width:"100%"}},[a("v-expansion-panel",{staticClass:"expansion-pl",attrs:{value:[!0],expand:""}},[a("v-expansion-panel-content",[a("div",{attrs:{slot:"header"},slot:"header"},[a("div",{staticClass:"background-triangle-small"},[a("v-icon",{attrs:{size:"18",color:"white"}},[t._v("star_rate")])],1),1===t.data_payment.requestPayment||4===t.data_payment.requestPayment||5===t.data_payment.requestPayment?a("span",[t._v(t._s(t.data_payment.paymentFee))]):t._e(),2===t.data_payment.requestPayment?a("span",[t._v("Lập phiếu thanh toán")]):t._e()]),a("v-card",[a("v-card-text",{staticClass:"pb-1"},[a("v-layout",{attrs:{wrap:""}},[a("v-flex",{attrs:{xs12:"",sm2:""}},[a("v-subheader",{staticClass:"pl-0 text-right"},[t._v("Lệ phí: ")])],1),a("v-flex",{attrs:{xs12:"",sm3:""}},[1===t.data_payment.editable||3===t.data_payment.editable?a("v-text-field",{directives:[{name:"money",rawName:"v-money",value:t.money,expression:"money"}],attrs:{suffix:"vnđ"},on:{keyup:t.changeFee},model:{value:t.data_payment.feeAmount,callback:function(e){t.$set(t.data_payment,"feeAmount",e)},expression:"data_payment.feeAmount"}}):a("p",{staticClass:"mt-1 mb-0"},[t._v(t._s(t.currency(t.data_payment.feeAmount.toString().replace(/\./g,"")))+"    vnđ")])],1),a("v-flex",{staticClass:"pt-1",attrs:{xs12:"",sm2:""}},[a("v-subheader",{staticClass:"pl-0 text-right"},[t._v("Phí: ")])],1),a("v-flex",{staticClass:"pt-1",attrs:{xs12:"",sm3:""}},[2===t.data_payment.editable||3===t.data_payment.editable?a("v-text-field",{directives:[{name:"money",rawName:"v-money",value:t.money,expression:"money"}],attrs:{suffix:"vnđ"},on:{keyup:t.changeFee},model:{value:t.data_payment.serviceAmount,callback:function(e){t.$set(t.data_payment,"serviceAmount",e)},expression:"data_payment.serviceAmount"}}):a("p",{staticClass:"mt-1 mb-0"},[t._v(t._s(t.currency(t.data_payment.serviceAmount.toString().replace(/\./g,"")))+"    vnđ")])],1),a("v-flex",{attrs:{xs12:"",sm2:""}}),2!==t.viaPortal&&"2"!==t.viaPortal||0===t.data_payment.shipAmount?t._e():a("v-flex",{attrs:{xs12:"",sm2:""}},[a("v-subheader",{staticClass:"pl-0 text-right"},[t._v("Phí chuyển phát: ")])],1),2!==t.viaPortal&&"2"!==t.viaPortal||0===t.data_payment.shipAmount?t._e():a("v-flex",{attrs:{xs12:"",sm3:""}},[1===t.data_payment.editable||3===t.data_payment.editable?a("v-text-field",{directives:[{name:"money",rawName:"v-money",value:t.money,expression:"money"}],attrs:{suffix:"vnđ"},on:{keyup:t.changeFee},model:{value:t.data_payment.shipAmount,callback:function(e){t.$set(t.data_payment,"shipAmount",e)},expression:"data_payment.shipAmount"}}):a("p",{staticClass:"mt-1 mb-0"},[t._v(t._s(t.currency(t.data_payment.shipAmount.toString().replace(/\./g,"")))+"    vnđ")])],1),a("v-flex",{attrs:{xs12:"",sm2:""}})],1)],1),a("v-card-text",{staticClass:"pt-0"},[a("v-layout",{attrs:{wrap:""}},[1===t.data_payment.requestPayment?a("v-flex",{attrs:{xs12:"",sm2:""}},[a("v-subheader",{staticClass:"pl-0 text-right"},[a("span",{staticClass:"text-bold"},[t._v("Tổng: ")])])],1):t._e(),1===t.data_payment.requestPayment?a("v-flex",{staticStyle:{"padding-top":"7px"},attrs:{xs12:"",sm3:""}},[a("span",[t._v(t._s(t.currency(t.feeTong.toString().replace(/\./g,"")))+"    vnđ")])]):t._e(),1===t.data_payment.requestPayment?a("v-flex",{attrs:{xs12:"",sm1:""}}):t._e(),2===t.data_payment.requestPayment?a("v-flex",{attrs:{xs12:"",sm2:""}},[a("v-subheader",{staticClass:"pl-0 text-right"},[a("span",{staticClass:"text-bold"},[t._v("Tổng: ")])])],1):t._e(),2===t.data_payment.requestPayment?a("v-flex",{staticStyle:{"padding-top":"7px"},attrs:{xs12:"",sm3:""}},[a("span",[t._v(t._s(t.currency(t.totalFee.toString().replace(/\./g,"")))+"    vnđ")])]):t._e(),2===t.data_payment.requestPayment?a("v-flex",{attrs:{xs12:"",sm1:""}}):t._e(),4===t.data_payment.requestPayment||5===t.data_payment.requestPayment?a("v-flex",{attrs:{xs12:"",sm2:""}},[a("v-subheader",{staticClass:"pl-0 text-right"},[a("span",{staticClass:"text-bold"},[t._v("Tổng: ")])])],1):t._e(),4===t.data_payment.requestPayment||5===t.data_payment.requestPayment?a("v-flex",{staticStyle:{"padding-top":"7px"},attrs:{xs12:"",sm3:""}},[a("span",[t._v(t._s(t.currency(t.feeTong.toString().replace(/\./g,"")))+"    vnđ")])]):t._e(),4===t.data_payment.requestPayment?a("v-flex",{staticClass:"pt-1",attrs:{xs12:"",sm2:""}},[a("v-subheader",{staticClass:"pl-0 text-right"},[a("span",{staticClass:"text-bold"},[t._v("Đã tạm nộp: ")])])],1):t._e(),4===t.data_payment.requestPayment?a("v-flex",{staticClass:"pt-1",staticStyle:{"padding-top":"7px"},attrs:{xs12:"",sm3:""}},[1===t.data_payment.editable||3===t.data_payment.editable?a("v-text-field",{directives:[{name:"money",rawName:"v-money",value:t.money,expression:"money"}],attrs:{suffix:"vnđ"},on:{keyup:t.changeFee},model:{value:t.data_payment.advanceAmount,callback:function(e){t.$set(t.data_payment,"advanceAmount",e)},expression:"data_payment.advanceAmount"}}):a("span",[t._v(t._s(t.currency(Number(t.data_payment.advanceAmount.toString().replace(/\./g,"")).toString().replace(/\./g,"")))+"    vnđ")])],1):t._e(),4===t.data_payment.requestPayment?a("v-flex",{attrs:{xs12:"",sm1:""}}):t._e(),4===t.data_payment.requestPayment?a("v-flex",{attrs:{xs12:"",sm2:""}},[a("v-subheader",{staticClass:"pl-0 text-right"},[a("span",{staticClass:"text-bold"},[t._v("Còn phải nộp: ")])])],1):t._e(),4===t.data_payment.requestPayment?a("v-flex",{staticStyle:{"padding-top":"7px"},attrs:{xs12:"",sm3:""}},[a("span",[t._v(t._s(t.currency(t.totalFee.toString().replace(/\./g,"")))+"    vnđ")])]):t._e(),4===t.data_payment.requestPayment?a("v-flex",{attrs:{xs12:"",sm1:""}}):t._e()],1),a("v-layout",{staticStyle:{position:"relative"},attrs:{wrap:""}},[a("v-flex",{staticClass:"my-0 py-1",staticStyle:{width:"70px"}},[a("span",{staticClass:"red--text"},[t._v("* ")]),t._v(" Ghi chú:")]),a("v-flex",{staticStyle:{width:"calc(100% - 80px)"}},[0==t.activeEdit?a("div",{staticClass:"pl-2"},[a("v-textarea",{staticClass:"py-0",attrs:{row:"2",readonly:t.activeEdit,required:""},model:{value:t.data_payment.paymentNote,callback:function(e){t.$set(t.data_payment,"paymentNote",e)},expression:"data_payment.paymentNote"}})],1):t._e(),t.activeEdit||""===t.data_payment.paymentNote?a("p",{staticClass:"px-2 my-0 py-1"},[t._v("\n                "+t._s(t.data_payment.paymentNote)+"   \n                "),1==t.activeEdit?a("v-icon",{staticClass:"hover-pointer btn-add mx-0 my-0",attrs:{color:"blue",size:"20",title:"Sửa",grey:"","darken-4":""},on:{click:function(e){e.stopPropagation(),t.activeEdit=!1}}},[t._v("\n                  create\n                ")]):t._e()],1):t._e(),a("span",{staticStyle:{position:"absolute",top:"15px",right:"10px"}},[0==t.activeEdit?a("v-icon",{staticClass:"hover-pointer btn-add mx-0 my-0",attrs:{color:"green",size:"25",grey:"","darken-4":""},on:{click:function(e){e.stopPropagation(),t.activeEdit=!0}}},[t._v("\n                  check\n                ")]):t._e()],1)])],1),t.paymentFile&&5===t.data_payment.requestPayment?a("div",[a("span",[a("span",{staticClass:"red--text"},[t._v("* ")]),t._v(" File báo thanh toán:")]),t._v(" \n            "),a("span",{staticStyle:{cursor:"pointer"},on:{click:function(e){e.stopPropagation(),t.viewFile()}}},[a("v-icon",[t._v("attach_file")]),t._v("\n              "+t._s(t.paymentFileName)+"\n            ")],1),a("v-tooltip",{attrs:{top:""}},[a("v-btn",{staticClass:"mx-0 my-0",attrs:{slot:"activator",icon:"",ripple:""},on:{click:function(e){e.stopPropagation(),t.downloadPaymentFile(t.item)}},slot:"activator"},[a("v-icon",{staticStyle:{color:"#0d71bb"},attrs:{size:"16",color:"primary"}},[t._v("save_alt")])],1),a("span",[t._v("Tải xuống")])],1)],1):t._e()],1)],1)],1)],1),a("v-dialog",{staticStyle:{overflow:"hidden"},attrs:{"max-width":"900",transition:"fade-transition"},model:{value:t.dialogPDF,callback:function(e){t.dialogPDF=e},expression:"dialogPDF"}},[a("v-card",[a("v-toolbar",{attrs:{flat:"",dark:"",color:"primary"}},[a("v-toolbar-title",[t._v("File đính kèm")]),a("v-spacer"),a("v-btn",{attrs:{icon:"",dark:""},nativeOn:{click:function(e){t.dialogPDF=!1}}},[a("v-icon",[t._v("close")])],1)],1),t.dialogPDFLoading?a("div",{staticStyle:{"min-height":"600px","text-align":"center",margin:"auto",padding:"25%"}},[a("v-progress-circular",{attrs:{size:100,width:1,color:"primary",indeterminate:""}})],1):t._e(),a("iframe",{directives:[{name:"show",rawName:"v-show",value:!t.dialogPDFLoading,expression:"!dialogPDFLoading"}],staticStyle:{overflow:"auto","min-height":"600px"},attrs:{id:"dialogPreview",src:"",type:"application/pdf",width:"100%",height:"100%",frameborder:"0"}})],1)],1)],1)},o=[],n=a("716b"),s={props:{payments:{type:Object,default:function(){}},viaPortal:{type:Number,default:function(){return 0}},detailDossier:{type:Object,default:function(){}}},model:{prop:"payments"},data:function(){return{data_payment:{},money:{decimal:"",thousands:".",prefix:"",suffix:"",precision:0,masked:!1},totalFee:0,feeTamThu:0,feeTong:0,checkPaid:!0,activeEdit:!0,paymentFile:"",dialogPDF:!1,dialogPDFLoading:!0}},directives:{money:n["VMoney"]},created:function(){var t=this;t.data_payment=t.payments,t.payments&&setTimeout((function(){var e="number"===typeof t.payments.feeAmount?Number(t.payments.feeAmount):Number(t.payments.feeAmount.toString().replace(/\./g,""));if(1===t.payments.requestPayment){var a="number"===typeof t.payments.serviceAmount?Number(t.payments.serviceAmount):Number(t.payments.serviceAmount.toString().replace(/\./g,""));t.feeTong=e+a,t.totalFee=e+a}else if(2===t.payments.requestPayment){var i=t.payments.serviceAmount?Number(t.payments.serviceAmount.toString().replace(/\./g,"")):0,o=t.payments.shipAmount?Number(t.payments.shipAmount.toString().replace(/\./g,"")):0;2!==t.viaPortal&&"2"!==t.viaPortal||0===o?t.totalFee=e+i:t.totalFee=e+i+o}else{var n=t.payments.advanceAmount?Number(t.payments.advanceAmount.toString().replace(/\./g,"")):0,s=t.payments.serviceAmount?Number(t.payments.serviceAmount.toString().replace(/\./g,"")):0,r=t.payments.shipAmount?Number(t.payments.shipAmount.toString().replace(/\./g,"")):0;if(2!==t.viaPortal&&"2"!==t.viaPortal||0===r?(t.feeTong=e+s,t.totalFee=e+s-n):(t.feeTong=e+s+r,t.totalFee=e+s+r-n),5===t.payments.requestPayment){var c=t.detailDossier;t.$store.dispatch("getPaymentFiles",c).then((function(e){t.paymentFile=e}))}}t.totalFee<0&&(t.totalFee=0)}),300)},computed:{paymentFileName:function(){return this.$store.getters.getPaymentFileName},originality:function(){var t=this;return t.getOriginality()}},watch:{viaPortal:function(t){console.log("viaPortal",t),this.changeFee()},detailDossier:function(t){var e=this;if(5===e.payments.requestPayment){var a=t;console.log("run get paymentfile",a),e.$store.dispatch("getPaymentFiles",a).then((function(t){e.paymentFile=t}))}}},methods:{changeFee:function(){var t=this,e=t.data_payment,a=e.feeAmount?Number(e.feeAmount.toString().replace(/\./g,"")):0;if(1===e.requestPayment){var i=t.payments.serviceAmount?Number(t.payments.serviceAmount.toString().replace(/\./g,"")):0;t.feeTong=a+i,t.totalFee=a+i}else if(2===e.requestPayment){var o=t.payments.serviceAmount?Number(t.payments.serviceAmount.toString().replace(/\./g,"")):0,n=t.payments.shipAmount?Number(t.payments.shipAmount.toString().replace(/\./g,"")):0;2!==t.viaPortal&&"2"!==t.viaPortal||0===n?t.totalFee=a+o:t.totalFee=a+o+n}else{var s=Number(e.advanceAmount.toString().replace(/\./g,"")),r=Number(e.serviceAmount.toString().replace(/\./g,"")),c=Number(e.shipAmount.toString().replace(/\./g,""));2!==t.viaPortal&&"2"!==t.viaPortal||0===c?(t.feeTong=a+r,t.totalFee=a+r-s):(t.feeTong=a+r+c,t.totalFee=a+r+c-s)}t.totalFee<0&&(t.totalFee=0)},viewFile:function(){var t=this;t.dialogPDFLoading=!0,t.dialogPDF=!0;var e={dossierId:t.detailDossier.dossierId,referenceUid:t.detailDossier.referenceUid};t.$store.dispatch("viewPaymentFile",e).then((function(e){t.dialogPDFLoading=!1,document.getElementById("dialogPreview").src=e}))},downloadPaymentFile:function(t){var e=this,a="/o/rest/v2/dossiers/"+e.detailDossier.dossierId+"/payments/"+e.detailDossier.referenceUid+"/confirmfile";window.open(a)},currency:function(t){if(t){var e=(t/1).toFixed(0).replace(".",",");return e.toString().replace(/\B(?=(\d{3})+(?!\d))/g,".")}return""},goBack:function(){window.history.back()}},filters:{}},r=s,c=a("2877"),l=a("6544"),d=a.n(l),u=a("8336"),h=a("b0af"),p=a("99d9"),m=a("169a"),g=a("cd55"),v=a("49e2"),f=a("0e8f"),_=a("132d"),y=a("a722"),C=a("490a"),D=a("9910"),T=a("e0c7"),x=a("2677"),b=a("a844"),S=a("71d9"),N=a("2a7f"),P=a("3a2f"),I=Object(c["a"])(r,i,o,!1,null,null,null);e["a"]=I.exports;d()(I,{VBtn:u["a"],VCard:h["a"],VCardText:p["b"],VDialog:m["a"],VExpansionPanel:g["a"],VExpansionPanelContent:v["a"],VFlex:f["a"],VIcon:_["a"],VLayout:y["a"],VProgressCircular:C["a"],VSpacer:D["a"],VSubheader:T["a"],VTextField:x["a"],VTextarea:b["a"],VToolbar:S["a"],VToolbarTitle:N["b"],VTooltip:P["a"]})},f53c:function(t,e,a){"use strict";var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"form_vuejs"},[a("v-layout",{attrs:{wrap:""}},[a("v-flex",{staticClass:"px-2 my-2",attrs:{xs12:"",sm6:""}},[a("div",{staticStyle:{display:"flex","flex-wrap":"wrap","align-items":"center"}},[a("strong",[t._v("Tham chiếu thông tin từ mã tờ khai trực tuyến")]),a("div",{staticClass:"mx-2",staticStyle:{width:"100px"}},[a("v-text-field",{attrs:{solo:""},on:{keyup:function(e){if(!("button"in e)&&t._k(e.keyCode,"enter",13,e.key,"Enter"))return null;t.getDataEform()}},model:{value:t.eFormCode,callback:function(e){t.eFormCode=e},expression:"eFormCode"}})],1),a("v-btn",{staticClass:"ml-2",attrs:{small:"",color:"primary"},on:{click:function(e){t.getDataEform()}}},[t._v("Lấy dữ liệu")])],1)]),a("v-flex",{staticClass:"px-2 my-2",attrs:{xs12:""}},[a("strong",[t._v("Thông tin người nộp")])]),a("v-flex",{staticClass:"px-2",attrs:{xs12:"",sm6:""}},[a("label",{attrs:{for:""}},[t._v("Họ và tên "),a("span",{staticClass:"red--text"},[t._v("*")])]),a("v-text-field",{attrs:{rules:[t.rules.required],required:"",solo:""},on:{input:function(e){t.dossiers.delegateName=t.dossiers.delegateName.toUpperCase()},change:function(e){t.changeDossier()}},model:{value:t.dossiers.delegateName,callback:function(e){t.$set(t.dossiers,"delegateName",e)},expression:"dossiers.delegateName"}})],1),a("v-flex",{staticClass:"px-2 ",attrs:{xs12:"",sm6:""}},[a("label",[t._v("CMND/CCCD số "),a("span",{staticClass:"red--text"})]),a("suggestions",{attrs:{options:t.searchOptions,onItemSelected:t.onSearchItemSelected,onInputChange:t.onInputChange},scopedSlots:t._u([{key:"item",fn:function(e){return a("div",{staticClass:"single-item"},[a("v-list-tile-content",[a("v-list-tile-title",{domProps:{innerHTML:t._s(e.item.applicantName)}}),a("v-list-tile-sub-title",{domProps:{innerHTML:t._s(e.item.applicantIdNo)}})],1)],1)}}]),model:{value:t.dossiers.delegateIdNo,callback:function(e){t.$set(t.dossiers,"delegateIdNo",e)},expression:"dossiers.delegateIdNo"}}),t.checkCMT?a("div",[a("span",{staticClass:"red--text"},[t._v(t._s(t.messengeCMT))])]):t._e()],1),a("v-flex",{staticClass:"px-2 ",attrs:{xs12:"",sm6:""}},[a("label",[t._v("Điện thoại")]),a("v-text-field",{attrs:{rules:[t.rules.telNo],solo:""},on:{change:function(e){t.changeDossier()}},model:{value:t.dossiers.delegateTelNo,callback:function(e){t.$set(t.dossiers,"delegateTelNo",e)},expression:"dossiers.delegateTelNo"}})],1),a("v-flex",{staticClass:"px-2 ",attrs:{xs12:"",sm6:""}},[a("label",[t._v("Email")]),a("v-text-field",{attrs:{rules:[t.rules.varChar50],solo:""},on:{change:function(e){t.changeDossier()}},model:{value:t.dossiers.delegateEmail,callback:function(e){t.$set(t.dossiers,"delegateEmail",e)},expression:"dossiers.delegateEmail"}})],1),a("v-flex",{staticClass:"px-2 ",attrs:{xs12:"",sm3:""}},[a("label",{attrs:{for:""}},[t._v("Địa chỉ")]),a("v-text-field",{attrs:{placeholder:"Không quá 100 ký tự",solo:""},on:{change:function(e){t.changeDossier()}},model:{value:t.dossiers.delegateAddress,callback:function(e){t.$set(t.dossiers,"delegateAddress",e)},expression:"dossiers.delegateAddress"}})],1),a("v-flex",{staticClass:"px-2 ",attrs:{xs12:"",sm3:""}},[a("label",[t._v("Tỉnh/thành")]),a("v-autocomplete",{attrs:{items:t.delegateCitys,"item-text":"itemName","item-value":"itemCode",clearable:"","hide-no-data":"",solo:""},on:{change:function(e){t.changeDossier()}},model:{value:t.delegateCityCode,callback:function(e){t.delegateCityCode=e},expression:"delegateCityCode"}})],1),a("v-flex",{staticClass:"px-2 ",attrs:{xs12:"",sm3:""}},[a("label",[t._v("Quận/huyện")]),a("v-autocomplete",{attrs:{items:t.delegateDistricts,"item-text":"itemName","item-value":"itemCode",clearable:"","hide-no-data":"",solo:""},on:{change:function(e){t.changeDossier()}},model:{value:t.delegateDistrictCode,callback:function(e){t.delegateDistrictCode=e},expression:"delegateDistrictCode"}})],1),a("v-flex",{staticClass:"px-2 ",attrs:{xs12:"",sm3:""}},[a("label",[t._v("Xã/phường")]),a("v-autocomplete",{attrs:{items:t.delegateWards,"item-text":"itemName","item-value":"itemCode",clearable:"","hide-no-data":"",solo:""},on:{change:function(e){t.changeDossier()}},model:{value:t.delegateWardCode,callback:function(e){t.delegateWardCode=e},expression:"delegateWardCode"}})],1),a("v-flex",{staticClass:"px-2 ",attrs:{xs12:"",sm6:""}},[a("div",{staticStyle:{display:"flex","flex-wrap":"wrap","align-items":"center"}},[a("strong",[t._v("Danh sách các giấy tờ cần đăng ký CNLS/HPHLS "),a("span",{staticClass:"red--text"},[t._v("*")])]),a("v-btn",{staticClass:"ml-2",attrs:{small:"",color:"primary"},on:{click:function(e){t.openThemGiayTo()}}},[t._v("Thêm giấy tờ")])],1)]),a("v-flex",{staticClass:"px-2 my-2",attrs:{xs12:""}},[a("v-data-table",{staticClass:"table_vuejs",staticStyle:{"border-left":"0.5px solid #dedede"},attrs:{headers:t.headerGiayTo,items:t.listGiayTo,"hide-actions":"","no-data-text":"Không có giấy tờ nào"},scopedSlots:t._u([{key:"headerCell",fn:function(e){return[a("p",[a("strong",{staticStyle:{color:"black!important"}},[t._v(t._s(e.header.text))])]),a("p",{staticStyle:{"font-weight":"400!important"}},[t._v(t._s(e.header.textEng))])]}},{key:"items",fn:function(e){return[a("tr",[a("td",[a("v-checkbox",{attrs:{primary:""},on:{change:function(a){t.toggleKT(e.index,e.item)}},model:{value:e.item.kiem_tra,callback:function(a){t.$set(e.item,"kiem_tra",a)},expression:"props.item.kiem_tra"}})],1),a("td",[t._v(t._s(e.item.ten_giay_to))]),a("td",[t._v(t._s(e.item.loai_giay_to))]),a("td",[t._v(t._s(e.item.ten_nguoi_duoc_cap))]),a("td",[t._v(t._s(e.item.so_ban))]),a("td",[t._v(t._s(e.item.so_hieu_giay_to))]),a("td",[t._v(t._s(e.item.co_quan_cap))]),a("td",[t._v(t._s(e.item.nguoi_ky))]),a("td",[t._v(t._s(e.item.chuc_danh_ky))]),a("td",[t._v(t._s(e.item.ngay_ky))]),a("td",[a("v-btn",{attrs:{flat:"",icon:"",color:"primary"},on:{click:function(a){t.openDialogUpdateGiayTo(e.index,e.item)}}},[a("v-icon",[t._v("create")])],1)],1),a("td",[a("v-btn",{attrs:{flat:"",icon:"",color:"primary"},on:{click:function(a){t.openDialogCopyGiayTo(e.index,e.item)}}},[a("v-icon",[t._v("file_copy")])],1)],1),a("td",[a("v-btn",{attrs:{flat:"",icon:"",color:"#F44336"},on:{click:function(a){t.deleteGiayTo(e.index)}}},[a("v-icon",[t._v("delete")])],1)],1)])]}}])})],1),a("v-flex",{staticClass:"px-2 my-2",attrs:{xs12:""}},[a("strong",[t._v("Số lượng giấy tờ: "),a("span",[t._v(t._s(t.tongSoBan))])])]),a("v-flex",{staticClass:"px-2 my-2",attrs:{xs12:""}},[a("strong",[t._v("Thành phần hồ sơ kèm theo")])]),a("v-flex",{staticClass:"px-2 my-2",attrs:{xs12:""}},[a("v-data-table",{staticClass:"table_vuejs",staticStyle:{"border-left":"0.5px solid #dedede"},attrs:{headers:t.headerThanhPhanHoSo,items:t.dossierMarkArr,"hide-actions":"","no-data-text":"Không có thành phần hồ sơ nào"},scopedSlots:t._u([{key:"items",fn:function(e){return["TP01"!=e.item.dossierPartNo&&"TP03"!=e.item.dossierPartNo&&1===e.item.partType?a("tr",[a("td",[a("v-checkbox",{attrs:{primary:"","hide-details":"",value:e.item},on:{change:function(a){t.toggleCheckbox(e.item,e.index)}},model:{value:t.selected,callback:function(e){t.selected=e},expression:"selected"}},[t._v("\n                                >")])],1),a("td",[t._v(t._s(e.item.partName))]),a("td",[a("v-select",{attrs:{items:t.fileMarks,"item-text":"name","item-value":"value",solo:""},on:{change:function(a){t.changeThanhPhan(e.item,e.index)}},model:{value:e.item.fileMark,callback:function(a){t.$set(e.item,"fileMark",a)},expression:"props.item.fileMark"}})],1),a("td",[a("v-text-field",{attrs:{solo:""},on:{change:function(a){t.changeThanhPhan(e.item,e.index)}},model:{value:e.item.recordCount,callback:function(a){t.$set(e.item,"recordCount",a)},expression:"props.item.recordCount"}})],1)]):t._e()]}}])})],1),a("v-flex",{staticClass:"px-2",attrs:{xs12:""}},[a("v-checkbox",{attrs:{label:"Đề nghị chứng nhận giấy tờ đã được xuất trình tại Bộ Ngoại giao"},model:{value:t.de_nghi_chung_nhan,callback:function(e){t.de_nghi_chung_nhan=e},expression:"de_nghi_chung_nhan"}})],1),a("v-flex",{staticClass:"px-2",attrs:{xssss12:"",sm6:""}},[a("label",{attrs:{for:""}},[t._v("Giấy tờ trên sẽ sử dụng tại nước "),a("span",{staticClass:"red--text"},[t._v("*")])]),a("v-autocomplete",{attrs:{items:t.listQuocGia,"item-text":"TEN","item-value":"MA",clearable:"",multiple:"","hide-no-data":"",rules:[t.rules.required,t.rules.requiredArr],required:"",solo:""},model:{value:t.su_dung_tai_nuoc_ma,callback:function(e){t.su_dung_tai_nuoc_ma=e},expression:"su_dung_tai_nuoc_ma"}})],1),a("v-flex",{staticClass:"px-2",attrs:{xs12:"",sm6:""}},[a("label",{attrs:{for:""}},[t._v("Mục đích sử dụng")]),a("v-autocomplete",{attrs:{items:t.listMucDichSuDung,"item-text":"TEN","item-value":"ID",clearable:"","return-object":"","hide-no-data":"",solo:""},model:{value:t.muc_dich,callback:function(e){t.muc_dich=e},expression:"muc_dich"}})],1),a("v-flex",{staticClass:"px-2 my-2",attrs:{xs12:"",sm4:""}},[a("label",{attrs:{for:""}},[t._v("Dự thu lệ phí")]),a("v-text-field",{attrs:{solo:""},model:{value:t.le_phi_format,callback:function(e){t.le_phi_format=e},expression:"le_phi_format"}})],1),a("v-flex",{staticClass:"px-2 my-2",attrs:{xs12:"",sm4:""}},[a("label",{attrs:{for:""}},[t._v("Ngày hẹn trả")]),a("br"),a("v-menu",{ref:"menu5",attrs:{"close-on-content-click":!1,transition:"scale-transition","offset-y":""},model:{value:t.menu5,callback:function(e){t.menu5=e},expression:"menu5"}},[a("v-text-field",{attrs:{slot:"activator","persistent-hint":"","append-icon":"event",hint:"DD/MM/YYYY",rules:[t.rules.required]},on:{change:function(e){t.dateDueDate=t.parseDate(t.dateDueDateFormated.substring(0,10))}},slot:"activator",model:{value:t.dateDueDateFormated,callback:function(e){t.dateDueDateFormated=e},expression:"dateDueDateFormated"}}),a("v-date-picker",{attrs:{"no-title":"",locale:"vi"},on:{input:function(e){t.menu5=!1}},model:{value:t.dateDueDate,callback:function(e){t.dateDueDate=e},expression:"dateDueDate"}})],1)],1),a("v-flex",{staticClass:"px-2 ",attrs:{xs12:"",sm4:""}},[a("v-checkbox",{attrs:{label:"Nhận kết quả qua bưu chính"},model:{value:t.viaPostal,callback:function(e){t.viaPostal=e},expression:"viaPostal"}})],1),a("v-flex",{staticClass:"px-2 ",attrs:{xs12:""}},[a("label",{attrs:{for:""}},[t._v("Ghi chú")]),a("v-textarea",{attrs:{name:"input-7-1",solo:""},model:{value:t.dossiers.dossierNote,callback:function(e){t.$set(t.dossiers,"dossierNote",e)},expression:"dossiers.dossierNote"}})],1)],1),a("v-dialog",{staticClass:"form_vuejs",attrs:{"max-width":"1000px",persistent:""},model:{value:t.dialogGiayTo,callback:function(e){t.dialogGiayTo=e},expression:"dialogGiayTo"}},[t.dialogTimKiemConDau?a("v-card",[a("v-card-title",{staticClass:"headline lighten-2",staticStyle:{display:"flex","justify-content":"space-between"},attrs:{"primary-title":""}},[t._v("\n                Thông tin giấy tờ\n                "),a("v-btn",{attrs:{color:"#115ebe",fab:"",small:"",dark:""},on:{click:function(e){t.close()}}},[a("v-icon",[t._v("cancel")])],1)],1),a("v-card-text",{staticClass:"form_vuejs"},[a("v-layout",{attrs:{wrap:""}},[a("v-flex",{attrs:{xs12:"",sm8:""}},[a("v-layout",{attrs:{wrap:""}},[a("v-flex",{staticClass:"px-2 my-2",attrs:{xs12:""}},[a("label",{attrs:{for:""}},[t._v("Tên cơ quan")]),a("v-text-field",{attrs:{solo:""},on:{keyup:function(e){if(!("button"in e)&&t._k(e.keyCode,"enter",13,e.key,"Enter"))return null;t.getDSNguoiKy()}},model:{value:t.co_quan_cap_tg,callback:function(e){t.co_quan_cap_tg=e},expression:"co_quan_cap_tg"}})],1),a("v-flex",{staticClass:"px-2 my-2",attrs:{xs12:""}},[a("label",{attrs:{for:""}},[t._v("Người ký")]),a("div",{staticStyle:{display:"flex","flex-wrap":"wrap","align-items":"center"}},[a("v-text-field",{attrs:{solo:""},on:{keyup:function(e){if(!("button"in e)&&t._k(e.keyCode,"enter",13,e.key,"Enter"))return null;t.getDSNguoiKy()}},model:{value:t.nguoi_ky_tg,callback:function(e){t.nguoi_ky_tg=e},expression:"nguoi_ky_tg"}}),a("v-btn",{attrs:{small:"",color:"primary"},on:{click:function(e){t.getDSNguoiKy()}}},[t._v("Tìm kiếm")])],1)]),a("v-flex",{staticClass:"px-2 my-2",attrs:{xs12:""}},[a("label",{attrs:{for:""}},[t._v("Danh sách người ký")])]),a("v-flex",{staticClass:"px-2 my-2",attrs:{xs12:""}},[a("v-data-table",{staticClass:"table_vuejs",staticStyle:{"border-left":"0.5px solid #dedede"},attrs:{headers:t.headerNguoiKy,items:t.listNguoiKy,"no-data-text":"Không có người ký nào","rows-per-page-text":""},scopedSlots:t._u([{key:"items",fn:function(e){return[a("tr",{staticStyle:{cursor:"pointer"},on:{click:function(a){t.getChuKyConDau(e.item)}}},[a("td",[t._v(t._s(e.item.TEN))]),a("td",[t._v(t._s(e.item.TEN_CHUC_VU))]),a("td",[t._v(t._s(e.item.TEN_CQQL))])])]}}])})],1)],1)],1),a("v-flex",{attrs:{xs12:"",sm4:""}},[a("v-layout",{staticClass:"pa-2",staticStyle:{border:"0.5px solid #dedede"},attrs:{wrap:""}},[a("v-flex",{attrs:{xs12:""}},[t._v(" Mẫu con dấu")]),a("v-flex",{attrs:{xs12:""}},[a("div",{staticStyle:{width:"100%",height:"190px",border:"0.5px solid #dedede","overflow-x":"scroll"}},[a("div",[t.loadingImage?a("div",{staticStyle:{height:"140px","font-size":"16pt",color:"blue"}},[t._v("Loading ....")]):t._e(),t.loadingImage?t._e():a("div",{staticStyle:{width:"100%",height:"190px",display:"flex"}},t._l(t.listConDau,(function(e,i){return a("div",{key:i},[a("img",{staticStyle:{height:"140px"},attrs:{src:"data:image/png;base64,"+e.strConDau,alt:""},on:{click:function(a){t.phongTo(e.strConDau)}}}),a("v-checkbox",{staticClass:"ma-0",attrs:{primary:"",label:e["CD_NGAY_HL"],value:e["CD_MA_CON_DAU"]},on:{change:function(a){t.checkedConDau(e)}},model:{value:t.chonConDau,callback:function(e){t.chonConDau=e},expression:"chonConDau"}},[t._v("\n                                                >")])],1)})),0)])])]),a("v-flex",{staticClass:"my-2",attrs:{xs12:""}},[t._v(" Mẫu chữ ký")]),a("v-flex",{attrs:{xs12:""}},[a("div",{staticStyle:{width:"100%",height:"190px",border:"0.5px solid #dedede","overflow-x":"scroll"}},[a("div",[t.loadingImage?a("div",{staticStyle:{height:"140px","font-size":"16pt",color:"blue"}},[t._v("Loading ....")]):t._e(),t.loadingImage?t._e():a("div",{staticStyle:{width:"100%",height:"190px",display:"flex"}},t._l(t.listChuKy,(function(e,i){return a("div",{key:i},[a("img",{staticStyle:{height:"140px"},attrs:{src:"data:image/png;base64,"+e.strChuKy,alt:""},on:{click:function(a){t.phongTo(e.strChuKy)}}}),a("v-checkbox",{staticClass:"ma-0",attrs:{primary:"",value:e["CK_MA_CK"],label:e["CK_NGAY_HL"]},on:{change:function(a){t.checkedChuKy(e)}},model:{value:t.chonChuKy,callback:function(e){t.chonChuKy=e},expression:"chonChuKy"}},[t._v("\n                                                >")])],1)})),0)])])])],1)],1),a("v-flex",{staticClass:"text-xs-right",attrs:{xs12:""}},[a("v-btn",{attrs:{small:"",color:"primary"},on:{click:function(e){t.chonConDauChuKy()}}},[t._v("Chọn")]),a("v-btn",{attrs:{small:"",color:"primary"},on:{click:function(e){t.closeConDauChuKy()}}},[t._v("Quay lại")])],1)],1)],1)],1):a("v-card",[a("v-card-title",{staticClass:"headline lighten-2",staticStyle:{display:"flex","justify-content":"space-between"},attrs:{"primary-title":""}},[t._v("\n                Thông tin giấy tờ\n                "),a("v-btn",{attrs:{color:"#115ebe",fab:"",small:"",dark:""},on:{click:function(e){t.close()}}},[a("v-icon",[t._v("cancel")])],1)],1),a("v-card-text",{staticClass:"form_vuejs"},[a("v-layout",{attrs:{wrap:""}},[a("v-flex",{attrs:{xs12:"",sm8:""}},[a("v-form",{ref:"formGiayTo",attrs:{"lazy-validation":""}},[a("v-layout",{attrs:{wrap:""}},[a("v-flex",{staticClass:"px-2 my-2",attrs:{xs12:"",sm4:""}},[a("label",{attrs:{for:""}},[t._v("Tên giấy tờ "),a("span",{staticClass:"red--text"},[t._v("*")])]),a("v-autocomplete",{attrs:{items:t.listTenGiayTo,"item-text":"TEN","item-value":"MA",clearable:"",solo:"","hide-no-data":"","return-object":"",required:"",rules:[t.rules.required]},model:{value:t.giay_to,callback:function(e){t.giay_to=e},expression:"giay_to"}})],1),a("v-flex",{staticClass:"px-2 my-2",attrs:{xs12:"",sm4:""}},[a("label",{attrs:{for:""}},[t._v("Loại giấy tờ "),a("span",{staticClass:"red--text"},[t._v("*")])]),a("v-autocomplete",{attrs:{items:t.litstLoaiGiayTo,"item-text":"text","item-value":"value",clearable:"",solo:"","hide-no-data":"","return-object":"",required:"",rules:[t.rules.required]},model:{value:t.loai_giay_to,callback:function(e){t.loai_giay_to=e},expression:"loai_giay_to"}})],1),a("v-flex",{staticClass:"px-2 my-2",attrs:{xs12:"",sm4:""}},[a("label",{attrs:{for:""}},[t._v("Ngày ký "),a("span",{staticClass:"red--text"},[t._v("*")])]),a("v-menu",{ref:"menu",attrs:{"close-on-content-click":!1,transition:"scale-transition","offset-y":""},model:{value:t.menu,callback:function(e){t.menu=e},expression:"menu"}},[a("v-text-field",{attrs:{slot:"activator","persistent-hint":"","append-icon":"event",placeholder:"DD/MM/YYYY",solo:"",rules:[t.rules.required,t.rules.checkDate],required:""},on:{change:function(e){t.changeNgayKy()},input:function(e){t.inputNgayKy()}},slot:"activator",model:{value:t.ngay_ky,callback:function(e){t.ngay_ky=e},expression:"ngay_ky"}}),a("v-date-picker",{attrs:{"no-title":"",locale:"vi"},on:{input:function(e){t.menu=!1}},model:{value:t.dateNgayKy,callback:function(e){t.dateNgayKy=e},expression:"dateNgayKy"}})],1)],1),a("v-flex",{staticClass:"px-2 my-2",attrs:{xs12:"",sm4:""}},[a("label",{attrs:{for:""}},[t._v("Loại CV "),a("span",{staticClass:"red--text"},[t._v("*")])]),a("v-autocomplete",{attrs:{items:t.listLoaiCV,"item-text":"text","item-value":"value",clearable:"",solo:"","hide-no-data":"","return-object":"",required:"",rules:[t.rules.required]},model:{value:t.loai_cong_viec,callback:function(e){t.loai_cong_viec=e},expression:"loai_cong_viec"}})],1),a("v-flex",{staticClass:"px-2 my-2",attrs:{xs12:"",sm4:""}},[a("label",{attrs:{for:""}},[t._v("Số hiệu của giấy tờ "),a("span",{staticClass:"red--text"},[t._v("*")])]),a("v-text-field",{attrs:{solo:"",required:"",rules:[t.rules.required,t.rules.soHieuGiayTo]},model:{value:t.so_hieu_giay_to,callback:function(e){t.so_hieu_giay_to=e},expression:"so_hieu_giay_to"}})],1),a("v-flex",{staticClass:"px-2 my-2",attrs:{xs12:"",sm4:""}},[a("label",{attrs:{for:""}},[t._v("Tổng số bản"),a("span",{staticClass:"red--text"},[t._v("*")])]),a("v-text-field",{attrs:{solo:"",type:"number",required:"",rules:[t.rules.required]},model:{value:t.so_ban,callback:function(e){t.so_ban=e},expression:"so_ban"}})],1),a("v-flex",{staticClass:"px-2 my-2",attrs:{xs12:""}},[a("label",{attrs:{for:""}},[t._v("Tên người được cấp giấy tờ "),a("span",{staticClass:"red--text"},[t._v("*")])]),a("v-text-field",{attrs:{solo:"",required:"",rules:[t.rules.required]},model:{value:t.ten_nguoi_duoc_cap,callback:function(e){t.ten_nguoi_duoc_cap=e},expression:"ten_nguoi_duoc_cap"}})],1),a("v-flex",{staticClass:"px-2 my-2",attrs:{xs12:""}},[a("label",{attrs:{for:""}},[t._v("Cơ quan cấp / sao chứng thực "),a("span",{staticClass:"red--text"},[t._v("*")])]),a("v-text-field",{attrs:{solo:"",required:"",rules:[t.rules.required]},model:{value:t.co_quan_cap,callback:function(e){t.co_quan_cap=e},expression:"co_quan_cap"}})],1),a("v-flex",{staticClass:"px-2 my-2",attrs:{xs12:"",sm4:""}},[a("label",{attrs:{for:""}},[t._v("Người ký "),a("span",{staticClass:"red--text"},[t._v("*")])]),a("v-text-field",{attrs:{solo:"",required:"",rules:[t.rules.required]},model:{value:t.nguoi_ky,callback:function(e){t.nguoi_ky=e},expression:"nguoi_ky"}})],1),a("v-flex",{staticClass:"px-2 my-2",attrs:{xs12:"",sm4:""}},[a("label",{attrs:{for:""}},[t._v("Chức danh "),a("span",{staticClass:"red--text"},[t._v("*")])]),a("v-text-field",{attrs:{solo:"",required:"",rules:[t.rules.required]},model:{value:t.chuc_danh_ky,callback:function(e){t.chuc_danh_ky=e},expression:"chuc_danh_ky"}})],1),a("v-flex",{staticClass:"text-xs-right",attrs:{xs12:""}},[a("v-btn",{attrs:{small:"",color:"primary"},on:{click:function(e){t.openKiemTraChuKyConDau()}}},[t._v("Kiểm tra chữ ký con dấu")]),a("v-btn",{attrs:{small:"",color:"primary",disabled:"add"===t.update_giayto||0===t.update_giayto},on:{click:function(e){t.backGiayto()}}},[a("v-icon",[t._v("skip_previous")])],1),a("v-btn",{attrs:{small:"",color:"primary",disabled:"add"===t.update_giayto||t.update_giayto===t.listGiayTo.length-1},on:{click:function(e){t.nextGiayto()}}},[a("v-icon",[t._v("skip_next")])],1)],1)],1)],1)],1),a("v-flex",{attrs:{xs12:"",sm4:""}},[a("v-layout",{staticClass:"pa-2",staticStyle:{border:"0.5px solid #dedede"},attrs:{wrap:""}},[a("v-flex",{attrs:{xs12:""}},[t._v(" Mẫu con dấu")]),a("v-flex",{attrs:{xs12:""}},[a("div",{staticStyle:{width:"100%",height:"140px",border:"0.5px solid #dedede",display:"flex","justify-content":"center","overflow-x":"scroll"}},[a("img",{staticStyle:{height:"100%"},attrs:{src:"data:image/png;base64,"+t.conDau,alt:""},on:{click:function(e){t.phongTo(t.conDau)}}})])]),a("v-flex",{staticClass:"my-2",attrs:{xs12:""}},[t._v(" Mẫu chữ ký")]),a("v-flex",{attrs:{xs12:""}},[a("div",{staticStyle:{width:"100%",height:"140px",border:"0.5px solid #dedede",display:"flex","justify-content":"center","overflow-x":"scroll"}},[a("img",{staticStyle:{height:"100%"},attrs:{src:"data:image/png;base64,"+t.chuKy,alt:""},on:{click:function(e){t.phongTo(t.chuKy)}}})])])],1)],1),a("v-flex",{staticClass:"text-xs-right",attrs:{xs12:""}},[a("v-btn",{attrs:{small:"",color:"primary"},on:{click:function(e){t.updateGiayTo()}}},[t._v("Cập nhập")]),a("v-btn",{attrs:{small:"",color:"primary"},on:{click:function(e){t.dialogGiayTo=!1}}},[t._v("Đóng")])],1)],1)],1)],1)],1),a("v-dialog",{staticClass:"form_vuejs",attrs:{"max-width":"800px",persistent:""},model:{value:t.dialogPhongTO,callback:function(e){t.dialogPhongTO=e},expression:"dialogPhongTO"}},[a("v-card",[a("v-card-title",{staticClass:"headline lighten-2",staticStyle:{display:"flex","justify-content":"space-between"},attrs:{"primary-title":""}},[a("v-btn",{attrs:{color:"#115ebe",fab:"",small:"",dark:""},on:{click:function(e){t.dialogPhongTO=!1}}},[a("v-icon",[t._v("cancel")])],1)],1),a("v-card-text",{staticClass:"form_vuejs"},[a("v-layout",{attrs:{wrap:""}},[a("v-flex",{attrs:{xs12:""}},[a("div",{attrs:{width:"100%; height: 500px;"}},[a("img",{staticStyle:{width:"100%",height:"500px"},attrs:{src:"data:image/png;base64,"+t.anhPhongTo,alt:""}})])])],1)],1)],1)],1)],1)},o=[],n=a("854a"),s=a.n(n),r=a("bc3a"),c=a.n(r),l=a("1157"),d=a.n(l),u=a("c4f6"),h=a.n(u);function p(t,e,a){return e in t?Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}function m(t,e){return f(t)||v(t,e)||g()}function g(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function v(t,e){var a=[],i=!0,o=!1,n=void 0;try{for(var s,r=t[Symbol.iterator]();!(i=(s=r.next()).done);i=!0)if(a.push(s.value),e&&a.length===e)break}catch(c){o=!0,n=c}finally{try{i||null==r["return"]||r["return"]()}finally{if(o)throw n}}return a}function f(t){if(Array.isArray(t))return t}s.a.options={closeButton:!0,timeOut:"5000"};var _={props:["id","formCode"],components:{suggestions:h.a},data:function(){var t;return t={eFormCode:"",eFormCodeArr:[],updateStratus:!1,dialogPhongTO:!1,dialogGiayTo:!1,dialogTimKiemConDau:!1,isLoadingDelegateIdNo:!1,menu5:!1,anhPhongTo:"",loadingImage:!1,checkCMT:!1,messengeCMT:"",searchOptions:{inputClass:"input_vuejs"},chonConDau:[],chonChuKy:[],selected:[],applicants:[],headerGiayTo:[{text:"Đã KT",align:"center",sortable:!1,textEng:""},{text:"Tên giấy tờ",align:"center",sortable:!1,textEng:"Name of documents"},{text:"Loại giấy tờ",align:"center",sortable:!1,textEng:"Type of documents"},{text:"Tên người được cấp giấy tờ",align:"center",sortable:!1,textEng:"Holder of document"},{text:"Tổng số bản",align:"center",sortable:!1,textEng:"Total of Documents"},{text:"Số hiệu của giấy tờ",align:"center",sortable:!1,textEng:"Number sign of document"},{text:"Cơ quan cấp/sao chứng thực",align:"center",sortable:!1,textEng:"Authentication office"},{text:"Người ký",align:"center",sortable:!1,textEng:"Name of signer"},{text:"Chức danh",align:"center",sortable:!1,textEng:"Title of signer"},{text:"Ngày ký",align:"center",sortable:!1,textEng:"Signed date"},{text:"Sửa",align:"center",sortable:!1,textEng:""},{text:"Sao chép",align:"center",sortable:!1,textEng:""},{text:"Xóa",align:"center",sortable:!1,textEng:""}],listGiayTo:[],listMucDichSuDung:"",headerThanhPhanHoSo:[{text:"Chọn",align:"center",sorttable:!1},{text:"Tên thành phần",align:"center",sortable:!1},{text:"Loại",align:"center",sortable:!1},{text:"Số lượng",align:"center",sortable:!1}],headerNguoiKy:[{text:"Tên người ký",align:"center",sortable:!1},{text:"Chức danh",align:"center",sortable:!1},{text:"Đơn vị",align:"center",sortable:!1}],fileMarks:[{value:1,name:"Bản chụp"},{value:2,name:"Bản sao"},{value:3,name:"Bản gốc"},{value:4,name:"Bản dịch"}],rules:{required:function(t){return!!t||"Thông tin này là bắt buộc"},required2:function(t){return!!t||"Thông tin này là bắt buộc"},requiredArr:function(t){if(Array.isArray(t))return!!t.length||"Thông tin này bắt buộc"},checkDate:function(t){if(t){var e=new Date,a=t.split("/"),i=m(a,3),o=i[0],n=i[1],s=i[2],r=new Date;return r.setFullYear(s,n-1,o),e>=r||"Ngày không được lớn hơn ngày hiện tại"}return!0},checkYear:function(t){var e=new Date,a=new Date;return a.setFullYear(t),e>=a||"Năm không được lớn hơn năm hiện tại"},credit:function(t){if(9===t.length){var e=/^(([0-9]{9,9}))$/;return e.test(t)||"Số CMND gồm 9 hoặc 12 ký tự 0-9"}var a=/^(([0-9]{12,12}))$/;return a.test(t)||"Số CMND gồm 9 hoặc 12 ký tự 0-9"},soHieuGiayTo:function(t){return!t||(!(t.length>50)||"Số hiệu giấy tờ không được quá 50 ký tự")},telNo:function(t){var e=/^0([1-9]{1}\d{8})$/;return t?e.test(t)||"Số điện thoại gồm 10 ký tự 0-9, eg: 0989123456, ...":[]},varchar50:function(t){return!t||(t=String(t).trim(),t.length<=50||"Không được nhập quá 50 ký tự")},varchar100:function(t){return!t||(t=String(t).trim(),t.length<=100||"Không được nhập quá 100 ký tự")},varchar255:function(t){return!t||(t=String(t).trim(),t.length<=255||"Không được nhập quá 255 ký tự")},varchar500:function(t){return!t||(t=String(t).trim(),t.length<=500||"Không được nhập quá 500 ký tự")},varchar5000:function(t){return!t||(t=String(t).trim(),t.length<=5e3||"Không được nhập quá 5000 ký tự")}},dateDueDateFormated:"",dateDueDate:(new Date).toISOString().substr(0,10),dateNgayKy:(new Date).toISOString().substr(0,10),crurentDate:new Date,crurentHours:"",listQuocGia:[],delegateCitys:[],delegateCityCode:"",delegateDistricts:[],delegateDistrictCode:"",delegateWards:[],delegateWardCode:"",dossierParts:[],dossierMarkArr:[],dossierFileArr:[],listTenGiayTo:[],listNguoiKy:[],litstLoaiGiayTo:[{value:"0501",text:"Bản chính"},{value:"0504",text:"Bản dịch"},{value:"0502",text:"Bản sao"},{value:"0503",text:"Bản trích lục"}],listLoaiCV:[{value:"HPHLS",text:"HPHLS"},{value:"CNLS",text:"CNLS"},{value:"CNXT",text:"CNXT"}],chuKy:"",conDau:"",viaPostal:!1,conDauSelected:{},chuKySelected:{},listConDau:[],listChuKy:[],dossierFileCustom:[],muc_dich:"",nguoi_ky_tg:"",co_quan_cap_tg:"",chuc_danh_ky_tg:"",ma_co_quan_cap_tg:"",ma_nguoi_ky_tg:"",ma_chuc_vu_tg:"",ma_con_dau_tg:"",ma_chu_ky_tg:"",su_dung_tai_nuoc_ma:[],su_dung_tai_nuoc:[],loai_giay_to:"",loai_cong_viec:"",de_nghi_chung_nhan:null,giay_to:null,so_hieu_giay_to:"",so_ban:"",ten_nguoi_duoc_cap:"",co_quan_cap:"",ma_co_quan_cap:"",ma_nguoi_ky:"",chuc_danh_ky:"",ma_chuc_vu:"",ma_con_dau:"",ma_chu_ky:"",nguoi_ky:""},p(t,"chuc_danh_ky",""),p(t,"ngay_ky",""),p(t,"tongSoBan",""),p(t,"serviceCode",d()("#serviceCode_hidden").val()),p(t,"govAgencyCode",d()("#govAgencyCode_hidden").val()),p(t,"dossierTemplateNo",""),p(t,"update_giayto",""),p(t,"dossiers",{applicantName:d()("#applicantName").val(),applicantIdType:"citizen",applicantIdNo:"",address:"",cityCode:"",districtCode:"",wardCode:"",contactTelNo:"",contactEmail:"",delegateName:"",delegateIdNo:"",delegateTelNo:"",delegateEmail:"",delegateAddress:"",delegateCityCode:"",delegateDistrictCode:"",delegateWardCode:"",applicantNote:"",dossierName:d()("#serviceName_hidden").val(),viaPostal:1,postalServiceCode:"VNPOST",postalAddress:"",postalCityCode:"",postalTelNo:"",sampleCount:1,dueDate:"",dossierNote:"",Doan_HCTN:"",dossierFilePayment:"",metaData:"{}"}),p(t,"payment",{}),p(t,"tongSoBanTG",0),t},created:function(){var t=this;t.$nextTick((function(){var e=t.$router.history.current.query;t.dossierTemplateNo=e.hasOwnProperty("template_no")&&e.template_no?e.template_no:"",t.eFormCode=e.hasOwnProperty("eformCode")&&e.eformCode?e.eformCode:"","UPDATE"===t.formCode?t.getDetail():(t.dossiers["metaData"]=JSON.stringify({newFormTemplate:"true",dossierFileCustom:[],totalRecord:0}),t.getThanhPhan(),t.eFormCode&&setTimeout((function(){t.getDataEform()}),500)),t.getDelegateCity(),t.getQuocGia(),t.getMucDich(),t.getTenGiayTo()}))},watch:{payment:{deep:!0,handler:function(t,e){d()("#payment_hidden").val(JSON.stringify(t))}},dossiers:{deep:!0,handler:function(t,e){console.log(t),console.log(e),d()("#dossiers_hidden").val(JSON.stringify(t)),console.log(t["applicantIdNo"],t.delegateIdNo),console.log(d()("#dossiers_hidden").val(JSON.stringify(t)))}},dossierFileArr:{deep:!0,handler:function(t,e){d()("#dossierFileArr_hidden").val(JSON.stringify(t))}},dossierMarkArr:{deep:!0,handler:function(t,e){var a=t.filter((function(t){return t.recordCount}));d()("#dossierMarkArr_hidden").val(JSON.stringify(a))}},delegateCityCode:function(t){this.dossiers.delegateCityCode=t,this.getDelegateDistrict()},delegateDistrictCode:function(t){this.dossiers.delegateDistrictCode=t,this.getDelegateWard()},delegateWardCode:function(t){this.dossiers.delegateWardCode=t},dateNgayKy:function(t){this.ngay_ky=this.formatDate(this.dateNgayKy)},viaPostal:function(t){this.dossiers.viaPostal=t?2:1},de_nghi_chung_nhan:function(t){for(var e=this,a=0;a<e.dossierFileArr.length;a++)if("TP01"==e.dossierFileArr[a]["partNo"])try{var i=JSON.parse(e.dossierFileArr[a]["formData"]);i["de_nghi_chung_nhan"]=!!t,e.dossierFileArr[a]["formData"]=JSON.stringify(i)}catch(n){var o={de_nghi_chung_nhan:!!t};e.dossierFileArr[a]["formData"]=JSON.stringify(o)}d()("#dossierFileArr_hidden").val(JSON.stringify(e.dossierFileArr))},su_dung_tai_nuoc_ma:function(t){for(var e=this,a=0;a<e.dossierFileArr.length;a++)if("TP01"==e.dossierFileArr[a]["partNo"])try{var i=JSON.parse(e.dossierFileArr[a]["formData"]);i["su_dung_tai_nuoc_ma"]=t;for(var o="",n=function(a){var i=e.listQuocGia.find((function(e){return e.MA===t[a]}));i&&(o+=""===o?i.TEN:","+i.TEN)},s=0;s<t.length;s++)n(s);i["su_dung_tai_nuoc"]=o,e.dossierFileArr[a]["formData"]=JSON.stringify(i)}catch(h){for(var r="",c=function(a){var i=e.listQuocGia.find((function(e){return e.MA===t[a]}));i&&(r+=""===r?i.TEN:","+i.TEN)},l=0;l<t.length;l++)c(l);var u={su_dung_tai_nuoc_ma:t,su_dung_tai_nuoc:r};e.dossierFileArr[a]["formData"]=JSON.stringify(u)}d()("#dossierFileArr_hidden").val(JSON.stringify(e.dossierFileArr))},muc_dich:function(t){for(var e=this,a=0;a<e.dossierFileArr.length;a++)if("TP01"==e.dossierFileArr[a]["partNo"])try{var i=JSON.parse(e.dossierFileArr[a]["formData"]);i["ma_muc_dich"]=t.MA,i["muc_dich"]=t.TEN,e.dossierFileArr[a]["formData"]=JSON.stringify(i)}catch(n){var o={ma_muc_dich:t.MA,muc_dich:t.TEN};e.dossierFileArr[a]["formData"]=JSON.stringify(o)}d()("#dossierFileArr_hidden").val(JSON.stringify(e.dossierFileArr))},dateDueDate:function(t){this.dateDueDateFormated=this.formatDate(this.dateDueDate);var e=this.dateDueDate.split("-"),a=m(e,3),i=(a[0],a[1],a[2],new Date(this.dateDueDate));this.dossiers.dueDate=i.getTime()}},methods:{computeDate:function(){var t=this;if(parseInt(t.tongSoBan)>=10){var e={url:"/o/rest/v2/dossiers/5/calculate/duedate",headers:{groupId:Liferay.ThemeDisplay.getScopeGroupId()}};c.a.request(e).then((function(e){t.dossiers["durationCount"]=5;var a=e.data.substr(0,10);t.dateDueDate=t.parseDate(a)})).catch((function(t){}))}if(parseInt(t.tongSoBan)<10){var a={url:"/o/rest/v2/dossiers/2/calculate/duedate",headers:{groupId:Liferay.ThemeDisplay.getScopeGroupId()}};c.a.request(a).then((function(e){t.dossiers["durationCount"]=2;var a=e.data.substr(0,10);t.dateDueDate=t.parseDate(a)})).catch((function(t){}))}t.tongSoBanTG=parseInt(t.tongSoBan)},getDetail:function(){var t=this,e={url:"/o/rest/v2/dossiers/"+t.id,headers:{groupId:Liferay.ThemeDisplay.getScopeGroupId()}};c.a.request(e).then((function(e){var a=JSON.parse(e.data.metaData);a.dossierFileCustom&&(t.dossierFileCustom=a.dossierFileCustom),t.dossiers=e.data,t.dossiers["bookingName"]=e.data["applicantName"],t.delegateCityCode=t.dossiers.delegateCityCode,t.delegateDistrictCode=t.dossiers.delegateDistrictCode,t.delegateWardCode=t.dossiers.delegateWardCode,t.dateDueDate=t.parseDate(t.dossiers.dueDate.substr(0,10)),t.crurentHours=t.dossiers.dueDate.substring(10),t.viaPostal=2===t.dossiers.viaPostal,t.getThanhPhan(),t.getDossierFile()})).catch((function(t){}))},getDossierFile:function(){var t=this,e={url:"/o/rest/v2/dossiers/"+t.id+"/files",headers:{groupId:Liferay.ThemeDisplay.getScopeGroupId()}};c.a.request(e).then((function(e){var a=e.data.data;if(a.length)for(var i=0;i<a.length;i++){var o={partNo:a[i]["dossierPartNo"],formData:a[i]["formData"],eform:"true",referenceUid:a[i]["referenceUid"]};if(t.dossierFileArr.push(o),"TP01"===a[i]["dossierPartNo"]){var n=JSON.parse(a[i]["formData"]);t.listGiayTo=n.list_giay_to,t.checkCKCD(),t.de_nghi_chung_nhan=n.de_nghi_chung_nhan,t.su_dung_tai_nuoc_ma=n.su_dung_tai_nuoc_ma,t.muc_dich={MA:n.ma_muc_dich,TEN:n.muc_dich},t.tongSoBan=0,t.listGiayTo.forEach((function(e){t.tongSoBan+=parseInt(e["so_ban"])})),t.tongSoBanTG=t.tongSoBan,t.computeDate(),t.genLePhi()}}})).catch((function(t){}))},getDelegateCity:function(){var t=this,e={url:"/o/rest/v2/dictcollections/ADMINISTRATIVE_REGION/dictitems?level=0&parent=0",headers:{groupId:Liferay.ThemeDisplay.getScopeGroupId()}};c.a.request(e).then((function(e){t.delegateCitys=t.sortArr(e.data.data,"itemName")})).catch((function(t){}))},getDelegateDistrict:function(){var t=this,e={url:"/o/rest/v2/dictcollections/ADMINISTRATIVE_REGION/dictitems?level=1&parent="+t.delegateCityCode,headers:{groupId:Liferay.ThemeDisplay.getScopeGroupId()}};c.a.request(e).then((function(e){t.delegateDistricts=t.sortArr(e.data.data,"itemName")})).catch((function(t){}))},getDelegateWard:function(){var t=this,e={url:"/o/rest/v2/dictcollections/ADMINISTRATIVE_REGION/dictitems?level=2&parent="+t.delegateDistrictCode,headers:{groupId:Liferay.ThemeDisplay.getScopeGroupId()}};c.a.request(e).then((function(e){t.delegateWards=t.sortArr(e.data.data,"itemName")})).catch((function(t){}))},changeThanhPhan:function(t,e){var a=this;setTimeout((function(){for(var e=a,i=JSON.parse(e.dossiers["metaData"]),o=i["dossierFileCustom"],n=0;n<e.dossierFileArr.length;n++)if(e.dossierFileArr[n]["partNo"]===t.dossierPartNo){var s={partNo:t.dossierPartNo,partName:t.partName,fileMark:t["fileMark"],recordCount:t.recordCount};e.$set(e.dossierFileArr,n,s)}for(var r=0;r<o.length;r++)if(o[r]["partNo"]===t.dossierPartNo){var c={partNo:t.dossierPartNo,partName:t.partName,fileMark:t.fileMark,recordCount:t.recordCount};o[r]=c}for(var l=0,d=0;d<o.length;d++)"TP03"===o[d]["partNo"]&&(l+=parseInt(o[d]["recordCount"]));i["totalRecord"]=l,i["dossierFileCustom"]=o,e.dossiers["metaData"]=JSON.stringify(i)}),200)},getQuocGia:function(){var t=this,e={url:"/o/rest/v2/serverconfigs/TICH_HOP_DIA_BAN/protocols/API_CONNECT?parentId=98",headers:{groupId:Liferay.ThemeDisplay.getScopeGroupId()}};c.a.request(e).then((function(e){t.listQuocGia=t.sortArr(e.data.data,"TEN")})).catch((function(t){}))},getMucDich:function(){var t=this,e={url:"/o/rest/v2/serverconfigs/TICH_HOP_DM/protocols/API_CONNECT?maCha=03&nameDM=",headers:{groupId:Liferay.ThemeDisplay.getScopeGroupId()}};c.a.request(e).then((function(e){t.listMucDichSuDung=t.sortArr(e.data.data,"TEN")})).catch((function(t){}))},getThanhPhan:function(){var t=this,e={url:"/o/rest/v2/dossiertemplates/"+t.dossierTemplateNo,headers:{groupId:Liferay.ThemeDisplay.getScopeGroupId()}};c.a.request(e).then((function(e){if(t.dossierParts=e.data.dossierParts,"UPDATE"===t.formCode)for(var a=function(e){var a=t.dossierFileCustom.find((function(a){return a.partNo===t.dossierParts[e]["partNo"]}));if(a){var i={dossierPartNo:t.dossierParts[e]["partNo"],fileMark:a.fileMark,partName:t.dossierParts[e]["partName"],partType:t.dossierParts[e]["partType"],fileCheck:0,fileComment:"",recordCount:a.recordCount};t.selected.push(i),t.dossierMarkArr.push(i)}else t.dossierMarkArr.push({dossierPartNo:t.dossierParts[e]["partNo"],fileMark:t.dossierParts[e]["fileMark"],partName:t.dossierParts[e]["partName"],partType:t.dossierParts[e]["partType"],fileCheck:0,fileComment:"",recordCount:""})},i=0;i<t.dossierParts.length;i++)a(i);else{var o=new Array,n=0;t.dossierFileArr=[];for(var s=0;s<t.dossierParts.length;s++)t.dossierMarkArr.push({dossierPartNo:t.dossierParts[s]["partNo"],fileMark:t.dossierParts[s]["fileMark"],partName:t.dossierParts[s]["partName"],partType:t.dossierParts[s]["partType"],fileCheck:0,fileComment:"",recordCount:""}),"TP01"!==t.dossierParts[s]["partNo"]&&"TP03"!==t.dossierParts[s]["partNo"]||1!==t.dossierParts[s].partType||(t.dossierFileArr[n]={formData:"",partNo:t.dossierParts[s]["partNo"]},o[n]={partNo:t.dossierParts[s]["partNo"],partName:t.dossierParts[s]["partName"],fileMark:t.dossierParts[s]["fileMark"],recordCount:1},n++);for(var r=0,c=0;c<o.length;c++)"TP03"===o[c]["partNo"]&&(r+=parseInt(o[c]["recordCount"]));var l=JSON.parse(t.dossiers["metaData"]);l["dossierFileCustom"]=o,l["totalRecord"]=r,t.dossiers["metaData"]=JSON.stringify(l)}})).catch((function(t){}))},getDSNguoiKy:function(){var t=this,e=t.co_quan_cap_tg?t.co_quan_cap_tg:"",a=t.nguoi_ky_tg?t.nguoi_ky_tg:"";if(e||a)if(e){if(!(e.split(" ").length>=2))return void s.a.error("Cơ quan chủ quản phải ít nhất 2 từ trở lên");var i={flagSearch:!1,govAgencyName:e,employeeName:a};for(var o in i)""!==i[o]&&void 0!==i[o]||delete i[o];var n={url:"o/rest/v2/serverconfigs/TICH_HOP_DM_NG_KY/protocols/API_CONNECT",params:i,headers:{groupId:Liferay.ThemeDisplay.getScopeGroupId()}};c.a.request(n).then((function(e){t.listNguoiKy=e.data.data,t.listConDau=[],t.listChuKy=[],t.chonChuKy=[],t.chonConDau=[],t.chuKySelected="",t.conDauSelected=""})).catch((function(t){}))}else{var r={flagSearch:!1,govAgencyName:e,employeeName:a};for(var l in r)""!==r[l]&&void 0!==r[l]||delete r[l];var d={url:"o/rest/v2/serverconfigs/TICH_HOP_DM_NG_KY/protocols/API_CONNECT",params:r,headers:{groupId:Liferay.ThemeDisplay.getScopeGroupId()}};c.a.request(d).then((function(e){t.listNguoiKy=e.data.data,t.listConDau=[],t.listChuKy=[],t.chonChuKy=[],t.chonConDau=[],t.chuKySelected="",t.conDauSelected=""})).catch((function(t){}))}else s.a.error("Chưa nhập đối tượng để tìm kiếm")},getDataEform:function(){var t=this,e={url:"/o/rest/v2/serverconfigs/SERVER_EFORM_DATA_DVC/protocols/API_CONNECT?eFormNo="+t.eFormCode,headers:{groupId:Liferay.ThemeDisplay.getScopeGroupId()}};t.eFormCodeArr=[],c.a.request(e).then((function(e){0!==Object.keys(e.data).length&&e.data.constructor===Object?Array.isArray(e.data.list_giay_to)&&e.data.list_giay_to.length&&(t.eFormCodeArr.push(t.eFormCode),t.dossiers.delegateName||e.data.delegateName&&(t.dossiers.delegateName=e.data.delegateName),t.dossiers.delegateIdNo||e.data.delegateIdNo&&(t.dossiers.delegateIdNo=e.data.delegateIdNo),t.dossiers.delegateTelNo||e.data.delegateTelNo&&(t.dossiers.delegateTelNo=e.data.delegateTelNo),t.dossiers.delegateAddress||e.data.delegateAddress&&(t.dossiers.delegateAddress=e.data.delegateAddress.length<100?e.data.delegateAddress:""),t.dossiers.delegateEmail||e.data.delegateEmail&&(t.dossiers.delegateEmail=e.data.delegateEmail),t.dossiers.applicantName||e.data.applicantName&&(t.dossiers.applicantName=e.data.applicantName),t.dossiers.applicantIdNo||e.data.applicantIdNo&&(t.dossiers.applicantIdNo=e.data.applicantIdNo),t.dossiers.contactTelNo||e.data.contactTelNo&&(t.dossiers.contactTelNo=e.data.contactTelNo),t.dossiers.contactEmail||e.data.contactEmail&&(t.dossiers.contactEmail=e.data.contactEmail),t.dossiers.contactName||e.data.contactName&&(t.dossiers.contactName=e.data.contactName),t.dossiers.address||e.data.address&&(t.dossiers.address=e.data.address.length<100?e.data.address:""),t.dossiers.bookingName||e.data.bookingName&&(t.dossiers.bookingName=e.data.bookingName),e.data.su_dung_tai_nuoc_ma&&(t.su_dung_tai_nuoc_ma=e.data.su_dung_tai_nuoc_ma),e.data.de_nghi_chung_nhan&&(t.de_nghi_chung_nhan=e.data.de_nghi_chung_nhan),e.data.muc_dich&&(t.muc_dich=t.listMucDichSuDung.find((function(t){return t.TEN===e.data.muc_dich}))),e.data.list_giay_to&&t.fillTableGiayTo(e.data.list_giay_to),t.changeDossier()):s.a.error("Mã tờ khai không hợp lệ")})).catch((function(t){s.a.error("Mã tờ khai không tìm thấy")}))},fillTableGiayTo:function(t){var e=this;e.listGiayTo=t,e.checkCKCD(),e.tongSoBan=0,e.listGiayTo.forEach((function(t){e.tongSoBan+=parseInt(t["so_ban"])})),e.computeDate();for(var a=0;a<e.dossierFileArr.length;a++)if("TP01"==e.dossierFileArr[a]["partNo"]){for(var i="",o=function(t){var a=e.listQuocGia.find((function(a){return a.MA===e.su_dung_tai_nuoc_ma[t]}));a&&(i+=""===i?a.TEN:","+a.TEN)},n=0;n<e.su_dung_tai_nuoc_ma.length;n++)o(n);var s={ho_ten_yeu_cau:e.dossiers.delegateName,so_cmnd:e.delegateIdNo,dien_thoai:e.delegateTelNo,email:e.delegateEmail,dia_chi:e.delegateAddress,de_nghi_chung_nhan:!!e.de_nghi_chung_nhan,list_giay_to:e.listGiayTo,tong_so:e.tongSoBan,su_dung_tai_nuoc_ma:e.su_dung_tai_nuoc_ma,su_dung_tai_nuoc:i,ma_muc_dich:e.muc_dich.MA,muc_dich:e.muc_dich.TEN};e.dossierFileArr[a]["formData"]=JSON.stringify(s),e.dossierFileArr[a]["eform"]="true"}d()("#dossierFileArr_hidden").val(JSON.stringify(e.dossierFileArr)),e.genLePhi()},genDueDate:function(){var t=this,e={url:"/o/rest/v2/dossiers/dueDate?service="+t.serviceCode+"&agency="+t.govAgencyCode+"&template="+t.dossierTemplateNo+"&fromReceiveDate=",headers:{groupId:Liferay.ThemeDisplay.getScopeGroupId()}};c.a.request(e).then((function(e){var a=new Date(parseInt(e.data["dueDate"]));t.dateDueDate=a.toISOString().substr(0,10)})).catch((function(t){}))},getTenGiayTo:function(){var t=this,e={url:"/o/rest/v2/serverconfigs/TICH_HOP_DM/protocols/API_CONNECT?maCha=02&nameDM=",headers:{groupId:Liferay.ThemeDisplay.getScopeGroupId()}};c.a.request(e).then((function(e){t.listTenGiayTo=t.sortArr(e.data.data,"TEN")})).catch((function(t){}))},getChuKyConDau:function(t){var e=this;e.nguoi_ky_tg=t.TEN,e.co_quan_cap_tg=t.TEN_CQQL,e.chuc_danh_ky_tg=t.TEN_CHUC_VU,e.ma_co_quan_cap_tg=t.MA_CQQL,e.ma_chuc_vu_tg=t.MA_CHUC_VU,e.ma_nguoi_ky_tg=t.MA;var a={url:"o/rest/v2/serverconfigs/TICH_HOP_CHU_KY_CON_DAU/protocols/API_CONNECT?ma_ng_ky="+t.MA+"&ma_cqql="+t.MA_CQQL,headers:{groupId:Liferay.ThemeDisplay.getScopeGroupId()}};e.loadingImage=!0,c.a.request(a).then((function(t){var a=t.data.CON_DAU.map((function(t){var a=Object.assign({},t);return a["strConDau"]=e.hexToBase64(a.CD_IMAGE_FILE),a})),i=t.data.CHU_KY.map((function(t){var a=Object.assign({},t);return a["strChuKy"]=e.hexToBase64(a.CK_IMAGE_FILE),a}));e.listConDau=e.sortDate(a,"CD_NGAY_HL"),e.listChuKy=e.sortDate(i,"CK_NGAY_HL"),e.loadingImage=!1})).catch((function(t){}))},checkedConDau:function(t){var e=this;e.chonConDau.includes(t["CD_MA_CON_DAU"])?(e.chonConDau=[t["CD_MA_CON_DAU"]],e.ma_con_dau_tg=t["CD_MA_CON_DAU"],e.conDauSelected=t.strConDau):e.conDauSelected=""},checkedChuKy:function(t){var e=this;e.chonChuKy.includes(t["CK_MA_CK"])?(e.chonChuKy=[t["CK_MA_CK"]],e.ma_chu_ky_tg=t["CK_MA_CK"],e.chuKySelected=t.strChuKy):e.chuKySelected=""},openThemGiayTo:function(){var t=this;t.update_giayto="add",t.dialogGiayTo=!0,t.$refs.formGiayTo.reset(),t.su_dung_tai_nuoc_ma.includes("98063")&&(t.loai_cong_viec={value:"HPHLS",text:"HPHLS"}),t.conDau="",t.chuKy=""},openKiemTraChuKyConDau:function(){this.dialogTimKiemConDau=!0,this.nguoi_ky_tg=this.nguoi_ky,this.co_quan_cap_tg=this.co_quan_cap,this.listNguoiKy=[],this.listConDau=[],this.listChuKy=[],this.chonChuKy=[],this.chonConDau=[],this.chuKySelected="",this.conDauSelected=""},updateGiayTo:function(){var t=this;if(t.$refs.formGiayTo.validate()){var e={ten_giay_to:t.giay_to.TEN,ma_ten_giay_to:t.giay_to.MA,ma_loai_giay_to:t.loai_giay_to.value,loai_giay_to:t.loai_giay_to.text,so_ban:t.so_ban,loai_cong_viec:t.loai_cong_viec.text,so_hieu_giay_to:t.so_hieu_giay_to,ten_nguoi_duoc_cap:t.ten_nguoi_duoc_cap,co_quan_cap:t.co_quan_cap,ma_co_quan_cap:t.ma_co_quan_cap,nguoi_ky:t.nguoi_ky,ma_nguoi_ky:t.ma_nguoi_ky,chuc_danh_ky:t.chuc_danh_ky,ma_chuc_vu:t.ma_chuc_vu,ngay_ky:t.ngay_ky,ma_con_dau:t.ma_con_dau,ma_chu_ky:t.ma_chu_ky,kiem_tra:!0,anh_con_dau:t.conDau,anh_chu_ky:t.chuKy};"add"===t.update_giayto?(t.listGiayTo.push(e),t.checkCKCD(),t.$refs.formGiayTo.reset(),t.conDau="",t.chuKy="",s.a.success("Thao tác thực hiện thành công.")):(t.$set(t.listGiayTo,t.update_giayto,e),t.checkCKCD(),s.a.success("Thao tác thực hiện thành công.")),t.tongSoBan=0,t.listGiayTo.forEach((function(e){t.tongSoBan+=parseInt(e["so_ban"])})),t.computeDate();for(var a=0;a<t.dossierFileArr.length;a++)"TP01"==t.dossierFileArr[a]["partNo"]&&function(){var e=[];t.listGiayTo.forEach((function(t){var a=Object.assign({},t);e.push(a)}));for(var i="",o=function(e){var a=t.listQuocGia.find((function(a){return a.MA===t.su_dung_tai_nuoc_ma[e]}));a&&(i+=""===i?a.TEN:","+a.TEN)},n=0;n<t.su_dung_tai_nuoc_ma.length;n++)o(n);var s={ho_ten_yeu_cau:t.dossiers.delegateName,so_cmnd:t.delegateIdNo,dien_thoai:t.delegateTelNo,email:t.delegateEmail,dia_chi:t.delegateAddress,de_nghi_chung_nhan:!!t.de_nghi_chung_nhan,list_giay_to:e,tong_so:t.tongSoBan,su_dung_tai_nuoc_ma:t.su_dung_tai_nuoc_ma,su_dung_tai_nuoc:i,ma_muc_dich:t.muc_dich.MA,muc_dich:t.muc_dich.TEN};t.dossierFileArr[a]["formData"]=JSON.stringify(s),t.dossierFileArr[a]["eform"]="true"}();d()("#dossierFileArr_hidden").val(JSON.stringify(t.dossierFileArr)),t.genLePhi()}},genLePhi:function(){var t=this,e=JSON.parse(t.dossiers["metaData"]),a=e["dossierFileCustom"],i=0,o=new Array,n=new Array;a.forEach((function(t){"TP03"!=t["partNo"]&&(o[i]=t,i++)}));var s=0,r=0;t.listGiayTo.forEach((function(t){s+=parseInt(t["so_ban"]),o[o.length]={partNo:"TP03",partName:t["ten_giay_to"]+" ("+t["so_hieu_giay_to"]+")",fileMark:"-1",fileMarkName:t["loai_giay_to"],recordCount:t["so_ban"]},r+=3e4*parseInt(t["so_ban"])})),n[n.length]={partNo:"TP03",serviceName:t.dossiers.dossierName.replace("Thủ tục ","").charAt(0).toUpperCase()+t.dossiers.dossierName.replace("Thủ tục ","").slice(1),partName:"",fileMark:"-1",fileMarkName:"",recordCount:s,trang_thai:1,don_gia:3e4,thanh_tien:r},n[n.length]={partNo:"empty",serviceName:"empty",partName:"empty",fileMark:"empty",fileMarkName:"empty",recordCount:"empty",trang_thai:"empty",don_gia:"empty",thanh_tien:"empty"},n[n.length]={partNo:"empty",serviceName:"empty",partName:"empty",fileMark:"empty",fileMarkName:"empty",recordCount:"empty",trang_thai:"empty",don_gia:"empty",thanh_tien:"empty"};for(var c=0,l=0;l<o.length;l++)"TP03"===o[l]["partNo"]&&(c+=parseInt(o[l]["recordCount"]));e["totalRecord"]=c,e["dossierFileCustom"]=o,e["dossierFilePayment"]=n,t.dossiers["metaData"]=JSON.stringify(e);var d=3e4*s;t.le_phi_format=d,t.payment={requestPayment:1,paymentNote:"",advanceAmount:0,feeAmount:d,serviceAmount:0,shipAmount:0}},formatDate:function(t){if(!t)return null;var e=t.split("-"),a=m(e,3),i=a[0],o=a[1],n=a[2];return"".concat(n,"/").concat(o,"/").concat(i)},parseDate:function(t){if(!t)return null;var e=t.split("/"),a=m(e,3),i=a[0],o=a[1],n=a[2];return"".concat(n,"-").concat(o.padStart(2,"0"),"-").concat(i.padStart(2,"0"))},hexToBase64:function(t){if(t){for(var e="",a=0;a<t.length;a+=2)e+=String.fromCharCode(parseInt(t.substr(a,2),16));return btoa(e)}return""},chonConDauChuKy:function(){var t=this;t.nguoi_ky_tg&&t.co_quan_cap_tg&&t.chuc_danh_ky_tg&&t.conDauSelected&&t.chuKySelected?(t.nguoi_ky=t.nguoi_ky_tg,t.ma_nguoi_ky=t.ma_nguoi_ky_tg,t.co_quan_cap=t.co_quan_cap_tg,t.ma_co_quan_cap=t.ma_co_quan_cap_tg,t.chuc_danh_ky=t.chuc_danh_ky_tg,t.ma_chuc_vu=t.ma_chuc_vu_tg,t.ma_con_dau=t.ma_con_dau_tg,t.ma_chu_ky=t.ma_chu_ky_tg,t.conDau=t.conDauSelected,t.chuKy=t.chuKySelected,t.dialogTimKiemConDau=!1,t.conDauSelected="",t.chuKySelected=""):s.a.error("Chưa chọn chữ ký hoặc con dấu")},openDialogUpdateGiayTo:function(t,e){var a=this;a.update_giayto=t,a.ten_giay_to=e.ten_giay_to,a.ma_ten_giay_to=e.ma_ten_giay_to,a.ma_loai_giay_to=e.ma_loai_giay_to,a.loai_giay_to=e.loai_giay_to,a.so_ban=e.so_ban,a.loai_cong_viec=e.loai_cong_viec,a.so_hieu_giay_to=e.so_hieu_giay_to,a.ten_nguoi_duoc_cap=e.ten_nguoi_duoc_cap,a.co_quan_cap=e.co_quan_cap,a.ma_co_quan_cap=e.ma_co_quan_cap,a.nguoi_ky=e.nguoi_ky,a.ma_nguoi_ky=e.ma_nguoi_ky,a.chuc_danh_ky=e.chuc_danh_ky,a.ma_chuc_vu=e.ma_chuc_vu,a.ngay_ky=e.ngay_ky,a.ma_con_dau=e.ma_con_dau,a.ma_chu_ky=e.ma_chu_ky,a.kiem_tra=e.kiem_tra,a.conDau=e.anh_con_dau,a.chuKy=e.anh_chu_ky,e.ten_giay_to&&e.ma_ten_giay_to?a.giay_to={TEN:e.ten_giay_to,MA:e.ma_ten_giay_to}:a.giay_to="",e.loai_giay_to&&e.ma_loai_giay_to?a.loai_giay_to={text:e.loai_giay_to,value:e.ma_loai_giay_to}:a.loai_giay_to="",e.loai_cong_viec?a.loai_cong_viec={text:e.loai_cong_viec,value:e.loai_cong_viec}:a.loai_cong_viec="",a.dialogGiayTo=!0},openDialogCopyGiayTo:function(t,e){var a=this;a.update_giayto="add",a.ten_giay_to=e.ten_giay_to,a.ma_ten_giay_to=e.ma_ten_giay_to,a.ma_loai_giay_to=e.ma_loai_giay_to,a.loai_giay_to=e.loai_giay_to,a.so_ban=e.so_ban,a.loai_cong_viec=e.loai_cong_viec,a.so_hieu_giay_to=e.so_hieu_giay_to,a.ten_nguoi_duoc_cap=e.ten_nguoi_duoc_cap,a.co_quan_cap=e.co_quan_cap,a.ma_co_quan_cap=e.ma_co_quan_cap,a.nguoi_ky=e.nguoi_ky,a.ma_nguoi_ky=e.ma_nguoi_ky,a.chuc_danh_ky=e.chuc_danh_ky,a.ma_chuc_vu=e.ma_chuc_vu,a.ngay_ky=e.ngay_ky,a.ma_con_dau=e.ma_con_dau,a.ma_chu_ky=e.ma_chu_ky,a.kiem_tra=e.kiem_tra,e.ten_giay_to&&e.ma_ten_giay_to?a.giay_to={TEN:e.ten_giay_to,MA:e.ma_ten_giay_to}:a.giay_to="",e.loai_giay_to&&e.ma_loai_giay_to?a.loai_giay_to={text:e.loai_giay_to,value:e.ma_loai_giay_to}:a.loai_giay_to="",e.loai_cong_viec?a.loai_cong_viec={text:e.loai_cong_viec,value:e.loai_cong_viec}:a.loai_cong_viec="",a.dialogGiayTo=!0,a.conDau=e.anh_con_dau,a.chuKy=e.anh_chu_ky},deleteGiayTo:function(t){var e=this;e.listGiayTo.splice(t,1),e.checkCKCD(),e.tongSoBan=0,e.listGiayTo.forEach((function(t){e.tongSoBan+=parseInt(t["so_ban"])})),e.computeDate();for(var a=0;a<e.dossierFileArr.length;a++)"TP01"==e.dossierFileArr[a]["partNo"]&&function(){var t=[];e.listGiayTo.forEach((function(e){var a=Object.assign({},e);t.push(a)}));for(var i="",o=function(t){var a=e.listQuocGia.find((function(a){return a.MA===e.su_dung_tai_nuoc_ma[t]}));a&&(i+=""===i?a.TEN:","+a.TEN)},n=0;n<e.su_dung_tai_nuoc_ma.length;n++)o(n);var s={ho_ten_yeu_cau:e.dossiers.delegateName,so_cmnd:e.delegateIdNo,dien_thoai:e.delegateTelNo,email:e.delegateEmail,dia_chi:e.delegateAddress,de_nghi_chung_nhan:!!e.de_nghi_chung_nhan,list_giay_to:t,tong_so:e.tongSoBan,su_dung_tai_nuoc_ma:e.su_dung_tai_nuoc_ma,su_dung_tai_nuoc:i,ma_muc_dich:e.muc_dich.MA,muc_dich:e.muc_dich.TEN};e.dossierFileArr[a]["formData"]=JSON.stringify(s),e.dossierFileArr[a]["eform"]="true"}();d()("#dossierFileArr_hidden").val(JSON.stringify(e.dossierFileArr)),e.genLePhi()},toggleCheckbox:function(t,e){var a=this;if(this.selected.includes(t)){var i=!0,o=JSON.parse(a.dossiers["metaData"]),n=o["dossierFileCustom"];a.dossierMarkArr[e]["recordCount"]=1;for(var s=0;s<a.dossierFileArr.length;s++)if(a.dossierFileArr[s]["partNo"]===t.dossierPartNo||a.dossierFileArr[s]["dossierPartNo"]===t.dossierPartNo){var r={partNo:t.dossierPartNo,partName:t.partName,fileMark:t.fileMark,recordCount:t.recordCount};a.$set(a.dossierFileArr,s,r),i=!1}if(i){var c={partNo:t.dossierPartNo,partName:t.partName,fileMark:t.fileMark,recordCount:t.recordCount};a.dossierFileArr.push(c)}for(var l=!0,d=0;d<n.length;d++)if(n[d]["partNo"]===t.dossierPartNo||n[d]["dossierPartNo"]===t.dossierPartNo){var u={partNo:t.dossierPartNo,partName:t.partName,fileMark:t.fileMark,recordCount:t.recordCount};n[d]=u,l=!1}if(l){var h={partNo:t.dossierPartNo,partName:t.partName,fileMark:t.fileMark,recordCount:t.recordCount};n.push(h)}for(var p=0,m=0;m<n.length;m++)"TP03"===n[m]["partNo"]&&(p+=parseInt(n[m]["recordCount"]));o["totalRecord"]=p,o["dossierFileCustom"]=n,a.dossiers["metaData"]=JSON.stringify(o)}else{for(var g=JSON.parse(a.dossiers["metaData"]),v=g["dossierFileCustom"],f=0;f<a.dossierFileArr.length;f++)a.dossierFileArr[f]["partNo"]!==t.dossierPartNo&&a.dossierFileArr[f]["dossierPartNo"]!==t.dossierPartNo||a.dossierFileArr.splice(f,1);for(var _=0;_<v.length;_++)if(v[_]["partNo"]===t.dossierPartNo||v[_]["dossierPartNo"]===t.dossierPartNo){var y={partNo:t.dossierPartNo,partName:t.partName,fileMark:t.fileMark,recordCount:t.recordCount};v[_]=y,v.splice(_,1)}for(var C=0,D=0;D<v.length;D++)"TP03"===v[D]["partNo"]&&(C+=parseInt(v[D]["recordCount"]));g["totalRecord"]=C,g["dossierFileCustom"]=v,a.dossiers["metaData"]=JSON.stringify(g)}},sortArr:function(t,e){return t.sort((function(t,a){return t[e].localeCompare(a[e])}))},sortDate:function(t,e){return t.sort((function(t,a){var i=new Date(t[e]),o=new Date(a[e]);return i>o?-1:i<o?1:0}))},onSearchItemSelected:function(t){var e=this;e.selectedSearchItem=t,e.checkCMT=!1,e.dossiers["delegateIdNo"]=e.selectedSearchItem["applicantIdNo"],e.dossiers["delegateName"]=e.selectedSearchItem["applicantName"],e.dossiers["applicantName"]=e.selectedSearchItem["applicantName"],e.dossiers["delegateTelNo"]=e.selectedSearchItem["contactTelNo"],e.dossiers["contactTelNo"]=e.selectedSearchItem["contactTelNo"],e.dossiers["delegateEmail"]=e.selectedSearchItem["contactEmail"],e.dossiers["contactEmail"]=e.selectedSearchItem["contactEmail"],e.delegateCityCode=e.selectedSearchItem["cityCode"],e.delegateDistrictCode=e.selectedSearchItem["districtCode"],e.delegateWardCode=e.selectedSearchItem["wardCode"],e.changeDossier()},onInputChange:function(t){var e=this;if(0===t.trim().length)return null;var a="/o/rest/v2/applicants?start=0&end=5&idNo=".concat(t);return new Promise((function(t){e.$store.dispatch("loadInitResource").then((function(i){var o={headers:{}};c.a.get(a,o).then((function(a){var i=[];a.data.hasOwnProperty("data")?(i=a.data.data,e.changeDossier()):e.changeDossier(),t(i)}))}))}))},close:function(){this.dialogGiayTo=!1,this.dialogTimKiemConDau=!1},closeConDauChuKy:function(){this.dialogTimKiemConDau=!1,this.conDauSelected="",this.chuKySelected=""},nextGiayto:function(){var t=this;"add"===t.update_giayto||t.update_giayto===t.listGiayTo.length-1?(t.update_giayto,t.$refs.formGiayTo.reset(),t.conDau="",t.chuKy=""):(t.update_giayto=t.update_giayto+1,t.ten_giay_to=t.listGiayTo[t.update_giayto].ten_giay_to,t.ma_ten_giay_to=t.listGiayTo[t.update_giayto].ma_ten_giay_to,t.ma_loai_giay_to=t.listGiayTo[t.update_giayto].ma_loai_giay_to,t.loai_giay_to=t.listGiayTo[t.update_giayto].loai_giay_to,t.so_ban=t.listGiayTo[t.update_giayto].so_ban,t.loai_cong_viec=t.listGiayTo[t.update_giayto].loai_cong_viec,t.so_hieu_giay_to=t.listGiayTo[t.update_giayto].so_hieu_giay_to,t.ten_nguoi_duoc_cap=t.listGiayTo[t.update_giayto].ten_nguoi_duoc_cap,t.co_quan_cap=t.listGiayTo[t.update_giayto].co_quan_cap,t.ma_co_quan_cap=t.listGiayTo[t.update_giayto].ma_co_quan_cap,t.nguoi_ky=t.listGiayTo[t.update_giayto].nguoi_ky,t.ma_nguoi_ky=t.listGiayTo[t.update_giayto].ma_nguoi_ky,t.chuc_danh_ky=t.listGiayTo[t.update_giayto].chuc_danh_ky,t.ma_chuc_vu=t.listGiayTo[t.update_giayto].ma_chuc_vu,t.ngay_ky=t.listGiayTo[t.update_giayto].ngay_ky,t.ma_con_dau=t.listGiayTo[t.update_giayto].ma_con_dau,t.ma_chu_ky=t.listGiayTo[t.update_giayto].ma_chu_ky,t.kiem_tra=t.listGiayTo[t.update_giayto].kiem_tra,t.conDau=t.listGiayTo[t.update_giayto].anh_con_dau,t.chuKy=t.listGiayTo[t.update_giayto].anh_chu_ky,t.listGiayTo[t.update_giayto].ten_giay_to&&t.listGiayTo[t.update_giayto].ma_ten_giay_to&&(t.giay_to={TEN:t.listGiayTo[t.update_giayto].ten_giay_to,MA:t.listGiayTo[t.update_giayto].ma_ten_giay_to}),t.listGiayTo[t.update_giayto].loai_giay_to&&t.listGiayTo[t.update_giayto].ma_loai_giay_to&&(t.loai_giay_to={text:t.listGiayTo[t.update_giayto].loai_giay_to,value:t.listGiayTo[t.update_giayto].ma_loai_giay_to}),t.listGiayTo[t.update_giayto].loai_cong_viec&&(t.loai_cong_viec={text:t.listGiayTo[t.update_giayto].loai_cong_viec,value:t.listGiayTo[t.update_giayto].loai_cong_viec}))},backGiayto:function(){var t=this;t.update_giayto=t.update_giayto-1,t.ten_giay_to=t.listGiayTo[t.update_giayto].ten_giay_to,t.ma_ten_giay_to=t.listGiayTo[t.update_giayto].ma_ten_giay_to,t.ma_loai_giay_to=t.listGiayTo[t.update_giayto].ma_loai_giay_to,t.loai_giay_to=t.listGiayTo[t.update_giayto].loai_giay_to,t.so_ban=t.listGiayTo[t.update_giayto].so_ban,t.loai_cong_viec=t.listGiayTo[t.update_giayto].loai_cong_viec,t.so_hieu_giay_to=t.listGiayTo[t.update_giayto].so_hieu_giay_to,t.ten_nguoi_duoc_cap=t.listGiayTo[t.update_giayto].ten_nguoi_duoc_cap,t.co_quan_cap=t.listGiayTo[t.update_giayto].co_quan_cap,t.ma_co_quan_cap=t.listGiayTo[t.update_giayto].ma_co_quan_cap,t.nguoi_ky=t.listGiayTo[t.update_giayto].nguoi_ky,t.ma_nguoi_ky=t.listGiayTo[t.update_giayto].ma_nguoi_ky,t.chuc_danh_ky=t.listGiayTo[t.update_giayto].chuc_danh_ky,t.ma_chuc_vu=t.listGiayTo[t.update_giayto].ma_chuc_vu,t.ngay_ky=t.listGiayTo[t.update_giayto].ngay_ky,t.ma_con_dau=t.listGiayTo[t.update_giayto].ma_con_dau,t.ma_chu_ky=t.listGiayTo[t.update_giayto].ma_chu_ky,t.kiem_tra=t.listGiayTo[t.update_giayto].kiem_tra,t.conDau=t.listGiayTo[t.update_giayto].anh_con_dau,t.chuKy=t.listGiayTo[t.update_giayto].anh_chu_ky,t.listGiayTo[t.update_giayto].ten_giay_to&&t.listGiayTo[t.update_giayto].ma_ten_giay_to&&(t.giay_to={TEN:t.listGiayTo[t.update_giayto].ten_giay_to,MA:t.listGiayTo[t.update_giayto].ma_ten_giay_to}),t.listGiayTo[t.update_giayto].loai_giay_to&&t.listGiayTo[t.update_giayto].ma_loai_giay_to&&(t.loai_giay_to={text:t.listGiayTo[t.update_giayto].loai_giay_to,value:t.listGiayTo[t.update_giayto].ma_loai_giay_to}),t.listGiayTo[t.update_giayto].loai_cong_viec&&(t.loai_cong_viec={text:t.listGiayTo[t.update_giayto].loai_cong_viec,value:t.listGiayTo[t.update_giayto].loai_cong_viec})},changeAdress:function(){var t=this;t.dossiers.delegateAddress.length>100?(t.dossiers.delegateAddress="",t.dossiers.address=""):t.dossiers.address=t.dossiers.delegateAddress},toggleKT:function(t,e){var a=this;a.$set(a.listGiayTo,t,e),a.checkCKCD()},phongTo:function(t){this.anhPhongTo=t,this.dialogPhongTO=!0},checkCKCD:function(){for(var t=this,e=0;e<t.listGiayTo.length;e++)if(!t.listGiayTo[e]["kiem_tra"])return void t.$emit("changeCheckCKCD",!1);t.$emit("changeCheckCKCD",!0)},changeNgayKy:function(){var t=this;t.changeDate("ngay_ky"),t.dateNgayKy=t.parseDate(t.ngay_ky)},inputNgayKy:function(){var t=this;t.inputDate("ngay_ky")},changeDate:function(t){var e=this,a=e[t],i=/^(0?[1-9]|[12][0-9]|3[01])[\/\-](0?[1-9]|1[012])[\/\-]\d{4}$/,o=/^(0?[1-9]|[12][0-9]|3[01])[\/\-](0?[1-9]|1[012])[\/\-]\d{2}$/;if(i.test(a)||o.test(a)){var n=e[t].split("/"),s=n[0],r=n[1];s>31?e[t]="":r>12?e[t]="":2==n[2].length&&(e[t]=s+"/"+r+"/20"+n[2])}else e[t]=""},validateDate:function(t){return t.replace(/[^\d\/]/g,"")},inputDate:function(t){var e=this,a=e.validateDate(e[t]);null!==a.match(/^\d{2}$/)?e[t]=a+"/":null!==a.match(/^\d{2}\/\d{2}$/)?e[t]=a+"/":e[t]=a},changeDossier:function(){var t=this;console.log(t.dossiers),console.log("3"),0===t.eFormCodeArr.length&&(console.log("4"),t.dossiers["contactTelNo"]=t.dossiers["delegateTelNo"],console.log("5"),t.dossiers["contactEmail"]=t.dossiers["delegateEmail"],console.log("6"),t.dossiers["contactName"]=t.dossiers["delegateName"],console.log("7"),t.dossiers["applicantIdNo"]=t.dossiers["delegateIdNo"],console.log("8"),t.dossiers["applicantName"]=t.dossiers["delegateName"],console.log("9"),t.dossiers["address"]=t.dossiers["delegateAddress"],console.log("10"),t.dossiers["cityCode"]=t.dossiers["delegateCityCode"],console.log("11"),t.dossiers["districtCode"]=t.dossiers["delegateDistrictCode"],console.log("12"),t.dossiers["wardCode"]=t.dossiers["delegateWardCode"],console.log("13"),t.dossiers["contactTelNo"]=t.dossiers["delegateTelNo"],console.log("14"),t.dossiers["contactEmail"]=t.dossiers["delegateEmail"],console.log("15")),console.log("16"),d()("#dossiers_hidden").val(JSON.stringify(t.dossiers)),console.log("17")}}},y=_,C=a("2877"),D=a("6544"),T=a.n(D),x=a("c6a6"),b=a("8336"),S=a("b0af"),N=a("99d9"),P=a("12b2"),I=a("ac7c"),A=a("8fea"),w=a("2e4b"),E=a("169a"),k=a("0e8f"),O=a("4bd4"),F=a("132d"),M=a("a722"),V=a("5d23"),L=a("e449"),H=a("b56d"),$=a("2677"),R=a("a844"),G=Object(C["a"])(y,i,o,!1,null,null,null);e["a"]=G.exports;T()(G,{VAutocomplete:x["a"],VBtn:b["a"],VCard:S["a"],VCardText:N["b"],VCardTitle:P["a"],VCheckbox:I["a"],VDataTable:A["a"],VDatePicker:w["a"],VDialog:E["a"],VFlex:k["a"],VForm:O["a"],VIcon:F["a"],VLayout:M["a"],VListTileContent:V["a"],VListTileSubTitle:V["b"],VListTileTitle:V["c"],VMenu:L["a"],VSelect:H["a"],VTextField:$["a"],VTextarea:R["a"]})},f716:function(module,__webpack_exports__,__webpack_require__){"use strict";var toastr__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("854a"),toastr__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(toastr__WEBPACK_IMPORTED_MODULE_0__);toastr__WEBPACK_IMPORTED_MODULE_0___default.a.options={closeButton:!0,timeOut:"5000"},__webpack_exports__["a"]={props:{id:{type:String,default:function(){return"nm"}},detailDossier:{type:Object,default:function(){}},createFiles:{type:Array,default:function(){return[]}}},data:function(){return{dossierTemplateItems:[],dossierMarksItems:[],dossierFilesItems:[],thongTinHoSo:{},valid:!0,stateView:!1,dialogAddOtherTemp:!1,loadingAddOther:!1,otherDossierTemplate:"",sheet:!1,partView:"",dossierFileIdView:"",stateEdit:!1,progressUploadPart:"",dialogPDF:!1,dialogPDFLoading:!0,stateAddFileOther:!1,dossierTemplatesItemSelect:{},fileViews:[],sampleCount:0,fileTemplateItems:[]}},computed:{loading:function(){return this.$store.getters.loading},originality:function(){var t=this;return t.getOriginality()},initDataResource:function(){return this.$store.getters.loadingInitData}},created:function(){var t=this;t.page=1,t.$nextTick((function(){console.log("vm.detailDossier------------",t.detailDossier),t.detailDossier["dossierId"]&&t.$store.dispatch("loadDossierFiles",t.detailDossier.dossierId).then((function(e){t.dossierFilesItems=e,t.createFiles=t.mergeDossierTemplateVsDossierFiles(t.createFiles,e),console.log("vm.createFiles------------",t.createFiles),console.log("vm.dossierFilesItems------------",t.dossierFilesItems)})).catch((function(t){}))}))},mounted:function(){var t=this;t.$nextTick((function(){t.createFiles.length>0&&setTimeout((function(){console.log("vm.createFiles------------",t.createFiles),console.log("vm.dossierFilesItems------------",t.dossierFilesItems),t.genAllAlpacaForm(t.dossierFilesItems,t.createFiles)}),300)}))},methods:{genAllAlpacaForm:function(t,e){var a=this;if(t.length>0){var i=t.filter((function(t){return t.eForm})),o=e.filter((function(t){return t.eForm}));i.length>0?i.forEach((function(t){t.eForm&&a.$store.dispatch("loadAlpcaForm",t)})):e.forEach((function(t){t.eForm&&(t["templateFileNo"]=a.detailDossier.dossierTemplateNo,a.showAlpacaJSFORM(t))})),o.length!==i.length&&o.forEach((function(t){var e=i.findIndex((function(e){return t.partNo===e.dossierPartNo}));-1===e&&(t["templateFileNo"]=a.detailDossier.dossierTemplateNo,a.showAlpacaJSFORM(t))}))}else e.forEach((function(t){t.eForm&&(t["templateFileNo"]=a.detailDossier.dossierTemplateNo,a.showAlpacaJSFORM(t))}))},mergeDossierTemplateVsDossierFiles:function(t,e){return 0!==e.length?t.forEach((function(t){var a=e.find((function(e){return t.partNo===e.dossierPartNo&&e.eForm}));a?t["daKhai"]=!0:!a&&t.eForm&&(t["daKhai"]=!1)})):t.forEach((function(t){t.eForm&&(t["daKhai"]=!1)})),t},showAlpacaJSFORM:function showAlpacaJSFORM(item){var vm=this;item["dossierId"]=vm.detailDossier.dossierId,vm.$store.dispatch("loadFormScript",item).then((function(resScript){vm.$store.dispatch("loadFormData",item).then((function(resData){var formScript,formData;window.$("#formAlpaca"+item.partNo+vm.id).empty(),formScript=resScript?eval("("+resScript+")"):{},formData=resData?eval("("+resData+")"):{},formScript.data=formData,window.$("#formAlpaca"+item.partNo+vm.id).alpaca(formScript)}))}))},loadAlpcaForm:function(t){var e=this,a=e.dossierFilesItems.find((function(e){return e.dossierPartNo===t.partNo&&e.eForm}));a?(a["id"]=e.id,e.$store.dispatch("loadAlpcaForm",a)):e.createFiles.forEach((function(a){a.eForm&&t.partNo===a.partNo&&(a["templateFileNo"]=e.detailDossier.dossierTemplateNo,e.showAlpacaJSFORM(a))}))},previewFileEfom:function(t,e){var a=this;a.dossierFilesItems.forEach((function(e){e.dossierPartNo===t.partNo&&e.eForm&&(e["dossierId"]=a.detailDossier.dossierId,a.dialogPDFLoading=!0,a.dialogPDF=!0,e["id"]=a.id,a.$store.dispatch("putAlpacaForm",e).then((function(t){setTimeout((function(){a.$store.dispatch("viewFile",e).then((function(t){a.dialogPDFLoading=!1,document.getElementById("dialogPDFPreview"+a.id).src=t}))}),1e3)})).catch((function(t){toastr__WEBPACK_IMPORTED_MODULE_0___default.a.error("Yêu cầu của bạn được thực hiện thất bại.")})))}))},viewFile:function(t){var e=this,a=this;a.dossierFilesItems.forEach((function(i){i["dossierId"]=a.detailDossier.dossierId,i.dossierPartNo===t.partNo&&e.$store.dispatch("viewFile",i)}))},viewFile2:function(t){var e=this;if("doc"===t.fileType||"docx"===t.fileType||"xlsx"===t.fileType||"xls"===t.fileType||"zip"===t.fileType||"rar"===t.fileType||"txt"===t.fileType){var a=e.initDataResource.dossierApi+"/"+e.detailDossier.dossierId+"/files/"+t.referenceUid;window.open(a)}else e.dialogPDFLoading=!0,e.dialogPDF=!0,t["dossierId"]=e.detailDossier.dossierId,e.$store.dispatch("viewFile",t).then((function(t){e.dialogPDFLoading=!1,document.getElementById("dialogPDFPreview"+e.id).src=t}))},viewFileWithPartNo:function(t){var e=this;if(e.dossierFilesItems){var a=e.dossierFilesItems.filter((function(e){return e.dossierPartNo===t.partNo&&!e.eForm}));if(!a)return;e.fileViews=a,e.partView!==t.partNo?(e.stateView=!0,e.partView=t.partNo):(e.stateView=!e.stateView,e.partView=t.partNo)}},checkStyle:function(t){return"calc(100% - 50px)"},downloadFileTemplate:function(t,e){var a=this;if(a.fileTemplateItems.length>0){var i=a.fileTemplateItems.find((function(e){return t.fileTemplateNo===e.fileTemplateNo}));if(i){var o=a.initDataResource.serviceInfoApi+"/"+i.serviceCode+"/filetemplates/"+i.fileTemplateNo;window.open(o)}else console.log("ko thay file")}}}}},f82c:function(t,e,a){"use strict";var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("v-card",[1===t.dichVuChuyenPhatHoSo.vnpostalStatus?a("v-card-text",[a("v-slide-y-transition",[a("v-form",{ref:"formDichVuChuyenPhatHoSo",attrs:{"lazy-validation":""},model:{value:t.valid_dichvuchuyenphat,callback:function(e){t.valid_dichvuchuyenphat=e},expression:"valid_dichvuchuyenphat"}},[a("v-layout",{attrs:{wrap:""}},[a("v-flex",{attrs:{xs12:"",sm2:""}},[t.loading?a("content-placeholders",{staticClass:"mt-1"},[a("content-placeholders-text",{attrs:{lines:1}})],1):a("v-subheader",{staticClass:"pl-0"},[t._v("Dịch vụ đăng ký "),a("span",{staticStyle:{color:"red"}},[t._v(" * ")]),t._v(": ")])],1),a("v-flex",{attrs:{xs12:"",sm10:""}},[t.loading?a("content-placeholders",{staticClass:"mt-1"},[a("content-placeholders-text",{attrs:{lines:1}})],1):a("v-autocomplete",{attrs:{items:t.postalServiceItems,"item-text":"itemName","item-value":"itemCode","hide-no-data":"",rules:[function(t){return!!t||"Trường dữ liệu bắt buộc"}],required:""},model:{value:t.dichVuChuyenPhatHoSo.postalServiceCode,callback:function(e){t.$set(t.dichVuChuyenPhatHoSo,"postalServiceCode",e)},expression:"dichVuChuyenPhatHoSo.postalServiceCode"}})],1),a("v-flex",{attrs:{xs12:"",sm2:""}},[t.loading?a("content-placeholders",{staticClass:"mt-1"},[a("content-placeholders-text",{attrs:{lines:1}})],1):a("v-subheader",{staticClass:"pl-0"},[t._v("Địa chỉ nhận hồ sơ"),a("span",{staticStyle:{color:"red"}},[t._v(" * ")]),t._v(": ")])],1),a("v-flex",{attrs:{xs12:"",sm10:""}},[t.loading?a("content-placeholders",{staticClass:"mt-1"},[a("content-placeholders-text",{attrs:{lines:1}})],1):a("v-text-field",{attrs:{rules:[function(t){return!!t||"Trường dữ liệu bắt buộc"}],required:""},model:{value:t.dichVuChuyenPhatHoSo.postalAddress,callback:function(e){t.$set(t.dichVuChuyenPhatHoSo,"postalAddress",e)},expression:"dichVuChuyenPhatHoSo.postalAddress"}})],1),a("v-flex",{attrs:{xs12:"",sm2:""}},[t.loading?a("content-placeholders",{staticClass:"mt-1"},[a("content-placeholders-text",{attrs:{lines:1}})],1):a("v-subheader",{staticClass:"pl-0"},[t._v("Tỉnh/Thành phố"),a("span",{staticStyle:{color:"red"}},[t._v(" * ")]),t._v(": ")])],1),a("v-flex",{attrs:{xs12:"",sm4:""}},[t.loading?a("content-placeholders",{staticClass:"mt-1"},[a("content-placeholders-text",{attrs:{lines:1}})],1):a("v-autocomplete",{attrs:{items:t.citys,"item-text":"itemName","item-value":"itemCode","hide-no-data":"",rules:[function(t){return!!t||"Trường dữ liệu bắt buộc"}],required:""},on:{change:t.onChangeResultCity},model:{value:t.dichVuChuyenPhatHoSo.postalCityCode,callback:function(e){t.$set(t.dichVuChuyenPhatHoSo,"postalCityCode",e)},expression:"dichVuChuyenPhatHoSo.postalCityCode"}})],1),a("v-flex",{attrs:{xs12:"",sm2:""}},[t.loading?a("content-placeholders",{staticClass:"mt-1"},[a("content-placeholders-text",{attrs:{lines:1}})],1):a("v-subheader",{staticClass:"pl-0"},[t._v("Quận/Huyện"),a("span",{staticStyle:{color:"red"}},[t._v(" * ")]),t._v(": ")])],1),a("v-flex",{attrs:{xs12:"",sm4:""}},[t.loading?a("content-placeholders",{staticClass:"mt-1"},[a("content-placeholders-text",{attrs:{lines:1}})],1):a("v-autocomplete",{attrs:{items:t.resultDistricts,"item-text":"itemName","item-value":"itemCode","hide-no-data":"",rules:[function(t){return!!t||"Trường dữ liệu bắt buộc"}],required:""},on:{change:t.onChangeResultDistrict},model:{value:t.dichVuChuyenPhatHoSo.postalDistrictCode,callback:function(e){t.$set(t.dichVuChuyenPhatHoSo,"postalDistrictCode",e)},expression:"dichVuChuyenPhatHoSo.postalDistrictCode"}})],1),a("v-flex",{attrs:{xs12:"",sm2:""}},[t.loading?a("content-placeholders",{staticClass:"mt-1"},[a("content-placeholders-text",{attrs:{lines:1}})],1):a("v-subheader",{staticClass:"pl-0"},[t._v("SĐT người gửi"),a("span",{staticStyle:{color:"red"}},[t._v(" * ")]),t._v(": ")])],1),a("v-flex",{attrs:{xs12:"",sm4:""}},[t.loading?a("content-placeholders",{staticClass:"mt-1"},[a("content-placeholders-text",{attrs:{lines:1}})],1):a("v-text-field",{attrs:{"append-icon":"phone",rules:[t.rules.telNo,t.rules.required],required:""},model:{value:t.dichVuChuyenPhatHoSo.postalTelNo,callback:function(e){t.$set(t.dichVuChuyenPhatHoSo,"postalTelNo",e)},expression:"dichVuChuyenPhatHoSo.postalTelNo"}})],1)],1)],1)],1)],1):t._e()],1),a("div",{staticClass:"absolute__btn",staticStyle:{width:"200px","margin-top":"5px"}},[t.loading?a("content-placeholders",{staticClass:"mt-1"},[a("content-placeholders-text",{attrs:{lines:1}})],1):a("v-checkbox",{staticClass:"mt-0",attrs:{label:"Đăng ký thu hồ sơ tại nhà",value:1},on:{change:function(e){t.changeViaPostal(e)}},model:{value:t.dichVuChuyenPhatHoSo.vnpostalStatus,callback:function(e){t.$set(t.dichVuChuyenPhatHoSo,"vnpostalStatus",e)},expression:"dichVuChuyenPhatHoSo.vnpostalStatus"}})],1)],1)},o=[],n={data:function(){return{valid_dichvuchuyenphat:!1,citys:[],resultDistricts:[],resultWards:[],vnPostItems:[],postalServiceItems:[{itemName:"VIETTEL POST",itemCode:"VTPOST"}],rules:{required:function(t){return!!t||"Trường dữ liệu bắt buộc"},email:function(t){var e=/^(([^<>()[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/;return e.test(t)||"Địa chỉ Email không hợp lệ"},telNo:function(t){var e=/^([0-9]{0,})$/;return e.test(t)||"Gồm các ký tự 0-9"}}}},computed:{loading:function(){return this.$store.getters.loading},thongTinChuHoSoBindChuyenPhat:function(){return this.$store.getters.thongTinChuHoSoBindChuyenPhat},dichVuChuyenPhatHoSo:function(){return this.$store.getters.dichVuChuyenPhatHoSo}},created:function(){this.postalServiceItems.length>0&&(this.dichVuChuyenPhatHoSo.postalServiceCode=this.postalServiceItems[0].itemCode)},watch:{thongTinChuHoSoBindChuyenPhat:function(t){}},mounted:function(){var t=this,e={collectionCode:"VNPOST_CITY_CODE",level:0,parent:0},a=t.dichVuChuyenPhatHoSo;if(t.$store.getters.getDictItems(e).then((function(e){t.citys=e.data})),a.postalCityCode){var i={collectionCode:"VNPOST_CITY_CODE",level:1,parent:a.postalCityCode};t.$store.getters.getDictItems(i).then((function(e){t.resultDistricts=e.data}))}},methods:{initData:function(t){var e=this;e.$nextTick((function(){}))},onChangeResultCity:function(t){var e=this;e.resultDistricts=[],e.resultWards=[];var a={collectionCode:"VNPOST_CITY_CODE",level:1,parent:t};console.log("onChangeResultCity",t),e.$store.getters.getDictItems(a).then((function(t){e.resultDistricts=t.data})),e.dichVuChuyenPhatHoSo.postalCityName=e.citys.filter((function(e){return e.itemCode===t}))[0]["itemName"]},onChangeResultDistrict:function(t){var e=this;e.dichVuChuyenPhatHoSo.postalDistrictName=e.resultDistricts.filter((function(e){return e.itemCode===t}))[0]["itemName"]},onChangeResultWard:function(t){var e=this;e.dichVuChuyenPhatHoSo.postalWardName=e.resultWards.filter((function(e){return e.itemCode===t}))[0]["itemName"]},changeViaPostal:function(t){console.log("changeViaPostal",t),this.$store.commit("setViaPostal",t),this.$emit("changeViapostal",t);var e={vnpostalStatus:t,postalServiceCode:this.dichVuChuyenPhatHoSo.postalServiceCode?this.dichVuChuyenPhatHoSo.postalServiceCode:"",postalAddress:this.dichVuChuyenPhatHoSo.postalAddress?this.dichVuChuyenPhatHoSo.postalAddress:"",postalCityCode:this.dichVuChuyenPhatHoSo.postalCityCode?this.dichVuChuyenPhatHoSo.postalCityCode:"",postalCityName:this.dichVuChuyenPhatHoSo.postalCityName?this.dichVuChuyenPhatHoSo.postalCityName:"",postalDistrictCode:this.dichVuChuyenPhatHoSo.postalDistrictCode?this.dichVuChuyenPhatHoSo.postalDistrictCode:"",postalDistrictName:this.dichVuChuyenPhatHoSo.postalDistrictName?this.dichVuChuyenPhatHoSo.postalDistrictName:"",postalWardCode:this.dichVuChuyenPhatHoSo.postalWardCode?this.dichVuChuyenPhatHoSo.postalWardCode:"",postalWardName:this.dichVuChuyenPhatHoSo.postalWardName?this.dichVuChuyenPhatHoSo.postalWardName:"",postalTelNo:this.dichVuChuyenPhatHoSo.postalTelNo?this.dichVuChuyenPhatHoSo.postalTelNo:""};this.$store.commit("setDichVuChuyenPhatHoSo",e),console.log("dichVuChuyenPhatHoSo",this.dichVuChuyenPhatHoSo)},validDichVuChuyenPhat:function(){var t=this;return t.$refs.formDichVuChuyenPhatHoSo.validate()}}},s=n,r=a("2877"),c=a("6544"),l=a.n(c),d=a("c6a6"),u=a("b0af"),h=a("99d9"),p=a("ac7c"),m=a("0e8f"),g=a("4bd4"),v=a("a722"),f=a("0789"),_=a("e0c7"),y=a("2677"),C=Object(r["a"])(s,i,o,!1,null,null,null);e["a"]=C.exports;l()(C,{VAutocomplete:d["a"],VCard:u["a"],VCardText:h["b"],VCheckbox:p["a"],VFlex:m["a"],VForm:g["a"],VLayout:v["a"],VSlideYTransition:f["d"],VSubheader:_["a"],VTextField:y["a"]})},fc7b:function(t,e,a){"use strict";var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"payment-info",staticStyle:{width:"100%"}},[a("v-expansion-panel",{staticClass:"expansion-pl",attrs:{value:[!0],expand:""}},[a("v-expansion-panel-content",[a("div",{attrs:{slot:"header"},slot:"header"},[a("div",{staticClass:"background-triangle-small"},[a("v-icon",{attrs:{size:"18",color:"white"}},[t._v("star_rate")])],1),a("span",[t._v(t._s(t.paymentProfile.paymentFee))])]),a("v-card",[a("v-card-text",{staticClass:"px-4 pb-1"},[a("v-layout",{attrs:{wrap:""}},[a("v-flex",{attrs:{xs12:"",sm2:""}},[a("v-subheader",{staticClass:"pl-0 text-right"},[t._v("Lệ phí: ")])],1),a("v-flex",{attrs:{xs12:"",sm3:""}},[a("p",{staticClass:"mt-1 mb-0"},[t._v(t._s(t.currency(Number(t.paymentProfile.feeAmount)))+"    vnđ")])]),a("v-flex",{attrs:{xs12:"",sm2:""}},[a("v-subheader",{staticClass:"pl-0 text-right"},[t._v("Phí: ")])],1),a("v-flex",{attrs:{xs12:"",sm3:""}},[a("p",{staticClass:"mt-1 mb-0"},[t._v(t._s(t.currency(Number(t.paymentProfile.serviceAmount)))+"    vnđ")])]),a("v-flex",{attrs:{xs12:"",sm2:""}}),2!==t.detailDossier.viaPostal&&"2"!==t.detailDossier.viaPostal||0===t.paymentProfile.shipAmount?t._e():a("v-flex",{attrs:{xs12:"",sm2:""}},[a("v-subheader",{staticClass:"pl-0 text-right"},[t._v("Phí chuyển phát: ")])],1),a("v-flex",{attrs:{xs12:"",sm3:""}},[2!==t.detailDossier.viaPostal&&"2"!==t.detailDossier.viaPostal||0===t.paymentProfile.shipAmount?t._e():a("p",{staticClass:"mt-1 mb-0"},[t._v("\n                "+t._s(t.currency(Number(t.paymentProfile.shipAmount)))+"    vnđ\n              ")])])],1)],1),a("v-card-text",{staticClass:"px-4 pt-0"},[a("v-layout",{attrs:{wrap:""}},[a("v-flex",{attrs:{xs12:"",sm2:""}},[a("v-subheader",{staticClass:"pl-0 text-right"},[a("span",{staticClass:"text-bold"},[t._v("Tổng: ")])])],1),a("v-flex",{staticStyle:{"padding-top":"7px"},attrs:{xs12:"",sm3:""}},[a("span",[t._v(t._s(t.currency(Number(t.feeTong)))+"    vnđ")])]),a("v-flex",{attrs:{xs12:"",sm2:""}},[a("v-subheader",{staticClass:"pl-0 text-right"},[a("span",{staticClass:"text-bold"},[t._v("Đã tạm nộp: ")])])],1),a("v-flex",{staticStyle:{"padding-top":"7px"},attrs:{xs12:"",sm3:""}},[a("span",[t._v(t._s(t.currency(Number(t.paymentProfile.advanceAmount)))+"    vnđ")])]),a("v-flex",{attrs:{xs12:"",sm1:""}}),a("v-flex",{attrs:{xs12:"",sm2:""}},[a("v-subheader",{staticClass:"pl-0 text-right"},[a("span",{staticClass:"text-bold"},[t._v("Còn phải nộp: ")])])],1),a("v-flex",{staticStyle:{"padding-top":"7px"},attrs:{xs12:"",sm3:""}},[a("span",[t._v(t._s(t.currency(t.totalFee))+"    vnđ")])]),a("v-flex",{attrs:{xs12:"",sm1:""}})],1),a("v-layout",{staticStyle:{position:"relative"},attrs:{wrap:""}},[a("v-flex",{staticClass:"my-0 py-1",staticStyle:{width:"70px"}},[a("span",{staticClass:"red--text"},[t._v("* ")]),t._v(" Ghi chú:")]),a("v-flex",{staticStyle:{width:"calc(100% - 80px)"}},[a("p",{staticClass:"px-2 my-0 py-1"},[t._v("\n                "+t._s(t.paymentProfile.paymentNote)+"   \n              ")])])],1),a("p",{staticClass:"mb-0"},[a("span",{staticClass:"red--text"},[t._v("* ")]),t._v(" Lựa chọn hình thức thanh toán:")]),a("div",{staticClass:"text-xs-left mt-2 mb-3 ml-0"},[a("v-chip",{style:0===t.methodSelect?"opacity: 1;font-weight:normal":1===t.methodSelect?"opacity: 1;font-weight:bold":"opacity: 0.6;font-weight:normal",attrs:{color:"indigo","text-color":"white"},nativeOn:{click:function(e){return t.showThanhToanChuyenKhoan(e)}}},[a("v-avatar",{staticStyle:{cursor:"pointer"}},[a("v-icon",[t._v("account_balance")])],1),a("span",{staticClass:"py-2",staticStyle:{cursor:"pointer"}},[t._v("Thanh toán chuyển khoản")])],1),t.getEPaymentProfile(t.paymentProfile.epaymentProfile)&&!t.getEPaymentProfile(t.paymentProfile.epaymentProfile).hasOwnProperty("kpdvcqg")?a("v-chip",{style:0===t.methodSelect?"opacity: 1;font-weight:normal":2===t.methodSelect?"opacity: 1;font-weight:bold":"opacity: 0.6;font-weight:normal",attrs:{color:"orange","text-color":"white"},nativeOn:{click:function(e){t.toKeyPay(t.getEPaymentProfile(t.paymentProfile.epaymentProfile).keypayUrl)}}},[a("v-avatar",{staticStyle:{cursor:"pointer"}},[a("img",{staticStyle:{background:"#fff"},attrs:{src:"/o/opencps-store/js/cli/dvc/app/image/logo-keypay.png",alt:"trevor"}})]),a("span",{staticClass:"py-2",staticStyle:{cursor:"pointer"}},[t._v("Thanh toán qua Keypay")])],1):t._e(),t.getEPaymentProfile(t.paymentProfile.epaymentProfile)&&t.getEPaymentProfile(t.paymentProfile.epaymentProfile).hasOwnProperty("kpdvcqg")?a("v-chip",{style:0===t.methodSelect?"opacity: 1;font-weight:normal":2===t.methodSelect?"opacity: 1;font-weight:bold":"opacity: 0.6;font-weight:normal",attrs:{color:"orange","text-color":"white"},nativeOn:{click:function(e){t.toKeyPayDvcqg("kpdvcqg")}}},[a("v-avatar",{staticStyle:{cursor:"pointer"}},[a("img",{staticStyle:{background:"#fff"},attrs:{src:"/o/opencps-store/js/cli/dvc/app/image/logo-keypay.png",alt:"trevor"}})]),a("span",{staticClass:"py-2",staticStyle:{cursor:"pointer"}},[t._v("Thanh toán qua Cổng DVQG")])],1):t._e(),t.getEPaymentProfile(t.paymentProfile.epaymentProfile)&&t.getEPaymentProfile(t.paymentProfile.epaymentProfile).hasOwnProperty("ppkpdvcqg")?a("v-chip",{style:0===t.methodSelect?"opacity: 1;font-weight:normal":2===t.methodSelect?"opacity: 1;font-weight:bold":"opacity: 0.6;font-weight:normal",attrs:{color:"orange","text-color":"white"},nativeOn:{click:function(e){t.toKeyPayDvcqg("ppkpdvcqg")}}},[a("v-avatar",{staticStyle:{cursor:"pointer"}},[a("img",{staticStyle:{background:"#fff"},attrs:{src:"/o/opencps-store/js/cli/dvc/app/image/logo-keypay.png",alt:"trevor"}})]),a("span",{staticClass:"py-2",staticStyle:{cursor:"pointer"}},[t._v("Thanh toán qua Cổng DVQG")])],1):t._e(),t.dataVietelPay?a("v-chip",{style:0===t.methodSelect?"opacity: 1;font-weight:normal":3===t.methodSelect?"opacity: 1;font-weight:bold":"opacity: 0.6;font-weight:normal",attrs:{color:"green","text-color":"white"},nativeOn:{click:function(e){return t.showViettelPay(e)}}},[a("v-avatar",{staticStyle:{cursor:"pointer"}},[a("img",{staticStyle:{background:"#fff"},attrs:{src:"/o/opencps-store/js/cli/dvc/app/image/logo-viettelpay.svg"}})]),a("span",{staticClass:"py-2",staticStyle:{cursor:"pointer"}},[t._v("Thanh toán qua ứng dụng ViettelPay")])],1):t._e()],1),t.isBank?a("div",{staticClass:"ml-0 mt-2 px-2 py-1",staticStyle:{border:"1px solid #004b9485","border-radius":"3px"}},[a("div",[a("input",{staticStyle:{display:"none"},attrs:{type:"file",id:"paymentFile1"},on:{change:function(e){t.uploadPaymentFile(e)}}}),a("span",{staticClass:"text-bold",staticStyle:{color:"#004b94!important"}},[t._v("Tải lên file báo thanh toán chuyển khoản (Định dạng: .png, .jpg, .jpeg)")]),t.progressUploadPart?a("v-progress-circular",{attrs:{width:2,size:25,color:"green",indeterminate:""}}):a("v-tooltip",{staticClass:"ml-2",attrs:{top:""}},[a("v-btn",{staticClass:"mx-0 my-0",attrs:{slot:"activator",icon:""},on:{click:function(e){t.pickFile()}},slot:"activator"},[a("v-badge",[a("v-icon",{attrs:{size:"24",color:"#004b94"}},[t._v("cloud_upload")])],1)],1),a("span",[t._v("Tải file lên")])],1)],1),t.paymentFile?a("div",[a("div",{staticStyle:{cursor:"pointer"},on:{click:function(e){e.stopPropagation(),t.viewFile()}}},[a("v-icon",{attrs:{size:"18",color:"#004b94"}},[t._v("insert_drive_file")]),a("span",{staticClass:"ml-2"},[t._v(t._s(t.paymentFileName))]),a("v-btn",{staticClass:"ml-3 mr-2",attrs:{dark:"",small:"",color:"blue darken-1"},on:{click:function(e){e.stopPropagation(),t.downloadPaymentFile(t.item)}}},[a("v-icon",[t._v("cloud_download")]),t._v("  \n                  Tải xuống\n                ")],1),a("v-btn",{staticClass:"ml-2 mr-2",attrs:{dark:"",small:"",color:"blue darken-1"},on:{click:function(e){e.stopPropagation(),t.pickFile()}}},[a("v-icon",[t._v("cloud_upload")]),t._v("  \n                  Cập nhật\n                ")],1)],1)]):t._e(),t.epaymentValid?t._e():a("span",{staticStyle:{color:"#f44336"}},[t._v("* Yêu cầu tải lên file báo thanh toán")])]):t._e(),!t.isBank&&t.errorNotSelect?a("p",{staticStyle:{color:"#f44336"}},[t._v("* Yêu cầu lựa chọn hình thức thanh toán")]):t._e()],1)],1)],1)],1),a("v-dialog",{staticStyle:{overflow:"hidden"},attrs:{"max-width":"900",transition:"fade-transition"},model:{value:t.dialogPDF,callback:function(e){t.dialogPDF=e},expression:"dialogPDF"}},[a("v-card",[a("v-toolbar",{attrs:{dark:"",color:"primary"}},[a("v-toolbar-title",[t._v("File đính kèm")]),a("v-spacer"),a("v-btn",{attrs:{icon:"",dark:""},nativeOn:{click:function(e){t.dialogPDF=!1}}},[a("v-icon",[t._v("close")])],1)],1),t.dialogPDFLoading?a("div",{staticStyle:{"min-height":"600px","text-align":"center",margin:"auto",padding:"25%"}},[a("v-progress-circular",{attrs:{size:100,width:1,color:"primary",indeterminate:""}})],1):t._e(),a("iframe",{directives:[{name:"show",rawName:"v-show",value:!t.dialogPDFLoading,expression:"!dialogPDFLoading"}],staticStyle:{overflow:"auto","min-height":"600px"},attrs:{id:"dialogPreview",src:"",type:"application/pdf",width:"100%",height:"100%",frameborder:"0"}})],1)],1),a("v-dialog",{staticStyle:{overflow:"hidden"},attrs:{"max-width":"350",transition:"scale-transition",origin:"center center"},model:{value:t.dialogQrViettelPay,callback:function(e){t.dialogQrViettelPay=e},expression:"dialogQrViettelPay"}},[a("v-card",{staticClass:"text-xs-center",attrs:{color:"#24b2b4"}},[a("v-toolbar",{attrs:{dark:"",color:"primary"}},[a("v-toolbar-title",{staticClass:"white--text"},[t._v("THANH TOÁN DỊCH VỤ CÔNG")])],1),a("div",{staticClass:"d-inline-block py-2 mt-4",staticStyle:{position:"relative"}},[a("img",{staticClass:"logo",staticStyle:{position:"absolute",top:"70px",left:"60px",background:"#efe5e5","border-radius":"5px"},attrs:{src:"/o/opencps-store/js/cli/dvc/app/image/logo-viettelpay.svg",width:"30"}}),a("qrcode",{attrs:{value:JSON.stringify(t.dataVietelPay),options:{width:150}}}),a("br"),a("v-chip",{staticClass:"my-0 ml-1",staticStyle:{width:"135px","margin-top":"-5px !important"},attrs:{color:"#24b2b4","text-color":"white"}},[a("span",{staticStyle:{"font-size":"13px !important"}},[t._v("Quét để thanh toán")])])],1)],1)],1)],1)},o=[],n=a("a026"),s=a("1157"),r=a.n(s),c=a("854a"),l=a.n(c),d=a("716b"),u=a("b2e5"),h=a.n(u);n["a"].component(h.a.name,h.a),l.a.options={closeButton:!0,timeOut:"5000"};var p={props:{paymentProfile:{type:Object,default:function(){}},detailDossier:{type:Object,default:function(){}}},data:function(){return{data_payment:{advanceAmount:"",feeAmount:"",serviceAmount:"",shipAmount:"",paymentAmount:"",paymentNote:"",paymentFile:""},dataVietelPay:"",paymentFile:"",epaymentValid:!0,money:{decimal:"",thousands:".",prefix:"",suffix:"",precision:0,masked:!1},totalFee:0,feeTamThu:0,feeTong:0,checkPaid:!0,activeEdit:!0,progressUploadPart:!1,dialogQrViettelPay:!1,dialogPDF:!1,dialogPDFLoading:!0,isBank:!1,errorNotSelect:!1,methodSelect:0}},directives:{money:d["VMoney"]},created:function(){var t=this;if(t.detailDossier.hasOwnProperty("dossierId")){var e=t.detailDossier;t.$store.dispatch("getPaymentFiles",e).then((function(e){t.paymentFile=e,t.data_payment["paymentFile"]=t.paymentFile,t.data_payment["paymentMethod"]=t.isBank?"Chuyển khoản":"Keypay",t.$store.commit("setPaymentProfile",t.data_payment)}))}},computed:{paymentFileName:function(){return this.$store.getters.getPaymentFileName},isBank:function(t){!0===t&&(this.errorNotSelect=!1)}},watch:{paymentProfile:function(t){var e=this;if(e.paymentProfile){if(e.paymentProfile.hasOwnProperty("epaymentProfile")&&e.paymentProfile.epaymentProfile)try{var a=JSON.parse(e.paymentProfile.epaymentProfile);e.dataVietelPay=a.genQRCode}catch(i){e.dataVietelPay=""}e.feeTong=Number(e.paymentProfile.feeAmount)+Number(e.paymentProfile.serviceAmount),2!==e.detailDossier.viaPostal&&"2"!==e.detailDossier.viaPostal||0===e.paymentProfile.shipAmount||(e.feeTong=Number(e.paymentProfile.feeAmount)+Number(e.paymentProfile.serviceAmount)+Number(e.paymentProfile.shipAmount)),console.log("feeTong",e.feeTong),e.totalFee=e.feeTong-Number(e.paymentProfile.advanceAmount),e.totalFee<0&&(e.totalFee=0),e.data_payment={advanceAmount:e.paymentProfile.advanceAmount,feeAmount:e.paymentProfile.feeAmount,serviceAmount:e.paymentProfile.serviceAmount,shipAmount:e.paymentProfile.shipAmount,paymentAmount:e.totalFee,paymentNote:e.paymentProfile.paymentNote,paymentFile:e.paymentFile,paymentMethod:e.isBank?"Chuyển khoản":"Keypay"},e.$store.commit("setPaymentProfile",e.data_payment)}},detailDossier:function(t){var e=this;if(t.hasOwnProperty("dossierId")){var a=t;e.$store.dispatch("getPaymentFiles",a).then((function(t){e.paymentFile=t,e.data_payment["paymentFile"]=e.paymentFile,e.data_payment["paymentMethod"]=e.isBank?"Chuyển khoản":"Keypay",e.$store.commit("setPaymentProfile",e.data_payment)}))}}},methods:{showThanhToanChuyenKhoan:function(){var t=this;t.isBank=!0,t.methodSelect=1,t.$store.commit("setVisibleDoAction",!0)},uploadPaymentFile:function(t){var e=this;e.progressUploadPart=!0;var a={};a["dossierId"]=e.detailDossier.dossierId,a["referenceUid"]=e.detailDossier.referenceUid,a["selector"]="paymentFile1",a["partTip"]={tip:"",maxSize:10,extensions:"jpg,png,jpeg"};r()("#paymentFile1")[0].files[0];e.$store.dispatch("uploadPaymentFile",a).then((function(t){e.epaymentValid=!0,e.progressUploadPart=!1,e.paymentFile=t,e.data_payment["paymentFile"]=e.paymentFile,e.$store.commit("setPaymentProfile",e.data_payment),e.$store.dispatch("getPaymentFiles",a).then((function(t){e.paymentFile=t,e.data_payment["paymentFile"]=e.paymentFile,e.$store.commit("setPaymentProfile",e.data_payment)}))})).catch((function(t){e.progressUploadPart=!1}))},viewFile:function(){var t=this;t.dialogPDFLoading=!0,t.dialogPDF=!0;var e={dossierId:t.detailDossier.dossierId,referenceUid:t.detailDossier.referenceUid};t.$store.dispatch("viewPaymentFile",e).then((function(e){t.dialogPDFLoading=!1,document.getElementById("dialogPreview").src=e}))},getEPaymentProfile:function(t){if(!t)return"";try{return JSON.parse(t),JSON.parse(t)}catch(e){return""}},deleteFile:function(t){var e=this,a=confirm("Bạn có chắc chắn xóa file?");a&&(t["dossierId"]=e.dossierId,e.$store.dispatch("deletePaymentFile",t).then((function(t){l.a.clear(),l.a.success("Xóa file thành công."),e.paymentFile="",e.data_payment["paymentFile"]=e.paymentFile,e.$store.commit("setPaymentProfile",e.data_payment)})).catch((function(t){l.a.clear(),l.a.error("Xóa file thất bại.")})))},downloadPaymentFile:function(t){var e=this,a="/o/rest/v2/dossiers/"+e.detailDossier.dossierId+"/payments/"+e.detailDossier.referenceUid+"/confirmfile";window.open(a)},pickFile:function(){document.getElementById("paymentFile1").value="",document.getElementById("paymentFile1").click()},currency:function(t){return t&&t.toString().replace(/\B(?=(\d{3})+(?!\d))/g,".")?t.toString().replace(/\B(?=(\d{3})+(?!\d))/g,"."):0},validPayment:function(){return this.paymentFile?this.epaymentValid=!0:this.epaymentValid=!1,this.isBank?this.errorNotSelect=!1:this.errorNotSelect=!0,!1!==this.isBank},toKeyPay:function(t){var e=this;e.isBank=!1,e.methodSelect=2,e.$store.commit("setVisibleDoAction",!1),window.open(t,"_self")},toKeyPayDvcqg:function(t){var e=this;e.isBank=!1,e.methodSelect=2,e.$store.commit("setVisibleDoAction",!1);var a={dossierId:e.detailDossier.dossierId,key:t};e.$store.dispatch("toKeypayDvcqg",a).then((function(t){window.open(t,"_self")}))},showViettelPay:function(){var t=this;t.isBank=!1,t.methodSelect=3,t.$store.commit("setVisibleDoAction",!1),t.dialogQrViettelPay=!0},goBack:function(){window.history.back()}},filters:{}},m=p,g=a("2877"),v=a("6544"),f=a.n(v),_=a("8212"),y=a("4ca6"),C=a("8336"),D=a("b0af"),T=a("99d9"),x=a("cc20"),b=a("169a"),S=a("cd55"),N=a("49e2"),P=a("0e8f"),I=a("132d"),A=a("a722"),w=a("490a"),E=a("9910"),k=a("e0c7"),O=a("71d9"),F=a("2a7f"),M=a("3a2f"),V=Object(g["a"])(m,i,o,!1,null,null,null);e["a"]=V.exports;f()(V,{VAvatar:_["a"],VBadge:y["a"],VBtn:C["a"],VCard:D["a"],VCardText:T["b"],VChip:x["a"],VDialog:b["a"],VExpansionPanel:S["a"],VExpansionPanelContent:N["a"],VFlex:P["a"],VIcon:I["a"],VLayout:A["a"],VProgressCircular:w["a"],VSpacer:E["a"],VSubheader:k["a"],VToolbar:O["a"],VToolbarTitle:F["b"],VTooltip:M["a"]})}});
//# sourceMappingURL=app.js.map