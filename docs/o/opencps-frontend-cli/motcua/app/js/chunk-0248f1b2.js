(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-0248f1b2"],{"6e92":function(e,t,o){"use strict";var i=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",[o("v-card",{attrs:{flat:""}},[e._l(e.dossierTemplateItemsFilter,function(t,i){return o("div",{key:t.partNo,staticClass:"form_alpaca",staticStyle:{position:"relative",overflow:"hidden"}},[o("v-expansion-panel",{staticClass:"expaned__list__data",attrs:{expand:"",value:e.currentFormView==="formAlpaca"+t.partNo+e.id?[!0]:[!1]}},[o("v-expansion-panel-content",{attrs:{"hide-actions":""}},[o("div",{staticStyle:{"background-color":"#fff"},attrs:{slot:"header"},on:{click:function(t){e.stateView=!1}},slot:"header"},[o("div",{staticStyle:{"align-items":"center",background:"#fff","padding-left":"25px"},style:{width:e.checkStyle(t)}},[o("div",{staticClass:"mr-2",staticStyle:{"min-width":"20px",display:"flex"},on:{click:function(o){t.hasForm&&e.loadAlpcaFormClick(t)}}},[o("div",{staticClass:"header__tphs",staticStyle:{"min-width":"20px"}},[o("span",{staticClass:"text-bold"},[e._v(e._s(i+1)+".")]),e._v("  ")]),o("div",{staticClass:"header__tphs",staticStyle:{"text-align":"justify"}},[t.partTip&&t.partTip["tip"]?o("v-tooltip",{staticStyle:{"max-width":"100% !important"},attrs:{top:""}},[o("span",{attrs:{slot:"activator"},slot:"activator"},[e._v("\n                      "+e._s(t.partName)+"\n                      "),t.required?o("span",{staticStyle:{color:"red"}},[e._v("   (*) ")]):e._e()]),t.partTip["tip"]?o("span",[e._v(e._s(t.partTip["tip"]))]):e._e()]):o("span",[e._v("\n                    "+e._s(t.partName)+" "),t.required?o("span",{staticStyle:{color:"red"}},[e._v("   (*) ")]):e._e(),t.hasForm?o("span",{staticStyle:{color:"#004b94"}},[e._v("(Bản khai trực tuyến)")]):e._e()]),e._v("\n                    \n                  "),!t.hasForm&&t.hasFileTemp?o("v-tooltip",{attrs:{top:""}},[o("v-icon",{staticStyle:{color:"#0d71bb"},attrs:{slot:"activator",size:"16",color:"primary"},on:{click:function(o){o.stopPropagation(),e.downloadFileTemplate(t,i)}},slot:"activator"},[e._v("save_alt")]),o("span",[e._v("Biểu mẫu điền thủ công")])],1):e._e()],1)]),o("div",{staticStyle:{display:"flex"}},[1===e.checkInput&&2===t.fileCheck&&t.stateEditFileCheck?o("v-text-field",{attrs:{placeholder:"Nhập lý do",rules:[function(e){return!!e||"Bạn phải nhập lý do trước khi gửi"}],required:""},on:{keyup:function(o){if(!("button"in o)&&e._k(o.keyCode,"enter",13,o.key,"Enter"))return null;e.changeFileComment(t,i)}},model:{value:t.fileComment,callback:function(o){e.$set(t,"fileComment",o)},expression:"item.fileComment"}}):e._e(),1===e.checkInput&&2===t.fileCheck&&t.stateEditFileCheck?o("v-tooltip",{attrs:{top:""}},[o("v-btn",{staticClass:"mx-0 my-0",attrs:{slot:"activator",icon:""},on:{click:function(o){o.stopPropagation(),e.changeFileComment(t,i)}},slot:"activator"},[o("v-icon",{staticClass:"mx-0",attrs:{size:"16",color:"primary"}},[e._v("send")])],1),o("span",[e._v("Gửi")])],1):e._e()],1),t.fileComment&&!t.stateEditFileCheck?o("i",{staticStyle:{"font-size":"12px",color:"#0d71bb","margin-left":"10px"}},[e._v(e._s(t.fileComment))]):e._e(),t.fileComment&&!t.stateEditFileCheck&&1===e.checkInput?o("v-tooltip",{attrs:{top:""}},[o("v-icon",{staticStyle:{"font-size":"13px",color:"#0d71bb","margin-left":"10px",cursor:"pointer"},attrs:{slot:"activator"},on:{click:function(e){e.stopPropagation(),t.stateEditFileCheck=!t.stateEditFileCheck}},slot:"activator"},[e._v("edit")]),o("span",[e._v("Chỉnh sửa ý kiến")])],1):e._e(),e._l(e.dossierFilesItems,function(i,s){return t.partNo===i.dossierPartNo?o("div",{key:s},[i.eForm?e._e():o("div",{style:{width:"calc(100% - 0px)",display:"flex","align-items":"center",background:"#fff","padding-left":"15px","font-size":"12px","margin-bottom":e.onlyView?"5px":"0px"}},[o("span",{staticClass:"ml-3",staticStyle:{cursor:"pointer"},on:{click:function(t){t.stopPropagation(),e.viewFile2(i)}}},[0!==i.fileSize?o("v-icon",{staticClass:"mr-1",attrs:{color:e.getDocumentTypeIcon(i.fileType)["color"],size:e.getDocumentTypeIcon(i.fileType)["size"]}},[e._v("\n                      "+e._s(e.getDocumentTypeIcon(i.fileType)["icon"])+"\n                    ")]):e._e(),e._v("\n                    "+e._s(i.displayName)+" - \n                    "),o("i",[e._v(e._s(i.modifiedDate))])],1),e.onlyView||1===e.checkInput?e._e():o("v-btn",{staticClass:"mx-0 my-0",attrs:{icon:"",ripple:""},on:{click:function(t){t.stopPropagation(),e.deleteSingleFile(i,s)}}},[o("v-icon",{staticStyle:{color:"red"}},[e._v("delete_outline")])],1)],1)]):e._e()}),o("div",{staticClass:"mr-3 my-2 py-2",staticStyle:{display:"none","max-height":"250px",overflow:"auto",border:"1px dashed #f3ae75","border-radius":"5px",position:"relative"},attrs:{id:"fileApplicant-"+t.partNo}},[e._l(e.dossierFilesApplicant,function(s,a){return s.dossierTemplateNo===e.thongTinHoSo["dossierTemplateNo"]&&t.partNo===s.dossierPartNo?o("div",{key:a},[s.eForm&&0!==s.fileSize?o("div",{style:{width:"calc(100% - 0px)",display:"flex","align-items":"center","padding-left":"15px","font-size":"12px","margin-bottom":e.onlyView?"5px":"3px"}},[o("v-tooltip",{staticStyle:{"max-width":"100%"},attrs:{top:""}},[o("span",{staticStyle:{cursor:"pointer"},attrs:{slot:"activator"},on:{click:function(t){t.stopPropagation(),e.viewGiayToDaNop(s)}},slot:"activator"},[o("i",{staticClass:"ml-1 fa fa-file-o",staticStyle:{color:"#0d71bb","font-size":"13px"}}),e._v("  \n                        "+e._s(s.dossierTemplateNo?s.dossierTemplateNo:s.referenceUid)+"."+e._s(s.fileType)+" - \n                        "),o("i",[e._v(e._s(s.modifiedDate))])]),o("span",[e._v("Bản khai trực tuyến")])]),e.progressUploadPart===s.dossierFileId?o("v-progress-circular",{attrs:{width:2,size:25,color:"green",indeterminate:""}}):e._e(),e.onlyView||e.progressUploadPart?e._e():o("v-tooltip",{staticClass:"ml-2",attrs:{top:""}},[o("v-btn",{staticClass:"mx-0 my-0",attrs:{slot:"activator",icon:""},on:{click:function(t){e.attachToDossier(s,i)}},slot:"activator"},[o("v-badge",[o("v-icon",{attrs:{size:"16",color:"orange darken-3"}},[e._v("cloud_download")])],1)],1),o("span",[e._v("Sử dụng giấy tờ này")])],1)],1):o("div",{style:{width:"calc(100% - 0px)",display:"flex","align-items":"center","padding-left":"15px","font-size":"12px","margin-bottom":e.onlyView?"5px":"3px"}},[o("v-tooltip",{staticStyle:{"max-width":"100%"},attrs:{top:""}},[o("span",{staticStyle:{cursor:"pointer"},attrs:{slot:"activator"},on:{click:function(t){t.stopPropagation(),e.viewGiayToDaNop(s)}},slot:"activator"},[0!==s.fileSize?o("v-icon",{staticStyle:{color:"#0d71bb"}},[e._v("attach_file")]):e._e(),e._v("\n                        "+e._s(s.displayName)+" - \n                        "),o("i",[e._v(e._s(s.modifiedDate))])],1),o("span",[e._v("Đính kèm")])]),e.progressUploadPart===s.dossierFileId?o("v-progress-circular",{attrs:{width:2,size:25,color:"green",indeterminate:""}}):e._e(),e.onlyView||e.progressUploadPart?e._e():o("v-tooltip",{staticClass:"ml-2",attrs:{top:""}},[o("v-btn",{staticClass:"mx-0 my-0",attrs:{slot:"activator",icon:""},on:{click:function(t){e.attachToDossier(s,i)}},slot:"activator"},[o("v-badge",[o("v-icon",{attrs:{size:"16",color:"orange darken-3"}},[e._v("cloud_download")])],1)],1),o("span",[e._v("Sử dụng giấy tờ này")])],1)],1)]):e._e()}),o("v-btn",{staticClass:"mx-0 my-0",staticStyle:{position:"absolute",right:"0px",top:"0px"},attrs:{flat:"",icon:"",color:"red"},on:{click:function(o){o.stopPropagation(),e.showFilesApplicant(t.partNo)}}},[o("v-icon",[e._v("clear")])],1)],2)],2)]),t.hasForm?o("v-card",{attrs:{flat:""}},[o("v-card-text",{staticStyle:{"background-color":"rgba(244, 247, 213, 0.19)"}},[o("v-layout",{attrs:{wrap:""}},[e.stateView?e._e():o("v-flex",{staticClass:"text-xs-right",attrs:{xs12:""}},[o("div",{style:e.pstFixed>e.pstEl&&e.pstFixed<e.endEl+e.pstEl?"position:fixed;top:5px;z-index:101":"",attrs:{id:"wrapForm"+t.partNo+e.id}},[t["editForm"]&&t.hasForm&&!e.onlyView&&1!==e.checkInput?o("v-btn",{attrs:{color:"primary",disabled:e.loadingApacal},on:{click:function(o){o.stopPropagation(),e.saveAlpacaForm(t,i)}}},[e.loadingApacal?o("i",{staticClass:"fa fa-spinner",attrs:{"aria-hidden":"true"}}):o("v-icon",{attrs:{color:"white"}},[e._v("save")]),e._v(" \n                      Lưu lại\n                    ")],1):e._e(),t["editForm"]&&t.daKhai&&t.hasForm?o("v-btn",{attrs:{color:"primary",disabled:e.loadingApacal},on:{click:function(o){o.stopPropagation(),e.previewFormAlpaca(t,i)}}},[e.loadingApacal?o("i",{staticClass:"fa fa-spinner",attrs:{"aria-hidden":"true"}}):o("v-icon",{attrs:{color:"white"}},[e._v("print")]),e._v(" \n                      Xem\n                    ")],1):e._e(),t["editForm"]||!t.hasForm||e.onlyView?e._e():o("v-btn",{attrs:{color:"primary"},on:{click:function(o){o.stopPropagation(),e.editFormAlpaca(t)}}},[o("v-icon",{attrs:{color:"white"}},[e._v("edit")]),e._v(" \n                      Sửa\n                    ")],1),t.daKhai&&t.hasForm&&!e.onlyView&&1!==e.checkInput?o("v-btn",{attrs:{color:"primary",disabled:e.loadingApacal},on:{click:function(o){o.stopPropagation(),e.deleteSingleFileEform(t,i)}}},[e.loadingApacal?o("i",{staticClass:"fa fa-spinner",attrs:{"aria-hidden":"true"}}):o("v-icon",{attrs:{color:"white"}},[e._v("delete")]),e._v(" \n                      Xóa\n                    ")],1):e._e()],1),t["editForm"]?o("div",{style:{"pointer-events: none":e.onlyView},attrs:{id:"formAlpaca"+t.partNo+e.id}}):e._e(),t["editForm"]?e._e():o("iframe",{staticStyle:{overflow:"auto","min-height":"600px"},attrs:{id:"displayPDF"+t.partNo+e.id,src:"",type:"application/pdf",width:"100%",height:"100%",frameborder:"0"}})])],1)],1)],1):e._e()],1)],1),o("div",{staticClass:"absolute__btn group__thanh_phan mr-1"},[e.loading?o("content-placeholders",{staticClass:"mt-1"},[o("content-placeholders-text",{attrs:{lines:1}})],1):o("v-layout",{attrs:{row:"",wrap:""}},[1===e.originality||e.onlyView?e._e():o("v-flex",{staticClass:"layout wrap mr-2",staticStyle:{width:"100px"}},[o("v-text-field",{staticClass:"counter-up-down text-xs-center",staticStyle:{width:"100px"},style:e.onlyView?"pointer-events: none":"",attrs:{title:"Số lượng","append-icon":"add","prepend-inner-icon":"remove","clear-icon":"mdi-close-circle",type:"number",solo:"",flat:"",height:"32"},on:{"click:append":function(t){e.increaseCounter(i)},"click:prepend-inner":function(t){e.decreaseCounter(i)},input:function(t){e.changeRecordCount(i)}},model:{value:e.dossierTemplateItems[i]["recordCount"],callback:function(t){e.$set(e.dossierTemplateItems[i],"recordCount",t)},expression:"dossierTemplateItems[index]['recordCount']"}})],1),1===e.originality||1!==t.partType||e.thongTinHoSo.online||1===e.checkInput?e._e():o("v-flex",{staticClass:"layout wrap",staticStyle:{width:"100px"}},[o("v-select",{style:e.onlyView?"pointer-events: none":"",attrs:{items:e.fileMarkItems},on:{change:function(t){e.changeFileMark(t,i)}},model:{value:e.dossierTemplateItems[i].fileMark,callback:function(t){e.$set(e.dossierTemplateItems[i],"fileMark",t)},expression:"dossierTemplateItems[index].fileMark"}})],1),1===e.checkInput?o("v-flex",{staticClass:"layout wrap",staticStyle:{width:"120px"}},[o("v-select",{attrs:{items:e.fileCheckItems,"item-text":"text","item-value":"value"},on:{change:function(t){e.changeFileCheck(t,i)}},model:{value:e.dossierTemplateItems[i].fileCheck,callback:function(t){e.$set(e.dossierTemplateItems[i],"fileCheck",t)},expression:"dossierTemplateItems[index].fileCheck"}})],1):t.fileCheck>0?o("v-flex",{staticClass:"layout wrap",style:{width:"40px","align-items":"center","margin-left":"10px","margin-top":e.thongTinHoSo.online?"10px":"0px"}},[1===t.fileCheck?o("v-tooltip",{attrs:{top:""}},[o("v-icon",{staticClass:"mx-0",attrs:{slot:"activator",size:"24",color:"primary"},slot:"activator"},[e._v("done")]),o("span",[e._v("Đạt")])],1):2===t.fileCheck?o("v-tooltip",{attrs:{top:""}},[o("v-icon",{staticClass:"mx-0",attrs:{slot:"activator",size:"24",color:"primary"},slot:"activator"},[e._v("close")]),o("span",[e._v("Không đạt")])],1):e._e()],1):e._e(),1!==e.checkInput?o("v-flex",{class:{"text-xs-right":e.onlyView},style:{width:e.onlyView?"auto":"120px"}},[t["multiple"]?o("input",{staticStyle:{display:"none"},attrs:{type:"file",multiple:"",id:"file"+t.partNo},on:{change:function(o){e.onUploadSingleFile(o,t,i)}}}):o("input",{staticStyle:{display:"none"},attrs:{type:"file",id:"file"+t.partNo},on:{change:function(o){e.onUploadSingleFile(o,t,i)}}}),3!==t.partType||3!==e.originality||e.onlyView?e._e():o("v-tooltip",{attrs:{top:""}},[o("v-btn",{staticClass:"mx-0 my-0",attrs:{slot:"activator",icon:""},on:{click:function(o){e.addFileOther(t)}},slot:"activator"},[o("v-icon",{staticClass:"mx-0",attrs:{size:"16",color:"primary"}},[e._v("add")])],1),o("span",[e._v("Thêm giấy tờ khác")])],1),e.progressUploadPart===t.partNo?o("v-progress-circular",{attrs:{width:2,size:25,color:"green",indeterminate:""}}):e._e(),e.progressUploadPart!==t.partNo&&!e.onlyView&t.hasForm?o("v-tooltip",{attrs:{top:""}},[o("v-btn",{staticClass:"mx-0 my-0",attrs:{slot:"activator",icon:""},on:{click:function(o){o.stopPropagation(),e.loadAlpcaFormClick(t)}},slot:"activator"},[o("v-badge",[o("v-icon",{attrs:{size:"24",color:"#004b94"}},[e._v("edit")])],1)],1),o("span",[e._v("Khai trực tuyến")])],1):e._e(),e.progressUploadPart!==t.partNo&&e.onlyView&t.hasForm?o("v-tooltip",{attrs:{top:""}},[o("v-btn",{staticClass:"mx-1 my-0",staticStyle:{height:"25px",width:"25px"},attrs:{slot:"activator",fab:"",dark:"",small:"",color:"primary"},on:{click:function(o){e.loadAlpcaFormClick(t)}},slot:"activator"},[o("v-icon",{staticStyle:{"font-size":"14px"}},[e._v("visibility")])],1),o("span",[e._v("Xem")])],1):e._e(),e.progressUploadPart===t.partNo||e.onlyView?e._e():o("v-tooltip",{attrs:{left:""}},[o("v-btn",{staticClass:"mx-0 my-0",attrs:{slot:"activator",icon:""},on:{click:function(o){e.pickFile(t)}},slot:"activator"},[o("v-badge",[o("v-icon",{attrs:{size:"24",color:"#004b94"}},[e._v("cloud_upload")])],1)],1),t.partTip["extensions"]||t.partTip["maxSize"]?o("span",[e._v("Tải giấy tờ lên (Chấp nhận tải lên các định dạng: "+e._s(t.partTip["extensions"])+". Tối đa "+e._s(t.partTip["maxSize"])+" MB)")]):o("span",[e._v("Tải giấy tờ lên")])],1),e.partNoApplicantHasFile(t.partNo)&&!e.onlyView?o("v-tooltip",{attrs:{top:""}},[o("v-btn",{staticClass:"mx-0 my-0",attrs:{slot:"activator",icon:""},on:{click:function(o){e.showFilesApplicant(t.partNo)}},slot:"activator"},[o("v-badge",[o("v-icon",{attrs:{size:"24",color:"orange darken-3"}},[e._v("folder")])],1)],1),o("span",[e._v("Giấy tờ đã nộp")])],1):e._e()],1):e._e()],1)],1)],1)}),e.partTypes.includes(2)||3!==e.originality||e.partTypes.includes(6)||e.partTypes.includes(7)?e._e():o("div",[o("v-card",{attrs:{flat:""}},[o("v-card-text",{staticClass:"py-0 px-3 pl-4",attrs:{flat:""}},[e.onlyView?e._e():o("div",{staticClass:"my-2"},[o("v-textarea",{staticClass:"py-0",attrs:{box:"",rows:"3",label:"Ghi chú"},on:{input:e.changeApplicantNote},model:{value:e.applicantNoteDossier,callback:function(t){e.applicantNoteDossier=t},expression:"applicantNoteDossier"}})],1),e.onlyView&&e.applicantNoteDossier?o("v-text-field",{staticClass:"my-2",attrs:{label:"Ghi chú",readonly:"",box:""},model:{value:e.applicantNoteDossier,callback:function(t){e.applicantNoteDossier=t},expression:"applicantNoteDossier"}}):e._e()],1)],1)],1),o("v-dialog",{attrs:{"max-width":"400",transition:"fade-transition",persistent:""},model:{value:e.dialogAddOtherTemp,callback:function(t){e.dialogAddOtherTemp=t},expression:"dialogAddOtherTemp"}},[o("v-card",[o("v-form",{ref:"form",attrs:{"lazy-validation":""},model:{value:e.valid,callback:function(t){e.valid=t},expression:"valid"}},[o("v-toolbar",{attrs:{dark:"",color:"primary"}},[o("v-toolbar-title",[e._v("Tên giấy tờ")]),o("v-spacer"),o("v-btn",{attrs:{icon:"",dark:""},nativeOn:{click:function(t){return e.cancelDialog(t)}}},[o("v-icon",[e._v("close")])],1)],1),o("v-card-text",{staticClass:"pb-0 pt-4"},[o("v-layout",{attrs:{wrap:""}},[o("v-flex",{staticClass:"px-2 pb-3 fix__label",attrs:{xs12:""}},[o("v-text-field",{attrs:{label:"Tên giấy tờ:",rules:[function(e){return!!e||"Bạn phải điền tên giấy tờ."}],required:""},model:{value:e.otherDossierTemplate,callback:function(t){e.otherDossierTemplate=t},expression:"otherDossierTemplate"}})],1)],1)],1),o("v-card-actions",[o("v-spacer"),o("v-btn",{attrs:{color:"red darken-3",flat:"flat",loading:e.loadingAddOther},nativeOn:{click:function(t){return e.cancelDialog(t)}}},[e._v("\n              Quay lại\n              "),o("span",{attrs:{slot:"loader"},slot:"loader"},[e._v("Loading...")])]),o("v-btn",{attrs:{color:"primary",flat:"flat",loading:e.loadingAddOther},nativeOn:{click:function(t){return e.addOtherTemplate(t)}}},[e._v("\n              Đồng ý\n              "),o("span",{attrs:{slot:"loader"},slot:"loader"},[e._v("Loading...")])])],1)],1)],1)],1)],2),o("v-dialog",{staticStyle:{overflow:"hidden"},attrs:{"max-width":"900",transition:"fade-transition"},model:{value:e.dialogPDF,callback:function(t){e.dialogPDF=t},expression:"dialogPDF"}},[o("v-card",[o("v-toolbar",{attrs:{dark:"",color:"primary"}},[o("v-toolbar-title",[e.pdfEform?o("span",[e._v("Bản in đã khai trực tuyến")]):o("span",[e._v("Tài liệu đính kèm")])]),o("v-spacer"),o("v-btn",{attrs:{icon:"",dark:""},nativeOn:{click:function(t){e.dialogPDF=!1}}},[o("v-icon",[e._v("close")])],1)],1),e.dialogPDFLoading?o("div",{staticStyle:{"min-height":"600px","text-align":"center",margin:"auto",padding:"25%"}},[o("v-progress-circular",{attrs:{size:100,width:1,color:"primary",indeterminate:""}})],1):e._e(),o("iframe",{directives:[{name:"show",rawName:"v-show",value:!e.dialogPDFLoading,expression:"!dialogPDFLoading"}],staticStyle:{overflow:"auto","min-height":"600px"},attrs:{id:"dialogPDFPreview"+e.id,src:"",type:"application/pdf",width:"100%",height:"100%",frameborder:"0"}})],1)],1)],1)},s=[],a=o("6f34"),r=a["a"],n=o("2877"),l=Object(n["a"])(r,i,s,!1,null,null,null);t["a"]=l.exports},"6f34":function(module,__webpack_exports__,__webpack_require__){"use strict";var d_SourseCode_FDS_OPENCPS_front_end_opencps_frontend_opencps_v2_1_onegate_21_fe_node_modules_babel_runtime_corejs2_core_js_object_assign__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("5176"),d_SourseCode_FDS_OPENCPS_front_end_opencps_frontend_opencps_v2_1_onegate_21_fe_node_modules_babel_runtime_corejs2_core_js_object_assign__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(d_SourseCode_FDS_OPENCPS_front_end_opencps_frontend_opencps_v2_1_onegate_21_fe_node_modules_babel_runtime_corejs2_core_js_object_assign__WEBPACK_IMPORTED_MODULE_0__),core_js_modules_es6_array_find_index__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("20d6"),core_js_modules_es6_array_find_index__WEBPACK_IMPORTED_MODULE_1___default=__webpack_require__.n(core_js_modules_es6_array_find_index__WEBPACK_IMPORTED_MODULE_1__),core_js_modules_es6_array_find__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("7514"),core_js_modules_es6_array_find__WEBPACK_IMPORTED_MODULE_2___default=__webpack_require__.n(core_js_modules_es6_array_find__WEBPACK_IMPORTED_MODULE_2__),d_SourseCode_FDS_OPENCPS_front_end_opencps_frontend_opencps_v2_1_onegate_21_fe_node_modules_babel_runtime_corejs2_core_js_array_is_array__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("a745"),d_SourseCode_FDS_OPENCPS_front_end_opencps_frontend_opencps_v2_1_onegate_21_fe_node_modules_babel_runtime_corejs2_core_js_array_is_array__WEBPACK_IMPORTED_MODULE_3___default=__webpack_require__.n(d_SourseCode_FDS_OPENCPS_front_end_opencps_frontend_opencps_v2_1_onegate_21_fe_node_modules_babel_runtime_corejs2_core_js_array_is_array__WEBPACK_IMPORTED_MODULE_3__),d_SourseCode_FDS_OPENCPS_front_end_opencps_frontend_opencps_v2_1_onegate_21_fe_node_modules_babel_runtime_corejs2_core_js_promise__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("795b"),d_SourseCode_FDS_OPENCPS_front_end_opencps_frontend_opencps_v2_1_onegate_21_fe_node_modules_babel_runtime_corejs2_core_js_promise__WEBPACK_IMPORTED_MODULE_4___default=__webpack_require__.n(d_SourseCode_FDS_OPENCPS_front_end_opencps_frontend_opencps_v2_1_onegate_21_fe_node_modules_babel_runtime_corejs2_core_js_promise__WEBPACK_IMPORTED_MODULE_4__),core_js_modules_es6_string_iterator__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("5df3"),core_js_modules_es6_string_iterator__WEBPACK_IMPORTED_MODULE_5___default=__webpack_require__.n(core_js_modules_es6_string_iterator__WEBPACK_IMPORTED_MODULE_5__),core_js_modules_web_dom_iterable__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("ac6a"),core_js_modules_web_dom_iterable__WEBPACK_IMPORTED_MODULE_6___default=__webpack_require__.n(core_js_modules_web_dom_iterable__WEBPACK_IMPORTED_MODULE_6__),core_js_modules_es7_array_includes__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__("6762"),core_js_modules_es7_array_includes__WEBPACK_IMPORTED_MODULE_7___default=__webpack_require__.n(core_js_modules_es7_array_includes__WEBPACK_IMPORTED_MODULE_7__),core_js_modules_es6_string_includes__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__("2fdb"),core_js_modules_es6_string_includes__WEBPACK_IMPORTED_MODULE_8___default=__webpack_require__.n(core_js_modules_es6_string_includes__WEBPACK_IMPORTED_MODULE_8__),core_js_modules_es6_number_constructor__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__("c5f6"),core_js_modules_es6_number_constructor__WEBPACK_IMPORTED_MODULE_9___default=__webpack_require__.n(core_js_modules_es6_number_constructor__WEBPACK_IMPORTED_MODULE_9__),jquery__WEBPACK_IMPORTED_MODULE_10__=__webpack_require__("1157"),jquery__WEBPACK_IMPORTED_MODULE_10___default=__webpack_require__.n(jquery__WEBPACK_IMPORTED_MODULE_10__),toastr__WEBPACK_IMPORTED_MODULE_11__=__webpack_require__("854a"),toastr__WEBPACK_IMPORTED_MODULE_11___default=__webpack_require__.n(toastr__WEBPACK_IMPORTED_MODULE_11__);toastr__WEBPACK_IMPORTED_MODULE_11___default.a.options={closeButton:!0,timeOut:"5000"},__webpack_exports__["a"]={props:{onlyView:{type:Boolean,default:function(){return!1}},id:{type:String,default:function(){return"nm"}},partTypes:{type:Array,default:function(){return[1,3]}},checkInput:{type:Number,default:function(){return 0}}},data:function(){return{dossierTemplateItems:[],dossierMarksItems:[],dossierFilesItems:[],thongTinHoSo:{},valid:!0,stateView:!1,dialogAddOtherTemp:!1,loadingAddOther:!1,loadingApacal:!1,otherDossierTemplate:"",sheet:!1,partView:"",dossierFileIdView:"",stateEdit:!1,progressUploadPart:"",dialogPDF:!1,dialogPDFLoading:!0,stateAddFileOther:!1,dossierTemplatesItemSelect:{},fileViews:[],pdfEform:!1,sampleCount:0,serviceInfoId:0,fileMarkItems:[{text:"Không có",value:0},{text:"Bản chụp",value:1},{text:"Bản sao",value:2},{text:"Bản gốc",value:3},{text:"Bản dịch",value:4}],fileCheckItems:[{text:"Chưa kiểm tra",value:0},{text:"Đạt",value:1},{text:"Không đạt",value:2}],fileTemplateItems:[],fileTemplateNoString:"",dossierFilesApplicant:[],stateViewResult:!0,currentFormView:"",pstFixed:0,pstEl:0,endEl:0,applicantNoteDossier:"",doChange:""}},computed:{loading:function(){return this.$store.getters.loading},originality:function(){var e=this;return e.getOriginality()},initDataResource:function(){return this.$store.getters.loadingInitData},dossierTemplateItemsFilter:function(){var e=this,t=e.dossierTemplateItems;if(t.length>0){var o=t.filter(function(t){return e.partTypes.includes(t.partType)&&e.checkVisibleTemp(t,0)});return o}},applicantBussinessExit:function(){return this.$store.getters.getApplicantBussinessExit},applicantId:function(){return this.$store.getters.getApplicantIdNo},applicantNote:function(){return this.$store.getters.getApplicantNote}},mounted:function(){var e=this;e.page=1,e.$nextTick(function(){})},watch:{applicantBussinessExit:function(e){var t=this;e&&t.fileTemplateNoString&&t.getDossierFileApplicants(e,t.fileTemplateNoString)},applicantId:function(e){var t=this;e&&t.fileTemplateNoString&&t.getDossierFileApplicants(e,t.fileTemplateNoString)}},methods:{resetCounterTemplate:function(e,t){e.commit,e.state;var o=this;o.dossierTemplateItems.forEach(function(e){e.partNo===t.partNo&&(e.hasForm?e.count=1:e.count=0)})},recountFileTemplates:function(){var e=this;e.dossierTemplateItems.forEach(function(t){t.count=0,e.dossierFilesItems.forEach(function(e){t.partNo!==e.dossierPartNo||e.eForm||t.count++})})},initData:function(e){var t=this;t.thongTinHoSo=e,t.applicantNoteDossier=e["applicantNote"]&&String(e["applicantNote"]).indexOf("<br>[")<0?e["applicantNote"]:"";var o=[];null!==e["sampleCount"]&&void 0!==e["sampleCount"]&&"undefined"!==e["sampleCount"]&&(t.sampleCount=e["sampleCount"]),o.push(t.$store.dispatch("loadDossierTemplates",e)),o.push(t.$store.dispatch("loadDossierMark",e)),o.push(t.$store.dispatch("loadDossierFiles",e.dossierId)),o.push(t.$store.dispatch("getServiceInfo",{serviceInfoId:e.serviceCode})),d_SourseCode_FDS_OPENCPS_front_end_opencps_frontend_opencps_v2_1_onegate_21_fe_node_modules_babel_runtime_corejs2_core_js_promise__WEBPACK_IMPORTED_MODULE_4___default.a.all(o).then(function(e){var o=e[0],i=e[1],s=e[2],a=[];e[3].hasOwnProperty("serviceInfoId")&&(t.serviceInfoId=e[3].serviceInfoId),e[3].fileTemplates&&(d_SourseCode_FDS_OPENCPS_front_end_opencps_frontend_opencps_v2_1_onegate_21_fe_node_modules_babel_runtime_corejs2_core_js_array_is_array__WEBPACK_IMPORTED_MODULE_3___default()(e[3].fileTemplates)?a=e[3].fileTemplates:a.push(e[3].fileTemplates));var r=t.mergeDossierTemplateVsDossierFiles(o,s);if(r=t.mergeDossierTemplateVsDossierMark(r,i),r=t.mergeDossierTemplateVsFileTemplates(r,a),t.dossierFilesItems=s,t.dossierMarksItems=i,t.fileTemplateItems=a,t.dossierTemplateItems=r,(t.partTypes.includes(2)||t.partTypes.includes(7))&&t.dossierTemplateItems.length>0){var n=[];t.dossierTemplateItems.forEach(function(e){var o=t.dossierFilesItems.find(function(t){return e.partNo===t.dossierPartNo&&(2===e.partType||7===e.partType)});o&&n.push(e)}),t.dossierTemplateItems=n}t.changeStateViewResult(),setTimeout(function(e){t.genAllAlpacaForm(s,r),t.recountFileTemplates()},500);var l=[];for(var c in t.dossierTemplateItems)t.dossierTemplateItems[c]["fileTemplateNo"]&&l.push(t.dossierTemplateItems[c]["fileTemplateNo"]);l.length>0&&(t.fileTemplateNoString=l.toString(),t.applicantId&&!t.onlyView&&t.getDossierFileApplicants(t.applicantId,t.fileTemplateNoString))}).catch(function(e){})},genAllAlpacaForm:function(e,t){var o=this;if(e.length>0){var i=e.filter(function(e){return e.eForm}),s=t.filter(function(e){return e.hasForm&&o.partTypes.includes(e.partType)});i.length>0?i.forEach(function(e){e.eForm&&o.$store.dispatch("loadAlpcaForm",e)}):t.forEach(function(e){e.hasForm&&o.partTypes.includes(e.partType)&&(e["templateFileNo"]=o.thongTinHoSo.dossierTemplateNo,o.showAlpacaJSFORM(e))}),s.length!==i.length&&s.forEach(function(e){var t=i.findIndex(function(t){return e.partNo===t.dossierPartNo});-1===t&&(e["templateFileNo"]=o.thongTinHoSo.dossierTemplateNo,o.showAlpacaJSFORM(e))})}else t.forEach(function(e){e.hasForm&&o.partTypes.includes(e.partType)&&(e["templateFileNo"]=o.thongTinHoSo.dossierTemplateNo,o.showAlpacaJSFORM(e))})},postDossierMark:function(e,t){var o=this;e["dossierId"]=o.thongTinHoSo.dossierId,o.$store.dispatch("postDossierMark",e).then(function(e){}).catch(function(e){})},mergeDossierTemplateVsDossierFiles:function(e,t){var o=this;return 0!==t.length?e.forEach(function(e){e["editForm"]=!0,e["daKhai"]=!1,e["passRequired"]=!1;var i=t.find(function(t){return e.partNo===t.dossierPartNo&&o.partTypes.includes(e.partType)&&t.eForm&&!t.removed&&0!==t.fileSize});i&&(e["daKhai"]=!0,e["hasForm"]=!0,e["referenceUid"]=i["referenceUid"]),t.forEach(function(t){e.partNo===t.dossierPartNo&&(e["passRequired"]=!0)})}):e.forEach(function(e){e.hasForm&&(e["daKhai"]=!1,e["passRequired"]=!1,e["editForm"]=!0)}),e},mergeDossierTemplateVsDossierMark:function(e,t){return 0!==t.length?e.map(function(e){e["count"]=0,e["stateEditFileCheck"]=!1;var o=t.find(function(t){return t.dossierPartNo===e.partNo});return null!==o&&void 0!==o?(e["fileMark"]=o.fileMark,e["fileComment"]=o.fileComment,e["fileCheck"]=o.fileCheck,e["recordCount"]=o.recordCount):(e["fileMark"]=0,e["fileComment"]="",e["fileCheck"]=0,e["recordCount"]=""),e}):e&&e.forEach(function(e){e["stateEditFileCheck"]=!1,e["count"]=0,e["fileMark"]=0,e["fileComment"]="",e["fileCheck"]=0,e["stateEditFileCheck"]=!1}),e},mergeDossierTemplateVsFileTemplates:function(e,t){return 0!==t.length?e.map(function(e){var o=t.find(function(t){return t.fileTemplateNo===e.fileTemplateNo});return e["hasFileTemp"]=null!==o&&void 0!==o?o.fileTemplateNo:"",e}):e&&e.forEach(function(e){e["hasFileTemp"]=""}),e},showAlpacaJSFORM:function showAlpacaJSFORM(item){var vm=this;item["dossierId"]=vm.thongTinHoSo.dossierId,vm.$store.dispatch("loadFormScript",item).then(function(resScript){vm.$store.dispatch("loadFormData",item).then(function(resData){var formScript,formData;window.$('div[id="formAlpaca'+item.partNo+vm.id+'"]').empty(),formScript=resScript?eval("("+resScript+")"):{},resData?(formData=eval("("+resData+")"),item["loaded"]=!0):formData={},formScript.data=formData,window.$('div[id="formAlpaca'+item.partNo+vm.id+'"]').alpaca(formScript)})})},saveAlpacaForm:function(e,t){var o=this,i=o.dossierFilesItems.find(function(t){return t.dossierPartNo===e.partNo&&t.eForm&&0!==t.fileSize});i?(i["dossierId"]=o.thongTinHoSo.dossierId,i["id"]=o.id,o.loadingApacal=!0,o.$store.dispatch("putAlpacaForm",i).then(function(e){setTimeout(function(){o.loadingApacal=!1,toastr__WEBPACK_IMPORTED_MODULE_11___default.a.clear(),toastr__WEBPACK_IMPORTED_MODULE_11___default.a.success("Thực hiện thành công")},3e3),o.$store.dispatch("loadDossierFiles",o.thongTinHoSo.dossierId).then(function(e){o.dossierFilesItems=e}).catch(function(e){}),o.dossierTemplateItems[t]["passRequired"]=!0}).catch(function(e){o.loadingApacal=!1,toastr__WEBPACK_IMPORTED_MODULE_11___default.a.clear(),toastr__WEBPACK_IMPORTED_MODULE_11___default.a.error("Yêu cầu của bạn thực hiện thất bại.")})):(e["dossierId"]=o.thongTinHoSo.dossierId,e["id"]=o.id,o.loadingApacal=!0,o.$store.dispatch("postEform",e).then(function(e){setTimeout(function(){o.loadingApacal=!1,toastr__WEBPACK_IMPORTED_MODULE_11___default.a.clear(),toastr__WEBPACK_IMPORTED_MODULE_11___default.a.success("Thực hiện thành công"),o.dossierTemplateItems[t].daKhai=!0},3e3),o.dossierTemplateItems[t]["passRequired"]=!0,o.$store.dispatch("loadDossierFiles",o.thongTinHoSo.dossierId).then(function(e){o.dossierFilesItems=e}).catch(function(e){toastr__WEBPACK_IMPORTED_MODULE_11___default.a.clear(),toastr__WEBPACK_IMPORTED_MODULE_11___default.a.error("Yêu cầu của bạn thực hiện thất bại.")})}).catch(function(e){o.loadingApacal=!1,toastr__WEBPACK_IMPORTED_MODULE_11___default.a.clear(),toastr__WEBPACK_IMPORTED_MODULE_11___default.a.error("Yêu cầu của bạn thực hiện thất bại.")}))},onDeleteAttackFiles:function(e){var t=this;console.log("delete");var o=confirm("Bạn có muốn xóa toàn bộ file trong thành phần hồ sơ này?");o&&t.dossierFilesItems.forEach(function(o){o.dossierPartNo===e.partNo&&(o["dossierId"]=t.thongTinHoSo.dossierId,t.$store.dispatch("deleteAttackFiles",o).then(function(o){t.resetCounterTemplate(e),t.$store.dispatch("loadDossierFiles",t.thongTinHoSo.dossierId)}).catch(function(e){}))})},changeApplicantNote:function(){var e=this;console.log("applicantNoteEdit",e.applicantNoteDossier),e.$store.commit("setApplicantNote",e.applicantNoteDossier)},pickFile:function(e){var t=this;t.stateAddFileOther=!1,document.getElementById("file"+e.partNo).value="",document.getElementById("file"+e.partNo).click()},onUploadSingleFile:function(e,t,o){var i=this;if(i.dossierTemplatesItemSelect=t,i.progressUploadPart=t.partNo,t["dossierId"]=i.thongTinHoSo.dossierId,t["dossierTemplateNo"]=i.thongTinHoSo.dossierTemplateNo,3!==t.partType)i.$store.dispatch("uploadSingleFile",t).then(function(e){i.dossierTemplateItems[o]["passRequired"]=!0,i.progressUploadPart="",i.$store.dispatch("loadDossierFiles",i.thongTinHoSo.dossierId).then(function(e){i.dossierFilesItems=e,i.recountFileTemplates()})}).catch(function(e){e.length>0&&(i.dossierTemplateItems[o]["passRequired"]=!0),i.progressUploadPart="",i.$store.dispatch("loadDossierFiles",i.thongTinHoSo.dossierId).then(function(e){i.dossierFilesItems=e,i.recountFileTemplates()})});else{if(0===window.$('input[id="file'+t.partNo+'"]')[0].files.length)return void(i.progressUploadPart="");i.partView=t.partNo,i.stateView=!0,i.dialogAddOtherTemp=!0}},loadAlpcaForm:function(e){var t=this,o=t.dossierFilesItems.find(function(t){return t.dossierPartNo===e.partNo&&t.eForm});o?(o["id"]=t.id,t.$store.dispatch("loadAlpcaForm",o)):t.dossierTemplateItems.forEach(function(o){o.hasForm&&e.partNo===o.partNo&&(o["templateFileNo"]=t.thongTinHoSo.dossierTemplateNo,t.showAlpacaJSFORM(o))})},loadAlpcaFormClick:function(e){var t=this;t.currentFormView==="formAlpaca"+e.partNo+t.id?t.currentFormView="":t.currentFormView="formAlpaca"+e.partNo+t.id,t.pstEl=t.endEl=0,setTimeout(function(){window.$('div[id="formAlpaca'+e.partNo+t.id+'"]').height()>200&&(t.pstEl=window.$('div[id="wrapForm'+e.partNo+t.id+'"]').offset().top,t.endEl=window.$('div[id="formAlpaca'+e.partNo+t.id+'"]').height(),jquery__WEBPACK_IMPORTED_MODULE_10___default()(window).scroll(function(){t.pstFixed=jquery__WEBPACK_IMPORTED_MODULE_10___default()(window).scrollTop()}))},500);var o=t.dossierFilesItems.find(function(t){return t.dossierPartNo===e.partNo&&t.eForm&&t.fileSize});o?(o["id"]=t.id,t.$store.dispatch("loadAlpcaForm",o),e["editForm"]=!1,t.$store.dispatch("viewFile",o).then(function(e){document.getElementById("displayPDF"+o.dossierPartNo+t.id).src=e})):t.dossierTemplateItems.forEach(function(o){o.hasForm&&e.partNo===o.partNo&&(o["templateFileNo"]=t.thongTinHoSo.dossierTemplateNo,o["loaded"]||t.showAlpacaJSFORM(o))})},editFormAlpaca:function(e){var t=this;e["editForm"]=!0,setTimeout(function(){var o=t.dossierFilesItems.find(function(t){return t.dossierPartNo===e.partNo&&t.eForm});o["id"]=t.id,t.$store.dispatch("loadAlpcaForm",o)},200)},deleteSingleFileEform:function(e,t){var o=this,i=confirm("Bạn có chắc chắn xóa file?");i&&o.dossierFilesItems.forEach(function(i){i.dossierPartNo===e.partNo&&i.eForm&&(i["dossierId"]=o.thongTinHoSo.dossierId,o.$store.dispatch("deleteDossierFile",i).then(function(i){o.dossierTemplateItems[t].daKhai=!1,o.$store.dispatch("loadDossierFiles",o.thongTinHoSo.dossierId).then(function(i){if(o.dossierFilesItems=i,o.recountFileTemplates(),e["editForm"]=!0,setTimeout(function(){o.loadAlpcaForm(e)},200),0!==o.dossierFilesItems.length){var s=o.dossierFilesItems.filter(function(t){return t.dossierPartNo===e.partNo});o.dossierTemplateItems[t]["passRequired"]=!!s}else o.dossierTemplateItems[t]["passRequired"]=!1})}))})},previewFileEfom:function(e,t){var o=this;o.dossierFilesItems.forEach(function(t){t.dossierPartNo===e.partNo&&t.eForm&&!t.removed&&(t["dossierId"]=o.thongTinHoSo.dossierId,o.dialogPDFLoading=!0,o.dialogPDF=!0,o.onlyView?o.$store.dispatch("viewFile",t).then(function(e){o.dialogPDFLoading=!1,t["eForm"]?o.pdfEform=!0:o.pdfEform=!1,document.getElementById("dialogPDFPreview"+o.id).src=e}):(t["id"]=o.id,o.$store.dispatch("putAlpacaForm",t).then(function(e){setTimeout(function(){o.$store.dispatch("viewFile",t).then(function(e){o.dialogPDFLoading=!1,document.getElementById("dialogPDFPreview"+o.id).src=e})},1e3)}).catch(function(e){toastr__WEBPACK_IMPORTED_MODULE_11___default.a.clear(),toastr__WEBPACK_IMPORTED_MODULE_11___default.a.error("Yêu cầu của bạn thực hiện thất bại.")})))})},previewFormAlpaca:function(e,t){var o=this;o.dossierFilesItems.forEach(function(t){t.dossierPartNo===e.partNo&&t.eForm&&!t.removed&&(t["dossierId"]=o.thongTinHoSo.dossierId,o.onlyView?(e["editForm"]=!1,o.$store.dispatch("viewFile",t).then(function(i){t["eForm"]?o.pdfEform=!0:o.pdfEform=!1,document.getElementById("displayPDF"+e.dossierPartNo+o.id).src=i})):(t["id"]=o.id,o.$store.dispatch("putAlpacaForm",t).then(function(i){e["editForm"]=!1,setTimeout(function(){o.$store.dispatch("viewFile",t).then(function(e){document.getElementById("displayPDF"+t.dossierPartNo+o.id).src=e})},500)}).catch(function(e){toastr__WEBPACK_IMPORTED_MODULE_11___default.a.clear(),toastr__WEBPACK_IMPORTED_MODULE_11___default.a.error("Yêu cầu của bạn thực hiện thất bại.")})))})},deleteSingleFile:function(e,t){var o=this,i=confirm("Bạn có chắc chắn xóa file đính kèm ?");i&&(e["dossierId"]=o.thongTinHoSo.dossierId,o.$store.dispatch("deleteDossierFile",e).then(function(i){o.fileViews.splice(t,1),o.partView=e.dossierPartNo,o.$store.dispatch("loadDossierFiles",o.thongTinHoSo.dossierId).then(function(t){o.dossierFilesItems=t,o.setDaKhai(e)})}).catch(function(e){toastr__WEBPACK_IMPORTED_MODULE_11___default.a.clear(),toastr__WEBPACK_IMPORTED_MODULE_11___default.a.error("Yêu cầu của bạn thực hiện thất bại.")}))},viewFile:function(e){var t=this,o=this;o.dossierFilesItems.forEach(function(i){i["dossierId"]=o.thongTinHoSo.dossierId,i.dossierPartNo===e.partNo&&t.$store.dispatch("viewFile",i)})},setDaKhai:function(e){var t=this,o=t.dossierFilesItems.findIndex(function(t){return t.dossierPartNo===e.dossierPartNo});if(-1===o){for(var i=0;i<t.dossierTemplateItems.length;i++)if(t.dossierTemplateItems[i].partNo===e.dossierPartNo){t.dossierTemplateItems[i]["passRequired"]=!1;break}}else for(i=0;i<t.dossierTemplateItems.length;i++)if(t.dossierTemplateItems[i].partNo===e.dossierPartNo){t.dossierTemplateItems[i]["passRequired"]=!0;break}},checkPartType3:function(){var e=this;if(0!==e.dossierTemplateItems.length)for(var t=0;t<e.dossierTemplateItems.length;t++)if(3===e.dossierTemplateItems[t].partType)return!0;return!1},viewFile2:function(e){var t=this;if(0!==e.fileSize)if(e["eForm"]?t.pdfEform=!0:t.pdfEform=!1,"doc"===e.fileType||"docx"===e.fileType||"xlsx"===e.fileType||"xls"===e.fileType||"zip"===e.fileType||"rar"===e.fileType||"txt"===e.fileType||"mp3"===e.fileType||"mp4"===e.fileType){var o=t.initDataResource.dossierApi+"/"+t.thongTinHoSo.dossierId+"/files/"+e.referenceUid;window.open(o)}else e["dossierId"]=t.thongTinHoSo.dossierId,e.referenceUid?(t.dialogPDFLoading=!0,t.dialogPDF=!0,t.$store.dispatch("viewFile",e).then(function(e){t.dialogPDFLoading=!1,document.getElementById("dialogPDFPreview"+t.id).src=e})):(toastr__WEBPACK_IMPORTED_MODULE_11___default.a.clear(),toastr__WEBPACK_IMPORTED_MODULE_11___default.a.error("File dữ liệu không tồn tại"))},attachToDossier:function(e,t){var o=this;console.log(e,t),e["dossierId"]=o.thongTinHoSo.dossierId,3!==e.partType&&(o.progressUploadPart=e.dossierFileId,o.$store.dispatch("copyFile",e).then(function(e){o.progressUploadPart="",o.dossierTemplateItems[t]["passRequired"]=!0,o.$store.dispatch("loadDossierFiles",o.thongTinHoSo.dossierId).then(function(e){o.dossierFilesItems=e,o.recountFileTemplates()})}).catch(function(e){o.progressUploadPart="",toastr__WEBPACK_IMPORTED_MODULE_11___default.a.error("Đính kèm tài liệu thất bại")}))},viewGiayToDaNop:function(e){var t=this;if(0!==e.fileSize)if(e["eForm"]?t.pdfEform=!0:t.pdfEform=!1,"doc"===e.fileType||"docx"===e.fileType||"xlsx"===e.fileType||"xls"===e.fileType||"zip"===e.fileType||"rar"===e.fileType||"txt"===e.fileType||"mp3"===e.fileType||"mp4"===e.fileType){var o=t.initDataResource.dossierApi+"/"+e.dossierId+"/files/"+e.referenceUid;window.open(o)}else e.referenceUid?(t.dialogPDFLoading=!0,t.dialogPDF=!0,t.$store.dispatch("viewFile",e).then(function(e){t.dialogPDFLoading=!1,document.getElementById("dialogPDFPreview"+t.id).src=e})):(toastr__WEBPACK_IMPORTED_MODULE_11___default.a.clear(),toastr__WEBPACK_IMPORTED_MODULE_11___default.a.error("File dữ liệu không tồn tại"))},viewFileWithPartNo:function(e){var t=this;if(t.dossierFilesItems){var o=t.dossierFilesItems.filter(function(t){return t.dossierPartNo===e.partNo&&!t.eForm});if(!o)return;t.fileViews=o,t.partView!==e.partNo?(t.stateView=!0,t.partView=e.partNo):(t.stateView=!t.stateView,t.partView=e.partNo)}},saveMark:function(){var e=this;e.dossierTemplateItems&&e.dossierTemplateItems.forEach(function(t,o){1===t.partType&&(t["dossierId"]=e.thongTinHoSo.dossierId,e.$store.dispatch("postDossierMark",t))})},changeFileMark:function(e,t){var o=this;if(!o.onlyView){var i=o.dossierTemplateItems[t];i["dossierId"]=o.thongTinHoSo.dossierId,i["fileMark"]=e,i["checkInput"]=o.checkInput,o.$store.dispatch("postDossierMark",i),o.dossierTemplateItems[t].fileMark=e}},changeFileCheck:function(e,t){var o=this,i=o.dossierTemplateItems[t];i["dossierId"]=o.thongTinHoSo.dossierId,i["fileCheck"]=e,i["checkInput"]=o.checkInput,2!==e?(i["fileComment"]="",o.$store.dispatch("postDossierMark",i),o.dossierTemplateItems[t].fileCheck=e):i["stateEditFileCheck"]=!0},changeFileComment:function(e,t){var o=this;null!==e.fileComment&&void 0!==e.fileComment&&""!==e.fileComment&&(e["dossierId"]=o.thongTinHoSo.dossierId,e["fileComment"]=e.fileComment,e["checkInput"]=o.checkInput,e["stateEditFileCheck"]=!e["stateEditFileCheck"],o.$store.dispatch("postDossierMark",e),o.dossierTemplateItems[t].fileComment=e.fileComment)},checkStyle:function(e){var t=this;if(1===t.checkInput)return"calc(100% - 140px)";var o=0;return 1===t.originality||1!==e.partType||t.thongTinHoSo.online||1===t.checkInput||(t.onlyView?o+=140:o+=240),e.fileCheck>0&&!t.thongTinHoSo.online&&(o+=20),e.fileCheck>0&&t.thongTinHoSo.online&&(o+=40),t.onlyView||(o+=90),"calc(100% - "+o+"px)"},checkVisibleTemp:function(e,t){var o=this;if(!o.onlyView)return!0;if(3===e.partType){if(o.dossierFilesItems.length>0){var i=o.dossierFilesItems.findIndex(function(t){return t.dossierPartNo===e.partNo});return-1!==i}return!1}return!0},changeStateViewResult:function(){var e=this;if(e.dossierFilesItems.length>0){var t=e.dossierFilesItems.findIndex(function(e){return 2===e.dossierPartType||7===e.dossierPartType});-1!==t?e.$emit("tp:change-state-view-result",!0):e.$emit("tp:change-state-view-result",!1)}else(e.partTypes.includes(2)||e.partTypes.includes(7))&&e.$emit("tp:change-state-view-result",!1)},changeOtherDossierTemp:function(e){var t=this;if(3===t.originality&&t.stateAddFileOther)t.loadingAddOther=!0,t.$store.dispatch("uploadSingleOtherFile",{dossierId:t.thongTinHoSo.dossierId,displayName:e,partNo:t.dossierTemplatesItemSelect.partNo}).then(function(e){t.loadingAddOther=!1,t.dialogAddOtherTemp=!1,t.$store.dispatch("loadDossierFiles",t.thongTinHoSo.dossierId).then(function(e){t.dossierFilesItems=e})}).catch(function(e){t.loadingAddOther=!1});else{var o=t.dossierTemplatesItemSelect;o["dossierId"]=t.thongTinHoSo.dossierId,o["displayName"]=e,o["dossierTemplateNo"]=t.thongTinHoSo.dossierTemplateNo,t.$store.dispatch("uploadSingleFile",o).then(function(e){t.progressUploadPart="",t.dialogAddOtherTemp=!1,t.$store.dispatch("loadDossierFiles",t.thongTinHoSo.dossierId).then(function(e){if(t.dossierFilesItems=e,t.recountFileTemplates(),t.stateView&&t.dossierFilesItems){var o=t.dossierFilesItems.filter(function(e){return e.dossierPartNo===t.dossierTemplatesItemSelect.partNo&&!e.eForm});o&&(t.fileViews=o)}})}).catch(function(e){t.progressUploadPart=""})}},downloadFileTemplate:function(e,t){var o=this;if(o.fileTemplateItems.length>0){var i=o.fileTemplateItems.find(function(t){return e.fileTemplateNo===t.fileTemplateNo});if(i){var s=o.initDataResource.serviceInfoApi+"/"+o.serviceInfoId+"/filetemplates/"+i.fileTemplateNo;window.open(s)}else console.log("ko thay file")}},addOtherTemplate:function(){var e=this;e.$refs.form.validate()&&e.changeOtherDossierTemp(e.otherDossierTemplate)},editDisplayName:function(e,t){var o=this;o.dossierFileIdView!==e.dossierFileId?(o.dossierFileIdView=e.dossierFileId,o.stateEdit=!0):(o.dossierFileIdView=e.dossierFileId,o.stateEdit=!o.stateEdit)},cancelDialog:function(){var e=this;e.dialogAddOtherTemp=!1,e.progressUploadPart=""},addFileOther:function(e){var t=this;t.dialogAddOtherTemp=!0,t.stateAddFileOther=!0,t.dossierTemplatesItemSelect=e},validDossierTemplate:function(){var e=this;if(e.dossierTemplateItems.length>0){for(var t=0;t<e.dossierTemplateItems.length;t++)if(e.dossierTemplateItems[t]["required"]&&!e.dossierTemplateItems[t]["passRequired"]&&e.partTypes.includes(e.dossierTemplateItems[t].partType)){var o="Chú ý :"+e.dossierTemplateItems[t].partName+" là thành phần bắt buộc!";return toastr__WEBPACK_IMPORTED_MODULE_11___default.a.clear(),toastr__WEBPACK_IMPORTED_MODULE_11___default.a.error(o),!1}return!0}return!0},changeDisplayName:function(e,t){var o=this,i={dossierId:o.thongTinHoSo.dossierId,value:value};o.$store.dispatch("changeDisplayNameFile",i).then(function(e){o.fileViews[t].displayName=e.displayName,o.stateEdit=!1}).catch(function(e){console.log("error")})},getDossierFileApplicants:function(e,t){var o=this,i={dossierId:o.thongTinHoSo.dossierId,applicantIdNo:e,fileTemplateNo:t};o.$store.dispatch("getDossierFilesApplicants",i).then(function(e){o.dossierFilesApplicant=e}).catch(function(e){console.log("error")})},showFilesApplicant:function(e){jquery__WEBPACK_IMPORTED_MODULE_10___default()("#fileApplicant-"+e).is(":visible")?jquery__WEBPACK_IMPORTED_MODULE_10___default()("#fileApplicant-"+e).hide():jquery__WEBPACK_IMPORTED_MODULE_10___default()("#fileApplicant-"+e).show()},checkKQhasFile:function(e){var t=this;if(t.partTypes.includes(2)){var o=t.dossierFilesItems.find(function(t){return e.partNo===t.dossierPartNo});return!!o}return!0},partNoApplicantHasFile:function(e){var t=this,o=t.dossierFilesApplicant.find(function(o){return o.dossierTemplateNo===t.thongTinHoSo["dossierTemplateNo"]&&o.dossierPartNo===e});return!!o},changeRecordCount:function(e){var t=this;if(!t.onlyView){var o=function(){t.doChange=setTimeout(function(){if(!t.onlyView&&Number(t.dossierTemplateItems[e]["recordCount"])>=0){var o=d_SourseCode_FDS_OPENCPS_front_end_opencps_frontend_opencps_v2_1_onegate_21_fe_node_modules_babel_runtime_corejs2_core_js_object_assign__WEBPACK_IMPORTED_MODULE_0___default()({},t.dossierTemplateItems[e],{dossierId:t.thongTinHoSo.dossierId});t.$store.dispatch("postDossierMark",o)}},3e3)};t.dossierTemplateItems[e].recordCount=t.dossierTemplateItems[e]["recordCount"]?t.dossierTemplateItems[e]["recordCount"]:"",clearTimeout(t.doChange),o()}},increaseCounter:function(e){var t=this;function o(){t.doChange=setTimeout(function(){if(!t.onlyView&&Number(t.dossierTemplateItems[e]["recordCount"])>=0){var o=d_SourseCode_FDS_OPENCPS_front_end_opencps_frontend_opencps_v2_1_onegate_21_fe_node_modules_babel_runtime_corejs2_core_js_object_assign__WEBPACK_IMPORTED_MODULE_0___default()({},t.dossierTemplateItems[e],{dossierId:t.thongTinHoSo.dossierId});t.$store.dispatch("postDossierMark",o)}},3e3)}t.dossierTemplateItems[e].recordCount=t.dossierTemplateItems[e]["recordCount"]?t.dossierTemplateItems[e]["recordCount"]:"",t.dossierTemplateItems[e]["recordCount"]=Number(t.dossierTemplateItems[e]["recordCount"])+1,clearTimeout(t.doChange),o()},decreaseCounter:function(e){var t=this;function o(){t.doChange=setTimeout(function(){if(!t.onlyView&&Number(t.dossierTemplateItems[e]["recordCount"])>=0){var o=d_SourseCode_FDS_OPENCPS_front_end_opencps_frontend_opencps_v2_1_onegate_21_fe_node_modules_babel_runtime_corejs2_core_js_object_assign__WEBPACK_IMPORTED_MODULE_0___default()({},t.dossierTemplateItems[e],{dossierId:t.thongTinHoSo.dossierId});t.$store.dispatch("postDossierMark",o)}},3e3)}t.dossierTemplateItems[e].recordCount=t.dossierTemplateItems[e]["recordCount"]?t.dossierTemplateItems[e]["recordCount"]:"",t.dossierTemplateItems[e]["recordCount"]=Number(t.dossierTemplateItems[e]["recordCount"])-1,clearTimeout(t.doChange),o()},getDocumentTypeIcon:function(e){var t="doc,docx",o="xls,xlsx",i="png,jpg,jpeg";return e?t.indexOf(e.toLowerCase())>=0?{icon:"fas fa fa-file-word-o",color:"blue",size:14}:o.indexOf(e.toLowerCase())>=0?{icon:"fas fa fa-file-excel-o",color:"green",size:14}:"pdf"===e.toLowerCase()?{icon:"fa fa-file-pdf-o",color:"red",size:14}:i.indexOf(e.toLowerCase())>=0?{icon:"fas fa fa-file-image-o",color:"primary",size:14}:{icon:"fas fa fa-paperclip",color:"",size:14}:""}}}}}]);
//# sourceMappingURL=chunk-0248f1b2.js.map